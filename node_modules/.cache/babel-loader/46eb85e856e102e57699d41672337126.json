{"ast":null,"code":"import _classCallCheck from \"/Users/danielobedortegahernandez/iCloud/Documents/GitHub/backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/danielobedortegahernandez/iCloud/Documents/GitHub/backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/danielobedortegahernandez/iCloud/Documents/GitHub/backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/danielobedortegahernandez/iCloud/Documents/GitHub/backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/danielobedortegahernandez/iCloud/Documents/GitHub/backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"/Users/danielobedortegahernandez/iCloud/Documents/GitHub/backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _combineReducers,\n    _jsxFileName = \"/Users/danielobedortegahernandez/iCloud/Documents/GitHub/backoffice/src/Reducers/Dao.js\";\n\nimport React, { Component } from 'react';\nimport { createStore, combineReducers, applyMiddleware } from 'redux';\nimport { Provider } from 'react-redux';\nimport { connect } from 'react-redux';\nimport thunk from 'redux-thunk';\nimport promise from \"redux-promise-middleware\";\nimport { Redirect, Route, Switch } from 'react-router-dom';\nimport { Container } from 'reactstrap';\nimport Login from '../views/Pages/Login/Login';\nimport DaoLogin from './DaoLogin';\nimport DaoMyAccount from './DaoMyAcoount';\nimport DaoGeo from './DaoGeo';\nimport DaoOrders from './DaoOrders';\nimport DaoProducts from './DaoProducts';\nimport DaoCombinations from './DaoCombinations';\nimport firebase from '../Actions/Firebase.js';\nimport 'firebase/firestore';\nimport DbCrud from '../Actions/DbCrud';\nimport { AppAside, AppBreadcrumb, AppFooter, AppHeader, AppSidebar, AppSidebarFooter, AppSidebarForm, AppSidebarHeader, AppSidebarMinimizer, AppSidebarNav } from '@coreui/react'; // sidebar nav config\n\nimport navigation from '../_nav'; // routes config\n\nimport routes from '../routes';\nimport DefaultAside from '../containers/DefaultLayout/DefaultAside';\nimport DefaultFooter from '../containers/DefaultLayout/DefaultFooter';\nimport DefaultHeader from '../containers/DefaultLayout/DefaultHeader';\nimport { match } from 'core-js/fn/symbol'; //Utilizamos el combineReducers con el fin de administrar los estados, de esta manera cada estado tiene asociado  \n//una funcion que se encargara de su adminsitraci√≥n \n\nvar reducer = combineReducers((_combineReducers = {\n  login: DaoLogin.reducerLogin,\n  MyAccount: DaoMyAccount.MyAccount,\n  DaoGeo: DaoGeo.Geo,\n  DaoCombinations: DaoCombinations.Combinations,\n  DaoOrders: DaoGeo.Geo\n}, _defineProperty(_combineReducers, \"DaoOrders\", DaoOrders.Orders), _defineProperty(_combineReducers, \"DaoOrders\", DaoOrders.Orders), _combineReducers)); //Donde almacenamos nuestro estado\n\nvar store = createStore(reducer, applyMiddleware(thunk, promise));\nvar usersData = [];\n\nfunction DaoIni(props) {\n  var userdate = props.userdate;\n  var TmpItems = [];\n  navigation[\"items\"].forEach(function (val, inav) {\n    val.rol.forEach(function (valrol, irol) {\n      if (valrol == props.userdate.rol) {\n        try {\n          var TmpCild = [];\n          val.children.forEach(function (childVal, iChild) {\n            childVal.rol.forEach(function (childRol, iRol) {\n              if (childRol == props.userdate.rol) {\n                TmpCild.push(childVal);\n              }\n            });\n          });\n        } catch (e) {}\n\n        val.children = TmpCild;\n        TmpItems.push(val);\n      }\n    });\n  });\n  TmpItems = {\n    items: TmpItems\n  };\n  return React.createElement(\"div\", {\n    className: \"app\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(AppHeader, {\n    fixed: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(DefaultHeader, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"app-body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(AppSidebar, {\n    fixed: true,\n    display: \"lg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(AppSidebarHeader, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }), React.createElement(AppSidebarForm, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }), React.createElement(AppSidebarNav, Object.assign({\n    navConfig: TmpItems\n  }, props, {\n    userdate: userdate,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  })), React.createElement(AppSidebarFooter, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }), React.createElement(AppSidebarMinimizer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  })), React.createElement(\"main\", {\n    className: \"main\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(AppBreadcrumb, {\n    appRoutes: routes,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }), React.createElement(Container, {\n    fluid: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(Switch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, routes.map(function (route, idx) {\n    var flag = false;\n    route.rol.forEach(function (valrol, i) {\n      if (valrol == props.userdate.rol) flag = true;\n    });\n    return route.component && flag ? React.createElement(Route, {\n      key: idx,\n      path: route.path,\n      exact: route.exact,\n      name: route.name,\n      render: function render(props) {\n        return React.createElement(route.component, Object.assign({}, props, {\n          userdate: userdate,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }));\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }) : null;\n  })))), React.createElement(AppAside, {\n    fixed: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(DefaultAside, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }))), React.createElement(AppFooter, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, React.createElement(DefaultFooter, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  })));\n}\n\nvar Dao =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Dao, _Component);\n\n  function Dao(props) {\n    var _this;\n\n    _classCallCheck(this, Dao);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Dao).call(this, props));\n    _this.state = {\n      _id: \"\",\n      name: \"\",\n      unit: [],\n      email: \"\",\n      phone: \"\",\n      rol: 0\n    };\n    return _this;\n  }\n\n  _createClass(Dao, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      firebase.auth().onAuthStateChanged(function (user) {\n        if (user) {\n          if (window.location.hash == \"#/login\" || window.location.hash == \"#/\") window.location = \"#/dashboard\";\n          document.getElementById('root').style.visibility = 'visible';\n          var emailUser = {\n            email: user.email\n          }; //user.email\n\n          var UrlServerless = \"https://us-central1-serverless-278902.cloudfunctions.net/serverless/users/find\";\n          var requestOptions = {\n            method: 'POST',\n            headers: {\n              \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(emailUser)\n          };\n          fetch(UrlServerless, requestOptions).then(function (data) {\n            return data.json();\n          }).then(function (data) {\n            _this2.setState({\n              _id: data[0]._id,\n              name: data[0].name,\n              unit: data[0].unit,\n              uid: user.uid,\n              email: user.email,\n              phone: data[0].phone,\n              rol: data[0].rol\n            });\n          }).catch(function (error) {\n            console.log(\"Error cargando datos \" + error);\n          });\n        } else {\n          if (window.location.hash != \"#/login\" || window.location.hash == \"#/\") window.location = \"#/login\";\n          document.getElementById('root').style.visibility = 'visible';\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (window.location.hash == \"#/login\") {\n        if (this.state.email == \"\") {\n          return React.createElement(Provider, {\n            store: store,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 185\n            },\n            __self: this\n          }, React.createElement(Switch, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 186\n            },\n            __self: this\n          }, React.createElement(Route, {\n            name: \"Login Page\",\n            component: Login,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 187\n            },\n            __self: this\n          })));\n        } else {\n          window.location = \"#/dashboard\";\n        }\n      } else {\n        if (this.state.email == \"\") {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 196\n            },\n            __self: this\n          }, \"Cargando...\");\n        } else {\n          var userdate = this.state;\n          return React.createElement(Provider, {\n            store: store,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 201\n            },\n            __self: this\n          }, React.createElement(DaoIni, Object.assign({}, this.props, {\n            userdate: userdate,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 202\n            },\n            __self: this\n          })));\n        }\n      }\n    }\n  }]);\n\n  return Dao;\n}(Component);\n\nexport default Dao;","map":{"version":3,"sources":["/Users/danielobedortegahernandez/iCloud/Documents/GitHub/backoffice/src/Reducers/Dao.js"],"names":["React","Component","createStore","combineReducers","applyMiddleware","Provider","connect","thunk","promise","Redirect","Route","Switch","Container","Login","DaoLogin","DaoMyAccount","DaoGeo","DaoOrders","DaoProducts","DaoCombinations","firebase","DbCrud","AppAside","AppBreadcrumb","AppFooter","AppHeader","AppSidebar","AppSidebarFooter","AppSidebarForm","AppSidebarHeader","AppSidebarMinimizer","AppSidebarNav","navigation","routes","DefaultAside","DefaultFooter","DefaultHeader","match","reducer","login","reducerLogin","MyAccount","Geo","Combinations","Orders","store","usersData","DaoIni","props","userdate","TmpItems","forEach","val","inav","rol","valrol","irol","TmpCild","children","childVal","iChild","childRol","iRol","push","e","items","map","route","idx","flag","i","component","path","exact","name","Dao","state","_id","unit","email","phone","auth","onAuthStateChanged","user","window","location","hash","document","getElementById","style","visibility","emailUser","UrlServerless","requestOptions","method","headers","body","JSON","stringify","fetch","then","data","json","setState","uid","catch","error","console","log"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { createStore, combineReducers, applyMiddleware } from 'redux';\nimport { Provider } from 'react-redux';\nimport { connect } from 'react-redux';\nimport thunk from 'redux-thunk'\nimport promise from \"redux-promise-middleware\";\nimport { Redirect, Route, Switch } from 'react-router-dom';\nimport { Container } from 'reactstrap';\nimport Login from '../views/Pages/Login/Login';\nimport DaoLogin from './DaoLogin';\nimport DaoMyAccount from './DaoMyAcoount';\nimport DaoGeo from './DaoGeo';\nimport DaoOrders from './DaoOrders';\nimport DaoProducts from './DaoProducts';\nimport DaoCombinations from './DaoCombinations';\nimport firebase from '../Actions/Firebase.js';\nimport 'firebase/firestore';\nimport DbCrud from '../Actions/DbCrud';\n\nimport {AppAside, AppBreadcrumb, AppFooter, AppHeader, AppSidebar, AppSidebarFooter,\n  AppSidebarForm, AppSidebarHeader, AppSidebarMinimizer, AppSidebarNav,} from '@coreui/react';\n\n// sidebar nav config\nimport navigation from '../_nav';\n// routes config\nimport routes from '../routes';\n\nimport DefaultAside from '../containers/DefaultLayout/DefaultAside';\nimport DefaultFooter from '../containers/DefaultLayout/DefaultFooter';\nimport DefaultHeader from '../containers/DefaultLayout/DefaultHeader';\nimport { match } from 'core-js/fn/symbol';\n\n//Utilizamos el combineReducers con el fin de administrar los estados, de esta manera cada estado tiene asociado  \n//una funcion que se encargara de su adminsitraci√≥n \nconst reducer = combineReducers({\n    login: DaoLogin.reducerLogin,\n    MyAccount: DaoMyAccount.MyAccount,\n    DaoGeo: DaoGeo.Geo,\n    DaoCombinations: DaoCombinations.Combinations,\n    DaoOrders: DaoGeo.Geo,\n    DaoOrders: DaoOrders.Orders,\n    DaoOrders: DaoOrders.Orders,\n});\n\n//Donde almacenamos nuestro estado\nconst store = createStore(reducer, applyMiddleware(thunk, promise));\n\nconst usersData = [];\n\nfunction DaoIni(props) {\n\n    const userdate= props.userdate;\n    var TmpItems = [];\n    navigation[\"items\"].forEach((val, inav) => {\n        val.rol.forEach((valrol, irol) => {\n            if(valrol == props.userdate.rol){\n                try{\n                    var TmpCild = [];\n                    val.children.forEach((childVal, iChild) => {\n                        childVal.rol.forEach((childRol, iRol) => {\n                            if(childRol == props.userdate.rol){\n                                TmpCild.push(childVal);\n                            }\n                        });\n                    });\n\n                }catch(e){}\n                val.children = TmpCild;\n                TmpItems.push(val);\n            } \n        })\n    })\n    TmpItems = {items:TmpItems}\n\n    return (\n        <div className=\"app\">\n             <AppHeader fixed>\n             <DefaultHeader />\n             </AppHeader>\n                 <div className=\"app-body\">\n             <AppSidebar fixed display=\"lg\">\n                 <AppSidebarHeader />\n                 <AppSidebarForm />\n                 <AppSidebarNav navConfig={TmpItems} {...props} userdate={userdate} />\n                 \n                 <AppSidebarFooter />\n                 <AppSidebarMinimizer />\n             </AppSidebar>\n             <main className=\"main\">\n                 <AppBreadcrumb appRoutes={routes}/>\n                 <Container fluid>\n                 <Switch>\n                     {routes.map(\n                       (route, idx) => {\n                        var flag = false;\n                        route.rol.forEach((valrol, i) => {\n                            if(valrol == props.userdate.rol) flag = true;\n                        });\n\n                        return (route.component && flag) ? (\n                            <Route \n                                key={idx} \n                                path={route.path} \n                                exact={route.exact} \n                                name={route.name}\n                                render={props => (<route.component {...props} userdate={userdate} />)} \n                        />)\n                        : (null);\n                     },\n                     )}\n                 </Switch>\n                 </Container>\n             </main>\n             <AppAside fixed>\n                 <DefaultAside />\n             </AppAside>\n             </div>\n                 <AppFooter>\n             <DefaultFooter />\n             </AppFooter>\n        </div>\n    )\n}\n\nclass Dao extends Component {\n\n    constructor(props){\n        super(props);\n        \n        this.state = {\n            _id:\"\",\n            name:\"\",\n            unit:[],\n            email:\"\",\n            phone:\"\",\n            rol:0\n        }\n    }\n\n    componentDidMount () {\n        firebase.auth().onAuthStateChanged(user => {\n            if (user) {\n                if(window.location.hash ==  \"#/login\" || window.location.hash ==  \"#/\" ) window.location = \"#/dashboard\";\n                document.getElementById('root').style.visibility = 'visible';\n                const emailUser = {\n                    email:user.email\n                };\n                //user.email\n                var UrlServerless = \"https://us-central1-serverless-278902.cloudfunctions.net/serverless/users/find\";\n                const requestOptions = {\n                    method: 'POST',\n                    headers: { \n                        \"Content-Type\": \"application/json\"\n                    },\n                    body:JSON.stringify(emailUser)\n                };\n                fetch(UrlServerless,requestOptions)\n                .then(data => data.json())\n                .then(data => {\n                    this.setState(\n                        {\n                            _id:data[0]._id,\n                            name:data[0].name,\n                            unit:data[0].unit,\n                            uid:user.uid,\n                            email:user.email,\n                            phone:data[0].phone,\n                            rol:data[0].rol\n                        }\n                    )\n                })\n                .catch(function (error) {console.log(\"Error cargando datos \" + error);}); \n            } else {\n                if(window.location.hash !=  \"#/login\" || window.location.hash ==  \"#/\") window.location = \"#/login\";\n                document.getElementById('root').style.visibility = 'visible';\n            }\n        });\n    }\n\n  render() {\n      \n    if(window.location.hash == \"#/login\"){\n        if(this.state.email == \"\"){\n            return(\n                <Provider store={store}>\n                    <Switch>\n                        <Route name=\"Login Page\" component={Login} />\n                    </Switch>\n                </Provider>\n            )\n        }else{\n            window.location = \"#/dashboard\";\n        }\n    }else{\n        if(this.state.email == \"\"){\n            return (<div>Cargando...</div>)\n        }else{\n            var userdate = this.state;\n            \n            return (\n                <Provider store={store} >\n                    <DaoIni {...this.props} userdate={userdate}/>\n                </Provider>\n            )\n        }\n    }\n  }\n}\n\nexport default Dao;"]},"metadata":{},"sourceType":"module"}