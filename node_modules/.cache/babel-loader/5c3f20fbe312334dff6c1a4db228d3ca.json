{"ast":null,"code":"var productsObj = {\n  newId: \"\",\n  listFilters: [],\n  listProducts: [],\n  pagination: [],\n  listCategories: [],\n  listBrands: [],\n  listSuppliers: [],\n  listTaxes: [],\n  listStores: [] //se pasa un estado por defecto para definicion de estructura\n\n};\n\nfunction Products() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : productsObj;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  //console.log(action.data);\n  var NewState = Object.assign({}, state);\n\n  if (action.type == \"loadProducts\") {\n    NewState.pagination = action.data.info;\n    NewState.listProducts = action.data.data;\n    NewState.listCategories = action.data.categories;\n    NewState.listBrands = action.data.brands;\n    NewState.listSuppliers = action.data.suppliers;\n    NewState.listTaxes = action.data.taxes;\n    NewState.listStores = action.data.stores;\n  }\n\n  if (action.type == \"updateProducts\") {\n    if (NewState.listProducts.length > 0) {\n      if (action.data._id != undefined) NewState.listProducts.push(action.data);else {\n        for (var i = 0; i < NewState.listProducts.length; i++) {\n          if (NewState.listProducts[i]._id == action.data.update._id) {\n            NewState.listProducts[i] = action.data.body;\n            break;\n          }\n        }\n      }\n    }\n  }\n\n  if (action.type == \"deleteProducts\") {\n    if (NewState.listProducts.length > 0) {\n      var listProductTmp = [];\n\n      for (var i = 0; i < NewState.listProducts.length; i++) {\n        if (NewState.listProducts[i]._id != action.data.update._id) {\n          listProductTmp.push(NewState.listProducts[i]);\n        }\n      }\n\n      NewState.listProducts = listProductTmp;\n    }\n  }\n\n  if (action.type == \"loadFilters\") {\n    var brands = {};\n\n    for (var i = 0; i < action.data.idBrands.length; i++) {\n      console.log(\"------- \" + i);\n\n      for (var j = 0; j < NewState.listBrands.length; j++) {\n        console.log(\"******* \" + j);\n\n        if (action.data.idBrands[i] == NewState.listBrands[j]._id) {\n          console.log(\"Entre\");\n          brands.push(NewState.listBrands[j]);\n          break;\n        }\n      }\n    }\n\n    NewState.listFilters['brands'] = brands;\n    console.log(NewState.listFilters);\n  }\n\n  return NewState;\n}\n\nvar DaoProducts = {\n  Products: Products\n};\nexport default DaoProducts;","map":{"version":3,"sources":["/Users/danielobedortegahernandez/iCloud/Documents/GitHub/backoffice/src/Reducers/DaoProducts.js"],"names":["productsObj","newId","listFilters","listProducts","pagination","listCategories","listBrands","listSuppliers","listTaxes","listStores","Products","state","action","NewState","Object","assign","type","data","info","categories","brands","suppliers","taxes","stores","length","_id","undefined","push","i","update","body","listProductTmp","idBrands","console","log","j","DaoProducts"],"mappings":"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","sourcesContent":["const productsObj = {\n    newId:\"\",\n    listFilters:[],\n    listProducts:[],\n    pagination:[], \n    listCategories:[],\n    listBrands:[],\n    listSuppliers:[],\n    listTaxes:[],\n    listStores:[]\n}\n\n//se pasa un estado por defecto para definicion de estructura\nfunction Products(state = productsObj, action){\n    //console.log(action.data);\n    var NewState = Object.assign({},state);\n    if(action.type == \"loadProducts\"){\n        NewState.pagination = action.data.info;\n        NewState.listProducts = action.data.data;\n        NewState.listCategories = action.data.categories;\n        NewState.listBrands = action.data.brands;\n        NewState.listSuppliers = action.data.suppliers;\n        NewState.listTaxes = action.data.taxes;\n        NewState.listStores = action.data.stores;\n    }\n    if(action.type == \"updateProducts\"){\n        if(NewState.listProducts.length > 0){\n           if(action.data._id != undefined) NewState.listProducts.push(action.data);\n           else{\n               for(var i=0; i<NewState.listProducts.length; i++){\n                    if(NewState.listProducts[i]._id == action.data.update._id){\n                        NewState.listProducts[i] = action.data.body;\n                        break;\n                    }\n               }\n           }\n        }\n    }\n    if(action.type == \"deleteProducts\"){\n        if(NewState.listProducts.length > 0){\n            var listProductTmp = [];\n            for(var i=0; i<NewState.listProducts.length; i++){\n                if(NewState.listProducts[i]._id != action.data.update._id){\n                    listProductTmp.push(NewState.listProducts[i]);\n                }\n           }\n           NewState.listProducts = listProductTmp;\n        }\n    }\n    if(action.type == \"loadFilters\"){\n        var brands = {};\n        for(var i=0; i<action.data.idBrands.length; i++){\n            console.log(\"------- \"+i);\n            for(var j=0; j<NewState.listBrands.length; j++){\n                console.log(\"******* \"+j);\n                if(action.data.idBrands[i] == NewState.listBrands[j]._id){\n                    console.log(\"Entre\");\n                    brands.push(NewState.listBrands[j]);\n                    break;\n                }\n            }\n        }\n        NewState.listFilters['brands'] = brands;\n        console.log(NewState.listFilters);\n    }\n    return NewState;\n}\n\nconst DaoProducts = {Products}\n\nexport default DaoProducts;"]},"metadata":{},"sourceType":"module"}