{"ast":null,"code":"!function (t, e) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = e() : \"function\" == typeof define && define.amd ? define(e) : (t = t || self).firebase = e();\n}(this, function () {\n  \"use strict\";\n\n  !function (t) {\n    if (!t.fetch) {\n      var e = \"URLSearchParams\" in t,\n          n = \"Symbol\" in t && \"iterator\" in Symbol,\n          a = \"FileReader\" in t && \"Blob\" in t && function () {\n        try {\n          return new Blob(), !0;\n        } catch (t) {\n          return !1;\n        }\n      }(),\n          r = \"FormData\" in t,\n          i = \"ArrayBuffer\" in t;\n\n      if (i) var o = [\"[object Int8Array]\", \"[object Uint8Array]\", \"[object Uint8ClampedArray]\", \"[object Int16Array]\", \"[object Uint16Array]\", \"[object Int32Array]\", \"[object Uint32Array]\", \"[object Float32Array]\", \"[object Float64Array]\"],\n          s = function s(t) {\n        return t && DataView.prototype.isPrototypeOf(t);\n      },\n          u = ArrayBuffer.isView || function (t) {\n        return t && -1 < o.indexOf(Object.prototype.toString.call(t));\n      };\n      d.prototype.append = function (t, e) {\n        t = l(t), e = f(e);\n        var n = this.map[t];\n        this.map[t] = n ? n + \",\" + e : e;\n      }, d.prototype.delete = function (t) {\n        delete this.map[l(t)];\n      }, d.prototype.get = function (t) {\n        return t = l(t), this.has(t) ? this.map[t] : null;\n      }, d.prototype.has = function (t) {\n        return this.map.hasOwnProperty(l(t));\n      }, d.prototype.set = function (t, e) {\n        this.map[l(t)] = f(e);\n      }, d.prototype.forEach = function (t, e) {\n        for (var n in this.map) {\n          this.map.hasOwnProperty(n) && t.call(e, this.map[n], n, this);\n        }\n      }, d.prototype.keys = function () {\n        var n = [];\n        return this.forEach(function (t, e) {\n          n.push(e);\n        }), p(n);\n      }, d.prototype.values = function () {\n        var e = [];\n        return this.forEach(function (t) {\n          e.push(t);\n        }), p(e);\n      }, d.prototype.entries = function () {\n        var n = [];\n        return this.forEach(function (t, e) {\n          n.push([e, t]);\n        }), p(n);\n      }, n && (d.prototype[Symbol.iterator] = d.prototype.entries);\n      var c = [\"DELETE\", \"GET\", \"HEAD\", \"OPTIONS\", \"POST\", \"PUT\"];\n      w.prototype.clone = function () {\n        return new w(this, {\n          body: this._bodyInit\n        });\n      }, b.call(w.prototype), b.call(E.prototype), E.prototype.clone = function () {\n        return new E(this._bodyInit, {\n          status: this.status,\n          statusText: this.statusText,\n          headers: new d(this.headers),\n          url: this.url\n        });\n      }, E.error = function () {\n        var t = new E(null, {\n          status: 0,\n          statusText: \"\"\n        });\n        return t.type = \"error\", t;\n      };\n      var h = [301, 302, 303, 307, 308];\n      E.redirect = function (t, e) {\n        if (-1 === h.indexOf(e)) throw new RangeError(\"Invalid status code\");\n        return new E(null, {\n          status: e,\n          headers: {\n            location: t\n          }\n        });\n      }, t.Headers = d, t.Request = w, t.Response = E, t.fetch = function (n, i) {\n        return new Promise(function (r, t) {\n          var e = new w(n, i),\n              o = new XMLHttpRequest();\n          o.onload = function () {\n            var t,\n                i,\n                e = {\n              status: o.status,\n              statusText: o.statusText,\n              headers: (t = o.getAllResponseHeaders() || \"\", i = new d(), t.replace(/\\r?\\n[\\t ]+/g, \" \").split(/\\r?\\n/).forEach(function (t) {\n                var e = t.split(\":\"),\n                    n = e.shift().trim();\n\n                if (n) {\n                  var r = e.join(\":\").trim();\n                  i.append(n, r);\n                }\n              }), i)\n            };\n            e.url = \"responseURL\" in o ? o.responseURL : e.headers.get(\"X-Request-URL\");\n            var n = \"response\" in o ? o.response : o.responseText;\n            r(new E(n, e));\n          }, o.onerror = function () {\n            t(new TypeError(\"Network request failed\"));\n          }, o.ontimeout = function () {\n            t(new TypeError(\"Network request failed\"));\n          }, o.open(e.method, e.url, !0), \"include\" === e.credentials ? o.withCredentials = !0 : \"omit\" === e.credentials && (o.withCredentials = !1), \"responseType\" in o && a && (o.responseType = \"blob\"), e.headers.forEach(function (t, e) {\n            o.setRequestHeader(e, t);\n          }), o.send(void 0 === e._bodyInit ? null : e._bodyInit);\n        });\n      }, t.fetch.polyfill = !0;\n    }\n\n    function l(t) {\n      if (\"string\" != typeof t && (t = String(t)), /[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(t)) throw new TypeError(\"Invalid character in header field name\");\n      return t.toLowerCase();\n    }\n\n    function f(t) {\n      return \"string\" != typeof t && (t = String(t)), t;\n    }\n\n    function p(e) {\n      var t = {\n        next: function next() {\n          var t = e.shift();\n          return {\n            done: void 0 === t,\n            value: t\n          };\n        }\n      };\n      return n && (t[Symbol.iterator] = function () {\n        return t;\n      }), t;\n    }\n\n    function d(e) {\n      this.map = {}, e instanceof d ? e.forEach(function (t, e) {\n        this.append(e, t);\n      }, this) : Array.isArray(e) ? e.forEach(function (t) {\n        this.append(t[0], t[1]);\n      }, this) : e && Object.getOwnPropertyNames(e).forEach(function (t) {\n        this.append(t, e[t]);\n      }, this);\n    }\n\n    function y(t) {\n      if (t.bodyUsed) return Promise.reject(new TypeError(\"Already read\"));\n      t.bodyUsed = !0;\n    }\n\n    function m(n) {\n      return new Promise(function (t, e) {\n        n.onload = function () {\n          t(n.result);\n        }, n.onerror = function () {\n          e(n.error);\n        };\n      });\n    }\n\n    function g(t) {\n      var e = new FileReader(),\n          n = m(e);\n      return e.readAsArrayBuffer(t), n;\n    }\n\n    function v(t) {\n      if (t.slice) return t.slice(0);\n      var e = new Uint8Array(t.byteLength);\n      return e.set(new Uint8Array(t)), e.buffer;\n    }\n\n    function b() {\n      return this.bodyUsed = !1, this._initBody = function (t) {\n        if (this._bodyInit = t) {\n          if (\"string\" == typeof t) this._bodyText = t;else if (a && Blob.prototype.isPrototypeOf(t)) this._bodyBlob = t;else if (r && FormData.prototype.isPrototypeOf(t)) this._bodyFormData = t;else if (e && URLSearchParams.prototype.isPrototypeOf(t)) this._bodyText = t.toString();else if (i && a && s(t)) this._bodyArrayBuffer = v(t.buffer), this._bodyInit = new Blob([this._bodyArrayBuffer]);else {\n            if (!i || !ArrayBuffer.prototype.isPrototypeOf(t) && !u(t)) throw new Error(\"unsupported BodyInit type\");\n            this._bodyArrayBuffer = v(t);\n          }\n        } else this._bodyText = \"\";\n        this.headers.get(\"content-type\") || (\"string\" == typeof t ? this.headers.set(\"content-type\", \"text/plain;charset=UTF-8\") : this._bodyBlob && this._bodyBlob.type ? this.headers.set(\"content-type\", this._bodyBlob.type) : e && URLSearchParams.prototype.isPrototypeOf(t) && this.headers.set(\"content-type\", \"application/x-www-form-urlencoded;charset=UTF-8\"));\n      }, a && (this.blob = function () {\n        var t = y(this);\n        if (t) return t;\n        if (this._bodyBlob) return Promise.resolve(this._bodyBlob);\n        if (this._bodyArrayBuffer) return Promise.resolve(new Blob([this._bodyArrayBuffer]));\n        if (this._bodyFormData) throw new Error(\"could not read FormData body as blob\");\n        return Promise.resolve(new Blob([this._bodyText]));\n      }, this.arrayBuffer = function () {\n        return this._bodyArrayBuffer ? y(this) || Promise.resolve(this._bodyArrayBuffer) : this.blob().then(g);\n      }), this.text = function () {\n        var t,\n            e,\n            n,\n            r = y(this);\n        if (r) return r;\n        if (this._bodyBlob) return t = this._bodyBlob, e = new FileReader(), n = m(e), e.readAsText(t), n;\n        if (this._bodyArrayBuffer) return Promise.resolve(function (t) {\n          for (var e = new Uint8Array(t), n = new Array(e.length), r = 0; r < e.length; r++) {\n            n[r] = String.fromCharCode(e[r]);\n          }\n\n          return n.join(\"\");\n        }(this._bodyArrayBuffer));\n        if (this._bodyFormData) throw new Error(\"could not read FormData body as text\");\n        return Promise.resolve(this._bodyText);\n      }, r && (this.formData = function () {\n        return this.text().then(_);\n      }), this.json = function () {\n        return this.text().then(JSON.parse);\n      }, this;\n    }\n\n    function w(t, e) {\n      var n,\n          r,\n          i = (e = e || {}).body;\n\n      if (t instanceof w) {\n        if (t.bodyUsed) throw new TypeError(\"Already read\");\n        this.url = t.url, this.credentials = t.credentials, e.headers || (this.headers = new d(t.headers)), this.method = t.method, this.mode = t.mode, i || null == t._bodyInit || (i = t._bodyInit, t.bodyUsed = !0);\n      } else this.url = String(t);\n\n      if (this.credentials = e.credentials || this.credentials || \"omit\", !e.headers && this.headers || (this.headers = new d(e.headers)), this.method = (n = e.method || this.method || \"GET\", r = n.toUpperCase(), -1 < c.indexOf(r) ? r : n), this.mode = e.mode || this.mode || null, this.referrer = null, (\"GET\" === this.method || \"HEAD\" === this.method) && i) throw new TypeError(\"Body not allowed for GET or HEAD requests\");\n\n      this._initBody(i);\n    }\n\n    function _(t) {\n      var i = new FormData();\n      return t.trim().split(\"&\").forEach(function (t) {\n        if (t) {\n          var e = t.split(\"=\"),\n              n = e.shift().replace(/\\+/g, \" \"),\n              r = e.join(\"=\").replace(/\\+/g, \" \");\n          i.append(decodeURIComponent(n), decodeURIComponent(r));\n        }\n      }), i;\n    }\n\n    function E(t, e) {\n      e || (e = {}), this.type = \"default\", this.status = void 0 === e.status ? 200 : e.status, this.ok = 200 <= this.status && this.status < 300, this.statusText = \"statusText\" in e ? e.statusText : \"OK\", this.headers = new d(e.headers), this.url = e.url || \"\", this._initBody(t);\n    }\n  }(\"undefined\" != typeof self ? self : void 0);\n  var t = \"undefined\" != typeof globalThis ? globalThis : \"undefined\" != typeof window ? window : \"undefined\" != typeof global ? global : \"undefined\" != typeof self ? self : {};\n\n  function e(t, e) {\n    return t(e = {\n      exports: {}\n    }, e.exports), e.exports;\n  }\n\n  function n(e) {\n    var n = this.constructor;\n    return this.then(function (t) {\n      return n.resolve(e()).then(function () {\n        return t;\n      });\n    }, function (t) {\n      return n.resolve(e()).then(function () {\n        return n.reject(t);\n      });\n    });\n  }\n\n  var r = setTimeout;\n\n  function u(t) {\n    return Boolean(t && void 0 !== t.length);\n  }\n\n  function i() {}\n\n  function o(t) {\n    if (!(this instanceof o)) throw new TypeError(\"Promises must be constructed via new\");\n    if (\"function\" != typeof t) throw new TypeError(\"not a function\");\n    this._state = 0, this._handled = !1, this._value = void 0, this._deferreds = [], f(t, this);\n  }\n\n  function a(n, r) {\n    for (; 3 === n._state;) {\n      n = n._value;\n    }\n\n    0 !== n._state ? (n._handled = !0, o._immediateFn(function () {\n      var t = 1 === n._state ? r.onFulfilled : r.onRejected;\n\n      if (null !== t) {\n        var e;\n\n        try {\n          e = t(n._value);\n        } catch (t) {\n          return void c(r.promise, t);\n        }\n\n        s(r.promise, e);\n      } else (1 === n._state ? s : c)(r.promise, n._value);\n    })) : n._deferreds.push(r);\n  }\n\n  function s(e, t) {\n    try {\n      if (t === e) throw new TypeError(\"A promise cannot be resolved with itself.\");\n\n      if (t && (\"object\" == typeof t || \"function\" == typeof t)) {\n        var n = t.then;\n        if (t instanceof o) return e._state = 3, e._value = t, void h(e);\n        if (\"function\" == typeof n) return void f((r = n, i = t, function () {\n          r.apply(i, arguments);\n        }), e);\n      }\n\n      e._state = 1, e._value = t, h(e);\n    } catch (t) {\n      c(e, t);\n    }\n\n    var r, i;\n  }\n\n  function c(t, e) {\n    t._state = 2, t._value = e, h(t);\n  }\n\n  function h(t) {\n    2 === t._state && 0 === t._deferreds.length && o._immediateFn(function () {\n      t._handled || o._unhandledRejectionFn(t._value);\n    });\n\n    for (var e = 0, n = t._deferreds.length; e < n; e++) {\n      a(t, t._deferreds[e]);\n    }\n\n    t._deferreds = null;\n  }\n\n  function l(t, e, n) {\n    this.onFulfilled = \"function\" == typeof t ? t : null, this.onRejected = \"function\" == typeof e ? e : null, this.promise = n;\n  }\n\n  function f(t, e) {\n    var n = !1;\n\n    try {\n      t(function (t) {\n        n || (n = !0, s(e, t));\n      }, function (t) {\n        n || (n = !0, c(e, t));\n      });\n    } catch (t) {\n      if (n) return;\n      n = !0, c(e, t);\n    }\n  }\n\n  o.prototype.catch = function (t) {\n    return this.then(null, t);\n  }, o.prototype.then = function (t, e) {\n    var n = new this.constructor(i);\n    return a(this, new l(t, e, n)), n;\n  }, o.prototype.finally = n, o.all = function (e) {\n    return new o(function (r, i) {\n      if (!u(e)) return i(new TypeError(\"Promise.all accepts an array\"));\n      var o = Array.prototype.slice.call(e);\n      if (0 === o.length) return r([]);\n      var a = o.length;\n\n      function s(e, t) {\n        try {\n          if (t && (\"object\" == typeof t || \"function\" == typeof t)) {\n            var n = t.then;\n            if (\"function\" == typeof n) return void n.call(t, function (t) {\n              s(e, t);\n            }, i);\n          }\n\n          o[e] = t, 0 == --a && r(o);\n        } catch (t) {\n          i(t);\n        }\n      }\n\n      for (var t = 0; t < o.length; t++) {\n        s(t, o[t]);\n      }\n    });\n  }, o.resolve = function (e) {\n    return e && \"object\" == typeof e && e.constructor === o ? e : new o(function (t) {\n      t(e);\n    });\n  }, o.reject = function (n) {\n    return new o(function (t, e) {\n      e(n);\n    });\n  }, o.race = function (i) {\n    return new o(function (t, e) {\n      if (!u(i)) return e(new TypeError(\"Promise.race accepts an array\"));\n\n      for (var n = 0, r = i.length; n < r; n++) {\n        o.resolve(i[n]).then(t, e);\n      }\n    });\n  }, o._immediateFn = \"function\" == typeof setImmediate && function (t) {\n    setImmediate(t);\n  } || function (t) {\n    r(t, 0);\n  }, o._unhandledRejectionFn = function (t) {\n    \"undefined\" != typeof console && console && console.warn(\"Possible Unhandled Promise Rejection:\", t);\n  };\n\n  var p = function () {\n    if (\"undefined\" != typeof self) return self;\n    if (\"undefined\" != typeof window) return window;\n    if (void 0 !== t) return t;\n    throw new Error(\"unable to locate global object\");\n  }();\n\n  \"Promise\" in p ? p.Promise.prototype.finally || (p.Promise.prototype.finally = n) : p.Promise = o;\n\n  var d,\n      y,\n      m,\n      g = \"object\",\n      v = function v(t) {\n    return t && t.Math == Math && t;\n  },\n      b = v(typeof globalThis == g && globalThis) || v(typeof window == g && window) || v(typeof self == g && self) || v(typeof t == g && t) || Function(\"return this\")(),\n      w = function w(t) {\n    try {\n      return !!t();\n    } catch (t) {\n      return !0;\n    }\n  },\n      _ = !w(function () {\n    return 7 != Object.defineProperty({}, \"a\", {\n      get: function get() {\n        return 7;\n      }\n    }).a;\n  }),\n      E = {}.propertyIsEnumerable,\n      T = Object.getOwnPropertyDescriptor,\n      S = {\n    f: T && !E.call({\n      1: 2\n    }, 1) ? function (t) {\n      var e = T(this, t);\n      return !!e && e.enumerable;\n    } : E\n  },\n      I = function I(t, e) {\n    return {\n      enumerable: !(1 & t),\n      configurable: !(2 & t),\n      writable: !(4 & t),\n      value: e\n    };\n  },\n      C = {}.toString,\n      N = function N(t) {\n    return C.call(t).slice(8, -1);\n  },\n      A = \"\".split,\n      k = w(function () {\n    return !Object(\"z\").propertyIsEnumerable(0);\n  }) ? function (t) {\n    return \"String\" == N(t) ? A.call(t, \"\") : Object(t);\n  } : Object,\n      D = function D(t) {\n    if (null == t) throw TypeError(\"Can't call method on \" + t);\n    return t;\n  },\n      R = function R(t) {\n    return k(D(t));\n  },\n      O = function O(t) {\n    return \"object\" == typeof t ? null !== t : \"function\" == typeof t;\n  },\n      P = function P(t, e) {\n    if (!O(t)) return t;\n    var n, r;\n    if (e && \"function\" == typeof (n = t.toString) && !O(r = n.call(t))) return r;\n    if (\"function\" == typeof (n = t.valueOf) && !O(r = n.call(t))) return r;\n    if (!e && \"function\" == typeof (n = t.toString) && !O(r = n.call(t))) return r;\n    throw TypeError(\"Can't convert object to primitive value\");\n  },\n      x = {}.hasOwnProperty,\n      M = function M(t, e) {\n    return x.call(t, e);\n  },\n      L = b.document,\n      F = O(L) && O(L.createElement),\n      U = function U(t) {\n    return F ? L.createElement(t) : {};\n  },\n      q = !_ && !w(function () {\n    return 7 != Object.defineProperty(U(\"div\"), \"a\", {\n      get: function get() {\n        return 7;\n      }\n    }).a;\n  }),\n      V = Object.getOwnPropertyDescriptor,\n      B = {\n    f: _ ? V : function (t, e) {\n      if (t = R(t), e = P(e, !0), q) try {\n        return V(t, e);\n      } catch (t) {}\n      if (M(t, e)) return I(!S.f.call(t, e), t[e]);\n    }\n  },\n      j = function j(t) {\n    if (!O(t)) throw TypeError(String(t) + \" is not an object\");\n    return t;\n  },\n      W = Object.defineProperty,\n      K = {\n    f: _ ? W : function (t, e, n) {\n      if (j(t), e = P(e, !0), j(n), q) try {\n        return W(t, e, n);\n      } catch (t) {}\n      if (\"get\" in n || \"set\" in n) throw TypeError(\"Accessors not supported\");\n      return \"value\" in n && (t[e] = n.value), t;\n    }\n  },\n      Q = _ ? function (t, e, n) {\n    return K.f(t, e, I(1, n));\n  } : function (t, e, n) {\n    return t[e] = n, t;\n  },\n      H = function H(e, n) {\n    try {\n      Q(b, e, n);\n    } catch (t) {\n      b[e] = n;\n    }\n\n    return n;\n  },\n      G = !1,\n      z = e(function (t) {\n    var e = \"__core-js_shared__\",\n        n = b[e] || H(e, {});\n    (t.exports = function (t, e) {\n      return n[t] || (n[t] = void 0 !== e ? e : {});\n    })(\"versions\", []).push({\n      version: \"3.1.3\",\n      mode: \"global\",\n      copyright: \"© 2019 Denis Pushkarev (zloirock.ru)\"\n    });\n  }),\n      Y = z(\"native-function-to-string\", Function.toString),\n      X = b.WeakMap,\n      J = \"function\" == typeof X && /native code/.test(Y.call(X)),\n      $ = 0,\n      Z = Math.random(),\n      tt = function tt(t) {\n    return \"Symbol(\" + String(void 0 === t ? \"\" : t) + \")_\" + (++$ + Z).toString(36);\n  },\n      et = z(\"keys\"),\n      nt = function nt(t) {\n    return et[t] || (et[t] = tt(t));\n  },\n      rt = {},\n      it = b.WeakMap;\n\n  if (J) {\n    var ot = new it(),\n        at = ot.get,\n        st = ot.has,\n        ut = ot.set;\n    d = function d(t, e) {\n      return ut.call(ot, t, e), e;\n    }, y = function y(t) {\n      return at.call(ot, t) || {};\n    }, m = function m(t) {\n      return st.call(ot, t);\n    };\n  } else {\n    var ct = nt(\"state\");\n    rt[ct] = !0, d = function d(t, e) {\n      return Q(t, ct, e), e;\n    }, y = function y(t) {\n      return M(t, ct) ? t[ct] : {};\n    }, m = function m(t) {\n      return M(t, ct);\n    };\n  }\n\n  var ht = {\n    set: d,\n    get: y,\n    has: m,\n    enforce: function enforce(t) {\n      return m(t) ? y(t) : d(t, {});\n    },\n    getterFor: function getterFor(n) {\n      return function (t) {\n        var e;\n        if (!O(t) || (e = y(t)).type !== n) throw TypeError(\"Incompatible receiver, \" + n + \" required\");\n        return e;\n      };\n    }\n  },\n      lt = e(function (t) {\n    var e = ht.get,\n        s = ht.enforce,\n        u = String(Y).split(\"toString\");\n    z(\"inspectSource\", function (t) {\n      return Y.call(t);\n    }), (t.exports = function (t, e, n, r) {\n      var i = !!r && !!r.unsafe,\n          o = !!r && !!r.enumerable,\n          a = !!r && !!r.noTargetGet;\n      \"function\" == typeof n && (\"string\" != typeof e || M(n, \"name\") || Q(n, \"name\", e), s(n).source = u.join(\"string\" == typeof e ? e : \"\")), t !== b ? (i ? !a && t[e] && (o = !0) : delete t[e], o ? t[e] = n : Q(t, e, n)) : o ? t[e] = n : H(e, n);\n    })(Function.prototype, \"toString\", function () {\n      return \"function\" == typeof this && e(this).source || Y.call(this);\n    });\n  }),\n      ft = b,\n      pt = function pt(t) {\n    return \"function\" == typeof t ? t : void 0;\n  },\n      dt = function dt(t, e) {\n    return arguments.length < 2 ? pt(ft[t]) || pt(b[t]) : ft[t] && ft[t][e] || b[t] && b[t][e];\n  },\n      yt = Math.ceil,\n      mt = Math.floor,\n      gt = function gt(t) {\n    return isNaN(t = +t) ? 0 : (0 < t ? mt : yt)(t);\n  },\n      vt = Math.min,\n      bt = function bt(t) {\n    return 0 < t ? vt(gt(t), 9007199254740991) : 0;\n  },\n      wt = Math.max,\n      _t = Math.min,\n      Et = function Et(c) {\n    return function (t, e, n) {\n      var r,\n          i,\n          o,\n          a = R(t),\n          s = bt(a.length),\n          u = (r = s, (i = gt(n)) < 0 ? wt(i + r, 0) : _t(i, r));\n\n      if (c && e != e) {\n        for (; u < s;) {\n          if ((o = a[u++]) != o) return !0;\n        }\n      } else for (; u < s; u++) {\n        if ((c || u in a) && a[u] === e) return c || u || 0;\n      }\n\n      return !c && -1;\n    };\n  },\n      Tt = {\n    includes: Et(!0),\n    indexOf: Et(!1)\n  }.indexOf,\n      St = function St(t, e) {\n    var n,\n        r = R(t),\n        i = 0,\n        o = [];\n\n    for (n in r) {\n      !M(rt, n) && M(r, n) && o.push(n);\n    }\n\n    for (; e.length > i;) {\n      M(r, n = e[i++]) && (~Tt(o, n) || o.push(n));\n    }\n\n    return o;\n  },\n      It = [\"constructor\", \"hasOwnProperty\", \"isPrototypeOf\", \"propertyIsEnumerable\", \"toLocaleString\", \"toString\", \"valueOf\"],\n      Ct = It.concat(\"length\", \"prototype\"),\n      Nt = {\n    f: Object.getOwnPropertyNames || function (t) {\n      return St(t, Ct);\n    }\n  },\n      At = {\n    f: Object.getOwnPropertySymbols\n  },\n      kt = dt(\"Reflect\", \"ownKeys\") || function (t) {\n    var e = Nt.f(j(t)),\n        n = At.f;\n    return n ? e.concat(n(t)) : e;\n  },\n      Dt = function Dt(t, e) {\n    for (var n = kt(e), r = K.f, i = B.f, o = 0; o < n.length; o++) {\n      var a = n[o];\n      M(t, a) || r(t, a, i(e, a));\n    }\n  },\n      Rt = /#|\\.prototype\\./,\n      Ot = function Ot(t, e) {\n    var n = xt[Pt(t)];\n    return n == Lt || n != Mt && (\"function\" == typeof e ? w(e) : !!e);\n  },\n      Pt = Ot.normalize = function (t) {\n    return String(t).replace(Rt, \".\").toLowerCase();\n  },\n      xt = Ot.data = {},\n      Mt = Ot.NATIVE = \"N\",\n      Lt = Ot.POLYFILL = \"P\",\n      Ft = Ot,\n      Ut = B.f,\n      qt = function qt(t, e) {\n    var n,\n        r,\n        i,\n        o,\n        a,\n        s = t.target,\n        u = t.global,\n        c = t.stat;\n    if (n = u ? b : c ? b[s] || H(s, {}) : (b[s] || {}).prototype) for (r in e) {\n      if (o = e[r], i = t.noTargetGet ? (a = Ut(n, r)) && a.value : n[r], !Ft(u ? r : s + (c ? \".\" : \"#\") + r, t.forced) && void 0 !== i) {\n        if (typeof o == typeof i) continue;\n        Dt(o, i);\n      }\n\n      (t.sham || i && i.sham) && Q(o, \"sham\", !0), lt(n, r, o, t);\n    }\n  },\n      Vt = function Vt(t) {\n    if (\"function\" != typeof t) throw TypeError(String(t) + \" is not a function\");\n    return t;\n  },\n      Bt = function Bt(r, i, t) {\n    if (Vt(r), void 0 === i) return r;\n\n    switch (t) {\n      case 0:\n        return function () {\n          return r.call(i);\n        };\n\n      case 1:\n        return function (t) {\n          return r.call(i, t);\n        };\n\n      case 2:\n        return function (t, e) {\n          return r.call(i, t, e);\n        };\n\n      case 3:\n        return function (t, e, n) {\n          return r.call(i, t, e, n);\n        };\n    }\n\n    return function () {\n      return r.apply(i, arguments);\n    };\n  },\n      jt = function jt(t) {\n    return Object(D(t));\n  },\n      Wt = Array.isArray || function (t) {\n    return \"Array\" == N(t);\n  },\n      Kt = !!Object.getOwnPropertySymbols && !w(function () {\n    return !String(Symbol());\n  }),\n      Qt = b.Symbol,\n      Ht = z(\"wks\"),\n      Gt = function Gt(t) {\n    return Ht[t] || (Ht[t] = Kt && Qt[t] || (Kt ? Qt : tt)(\"Symbol.\" + t));\n  },\n      zt = Gt(\"species\"),\n      Yt = function Yt(t, e) {\n    var n;\n    return Wt(t) && (\"function\" != typeof (n = t.constructor) || n !== Array && !Wt(n.prototype) ? O(n) && null === (n = n[zt]) && (n = void 0) : n = void 0), new (void 0 === n ? Array : n)(0 === e ? 0 : e);\n  },\n      Xt = [].push,\n      Jt = function Jt(p) {\n    var d = 1 == p,\n        y = 2 == p,\n        m = 3 == p,\n        g = 4 == p,\n        v = 6 == p,\n        b = 5 == p || v;\n    return function (t, e, n, r) {\n      for (var i, o, a = jt(t), s = k(a), u = Bt(e, n, 3), c = bt(s.length), h = 0, l = r || Yt, f = d ? l(t, c) : y ? l(t, 0) : void 0; h < c; h++) {\n        if ((b || h in s) && (o = u(i = s[h], h, a), p)) if (d) f[h] = o;else if (o) switch (p) {\n          case 3:\n            return !0;\n\n          case 5:\n            return i;\n\n          case 6:\n            return h;\n\n          case 2:\n            Xt.call(f, i);\n        } else if (g) return !1;\n      }\n\n      return v ? -1 : m || g ? g : f;\n    };\n  },\n      $t = {\n    forEach: Jt(0),\n    map: Jt(1),\n    filter: Jt(2),\n    some: Jt(3),\n    every: Jt(4),\n    find: Jt(5),\n    findIndex: Jt(6)\n  },\n      Zt = Object.keys || function (t) {\n    return St(t, It);\n  },\n      te = _ ? Object.defineProperties : function (t, e) {\n    j(t);\n\n    for (var n, r = Zt(e), i = r.length, o = 0; o < i;) {\n      K.f(t, n = r[o++], e[n]);\n    }\n\n    return t;\n  },\n      ee = dt(\"document\", \"documentElement\"),\n      ne = nt(\"IE_PROTO\"),\n      re = \"prototype\",\n      ie = function ie() {},\n      _oe = function oe() {\n    var t,\n        e = U(\"iframe\"),\n        n = It.length,\n        r = \"script\";\n\n    for (e.style.display = \"none\", ee.appendChild(e), e.src = String(\"javascript:\"), (t = e.contentWindow.document).open(), t.write(\"<script>document.F=Object</\" + r + \">\"), t.close(), _oe = t.F; n--;) {\n      delete _oe[re][It[n]];\n    }\n\n    return _oe();\n  },\n      ae = Object.create || function (t, e) {\n    var n;\n    return null !== t ? (ie[re] = j(t), n = new ie(), ie[re] = null, n[ne] = t) : n = _oe(), void 0 === e ? n : te(n, e);\n  };\n\n  rt[ne] = !0;\n  var se = Gt(\"unscopables\"),\n      ue = Array.prototype;\n  null == ue[se] && Q(ue, se, ae(null));\n\n  var ce = function ce(t) {\n    ue[se][t] = !0;\n  },\n      he = $t.find,\n      le = \"find\",\n      fe = !0;\n\n  le in [] && Array(1)[le](function () {\n    fe = !1;\n  }), qt({\n    target: \"Array\",\n    proto: !0,\n    forced: fe\n  }, {\n    find: function find(t) {\n      return he(this, t, 1 < arguments.length ? arguments[1] : void 0);\n    }\n  }), ce(le);\n\n  var pe = Function.call,\n      de = function de(t, e, n) {\n    return Bt(pe, b[t].prototype[e], n);\n  },\n      ye = (de(\"Array\", \"find\"), $t.findIndex),\n      me = \"findIndex\",\n      ge = !0;\n\n  me in [] && Array(1)[me](function () {\n    ge = !1;\n  }), qt({\n    target: \"Array\",\n    proto: !0,\n    forced: ge\n  }, {\n    findIndex: function findIndex(t) {\n      return ye(this, t, 1 < arguments.length ? arguments[1] : void 0);\n    }\n  }), ce(me);\n  de(\"Array\", \"findIndex\");\n\n  var ve,\n      be,\n      we,\n      _e = function _e(s) {\n    return function (t, e) {\n      var n,\n          r,\n          i = String(D(t)),\n          o = gt(e),\n          a = i.length;\n      return o < 0 || a <= o ? s ? \"\" : void 0 : (n = i.charCodeAt(o)) < 55296 || 56319 < n || o + 1 === a || (r = i.charCodeAt(o + 1)) < 56320 || 57343 < r ? s ? i.charAt(o) : n : s ? i.slice(o, o + 2) : r - 56320 + (n - 55296 << 10) + 65536;\n    };\n  },\n      Ee = {\n    codeAt: _e(!1),\n    charAt: _e(!0)\n  },\n      Te = !w(function () {\n    function t() {}\n\n    return t.prototype.constructor = null, Object.getPrototypeOf(new t()) !== t.prototype;\n  }),\n      Se = nt(\"IE_PROTO\"),\n      Ie = Object.prototype,\n      Ce = Te ? Object.getPrototypeOf : function (t) {\n    return t = jt(t), M(t, Se) ? t[Se] : \"function\" == typeof t.constructor && t instanceof t.constructor ? t.constructor.prototype : t instanceof Object ? Ie : null;\n  },\n      Ne = Gt(\"iterator\"),\n      Ae = !1;\n\n  [].keys && (\"next\" in (we = [].keys()) ? (be = Ce(Ce(we))) !== Object.prototype && (ve = be) : Ae = !0), null == ve && (ve = {}), M(ve, Ne) || Q(ve, Ne, function () {\n    return this;\n  });\n\n  var ke = {\n    IteratorPrototype: ve,\n    BUGGY_SAFARI_ITERATORS: Ae\n  },\n      De = K.f,\n      Re = Gt(\"toStringTag\"),\n      Oe = function Oe(t, e, n) {\n    t && !M(t = n ? t : t.prototype, Re) && De(t, Re, {\n      configurable: !0,\n      value: e\n    });\n  },\n      Pe = {},\n      xe = ke.IteratorPrototype,\n      Me = function Me() {\n    return this;\n  },\n      Le = Object.setPrototypeOf || (\"__proto__\" in {} ? function () {\n    var n,\n        r = !1,\n        t = {};\n\n    try {\n      (n = Object.getOwnPropertyDescriptor(Object.prototype, \"__proto__\").set).call(t, []), r = t instanceof Array;\n    } catch (t) {}\n\n    return function (t, e) {\n      return j(t), function (t) {\n        if (!O(t) && null !== t) throw TypeError(\"Can't set \" + String(t) + \" as a prototype\");\n      }(e), r ? n.call(t, e) : t.__proto__ = e, t;\n    };\n  }() : void 0),\n      Fe = ke.IteratorPrototype,\n      Ue = ke.BUGGY_SAFARI_ITERATORS,\n      qe = Gt(\"iterator\"),\n      Ve = \"values\",\n      Be = \"entries\",\n      je = function je() {\n    return this;\n  },\n      We = function We(t, e, n, r, i, o, a) {\n    var s, u, c;\n    u = r, c = e + \" Iterator\", (s = n).prototype = ae(xe, {\n      next: I(1, u)\n    }), Oe(s, c, !1), Pe[c] = Me;\n\n    var h,\n        l,\n        f,\n        p = function p(t) {\n      if (t === i && v) return v;\n      if (!Ue && t in m) return m[t];\n\n      switch (t) {\n        case \"keys\":\n        case Ve:\n        case Be:\n          return function () {\n            return new n(this, t);\n          };\n      }\n\n      return function () {\n        return new n(this);\n      };\n    },\n        d = e + \" Iterator\",\n        y = !1,\n        m = t.prototype,\n        g = m[qe] || m[\"@@iterator\"] || i && m[i],\n        v = !Ue && g || p(i),\n        b = \"Array\" == e && m.entries || g;\n\n    if (b && (h = Ce(b.call(new t())), Fe !== Object.prototype && h.next && (Ce(h) !== Fe && (Le ? Le(h, Fe) : \"function\" != typeof h[qe] && Q(h, qe, je)), Oe(h, d, !0))), i == Ve && g && g.name !== Ve && (y = !0, v = function v() {\n      return g.call(this);\n    }), m[qe] !== v && Q(m, qe, v), Pe[e] = v, i) if (l = {\n      values: p(Ve),\n      keys: o ? v : p(\"keys\"),\n      entries: p(Be)\n    }, a) for (f in l) {\n      !Ue && !y && f in m || lt(m, f, l[f]);\n    } else qt({\n      target: e,\n      proto: !0,\n      forced: Ue || y\n    }, l);\n    return l;\n  },\n      Ke = Ee.charAt,\n      Qe = \"String Iterator\",\n      He = ht.set,\n      Ge = ht.getterFor(Qe);\n\n  We(String, \"String\", function (t) {\n    He(this, {\n      type: Qe,\n      string: String(t),\n      index: 0\n    });\n  }, function () {\n    var t,\n        e = Ge(this),\n        n = e.string,\n        r = e.index;\n    return r >= n.length ? {\n      value: void 0,\n      done: !0\n    } : (t = Ke(n, r), e.index += t.length, {\n      value: t,\n      done: !1\n    });\n  });\n\n  var ze = function ze(e, t, n, r) {\n    try {\n      return r ? t(j(n)[0], n[1]) : t(n);\n    } catch (t) {\n      var i = e.return;\n      throw void 0 !== i && j(i.call(e)), t;\n    }\n  },\n      Ye = Gt(\"iterator\"),\n      Xe = Array.prototype,\n      Je = function Je(t) {\n    return void 0 !== t && (Pe.Array === t || Xe[Ye] === t);\n  },\n      $e = function $e(t, e, n) {\n    var r = P(e);\n    r in t ? K.f(t, r, I(0, n)) : t[r] = n;\n  },\n      Ze = Gt(\"toStringTag\"),\n      tn = \"Arguments\" == N(function () {\n    return arguments;\n  }()),\n      en = function en(t) {\n    var e, n, r;\n    return void 0 === t ? \"Undefined\" : null === t ? \"Null\" : \"string\" == typeof (n = function (t, e) {\n      try {\n        return t[e];\n      } catch (t) {}\n    }(e = Object(t), Ze)) ? n : tn ? N(e) : \"Object\" == (r = N(e)) && \"function\" == typeof e.callee ? \"Arguments\" : r;\n  },\n      nn = Gt(\"iterator\"),\n      rn = function rn(t) {\n    if (null != t) return t[nn] || t[\"@@iterator\"] || Pe[en(t)];\n  },\n      on = Gt(\"iterator\"),\n      an = !1;\n\n  try {\n    var sn = 0,\n        un = {\n      next: function next() {\n        return {\n          done: !!sn++\n        };\n      },\n      return: function _return() {\n        an = !0;\n      }\n    };\n    un[on] = function () {\n      return this;\n    }, Array.from(un, function () {\n      throw 2;\n    });\n  } catch (_o) {}\n\n  var cn = function cn(t, e) {\n    if (!e && !an) return !1;\n    var n = !1;\n\n    try {\n      var r = {};\n      r[on] = function () {\n        return {\n          next: function next() {\n            return {\n              done: n = !0\n            };\n          }\n        };\n      }, t(r);\n    } catch (t) {}\n\n    return n;\n  },\n      hn = !cn(function (t) {\n    Array.from(t);\n  });\n\n  qt({\n    target: \"Array\",\n    stat: !0,\n    forced: hn\n  }, {\n    from: function from(t) {\n      var e,\n          n,\n          r,\n          i,\n          o = jt(t),\n          a = \"function\" == typeof this ? this : Array,\n          s = arguments.length,\n          u = 1 < s ? arguments[1] : void 0,\n          c = void 0 !== u,\n          h = 0,\n          l = rn(o);\n      if (c && (u = Bt(u, 2 < s ? arguments[2] : void 0, 2)), null == l || a == Array && Je(l)) for (n = new a(e = bt(o.length)); h < e; h++) {\n        $e(n, h, c ? u(o[h], h) : o[h]);\n      } else for (i = l.call(o), n = new a(); !(r = i.next()).done; h++) {\n        $e(n, h, c ? ze(i, u, [r.value, h], !0) : r.value);\n      }\n      return n.length = h, n;\n    }\n  });\n  ft.Array.from;\n  var ln = Object.assign,\n      fn = !ln || w(function () {\n    var t = {},\n        e = {},\n        n = Symbol(),\n        r = \"abcdefghijklmnopqrst\";\n    return t[n] = 7, r.split(\"\").forEach(function (t) {\n      e[t] = t;\n    }), 7 != ln({}, t)[n] || Zt(ln({}, e)).join(\"\") != r;\n  }) ? function (t, e) {\n    for (var n = jt(t), r = arguments.length, i = 1, o = At.f, a = S.f; i < r;) {\n      for (var s, u = k(arguments[i++]), c = o ? Zt(u).concat(o(u)) : Zt(u), h = c.length, l = 0; l < h;) {\n        s = c[l++], _ && !a.call(u, s) || (n[s] = u[s]);\n      }\n    }\n\n    return n;\n  } : ln;\n  qt({\n    target: \"Object\",\n    stat: !0,\n    forced: Object.assign !== fn\n  }, {\n    assign: fn\n  });\n  ft.Object.assign;\n\n  var pn = S.f,\n      dn = function dn(s) {\n    return function (t) {\n      for (var e, n = R(t), r = Zt(n), i = r.length, o = 0, a = []; o < i;) {\n        e = r[o++], _ && !pn.call(n, e) || a.push(s ? [e, n[e]] : n[e]);\n      }\n\n      return a;\n    };\n  },\n      yn = {\n    entries: dn(!0),\n    values: dn(!1)\n  },\n      mn = yn.entries;\n\n  qt({\n    target: \"Object\",\n    stat: !0\n  }, {\n    entries: function entries(t) {\n      return mn(t);\n    }\n  });\n  ft.Object.entries;\n  var gn = yn.values;\n  qt({\n    target: \"Object\",\n    stat: !0\n  }, {\n    values: function values(t) {\n      return gn(t);\n    }\n  });\n  ft.Object.values;\n\n  var vn = Gt(\"match\"),\n      bn = function bn(t) {\n    if (O(e = t) && (void 0 !== (n = e[vn]) ? n : \"RegExp\" == N(e))) throw TypeError(\"The method doesn't accept regular expressions\");\n    var e, n;\n    return t;\n  },\n      wn = Gt(\"match\"),\n      _n = \"\".startsWith,\n      En = Math.min;\n\n  qt({\n    target: \"String\",\n    proto: !0,\n    forced: !function (e) {\n      var n = /./;\n\n      try {\n        \"/./\"[e](n);\n      } catch (t) {\n        try {\n          return n[wn] = !1, \"/./\"[e](n);\n        } catch (t) {}\n      }\n\n      return !1;\n    }(\"startsWith\")\n  }, {\n    startsWith: function startsWith(t) {\n      var e = String(D(this));\n      bn(t);\n      var n = bt(En(1 < arguments.length ? arguments[1] : void 0, e.length)),\n          r = String(t);\n      return _n ? _n.call(e, r, n) : e.slice(n, n + r.length) === r;\n    }\n  });\n  de(\"String\", \"startsWith\");\n  qt({\n    target: \"String\",\n    proto: !0\n  }, {\n    repeat: \"\".repeat || function (t) {\n      var e = String(D(this)),\n          n = \"\",\n          r = gt(t);\n      if (r < 0 || r == 1 / 0) throw RangeError(\"Wrong number of repetitions\");\n\n      for (; 0 < r; (r >>>= 1) && (e += e)) {\n        1 & r && (n += e);\n      }\n\n      return n;\n    }\n  });\n  de(\"String\", \"repeat\");\n\n  var Tn,\n      Sn = Gt(\"species\"),\n      In = Gt(\"isConcatSpreadable\"),\n      Cn = 9007199254740991,\n      Nn = \"Maximum allowed index exceeded\",\n      An = !w(function () {\n    var t = [];\n    return t[In] = !1, t.concat()[0] !== t;\n  }),\n      kn = (Tn = \"concat\", !w(function () {\n    var t = [];\n    return (t.constructor = {})[Sn] = function () {\n      return {\n        foo: 1\n      };\n    }, 1 !== t[Tn](Boolean).foo;\n  })),\n      Dn = function Dn(t) {\n    if (!O(t)) return !1;\n    var e = t[In];\n    return void 0 !== e ? !!e : Wt(t);\n  };\n\n  qt({\n    target: \"Array\",\n    proto: !0,\n    forced: !An || !kn\n  }, {\n    concat: function concat(t) {\n      var e,\n          n,\n          r,\n          i,\n          o,\n          a = jt(this),\n          s = Yt(a, 0),\n          u = 0;\n\n      for (e = -1, r = arguments.length; e < r; e++) {\n        if (o = -1 === e ? a : arguments[e], Dn(o)) {\n          if (i = bt(o.length), Cn < u + i) throw TypeError(Nn);\n\n          for (n = 0; n < i; n++, u++) {\n            n in o && $e(s, u, o[n]);\n          }\n        } else {\n          if (Cn <= u) throw TypeError(Nn);\n          $e(s, u++, o);\n        }\n      }\n\n      return s.length = u, s;\n    }\n  });\n  var Rn = {};\n  Rn[Gt(\"toStringTag\")] = \"z\";\n  var On = \"[object z]\" !== String(Rn) ? function () {\n    return \"[object \" + en(this) + \"]\";\n  } : Rn.toString,\n      Pn = Object.prototype;\n  On !== Pn.toString && lt(Pn, \"toString\", On, {\n    unsafe: !0\n  });\n\n  var xn = Nt.f,\n      Mn = {}.toString,\n      Ln = \"object\" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [],\n      Fn = {\n    f: function f(t) {\n      return Ln && \"[object Window]\" == Mn.call(t) ? function (t) {\n        try {\n          return xn(t);\n        } catch (t) {\n          return Ln.slice();\n        }\n      }(t) : xn(R(t));\n    }\n  },\n      Un = {\n    f: Gt\n  },\n      qn = K.f,\n      Vn = function Vn(t) {\n    var e = ft.Symbol || (ft.Symbol = {});\n    M(e, t) || qn(e, t, {\n      value: Un.f(t)\n    });\n  },\n      Bn = $t.forEach,\n      jn = nt(\"hidden\"),\n      Wn = \"Symbol\",\n      Kn = \"prototype\",\n      Qn = Gt(\"toPrimitive\"),\n      Hn = ht.set,\n      Gn = ht.getterFor(Wn),\n      zn = Object[Kn],\n      _Yn = b.Symbol,\n      Xn = b.JSON,\n      Jn = Xn && Xn.stringify,\n      $n = B.f,\n      Zn = K.f,\n      tr = Fn.f,\n      er = S.f,\n      nr = z(\"symbols\"),\n      rr = z(\"op-symbols\"),\n      ir = z(\"string-to-symbol-registry\"),\n      or = z(\"symbol-to-string-registry\"),\n      ar = z(\"wks\"),\n      sr = b.QObject,\n      ur = !sr || !sr[Kn] || !sr[Kn].findChild,\n      cr = _ && w(function () {\n    return 7 != ae(Zn({}, \"a\", {\n      get: function get() {\n        return Zn(this, \"a\", {\n          value: 7\n        }).a;\n      }\n    })).a;\n  }) ? function (t, e, n) {\n    var r = $n(zn, e);\n    r && delete zn[e], Zn(t, e, n), r && t !== zn && Zn(zn, e, r);\n  } : Zn,\n      hr = function hr(t, e) {\n    var n = nr[t] = ae(_Yn[Kn]);\n    return Hn(n, {\n      type: Wn,\n      tag: t,\n      description: e\n    }), _ || (n.description = e), n;\n  },\n      lr = Kt && \"symbol\" == typeof _Yn.iterator ? function (t) {\n    return \"symbol\" == typeof t;\n  } : function (t) {\n    return Object(t) instanceof _Yn;\n  },\n      fr = function fr(t, e, n) {\n    t === zn && fr(rr, e, n), j(t);\n    var r = P(e, !0);\n    return j(n), M(nr, r) ? (n.enumerable ? (M(t, jn) && t[jn][r] && (t[jn][r] = !1), n = ae(n, {\n      enumerable: I(0, !1)\n    })) : (M(t, jn) || Zn(t, jn, I(1, {})), t[jn][r] = !0), cr(t, r, n)) : Zn(t, r, n);\n  },\n      pr = function pr(e, t) {\n    j(e);\n    var n = R(t),\n        r = Zt(n).concat(gr(n));\n    return Bn(r, function (t) {\n      _ && !dr.call(n, t) || fr(e, t, n[t]);\n    }), e;\n  },\n      dr = function dr(t) {\n    var e = P(t, !0),\n        n = er.call(this, e);\n    return !(this === zn && M(nr, e) && !M(rr, e)) && (!(n || !M(this, e) || !M(nr, e) || M(this, jn) && this[jn][e]) || n);\n  },\n      yr = function yr(t, e) {\n    var n = R(t),\n        r = P(e, !0);\n\n    if (n !== zn || !M(nr, r) || M(rr, r)) {\n      var i = $n(n, r);\n      return !i || !M(nr, r) || M(n, jn) && n[jn][r] || (i.enumerable = !0), i;\n    }\n  },\n      mr = function mr(t) {\n    var e = tr(R(t)),\n        n = [];\n    return Bn(e, function (t) {\n      M(nr, t) || M(rt, t) || n.push(t);\n    }), n;\n  },\n      gr = function gr(t) {\n    var e = t === zn,\n        n = tr(e ? rr : R(t)),\n        r = [];\n    return Bn(n, function (t) {\n      !M(nr, t) || e && !M(zn, t) || r.push(nr[t]);\n    }), r;\n  };\n\n  Kt || (lt((_Yn = function Yn() {\n    if (this instanceof _Yn) throw TypeError(\"Symbol is not a constructor\");\n\n    var t = arguments.length && void 0 !== arguments[0] ? String(arguments[0]) : void 0,\n        e = tt(t),\n        n = function n(t) {\n      this === zn && n.call(rr, t), M(this, jn) && M(this[jn], e) && (this[jn][e] = !1), cr(this, e, I(1, t));\n    };\n\n    return _ && ur && cr(zn, e, {\n      configurable: !0,\n      set: n\n    }), hr(e, t);\n  })[Kn], \"toString\", function () {\n    return Gn(this).tag;\n  }), S.f = dr, K.f = fr, B.f = yr, Nt.f = Fn.f = mr, At.f = gr, _ && (Zn(_Yn[Kn], \"description\", {\n    configurable: !0,\n    get: function get() {\n      return Gn(this).description;\n    }\n  }), lt(zn, \"propertyIsEnumerable\", dr, {\n    unsafe: !0\n  })), Un.f = function (t) {\n    return hr(Gt(t), t);\n  }), qt({\n    global: !0,\n    wrap: !0,\n    forced: !Kt,\n    sham: !Kt\n  }, {\n    Symbol: _Yn\n  }), Bn(Zt(ar), function (t) {\n    Vn(t);\n  }), qt({\n    target: Wn,\n    stat: !0,\n    forced: !Kt\n  }, {\n    for: function _for(t) {\n      var e = String(t);\n      if (M(ir, e)) return ir[e];\n\n      var n = _Yn(e);\n\n      return ir[e] = n, or[n] = e, n;\n    },\n    keyFor: function keyFor(t) {\n      if (!lr(t)) throw TypeError(t + \" is not a symbol\");\n      if (M(or, t)) return or[t];\n    },\n    useSetter: function useSetter() {\n      ur = !0;\n    },\n    useSimple: function useSimple() {\n      ur = !1;\n    }\n  }), qt({\n    target: \"Object\",\n    stat: !0,\n    forced: !Kt,\n    sham: !_\n  }, {\n    create: function create(t, e) {\n      return void 0 === e ? ae(t) : pr(ae(t), e);\n    },\n    defineProperty: fr,\n    defineProperties: pr,\n    getOwnPropertyDescriptor: yr\n  }), qt({\n    target: \"Object\",\n    stat: !0,\n    forced: !Kt\n  }, {\n    getOwnPropertyNames: mr,\n    getOwnPropertySymbols: gr\n  }), qt({\n    target: \"Object\",\n    stat: !0,\n    forced: w(function () {\n      At.f(1);\n    })\n  }, {\n    getOwnPropertySymbols: function getOwnPropertySymbols(t) {\n      return At.f(jt(t));\n    }\n  }), Xn && qt({\n    target: \"JSON\",\n    stat: !0,\n    forced: !Kt || w(function () {\n      var t = _Yn();\n\n      return \"[null]\" != Jn([t]) || \"{}\" != Jn({\n        a: t\n      }) || \"{}\" != Jn(Object(t));\n    })\n  }, {\n    stringify: function stringify(t) {\n      for (var e, n, r = [t], i = 1; arguments.length > i;) {\n        r.push(arguments[i++]);\n      }\n\n      if (n = e = r[1], (O(e) || void 0 !== t) && !lr(t)) return Wt(e) || (e = function e(t, _e2) {\n        if (\"function\" == typeof n && (_e2 = n.call(this, t, _e2)), !lr(_e2)) return _e2;\n      }), r[1] = e, Jn.apply(Xn, r);\n    }\n  }), _Yn[Kn][Qn] || Q(_Yn[Kn], Qn, _Yn[Kn].valueOf), Oe(_Yn, Wn), rt[jn] = !0, Vn(\"asyncIterator\");\n  var vr = K.f,\n      br = b.Symbol;\n\n  if (_ && \"function\" == typeof br && (!(\"description\" in br.prototype) || void 0 !== br().description)) {\n    var wr = {},\n        _r = function _r() {\n      var t = arguments.length < 1 || void 0 === arguments[0] ? void 0 : String(arguments[0]),\n          e = this instanceof _r ? new br(t) : void 0 === t ? br() : br(t);\n      return \"\" === t && (wr[e] = !0), e;\n    };\n\n    Dt(_r, br);\n    var Er = _r.prototype = br.prototype;\n    Er.constructor = _r;\n    var Tr = Er.toString,\n        Sr = \"Symbol(test)\" == String(br(\"test\")),\n        Ir = /^Symbol\\((.*)\\)[^)]+$/;\n    vr(Er, \"description\", {\n      configurable: !0,\n      get: function get() {\n        var t = O(this) ? this.valueOf() : this,\n            e = Tr.call(t);\n        if (M(wr, t)) return \"\";\n        var n = Sr ? e.slice(7, -1) : e.replace(Ir, \"$1\");\n        return \"\" === n ? void 0 : n;\n      }\n    }), qt({\n      global: !0,\n      forced: !0\n    }, {\n      Symbol: _r\n    });\n  }\n\n  Vn(\"hasInstance\"), Vn(\"isConcatSpreadable\"), Vn(\"iterator\"), Vn(\"match\"), Vn(\"matchAll\"), Vn(\"replace\"), Vn(\"search\"), Vn(\"species\"), Vn(\"split\"), Vn(\"toPrimitive\"), Vn(\"toStringTag\"), Vn(\"unscopables\"), Oe(Math, \"Math\", !0), Oe(b.JSON, \"JSON\", !0);\n  ft.Symbol;\n  Vn(\"dispose\"), Vn(\"observable\"), Vn(\"patternMatch\"), Vn(\"replaceAll\");\n  var Cr = {\n    CSSRuleList: 0,\n    CSSStyleDeclaration: 0,\n    CSSValueList: 0,\n    ClientRectList: 0,\n    DOMRectList: 0,\n    DOMStringList: 0,\n    DOMTokenList: 1,\n    DataTransferItemList: 0,\n    FileList: 0,\n    HTMLAllCollection: 0,\n    HTMLCollection: 0,\n    HTMLFormElement: 0,\n    HTMLSelectElement: 0,\n    MediaList: 0,\n    MimeTypeArray: 0,\n    NamedNodeMap: 0,\n    NodeList: 1,\n    PaintRequestList: 0,\n    Plugin: 0,\n    PluginArray: 0,\n    SVGLengthList: 0,\n    SVGNumberList: 0,\n    SVGPathSegList: 0,\n    SVGPointList: 0,\n    SVGStringList: 0,\n    SVGTransformList: 0,\n    SourceBufferList: 0,\n    StyleSheetList: 0,\n    TextTrackCueList: 0,\n    TextTrackList: 0,\n    TouchList: 0\n  },\n      Nr = \"Array Iterator\",\n      Ar = ht.set,\n      kr = ht.getterFor(Nr),\n      Dr = We(Array, \"Array\", function (t, e) {\n    Ar(this, {\n      type: Nr,\n      target: R(t),\n      index: 0,\n      kind: e\n    });\n  }, function () {\n    var t = kr(this),\n        e = t.target,\n        n = t.kind,\n        r = t.index++;\n    return !e || r >= e.length ? {\n      value: t.target = void 0,\n      done: !0\n    } : \"keys\" == n ? {\n      value: r,\n      done: !1\n    } : \"values\" == n ? {\n      value: e[r],\n      done: !1\n    } : {\n      value: [r, e[r]],\n      done: !1\n    };\n  }, \"values\");\n  Pe.Arguments = Pe.Array, ce(\"keys\"), ce(\"values\"), ce(\"entries\");\n  var Rr = Gt(\"iterator\"),\n      Or = Gt(\"toStringTag\"),\n      Pr = Dr.values;\n\n  for (var xr in Cr) {\n    var Mr = b[xr],\n        Lr = Mr && Mr.prototype;\n\n    if (Lr) {\n      if (Lr[Rr] !== Pr) try {\n        Q(Lr, Rr, Pr);\n      } catch (_o) {\n        Lr[Rr] = Pr;\n      }\n      if (Lr[Or] || Q(Lr, Or, xr), Cr[xr]) for (var Fr in Dr) {\n        if (Lr[Fr] !== Dr[Fr]) try {\n          Q(Lr, Fr, Dr[Fr]);\n        } catch (_o) {\n          Lr[Fr] = Dr[Fr];\n        }\n      }\n    }\n  }\n\n  Un.f(\"iterator\");\n\n  var Ur = !w(function () {\n    return Object.isExtensible(Object.preventExtensions({}));\n  }),\n      qr = e(function (t) {\n    var e = K.f,\n        n = tt(\"meta\"),\n        r = 0,\n        i = Object.isExtensible || function () {\n      return !0;\n    },\n        o = function o(t) {\n      e(t, n, {\n        value: {\n          objectID: \"O\" + ++r,\n          weakData: {}\n        }\n      });\n    },\n        a = t.exports = {\n      REQUIRED: !1,\n      fastKey: function fastKey(t, e) {\n        if (!O(t)) return \"symbol\" == typeof t ? t : (\"string\" == typeof t ? \"S\" : \"P\") + t;\n\n        if (!M(t, n)) {\n          if (!i(t)) return \"F\";\n          if (!e) return \"E\";\n          o(t);\n        }\n\n        return t[n].objectID;\n      },\n      getWeakData: function getWeakData(t, e) {\n        if (!M(t, n)) {\n          if (!i(t)) return !0;\n          if (!e) return !1;\n          o(t);\n        }\n\n        return t[n].weakData;\n      },\n      onFreeze: function onFreeze(t) {\n        return Ur && a.REQUIRED && i(t) && !M(t, n) && o(t), t;\n      }\n    };\n\n    rt[n] = !0;\n  }),\n      Vr = (qr.REQUIRED, qr.fastKey, qr.getWeakData, qr.onFreeze, e(function (t) {\n    var f = function f(t, e) {\n      this.stopped = t, this.result = e;\n    };\n\n    (t.exports = function (t, e, n, r, i) {\n      var o,\n          a,\n          s,\n          u,\n          c,\n          h,\n          l = Bt(e, n, r ? 2 : 1);\n      if (i) o = t;else {\n        if (\"function\" != typeof (a = rn(t))) throw TypeError(\"Target is not iterable\");\n\n        if (Je(a)) {\n          for (s = 0, u = bt(t.length); s < u; s++) {\n            if ((c = r ? l(j(h = t[s])[0], h[1]) : l(t[s])) && c instanceof f) return c;\n          }\n\n          return new f(!1);\n        }\n\n        o = a.call(t);\n      }\n\n      for (; !(h = o.next()).done;) {\n        if ((c = ze(o, l, h.value, r)) && c instanceof f) return c;\n      }\n\n      return new f(!1);\n    }).stop = function (t) {\n      return new f(!0, t);\n    };\n  })),\n      Br = function Br(t, e, n) {\n    if (!(t instanceof e)) throw TypeError(\"Incorrect \" + (n ? n + \" \" : \"\") + \"invocation\");\n    return t;\n  },\n      jr = function jr(u, t, e, c, r) {\n    var h = b[u],\n        i = h && h.prototype,\n        l = h,\n        f = c ? \"set\" : \"add\",\n        n = {},\n        o = function o(t) {\n      var n = i[t];\n      lt(i, t, \"add\" == t ? function (t) {\n        return n.call(this, 0 === t ? 0 : t), this;\n      } : \"delete\" == t ? function (t) {\n        return !(r && !O(t)) && n.call(this, 0 === t ? 0 : t);\n      } : \"get\" == t ? function (t) {\n        return r && !O(t) ? void 0 : n.call(this, 0 === t ? 0 : t);\n      } : \"has\" == t ? function (t) {\n        return !(r && !O(t)) && n.call(this, 0 === t ? 0 : t);\n      } : function (t, e) {\n        return n.call(this, 0 === t ? 0 : t, e), this;\n      });\n    };\n\n    if (Ft(u, \"function\" != typeof h || !(r || i.forEach && !w(function () {\n      new h().entries().next();\n    })))) l = e.getConstructor(t, u, c, f), qr.REQUIRED = !0;else if (Ft(u, !0)) {\n      var a = new l(),\n          s = a[f](r ? {} : -0, 1) != a,\n          p = w(function () {\n        a.has(1);\n      }),\n          d = cn(function (t) {\n        new h(t);\n      }),\n          y = !r && w(function () {\n        for (var t = new h(), e = 5; e--;) {\n          t[f](e, e);\n        }\n\n        return !t.has(-0);\n      });\n      d || (((l = t(function (t, e) {\n        Br(t, l, u);\n        var n,\n            r,\n            i,\n            o,\n            a,\n            s = (n = new h(), r = t, i = l, Le && \"function\" == typeof (o = r.constructor) && o !== i && O(a = o.prototype) && a !== i.prototype && Le(n, a), n);\n        return null != e && Vr(e, s[f], s, c), s;\n      })).prototype = i).constructor = l), (p || y) && (o(\"delete\"), o(\"has\"), c && o(\"get\")), (y || s) && o(f), r && i.clear && delete i.clear;\n    }\n    return n[u] = l, qt({\n      global: !0,\n      forced: l != h\n    }, n), Oe(l, u), r || e.setStrong(l, u, c), l;\n  },\n      Wr = function Wr(t, e, n) {\n    for (var r in e) {\n      lt(t, r, e[r], n);\n    }\n\n    return t;\n  },\n      Kr = Gt(\"species\"),\n      Qr = K.f,\n      Hr = qr.fastKey,\n      Gr = ht.set,\n      zr = ht.getterFor,\n      Yr = {\n    getConstructor: function getConstructor(t, n, r, i) {\n      var o = t(function (t, e) {\n        Br(t, o, n), Gr(t, {\n          type: n,\n          index: ae(null),\n          first: void 0,\n          last: void 0,\n          size: 0\n        }), _ || (t.size = 0), null != e && Vr(e, t[i], t, r);\n      }),\n          s = zr(n),\n          a = function a(t, e, n) {\n        var r,\n            i,\n            o = s(t),\n            a = u(t, e);\n        return a ? a.value = n : (o.last = a = {\n          index: i = Hr(e, !0),\n          key: e,\n          value: n,\n          previous: r = o.last,\n          next: void 0,\n          removed: !1\n        }, o.first || (o.first = a), r && (r.next = a), _ ? o.size++ : t.size++, \"F\" !== i && (o.index[i] = a)), t;\n      },\n          u = function u(t, e) {\n        var n,\n            r = s(t),\n            i = Hr(e);\n        if (\"F\" !== i) return r.index[i];\n\n        for (n = r.first; n; n = n.next) {\n          if (n.key == e) return n;\n        }\n      };\n\n      return Wr(o.prototype, {\n        clear: function clear() {\n          for (var t = s(this), e = t.index, n = t.first; n;) {\n            n.removed = !0, n.previous && (n.previous = n.previous.next = void 0), delete e[n.index], n = n.next;\n          }\n\n          t.first = t.last = void 0, _ ? t.size = 0 : this.size = 0;\n        },\n        delete: function _delete(t) {\n          var e = s(this),\n              n = u(this, t);\n\n          if (n) {\n            var r = n.next,\n                i = n.previous;\n            delete e.index[n.index], n.removed = !0, i && (i.next = r), r && (r.previous = i), e.first == n && (e.first = r), e.last == n && (e.last = i), _ ? e.size-- : this.size--;\n          }\n\n          return !!n;\n        },\n        forEach: function forEach(t) {\n          for (var e, n = s(this), r = Bt(t, 1 < arguments.length ? arguments[1] : void 0, 3); e = e ? e.next : n.first;) {\n            for (r(e.value, e.key, this); e && e.removed;) {\n              e = e.previous;\n            }\n          }\n        },\n        has: function has(t) {\n          return !!u(this, t);\n        }\n      }), Wr(o.prototype, r ? {\n        get: function get(t) {\n          var e = u(this, t);\n          return e && e.value;\n        },\n        set: function set(t, e) {\n          return a(this, 0 === t ? 0 : t, e);\n        }\n      } : {\n        add: function add(t) {\n          return a(this, t = 0 === t ? 0 : t, t);\n        }\n      }), _ && Qr(o.prototype, \"size\", {\n        get: function get() {\n          return s(this).size;\n        }\n      }), o;\n    },\n    setStrong: function setStrong(t, e, n) {\n      var r,\n          i,\n          o = e + \" Iterator\",\n          a = zr(e),\n          s = zr(o);\n      We(t, e, function (t, e) {\n        Gr(this, {\n          type: o,\n          target: t,\n          state: a(t),\n          kind: e,\n          last: void 0\n        });\n      }, function () {\n        for (var t = s(this), e = t.kind, n = t.last; n && n.removed;) {\n          n = n.previous;\n        }\n\n        return t.target && (t.last = n = n ? n.next : t.state.first) ? \"keys\" == e ? {\n          value: n.key,\n          done: !1\n        } : \"values\" == e ? {\n          value: n.value,\n          done: !1\n        } : {\n          value: [n.key, n.value],\n          done: !1\n        } : {\n          value: t.target = void 0,\n          done: !0\n        };\n      }, n ? \"entries\" : \"values\", !n, !0), r = dt(e), i = K.f, _ && r && !r[Kr] && i(r, Kr, {\n        configurable: !0,\n        get: function get() {\n          return this;\n        }\n      });\n    }\n  },\n      Xr = (jr(\"Map\", function (t) {\n    return function () {\n      return t(this, arguments.length ? arguments[0] : void 0);\n    };\n  }, Yr, !0), ft.Map, function (t) {\n    var e,\n        n,\n        r,\n        i,\n        o = arguments.length,\n        a = 1 < o ? arguments[1] : void 0;\n    return Vt(this), (e = void 0 !== a) && Vt(a), null == t ? new this() : (n = [], e ? (r = 0, i = Bt(a, 2 < o ? arguments[2] : void 0, 2), Vr(t, function (t) {\n      n.push(i(t, r++));\n    })) : Vr(t, n.push, n), new this(n));\n  });\n\n  qt({\n    target: \"Map\",\n    stat: !0\n  }, {\n    from: Xr\n  });\n\n  var Jr = function Jr() {\n    for (var t = arguments.length, e = new Array(t); t--;) {\n      e[t] = arguments[t];\n    }\n\n    return new this(e);\n  };\n\n  qt({\n    target: \"Map\",\n    stat: !0\n  }, {\n    of: Jr\n  });\n\n  var $r = function $r() {\n    for (var t = j(this), e = Vt(t.delete), n = !0, r = 0, i = arguments.length; r < i; r++) {\n      n = n && e.call(t, arguments[r]);\n    }\n\n    return !!n;\n  };\n\n  qt({\n    target: \"Map\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    deleteAll: function deleteAll() {\n      return $r.apply(this, arguments);\n    }\n  });\n\n  var Zr = function Zr(t) {\n    return Map.prototype.entries.call(t);\n  };\n\n  qt({\n    target: \"Map\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    every: function every(t) {\n      var n = j(this),\n          e = Zr(n),\n          r = Bt(t, 1 < arguments.length ? arguments[1] : void 0, 3);\n      return !Vr(e, function (t, e) {\n        if (!r(e, t, n)) return Vr.stop();\n      }, void 0, !0, !0).stopped;\n    }\n  });\n\n  var ti = Gt(\"species\"),\n      ei = function ei(t, e) {\n    var n,\n        r = j(t).constructor;\n    return void 0 === r || null == (n = j(r)[ti]) ? e : Vt(n);\n  };\n\n  qt({\n    target: \"Map\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    filter: function filter(t) {\n      var n = j(this),\n          e = Zr(n),\n          r = Bt(t, 1 < arguments.length ? arguments[1] : void 0, 3),\n          i = new (ei(n, dt(\"Map\")))(),\n          o = Vt(i.set);\n      return Vr(e, function (t, e) {\n        r(e, t, n) && o.call(i, t, e);\n      }, void 0, !0, !0), i;\n    }\n  }), qt({\n    target: \"Map\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    find: function find(t) {\n      var n = j(this),\n          e = Zr(n),\n          r = Bt(t, 1 < arguments.length ? arguments[1] : void 0, 3);\n      return Vr(e, function (t, e) {\n        if (r(e, t, n)) return Vr.stop(e);\n      }, void 0, !0, !0).result;\n    }\n  }), qt({\n    target: \"Map\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    findKey: function findKey(t) {\n      var n = j(this),\n          e = Zr(n),\n          r = Bt(t, 1 < arguments.length ? arguments[1] : void 0, 3);\n      return Vr(e, function (t, e) {\n        if (r(e, t, n)) return Vr.stop(t);\n      }, void 0, !0, !0).result;\n    }\n  }), qt({\n    target: \"Map\",\n    stat: !0\n  }, {\n    groupBy: function groupBy(t, n) {\n      var r = new this();\n      Vt(n);\n      var i = Vt(r.has),\n          o = Vt(r.get),\n          a = Vt(r.set);\n      return Vr(t, function (t) {\n        var e = n(t);\n        i.call(r, e) ? o.call(r, e).push(t) : a.call(r, e, [t]);\n      }), r;\n    }\n  });\n  qt({\n    target: \"Map\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    includes: function includes(i) {\n      return Vr(Zr(j(this)), function (t, e) {\n        if ((n = e) === (r = i) || n != n && r != r) return Vr.stop();\n        var n, r;\n      }, void 0, !0, !0).stopped;\n    }\n  }), qt({\n    target: \"Map\",\n    stat: !0\n  }, {\n    keyBy: function keyBy(t, e) {\n      var n = new this();\n      Vt(e);\n      var r = Vt(n.set);\n      return Vr(t, function (t) {\n        r.call(n, e(t), t);\n      }), n;\n    }\n  }), qt({\n    target: \"Map\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    keyOf: function keyOf(n) {\n      return Vr(Zr(j(this)), function (t, e) {\n        if (e === n) return Vr.stop(t);\n      }, void 0, !0, !0).result;\n    }\n  }), qt({\n    target: \"Map\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    mapKeys: function mapKeys(t) {\n      var n = j(this),\n          e = Zr(n),\n          r = Bt(t, 1 < arguments.length ? arguments[1] : void 0, 3),\n          i = new (ei(n, dt(\"Map\")))(),\n          o = Vt(i.set);\n      return Vr(e, function (t, e) {\n        o.call(i, r(e, t, n), e);\n      }, void 0, !0, !0), i;\n    }\n  }), qt({\n    target: \"Map\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    mapValues: function mapValues(t) {\n      var n = j(this),\n          e = Zr(n),\n          r = Bt(t, 1 < arguments.length ? arguments[1] : void 0, 3),\n          i = new (ei(n, dt(\"Map\")))(),\n          o = Vt(i.set);\n      return Vr(e, function (t, e) {\n        o.call(i, t, r(e, t, n));\n      }, void 0, !0, !0), i;\n    }\n  }), qt({\n    target: \"Map\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    merge: function merge(t) {\n      for (var e = j(this), n = Vt(e.set), r = 0; r < arguments.length;) {\n        Vr(arguments[r++], n, e, !0);\n      }\n\n      return e;\n    }\n  }), qt({\n    target: \"Map\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    reduce: function reduce(n) {\n      var r,\n          t,\n          i = j(this),\n          e = Zr(i);\n      if (Vt(n), 1 < arguments.length) r = arguments[1];else {\n        if ((t = e.next()).done) throw TypeError(\"Reduce of empty map with no initial value\");\n        r = t.value[1];\n      }\n      return Vr(e, function (t, e) {\n        r = n(r, e, t, i);\n      }, void 0, !0, !0), r;\n    }\n  }), qt({\n    target: \"Map\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    some: function some(t) {\n      var n = j(this),\n          e = Zr(n),\n          r = Bt(t, 1 < arguments.length ? arguments[1] : void 0, 3);\n      return Vr(e, function (t, e) {\n        if (r(e, t, n)) return Vr.stop();\n      }, void 0, !0, !0).stopped;\n    }\n  }), qt({\n    target: \"Map\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    update: function update(t, e) {\n      var n = j(this),\n          r = arguments.length;\n      Vt(e);\n      var i = n.has(t);\n      if (!i && r < 3) throw TypeError(\"Updating absent value\");\n      var o = i ? n.get(t) : Vt(2 < r ? arguments[2] : void 0)(t, n);\n      return n.set(t, e(o, t, n)), n;\n    }\n  });\n  jr(\"Set\", function (t) {\n    return function () {\n      return t(this, arguments.length ? arguments[0] : void 0);\n    };\n  }, Yr), ft.Set;\n  qt({\n    target: \"Set\",\n    stat: !0\n  }, {\n    from: Xr\n  }), qt({\n    target: \"Set\",\n    stat: !0\n  }, {\n    of: Jr\n  });\n  qt({\n    target: \"Set\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    addAll: function addAll() {\n      return function () {\n        for (var t = j(this), e = Vt(t.add), n = 0, r = arguments.length; n < r; n++) {\n          e.call(t, arguments[n]);\n        }\n\n        return t;\n      }.apply(this, arguments);\n    }\n  }), qt({\n    target: \"Set\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    deleteAll: function deleteAll() {\n      return $r.apply(this, arguments);\n    }\n  });\n\n  var ni = function ni(t) {\n    return Set.prototype.values.call(t);\n  };\n\n  qt({\n    target: \"Set\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    every: function every(t) {\n      var e = j(this),\n          n = ni(e),\n          r = Bt(t, 1 < arguments.length ? arguments[1] : void 0, 3);\n      return !Vr(n, function (t) {\n        if (!r(t, t, e)) return Vr.stop();\n      }, void 0, !1, !0).stopped;\n    }\n  }), qt({\n    target: \"Set\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    difference: function difference(t) {\n      var e = j(this),\n          n = new (ei(e, dt(\"Set\")))(e),\n          r = Vt(n.delete);\n      return Vr(t, function (t) {\n        r.call(n, t);\n      }), n;\n    }\n  }), qt({\n    target: \"Set\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    filter: function filter(t) {\n      var e = j(this),\n          n = ni(e),\n          r = Bt(t, 1 < arguments.length ? arguments[1] : void 0, 3),\n          i = new (ei(e, dt(\"Set\")))(),\n          o = Vt(i.add);\n      return Vr(n, function (t) {\n        r(t, t, e) && o.call(i, t);\n      }, void 0, !1, !0), i;\n    }\n  }), qt({\n    target: \"Set\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    find: function find(t) {\n      var e = j(this),\n          n = ni(e),\n          r = Bt(t, 1 < arguments.length ? arguments[1] : void 0, 3);\n      return Vr(n, function (t) {\n        if (r(t, t, e)) return Vr.stop(t);\n      }, void 0, !1, !0).result;\n    }\n  }), qt({\n    target: \"Set\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    intersection: function intersection(t) {\n      var e = j(this),\n          n = new (ei(e, dt(\"Set\")))(),\n          r = Vt(e.has),\n          i = Vt(n.add);\n      return Vr(t, function (t) {\n        r.call(e, t) && i.call(n, t);\n      }), n;\n    }\n  }), qt({\n    target: \"Set\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    isDisjointFrom: function isDisjointFrom(t) {\n      var e = j(this),\n          n = Vt(e.has);\n      return !Vr(t, function (t) {\n        if (!0 === n.call(e, t)) return Vr.stop();\n      }).stopped;\n    }\n  }), qt({\n    target: \"Set\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    isSubsetOf: function isSubsetOf(t) {\n      var e = function (t) {\n        var e = rn(t);\n        if (\"function\" != typeof e) throw TypeError(String(t) + \" is not iterable\");\n        return j(e.call(t));\n      }(this),\n          n = j(t),\n          r = n.has;\n\n      return \"function\" != typeof r && (n = new (dt(\"Set\"))(t), r = Vt(n.has)), !Vr(e, function (t) {\n        if (!1 === r.call(n, t)) return Vr.stop();\n      }, void 0, !1, !0).stopped;\n    }\n  }), qt({\n    target: \"Set\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    isSupersetOf: function isSupersetOf(t) {\n      var e = j(this),\n          n = Vt(e.has);\n      return !Vr(t, function (t) {\n        if (!1 === n.call(e, t)) return Vr.stop();\n      }).stopped;\n    }\n  }), qt({\n    target: \"Set\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    join: function join(t) {\n      var e = j(this),\n          n = ni(e),\n          r = void 0 === t ? \",\" : String(t),\n          i = [];\n      return Vr(n, i.push, i, !1, !0), i.join(r);\n    }\n  }), qt({\n    target: \"Set\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    map: function map(t) {\n      var e = j(this),\n          n = ni(e),\n          r = Bt(t, 1 < arguments.length ? arguments[1] : void 0, 3),\n          i = new (ei(e, dt(\"Set\")))(),\n          o = Vt(i.add);\n      return Vr(n, function (t) {\n        o.call(i, r(t, t, e));\n      }, void 0, !1, !0), i;\n    }\n  }), qt({\n    target: \"Set\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    reduce: function reduce(e) {\n      var n,\n          t,\n          r = j(this),\n          i = ni(r);\n      if (Vt(e), 1 < arguments.length) n = arguments[1];else {\n        if ((t = i.next()).done) throw TypeError(\"Reduce of empty set with no initial value\");\n        n = t.value;\n      }\n      return Vr(i, function (t) {\n        n = e(n, t, t, r);\n      }, void 0, !1, !0), n;\n    }\n  }), qt({\n    target: \"Set\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    some: function some(t) {\n      var e = j(this),\n          n = ni(e),\n          r = Bt(t, 1 < arguments.length ? arguments[1] : void 0, 3);\n      return Vr(n, function (t) {\n        if (r(t, t, e)) return Vr.stop();\n      }, void 0, !1, !0).stopped;\n    }\n  }), qt({\n    target: \"Set\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    symmetricDifference: function symmetricDifference(t) {\n      var e = j(this),\n          n = new (ei(e, dt(\"Set\")))(e),\n          r = Vt(n.delete),\n          i = Vt(n.add);\n      return Vr(t, function (t) {\n        r.call(n, t) || i.call(n, t);\n      }), n;\n    }\n  }), qt({\n    target: \"Set\",\n    proto: !0,\n    real: !0,\n    forced: G\n  }, {\n    union: function union(t) {\n      var e = j(this),\n          n = new (ei(e, dt(\"Set\")))(e);\n      return Vr(t, Vt(n.add), n), n;\n    }\n  });\n\n  var _ri = function ri(t, e) {\n    return (_ri = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (t, e) {\n      t.__proto__ = e;\n    } || function (t, e) {\n      for (var n in e) {\n        e.hasOwnProperty(n) && (t[n] = e[n]);\n      }\n    })(t, e);\n  };\n\n  function ii(t, e) {\n    function n() {\n      this.constructor = t;\n    }\n\n    _ri(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n());\n  }\n\n  var _oi = function oi() {\n    return (_oi = Object.assign || function (t) {\n      for (var e, n = 1, r = arguments.length; n < r; n++) {\n        for (var i in e = arguments[n]) {\n          Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);\n        }\n      }\n\n      return t;\n    }).apply(this, arguments);\n  };\n\n  function ai(o, a, s, u) {\n    return new (s || (s = Promise))(function (t, e) {\n      function n(t) {\n        try {\n          i(u.next(t));\n        } catch (t) {\n          e(t);\n        }\n      }\n\n      function r(t) {\n        try {\n          i(u.throw(t));\n        } catch (t) {\n          e(t);\n        }\n      }\n\n      function i(e) {\n        e.done ? t(e.value) : new s(function (t) {\n          t(e.value);\n        }).then(n, r);\n      }\n\n      i((u = u.apply(o, a || [])).next());\n    });\n  }\n\n  function si(n, r) {\n    var i,\n        o,\n        a,\n        t,\n        s = {\n      label: 0,\n      sent: function sent() {\n        if (1 & a[0]) throw a[1];\n        return a[1];\n      },\n      trys: [],\n      ops: []\n    };\n    return t = {\n      next: e(0),\n      throw: e(1),\n      return: e(2)\n    }, \"function\" == typeof Symbol && (t[Symbol.iterator] = function () {\n      return this;\n    }), t;\n\n    function e(e) {\n      return function (t) {\n        return function (e) {\n          if (i) throw new TypeError(\"Generator is already executing.\");\n\n          for (; s;) {\n            try {\n              if (i = 1, o && (a = 2 & e[0] ? o.return : e[0] ? o.throw || ((a = o.return) && a.call(o), 0) : o.next) && !(a = a.call(o, e[1])).done) return a;\n\n              switch (o = 0, a && (e = [2 & e[0], a.value]), e[0]) {\n                case 0:\n                case 1:\n                  a = e;\n                  break;\n\n                case 4:\n                  return s.label++, {\n                    value: e[1],\n                    done: !1\n                  };\n\n                case 5:\n                  s.label++, o = e[1], e = [0];\n                  continue;\n\n                case 7:\n                  e = s.ops.pop(), s.trys.pop();\n                  continue;\n\n                default:\n                  if (!(a = 0 < (a = s.trys).length && a[a.length - 1]) && (6 === e[0] || 2 === e[0])) {\n                    s = 0;\n                    continue;\n                  }\n\n                  if (3 === e[0] && (!a || e[1] > a[0] && e[1] < a[3])) {\n                    s.label = e[1];\n                    break;\n                  }\n\n                  if (6 === e[0] && s.label < a[1]) {\n                    s.label = a[1], a = e;\n                    break;\n                  }\n\n                  if (a && s.label < a[2]) {\n                    s.label = a[2], s.ops.push(e);\n                    break;\n                  }\n\n                  a[2] && s.ops.pop(), s.trys.pop();\n                  continue;\n              }\n\n              e = r.call(n, s);\n            } catch (t) {\n              e = [6, t], o = 0;\n            } finally {\n              i = a = 0;\n            }\n          }\n\n          if (5 & e[0]) throw e[1];\n          return {\n            value: e[0] ? e[1] : void 0,\n            done: !0\n          };\n        }([e, t]);\n      };\n    }\n  }\n\n  function ui(t) {\n    var e = \"function\" == typeof Symbol && t[Symbol.iterator],\n        n = 0;\n    return e ? e.call(t) : {\n      next: function next() {\n        return t && n >= t.length && (t = void 0), {\n          value: t && t[n++],\n          done: !t\n        };\n      }\n    };\n  }\n\n  function ci(t, e) {\n    var n = \"function\" == typeof Symbol && t[Symbol.iterator];\n    if (!n) return t;\n    var r,\n        i,\n        o = n.call(t),\n        a = [];\n\n    try {\n      for (; (void 0 === e || 0 < e--) && !(r = o.next()).done;) {\n        a.push(r.value);\n      }\n    } catch (t) {\n      i = {\n        error: t\n      };\n    } finally {\n      try {\n        r && !r.done && (n = o.return) && n.call(o);\n      } finally {\n        if (i) throw i.error;\n      }\n    }\n\n    return a;\n  }\n\n  function hi() {\n    for (var t = [], e = 0; e < arguments.length; e++) {\n      t = t.concat(ci(arguments[e]));\n    }\n\n    return t;\n  }\n\n  var li = {\n    NODE_CLIENT: !1,\n    NODE_ADMIN: !1,\n    SDK_VERSION: \"${JSCORE_VERSION}\"\n  },\n      fi = function fi(t, e) {\n    if (!t) throw pi(e);\n  },\n      pi = function pi(t) {\n    return new Error(\"Firebase Database (\" + li.SDK_VERSION + \") INTERNAL ASSERT FAILED: \" + t);\n  },\n      di = function di(t) {\n    for (var e = [], n = 0, r = 0; r < t.length; r++) {\n      var i = t.charCodeAt(r);\n      e[n++] = i < 128 ? i : (e[n++] = i < 2048 ? i >> 6 | 192 : (55296 == (64512 & i) && r + 1 < t.length && 56320 == (64512 & t.charCodeAt(r + 1)) ? (i = 65536 + ((1023 & i) << 10) + (1023 & t.charCodeAt(++r)), e[n++] = i >> 18 | 240, e[n++] = i >> 12 & 63 | 128) : e[n++] = i >> 12 | 224, i >> 6 & 63 | 128), 63 & i | 128);\n    }\n\n    return e;\n  },\n      yi = {\n    byteToCharMap_: null,\n    charToByteMap_: null,\n    byteToCharMapWebSafe_: null,\n    charToByteMapWebSafe_: null,\n    ENCODED_VALS_BASE: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",\n\n    get ENCODED_VALS() {\n      return this.ENCODED_VALS_BASE + \"+/=\";\n    },\n\n    get ENCODED_VALS_WEBSAFE() {\n      return this.ENCODED_VALS_BASE + \"-_.\";\n    },\n\n    HAS_NATIVE_SUPPORT: \"function\" == typeof atob,\n    encodeByteArray: function encodeByteArray(t, e) {\n      if (!Array.isArray(t)) throw Error(\"encodeByteArray takes an array as a parameter\");\n      this.init_();\n\n      for (var n = e ? this.byteToCharMapWebSafe_ : this.byteToCharMap_, r = [], i = 0; i < t.length; i += 3) {\n        var o = t[i],\n            a = i + 1 < t.length,\n            s = a ? t[i + 1] : 0,\n            u = i + 2 < t.length,\n            c = u ? t[i + 2] : 0,\n            h = o >> 2,\n            l = (3 & o) << 4 | s >> 4,\n            f = (15 & s) << 2 | c >> 6,\n            p = 63 & c;\n        u || (p = 64, a || (f = 64)), r.push(n[h], n[l], n[f], n[p]);\n      }\n\n      return r.join(\"\");\n    },\n    encodeString: function encodeString(t, e) {\n      return this.HAS_NATIVE_SUPPORT && !e ? btoa(t) : this.encodeByteArray(di(t), e);\n    },\n    decodeString: function decodeString(t, e) {\n      return this.HAS_NATIVE_SUPPORT && !e ? atob(t) : function (t) {\n        for (var e = [], n = 0, r = 0; n < t.length;) {\n          var i = t[n++];\n          if (i < 128) e[r++] = String.fromCharCode(i);else if (191 < i && i < 224) {\n            var o = t[n++];\n            e[r++] = String.fromCharCode((31 & i) << 6 | 63 & o);\n          } else if (239 < i && i < 365) {\n            var a = ((7 & i) << 18 | (63 & (o = t[n++])) << 12 | (63 & (s = t[n++])) << 6 | 63 & t[n++]) - 65536;\n            e[r++] = String.fromCharCode(55296 + (a >> 10)), e[r++] = String.fromCharCode(56320 + (1023 & a));\n          } else {\n            o = t[n++];\n            var s = t[n++];\n            e[r++] = String.fromCharCode((15 & i) << 12 | (63 & o) << 6 | 63 & s);\n          }\n        }\n\n        return e.join(\"\");\n      }(this.decodeStringToByteArray(t, e));\n    },\n    decodeStringToByteArray: function decodeStringToByteArray(t, e) {\n      this.init_();\n\n      for (var n = e ? this.charToByteMapWebSafe_ : this.charToByteMap_, r = [], i = 0; i < t.length;) {\n        var o = n[t.charAt(i++)],\n            a = i < t.length ? n[t.charAt(i)] : 0,\n            s = ++i < t.length ? n[t.charAt(i)] : 64,\n            u = ++i < t.length ? n[t.charAt(i)] : 64;\n        if (++i, null == o || null == a || null == s || null == u) throw Error();\n        var c = o << 2 | a >> 4;\n\n        if (r.push(c), 64 !== s) {\n          var h = a << 4 & 240 | s >> 2;\n\n          if (r.push(h), 64 !== u) {\n            var l = s << 6 & 192 | u;\n            r.push(l);\n          }\n        }\n      }\n\n      return r;\n    },\n    init_: function init_() {\n      if (!this.byteToCharMap_) {\n        this.byteToCharMap_ = {}, this.charToByteMap_ = {}, this.byteToCharMapWebSafe_ = {}, this.charToByteMapWebSafe_ = {};\n\n        for (var t = 0; t < this.ENCODED_VALS.length; t++) {\n          this.byteToCharMap_[t] = this.ENCODED_VALS.charAt(t), this.charToByteMap_[this.byteToCharMap_[t]] = t, this.byteToCharMapWebSafe_[t] = this.ENCODED_VALS_WEBSAFE.charAt(t), (this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]] = t) >= this.ENCODED_VALS_BASE.length && (this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)] = t, this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)] = t);\n        }\n      }\n    }\n  },\n      mi = function mi(t) {\n    try {\n      return yi.decodeString(t, !0);\n    } catch (t) {\n      console.error(\"base64Decode failed: \", t);\n    }\n\n    return null;\n  };\n\n  function gi(t) {\n    return vi(void 0, t);\n  }\n\n  function vi(t, e) {\n    if (!(e instanceof Object)) return e;\n\n    switch (e.constructor) {\n      case Date:\n        return new Date(e.getTime());\n\n      case Object:\n        void 0 === t && (t = {});\n        break;\n\n      case Array:\n        t = [];\n        break;\n\n      default:\n        return e;\n    }\n\n    for (var n in e) {\n      e.hasOwnProperty(n) && (t[n] = vi(t[n], e[n]));\n    }\n\n    return t;\n  }\n\n  var bi = function () {\n    function t() {\n      var n = this;\n      this.reject = function () {}, this.resolve = function () {}, this.promise = new Promise(function (t, e) {\n        n.resolve = t, n.reject = e;\n      });\n    }\n\n    return t.prototype.wrapCallback = function (n) {\n      var r = this;\n      return function (t, e) {\n        t ? r.reject(t) : r.resolve(e), \"function\" == typeof n && (r.promise.catch(function () {}), 1 === n.length ? n(t) : n(t, e));\n      };\n    }, t;\n  }();\n\n  function wi() {\n    return \"undefined\" != typeof navigator && \"string\" == typeof navigator.userAgent ? navigator.userAgent : \"\";\n  }\n\n  function _i() {\n    return \"undefined\" != typeof window && !!(window.cordova || window.phonegap || window.PhoneGap) && /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wi());\n  }\n\n  function Ei() {\n    return \"object\" == typeof navigator && \"ReactNative\" === navigator.product;\n  }\n\n  function Ti() {\n    return !0 === li.NODE_ADMIN;\n  }\n\n  var Si = function (r) {\n    function i(t, e) {\n      var n = r.call(this, e) || this;\n      return n.code = t, n.name = \"FirebaseError\", Object.setPrototypeOf(n, i.prototype), Error.captureStackTrace && Error.captureStackTrace(n, Ii.prototype.create), n;\n    }\n\n    return ii(i, r), i;\n  }(Error),\n      Ii = function () {\n    function t(t, e, n) {\n      this.service = t, this.serviceName = e, this.errors = n;\n    }\n\n    return t.prototype.create = function (t) {\n      for (var e = [], n = 1; n < arguments.length; n++) {\n        e[n - 1] = arguments[n];\n      }\n\n      for (var r, i = e[0] || {}, o = this.service + \"/\" + t, a = this.errors[t], s = a ? (r = i, a.replace(Ci, function (t, e) {\n        var n = r[e];\n        return null != n ? n.toString() : \"<\" + e + \"?>\";\n      })) : \"Error\", u = this.serviceName + \": \" + s + \" (\" + o + \").\", c = new Si(o, u), h = 0, l = Object.keys(i); h < l.length; h++) {\n        var f = l[h];\n        \"_\" !== f.slice(-1) && (f in c && console.warn('Overwriting FirebaseError base field \"' + f + '\" can cause unexpected behavior.'), c[f] = i[f]);\n      }\n\n      return c;\n    }, t;\n  }();\n\n  var Ci = /\\{\\$([^}]+)}/g;\n\n  function Ni(t) {\n    return JSON.parse(t);\n  }\n\n  function Ai(t) {\n    return JSON.stringify(t);\n  }\n\n  var ki = function ki(t) {\n    var e = {},\n        n = {},\n        r = {},\n        i = \"\";\n\n    try {\n      var o = t.split(\".\");\n      e = Ni(mi(o[0]) || \"\"), n = Ni(mi(o[1]) || \"\"), i = o[2], r = n.d || {}, delete n.d;\n    } catch (t) {}\n\n    return {\n      header: e,\n      claims: n,\n      data: r,\n      signature: i\n    };\n  };\n\n  function Di(t, e) {\n    return Object.prototype.hasOwnProperty.call(t, e);\n  }\n\n  function Ri(t, e) {\n    return Object.prototype.hasOwnProperty.call(t, e) ? t[e] : void 0;\n  }\n\n  function Oi(t) {\n    for (var e in t) {\n      if (Object.prototype.hasOwnProperty.call(t, e)) return !1;\n    }\n\n    return !0;\n  }\n\n  function Pi(t, e, n) {\n    var r = {};\n\n    for (var i in t) {\n      Object.prototype.hasOwnProperty.call(t, i) && (r[i] = e.call(n, t[i], i, t));\n    }\n\n    return r;\n  }\n\n  var xi = function () {\n    function t() {\n      this.chain_ = [], this.buf_ = [], this.W_ = [], this.pad_ = [], this.inbuf_ = 0, this.total_ = 0, this.blockSize = 64, this.pad_[0] = 128;\n\n      for (var t = 1; t < this.blockSize; ++t) {\n        this.pad_[t] = 0;\n      }\n\n      this.reset();\n    }\n\n    return t.prototype.reset = function () {\n      this.chain_[0] = 1732584193, this.chain_[1] = 4023233417, this.chain_[2] = 2562383102, this.chain_[3] = 271733878, this.chain_[4] = 3285377520, this.inbuf_ = 0, this.total_ = 0;\n    }, t.prototype.compress_ = function (t, e) {\n      e || (e = 0);\n      var n = this.W_;\n      if (\"string\" == typeof t) for (var r = 0; r < 16; r++) {\n        n[r] = t.charCodeAt(e) << 24 | t.charCodeAt(e + 1) << 16 | t.charCodeAt(e + 2) << 8 | t.charCodeAt(e + 3), e += 4;\n      } else for (r = 0; r < 16; r++) {\n        n[r] = t[e] << 24 | t[e + 1] << 16 | t[e + 2] << 8 | t[e + 3], e += 4;\n      }\n\n      for (r = 16; r < 80; r++) {\n        var i = n[r - 3] ^ n[r - 8] ^ n[r - 14] ^ n[r - 16];\n        n[r] = 4294967295 & (i << 1 | i >>> 31);\n      }\n\n      var o,\n          a,\n          s = this.chain_[0],\n          u = this.chain_[1],\n          c = this.chain_[2],\n          h = this.chain_[3],\n          l = this.chain_[4];\n\n      for (r = 0; r < 80; r++) {\n        a = r < 40 ? r < 20 ? (o = h ^ u & (c ^ h), 1518500249) : (o = u ^ c ^ h, 1859775393) : r < 60 ? (o = u & c | h & (u | c), 2400959708) : (o = u ^ c ^ h, 3395469782);\n        i = (s << 5 | s >>> 27) + o + l + a + n[r] & 4294967295;\n        l = h, h = c, c = 4294967295 & (u << 30 | u >>> 2), u = s, s = i;\n      }\n\n      this.chain_[0] = this.chain_[0] + s & 4294967295, this.chain_[1] = this.chain_[1] + u & 4294967295, this.chain_[2] = this.chain_[2] + c & 4294967295, this.chain_[3] = this.chain_[3] + h & 4294967295, this.chain_[4] = this.chain_[4] + l & 4294967295;\n    }, t.prototype.update = function (t, e) {\n      if (null != t) {\n        void 0 === e && (e = t.length);\n\n        for (var n = e - this.blockSize, r = 0, i = this.buf_, o = this.inbuf_; r < e;) {\n          if (0 === o) for (; r <= n;) {\n            this.compress_(t, r), r += this.blockSize;\n          }\n\n          if (\"string\" == typeof t) {\n            for (; r < e;) {\n              if (i[o] = t.charCodeAt(r), ++r, ++o === this.blockSize) {\n                this.compress_(i), o = 0;\n                break;\n              }\n            }\n          } else for (; r < e;) {\n            if (i[o] = t[r], ++r, ++o === this.blockSize) {\n              this.compress_(i), o = 0;\n              break;\n            }\n          }\n        }\n\n        this.inbuf_ = o, this.total_ += e;\n      }\n    }, t.prototype.digest = function () {\n      var t = [],\n          e = 8 * this.total_;\n      this.inbuf_ < 56 ? this.update(this.pad_, 56 - this.inbuf_) : this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));\n\n      for (var n = this.blockSize - 1; 56 <= n; n--) {\n        this.buf_[n] = 255 & e, e /= 256;\n      }\n\n      this.compress_(this.buf_);\n      var r = 0;\n\n      for (n = 0; n < 5; n++) {\n        for (var i = 24; 0 <= i; i -= 8) {\n          t[r] = this.chain_[n] >> i & 255, ++r;\n        }\n      }\n\n      return t;\n    }, t;\n  }();\n\n  function Mi(t, e) {\n    var n = new Li(t, e);\n    return n.subscribe.bind(n);\n  }\n\n  var Li = function () {\n    function t(t, e) {\n      var n = this;\n      this.observers = [], this.unsubscribes = [], this.observerCount = 0, this.task = Promise.resolve(), this.finalized = !1, this.onNoObservers = e, this.task.then(function () {\n        t(n);\n      }).catch(function (t) {\n        n.error(t);\n      });\n    }\n\n    return t.prototype.next = function (e) {\n      this.forEachObserver(function (t) {\n        t.next(e);\n      });\n    }, t.prototype.error = function (e) {\n      this.forEachObserver(function (t) {\n        t.error(e);\n      }), this.close(e);\n    }, t.prototype.complete = function () {\n      this.forEachObserver(function (t) {\n        t.complete();\n      }), this.close();\n    }, t.prototype.subscribe = function (t, e, n) {\n      var r,\n          i = this;\n      if (void 0 === t && void 0 === e && void 0 === n) throw new Error(\"Missing Observer.\");\n      void 0 === (r = function (t, e) {\n        if (\"object\" != typeof t || null === t) return !1;\n\n        for (var n = 0, r = e; n < r.length; n++) {\n          var i = r[n];\n          if (i in t && \"function\" == typeof t[i]) return !0;\n        }\n\n        return !1;\n      }(t, [\"next\", \"error\", \"complete\"]) ? t : {\n        next: t,\n        error: e,\n        complete: n\n      }).next && (r.next = Fi), void 0 === r.error && (r.error = Fi), void 0 === r.complete && (r.complete = Fi);\n      var o = this.unsubscribeOne.bind(this, this.observers.length);\n      return this.finalized && this.task.then(function () {\n        try {\n          i.finalError ? r.error(i.finalError) : r.complete();\n        } catch (t) {}\n      }), this.observers.push(r), o;\n    }, t.prototype.unsubscribeOne = function (t) {\n      void 0 !== this.observers && void 0 !== this.observers[t] && (delete this.observers[t], this.observerCount -= 1, 0 === this.observerCount && void 0 !== this.onNoObservers && this.onNoObservers(this));\n    }, t.prototype.forEachObserver = function (t) {\n      if (!this.finalized) for (var e = 0; e < this.observers.length; e++) {\n        this.sendOne(e, t);\n      }\n    }, t.prototype.sendOne = function (t, e) {\n      var n = this;\n      this.task.then(function () {\n        if (void 0 !== n.observers && void 0 !== n.observers[t]) try {\n          e(n.observers[t]);\n        } catch (t) {\n          \"undefined\" != typeof console && console.error && console.error(t);\n        }\n      });\n    }, t.prototype.close = function (t) {\n      var e = this;\n      this.finalized || (this.finalized = !0, void 0 !== t && (this.finalError = t), this.task.then(function () {\n        e.observers = void 0, e.onNoObservers = void 0;\n      }));\n    }, t;\n  }();\n\n  function Fi() {}\n\n  var Ui = function Ui(t, e, n, r) {\n    var i;\n    if (r < e ? i = \"at least \" + e : n < r && (i = 0 === n ? \"none\" : \"no more than \" + n), i) throw new Error(t + \" failed: Was called with \" + r + (1 === r ? \" argument.\" : \" arguments.\") + \" Expects \" + i + \".\");\n  };\n\n  function qi(t, e, n) {\n    var r = \"\";\n\n    switch (e) {\n      case 1:\n        r = n ? \"first\" : \"First\";\n        break;\n\n      case 2:\n        r = n ? \"second\" : \"Second\";\n        break;\n\n      case 3:\n        r = n ? \"third\" : \"Third\";\n        break;\n\n      case 4:\n        r = n ? \"fourth\" : \"Fourth\";\n        break;\n\n      default:\n        throw new Error(\"errorPrefix called with argumentNumber > 4.  Need to update it?\");\n    }\n\n    var i = t + \" failed: \";\n    return i += r + \" argument \";\n  }\n\n  function Vi(t, e, n, r) {\n    if ((!r || n) && \"function\" != typeof n) throw new Error(qi(t, e, r) + \"must be a valid function.\");\n  }\n\n  function Bi(t, e, n, r) {\n    if ((!r || n) && (\"object\" != typeof n || null === n)) throw new Error(qi(t, e, r) + \"must be a valid context object.\");\n  }\n\n  var ji,\n      Wi,\n      Ki = function Ki(t) {\n    for (var e = 0, n = 0; n < t.length; n++) {\n      var r = t.charCodeAt(n);\n      r < 128 ? e++ : r < 2048 ? e += 2 : 55296 <= r && r <= 56319 ? (e += 4, n++) : e += 3;\n    }\n\n    return e;\n  };\n\n  (Wi = ji || (ji = {}))[Wi.DEBUG = 0] = \"DEBUG\", Wi[Wi.VERBOSE = 1] = \"VERBOSE\", Wi[Wi.INFO = 2] = \"INFO\", Wi[Wi.WARN = 3] = \"WARN\", Wi[Wi.ERROR = 4] = \"ERROR\", Wi[Wi.SILENT = 5] = \"SILENT\";\n\n  var Qi,\n      Hi = ji.INFO,\n      Gi = function Gi(t, e) {\n    for (var n = [], r = 2; r < arguments.length; r++) {\n      n[r - 2] = arguments[r];\n    }\n\n    if (!(e < t.logLevel)) {\n      var i = new Date().toISOString();\n\n      switch (e) {\n        case ji.DEBUG:\n        case ji.VERBOSE:\n          console.log.apply(console, [\"[\" + i + \"]  \" + t.name + \":\"].concat(n));\n          break;\n\n        case ji.INFO:\n          console.info.apply(console, [\"[\" + i + \"]  \" + t.name + \":\"].concat(n));\n          break;\n\n        case ji.WARN:\n          console.warn.apply(console, [\"[\" + i + \"]  \" + t.name + \":\"].concat(n));\n          break;\n\n        case ji.ERROR:\n          console.error.apply(console, [\"[\" + i + \"]  \" + t.name + \":\"].concat(n));\n          break;\n\n        default:\n          throw new Error(\"Attempted to log a message with an invalid logType (value: \" + e + \")\");\n      }\n    }\n  },\n      zi = function () {\n    function t(t) {\n      this.name = t, this._logLevel = Hi, this._logHandler = Gi;\n    }\n\n    return Object.defineProperty(t.prototype, \"logLevel\", {\n      get: function get() {\n        return this._logLevel;\n      },\n      set: function set(t) {\n        if (!(t in ji)) throw new TypeError(\"Invalid value assigned to `logLevel`\");\n        this._logLevel = t;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"logHandler\", {\n      get: function get() {\n        return this._logHandler;\n      },\n      set: function set(t) {\n        if (\"function\" != typeof t) throw new TypeError(\"Value assigned to `logHandler` must be a function\");\n        this._logHandler = t;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.debug = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) {\n        t[e] = arguments[e];\n      }\n\n      this._logHandler.apply(this, [this, ji.DEBUG].concat(t));\n    }, t.prototype.log = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) {\n        t[e] = arguments[e];\n      }\n\n      this._logHandler.apply(this, [this, ji.VERBOSE].concat(t));\n    }, t.prototype.info = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) {\n        t[e] = arguments[e];\n      }\n\n      this._logHandler.apply(this, [this, ji.INFO].concat(t));\n    }, t.prototype.warn = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) {\n        t[e] = arguments[e];\n      }\n\n      this._logHandler.apply(this, [this, ji.WARN].concat(t));\n    }, t.prototype.error = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) {\n        t[e] = arguments[e];\n      }\n\n      this._logHandler.apply(this, [this, ji.ERROR].concat(t));\n    }, t;\n  }(),\n      Yi = ((Qi = {})[\"no-app\"] = \"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()\", Qi[\"bad-app-name\"] = \"Illegal App name: '{$appName}\", Qi[\"duplicate-app\"] = \"Firebase App named '{$appName}' already exists\", Qi[\"app-deleted\"] = \"Firebase App named '{$appName}' already deleted\", Qi[\"duplicate-service\"] = \"Firebase service named '{$appName}' already registered\", Qi[\"invalid-app-argument\"] = \"firebase.{$appName}() takes either no argument or a Firebase App instance.\", Qi),\n      Xi = new Ii(\"app\", \"Firebase\", Yi),\n      Ji = \"[DEFAULT]\",\n      $i = [],\n      Zi = function () {\n    function t(t, e, n) {\n      this.firebase_ = n, this.isDeleted_ = !1, this.services_ = {}, this.name_ = e.name, this.automaticDataCollectionEnabled_ = e.automaticDataCollectionEnabled || !1, this.options_ = gi(t), this.INTERNAL = {\n        getUid: function getUid() {\n          return null;\n        },\n        getToken: function getToken() {\n          return Promise.resolve(null);\n        },\n        addAuthTokenListener: function addAuthTokenListener(t) {\n          $i.push(t), setTimeout(function () {\n            return t(null);\n          }, 0);\n        },\n        removeAuthTokenListener: function removeAuthTokenListener(e) {\n          $i = $i.filter(function (t) {\n            return t !== e;\n          });\n        }\n      };\n    }\n\n    return Object.defineProperty(t.prototype, \"automaticDataCollectionEnabled\", {\n      get: function get() {\n        return this.checkDestroyed_(), this.automaticDataCollectionEnabled_;\n      },\n      set: function set(t) {\n        this.checkDestroyed_(), this.automaticDataCollectionEnabled_ = t;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"name\", {\n      get: function get() {\n        return this.checkDestroyed_(), this.name_;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"options\", {\n      get: function get() {\n        return this.checkDestroyed_(), this.options_;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.delete = function () {\n      var s = this;\n      return new Promise(function (t) {\n        s.checkDestroyed_(), t();\n      }).then(function () {\n        s.firebase_.INTERNAL.removeApp(s.name_);\n\n        for (var t = [], e = 0, n = Object.keys(s.services_); e < n.length; e++) {\n          for (var r = n[e], i = 0, o = Object.keys(s.services_[r]); i < o.length; i++) {\n            var a = o[i];\n            t.push(s.services_[r][a]);\n          }\n        }\n\n        return Promise.all(t.filter(function (t) {\n          return \"INTERNAL\" in t;\n        }).map(function (t) {\n          return t.INTERNAL.delete();\n        }));\n      }).then(function () {\n        s.isDeleted_ = !0, s.services_ = {};\n      });\n    }, t.prototype._getService = function (t, e) {\n      if (void 0 === e && (e = Ji), this.checkDestroyed_(), this.services_[t] || (this.services_[t] = {}), !this.services_[t][e]) {\n        var n = e !== Ji ? e : void 0,\n            r = this.firebase_.INTERNAL.factories[t](this, this.extendApp.bind(this), n);\n        this.services_[t][e] = r;\n      }\n\n      return this.services_[t][e];\n    }, t.prototype.extendApp = function (t) {\n      var e = this;\n      vi(this, t), t.INTERNAL && t.INTERNAL.addAuthTokenListener && ($i.forEach(function (t) {\n        e.INTERNAL.addAuthTokenListener(t);\n      }), $i = []);\n    }, t.prototype.checkDestroyed_ = function () {\n      if (this.isDeleted_) throw Xi.create(\"app-deleted\", {\n        appName: this.name_\n      });\n    }, t;\n  }();\n\n  Zi.prototype.name && Zi.prototype.options || Zi.prototype.delete || console.log(\"dc\");\n  var to = \"6.3.3\";\n  var eo = new zi(\"@firebase/app\");\n\n  if (\"object\" == typeof self && self.self === self && void 0 !== self.firebase) {\n    eo.warn(\"\\n    Warning: Firebase is already defined in the global scope. Please make sure\\n    Firebase library is only loaded once.\\n  \");\n    var no = self.firebase.SDK_VERSION;\n    no && 0 <= no.indexOf(\"LITE\") && eo.warn(\"\\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\\n    \");\n  }\n\n  var ro = function t() {\n    var e = function (a) {\n      var s = {},\n          u = {},\n          c = {},\n          h = {\n        __esModule: !0,\n        initializeApp: function initializeApp(t, e) {\n          if (void 0 === e && (e = {}), \"object\" != typeof e || null === e) {\n            var n = e;\n            e = {\n              name: n\n            };\n          }\n\n          var r = e;\n          void 0 === r.name && (r.name = Ji);\n          var i = r.name;\n          if (\"string\" != typeof i || !i) throw Xi.create(\"bad-app-name\", {\n            appName: String(i)\n          });\n          if (Di(s, i)) throw Xi.create(\"duplicate-app\", {\n            appName: i\n          });\n          var o = new a(t, r, h);\n          return p(s[i] = o, \"create\"), o;\n        },\n        app: l,\n        apps: null,\n        SDK_VERSION: to,\n        INTERNAL: {\n          registerService: function registerService(n, t, e, r, i) {\n            if (void 0 === i && (i = !1), u[n]) throw Xi.create(\"duplicate-service\", {\n              appName: n\n            });\n\n            function o(t) {\n              if (void 0 === t && (t = l()), \"function\" != typeof t[n]) throw Xi.create(\"invalid-app-argument\", {\n                appName: n\n              });\n              return t[n]();\n            }\n\n            return u[n] = t, r && (c[n] = r, f().forEach(function (t) {\n              r(\"create\", t);\n            })), void 0 !== e && vi(o, e), h[n] = o, a.prototype[n] = function () {\n              for (var t = [], e = 0; e < arguments.length; e++) {\n                t[e] = arguments[e];\n              }\n\n              return this._getService.bind(this, n).apply(this, i ? t : []);\n            }, o;\n          },\n          removeApp: function removeApp(t) {\n            p(s[t], \"delete\"), delete s[t];\n          },\n          factories: u,\n          useAsService: o\n        }\n      };\n\n      function l(t) {\n        if (!Di(s, t = t || Ji)) throw Xi.create(\"no-app\", {\n          appName: t\n        });\n        return s[t];\n      }\n\n      function f() {\n        return Object.keys(s).map(function (t) {\n          return s[t];\n        });\n      }\n\n      function p(t, e) {\n        for (var n = 0, r = Object.keys(u); n < r.length; n++) {\n          var i = o(0, r[n]);\n          if (null === i) return;\n          c[i] && c[i](e, t);\n        }\n      }\n\n      function o(t, e) {\n        return \"serverAuth\" === e ? null : e;\n      }\n\n      return h.default = h, Object.defineProperty(h, \"apps\", {\n        get: f\n      }), l.App = a, h;\n    }(Zi);\n\n    return e.INTERNAL = _oi({}, e.INTERNAL, {\n      createFirebaseNamespace: t,\n      extendNamespace: function extendNamespace(t) {\n        vi(e, t);\n      },\n      createSubscribe: Mi,\n      ErrorFactory: Ii,\n      deepExtend: vi\n    }), e;\n  }(),\n      io = ro.initializeApp;\n\n  ro.initializeApp = function () {\n    for (var t = [], e = 0; e < arguments.length; e++) {\n      t[e] = arguments[e];\n    }\n\n    return function () {\n      try {\n        return \"[object process]\" === Object.prototype.toString.call(global.process);\n      } catch (t) {\n        return !1;\n      }\n    }() && eo.warn('\\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\\n      run in a Node environment.  If running in a Node environment, make sure you\\n      are using the bundle specified by the \"main\" field in package.json.\\n      \\n      If you are using Webpack, you can specify \"main\" as the first item in\\n      \"resolve.mainFields\":\\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\\n      \\n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify \"main\"\\n      as the first item in \"mainFields\", e.g. [\\'main\\', \\'module\\'].\\n      https://github.com/rollup/rollup-plugin-node-resolve\\n      '), io.apply(void 0, t);\n  };\n\n  var Jh = ro;\n  (function () {\n    var t,\n        o = \"function\" == typeof Object.defineProperties ? Object.defineProperty : function (t, e, n) {\n      t != Array.prototype && t != Object.prototype && (t[e] = n.value);\n    },\n        a = \"undefined\" != typeof window && window === this ? this : \"undefined\" != typeof global && null != global ? global : this;\n\n    function c(t) {\n      var e,\n          n,\n          r = \"undefined\" != typeof Symbol && Symbol.iterator && t[Symbol.iterator];\n      return r ? r.call(t) : {\n        next: (e = t, n = 0, function () {\n          return n < e.length ? {\n            done: !1,\n            value: e[n++]\n          } : {\n            done: !0\n          };\n        })\n      };\n    }\n\n    !function (t, e) {\n      if (e) {\n        var n = a;\n        t = t.split(\".\");\n\n        for (var r = 0; r < t.length - 1; r++) {\n          var i = t[r];\n          i in n || (n[i] = {}), n = n[i];\n        }\n\n        (e = e(r = n[t = t[t.length - 1]])) != r && null != e && o(n, t, {\n          configurable: !0,\n          writable: !0,\n          value: e\n        });\n      }\n    }(\"Promise\", function (t) {\n      function s(t) {\n        this.b = 0, this.c = void 0, this.a = [];\n        var e = this.f();\n\n        try {\n          t(e.resolve, e.reject);\n        } catch (t) {\n          e.reject(t);\n        }\n      }\n\n      function e() {\n        this.a = null;\n      }\n\n      function u(e) {\n        return e instanceof s ? e : new s(function (t) {\n          t(e);\n        });\n      }\n\n      if (t) return t;\n\n      e.prototype.b = function (t) {\n        if (null == this.a) {\n          this.a = [];\n          var e = this;\n          this.c(function () {\n            e.g();\n          });\n        }\n\n        this.a.push(t);\n      };\n\n      var n = a.setTimeout;\n      e.prototype.c = function (t) {\n        n(t, 0);\n      }, e.prototype.g = function () {\n        for (; this.a && this.a.length;) {\n          var t = this.a;\n          this.a = [];\n\n          for (var e = 0; e < t.length; ++e) {\n            var n = t[e];\n            t[e] = null;\n\n            try {\n              n();\n            } catch (t) {\n              this.f(t);\n            }\n          }\n        }\n\n        this.a = null;\n      }, e.prototype.f = function (t) {\n        this.c(function () {\n          throw t;\n        });\n      }, s.prototype.f = function () {\n        function t(e) {\n          return function (t) {\n            r || (r = !0, e.call(n, t));\n          };\n        }\n\n        var n = this,\n            r = !1;\n        return {\n          resolve: t(this.o),\n          reject: t(this.g)\n        };\n      }, s.prototype.o = function (t) {\n        if (t === this) this.g(new TypeError(\"A Promise cannot resolve to itself\"));else if (t instanceof s) this.u(t);else {\n          t: switch (typeof t) {\n            case \"object\":\n              var e = null != t;\n              break t;\n\n            case \"function\":\n              e = !0;\n              break t;\n\n            default:\n              e = !1;\n          }\n\n          e ? this.l(t) : this.h(t);\n        }\n      }, s.prototype.l = function (t) {\n        var e = void 0;\n\n        try {\n          e = t.then;\n        } catch (t) {\n          return void this.g(t);\n        }\n\n        \"function\" == typeof e ? this.v(e, t) : this.h(t);\n      }, s.prototype.g = function (t) {\n        this.i(2, t);\n      }, s.prototype.h = function (t) {\n        this.i(1, t);\n      }, s.prototype.i = function (t, e) {\n        if (0 != this.b) throw Error(\"Cannot settle(\" + t + \", \" + e + \"): Promise already settled in state\" + this.b);\n        this.b = t, this.c = e, this.m();\n      }, s.prototype.m = function () {\n        if (null != this.a) {\n          for (var t = 0; t < this.a.length; ++t) {\n            i.b(this.a[t]);\n          }\n\n          this.a = null;\n        }\n      };\n      var i = new e();\n      return s.prototype.u = function (t) {\n        var e = this.f();\n        t.Ja(e.resolve, e.reject);\n      }, s.prototype.v = function (t, e) {\n        var n = this.f();\n\n        try {\n          t.call(e, n.resolve, n.reject);\n        } catch (t) {\n          n.reject(t);\n        }\n      }, s.prototype.then = function (t, e) {\n        function n(e, t) {\n          return \"function\" == typeof e ? function (t) {\n            try {\n              r(e(t));\n            } catch (t) {\n              i(t);\n            }\n          } : t;\n        }\n\n        var r,\n            i,\n            o = new s(function (t, e) {\n          r = t, i = e;\n        });\n        return this.Ja(n(t, r), n(e, i)), o;\n      }, s.prototype.catch = function (t) {\n        return this.then(void 0, t);\n      }, s.prototype.Ja = function (t, e) {\n        function n() {\n          switch (r.b) {\n            case 1:\n              t(r.c);\n              break;\n\n            case 2:\n              e(r.c);\n              break;\n\n            default:\n              throw Error(\"Unexpected state: \" + r.b);\n          }\n        }\n\n        var r = this;\n        null == this.a ? i.b(n) : this.a.push(n);\n      }, s.resolve = u, s.reject = function (n) {\n        return new s(function (t, e) {\n          e(n);\n        });\n      }, s.race = function (i) {\n        return new s(function (t, e) {\n          for (var n = c(i), r = n.next(); !r.done; r = n.next()) {\n            u(r.value).Ja(t, e);\n          }\n        });\n      }, s.all = function (t) {\n        var o = c(t),\n            a = o.next();\n        return a.done ? u([]) : new s(function (n, t) {\n          function e(e) {\n            return function (t) {\n              r[e] = t, 0 == --i && n(r);\n            };\n          }\n\n          for (var r = [], i = 0; r.push(void 0), i++, u(a.value).Ja(e(r.length - 1), t), !(a = o.next()).done;) {\n            ;\n          }\n        });\n      }, s;\n    });\n    var u = u || {},\n        l = this || self;\n\n    function h(t) {\n      return \"string\" == typeof t;\n    }\n\n    function n(t) {\n      return \"boolean\" == typeof t;\n    }\n\n    var f = /^[\\w+/_-]+[=]{0,2}$/,\n        p = null;\n\n    function s() {}\n\n    function r(t) {\n      var e = typeof t;\n\n      if (\"object\" == e) {\n        if (!t) return \"null\";\n        if (t instanceof Array) return \"array\";\n        if (t instanceof Object) return e;\n        var n = Object.prototype.toString.call(t);\n        if (\"[object Window]\" == n) return \"object\";\n        if (\"[object Array]\" == n || \"number\" == typeof t.length && void 0 !== t.splice && void 0 !== t.propertyIsEnumerable && !t.propertyIsEnumerable(\"splice\")) return \"array\";\n        if (\"[object Function]\" == n || void 0 !== t.call && void 0 !== t.propertyIsEnumerable && !t.propertyIsEnumerable(\"call\")) return \"function\";\n      } else if (\"function\" == e && void 0 === t.call) return \"object\";\n\n      return e;\n    }\n\n    function i(t) {\n      return null === t;\n    }\n\n    function d(t) {\n      return \"array\" == r(t);\n    }\n\n    function y(t) {\n      var e = r(t);\n      return \"array\" == e || \"object\" == e && \"number\" == typeof t.length;\n    }\n\n    function m(t) {\n      return \"function\" == r(t);\n    }\n\n    function g(t) {\n      var e = typeof t;\n      return \"object\" == e && null != t || \"function\" == e;\n    }\n\n    var e = \"closure_uid_\" + (1e9 * Math.random() >>> 0),\n        v = 0;\n\n    function b(t, e, n) {\n      return t.call.apply(t.bind, arguments);\n    }\n\n    function w(e, n, t) {\n      if (!e) throw Error();\n\n      if (2 < arguments.length) {\n        var r = Array.prototype.slice.call(arguments, 2);\n        return function () {\n          var t = Array.prototype.slice.call(arguments);\n          return Array.prototype.unshift.apply(t, r), e.apply(n, t);\n        };\n      }\n\n      return function () {\n        return e.apply(n, arguments);\n      };\n    }\n\n    function _(t, e, n) {\n      return (_ = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf(\"native code\") ? b : w).apply(null, arguments);\n    }\n\n    function E(e, t) {\n      var n = Array.prototype.slice.call(arguments, 1);\n      return function () {\n        var t = n.slice();\n        return t.push.apply(t, arguments), e.apply(this, t);\n      };\n    }\n\n    var T = Date.now || function () {\n      return +new Date();\n    };\n\n    function S(t, o) {\n      function e() {}\n\n      e.prototype = o.prototype, t.qb = o.prototype, t.prototype = new e(), (t.prototype.constructor = t).cd = function (t, e, n) {\n        for (var r = Array(arguments.length - 2), i = 2; i < arguments.length; i++) {\n          r[i - 2] = arguments[i];\n        }\n\n        return o.prototype[e].apply(t, r);\n      };\n    }\n\n    function I(t) {\n      if (!t) return !1;\n\n      try {\n        return !!t.$goog_Thenable;\n      } catch (t) {\n        return !1;\n      }\n    }\n\n    function C(t) {\n      if (Error.captureStackTrace) Error.captureStackTrace(this, C);else {\n        var e = Error().stack;\n        e && (this.stack = e);\n      }\n      t && (this.message = String(t));\n    }\n\n    function N(t, e) {\n      for (var n = \"\", r = (t = t.split(\"%s\")).length - 1, i = 0; i < r; i++) {\n        n += t[i] + (i < e.length ? e[i] : \"%s\");\n      }\n\n      C.call(this, n + t[r]);\n    }\n\n    function A(t, e) {\n      throw new N(\"Failure\" + (t ? \": \" + t : \"\"), Array.prototype.slice.call(arguments, 1));\n    }\n\n    function k(t, e) {\n      this.c = t, this.f = e, this.b = 0, this.a = null;\n    }\n\n    function D(t, e) {\n      t.f(e), t.b < 100 && (t.b++, e.next = t.a, t.a = e);\n    }\n\n    function R() {\n      this.b = this.a = null;\n    }\n\n    S(C, Error), C.prototype.name = \"CustomError\", S(N, C), N.prototype.name = \"AssertionError\", k.prototype.get = function () {\n      if (0 < this.b) {\n        this.b--;\n        var t = this.a;\n        this.a = t.next, t.next = null;\n      } else t = this.c();\n\n      return t;\n    };\n    var O = new k(function () {\n      return new P();\n    }, function (t) {\n      t.reset();\n    });\n\n    function P() {\n      this.next = this.b = this.a = null;\n    }\n\n    function x(t, e) {\n      t: {\n        try {\n          var n = t && t.ownerDocument,\n              r = n && (n.defaultView || n.parentWindow);\n\n          if ((r = r || l).Element && r.Location) {\n            var i = r;\n            break t;\n          }\n        } catch (t) {}\n\n        i = null;\n      }\n\n      if (i && void 0 !== i[e] && (!t || !(t instanceof i[e]) && (t instanceof i.Location || t instanceof i.Element))) {\n        if (g(t)) try {\n          var o = t.constructor.displayName || t.constructor.name || Object.prototype.toString.call(t);\n        } catch (t) {\n          o = \"<object could not be stringified>\";\n        } else o = void 0 === t ? \"undefined\" : null === t ? \"null\" : typeof t;\n        A(\"Argument is not a %s (or a non-Element, non-Location mock); got: %s\", e, o);\n      }\n    }\n\n    R.prototype.add = function (t, e) {\n      var n = O.get();\n      n.set(t, e), this.b ? this.b.next = n : this.a = n, this.b = n;\n    }, P.prototype.set = function (t, e) {\n      this.a = t, this.b = e, this.next = null;\n    }, P.prototype.reset = function () {\n      this.next = this.b = this.a = null;\n    };\n    var M = Array.prototype.indexOf ? function (t, e) {\n      return Array.prototype.indexOf.call(t, e, void 0);\n    } : function (t, e) {\n      if (h(t)) return h(e) && 1 == e.length ? t.indexOf(e, 0) : -1;\n\n      for (var n = 0; n < t.length; n++) {\n        if (n in t && t[n] === e) return n;\n      }\n\n      return -1;\n    },\n        L = Array.prototype.forEach ? function (t, e, n) {\n      Array.prototype.forEach.call(t, e, n);\n    } : function (t, e, n) {\n      for (var r = t.length, i = h(t) ? t.split(\"\") : t, o = 0; o < r; o++) {\n        o in i && e.call(n, i[o], o, t);\n      }\n    };\n    var F = Array.prototype.map ? function (t, e) {\n      return Array.prototype.map.call(t, e, void 0);\n    } : function (t, e) {\n      for (var n = t.length, r = Array(n), i = h(t) ? t.split(\"\") : t, o = 0; o < n; o++) {\n        o in i && (r[o] = e.call(void 0, i[o], o, t));\n      }\n\n      return r;\n    },\n        U = Array.prototype.some ? function (t, e) {\n      return Array.prototype.some.call(t, e, void 0);\n    } : function (t, e) {\n      for (var n = t.length, r = h(t) ? t.split(\"\") : t, i = 0; i < n; i++) {\n        if (i in r && e.call(void 0, r[i], i, t)) return !0;\n      }\n\n      return !1;\n    };\n\n    function q(t, e) {\n      return 0 <= M(t, e);\n    }\n\n    function V(t, e) {\n      var n;\n      return (n = 0 <= (e = M(t, e))) && Array.prototype.splice.call(t, e, 1), n;\n    }\n\n    function B(n, r) {\n      !function (t, e) {\n        for (var n = h(t) ? t.split(\"\") : t, r = t.length - 1; 0 <= r; --r) {\n          r in n && e.call(void 0, n[r], r, t);\n        }\n      }(n, function (t, e) {\n        r.call(void 0, t, e, n) && 1 == Array.prototype.splice.call(n, e, 1).length && 0;\n      });\n    }\n\n    function j(t) {\n      return Array.prototype.concat.apply([], arguments);\n    }\n\n    function W(t) {\n      var e = t.length;\n\n      if (0 < e) {\n        for (var n = Array(e), r = 0; r < e; r++) {\n          n[r] = t[r];\n        }\n\n        return n;\n      }\n\n      return [];\n    }\n\n    function K(t, e) {\n      for (var n in t) {\n        e.call(void 0, t[n], n, t);\n      }\n    }\n\n    function Q(t) {\n      for (var e in t) {\n        return !1;\n      }\n\n      return !0;\n    }\n\n    function H(t) {\n      var e,\n          n = {};\n\n      for (e in t) {\n        n[e] = t[e];\n      }\n\n      return n;\n    }\n\n    var G = \"constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf\".split(\" \");\n\n    function z(t, e) {\n      for (var n, r, i = 1; i < arguments.length; i++) {\n        for (n in r = arguments[i]) {\n          t[n] = r[n];\n        }\n\n        for (var o = 0; o < G.length; o++) {\n          n = G[o], Object.prototype.hasOwnProperty.call(r, n) && (t[n] = r[n]);\n        }\n      }\n    }\n\n    function Y(t, e) {\n      this.a = t === $ && e || \"\", this.b = J;\n    }\n\n    function X(t) {\n      return t instanceof Y && t.constructor === Y && t.b === J ? t.a : (A(\"expected object of type Const, got '\" + t + \"'\"), \"type_error:Const\");\n    }\n\n    Y.prototype.na = !0, Y.prototype.ma = function () {\n      return this.a;\n    }, Y.prototype.toString = function () {\n      return \"Const{\" + this.a + \"}\";\n    };\n    var J = {},\n        $ = {},\n        Z = new Y($, \"\");\n\n    function tt() {\n      this.a = \"\", this.b = ot;\n    }\n\n    function et(t) {\n      return t instanceof tt && t.constructor === tt && t.b === ot ? t.a : (A(\"expected object of type TrustedResourceUrl, got '\" + t + \"' of type \" + r(t)), \"type_error:TrustedResourceUrl\");\n    }\n\n    function nt(t, n) {\n      var r = X(t);\n      if (!it.test(r)) throw Error(\"Invalid TrustedResourceUrl format: \" + r);\n      return at(t = r.replace(rt, function (t, e) {\n        if (!Object.prototype.hasOwnProperty.call(n, e)) throw Error('Found marker, \"' + e + '\", in format string, \"' + r + '\", but no valid label mapping found in args: ' + JSON.stringify(n));\n        return (t = n[e]) instanceof Y ? X(t) : encodeURIComponent(String(t));\n      }));\n    }\n\n    tt.prototype.na = !0, tt.prototype.ma = function () {\n      return this.a.toString();\n    }, tt.prototype.toString = function () {\n      return \"TrustedResourceUrl{\" + this.a + \"}\";\n    };\n    var rt = /%{(\\w+)}/g,\n        it = /^((https:)?\\/\\/[0-9a-z.:[\\]-]+\\/|\\/[^/\\\\]|[^:/\\\\%]+\\/|[^:/\\\\%]*[?#]|about:blank#)/i,\n        ot = {};\n\n    function at(t) {\n      var e = new tt();\n      return e.a = t, e;\n    }\n\n    var st = String.prototype.trim ? function (t) {\n      return t.trim();\n    } : function (t) {\n      return /^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(t)[1];\n    },\n        ut = /&/g,\n        ct = /</g,\n        ht = />/g,\n        lt = /\"/g,\n        ft = /'/g,\n        pt = /\\x00/g,\n        dt = /[\\x00&<>\"']/;\n\n    function yt(t, e) {\n      return -1 != t.indexOf(e);\n    }\n\n    function mt(t, e) {\n      return t < e ? -1 : e < t ? 1 : 0;\n    }\n\n    function gt() {\n      this.a = \"\", this.b = Et;\n    }\n\n    function vt(t) {\n      return t instanceof gt && t.constructor === gt && t.b === Et ? t.a : (A(\"expected object of type SafeUrl, got '\" + t + \"' of type \" + r(t)), \"type_error:SafeUrl\");\n    }\n\n    gt.prototype.na = !0, gt.prototype.ma = function () {\n      return this.a.toString();\n    }, gt.prototype.toString = function () {\n      return \"SafeUrl{\" + this.a + \"}\";\n    };\n    var bt = /^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;\n\n    function wt(t) {\n      return t instanceof gt ? t : (t = \"object\" == typeof t && t.na ? t.ma() : String(t), bt.test(t) || (t = \"about:invalid#zClosurez\"), Tt(t));\n    }\n\n    var _t,\n        Et = {};\n\n    function Tt(t) {\n      var e = new gt();\n      return e.a = t, e;\n    }\n\n    Tt(\"about:blank\");\n\n    t: {\n      var St = l.navigator;\n\n      if (St) {\n        var It = St.userAgent;\n\n        if (It) {\n          _t = It;\n          break t;\n        }\n      }\n\n      _t = \"\";\n    }\n\n    function Ct(t) {\n      return yt(_t, t);\n    }\n\n    function Nt() {\n      this.a = \"\", this.b = kt;\n    }\n\n    function At(t) {\n      return t instanceof Nt && t.constructor === Nt && t.b === kt ? t.a : (A(\"expected object of type SafeHtml, got '\" + t + \"' of type \" + r(t)), \"type_error:SafeHtml\");\n    }\n\n    Nt.prototype.na = !0, Nt.prototype.ma = function () {\n      return this.a.toString();\n    }, Nt.prototype.toString = function () {\n      return \"SafeHtml{\" + this.a + \"}\";\n    };\n    var kt = {};\n\n    function Dt(t) {\n      var e = new Nt();\n      return e.a = t, e;\n    }\n\n    Dt(\"<!DOCTYPE html>\");\n    var Rt,\n        Ot,\n        Pt = Dt(\"\");\n\n    function xt(t, e) {\n      for (var n = t.split(\"%s\"), r = \"\", i = Array.prototype.slice.call(arguments, 1); i.length && 1 < n.length;) {\n        r += n.shift() + i.shift();\n      }\n\n      return r + n.join(\"%s\");\n    }\n\n    function Mt(t) {\n      return dt.test(t) && (-1 != t.indexOf(\"&\") && (t = t.replace(ut, \"&amp;\")), -1 != t.indexOf(\"<\") && (t = t.replace(ct, \"&lt;\")), -1 != t.indexOf(\">\") && (t = t.replace(ht, \"&gt;\")), -1 != t.indexOf('\"') && (t = t.replace(lt, \"&quot;\")), -1 != t.indexOf(\"'\") && (t = t.replace(ft, \"&#39;\")), -1 != t.indexOf(\"\\0\") && (t = t.replace(pt, \"&#0;\"))), t;\n    }\n\n    function Lt(t) {\n      l.setTimeout(function () {\n        throw t;\n      }, 0);\n    }\n\n    function Ft() {\n      var t = l.MessageChannel;\n      if (void 0 === t && \"undefined\" != typeof window && window.postMessage && window.addEventListener && !Ct(\"Presto\") && (t = function t() {\n        var t,\n            e,\n            n = document.createElement(\"IFRAME\");\n        n.style.display = \"none\", t = n, e = at(X(Z)), x(t, \"HTMLIFrameElement\"), t.src = et(e).toString(), document.documentElement.appendChild(n);\n        var r = n.contentWindow;\n        (n = r.document).open(), n.write(At(Pt)), n.close();\n        var i = \"callImmediate\" + Math.random(),\n            o = \"file:\" == r.location.protocol ? \"*\" : r.location.protocol + \"//\" + r.location.host;\n        n = _(function (t) {\n          \"*\" != o && t.origin != o || t.data != i || this.port1.onmessage();\n        }, this), r.addEventListener(\"message\", n, !1), this.port1 = {}, this.port2 = {\n          postMessage: function postMessage() {\n            r.postMessage(i, o);\n          }\n        };\n      }), void 0 === t || Ct(\"Trident\") || Ct(\"MSIE\")) return \"undefined\" != typeof document && \"onreadystatechange\" in document.createElement(\"SCRIPT\") ? function (t) {\n        var e = document.createElement(\"SCRIPT\");\n        e.onreadystatechange = function () {\n          e.onreadystatechange = null, e.parentNode.removeChild(e), e = null, t(), t = null;\n        }, document.documentElement.appendChild(e);\n      } : function (t) {\n        l.setTimeout(t, 0);\n      };\n      var e = new t(),\n          n = {},\n          r = n;\n      return e.port1.onmessage = function () {\n        if (void 0 !== n.next) {\n          var t = (n = n.next).yb;\n          n.yb = null, t();\n        }\n      }, function (t) {\n        r.next = {\n          yb: t\n        }, r = r.next, e.port2.postMessage(0);\n      };\n    }\n\n    function Ut(t, e) {\n      Ot || function () {\n        if (l.Promise && l.Promise.resolve) {\n          var t = l.Promise.resolve(void 0);\n\n          Ot = function Ot() {\n            t.then(Bt);\n          };\n        } else Ot = function Ot() {\n          var t = Bt;\n          !m(l.setImmediate) || l.Window && l.Window.prototype && !Ct(\"Edge\") && l.Window.prototype.setImmediate == l.setImmediate ? (Rt || (Rt = Ft()), Rt(t)) : l.setImmediate(t);\n        };\n      }(), qt || (Ot(), qt = !0), Vt.add(t, e);\n    }\n\n    Dt(\"<br>\");\n    var qt = !1,\n        Vt = new R();\n\n    function Bt() {\n      for (var t; n = e = void 0, n = null, (e = Vt).a && (n = e.a, e.a = e.a.next, e.a || (e.b = null), n.next = null), t = n;) {\n        try {\n          t.a.call(t.b);\n        } catch (t) {\n          Lt(t);\n        }\n\n        D(O, t);\n      }\n\n      var e, n;\n      qt = !1;\n    }\n\n    function jt(t, e) {\n      if (this.a = Wt, this.i = void 0, this.f = this.b = this.c = null, this.g = this.h = !1, t != s) try {\n        var n = this;\n        t.call(e, function (t) {\n          ee(n, Kt, t);\n        }, function (t) {\n          if (!(t instanceof ue)) try {\n            if (t instanceof Error) throw t;\n            throw Error(\"Promise rejected.\");\n          } catch (t) {}\n          ee(n, Qt, t);\n        });\n      } catch (t) {\n        ee(this, Qt, t);\n      }\n    }\n\n    var Wt = 0,\n        Kt = 2,\n        Qt = 3;\n\n    function Ht() {\n      this.next = this.f = this.b = this.g = this.a = null, this.c = !1;\n    }\n\n    Ht.prototype.reset = function () {\n      this.f = this.b = this.g = this.a = null, this.c = !1;\n    };\n\n    var Gt = new k(function () {\n      return new Ht();\n    }, function (t) {\n      t.reset();\n    });\n\n    function zt(t, e, n) {\n      var r = Gt.get();\n      return r.g = t, r.b = e, r.f = n, r;\n    }\n\n    function Yt(t) {\n      if (t instanceof jt) return t;\n      var e = new jt(s);\n      return ee(e, Kt, t), e;\n    }\n\n    function Xt(n) {\n      return new jt(function (t, e) {\n        e(n);\n      });\n    }\n\n    function Jt(t, e, n) {\n      ne(t, e, n, null) || Ut(E(e, t));\n    }\n\n    function $t(n) {\n      return new jt(function (r) {\n        var i = n.length,\n            o = [];\n        if (i) for (var t = function t(_t2, e, n) {\n          i--, o[_t2] = e ? {\n            Eb: !0,\n            value: n\n          } : {\n            Eb: !1,\n            reason: n\n          }, 0 == i && r(o);\n        }, e = 0; e < n.length; e++) {\n          Jt(n[e], E(t, e, !0), E(t, e, !1));\n        } else r(o);\n      });\n    }\n\n    function Zt(t, e) {\n      t.b || t.a != Kt && t.a != Qt || re(t), t.f ? t.f.next = e : t.b = e, t.f = e;\n    }\n\n    function te(t, i, o, a) {\n      var e = zt(null, null, null);\n      return e.a = new jt(function (n, r) {\n        e.g = i ? function (t) {\n          try {\n            var e = i.call(a, t);\n            n(e);\n          } catch (t) {\n            r(t);\n          }\n        } : n, e.b = o ? function (t) {\n          try {\n            var e = o.call(a, t);\n            void 0 === e && t instanceof ue ? r(t) : n(e);\n          } catch (t) {\n            r(t);\n          }\n        } : r;\n      }), Zt(e.a.c = t, e), e.a;\n    }\n\n    function ee(t, e, n) {\n      var r, i;\n      t.a == Wt && (t === n && (e = Qt, n = new TypeError(\"Promise cannot resolve to itself\")), t.a = 1, ne(n, t.Lc, t.Mc, t) || (t.i = n, t.a = e, t.c = null, re(t), e != Qt || n instanceof ue || (i = n, (r = t).g = !0, Ut(function () {\n        r.g && se.call(null, i);\n      }))));\n    }\n\n    function ne(t, e, n, r) {\n      if (t instanceof jt) return Zt(t, zt(e || s, n || null, r)), !0;\n      if (I(t)) return t.then(e, n, r), !0;\n      if (g(t)) try {\n        var i = t.then;\n        if (m(i)) return function (t, e, n, r, i) {\n          function o(t) {\n            a || (a = !0, r.call(i, t));\n          }\n\n          var a = !1;\n\n          try {\n            e.call(t, function (t) {\n              a || (a = !0, n.call(i, t));\n            }, o);\n          } catch (t) {\n            o(t);\n          }\n        }(t, i, e, n, r), !0;\n      } catch (t) {\n        return n.call(r, t), !0;\n      }\n      return !1;\n    }\n\n    function re(t) {\n      t.h || (t.h = !0, Ut(t.Wb, t));\n    }\n\n    function ie(t) {\n      var e = null;\n      return t.b && (e = t.b, t.b = e.next, e.next = null), t.b || (t.f = null), e;\n    }\n\n    function oe(t, e, n, r) {\n      if (n == Qt && e.b && !e.c) for (; t && t.g; t = t.c) {\n        t.g = !1;\n      }\n      if (e.a) e.a.c = null, ae(e, n, r);else try {\n        e.c ? e.g.call(e.f) : ae(e, n, r);\n      } catch (t) {\n        se.call(null, t);\n      }\n      D(Gt, e);\n    }\n\n    function ae(t, e, n) {\n      e == Kt ? t.g.call(t.f, n) : t.b && t.b.call(t.f, n);\n    }\n\n    jt.prototype.then = function (t, e, n) {\n      return te(this, m(t) ? t : null, m(e) ? e : null, n);\n    }, jt.prototype.$goog_Thenable = !0, (t = jt.prototype).ia = function (t, e) {\n      return (t = zt(t, t, e)).c = !0, Zt(this, t), this;\n    }, t.s = function (t, e) {\n      return te(this, null, t, e);\n    }, t.cancel = function (t) {\n      this.a == Wt && Ut(function () {\n        !function t(e, n) {\n          if (e.a == Wt) if (e.c) {\n            var r = e.c;\n\n            if (r.b) {\n              for (var i = 0, o = null, a = null, s = r.b; s && (s.c || (i++, s.a == e && (o = s), !(o && 1 < i))); s = s.next) {\n                o || (a = s);\n              }\n\n              o && (r.a == Wt && 1 == i ? t(r, n) : (a ? ((i = a).next == r.f && (r.f = i), i.next = i.next.next) : ie(r), oe(r, o, Qt, n)));\n            }\n\n            e.c = null;\n          } else ee(e, Qt, n);\n        }(this, new ue(t));\n      }, this);\n    }, t.Lc = function (t) {\n      this.a = Wt, ee(this, Kt, t);\n    }, t.Mc = function (t) {\n      this.a = Wt, ee(this, Qt, t);\n    }, t.Wb = function () {\n      for (var t; t = ie(this);) {\n        oe(this, t, this.a, this.i);\n      }\n\n      this.h = !1;\n    };\n    var se = Lt;\n\n    function ue(t) {\n      C.call(this, t);\n    }\n\n    function ce() {\n      this.qa = this.qa, this.ja = this.ja;\n    }\n\n    S(ue, C);\n    var he = 0;\n\n    function le(t) {\n      if (!t.qa && (t.qa = !0, t.va(), 0 != he)) t[e] || (t[e] = ++v);\n    }\n\n    function fe(t) {\n      return fe[\" \"](t), t;\n    }\n\n    ce.prototype.qa = !(ue.prototype.name = \"cancel\"), ce.prototype.va = function () {\n      if (this.ja) for (; this.ja.length;) {\n        this.ja.shift()();\n      }\n    }, fe[\" \"] = s;\n    var pe,\n        de,\n        ye = Ct(\"Opera\"),\n        me = Ct(\"Trident\") || Ct(\"MSIE\"),\n        ge = Ct(\"Edge\"),\n        ve = ge || me,\n        be = Ct(\"Gecko\") && !(yt(_t.toLowerCase(), \"webkit\") && !Ct(\"Edge\")) && !(Ct(\"Trident\") || Ct(\"MSIE\")) && !Ct(\"Edge\"),\n        we = yt(_t.toLowerCase(), \"webkit\") && !Ct(\"Edge\");\n\n    function _e() {\n      var t = l.document;\n      return t ? t.documentMode : void 0;\n    }\n\n    t: {\n      var Ee = \"\",\n          Te = (de = _t, be ? /rv:([^\\);]+)(\\)|;)/.exec(de) : ge ? /Edge\\/([\\d\\.]+)/.exec(de) : me ? /\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(de) : we ? /WebKit\\/(\\S+)/.exec(de) : ye ? /(?:Version)[ \\/]?(\\S+)/.exec(de) : void 0);\n\n      if (Te && (Ee = Te ? Te[1] : \"\"), me) {\n        var Se = _e();\n\n        if (null != Se && Se > parseFloat(Ee)) {\n          pe = String(Se);\n          break t;\n        }\n      }\n\n      pe = Ee;\n    }\n\n    var Ie,\n        Ce = {};\n\n    function Ne(s) {\n      return t = s, e = function e() {\n        for (var t = 0, e = st(String(pe)).split(\".\"), n = st(String(s)).split(\".\"), r = Math.max(e.length, n.length), i = 0; 0 == t && i < r; i++) {\n          var o = e[i] || \"\",\n              a = n[i] || \"\";\n\n          do {\n            if (o = /(\\d*)(\\D*)(.*)/.exec(o) || [\"\", \"\", \"\", \"\"], a = /(\\d*)(\\D*)(.*)/.exec(a) || [\"\", \"\", \"\", \"\"], 0 == o[0].length && 0 == a[0].length) break;\n            t = mt(0 == o[1].length ? 0 : parseInt(o[1], 10), 0 == a[1].length ? 0 : parseInt(a[1], 10)) || mt(0 == o[2].length, 0 == a[2].length) || mt(o[2], a[2]), o = o[3], a = a[3];\n          } while (0 == t);\n        }\n\n        return 0 <= t;\n      }, n = Ce, Object.prototype.hasOwnProperty.call(n, t) ? n[t] : n[t] = e(t);\n      var t, e, n;\n    }\n\n    Ie = l.document && me ? _e() : void 0;\n\n    var Ae = Object.freeze || function (t) {\n      return t;\n    },\n        ke = !me || 9 <= Number(Ie),\n        De = me && !Ne(\"9\"),\n        Re = function () {\n      if (!l.addEventListener || !Object.defineProperty) return !1;\n      var t = !1,\n          e = Object.defineProperty({}, \"passive\", {\n        get: function get() {\n          t = !0;\n        }\n      });\n\n      try {\n        l.addEventListener(\"test\", s, e), l.removeEventListener(\"test\", s, e);\n      } catch (t) {}\n\n      return t;\n    }();\n\n    function Oe(t, e) {\n      this.type = t, this.b = this.target = e, this.Kb = !0;\n    }\n\n    function Pe(t, e) {\n      if (Oe.call(this, t ? t.type : \"\"), this.relatedTarget = this.b = this.target = null, this.button = this.screenY = this.screenX = this.clientY = this.clientX = 0, this.key = \"\", this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = !1, this.pointerId = 0, this.pointerType = \"\", this.a = null, t) {\n        var n = this.type = t.type,\n            r = t.changedTouches && t.changedTouches.length ? t.changedTouches[0] : null;\n\n        if (this.target = t.target || t.srcElement, this.b = e, e = t.relatedTarget) {\n          if (be) {\n            t: {\n              try {\n                fe(e.nodeName);\n                var i = !0;\n                break t;\n              } catch (t) {}\n\n              i = !1;\n            }\n\n            i || (e = null);\n          }\n        } else \"mouseover\" == n ? e = t.fromElement : \"mouseout\" == n && (e = t.toElement);\n\n        this.relatedTarget = e, this.screenY = r ? (this.clientX = void 0 !== r.clientX ? r.clientX : r.pageX, this.clientY = void 0 !== r.clientY ? r.clientY : r.pageY, this.screenX = r.screenX || 0, r.screenY || 0) : (this.clientX = void 0 !== t.clientX ? t.clientX : t.pageX, this.clientY = void 0 !== t.clientY ? t.clientY : t.pageY, this.screenX = t.screenX || 0, t.screenY || 0), this.button = t.button, this.key = t.key || \"\", this.ctrlKey = t.ctrlKey, this.altKey = t.altKey, this.shiftKey = t.shiftKey, this.metaKey = t.metaKey, this.pointerId = t.pointerId || 0, this.pointerType = h(t.pointerType) ? t.pointerType : xe[t.pointerType] || \"\", (this.a = t).defaultPrevented && this.preventDefault();\n      }\n    }\n\n    Oe.prototype.preventDefault = function () {\n      this.Kb = !1;\n    }, S(Pe, Oe);\n    var xe = Ae({\n      2: \"touch\",\n      3: \"pen\",\n      4: \"mouse\"\n    });\n    Pe.prototype.preventDefault = function () {\n      Pe.qb.preventDefault.call(this);\n      var t = this.a;\n      if (t.preventDefault) t.preventDefault();else if (t.returnValue = !1, De) try {\n        (t.ctrlKey || 112 <= t.keyCode && t.keyCode <= 123) && (t.keyCode = -1);\n      } catch (t) {}\n    }, Pe.prototype.f = function () {\n      return this.a;\n    };\n    var Me = \"closure_listenable_\" + (1e6 * Math.random() | 0),\n        Le = 0;\n\n    function Fe(t, e, n, r, i) {\n      this.listener = t, this.proxy = null, this.src = e, this.type = n, this.capture = !!r, this.Na = i, this.key = ++Le, this.oa = this.Ia = !1;\n    }\n\n    function Ue(t) {\n      t.oa = !0, t.listener = null, t.proxy = null, t.src = null, t.Na = null;\n    }\n\n    function qe(t) {\n      this.src = t, this.a = {}, this.b = 0;\n    }\n\n    function Ve(t, e) {\n      var n = e.type;\n      n in t.a && V(t.a[n], e) && (Ue(e), 0 == t.a[n].length && (delete t.a[n], t.b--));\n    }\n\n    function Be(t, e, n, r) {\n      for (var i = 0; i < t.length; ++i) {\n        var o = t[i];\n        if (!o.oa && o.listener == e && o.capture == !!n && o.Na == r) return i;\n      }\n\n      return -1;\n    }\n\n    qe.prototype.add = function (t, e, n, r, i) {\n      var o = t.toString();\n      (t = this.a[o]) || (t = this.a[o] = [], this.b++);\n      var a = Be(t, e, r, i);\n      return -1 < a ? (e = t[a], n || (e.Ia = !1)) : ((e = new Fe(e, this.src, o, !!r, i)).Ia = n, t.push(e)), e;\n    };\n\n    var je = \"closure_lm_\" + (1e6 * Math.random() | 0),\n        We = {};\n\n    function Ke(t, e, n, r, i) {\n      if (r && r.once) He(t, e, n, r, i);else if (d(e)) for (var o = 0; o < e.length; o++) {\n        Ke(t, e[o], n, r, i);\n      } else n = en(n), t && t[Me] ? rn(t, e, n, g(r) ? !!r.capture : !!r, i) : Qe(t, e, n, !1, r, i);\n    }\n\n    function Qe(t, e, n, r, i, o) {\n      if (!e) throw Error(\"Invalid event type\");\n      var a,\n          s,\n          u = g(i) ? !!i.capture : !!i,\n          c = Ze(t);\n      if (c || (t[je] = c = new qe(t)), !(n = c.add(e, n, r, u, o)).proxy) if (a = $e, r = s = ke ? function (t) {\n        return a.call(s.src, s.listener, t);\n      } : function (t) {\n        if (!(t = a.call(s.src, s.listener, t))) return t;\n      }, (n.proxy = r).src = t, r.listener = n, t.addEventListener) Re || (i = u), void 0 === i && (i = !1), t.addEventListener(e.toString(), r, i);else if (t.attachEvent) t.attachEvent(Ye(e.toString()), r);else {\n        if (!t.addListener || !t.removeListener) throw Error(\"addEventListener and attachEvent are unavailable.\");\n        t.addListener(r);\n      }\n    }\n\n    function He(t, e, n, r, i) {\n      if (d(e)) for (var o = 0; o < e.length; o++) {\n        He(t, e[o], n, r, i);\n      } else n = en(n), t && t[Me] ? on(t, e, n, g(r) ? !!r.capture : !!r, i) : Qe(t, e, n, !0, r, i);\n    }\n\n    function Ge(t, e, n, r, i) {\n      if (d(e)) for (var o = 0; o < e.length; o++) {\n        Ge(t, e[o], n, r, i);\n      } else r = g(r) ? !!r.capture : !!r, n = en(n), t && t[Me] ? (t = t.m, (e = String(e).toString()) in t.a && -1 < (n = Be(o = t.a[e], n, r, i)) && (Ue(o[n]), Array.prototype.splice.call(o, n, 1), 0 == o.length && (delete t.a[e], t.b--))) : t && (t = Ze(t)) && (e = t.a[e.toString()], t = -1, e && (t = Be(e, n, r, i)), (n = -1 < t ? e[t] : null) && ze(n));\n    }\n\n    function ze(t) {\n      if (\"number\" != typeof t && t && !t.oa) {\n        var e = t.src;\n        if (e && e[Me]) Ve(e.m, t);else {\n          var n = t.type,\n              r = t.proxy;\n          e.removeEventListener ? e.removeEventListener(n, r, t.capture) : e.detachEvent ? e.detachEvent(Ye(n), r) : e.addListener && e.removeListener && e.removeListener(r), (n = Ze(e)) ? (Ve(n, t), 0 == n.b && (n.src = null, e[je] = null)) : Ue(t);\n        }\n      }\n    }\n\n    function Ye(t) {\n      return t in We ? We[t] : We[t] = \"on\" + t;\n    }\n\n    function Xe(t, e, n, r) {\n      var i = !0;\n      if ((t = Ze(t)) && (e = t.a[e.toString()])) for (e = e.concat(), t = 0; t < e.length; t++) {\n        var o = e[t];\n        o && o.capture == n && !o.oa && (o = Je(o, r), i = i && !1 !== o);\n      }\n      return i;\n    }\n\n    function Je(t, e) {\n      var n = t.listener,\n          r = t.Na || t.src;\n      return t.Ia && ze(t), n.call(r, e);\n    }\n\n    function $e(t, e) {\n      if (t.oa) return !0;\n      if (ke) return Je(t, new Pe(e, this));\n      if (!e) t: {\n        e = [\"window\", \"event\"];\n\n        for (var n = l, r = 0; r < e.length; r++) {\n          if (null == (n = n[e[r]])) {\n            e = null;\n            break t;\n          }\n        }\n\n        e = n;\n      }\n\n      if (e = new Pe(r = e, this), n = !0, !(r.keyCode < 0 || null != r.returnValue)) {\n        t: {\n          var i = !1;\n          if (0 == r.keyCode) try {\n            r.keyCode = -1;\n            break t;\n          } catch (t) {\n            i = !0;\n          }\n          (i || null == r.returnValue) && (r.returnValue = !0);\n        }\n\n        for (r = [], i = e.b; i; i = i.parentNode) {\n          r.push(i);\n        }\n\n        for (t = t.type, i = r.length - 1; 0 <= i; i--) {\n          e.b = r[i];\n          var o = Xe(r[i], t, !0, e);\n          n = n && o;\n        }\n\n        for (i = 0; i < r.length; i++) {\n          e.b = r[i], o = Xe(r[i], t, !1, e), n = n && o;\n        }\n      }\n\n      return n;\n    }\n\n    function Ze(t) {\n      return (t = t[je]) instanceof qe ? t : null;\n    }\n\n    var tn = \"__closure_events_fn_\" + (1e9 * Math.random() >>> 0);\n\n    function en(e) {\n      return m(e) ? e : (e[tn] || (e[tn] = function (t) {\n        return e.handleEvent(t);\n      }), e[tn]);\n    }\n\n    function nn() {\n      ce.call(this), this.m = new qe(this), (this.Pb = this).Wa = null;\n    }\n\n    function rn(t, e, n, r, i) {\n      t.m.add(String(e), n, !1, r, i);\n    }\n\n    function on(t, e, n, r, i) {\n      t.m.add(String(e), n, !0, r, i);\n    }\n\n    function an(t, e, n, r) {\n      if (!(e = t.m.a[String(e)])) return !0;\n      e = e.concat();\n\n      for (var i = !0, o = 0; o < e.length; ++o) {\n        var a = e[o];\n\n        if (a && !a.oa && a.capture == n) {\n          var s = a.listener,\n              u = a.Na || a.src;\n          a.Ia && Ve(t.m, a), i = !1 !== s.call(u, r) && i;\n        }\n      }\n\n      return i && 0 != r.Kb;\n    }\n\n    function sn(t, e, n) {\n      if (m(t)) n && (t = _(t, n));else {\n        if (!t || \"function\" != typeof t.handleEvent) throw Error(\"Invalid listener argument\");\n        t = _(t.handleEvent, t);\n      }\n      return 2147483647 < Number(e) ? -1 : l.setTimeout(t, e || 0);\n    }\n\n    function un(n) {\n      var r = null;\n      return new jt(function (t, e) {\n        -1 == (r = sn(function () {\n          t(void 0);\n        }, n)) && e(Error(\"Failed to schedule timer.\"));\n      }).s(function (t) {\n        throw l.clearTimeout(r), t;\n      });\n    }\n\n    function cn(t) {\n      if (t.S && \"function\" == typeof t.S) return t.S();\n      if (h(t)) return t.split(\"\");\n\n      if (y(t)) {\n        for (var e = [], n = t.length, r = 0; r < n; r++) {\n          e.push(t[r]);\n        }\n\n        return e;\n      }\n\n      for (r in e = [], n = 0, t) {\n        e[n++] = t[r];\n      }\n\n      return e;\n    }\n\n    function hn(t) {\n      if (t.U && \"function\" == typeof t.U) return t.U();\n\n      if (!t.S || \"function\" != typeof t.S) {\n        if (y(t) || h(t)) {\n          var e = [];\n          t = t.length;\n\n          for (var n = 0; n < t; n++) {\n            e.push(n);\n          }\n\n          return e;\n        }\n\n        for (var r in e = [], n = 0, t) {\n          e[n++] = r;\n        }\n\n        return e;\n      }\n    }\n\n    function ln(t, e) {\n      this.b = {}, this.a = [], this.c = 0;\n      var n = arguments.length;\n\n      if (1 < n) {\n        if (n % 2) throw Error(\"Uneven number of arguments\");\n\n        for (var r = 0; r < n; r += 2) {\n          this.set(arguments[r], arguments[r + 1]);\n        }\n      } else if (t) if (t instanceof ln) for (n = t.U(), r = 0; r < n.length; r++) {\n        this.set(n[r], t.get(n[r]));\n      } else for (r in t) {\n        this.set(r, t[r]);\n      }\n    }\n\n    function fn(t) {\n      if (t.c != t.a.length) {\n        for (var e = 0, n = 0; e < t.a.length;) {\n          var r = t.a[e];\n          pn(t.b, r) && (t.a[n++] = r), e++;\n        }\n\n        t.a.length = n;\n      }\n\n      if (t.c != t.a.length) {\n        var i = {};\n\n        for (n = e = 0; e < t.a.length;) {\n          pn(i, r = t.a[e]) || (i[t.a[n++] = r] = 1), e++;\n        }\n\n        t.a.length = n;\n      }\n    }\n\n    function pn(t, e) {\n      return Object.prototype.hasOwnProperty.call(t, e);\n    }\n\n    S(nn, ce), nn.prototype[Me] = !0, nn.prototype.addEventListener = function (t, e, n, r) {\n      Ke(this, t, e, n, r);\n    }, nn.prototype.removeEventListener = function (t, e, n, r) {\n      Ge(this, t, e, n, r);\n    }, nn.prototype.dispatchEvent = function (t) {\n      var e,\n          n = this.Wa;\n      if (n) for (e = []; n; n = n.Wa) {\n        e.push(n);\n      }\n      n = this.Pb;\n      var r = t.type || t;\n      if (h(t)) t = new Oe(t, n);else if (t instanceof Oe) t.target = t.target || n;else {\n        var i = t;\n        z(t = new Oe(r, n), i);\n      }\n      if (i = !0, e) for (var o = e.length - 1; 0 <= o; o--) {\n        var a = t.b = e[o];\n        i = an(a, r, !0, t) && i;\n      }\n      if (i = an(a = t.b = n, r, !0, t) && i, i = an(a, r, !1, t) && i, e) for (o = 0; o < e.length; o++) {\n        i = an(a = t.b = e[o], r, !1, t) && i;\n      }\n      return i;\n    }, nn.prototype.va = function () {\n      if (nn.qb.va.call(this), this.m) {\n        var t,\n            e = this.m;\n\n        for (t in e.a) {\n          for (var n = e.a[t], r = 0; r < n.length; r++) {\n            Ue(n[r]);\n          }\n\n          delete e.a[t], e.b--;\n        }\n      }\n\n      this.Wa = null;\n    }, (t = ln.prototype).S = function () {\n      fn(this);\n\n      for (var t = [], e = 0; e < this.a.length; e++) {\n        t.push(this.b[this.a[e]]);\n      }\n\n      return t;\n    }, t.U = function () {\n      return fn(this), this.a.concat();\n    }, t.clear = function () {\n      this.b = {}, this.c = this.a.length = 0;\n    }, t.get = function (t, e) {\n      return pn(this.b, t) ? this.b[t] : e;\n    }, t.set = function (t, e) {\n      pn(this.b, t) || (this.c++, this.a.push(t)), this.b[t] = e;\n    }, t.forEach = function (t, e) {\n      for (var n = this.U(), r = 0; r < n.length; r++) {\n        var i = n[r],\n            o = this.get(i);\n        t.call(e, o, i, this);\n      }\n    };\n    var dn = /^(?:([^:/?#.]+):)?(?:\\/\\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$/;\n\n    function yn(t, e) {\n      var n;\n      this.b = this.i = this.f = \"\", this.m = null, this.g = this.c = \"\", this.h = !1, t instanceof yn ? (this.h = void 0 !== e ? e : t.h, mn(this, t.f), this.i = t.i, this.b = t.b, gn(this, t.m), this.c = t.c, vn(this, Fn(t.a)), this.g = t.g) : t && (n = String(t).match(dn)) ? (this.h = !!e, mn(this, n[1] || \"\", !0), this.i = Tn(n[2] || \"\"), this.b = Tn(n[3] || \"\", !0), gn(this, n[4]), this.c = Tn(n[5] || \"\", !0), vn(this, n[6] || \"\", !0), this.g = Tn(n[7] || \"\")) : (this.h = !!e, this.a = new Rn(null, this.h));\n    }\n\n    function mn(t, e, n) {\n      t.f = n ? Tn(e, !0) : e, t.f && (t.f = t.f.replace(/:$/, \"\"));\n    }\n\n    function gn(t, e) {\n      if (e) {\n        if (e = Number(e), isNaN(e) || e < 0) throw Error(\"Bad port number \" + e);\n        t.m = e;\n      } else t.m = null;\n    }\n\n    function vn(t, e, n) {\n      var r, i;\n      e instanceof Rn ? (t.a = e, r = t.a, (i = t.h) && !r.f && (On(r), r.c = null, r.a.forEach(function (t, e) {\n        var n = e.toLowerCase();\n        e != n && (xn(this, e), Ln(this, n, t));\n      }, r)), r.f = i) : (n || (e = Sn(e, kn)), t.a = new Rn(e, t.h));\n    }\n\n    function bn(t, e, n) {\n      t.a.set(e, n);\n    }\n\n    function wn(t, e) {\n      return t.a.get(e);\n    }\n\n    function _n(t) {\n      return t instanceof yn ? new yn(t) : new yn(t, void 0);\n    }\n\n    function En(t, e) {\n      var n = new yn(null, void 0);\n      return mn(n, \"https\"), t && (n.b = t), e && (n.c = e), n;\n    }\n\n    function Tn(t, e) {\n      return t ? e ? decodeURI(t.replace(/%25/g, \"%2525\")) : decodeURIComponent(t) : \"\";\n    }\n\n    function Sn(t, e, n) {\n      return h(t) ? (t = encodeURI(t).replace(e, In), n && (t = t.replace(/%25([0-9a-fA-F]{2})/g, \"%$1\")), t) : null;\n    }\n\n    function In(t) {\n      return \"%\" + ((t = t.charCodeAt(0)) >> 4 & 15).toString(16) + (15 & t).toString(16);\n    }\n\n    yn.prototype.toString = function () {\n      var t = [],\n          e = this.f;\n      e && t.push(Sn(e, Cn, !0), \":\");\n      var n = this.b;\n      return (n || \"file\" == e) && (t.push(\"//\"), (e = this.i) && t.push(Sn(e, Cn, !0), \"@\"), t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g, \"%$1\")), null != (n = this.m) && t.push(\":\", String(n))), (n = this.c) && (this.b && \"/\" != n.charAt(0) && t.push(\"/\"), t.push(Sn(n, \"/\" == n.charAt(0) ? An : Nn, !0))), (n = this.a.toString()) && t.push(\"?\", n), (n = this.g) && t.push(\"#\", Sn(n, Dn)), t.join(\"\");\n    }, yn.prototype.resolve = function (t) {\n      var e = new yn(this),\n          n = !!t.f;\n      n ? mn(e, t.f) : n = !!t.i, n ? e.i = t.i : n = !!t.b, n ? e.b = t.b : n = null != t.m;\n      var r = t.c;\n      if (n) gn(e, t.m);else if (n = !!t.c) {\n        if (\"/\" != r.charAt(0)) if (this.b && !this.c) r = \"/\" + r;else {\n          var i = e.c.lastIndexOf(\"/\");\n          -1 != i && (r = e.c.substr(0, i + 1) + r);\n        }\n        if (\"..\" == (i = r) || \".\" == i) r = \"\";else if (yt(i, \"./\") || yt(i, \"/.\")) {\n          r = 0 == i.lastIndexOf(\"/\", 0), i = i.split(\"/\");\n\n          for (var o = [], a = 0; a < i.length;) {\n            var s = i[a++];\n            \".\" == s ? r && a == i.length && o.push(\"\") : \"..\" == s ? ((1 < o.length || 1 == o.length && \"\" != o[0]) && o.pop(), r && a == i.length && o.push(\"\")) : (o.push(s), r = !0);\n          }\n\n          r = o.join(\"/\");\n        } else r = i;\n      }\n      return n ? e.c = r : n = \"\" !== t.a.toString(), n ? vn(e, Fn(t.a)) : n = !!t.g, n && (e.g = t.g), e;\n    };\n    var Cn = /[#\\/\\?@]/g,\n        Nn = /[#\\?:]/g,\n        An = /[#\\?]/g,\n        kn = /[#\\?@]/g,\n        Dn = /#/g;\n\n    function Rn(t, e) {\n      this.b = this.a = null, this.c = t || null, this.f = !!e;\n    }\n\n    function On(n) {\n      n.a || (n.a = new ln(), n.b = 0, n.c && function (t, e) {\n        if (t) {\n          t = t.split(\"&\");\n\n          for (var n = 0; n < t.length; n++) {\n            var r = t[n].indexOf(\"=\"),\n                i = null;\n\n            if (0 <= r) {\n              var o = t[n].substring(0, r);\n              i = t[n].substring(r + 1);\n            } else o = t[n];\n\n            e(o, i ? decodeURIComponent(i.replace(/\\+/g, \" \")) : \"\");\n          }\n        }\n      }(n.c, function (t, e) {\n        n.add(decodeURIComponent(t.replace(/\\+/g, \" \")), e);\n      }));\n    }\n\n    function Pn(t) {\n      var e = hn(t);\n      if (void 0 === e) throw Error(\"Keys are undefined\");\n      var n = new Rn(null, void 0);\n      t = cn(t);\n\n      for (var r = 0; r < e.length; r++) {\n        var i = e[r],\n            o = t[r];\n        d(o) ? Ln(n, i, o) : n.add(i, o);\n      }\n\n      return n;\n    }\n\n    function xn(t, e) {\n      On(t), e = Un(t, e), pn(t.a.b, e) && (t.c = null, t.b -= t.a.get(e).length, pn((t = t.a).b, e) && (delete t.b[e], t.c--, t.a.length > 2 * t.c && fn(t)));\n    }\n\n    function Mn(t, e) {\n      return On(t), e = Un(t, e), pn(t.a.b, e);\n    }\n\n    function Ln(t, e, n) {\n      xn(t, e), 0 < n.length && (t.c = null, t.a.set(Un(t, e), W(n)), t.b += n.length);\n    }\n\n    function Fn(t) {\n      var e = new Rn();\n      return e.c = t.c, t.a && (e.a = new ln(t.a), e.b = t.b), e;\n    }\n\n    function Un(t, e) {\n      return e = String(e), t.f && (e = e.toLowerCase()), e;\n    }\n\n    (t = Rn.prototype).add = function (t, e) {\n      On(this), this.c = null, t = Un(this, t);\n      var n = this.a.get(t);\n      return n || this.a.set(t, n = []), n.push(e), this.b += 1, this;\n    }, t.clear = function () {\n      this.a = this.c = null, this.b = 0;\n    }, t.forEach = function (n, r) {\n      On(this), this.a.forEach(function (t, e) {\n        L(t, function (t) {\n          n.call(r, t, e, this);\n        }, this);\n      }, this);\n    }, t.U = function () {\n      On(this);\n\n      for (var t = this.a.S(), e = this.a.U(), n = [], r = 0; r < e.length; r++) {\n        for (var i = t[r], o = 0; o < i.length; o++) {\n          n.push(e[r]);\n        }\n      }\n\n      return n;\n    }, t.S = function (t) {\n      On(this);\n      var e = [];\n      if (h(t)) Mn(this, t) && (e = j(e, this.a.get(Un(this, t))));else {\n        t = this.a.S();\n\n        for (var n = 0; n < t.length; n++) {\n          e = j(e, t[n]);\n        }\n      }\n      return e;\n    }, t.set = function (t, e) {\n      return On(this), this.c = null, Mn(this, t = Un(this, t)) && (this.b -= this.a.get(t).length), this.a.set(t, [e]), this.b += 1, this;\n    }, t.get = function (t, e) {\n      return t && 0 < (t = this.S(t)).length ? String(t[0]) : e;\n    }, t.toString = function () {\n      if (this.c) return this.c;\n      if (!this.a) return \"\";\n\n      for (var t = [], e = this.a.U(), n = 0; n < e.length; n++) {\n        var r = e[n],\n            i = encodeURIComponent(String(r));\n        r = this.S(r);\n\n        for (var o = 0; o < r.length; o++) {\n          var a = i;\n          \"\" !== r[o] && (a += \"=\" + encodeURIComponent(String(r[o]))), t.push(a);\n        }\n      }\n\n      return this.c = t.join(\"&\");\n    };\n    var qn = !me || 9 <= Number(Ie);\n\n    function Vn(t) {\n      var e = document;\n      return h(t) ? e.getElementById(t) : t;\n    }\n\n    function Bn(n, t) {\n      K(t, function (t, e) {\n        t && \"object\" == typeof t && t.na && (t = t.ma()), \"style\" == e ? n.style.cssText = t : \"class\" == e ? n.className = t : \"for\" == e ? n.htmlFor = t : jn.hasOwnProperty(e) ? n.setAttribute(jn[e], t) : 0 == e.lastIndexOf(\"aria-\", 0) || 0 == e.lastIndexOf(\"data-\", 0) ? n.setAttribute(e, t) : n[e] = t;\n      });\n    }\n\n    var jn = {\n      cellpadding: \"cellPadding\",\n      cellspacing: \"cellSpacing\",\n      colspan: \"colSpan\",\n      frameborder: \"frameBorder\",\n      height: \"height\",\n      maxlength: \"maxLength\",\n      nonce: \"nonce\",\n      role: \"role\",\n      rowspan: \"rowSpan\",\n      type: \"type\",\n      usemap: \"useMap\",\n      valign: \"vAlign\",\n      width: \"width\"\n    };\n\n    function Wn(t, e, n) {\n      var r = arguments,\n          i = document,\n          o = String(r[0]),\n          a = r[1];\n\n      if (!qn && a && (a.name || a.type)) {\n        if (o = [\"<\", o], a.name && o.push(' name=\"', Mt(a.name), '\"'), a.type) {\n          o.push(' type=\"', Mt(a.type), '\"');\n          var s = {};\n          z(s, a), delete s.type, a = s;\n        }\n\n        o.push(\">\"), o = o.join(\"\");\n      }\n\n      return o = i.createElement(o), a && (h(a) ? o.className = a : d(a) ? o.className = a.join(\" \") : Bn(o, a)), 2 < r.length && function (e, n, t) {\n        function r(t) {\n          t && n.appendChild(h(t) ? e.createTextNode(t) : t);\n        }\n\n        for (var i = 2; i < t.length; i++) {\n          var o = t[i];\n          !y(o) || g(o) && 0 < o.nodeType ? r(o) : L(Kn(o) ? W(o) : o, r);\n        }\n      }(i, o, r), o;\n    }\n\n    function Kn(t) {\n      if (t && \"number\" == typeof t.length) {\n        if (g(t)) return \"function\" == typeof t.item || \"string\" == typeof t.item;\n        if (m(t)) return \"function\" == typeof t.item;\n      }\n\n      return !1;\n    }\n\n    function Qn(t) {\n      var e = [];\n      return function t(e, n, r) {\n        if (null == n) r.push(\"null\");else {\n          if (\"object\" == typeof n) {\n            if (d(n)) {\n              var i = n;\n              n = i.length, r.push(\"[\");\n\n              for (var o = \"\", a = 0; a < n; a++) {\n                r.push(o), t(e, i[a], r), o = \",\";\n              }\n\n              return void r.push(\"]\");\n            }\n\n            if (!(n instanceof String || n instanceof Number || n instanceof Boolean)) {\n              for (i in r.push(\"{\"), o = \"\", n) {\n                Object.prototype.hasOwnProperty.call(n, i) && \"function\" != typeof (a = n[i]) && (r.push(o), Yn(i, r), r.push(\":\"), t(e, a, r), o = \",\");\n              }\n\n              return void r.push(\"}\");\n            }\n\n            n = n.valueOf();\n          }\n\n          switch (typeof n) {\n            case \"string\":\n              Yn(n, r);\n              break;\n\n            case \"number\":\n              r.push(isFinite(n) && !isNaN(n) ? String(n) : \"null\");\n              break;\n\n            case \"boolean\":\n              r.push(String(n));\n              break;\n\n            case \"function\":\n              r.push(\"null\");\n              break;\n\n            default:\n              throw Error(\"Unknown type: \" + typeof n);\n          }\n        }\n      }(new Hn(), t, e), e.join(\"\");\n    }\n\n    function Hn() {}\n\n    var Gn = {\n      '\"': '\\\\\"',\n      \"\\\\\": \"\\\\\\\\\",\n      \"/\": \"\\\\/\",\n      \"\\b\": \"\\\\b\",\n      \"\\f\": \"\\\\f\",\n      \"\\n\": \"\\\\n\",\n      \"\\r\": \"\\\\r\",\n      \"\\t\": \"\\\\t\",\n      \"\\v\": \"\\\\u000b\"\n    },\n        zn = /\\uffff/.test(\"￿\") ? /[\\\\\"\\x00-\\x1f\\x7f-\\uffff]/g : /[\\\\\"\\x00-\\x1f\\x7f-\\xff]/g;\n\n    function Yn(t, e) {\n      e.push('\"', t.replace(zn, function (t) {\n        var e = Gn[t];\n        return e || (e = \"\\\\u\" + (65536 | t.charCodeAt(0)).toString(16).substr(1), Gn[t] = e), e;\n      }), '\"');\n    }\n\n    function Xn() {\n      var t = yr();\n      return me && !!Ie && 11 == Ie || /Edge\\/\\d+/.test(t);\n    }\n\n    function Jn() {\n      return l.window && l.window.location.href || self && self.location && self.location.href || \"\";\n    }\n\n    function $n(t, e) {\n      e = e || l.window;\n      var n = \"about:blank\";\n      t && (n = vt(wt(t)).toString()), e.location.href = n;\n    }\n\n    function Zn(t) {\n      return !!((t = (t || yr()).toLowerCase()).match(/android/) || t.match(/webos/) || t.match(/iphone|ipad|ipod/) || t.match(/blackberry/) || t.match(/windows phone/) || t.match(/iemobile/));\n    }\n\n    function tr(t) {\n      t = t || l.window;\n\n      try {\n        t.close();\n      } catch (t) {}\n    }\n\n    function er(t, e, n) {\n      var r = Math.floor(1e9 * Math.random()).toString();\n      e = e || 500, n = n || 600;\n      var i = (window.screen.availHeight - n) / 2,\n          o = (window.screen.availWidth - e) / 2;\n\n      for (a in e = {\n        width: e,\n        height: n,\n        top: 0 < i ? i : 0,\n        left: 0 < o ? o : 0,\n        location: !0,\n        resizable: !0,\n        statusbar: !0,\n        toolbar: !1\n      }, n = yr().toLowerCase(), r && (e.target = r, yt(n, \"crios/\") && (e.target = \"_blank\")), fr(yr()) == hr && (t = t || \"http://localhost\", e.scrollbars = !0), n = t || \"\", (t = e) || (t = {}), r = window, e = n instanceof gt ? n : wt(void 0 !== n.href ? n.href : String(n)), n = t.target || n.target, i = [], t) {\n        switch (a) {\n          case \"width\":\n          case \"height\":\n          case \"top\":\n          case \"left\":\n            i.push(a + \"=\" + t[a]);\n            break;\n\n          case \"target\":\n          case \"noopener\":\n          case \"noreferrer\":\n            break;\n\n          default:\n            i.push(a + \"=\" + (t[a] ? 1 : 0));\n        }\n      }\n\n      var a = i.join(\",\");\n      if ((Ct(\"iPhone\") && !Ct(\"iPod\") && !Ct(\"iPad\") || Ct(\"iPad\") || Ct(\"iPod\")) && r.navigator && r.navigator.standalone && n && \"_self\" != n ? (x(a = r.document.createElement(\"A\"), \"HTMLAnchorElement\"), e instanceof gt || e instanceof gt || (e = \"object\" == typeof e && e.na ? e.ma() : String(e), bt.test(e) || (e = \"about:invalid#zClosurez\"), e = Tt(e)), a.href = vt(e), a.setAttribute(\"target\", n), t.noreferrer && a.setAttribute(\"rel\", \"noreferrer\"), (t = document.createEvent(\"MouseEvent\")).initMouseEvent(\"click\", !0, !0, r, 1), a.dispatchEvent(t), a = {}) : t.noreferrer ? (a = r.open(\"\", n, a), t = vt(e).toString(), a && (ve && yt(t, \";\") && (t = \"'\" + t.replace(/'/g, \"%27\") + \"'\"), a.opener = null, t = Dt('<meta name=\"referrer\" content=\"no-referrer\"><meta http-equiv=\"refresh\" content=\"0; url=' + Mt(t) + '\">'), a.document.write(At(t)), a.document.close())) : (a = r.open(vt(e).toString(), n, a)) && t.noopener && (a.opener = null), a) try {\n        a.focus();\n      } catch (t) {}\n      return a;\n    }\n\n    var nr = /^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$/,\n        rr = /^[^@]+@[^@]+$/;\n\n    function ir() {\n      var e = null;\n      return new jt(function (t) {\n        \"complete\" == l.document.readyState ? t() : (e = function e() {\n          t();\n        }, He(window, \"load\", e));\n      }).s(function (t) {\n        throw Ge(window, \"load\", e), t;\n      });\n    }\n\n    function or(t) {\n      return t = t || yr(), !(\"file:\" !== wr() || !t.toLowerCase().match(/iphone|ipad|ipod|android/));\n    }\n\n    function ar() {\n      var t = l.window;\n\n      try {\n        return !(!t || t == t.top);\n      } catch (t) {\n        return !1;\n      }\n    }\n\n    function sr() {\n      return void 0 !== l.WorkerGlobalScope && \"function\" == typeof l.importScripts;\n    }\n\n    function ur() {\n      return Jh.INTERNAL.hasOwnProperty(\"reactNative\") ? \"ReactNative\" : Jh.INTERNAL.hasOwnProperty(\"node\") ? \"Node\" : sr() ? \"Worker\" : \"Browser\";\n    }\n\n    function cr() {\n      var t = ur();\n      return \"ReactNative\" === t || \"Node\" === t;\n    }\n\n    var hr = \"Firefox\",\n        lr = \"Chrome\";\n\n    function fr(t) {\n      var e = t.toLowerCase();\n      return yt(e, \"opera/\") || yt(e, \"opr/\") || yt(e, \"opios/\") ? \"Opera\" : yt(e, \"iemobile\") ? \"IEMobile\" : yt(e, \"msie\") || yt(e, \"trident/\") ? \"IE\" : yt(e, \"edge/\") ? \"Edge\" : yt(e, \"firefox/\") ? hr : yt(e, \"silk/\") ? \"Silk\" : yt(e, \"blackberry\") ? \"Blackberry\" : yt(e, \"webos\") ? \"Webos\" : !yt(e, \"safari/\") || yt(e, \"chrome/\") || yt(e, \"crios/\") || yt(e, \"android\") ? !yt(e, \"chrome/\") && !yt(e, \"crios/\") || yt(e, \"edge/\") ? yt(e, \"android\") ? \"Android\" : (t = t.match(/([a-zA-Z\\d\\.]+)\\/[a-zA-Z\\d\\.]*$/)) && 2 == t.length ? t[1] : \"Other\" : lr : \"Safari\";\n    }\n\n    var pr = {\n      Sc: \"FirebaseCore-web\",\n      Uc: \"FirebaseUI-web\"\n    };\n\n    function dr(t, e) {\n      e = e || [];\n      var n,\n          r = [],\n          i = {};\n\n      for (n in pr) {\n        i[pr[n]] = !0;\n      }\n\n      for (n = 0; n < e.length; n++) {\n        void 0 !== i[e[n]] && (delete i[e[n]], r.push(e[n]));\n      }\n\n      return r.sort(), (e = r).length || (e = [\"FirebaseCore-web\"]), \"Browser\" === (r = ur()) ? r = fr(i = yr()) : \"Worker\" === r && (r = fr(i = yr()) + \"-\" + r), r + \"/JsCore/\" + t + \"/\" + e.join(\",\");\n    }\n\n    function yr() {\n      return l.navigator && l.navigator.userAgent || \"\";\n    }\n\n    function mr(t, e) {\n      t = t.split(\".\"), e = e || l;\n\n      for (var n = 0; n < t.length && \"object\" == typeof e && null != e; n++) {\n        e = e[t[n]];\n      }\n\n      return n != t.length && (e = void 0), e;\n    }\n\n    function gr() {\n      try {\n        var t = l.localStorage,\n            e = Ir();\n        if (t) return t.setItem(e, \"1\"), t.removeItem(e), !Xn() || !!l.indexedDB;\n      } catch (t) {\n        return sr() && !!l.indexedDB;\n      }\n\n      return !1;\n    }\n\n    function vr() {\n      return (br() || \"chrome-extension:\" === wr() || or()) && !cr() && gr() && !sr();\n    }\n\n    function br() {\n      return \"http:\" === wr() || \"https:\" === wr();\n    }\n\n    function wr() {\n      return l.location && l.location.protocol || null;\n    }\n\n    function _r(t) {\n      return !Zn(t = t || yr()) && fr(t) != hr;\n    }\n\n    function Er(t) {\n      return void 0 === t ? null : Qn(t);\n    }\n\n    function Tr(t) {\n      var e,\n          n = {};\n\n      for (e in t) {\n        t.hasOwnProperty(e) && null !== t[e] && void 0 !== t[e] && (n[e] = t[e]);\n      }\n\n      return n;\n    }\n\n    function Sr(t) {\n      if (null !== t) return JSON.parse(t);\n    }\n\n    function Ir(t) {\n      return t || Math.floor(1e9 * Math.random()).toString();\n    }\n\n    function Cr(t) {\n      return \"Safari\" != fr(t = t || yr()) && !t.toLowerCase().match(/iphone|ipad|ipod/);\n    }\n\n    function Nr() {\n      var t = l.___jsl;\n      if (t && t.H) for (var e in t.H) {\n        if (t.H[e].r = t.H[e].r || [], t.H[e].L = t.H[e].L || [], t.H[e].r = t.H[e].L.concat(), t.CP) for (var n = 0; n < t.CP.length; n++) {\n          t.CP[n] = null;\n        }\n      }\n    }\n\n    function Ar(t, e) {\n      if (e < t) throw Error(\"Short delay should be less than long delay!\");\n      this.a = t, this.c = e, t = yr(), e = ur(), this.b = Zn(t) || \"ReactNative\" === e;\n    }\n\n    function kr() {\n      var t = l.document;\n      return !t || void 0 === t.visibilityState || \"visible\" == t.visibilityState;\n    }\n\n    function Dr(t) {\n      try {\n        var e = new Date(parseInt(t, 10));\n        if (!isNaN(e.getTime()) && !/[^0-9]/.test(t)) return e.toUTCString();\n      } catch (t) {}\n\n      return null;\n    }\n\n    function Rr() {\n      return !(!mr(\"fireauth.oauthhelper\", l) && !mr(\"fireauth.iframe\", l));\n    }\n\n    Ar.prototype.get = function () {\n      var t = l.navigator;\n      return !t || \"boolean\" != typeof t.onLine || !br() && \"chrome-extension:\" !== wr() && void 0 === t.connection || t.onLine ? this.b ? this.c : this.a : Math.min(5e3, this.a);\n    };\n\n    var Or,\n        Pr = {};\n\n    function xr(t) {\n      Pr[t] || (Pr[t] = !0, \"undefined\" != typeof console && \"function\" == typeof console.warn && console.warn(t));\n    }\n\n    try {\n      var Mr = {};\n      Object.defineProperty(Mr, \"abcd\", {\n        configurable: !0,\n        enumerable: !0,\n        value: 1\n      }), Object.defineProperty(Mr, \"abcd\", {\n        configurable: !0,\n        enumerable: !0,\n        value: 2\n      }), Or = 2 == Mr.abcd;\n    } catch (t) {\n      Or = !1;\n    }\n\n    function Lr(t, e, n) {\n      Or ? Object.defineProperty(t, e, {\n        configurable: !0,\n        enumerable: !0,\n        value: n\n      }) : t[e] = n;\n    }\n\n    function Fr(t, e) {\n      if (e) for (var n in e) {\n        e.hasOwnProperty(n) && Lr(t, n, e[n]);\n      }\n    }\n\n    function Ur(t) {\n      var e = {};\n      return Fr(e, t), e;\n    }\n\n    function qr(t) {\n      var e = t;\n      if (\"object\" == typeof t && null != t) for (var n in e = \"length\" in t ? [] : {}, t) {\n        Lr(e, n, qr(t[n]));\n      }\n      return e;\n    }\n\n    function Vr(t) {\n      var e = {},\n          n = t[jr],\n          r = t[Wr];\n      if (!(t = t[Kr]) || t != Br && !n) throw Error(\"Invalid provider user info!\");\n      e[Hr] = r || null, e[Qr] = n || null, Lr(this, zr, t), Lr(this, Gr, qr(e));\n    }\n\n    var Br = \"EMAIL_SIGNIN\",\n        jr = \"email\",\n        Wr = \"newEmail\",\n        Kr = \"requestType\",\n        Qr = \"email\",\n        Hr = \"fromEmail\",\n        Gr = \"data\",\n        zr = \"operation\";\n\n    function Yr(t, e) {\n      this.code = Jr + t, this.message = e || $r[t] || \"\";\n    }\n\n    function Xr(t) {\n      var e = t && t.code;\n      return e ? new Yr(e.substring(Jr.length), t.message) : null;\n    }\n\n    S(Yr, Error), Yr.prototype.w = function () {\n      return {\n        code: this.code,\n        message: this.message\n      };\n    }, Yr.prototype.toJSON = function () {\n      return this.w();\n    };\n    var Jr = \"auth/\",\n        $r = {\n      \"admin-restricted-operation\": \"This operation is restricted to administrators only.\",\n      \"argument-error\": \"\",\n      \"app-not-authorized\": \"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.\",\n      \"app-not-installed\": \"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.\",\n      \"captcha-check-failed\": \"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.\",\n      \"code-expired\": \"The SMS code has expired. Please re-send the verification code to try again.\",\n      \"cordova-not-ready\": \"Cordova framework is not ready.\",\n      \"cors-unsupported\": \"This browser is not supported.\",\n      \"credential-already-in-use\": \"This credential is already associated with a different user account.\",\n      \"custom-token-mismatch\": \"The custom token corresponds to a different audience.\",\n      \"requires-recent-login\": \"This operation is sensitive and requires recent authentication. Log in again before retrying this request.\",\n      \"dynamic-link-not-activated\": \"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.\",\n      \"email-already-in-use\": \"The email address is already in use by another account.\",\n      \"expired-action-code\": \"The action code has expired. \",\n      \"cancelled-popup-request\": \"This operation has been cancelled due to another conflicting popup being opened.\",\n      \"internal-error\": \"An internal error has occurred.\",\n      \"invalid-app-credential\": \"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.\",\n      \"invalid-app-id\": \"The mobile app identifier is not registed for the current project.\",\n      \"invalid-user-token\": \"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.\",\n      \"invalid-auth-event\": \"An internal error has occurred.\",\n      \"invalid-verification-code\": \"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.\",\n      \"invalid-continue-uri\": \"The continue URL provided in the request is invalid.\",\n      \"invalid-cordova-configuration\": \"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.\",\n      \"invalid-custom-token\": \"The custom token format is incorrect. Please check the documentation.\",\n      \"invalid-dynamic-link-domain\": \"The provided dynamic link domain is not configured or authorized for the current project.\",\n      \"invalid-email\": \"The email address is badly formatted.\",\n      \"invalid-api-key\": \"Your API key is invalid, please check you have copied it correctly.\",\n      \"invalid-cert-hash\": \"The SHA-1 certificate hash provided is invalid.\",\n      \"invalid-credential\": \"The supplied auth credential is malformed or has expired.\",\n      \"invalid-message-payload\": \"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.\",\n      \"invalid-oauth-provider\": \"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.\",\n      \"invalid-oauth-client-id\": \"The OAuth client ID provided is either invalid or does not match the specified API key.\",\n      \"unauthorized-domain\": \"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.\",\n      \"invalid-action-code\": \"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.\",\n      \"wrong-password\": \"The password is invalid or the user does not have a password.\",\n      \"invalid-persistence-type\": \"The specified persistence type is invalid. It can only be local, session or none.\",\n      \"invalid-phone-number\": \"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].\",\n      \"invalid-provider-id\": \"The specified provider ID is invalid.\",\n      \"invalid-recipient-email\": \"The email corresponding to this action failed to send as the provided recipient email address is invalid.\",\n      \"invalid-sender\": \"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.\",\n      \"invalid-verification-id\": \"The verification ID used to create the phone auth credential is invalid.\",\n      \"missing-android-pkg-name\": \"An Android Package Name must be provided if the Android App is required to be installed.\",\n      \"auth-domain-config-required\": \"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.\",\n      \"missing-app-credential\": \"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.\",\n      \"missing-verification-code\": \"The phone auth credential was created with an empty SMS verification code.\",\n      \"missing-continue-uri\": \"A continue URL must be provided in the request.\",\n      \"missing-iframe-start\": \"An internal error has occurred.\",\n      \"missing-ios-bundle-id\": \"An iOS Bundle ID must be provided if an App Store ID is provided.\",\n      \"missing-or-invalid-nonce\": \"The OIDC ID token requires a valid unhashed nonce.\",\n      \"missing-phone-number\": \"To send verification codes, provide a phone number for the recipient.\",\n      \"missing-verification-id\": \"The phone auth credential was created with an empty verification ID.\",\n      \"app-deleted\": \"This instance of FirebaseApp has been deleted.\",\n      \"account-exists-with-different-credential\": \"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.\",\n      \"network-request-failed\": \"A network error (such as timeout, interrupted connection or unreachable host) has occurred.\",\n      \"no-auth-event\": \"An internal error has occurred.\",\n      \"no-such-provider\": \"User was not linked to an account with the given provider.\",\n      \"null-user\": \"A null user object was provided as the argument for an operation which requires a non-null user object.\",\n      \"operation-not-allowed\": \"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.\",\n      \"operation-not-supported-in-this-environment\": 'This operation is not supported in the environment this application is running on. \"location.protocol\" must be http, https or chrome-extension and web storage must be enabled.',\n      \"popup-blocked\": \"Unable to establish a connection with the popup. It may have been blocked by the browser.\",\n      \"popup-closed-by-user\": \"The popup has been closed by the user before finalizing the operation.\",\n      \"provider-already-linked\": \"User can only be linked to one identity for the given provider.\",\n      \"quota-exceeded\": \"The project's quota for this operation has been exceeded.\",\n      \"redirect-cancelled-by-user\": \"The redirect operation has been cancelled by the user before finalizing.\",\n      \"redirect-operation-pending\": \"A redirect sign-in operation is already pending.\",\n      \"rejected-credential\": \"The request contains malformed or mismatching credentials.\",\n      timeout: \"The operation has timed out.\",\n      \"user-token-expired\": \"The user's credential is no longer valid. The user must sign in again.\",\n      \"too-many-requests\": \"We have blocked all requests from this device due to unusual activity. Try again later.\",\n      \"unauthorized-continue-uri\": \"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.\",\n      \"unsupported-persistence-type\": \"The current environment does not support the specified persistence type.\",\n      \"user-cancelled\": \"User did not grant your application the permissions it requested.\",\n      \"user-not-found\": \"There is no user record corresponding to this identifier. The user may have been deleted.\",\n      \"user-disabled\": \"The user account has been disabled by an administrator.\",\n      \"user-mismatch\": \"The supplied credentials do not correspond to the previously signed in user.\",\n      \"user-signed-out\": \"\",\n      \"weak-password\": \"The password must be 6 characters long or more.\",\n      \"web-storage-unsupported\": \"This browser is not supported or 3rd party cookies and data may be disabled.\"\n    };\n\n    function Zr(t) {\n      var e = t[ii];\n      if (void 0 === e) throw new Yr(\"missing-continue-uri\");\n      if (\"string\" != typeof e || \"string\" == typeof e && !e.length) throw new Yr(\"invalid-continue-uri\");\n      this.h = e, this.b = this.a = null, this.g = !1;\n      var n = t[ti];\n\n      if (n && \"object\" == typeof n) {\n        e = n[si];\n        var r = n[oi];\n\n        if (n = n[ai], \"string\" == typeof e && e.length) {\n          if (this.a = e, void 0 !== r && \"boolean\" != typeof r) throw new Yr(\"argument-error\", oi + \" property must be a boolean when specified.\");\n          if (this.g = !!r, void 0 !== n && (\"string\" != typeof n || \"string\" == typeof n && !n.length)) throw new Yr(\"argument-error\", ai + \" property must be a non empty string when specified.\");\n          this.b = n || null;\n        } else {\n          if (void 0 !== e) throw new Yr(\"argument-error\", si + \" property must be a non empty string when specified.\");\n          if (void 0 !== r || void 0 !== n) throw new Yr(\"missing-android-pkg-name\");\n        }\n      } else if (void 0 !== n) throw new Yr(\"argument-error\", ti + \" property must be a non null object when specified.\");\n\n      if (this.f = null, (e = t[ri]) && \"object\" == typeof e) {\n        if (\"string\" == typeof (e = e[ui]) && e.length) this.f = e;else if (void 0 !== e) throw new Yr(\"argument-error\", ui + \" property must be a non empty string when specified.\");\n      } else if (void 0 !== e) throw new Yr(\"argument-error\", ri + \" property must be a non null object when specified.\");\n\n      if (void 0 !== (e = t[ni]) && \"boolean\" != typeof e) throw new Yr(\"argument-error\", ni + \" property must be a boolean when specified.\");\n      if (this.c = !!e, void 0 !== (t = t[ei]) && (\"string\" != typeof t || \"string\" == typeof t && !t.length)) throw new Yr(\"argument-error\", ei + \" property must be a non empty string when specified.\");\n      this.i = t || null;\n    }\n\n    var ti = \"android\",\n        ei = \"dynamicLinkDomain\",\n        ni = \"handleCodeInApp\",\n        ri = \"iOS\",\n        ii = \"url\",\n        oi = \"installApp\",\n        ai = \"minimumVersion\",\n        si = \"packageName\",\n        ui = \"bundleId\";\n\n    function ci(t) {\n      var e = {};\n\n      for (var n in e.continueUrl = t.h, e.canHandleCodeInApp = t.c, (e.androidPackageName = t.a) && (e.androidMinimumVersion = t.b, e.androidInstallApp = t.g), e.iOSBundleId = t.f, e.dynamicLinkDomain = t.i, e) {\n        null === e[n] && delete e[n];\n      }\n\n      return e;\n    }\n\n    var hi = null,\n        li = null;\n\n    function fi(t) {\n      var e = \"\";\n      return function (r, t) {\n        function e(t) {\n          for (; i < r.length;) {\n            var e = r.charAt(i++),\n                n = li[e];\n            if (null != n) return n;\n            if (!/^[\\s\\xa0]*$/.test(e)) throw Error(\"Unknown base64 encoding at char: \" + e);\n          }\n\n          return t;\n        }\n\n        !function () {\n          if (!hi) {\n            hi = {}, li = {};\n\n            for (var t = 0; t < 65; t++) {\n              hi[t] = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\".charAt(t), 62 <= (li[hi[t]] = t) && (li[\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.\".charAt(t)] = t);\n            }\n          }\n        }();\n\n        for (var i = 0;;) {\n          var n = e(-1),\n              o = e(0),\n              a = e(64),\n              s = e(64);\n          if (64 === s && -1 === n) break;\n          t(n << 2 | o >> 4), 64 != a && (t(o << 4 & 240 | a >> 2), 64 != s && t(a << 6 & 192 | s));\n        }\n      }(t, function (t) {\n        e += String.fromCharCode(t);\n      }), e;\n    }\n\n    function pi(t) {\n      this.c = t.sub, this.a = t.provider_id || t.firebase && t.firebase.sign_in_provider || null, this.b = !!t.is_anonymous || \"anonymous\" == this.a;\n    }\n\n    function di(t) {\n      return (t = yi(t)) && t.sub && t.iss && t.aud && t.exp ? new pi(t) : null;\n    }\n\n    function yi(t) {\n      if (!t) return null;\n      if (3 != (t = t.split(\".\")).length) return null;\n\n      for (var e = (4 - (t = t[1]).length % 4) % 4, n = 0; n < e; n++) {\n        t += \".\";\n      }\n\n      try {\n        return JSON.parse(fi(t));\n      } catch (t) {}\n\n      return null;\n    }\n\n    pi.prototype.f = function () {\n      return this.b;\n    };\n\n    var mi,\n        gi = {\n      Yc: {\n        bb: \"https://www.googleapis.com/identitytoolkit/v3/relyingparty/\",\n        jb: \"https://securetoken.googleapis.com/v1/token\",\n        id: \"p\"\n      },\n      $c: {\n        bb: \"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/\",\n        jb: \"https://staging-securetoken.sandbox.googleapis.com/v1/token\",\n        id: \"s\"\n      },\n      ad: {\n        bb: \"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/\",\n        jb: \"https://test-securetoken.sandbox.googleapis.com/v1/token\",\n        id: \"t\"\n      }\n    };\n\n    function vi(t) {\n      for (var e in gi) {\n        if (gi[e].id === t) return {\n          firebaseEndpoint: (t = gi[e]).bb,\n          secureTokenEndpoint: t.jb\n        };\n      }\n\n      return null;\n    }\n\n    mi = vi(\"__EID__\") ? \"__EID__\" : void 0;\n    var bi = \"oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version\".split(\" \"),\n        wi = [\"client_id\", \"response_type\", \"scope\", \"redirect_uri\", \"state\"],\n        _i = {\n      Tc: {\n        Oa: \"locale\",\n        Ba: 500,\n        Aa: 600,\n        Pa: \"facebook.com\",\n        ib: wi\n      },\n      Vc: {\n        Oa: null,\n        Ba: 500,\n        Aa: 620,\n        Pa: \"github.com\",\n        ib: wi\n      },\n      Wc: {\n        Oa: \"hl\",\n        Ba: 515,\n        Aa: 680,\n        Pa: \"google.com\",\n        ib: wi\n      },\n      bd: {\n        Oa: \"lang\",\n        Ba: 485,\n        Aa: 705,\n        Pa: \"twitter.com\",\n        ib: bi\n      }\n    };\n\n    function Ei(t) {\n      for (var e in _i) {\n        if (_i[e].Pa == t) return _i[e];\n      }\n\n      return null;\n    }\n\n    function Ti(t) {\n      var e = {};\n      e[\"facebook.com\"] = Ai, e[\"google.com\"] = Di, e[\"github.com\"] = ki, e[\"twitter.com\"] = Ri;\n      var n = t && t[Ii];\n\n      try {\n        if (n) return e[n] ? new e[n](t) : new Ni(t);\n        if (void 0 !== t[Si]) return new Ci(t);\n      } catch (t) {}\n\n      return null;\n    }\n\n    var Si = \"idToken\",\n        Ii = \"providerId\";\n\n    function Ci(t) {\n      var e = t[Ii];\n\n      if (!e && t[Si]) {\n        var n = di(t[Si]);\n        n && n.a && (e = n.a);\n      }\n\n      if (!e) throw Error(\"Invalid additional user info!\");\n      \"anonymous\" != e && \"custom\" != e || (e = null), n = !1, void 0 !== t.isNewUser ? n = !!t.isNewUser : \"identitytoolkit#SignupNewUserResponse\" === t.kind && (n = !0), Lr(this, \"providerId\", e), Lr(this, \"isNewUser\", n);\n    }\n\n    function Ni(t) {\n      Ci.call(this, t), Lr(this, \"profile\", qr((t = Sr(t.rawUserInfo || \"{}\")) || {}));\n    }\n\n    function Ai(t) {\n      if (Ni.call(this, t), \"facebook.com\" != this.providerId) throw Error(\"Invalid provider ID!\");\n    }\n\n    function ki(t) {\n      if (Ni.call(this, t), \"github.com\" != this.providerId) throw Error(\"Invalid provider ID!\");\n      Lr(this, \"username\", this.profile && this.profile.login || null);\n    }\n\n    function Di(t) {\n      if (Ni.call(this, t), \"google.com\" != this.providerId) throw Error(\"Invalid provider ID!\");\n    }\n\n    function Ri(t) {\n      if (Ni.call(this, t), \"twitter.com\" != this.providerId) throw Error(\"Invalid provider ID!\");\n      Lr(this, \"username\", t.screenName || null);\n    }\n\n    function Oi(t) {\n      this.a = _n(t);\n    }\n\n    function Pi(t) {\n      var e = _n(t),\n          n = wn(e, \"link\"),\n          r = wn(_n(n), \"link\");\n\n      return wn(_n(e = wn(e, \"deep_link_id\")), \"link\") || e || r || n || t;\n    }\n\n    function xi() {}\n\n    function Mi(t, n) {\n      return t.then(function (t) {\n        if (t[Sa]) {\n          var e = di(t[Sa]);\n          if (!e || n != e.c) throw new Yr(\"user-mismatch\");\n          return t;\n        }\n\n        throw new Yr(\"user-mismatch\");\n      }).s(function (t) {\n        throw t && t.code && t.code == Jr + \"user-not-found\" ? new Yr(\"user-mismatch\") : t;\n      });\n    }\n\n    function Li(t, e) {\n      if (!e) throw new Yr(\"internal-error\", \"failed to construct a credential\");\n      this.a = e, Lr(this, \"providerId\", t), Lr(this, \"signInMethod\", t);\n    }\n\n    function Fi(t) {\n      return {\n        pendingToken: t.a,\n        requestUri: \"http://localhost\"\n      };\n    }\n\n    function Ui(t) {\n      if (t && t.providerId && t.signInMethod && 0 == t.providerId.indexOf(\"saml.\") && t.pendingToken) try {\n        return new Li(t.providerId, t.pendingToken);\n      } catch (t) {}\n      return null;\n    }\n\n    function qi(t, e, n) {\n      if (this.a = null, e.idToken || e.accessToken) e.idToken && Lr(this, \"idToken\", e.idToken), e.accessToken && Lr(this, \"accessToken\", e.accessToken), e.nonce && !e.pendingToken && Lr(this, \"nonce\", e.nonce), e.pendingToken && (this.a = e.pendingToken);else {\n        if (!e.oauthToken || !e.oauthTokenSecret) throw new Yr(\"internal-error\", \"failed to construct a credential\");\n        Lr(this, \"accessToken\", e.oauthToken), Lr(this, \"secret\", e.oauthTokenSecret);\n      }\n      Lr(this, \"providerId\", t), Lr(this, \"signInMethod\", n);\n    }\n\n    function Vi(t) {\n      var e = {};\n      return t.idToken && (e.id_token = t.idToken), t.accessToken && (e.access_token = t.accessToken), t.secret && (e.oauth_token_secret = t.secret), e.providerId = t.providerId, t.nonce && !t.a && (e.nonce = t.nonce), e = {\n        postBody: Pn(e).toString(),\n        requestUri: \"http://localhost\"\n      }, t.a && (delete e.postBody, e.pendingToken = t.a), e;\n    }\n\n    function Bi(t) {\n      if (t && t.providerId && t.signInMethod) {\n        var e = {\n          idToken: t.oauthIdToken,\n          accessToken: t.oauthTokenSecret ? null : t.oauthAccessToken,\n          oauthTokenSecret: t.oauthTokenSecret,\n          oauthToken: t.oauthTokenSecret && t.oauthAccessToken,\n          nonce: t.nonce,\n          pendingToken: t.pendingToken\n        };\n\n        try {\n          return new qi(t.providerId, e, t.signInMethod);\n        } catch (t) {}\n      }\n\n      return null;\n    }\n\n    function ji(t, e) {\n      this.Cc = e || [], Fr(this, {\n        providerId: t,\n        isOAuthProvider: !0\n      }), this.zb = {}, this.eb = (Ei(t) || {}).Oa || null, this.ab = null;\n    }\n\n    function Wi(t) {\n      if (\"string\" != typeof t || 0 != t.indexOf(\"saml.\")) throw new Yr(\"argument-error\", 'SAML provider IDs must be prefixed with \"saml.\"');\n      ji.call(this, t, []);\n    }\n\n    function Ki(t) {\n      ji.call(this, t, wi), this.a = [];\n    }\n\n    function Qi() {\n      Ki.call(this, \"facebook.com\");\n    }\n\n    function Hi(t) {\n      if (!t) throw new Yr(\"argument-error\", \"credential failed: expected 1 argument (the OAuth access token).\");\n      var e = t;\n      return g(t) && (e = t.accessToken), new Qi().credential({\n        accessToken: e\n      });\n    }\n\n    function Gi() {\n      Ki.call(this, \"github.com\");\n    }\n\n    function zi(t) {\n      if (!t) throw new Yr(\"argument-error\", \"credential failed: expected 1 argument (the OAuth access token).\");\n      var e = t;\n      return g(t) && (e = t.accessToken), new Gi().credential({\n        accessToken: e\n      });\n    }\n\n    function Yi() {\n      Ki.call(this, \"google.com\"), this.ua(\"profile\");\n    }\n\n    function Xi(t, e) {\n      var n = t;\n      return g(t) && (n = t.idToken, e = t.accessToken), new Yi().credential({\n        idToken: n,\n        accessToken: e\n      });\n    }\n\n    function Ji() {\n      ji.call(this, \"twitter.com\", bi);\n    }\n\n    function $i(t, e) {\n      var n = t;\n      if (g(n) || (n = {\n        oauthToken: t,\n        oauthTokenSecret: e\n      }), !n.oauthToken || !n.oauthTokenSecret) throw new Yr(\"argument-error\", \"credential failed: expected 2 arguments (the OAuth access token and secret).\");\n      return new qi(\"twitter.com\", n, \"twitter.com\");\n    }\n\n    function Zi(t, e, n) {\n      this.a = t, this.c = e, Lr(this, \"providerId\", \"password\"), Lr(this, \"signInMethod\", n === eo.EMAIL_LINK_SIGN_IN_METHOD ? eo.EMAIL_LINK_SIGN_IN_METHOD : eo.EMAIL_PASSWORD_SIGN_IN_METHOD);\n    }\n\n    function to(t) {\n      return t && t.email && t.password ? new Zi(t.email, t.password, t.signInMethod) : null;\n    }\n\n    function eo() {\n      Fr(this, {\n        providerId: \"password\",\n        isOAuthProvider: !1\n      });\n    }\n\n    function no(t, e) {\n      if (!(e = ro(e))) throw new Yr(\"argument-error\", \"Invalid email link!\");\n      return new Zi(t, e, eo.EMAIL_LINK_SIGN_IN_METHOD);\n    }\n\n    function ro(t) {\n      var e = wn((t = new Oi(t = Pi(t))).a, \"oobCode\") || null;\n      return \"signIn\" === (wn(t.a, \"mode\") || null) && e ? e : null;\n    }\n\n    function io(t) {\n      if (!(t.Ua && t.Ta || t.Fa && t.$)) throw new Yr(\"internal-error\");\n      this.a = t, Lr(this, \"providerId\", \"phone\"), Lr(this, \"signInMethod\", \"phone\");\n    }\n\n    function oo(e) {\n      if (e && \"phone\" === e.providerId && (e.verificationId && e.verificationCode || e.temporaryProof && e.phoneNumber)) {\n        var n = {};\n        return L([\"verificationId\", \"verificationCode\", \"temporaryProof\", \"phoneNumber\"], function (t) {\n          e[t] && (n[t] = e[t]);\n        }), new io(n);\n      }\n\n      return null;\n    }\n\n    function ao(t) {\n      return t.a.Fa && t.a.$ ? {\n        temporaryProof: t.a.Fa,\n        phoneNumber: t.a.$\n      } : {\n        sessionInfo: t.a.Ua,\n        code: t.a.Ta\n      };\n    }\n\n    function so(t) {\n      try {\n        this.a = t || Jh.auth();\n      } catch (t) {\n        throw new Yr(\"argument-error\", \"Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().\");\n      }\n\n      Fr(this, {\n        providerId: \"phone\",\n        isOAuthProvider: !1\n      });\n    }\n\n    function uo(t, e) {\n      if (!t) throw new Yr(\"missing-verification-id\");\n      if (!e) throw new Yr(\"missing-verification-code\");\n      return new io({\n        Ua: t,\n        Ta: e\n      });\n    }\n\n    function co(t) {\n      if (t.temporaryProof && t.phoneNumber) return new io({\n        Fa: t.temporaryProof,\n        $: t.phoneNumber\n      });\n      var e = t && t.providerId;\n      if (!e || \"password\" === e) return null;\n      var n = t && t.oauthAccessToken,\n          r = t && t.oauthTokenSecret,\n          i = t && t.nonce,\n          o = t && t.oauthIdToken,\n          a = t && t.pendingToken;\n\n      try {\n        switch (e) {\n          case \"google.com\":\n            return Xi(o, n);\n\n          case \"facebook.com\":\n            return Hi(n);\n\n          case \"github.com\":\n            return zi(n);\n\n          case \"twitter.com\":\n            return $i(n, r);\n\n          default:\n            return n || r || o || a ? a ? 0 == e.indexOf(\"saml.\") ? new Li(e, a) : new qi(e, {\n              pendingToken: a,\n              idToken: t.oauthIdToken,\n              accessToken: t.oauthAccessToken\n            }, e) : new Ki(e).credential({\n              idToken: o,\n              accessToken: n,\n              rawNonce: i\n            }) : null;\n        }\n      } catch (t) {\n        return null;\n      }\n    }\n\n    function ho(t) {\n      if (!t.isOAuthProvider) throw new Yr(\"invalid-oauth-provider\");\n    }\n\n    function lo(t, e, n, r, i, o) {\n      if (this.c = t, this.b = e || null, this.g = n || null, this.f = r || null, this.h = o || null, this.a = i || null, !this.g && !this.a) throw new Yr(\"invalid-auth-event\");\n      if (this.g && this.a) throw new Yr(\"invalid-auth-event\");\n      if (this.g && !this.f) throw new Yr(\"invalid-auth-event\");\n    }\n\n    function fo(t) {\n      return (t = t || {}).type ? new lo(t.type, t.eventId, t.urlResponse, t.sessionId, t.error && Xr(t.error), t.postBody) : null;\n    }\n\n    function po() {\n      this.b = null, this.a = [];\n    }\n\n    S(Ni, Ci), S(Ai, Ni), S(ki, Ni), S(Di, Ni), S(Ri, Ni), Li.prototype.la = function (t) {\n      return ja(t, Fi(this));\n    }, Li.prototype.b = function (t, e) {\n      var n = Fi(this);\n      return n.idToken = e, Wa(t, n);\n    }, Li.prototype.f = function (t, e) {\n      return Mi(Ka(t, Fi(this)), e);\n    }, Li.prototype.w = function () {\n      return {\n        providerId: this.providerId,\n        signInMethod: this.signInMethod,\n        pendingToken: this.a\n      };\n    }, qi.prototype.la = function (t) {\n      return ja(t, Vi(this));\n    }, qi.prototype.b = function (t, e) {\n      var n = Vi(this);\n      return n.idToken = e, Wa(t, n);\n    }, qi.prototype.f = function (t, e) {\n      return Mi(Ka(t, Vi(this)), e);\n    }, qi.prototype.w = function () {\n      var t = {\n        providerId: this.providerId,\n        signInMethod: this.signInMethod\n      };\n      return this.idToken && (t.oauthIdToken = this.idToken), this.accessToken && (t.oauthAccessToken = this.accessToken), this.secret && (t.oauthTokenSecret = this.secret), this.nonce && (t.nonce = this.nonce), this.a && (t.pendingToken = this.a), t;\n    }, ji.prototype.Da = function (t) {\n      return this.zb = H(t), this;\n    }, S(Wi, ji), S(Ki, ji), Ki.prototype.ua = function (t) {\n      return q(this.a, t) || this.a.push(t), this;\n    }, Ki.prototype.Fb = function () {\n      return W(this.a);\n    }, Ki.prototype.credential = function (t, e) {\n      var n;\n      if (!(n = g(t) ? {\n        idToken: t.idToken || null,\n        accessToken: t.accessToken || null,\n        nonce: t.rawNonce || null\n      } : {\n        idToken: t || null,\n        accessToken: e || null\n      }).idToken && !n.accessToken) throw new Yr(\"argument-error\", \"credential failed: must provide the ID token and/or the access token.\");\n      return new qi(this.providerId, n, this.providerId);\n    }, S(Qi, Ki), Lr(Qi, \"PROVIDER_ID\", \"facebook.com\"), Lr(Qi, \"FACEBOOK_SIGN_IN_METHOD\", \"facebook.com\"), S(Gi, Ki), Lr(Gi, \"PROVIDER_ID\", \"github.com\"), Lr(Gi, \"GITHUB_SIGN_IN_METHOD\", \"github.com\"), S(Yi, Ki), Lr(Yi, \"PROVIDER_ID\", \"google.com\"), Lr(Yi, \"GOOGLE_SIGN_IN_METHOD\", \"google.com\"), S(Ji, ji), Lr(Ji, \"PROVIDER_ID\", \"twitter.com\"), Lr(Ji, \"TWITTER_SIGN_IN_METHOD\", \"twitter.com\"), Zi.prototype.la = function (t) {\n      return this.signInMethod == eo.EMAIL_LINK_SIGN_IN_METHOD ? bs(t, $a, {\n        email: this.a,\n        oobCode: this.c\n      }) : bs(t, ys, {\n        email: this.a,\n        password: this.c\n      });\n    }, Zi.prototype.b = function (t, e) {\n      return this.signInMethod == eo.EMAIL_LINK_SIGN_IN_METHOD ? bs(t, Za, {\n        idToken: e,\n        email: this.a,\n        oobCode: this.c\n      }) : bs(t, cs, {\n        idToken: e,\n        email: this.a,\n        password: this.c\n      });\n    }, Zi.prototype.f = function (t, e) {\n      return Mi(this.la(t), e);\n    }, Zi.prototype.w = function () {\n      return {\n        email: this.a,\n        password: this.c,\n        signInMethod: this.signInMethod\n      };\n    }, Fr(eo, {\n      PROVIDER_ID: \"password\"\n    }), Fr(eo, {\n      EMAIL_LINK_SIGN_IN_METHOD: \"emailLink\"\n    }), Fr(eo, {\n      EMAIL_PASSWORD_SIGN_IN_METHOD: \"password\"\n    }), io.prototype.la = function (t) {\n      return t.Va(ao(this));\n    }, io.prototype.b = function (t, e) {\n      var n = ao(this);\n      return n.idToken = e, bs(t, gs, n);\n    }, io.prototype.f = function (t, e) {\n      var n = ao(this);\n      return n.operation = \"REAUTH\", Mi(t = bs(t, vs, n), e);\n    }, io.prototype.w = function () {\n      var t = {\n        providerId: \"phone\"\n      };\n      return this.a.Ua && (t.verificationId = this.a.Ua), this.a.Ta && (t.verificationCode = this.a.Ta), this.a.Fa && (t.temporaryProof = this.a.Fa), this.a.$ && (t.phoneNumber = this.a.$), t;\n    }, so.prototype.Va = function (r, i) {\n      var o = this.a.c;\n      return Yt(i.verify()).then(function (t) {\n        if (!h(t)) throw new Yr(\"argument-error\", \"An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.\");\n\n        switch (i.type) {\n          case \"recaptcha\":\n            return (e = o, n = {\n              phoneNumber: r,\n              recaptchaToken: t\n            }, bs(e, ss, n)).then(function (t) {\n              return \"function\" == typeof i.reset && i.reset(), t;\n            }, function (t) {\n              throw \"function\" == typeof i.reset && i.reset(), t;\n            });\n\n          default:\n            throw new Yr(\"argument-error\", 'Only firebase.auth.ApplicationVerifiers with type=\"recaptcha\" are currently supported.');\n        }\n\n        var e, n;\n      });\n    }, Fr(so, {\n      PROVIDER_ID: \"phone\"\n    }), Fr(so, {\n      PHONE_SIGN_IN_METHOD: \"phone\"\n    }), lo.prototype.getUid = function () {\n      var t = [];\n      return t.push(this.c), this.b && t.push(this.b), this.f && t.push(this.f), this.i && t.push(this.i), t.join(\"-\");\n    }, lo.prototype.w = function () {\n      return {\n        type: this.c,\n        eventId: this.b,\n        urlResponse: this.g,\n        sessionId: this.f,\n        postBody: this.h,\n        error: this.a && this.a.w()\n      };\n    };\n    var yo,\n        mo = null;\n\n    function go(t) {\n      var e = \"unauthorized-domain\",\n          n = void 0,\n          r = _n(t);\n\n      t = r.b, \"chrome-extension\" == (r = r.f) ? n = xt(\"This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.\", t) : \"http\" == r || \"https\" == r ? n = xt(\"This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.\", t) : e = \"operation-not-supported-in-this-environment\", Yr.call(this, e, n);\n    }\n\n    function vo(t, e, n) {\n      Yr.call(this, t, n), (t = e || {}).Ab && Lr(this, \"email\", t.Ab), t.$ && Lr(this, \"phoneNumber\", t.$), t.credential && Lr(this, \"credential\", t.credential);\n    }\n\n    function bo(t) {\n      if (t.code) {\n        var e = t.code || \"\";\n        0 == e.indexOf(Jr) && (e = e.substring(Jr.length));\n        var n = {\n          credential: co(t)\n        };\n        if (t.email) n.Ab = t.email;else if (t.phoneNumber) n.$ = t.phoneNumber;else if (!n.credential) return new Yr(e, t.message || void 0);\n        return new vo(e, n, t.message);\n      }\n\n      return null;\n    }\n\n    function wo() {}\n\n    function _o(t) {\n      return t.c || (t.c = t.b());\n    }\n\n    function Eo() {}\n\n    function To(t) {\n      if (t.f || \"undefined\" != typeof XMLHttpRequest || \"undefined\" == typeof ActiveXObject) return t.f;\n\n      for (var e = [\"MSXML2.XMLHTTP.6.0\", \"MSXML2.XMLHTTP.3.0\", \"MSXML2.XMLHTTP\", \"Microsoft.XMLHTTP\"], n = 0; n < e.length; n++) {\n        var r = e[n];\n\n        try {\n          return new ActiveXObject(r), t.f = r;\n        } catch (t) {}\n      }\n\n      throw Error(\"Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed\");\n    }\n\n    function So() {}\n\n    function Io() {\n      this.a = new XDomainRequest(), this.readyState = 0, this.onreadystatechange = null, this.responseType = this.responseText = this.response = \"\", this.status = -1, this.statusText = \"\", this.a.onload = _(this.cc, this), this.a.onerror = _(this.Gb, this), this.a.onprogress = _(this.dc, this), this.a.ontimeout = _(this.hc, this);\n    }\n\n    function Co(t, e) {\n      t.readyState = e, t.onreadystatechange && t.onreadystatechange();\n    }\n\n    function No(t, e, n) {\n      this.reset(t, e, n, void 0, void 0);\n    }\n\n    function Ao(t) {\n      this.f = t, this.b = this.c = this.a = null;\n    }\n\n    function ko(t, e) {\n      this.name = t, this.value = e;\n    }\n\n    po.prototype.subscribe = function (t) {\n      var n = this;\n      this.a.push(t), this.b || (this.b = function (t) {\n        for (var e = 0; e < n.a.length; e++) {\n          n.a[e](t);\n        }\n      }, \"function\" == typeof (t = mr(\"universalLinks.subscribe\", l)) && t(null, this.b));\n    }, po.prototype.unsubscribe = function (e) {\n      B(this.a, function (t) {\n        return t == e;\n      });\n    }, S(go, Yr), S(vo, Yr), vo.prototype.w = function () {\n      var t = {\n        code: this.code,\n        message: this.message\n      };\n      this.email && (t.email = this.email), this.phoneNumber && (t.phoneNumber = this.phoneNumber);\n      var e = this.credential && this.credential.w();\n      return e && z(t, e), t;\n    }, vo.prototype.toJSON = function () {\n      return this.w();\n    }, wo.prototype.c = null, S(Eo, wo), Eo.prototype.a = function () {\n      var t = To(this);\n      return t ? new ActiveXObject(t) : new XMLHttpRequest();\n    }, Eo.prototype.b = function () {\n      var t = {};\n      return To(this) && (t[0] = !0, t[1] = !0), t;\n    }, yo = new Eo(), S(So, wo), So.prototype.a = function () {\n      var t = new XMLHttpRequest();\n      if (\"withCredentials\" in t) return t;\n      if (\"undefined\" != typeof XDomainRequest) return new Io();\n      throw Error(\"Unsupported browser\");\n    }, So.prototype.b = function () {\n      return {};\n    }, (t = Io.prototype).open = function (t, e, n) {\n      if (null != n && !n) throw Error(\"Only async requests are supported.\");\n      this.a.open(t, e);\n    }, t.send = function (t) {\n      if (t) {\n        if (\"string\" != typeof t) throw Error(\"Only string data is supported\");\n        this.a.send(t);\n      } else this.a.send();\n    }, t.abort = function () {\n      this.a.abort();\n    }, t.setRequestHeader = function () {}, t.getResponseHeader = function (t) {\n      return \"content-type\" == t.toLowerCase() ? this.a.contentType : \"\";\n    }, t.cc = function () {\n      this.status = 200, this.response = this.responseText = this.a.responseText, Co(this, 4);\n    }, t.Gb = function () {\n      this.status = 500, this.response = this.responseText = \"\", Co(this, 4);\n    }, t.hc = function () {\n      this.Gb();\n    }, t.dc = function () {\n      this.status = 200, Co(this, 1);\n    }, t.getAllResponseHeaders = function () {\n      return \"content-type: \" + this.a.contentType;\n    }, No.prototype.a = null, No.prototype.reset = function (t, e, n, r, i) {\n      delete this.a;\n    }, ko.prototype.toString = function () {\n      return this.name;\n    };\n    var Do = new ko(\"SEVERE\", 1e3),\n        Ro = new ko(\"WARNING\", 900),\n        Oo = new ko(\"CONFIG\", 700),\n        Po = new ko(\"FINE\", 500);\n\n    Ao.prototype.log = function (t, e, n) {\n      if (t.value >= function t(e) {\n        return e.c ? e.c : e.a ? t(e.a) : (A(\"Root logger has no level set.\"), null);\n      }(this).value) for (m(e) && (e = e()), t = new No(t, String(e), this.f), n && (t.a = n), n = this; n;) {\n        n = n.a;\n      }\n    };\n\n    var xo,\n        Mo = {},\n        Lo = null;\n\n    function Fo(t) {\n      var e;\n\n      if (Lo || (Lo = new Ao(\"\"), (Mo[\"\"] = Lo).c = Oo), !(e = Mo[t])) {\n        e = new Ao(t);\n        var n = t.lastIndexOf(\".\"),\n            r = t.substr(n + 1);\n        (n = Fo(t.substr(0, n))).b || (n.b = {}), (n.b[r] = e).a = n, Mo[t] = e;\n      }\n\n      return e;\n    }\n\n    function Uo(t, e) {\n      t && t.log(Po, e, void 0);\n    }\n\n    function qo(t) {\n      this.f = t;\n    }\n\n    function Vo(t) {\n      nn.call(this), this.u = t, this.readyState = Bo, this.status = 0, this.responseType = this.responseText = this.response = this.statusText = \"\", this.onreadystatechange = null, this.i = new Headers(), this.b = null, this.o = \"GET\", this.g = \"\", this.a = !1, this.h = Fo(\"goog.net.FetchXmlHttp\"), this.l = this.c = this.f = null;\n    }\n\n    S(qo, wo), qo.prototype.a = function () {\n      return new Vo(this.f);\n    }, qo.prototype.b = (xo = {}, function () {\n      return xo;\n    }), S(Vo, nn);\n    var Bo = 0;\n\n    function jo(t) {\n      t.c.read().then(t.bc.bind(t)).catch(t.Ma.bind(t));\n    }\n\n    function Wo(t, e) {\n      e && t.f && (t.status = t.f.status, t.statusText = t.f.statusText), t.readyState = 4, t.f = null, t.c = null, t.l = null, Ko(t);\n    }\n\n    function Ko(t) {\n      t.onreadystatechange && t.onreadystatechange.call(t);\n    }\n\n    function Qo(t) {\n      nn.call(this), this.headers = new ln(), this.D = t || null, this.c = !1, this.A = this.a = null, this.h = this.N = this.l = \"\", this.f = this.I = this.i = this.G = !1, this.g = 0, this.u = null, this.o = Ho, this.v = this.O = !1;\n    }\n\n    (t = Vo.prototype).open = function (t, e) {\n      if (this.readyState != Bo) throw this.abort(), Error(\"Error reopening a connection\");\n      this.o = t, this.g = e, this.readyState = 1, Ko(this);\n    }, t.send = function (t) {\n      if (1 != this.readyState) throw this.abort(), Error(\"need to call open() first. \");\n      this.a = !0;\n      var e = {\n        headers: this.i,\n        method: this.o,\n        credentials: void 0,\n        cache: void 0\n      };\n      t && (e.body = t), this.u.fetch(new Request(this.g, e)).then(this.gc.bind(this), this.Ma.bind(this));\n    }, t.abort = function () {\n      this.response = this.responseText = \"\", this.i = new Headers(), this.status = 0, this.c && this.c.cancel(\"Request was aborted.\"), 1 <= this.readyState && this.a && 4 != this.readyState && (this.a = !1, Wo(this, !1)), this.readyState = Bo;\n    }, t.gc = function (t) {\n      this.a && (this.f = t, this.b || (this.b = t.headers, this.readyState = 2, Ko(this)), this.a && (this.readyState = 3, Ko(this), this.a && (\"arraybuffer\" === this.responseType ? t.arrayBuffer().then(this.ec.bind(this), this.Ma.bind(this)) : void 0 !== l.ReadableStream && \"body\" in t ? (this.response = this.responseText = \"\", this.c = t.body.getReader(), this.l = new TextDecoder(), jo(this)) : t.text().then(this.fc.bind(this), this.Ma.bind(this)))));\n    }, t.bc = function (t) {\n      if (this.a) {\n        var e = this.l.decode(t.value ? t.value : new Uint8Array(0), {\n          stream: !t.done\n        });\n        e && (this.response = this.responseText += e), t.done ? Wo(this, !0) : Ko(this), 3 == this.readyState && jo(this);\n      }\n    }, t.fc = function (t) {\n      this.a && (this.response = this.responseText = t, Wo(this, !0));\n    }, t.ec = function (t) {\n      this.a && (this.response = t, Wo(this, !0));\n    }, t.Ma = function (t) {\n      var e = this.h;\n      e && e.log(Ro, \"Failed to fetch url \" + this.g, t instanceof Error ? t : Error(t)), this.a && Wo(this, !0);\n    }, t.setRequestHeader = function (t, e) {\n      this.i.append(t, e);\n    }, t.getResponseHeader = function (t) {\n      return this.b ? this.b.get(t.toLowerCase()) || \"\" : ((t = this.h) && t.log(Ro, \"Attempting to get response header but no headers have been received for url: \" + this.g, void 0), \"\");\n    }, t.getAllResponseHeaders = function () {\n      if (!this.b) {\n        var t = this.h;\n        return t && t.log(Ro, \"Attempting to get all response headers but no headers have been received for url: \" + this.g, void 0), \"\";\n      }\n\n      t = [];\n\n      for (var e = this.b.entries(), n = e.next(); !n.done;) {\n        n = n.value, t.push(n[0] + \": \" + n[1]), n = e.next();\n      }\n\n      return t.join(\"\\r\\n\");\n    }, S(Qo, nn);\n    var Ho = \"\";\n    Qo.prototype.b = Fo(\"goog.net.XhrIo\");\n    var Go = /^https?$/i,\n        zo = [\"POST\", \"PUT\"];\n\n    function Yo(e, t, n, r, i) {\n      if (e.a) throw Error(\"[goog.net.XhrIo] Object is active with another request=\" + e.l + \"; newUri=\" + t);\n      n = n ? n.toUpperCase() : \"GET\", e.l = t, e.h = \"\", e.N = n, e.G = !1, e.c = !0, e.a = e.D ? e.D.a() : yo.a(), e.A = e.D ? _o(e.D) : _o(yo), e.a.onreadystatechange = _(e.Jb, e);\n\n      try {\n        Uo(e.b, ia(e, \"Opening Xhr\")), e.I = !0, e.a.open(n, String(t), !0), e.I = !1;\n      } catch (t) {\n        return Uo(e.b, ia(e, \"Error opening Xhr: \" + t.message)), void Jo(e, t);\n      }\n\n      t = r || \"\";\n      var o,\n          a = new ln(e.headers);\n      i && function (t, e) {\n        if (t.forEach && \"function\" == typeof t.forEach) t.forEach(e, void 0);else if (y(t) || h(t)) L(t, e, void 0);else for (var n = hn(t), r = cn(t), i = r.length, o = 0; o < i; o++) {\n          e.call(void 0, r[o], n && n[o], t);\n        }\n      }(i, function (t, e) {\n        a.set(e, t);\n      }), i = function (t) {\n        t: {\n          for (var e = Xo, n = t.length, r = h(t) ? t.split(\"\") : t, i = 0; i < n; i++) {\n            if (i in r && e.call(void 0, r[i], i, t)) {\n              e = i;\n              break t;\n            }\n          }\n\n          e = -1;\n        }\n\n        return e < 0 ? null : h(t) ? t.charAt(e) : t[e];\n      }(a.U()), r = l.FormData && t instanceof l.FormData, !q(zo, n) || i || r || a.set(\"Content-Type\", \"application/x-www-form-urlencoded;charset=utf-8\"), a.forEach(function (t, e) {\n        this.a.setRequestHeader(e, t);\n      }, e), e.o && (e.a.responseType = e.o), \"withCredentials\" in e.a && e.a.withCredentials !== e.O && (e.a.withCredentials = e.O);\n\n      try {\n        ea(e), 0 < e.g && (e.v = (o = e.a, me && Ne(9) && \"number\" == typeof o.timeout && void 0 !== o.ontimeout), Uo(e.b, ia(e, \"Will abort after \" + e.g + \"ms if incomplete, xhr2 \" + e.v)), e.v ? (e.a.timeout = e.g, e.a.ontimeout = _(e.Ga, e)) : e.u = sn(e.Ga, e.g, e)), Uo(e.b, ia(e, \"Sending request\")), e.i = !0, e.a.send(t), e.i = !1;\n      } catch (t) {\n        Uo(e.b, ia(e, \"Send error: \" + t.message)), Jo(e, t);\n      }\n    }\n\n    function Xo(t) {\n      return \"content-type\" == t.toLowerCase();\n    }\n\n    function Jo(t, e) {\n      t.c = !1, t.a && (t.f = !0, t.a.abort(), t.f = !1), t.h = e, $o(t), ta(t);\n    }\n\n    function $o(t) {\n      t.G || (t.G = !0, t.dispatchEvent(\"complete\"), t.dispatchEvent(\"error\"));\n    }\n\n    function Zo(e) {\n      if (e.c && void 0 !== u) if (e.A[1] && 4 == na(e) && 2 == ra(e)) Uo(e.b, ia(e, \"Local request error detected and ignored\"));else if (e.i && 4 == na(e)) sn(e.Jb, 0, e);else if (e.dispatchEvent(\"readystatechange\"), 4 == na(e)) {\n        Uo(e.b, ia(e, \"Request complete\")), e.c = !1;\n\n        try {\n          var t,\n              n = ra(e);\n\n          t: switch (n) {\n            case 200:\n            case 201:\n            case 202:\n            case 204:\n            case 206:\n            case 304:\n            case 1223:\n              var r = !0;\n              break t;\n\n            default:\n              r = !1;\n          }\n\n          if (!(t = r)) {\n            var i;\n\n            if (i = 0 === n) {\n              var o = String(e.l).match(dn)[1] || null;\n\n              if (!o && l.self && l.self.location) {\n                var a = l.self.location.protocol;\n                o = a.substr(0, a.length - 1);\n              }\n\n              i = !Go.test(o ? o.toLowerCase() : \"\");\n            }\n\n            t = i;\n          }\n\n          if (t) e.dispatchEvent(\"complete\"), e.dispatchEvent(\"success\");else {\n            try {\n              var s = 2 < na(e) ? e.a.statusText : \"\";\n            } catch (t) {\n              Uo(e.b, \"Can not get status: \" + t.message), s = \"\";\n            }\n\n            e.h = s + \" [\" + ra(e) + \"]\", $o(e);\n          }\n        } finally {\n          ta(e);\n        }\n      }\n    }\n\n    function ta(e, t) {\n      if (e.a) {\n        ea(e);\n        var n = e.a,\n            r = e.A[0] ? s : null;\n        e.a = null, e.A = null, t || e.dispatchEvent(\"ready\");\n\n        try {\n          n.onreadystatechange = r;\n        } catch (t) {\n          (e = e.b) && e.log(Do, \"Problem encountered resetting onreadystatechange: \" + t.message, void 0);\n        }\n      }\n    }\n\n    function ea(t) {\n      t.a && t.v && (t.a.ontimeout = null), t.u && (l.clearTimeout(t.u), t.u = null);\n    }\n\n    function na(t) {\n      return t.a ? t.a.readyState : 0;\n    }\n\n    function ra(t) {\n      try {\n        return 2 < na(t) ? t.a.status : -1;\n      } catch (t) {\n        return -1;\n      }\n    }\n\n    function ia(t, e) {\n      return e + \" [\" + t.N + \" \" + t.l + \" \" + ra(t) + \"]\";\n    }\n\n    function oa(t) {\n      var e = ma;\n      this.g = [], this.v = e, this.u = t || null, this.f = this.a = !1, this.c = void 0, this.l = this.A = this.i = !1, this.h = 0, this.b = null, this.m = 0;\n    }\n\n    function aa(t, e, n) {\n      t.a = !0, t.c = n, t.f = !e, ha(t);\n    }\n\n    function sa(t) {\n      if (t.a) {\n        if (!t.l) throw new la(t);\n        t.l = !1;\n      }\n    }\n\n    function ua(t, e, n, r) {\n      t.g.push([e, n, r]), t.a && ha(t);\n    }\n\n    function ca(t) {\n      return U(t.g, function (t) {\n        return m(t[1]);\n      });\n    }\n\n    function ha(e) {\n      if (e.h && e.a && ca(e)) {\n        var n = e.h,\n            r = da[n];\n        r && (l.clearTimeout(r.a), delete da[n]), e.h = 0;\n      }\n\n      e.b && (e.b.m--, delete e.b), n = e.c;\n\n      for (var t = r = !1; e.g.length && !e.i;) {\n        var i = e.g.shift(),\n            o = i[0],\n            a = i[1];\n        if (i = i[2], o = e.f ? a : o) try {\n          var s = o.call(i || e.u, n);\n          void 0 !== s && (e.f = e.f && (s == n || s instanceof Error), e.c = n = s), (I(n) || \"function\" == typeof l.Promise && n instanceof l.Promise) && (t = !0, e.i = !0);\n        } catch (t) {\n          n = t, e.f = !0, ca(e) || (r = !0);\n        }\n      }\n\n      e.c = n, t && (s = _(e.o, e, !0), t = _(e.o, e, !1), n instanceof oa ? (ua(n, s, t), n.A = !0) : n.then(s, t)), r && (n = new pa(n), da[n.a] = n, e.h = n.a);\n    }\n\n    function la() {\n      C.call(this);\n    }\n\n    function fa() {\n      C.call(this);\n    }\n\n    function pa(t) {\n      this.a = l.setTimeout(_(this.c, this), 0), this.b = t;\n    }\n\n    (t = Qo.prototype).Ga = function () {\n      void 0 !== u && this.a && (this.h = \"Timed out after \" + this.g + \"ms, aborting\", Uo(this.b, ia(this, this.h)), this.dispatchEvent(\"timeout\"), this.abort(8));\n    }, t.abort = function () {\n      this.a && this.c && (Uo(this.b, ia(this, \"Aborting\")), this.c = !1, this.f = !0, this.a.abort(), this.f = !1, this.dispatchEvent(\"complete\"), this.dispatchEvent(\"abort\"), ta(this));\n    }, t.va = function () {\n      this.a && (this.c && (this.c = !1, this.f = !0, this.a.abort(), this.f = !1), ta(this, !0)), Qo.qb.va.call(this);\n    }, t.Jb = function () {\n      this.qa || (this.I || this.i || this.f ? Zo(this) : this.vc());\n    }, t.vc = function () {\n      Zo(this);\n    }, t.getResponse = function () {\n      try {\n        if (!this.a) return null;\n        if (\"response\" in this.a) return this.a.response;\n\n        switch (this.o) {\n          case Ho:\n          case \"text\":\n            return this.a.responseText;\n\n          case \"arraybuffer\":\n            if (\"mozResponseArrayBuffer\" in this.a) return this.a.mozResponseArrayBuffer;\n        }\n\n        var t = this.b;\n        return t && t.log(Do, \"Response type \" + this.o + \" is not supported on this browser\", void 0), null;\n      } catch (t) {\n        return Uo(this.b, \"Can not get response: \" + t.message), null;\n      }\n    }, oa.prototype.cancel = function (t) {\n      if (this.a) this.c instanceof oa && this.c.cancel();else {\n        if (this.b) {\n          var e = this.b;\n          delete this.b, t ? e.cancel(t) : (e.m--, e.m <= 0 && e.cancel());\n        }\n\n        this.v ? this.v.call(this.u, this) : this.l = !0, this.a || (t = new fa(this), sa(this), aa(this, !1, t));\n      }\n    }, oa.prototype.o = function (t, e) {\n      this.i = !1, aa(this, t, e);\n    }, oa.prototype.then = function (t, e, n) {\n      var r,\n          i,\n          o = new jt(function (t, e) {\n        r = t, i = e;\n      });\n      return ua(this, r, function (t) {\n        t instanceof fa ? o.cancel() : i(t);\n      }), o.then(t, e, n);\n    }, oa.prototype.$goog_Thenable = !0, S(la, C), la.prototype.message = \"Deferred has already fired\", la.prototype.name = \"AlreadyCalledError\", S(fa, C), fa.prototype.message = \"Deferred was canceled\", fa.prototype.name = \"CanceledError\", pa.prototype.c = function () {\n      throw delete da[this.a], this.b;\n    };\n    var da = {};\n\n    function ya(t) {\n      var e,\n          n,\n          r,\n          i,\n          o,\n          a = document,\n          s = et(t).toString(),\n          u = document.createElement(\"SCRIPT\"),\n          c = {\n        Lb: u,\n        Ga: void 0\n      },\n          h = new oa(c);\n      return e = window.setTimeout(function () {\n        ga(u, !0);\n        var t = new wa(ba, \"Timeout reached for loading script \" + s);\n        sa(h), aa(h, !1, t);\n      }, 5e3), c.Ga = e, u.onload = u.onreadystatechange = function () {\n        u.readyState && \"loaded\" != u.readyState && \"complete\" != u.readyState || (ga(u, !1, e), sa(h), aa(h, !0, null));\n      }, u.onerror = function () {\n        ga(u, !0, e);\n        var t = new wa(va, \"Error while loading script \" + s);\n        sa(h), aa(h, !1, t);\n      }, z(c = {}, {\n        type: \"text/javascript\",\n        charset: \"UTF-8\"\n      }), Bn(u, c), r = t, x(n = u, \"HTMLScriptElement\"), n.src = et(r), null === p && (p = (r = (r = l.document).querySelector && r.querySelector(\"script[nonce]\")) && (r = r.nonce || r.getAttribute(\"nonce\")) && f.test(r) ? r : \"\"), (r = p) && n.setAttribute(\"nonce\", r), (i = a, (o = (i || document).getElementsByTagName(\"HEAD\")) && 0 != o.length ? o[0] : i.documentElement).appendChild(u), h;\n    }\n\n    function ma() {\n      if (this && this.Lb) {\n        var t = this.Lb;\n        t && \"SCRIPT\" == t.tagName && ga(t, !0, this.Ga);\n      }\n    }\n\n    function ga(t, e, n) {\n      null != n && l.clearTimeout(n), t.onload = s, t.onerror = s, t.onreadystatechange = s, e && window.setTimeout(function () {\n        t && t.parentNode && t.parentNode.removeChild(t);\n      }, 0);\n    }\n\n    var va = 0,\n        ba = 1;\n\n    function wa(t, e) {\n      var n = \"Jsloader error (code #\" + t + \")\";\n      e && (n += \": \" + e), C.call(this, n), this.code = t;\n    }\n\n    function _a(t) {\n      this.f = t;\n    }\n\n    function Ea(t, e, n) {\n      if (this.b = t, t = e || {}, this.i = t.secureTokenEndpoint || \"https://securetoken.googleapis.com/v1/token\", this.m = t.secureTokenTimeout || Ia, this.f = H(t.secureTokenHeaders || Ca), this.g = t.firebaseEndpoint || \"https://www.googleapis.com/identitytoolkit/v3/relyingparty/\", this.h = t.firebaseTimeout || Na, this.a = H(t.firebaseHeaders || Aa), n && (this.a[\"X-Client-Version\"] = n, this.f[\"X-Client-Version\"] = n), n = \"Node\" == ur(), !(n = l.XMLHttpRequest || n && Jh.INTERNAL.node && Jh.INTERNAL.node.XMLHttpRequest) && !sr()) throw new Yr(\"internal-error\", \"The XMLHttpRequest compatibility library was not found.\");\n      this.c = void 0, sr() ? this.c = new qo(self) : cr() ? this.c = new _a(n) : this.c = new So();\n    }\n\n    S(wa, C), S(_a, wo), _a.prototype.a = function () {\n      return new this.f();\n    }, _a.prototype.b = function () {\n      return {};\n    };\n    var Ta,\n        Sa = \"idToken\",\n        Ia = new Ar(3e4, 6e4),\n        Ca = {\n      \"Content-Type\": \"application/x-www-form-urlencoded\"\n    },\n        Na = new Ar(3e4, 6e4),\n        Aa = {\n      \"Content-Type\": \"application/json\"\n    };\n\n    function ka(t, e) {\n      e ? t.a[\"X-Firebase-Locale\"] = e : delete t.a[\"X-Firebase-Locale\"];\n    }\n\n    function Da(t, e) {\n      e ? (t.a[\"X-Client-Version\"] = e, t.f[\"X-Client-Version\"] = e) : (delete t.a[\"X-Client-Version\"], delete t.f[\"X-Client-Version\"]);\n    }\n\n    function Ra(t, e, n, r, i, o, a) {\n      var s;\n      (t = !((s = fr(s = yr()) != lr ? null : (s = s.match(/\\sChrome\\/(\\d+)/i)) && 2 == s.length ? parseInt(s[1], 10) : null) && s < 30 || me && Ie && !(9 < Ie)) || sr() ? _(t.o, t) : (Ta || (Ta = new jt(function (t, e) {\n        !function (t, e) {\n          if (((window.gapi || {}).client || {}).request) t();else {\n            l[Pa] = function () {\n              ((window.gapi || {}).client || {}).request ? t() : e(Error(\"CORS_UNSUPPORTED\"));\n            };\n\n            var n = nt(Oa, {\n              onload: Pa\n            });\n            ua(ya(n), null, function () {\n              e(Error(\"CORS_UNSUPPORTED\"));\n            }, void 0);\n          }\n        }(t, e);\n      })), _(t.l, t)))(e, n, r, i, o, a);\n    }\n\n    Ea.prototype.o = function (t, n, e, r, i, o) {\n      if (sr() && (void 0 === l.fetch || void 0 === l.Headers || void 0 === l.Request)) throw new Yr(\"operation-not-supported-in-this-environment\", \"fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.\");\n      var a = new Qo(this.c);\n\n      if (o) {\n        a.g = Math.max(0, o);\n        var s = setTimeout(function () {\n          a.dispatchEvent(\"timeout\");\n        }, o);\n      }\n\n      rn(a, \"complete\", function () {\n        s && clearTimeout(s);\n        var e = null;\n\n        try {\n          e = JSON.parse(function (e) {\n            try {\n              return e.a ? e.a.responseText : \"\";\n            } catch (t) {\n              return Uo(e.b, \"Can not get responseText: \" + t.message), \"\";\n            }\n          }(this)) || null;\n        } catch (t) {\n          e = null;\n        }\n\n        n && n(e);\n      }), on(a, \"ready\", function () {\n        s && clearTimeout(s), le(this);\n      }), on(a, \"timeout\", function () {\n        s && clearTimeout(s), le(this), n && n(null);\n      }), Yo(a, t, e, r, i);\n    };\n\n    var Oa = new Y($, \"https://apis.google.com/js/client.js?onload=%{onload}\"),\n        Pa = \"__fcb\" + Math.floor(1e6 * Math.random()).toString();\n\n    function xa(t) {\n      if (!h(t = t.email) || !rr.test(t)) throw new Yr(\"invalid-email\");\n    }\n\n    function Ma(t) {\n      \"email\" in t && xa(t);\n    }\n\n    function La(t) {\n      if (!t[Sa]) throw new Yr(\"internal-error\");\n    }\n\n    function Fa(t) {\n      if (t.phoneNumber || t.temporaryProof) {\n        if (!t.phoneNumber || !t.temporaryProof) throw new Yr(\"internal-error\");\n      } else {\n        if (!t.sessionInfo) throw new Yr(\"missing-verification-id\");\n        if (!t.code) throw new Yr(\"missing-verification-code\");\n      }\n    }\n\n    Ea.prototype.l = function (t, n, r, i, o) {\n      var a = this;\n      Ta.then(function () {\n        window.gapi.client.setApiKey(a.b);\n        var e = window.gapi.auth.getToken();\n        window.gapi.auth.setToken(null), window.gapi.client.request({\n          path: t,\n          method: r,\n          body: i,\n          headers: o,\n          authType: \"none\",\n          callback: function callback(t) {\n            window.gapi.auth.setToken(e), n && n(t);\n          }\n        });\n      }).s(function (t) {\n        n && n({\n          error: {\n            message: t && t.message || \"CORS_UNSUPPORTED\"\n          }\n        });\n      });\n    }, Ea.prototype.ob = function () {\n      return bs(this, hs, {});\n    }, Ea.prototype.rb = function (t, e) {\n      return bs(this, us, {\n        idToken: t,\n        email: e\n      });\n    }, Ea.prototype.sb = function (t, e) {\n      return bs(this, cs, {\n        idToken: t,\n        password: e\n      });\n    };\n    var Ua = {\n      displayName: \"DISPLAY_NAME\",\n      photoUrl: \"PHOTO_URL\"\n    };\n\n    function qa(t) {\n      if (!t.requestUri || !t.sessionId && !t.postBody && !t.pendingToken) throw new Yr(\"internal-error\");\n    }\n\n    function Va(t, e) {\n      return e.oauthIdToken && e.providerId && 0 == e.providerId.indexOf(\"oidc.\") && !e.pendingToken && (t.sessionId ? e.nonce = t.sessionId : t.postBody && Mn(t = new Rn(t.postBody), \"nonce\") && (e.nonce = t.get(\"nonce\"))), e;\n    }\n\n    function Ba(t) {\n      var e = null;\n      if (t.needConfirmation ? (t.code = \"account-exists-with-different-credential\", e = bo(t)) : \"FEDERATED_USER_ID_ALREADY_LINKED\" == t.errorMessage ? (t.code = \"credential-already-in-use\", e = bo(t)) : \"EMAIL_EXISTS\" == t.errorMessage ? (t.code = \"email-already-in-use\", e = bo(t)) : t.errorMessage && (e = ws(t.errorMessage)), e) throw e;\n      if (!t[Sa]) throw new Yr(\"internal-error\");\n    }\n\n    function ja(t, e) {\n      return e.returnIdpCredential = !0, bs(t, ls, e);\n    }\n\n    function Wa(t, e) {\n      return e.returnIdpCredential = !0, bs(t, ps, e);\n    }\n\n    function Ka(t, e) {\n      return e.returnIdpCredential = !0, e.autoCreate = !1, bs(t, fs, e);\n    }\n\n    function Qa(t) {\n      if (!t.oobCode) throw new Yr(\"invalid-action-code\");\n    }\n\n    (t = Ea.prototype).tb = function (t, r) {\n      var i = {\n        idToken: t\n      },\n          o = [];\n      return K(Ua, function (t, e) {\n        var n = r[e];\n        null === n ? o.push(t) : e in r && (i[e] = n);\n      }), o.length && (i.deleteAttribute = o), bs(this, us, i);\n    }, t.lb = function (t, e) {\n      return z(t = {\n        requestType: \"PASSWORD_RESET\",\n        email: t\n      }, e), bs(this, rs, t);\n    }, t.mb = function (t, e) {\n      return z(t = {\n        requestType: \"EMAIL_SIGNIN\",\n        email: t\n      }, e), bs(this, es, t);\n    }, t.kb = function (t, e) {\n      return z(t = {\n        requestType: \"VERIFY_EMAIL\",\n        idToken: t\n      }, e), bs(this, ns, t);\n    }, t.Va = function (t) {\n      return bs(this, ms, t);\n    }, t.$a = function (t, e) {\n      return bs(this, as, {\n        oobCode: t,\n        newPassword: e\n      });\n    }, t.Ka = function (t) {\n      return bs(this, Ga, {\n        oobCode: t\n      });\n    }, t.Xa = function (t) {\n      return bs(this, Ha, {\n        oobCode: t\n      });\n    };\n    var Ha = {\n      endpoint: \"setAccountInfo\",\n      C: Qa,\n      da: \"email\"\n    },\n        Ga = {\n      endpoint: \"resetPassword\",\n      C: Qa,\n      J: function J(t) {\n        var e = t.requestType;\n        if (!e || !t.email && \"EMAIL_SIGNIN\" != e) throw new Yr(\"internal-error\");\n      }\n    },\n        za = {\n      endpoint: \"signupNewUser\",\n      C: function C(t) {\n        if (xa(t), !t.password) throw new Yr(\"weak-password\");\n      },\n      J: La,\n      R: !0\n    },\n        Ya = {\n      endpoint: \"createAuthUri\"\n    },\n        Xa = {\n      endpoint: \"deleteAccount\",\n      T: [\"idToken\"]\n    },\n        Ja = {\n      endpoint: \"setAccountInfo\",\n      T: [\"idToken\", \"deleteProvider\"],\n      C: function C(t) {\n        if (!d(t.deleteProvider)) throw new Yr(\"internal-error\");\n      }\n    },\n        $a = {\n      endpoint: \"emailLinkSignin\",\n      T: [\"email\", \"oobCode\"],\n      C: xa,\n      J: La,\n      R: !0\n    },\n        Za = {\n      endpoint: \"emailLinkSignin\",\n      T: [\"idToken\", \"email\", \"oobCode\"],\n      C: xa,\n      J: La,\n      R: !0\n    },\n        ts = {\n      endpoint: \"getAccountInfo\"\n    },\n        es = {\n      endpoint: \"getOobConfirmationCode\",\n      T: [\"requestType\"],\n      C: function C(t) {\n        if (\"EMAIL_SIGNIN\" != t.requestType) throw new Yr(\"internal-error\");\n        xa(t);\n      },\n      da: \"email\"\n    },\n        ns = {\n      endpoint: \"getOobConfirmationCode\",\n      T: [\"idToken\", \"requestType\"],\n      C: function C(t) {\n        if (\"VERIFY_EMAIL\" != t.requestType) throw new Yr(\"internal-error\");\n      },\n      da: \"email\"\n    },\n        rs = {\n      endpoint: \"getOobConfirmationCode\",\n      T: [\"requestType\"],\n      C: function C(t) {\n        if (\"PASSWORD_RESET\" != t.requestType) throw new Yr(\"internal-error\");\n        xa(t);\n      },\n      da: \"email\"\n    },\n        is = {\n      wb: !0,\n      endpoint: \"getProjectConfig\",\n      Ib: \"GET\"\n    },\n        os = {\n      wb: !0,\n      endpoint: \"getRecaptchaParam\",\n      Ib: \"GET\",\n      J: function J(t) {\n        if (!t.recaptchaSiteKey) throw new Yr(\"internal-error\");\n      }\n    },\n        as = {\n      endpoint: \"resetPassword\",\n      C: Qa,\n      da: \"email\"\n    },\n        ss = {\n      endpoint: \"sendVerificationCode\",\n      T: [\"phoneNumber\", \"recaptchaToken\"],\n      da: \"sessionInfo\"\n    },\n        us = {\n      endpoint: \"setAccountInfo\",\n      T: [\"idToken\"],\n      C: Ma,\n      R: !0\n    },\n        cs = {\n      endpoint: \"setAccountInfo\",\n      T: [\"idToken\"],\n      C: function C(t) {\n        if (Ma(t), !t.password) throw new Yr(\"weak-password\");\n      },\n      J: La,\n      R: !0\n    },\n        hs = {\n      endpoint: \"signupNewUser\",\n      J: La,\n      R: !0\n    },\n        ls = {\n      endpoint: \"verifyAssertion\",\n      C: qa,\n      Qa: Va,\n      J: Ba,\n      R: !0\n    },\n        fs = {\n      endpoint: \"verifyAssertion\",\n      C: qa,\n      Qa: Va,\n      J: function J(t) {\n        if (t.errorMessage && \"USER_NOT_FOUND\" == t.errorMessage) throw new Yr(\"user-not-found\");\n        if (t.errorMessage) throw ws(t.errorMessage);\n        if (!t[Sa]) throw new Yr(\"internal-error\");\n      },\n      R: !0\n    },\n        ps = {\n      endpoint: \"verifyAssertion\",\n      C: function C(t) {\n        if (qa(t), !t.idToken) throw new Yr(\"internal-error\");\n      },\n      Qa: Va,\n      J: Ba,\n      R: !0\n    },\n        ds = {\n      endpoint: \"verifyCustomToken\",\n      C: function C(t) {\n        if (!t.token) throw new Yr(\"invalid-custom-token\");\n      },\n      J: La,\n      R: !0\n    },\n        ys = {\n      endpoint: \"verifyPassword\",\n      C: function C(t) {\n        if (xa(t), !t.password) throw new Yr(\"wrong-password\");\n      },\n      J: La,\n      R: !0\n    },\n        ms = {\n      endpoint: \"verifyPhoneNumber\",\n      C: Fa,\n      J: La\n    },\n        gs = {\n      endpoint: \"verifyPhoneNumber\",\n      C: function C(t) {\n        if (!t.idToken) throw new Yr(\"internal-error\");\n        Fa(t);\n      },\n      J: function J(t) {\n        if (t.temporaryProof) throw t.code = \"credential-already-in-use\", bo(t);\n        La(t);\n      }\n    },\n        vs = {\n      Vb: {\n        USER_NOT_FOUND: \"user-not-found\"\n      },\n      endpoint: \"verifyPhoneNumber\",\n      C: Fa,\n      J: La\n    };\n\n    function bs(t, e, n) {\n      if (!function (t, e) {\n        if (!e || !e.length) return !0;\n        if (!t) return !1;\n\n        for (var n = 0; n < e.length; n++) {\n          var r = t[e[n]];\n          if (null == r || \"\" === r) return !1;\n        }\n\n        return !0;\n      }(n, e.T)) return Xt(new Yr(\"internal-error\"));\n      var r,\n          i = e.Ib || \"POST\";\n      return Yt(n).then(e.C).then(function () {\n        return e.R && (n.returnSecureToken = !0), function (t, e, r, i, o, n) {\n          var a = _n(t.g + e);\n\n          bn(a, \"key\", t.b), n && bn(a, \"cb\", T().toString());\n          var s = \"GET\" == r;\n          if (s) for (var u in i) {\n            i.hasOwnProperty(u) && bn(a, u, i[u]);\n          }\n          return new jt(function (e, n) {\n            Ra(t, a.toString(), function (t) {\n              t ? t.error ? n(_s(t, o || {})) : e(t) : n(new Yr(\"network-request-failed\"));\n            }, r, s ? void 0 : Qn(Tr(i)), t.a, t.h.get());\n          });\n        }(t, e.endpoint, i, n, e.Vb, e.wb || !1);\n      }).then(function (t) {\n        return r = t, e.Qa ? e.Qa(n, r) : r;\n      }).then(e.J).then(function () {\n        if (!e.da) return r;\n        if (!(e.da in r)) throw new Yr(\"internal-error\");\n        return r[e.da];\n      });\n    }\n\n    function ws(t) {\n      return _s({\n        error: {\n          errors: [{\n            message: t\n          }],\n          code: 400,\n          message: t\n        }\n      });\n    }\n\n    function _s(t, e) {\n      var n = (t.error && t.error.errors && t.error.errors[0] || {}).reason || \"\",\n          r = {\n        keyInvalid: \"invalid-api-key\",\n        ipRefererBlocked: \"app-not-authorized\"\n      };\n      if (n = r[n] ? new Yr(r[n]) : null) return n;\n\n      for (var i in n = t.error && t.error.message || \"\", z(r = {\n        INVALID_CUSTOM_TOKEN: \"invalid-custom-token\",\n        CREDENTIAL_MISMATCH: \"custom-token-mismatch\",\n        MISSING_CUSTOM_TOKEN: \"internal-error\",\n        INVALID_IDENTIFIER: \"invalid-email\",\n        MISSING_CONTINUE_URI: \"internal-error\",\n        INVALID_EMAIL: \"invalid-email\",\n        INVALID_PASSWORD: \"wrong-password\",\n        USER_DISABLED: \"user-disabled\",\n        MISSING_PASSWORD: \"internal-error\",\n        EMAIL_EXISTS: \"email-already-in-use\",\n        PASSWORD_LOGIN_DISABLED: \"operation-not-allowed\",\n        INVALID_IDP_RESPONSE: \"invalid-credential\",\n        INVALID_PENDING_TOKEN: \"invalid-credential\",\n        FEDERATED_USER_ID_ALREADY_LINKED: \"credential-already-in-use\",\n        MISSING_OR_INVALID_NONCE: \"missing-or-invalid-nonce\",\n        INVALID_MESSAGE_PAYLOAD: \"invalid-message-payload\",\n        INVALID_RECIPIENT_EMAIL: \"invalid-recipient-email\",\n        INVALID_SENDER: \"invalid-sender\",\n        EMAIL_NOT_FOUND: \"user-not-found\",\n        RESET_PASSWORD_EXCEED_LIMIT: \"too-many-requests\",\n        EXPIRED_OOB_CODE: \"expired-action-code\",\n        INVALID_OOB_CODE: \"invalid-action-code\",\n        MISSING_OOB_CODE: \"internal-error\",\n        INVALID_PROVIDER_ID: \"invalid-provider-id\",\n        CREDENTIAL_TOO_OLD_LOGIN_AGAIN: \"requires-recent-login\",\n        INVALID_ID_TOKEN: \"invalid-user-token\",\n        TOKEN_EXPIRED: \"user-token-expired\",\n        USER_NOT_FOUND: \"user-token-expired\",\n        CORS_UNSUPPORTED: \"cors-unsupported\",\n        DYNAMIC_LINK_NOT_ACTIVATED: \"dynamic-link-not-activated\",\n        INVALID_APP_ID: \"invalid-app-id\",\n        TOO_MANY_ATTEMPTS_TRY_LATER: \"too-many-requests\",\n        WEAK_PASSWORD: \"weak-password\",\n        OPERATION_NOT_ALLOWED: \"operation-not-allowed\",\n        USER_CANCELLED: \"user-cancelled\",\n        CAPTCHA_CHECK_FAILED: \"captcha-check-failed\",\n        INVALID_APP_CREDENTIAL: \"invalid-app-credential\",\n        INVALID_CODE: \"invalid-verification-code\",\n        INVALID_PHONE_NUMBER: \"invalid-phone-number\",\n        INVALID_SESSION_INFO: \"invalid-verification-id\",\n        INVALID_TEMPORARY_PROOF: \"invalid-credential\",\n        MISSING_APP_CREDENTIAL: \"missing-app-credential\",\n        MISSING_CODE: \"missing-verification-code\",\n        MISSING_PHONE_NUMBER: \"missing-phone-number\",\n        MISSING_SESSION_INFO: \"missing-verification-id\",\n        QUOTA_EXCEEDED: \"quota-exceeded\",\n        SESSION_EXPIRED: \"code-expired\",\n        REJECTED_CREDENTIAL: \"rejected-credential\",\n        INVALID_CONTINUE_URI: \"invalid-continue-uri\",\n        MISSING_ANDROID_PACKAGE_NAME: \"missing-android-pkg-name\",\n        MISSING_IOS_BUNDLE_ID: \"missing-ios-bundle-id\",\n        UNAUTHORIZED_DOMAIN: \"unauthorized-continue-uri\",\n        INVALID_DYNAMIC_LINK_DOMAIN: \"invalid-dynamic-link-domain\",\n        INVALID_OAUTH_CLIENT_ID: \"invalid-oauth-client-id\",\n        INVALID_CERT_HASH: \"invalid-cert-hash\",\n        ADMIN_ONLY_OPERATION: \"admin-restricted-operation\"\n      }, e || {}), e = (e = n.match(/^[^\\s]+\\s*:\\s*(.*)$/)) && 1 < e.length ? e[1] : void 0, r) {\n        if (0 === n.indexOf(i)) return new Yr(r[i], e);\n      }\n\n      return !e && t && (e = Er(t)), new Yr(\"internal-error\", e);\n    }\n\n    function Es(t) {\n      var o;\n      this.b = t, this.a = null, this.gb = (o = this, (Cs || (Cs = new jt(function (t, e) {\n        function n() {\n          Nr(), mr(\"gapi.load\")(\"gapi.iframes\", {\n            callback: t,\n            ontimeout: function ontimeout() {\n              Nr(), e(Error(\"Network Error\"));\n            },\n            timeout: Ss.get()\n          });\n        }\n\n        if (mr(\"gapi.iframes.Iframe\")) t();else if (mr(\"gapi.load\")) n();else {\n          var r = \"__iframefcb\" + Math.floor(1e6 * Math.random()).toString();\n          l[r] = function () {\n            mr(\"gapi.load\") ? n() : e(Error(\"Network Error\"));\n          }, Yt(ya(r = nt(Ts, {\n            onload: r\n          }))).s(function () {\n            e(Error(\"Network Error\"));\n          });\n        }\n      }).s(function (t) {\n        throw Cs = null, t;\n      }))).then(function () {\n        return new jt(function (r, i) {\n          mr(\"gapi.iframes.getContext\")().open({\n            where: document.body,\n            url: o.b,\n            messageHandlersFilter: mr(\"gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER\"),\n            attributes: {\n              style: {\n                position: \"absolute\",\n                top: \"-100px\",\n                width: \"1px\",\n                height: \"1px\"\n              }\n            },\n            dontclear: !0\n          }, function (t) {\n            function e() {\n              clearTimeout(n), r();\n            }\n\n            o.a = t, o.a.restyle({\n              setHideOnLeave: !1\n            });\n            var n = setTimeout(function () {\n              i(Error(\"Network Error\"));\n            }, Is.get());\n            t.ping(e).then(e, function () {\n              i(Error(\"Network Error\"));\n            });\n          });\n        });\n      }));\n    }\n\n    var Ts = new Y($, \"https://apis.google.com/js/api.js?onload=%{onload}\"),\n        Ss = new Ar(3e4, 6e4),\n        Is = new Ar(5e3, 15e3),\n        Cs = null;\n\n    function Ns(t, e, n) {\n      this.i = t, this.g = e, this.h = n, this.f = null, this.a = En(this.i, \"/__/auth/iframe\"), bn(this.a, \"apiKey\", this.g), bn(this.a, \"appName\", this.h), this.b = null, this.c = [];\n    }\n\n    function As(t, e, n, r, i) {\n      this.o = t, this.l = e, this.c = n, this.m = r, this.h = this.g = this.i = null, this.a = i, this.f = null;\n    }\n\n    function ks(t) {\n      try {\n        return Jh.app(t).auth().ya();\n      } catch (t) {\n        return [];\n      }\n    }\n\n    function Ds(t, e, n, r, i) {\n      this.l = t, this.f = e, this.b = n, this.c = r || null, this.h = i || null, this.o = this.u = this.v = null, this.g = [], this.m = this.a = null;\n    }\n\n    function Rs(t) {\n      var e,\n          s = Jn();\n      return (e = t, bs(e, is, {}).then(function (t) {\n        return t.authorizedDomains || [];\n      })).then(function (t) {\n        t: {\n          var e = _n(s),\n              n = e.f;\n\n          e = e.b;\n\n          for (var r = 0; r < t.length; r++) {\n            var i = t[r],\n                o = e,\n                a = n;\n\n            if (o = 0 == i.indexOf(\"chrome-extension://\") ? _n(i).b == o && \"chrome-extension\" == a : (\"http\" == a || \"https\" == a) && (nr.test(i) ? o == i : (i = i.split(\".\").join(\"\\\\.\"), new RegExp(\"^(.+\\\\.\" + i + \"|\" + i + \")$\", \"i\").test(o)))) {\n              t = !0;\n              break t;\n            }\n          }\n\n          t = !1;\n        }\n\n        if (!t) throw new go(Jn());\n      });\n    }\n\n    function Os(i) {\n      return i.m || (i.m = ir().then(function () {\n        if (!i.u) {\n          var t = i.c,\n              e = i.h,\n              n = ks(i.b),\n              r = new Ns(i.l, i.f, i.b);\n          r.f = t, r.b = e, r.c = W(n || []), i.u = r.toString();\n        }\n\n        i.i = new Es(i.u), function (r) {\n          if (!r.i) throw Error(\"IfcHandler must be initialized!\");\n          t = r.i, e = function e(t) {\n            var e = {};\n\n            if (t && t.authEvent) {\n              var n = !1;\n\n              for (t = fo(t.authEvent), e = 0; e < r.g.length; e++) {\n                n = r.g[e](t) || n;\n              }\n\n              return (e = {}).status = n ? \"ACK\" : \"ERROR\", Yt(e);\n            }\n\n            return e.status = \"ERROR\", Yt(e);\n          }, t.gb.then(function () {\n            t.a.register(\"authEvent\", e, mr(\"gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER\"));\n          });\n          var t, e;\n        }(i);\n      })), i.m;\n    }\n\n    function Ps(t) {\n      return t.o || (t.v = t.c ? dr(t.c, ks(t.b)) : null, t.o = new Ea(t.f, vi(t.h), t.v)), t.o;\n    }\n\n    function xs(t, e, n, r, i, o, a, s, u, c) {\n      return (t = new As(t, e, n, r, i)).i = o, t.g = a, t.h = s, t.b = H(u || null), t.f = c, t.toString();\n    }\n\n    function Ms(t) {\n      if (this.a = t || Jh.INTERNAL.reactNative && Jh.INTERNAL.reactNative.AsyncStorage, !this.a) throw new Yr(\"internal-error\", \"The React Native compatibility library was not found.\");\n      this.type = \"asyncStorage\";\n    }\n\n    function Ls(t) {\n      this.b = t, this.a = {}, this.c = _(this.f, this);\n    }\n\n    Ns.prototype.toString = function () {\n      return this.f ? bn(this.a, \"v\", this.f) : xn(this.a.a, \"v\"), this.b ? bn(this.a, \"eid\", this.b) : xn(this.a.a, \"eid\"), this.c.length ? bn(this.a, \"fw\", this.c.join(\",\")) : xn(this.a.a, \"fw\"), this.a.toString();\n    }, As.prototype.toString = function () {\n      var t = En(this.o, \"/__/auth/handler\");\n\n      if (bn(t, \"apiKey\", this.l), bn(t, \"appName\", this.c), bn(t, \"authType\", this.m), this.a.isOAuthProvider) {\n        var e = this.a;\n\n        try {\n          var n = Jh.app(this.c).auth().ea();\n        } catch (t) {\n          n = null;\n        }\n\n        for (var r in e.ab = n, bn(t, \"providerId\", this.a.providerId), n = Tr((e = this.a).zb)) {\n          n[r] = n[r].toString();\n        }\n\n        r = e.Cc, n = H(n);\n\n        for (var i = 0; i < r.length; i++) {\n          var o = r[i];\n          o in n && delete n[o];\n        }\n\n        e.eb && e.ab && !n[e.eb] && (n[e.eb] = e.ab), Q(n) || bn(t, \"customParameters\", Er(n));\n      }\n\n      if (\"function\" == typeof this.a.Fb && (e = this.a.Fb()).length && bn(t, \"scopes\", e.join(\",\")), this.i ? bn(t, \"redirectUrl\", this.i) : xn(t.a, \"redirectUrl\"), this.g ? bn(t, \"eventId\", this.g) : xn(t.a, \"eventId\"), this.h ? bn(t, \"v\", this.h) : xn(t.a, \"v\"), this.b) for (var a in this.b) {\n        this.b.hasOwnProperty(a) && !wn(t, a) && bn(t, a, this.b[a]);\n      }\n      return this.f ? bn(t, \"eid\", this.f) : xn(t.a, \"eid\"), (a = ks(this.c)).length && bn(t, \"fw\", a.join(\",\")), t.toString();\n    }, (t = Ds.prototype).Ea = function (e, n, t) {\n      var r = new Yr(\"popup-closed-by-user\"),\n          i = new Yr(\"web-storage-unsupported\"),\n          o = this,\n          a = !1;\n      return this.ga().then(function () {\n        var t, r;\n        (t = o, r = {\n          type: \"webStorageSupport\"\n        }, Os(t).then(function () {\n          return e = t.i, n = r, e.gb.then(function () {\n            return new jt(function (t) {\n              e.a.send(n.type, n, t, mr(\"gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER\"));\n            });\n          });\n          var e, n;\n        }).then(function (t) {\n          if (t && t.length && void 0 !== t[0].webStorageSupport) return t[0].webStorageSupport;\n          throw Error();\n        })).then(function (t) {\n          t || (e && tr(e), n(i), a = !0);\n        });\n      }).s(function () {}).then(function () {\n        if (!a) return n = e, new jt(function (e) {\n          return function t() {\n            un(2e3).then(function () {\n              if (n && !n.closed) return t();\n              e();\n            });\n          }();\n        });\n        var n;\n      }).then(function () {\n        if (!a) return un(t).then(function () {\n          n(r);\n        });\n      });\n    }, t.Mb = function () {\n      var t = yr();\n      return !_r(t) && !Cr(t);\n    }, t.Hb = function () {\n      return !1;\n    }, t.Db = function (e, t, n, r, i, o, a) {\n      if (!e) return Xt(new Yr(\"popup-blocked\"));\n      if (a && !_r()) return this.ga().s(function (t) {\n        tr(e), i(t);\n      }), r(), Yt();\n      this.a || (this.a = Rs(Ps(this)));\n      var s = this;\n      return this.a.then(function () {\n        var t = s.ga().s(function (t) {\n          throw tr(e), i(t), t;\n        });\n        return r(), t;\n      }).then(function () {\n        (ho(n), a) || $n(xs(s.l, s.f, s.b, t, n, null, o, s.c, void 0, s.h), e);\n      }).s(function (t) {\n        throw \"auth/network-request-failed\" == t.code && (s.a = null), t;\n      });\n    }, t.Ca = function (t, e, n) {\n      this.a || (this.a = Rs(Ps(this)));\n      var r = this;\n      return this.a.then(function () {\n        ho(e), $n(xs(r.l, r.f, r.b, t, e, Jn(), n, r.c, void 0, r.h));\n      }).s(function (t) {\n        throw \"auth/network-request-failed\" == t.code && (r.a = null), t;\n      });\n    }, t.ga = function () {\n      var t = this;\n      return Os(this).then(function () {\n        return t.i.gb;\n      }).s(function () {\n        throw t.a = null, new Yr(\"network-request-failed\");\n      });\n    }, t.Ob = function () {\n      return !0;\n    }, t.wa = function (t) {\n      this.g.push(t);\n    }, t.La = function (e) {\n      B(this.g, function (t) {\n        return t == e;\n      });\n    }, (t = Ms.prototype).get = function (t) {\n      return Yt(this.a.getItem(t)).then(function (t) {\n        return t && Sr(t);\n      });\n    }, t.set = function (t, e) {\n      return Yt(this.a.setItem(t, Er(e)));\n    }, t.P = function (t) {\n      return Yt(this.a.removeItem(t));\n    }, t.Y = function () {}, t.ca = function () {};\n    var Fs,\n        Us = [];\n\n    function qs(t) {\n      this.a = t;\n    }\n\n    function Vs(t) {\n      this.c = t, this.b = !1, this.a = [];\n    }\n\n    function Bs(r, t, e, n) {\n      var i,\n          o,\n          a,\n          s,\n          u = e || {},\n          c = null;\n      if (r.b) return Xt(Error(\"connection_unavailable\"));\n      var h = n ? 800 : 50,\n          l = \"undefined\" != typeof MessageChannel ? new MessageChannel() : null;\n      return new jt(function (e, n) {\n        l ? (i = Math.floor(Math.random() * Math.pow(10, 20)).toString(), l.port1.start(), a = setTimeout(function () {\n          n(Error(\"unsupported_event\"));\n        }, h), c = {\n          messageChannel: l,\n          onMessage: o = function o(t) {\n            t.data.eventId === i && (\"ack\" === t.data.status ? (clearTimeout(a), s = setTimeout(function () {\n              n(Error(\"timeout\"));\n            }, 3e3)) : \"done\" === t.data.status ? (clearTimeout(s), void 0 !== t.data.response ? e(t.data.response) : n(Error(\"unknown_error\"))) : (clearTimeout(a), clearTimeout(s), n(Error(\"invalid_response\"))));\n          }\n        }, r.a.push(c), l.port1.addEventListener(\"message\", o), r.c.postMessage({\n          eventType: t,\n          eventId: i,\n          data: u\n        }, [l.port2])) : n(Error(\"connection_unavailable\"));\n      }).then(function (t) {\n        return js(r, c), t;\n      }).s(function (t) {\n        throw js(r, c), t;\n      });\n    }\n\n    function js(t, e) {\n      if (e) {\n        var n = e.messageChannel,\n            r = e.onMessage;\n        n && (n.port1.removeEventListener(\"message\", r), n.port1.close()), B(t.a, function (t) {\n          return t == e;\n        });\n      }\n    }\n\n    function Ws() {\n      if (!Hs()) throw new Yr(\"web-storage-unsupported\");\n      this.c = {}, this.a = [], this.b = 0, this.l = l.indexedDB, this.type = \"indexedDB\", this.g = this.m = this.f = this.i = null, this.u = !1, this.h = null;\n      var t,\n          r = this;\n      sr() && self ? (this.m = function () {\n        var e = sr() ? self : null;\n\n        if (L(Us, function (t) {\n          t.b == e && (n = t);\n        }), !n) {\n          var n = new Ls(e);\n          Us.push(n);\n        }\n\n        return n;\n      }(), this.m.subscribe(\"keyChanged\", function (t, n) {\n        return Js(r).then(function (e) {\n          return 0 < e.length && L(r.a, function (t) {\n            t(e);\n          }), {\n            keyProcessed: q(e, n.key)\n          };\n        });\n      }), this.m.subscribe(\"ping\", function () {\n        return Yt([\"keyChanged\"]);\n      })) : (t = l.navigator, t && t.serviceWorker ? Yt().then(function () {\n        return t.serviceWorker.ready;\n      }).then(function (t) {\n        return t.active || null;\n      }).s(function () {\n        return null;\n      }) : Yt(null)).then(function (t) {\n        (r.h = t) && (r.g = new Vs(new qs(t)), Bs(r.g, \"ping\", null, !0).then(function (t) {\n          t[0].fulfilled && q(t[0].value, \"keyChanged\") && (r.u = !0);\n        }).s(function () {}));\n      });\n    }\n\n    function Ks(i) {\n      return new jt(function (e, n) {\n        var t = i.l.open(\"firebaseLocalStorageDb\", 1);\n        t.onerror = function (t) {\n          try {\n            t.preventDefault();\n          } catch (t) {}\n\n          n(Error(t.target.error));\n        }, t.onupgradeneeded = function (t) {\n          t = t.target.result;\n\n          try {\n            t.createObjectStore(\"firebaseLocalStorage\", {\n              keyPath: \"fbase_key\"\n            });\n          } catch (t) {\n            n(t);\n          }\n        }, t.onsuccess = function (t) {\n          var r;\n          (t = t.target.result).objectStoreNames.contains(\"firebaseLocalStorage\") ? e(t) : (r = i, new jt(function (t, e) {\n            var n = r.l.deleteDatabase(\"firebaseLocalStorageDb\");\n            n.onsuccess = function () {\n              t();\n            }, n.onerror = function (t) {\n              e(Error(t.target.error));\n            };\n          })).then(function () {\n            return Ks(i);\n          }).then(function (t) {\n            e(t);\n          }).s(function (t) {\n            n(t);\n          });\n        };\n      });\n    }\n\n    function Qs(t) {\n      return t.o || (t.o = Ks(t)), t.o;\n    }\n\n    function Hs() {\n      try {\n        return !!l.indexedDB;\n      } catch (t) {\n        return !1;\n      }\n    }\n\n    function Gs(t) {\n      return t.objectStore(\"firebaseLocalStorage\");\n    }\n\n    function zs(t, e) {\n      return t.transaction([\"firebaseLocalStorage\"], e ? \"readwrite\" : \"readonly\");\n    }\n\n    function Ys(t) {\n      return new jt(function (e, n) {\n        t.onsuccess = function (t) {\n          t && t.target ? e(t.target.result) : e();\n        }, t.onerror = function (t) {\n          n(t.target.error);\n        };\n      });\n    }\n\n    function Xs(t, e) {\n      return t.g && t.h && ((n = l.navigator) && n.serviceWorker && n.serviceWorker.controller || null) === t.h ? Bs(t.g, \"keyChanged\", {\n        key: e\n      }, t.u).then(function () {}).s(function () {}) : Yt();\n      var n;\n    }\n\n    function Js(r) {\n      return Qs(r).then(function (t) {\n        var i = Gs(zs(t, !1));\n        return i.getAll ? Ys(i.getAll()) : new jt(function (e, n) {\n          var r = [],\n              t = i.openCursor();\n          t.onsuccess = function (t) {\n            (t = t.target.result) ? (r.push(t.value), t.continue()) : e(r);\n          }, t.onerror = function (t) {\n            n(t.target.error);\n          };\n        });\n      }).then(function (t) {\n        var e = {},\n            n = [];\n\n        if (0 == r.b) {\n          for (n = 0; n < t.length; n++) {\n            e[t[n].fbase_key] = t[n].value;\n          }\n\n          n = function t(e, n) {\n            var r,\n                i = [];\n\n            for (r in e) {\n              r in n ? typeof e[r] != typeof n[r] ? i.push(r) : \"object\" == typeof e[r] && null != e[r] && null != n[r] ? 0 < t(e[r], n[r]).length && i.push(r) : e[r] !== n[r] && i.push(r) : i.push(r);\n            }\n\n            for (r in n) {\n              r in e || i.push(r);\n            }\n\n            return i;\n          }(r.c, e), r.c = e;\n        }\n\n        return n;\n      });\n    }\n\n    function $s(t) {\n      t.i && t.i.cancel(\"STOP_EVENT\"), t.f && (clearTimeout(t.f), t.f = null);\n    }\n\n    function Zs(t) {\n      var r = this,\n          i = null;\n      this.a = [], this.type = \"indexedDB\", this.c = t, this.b = Yt().then(function () {\n        if (Hs()) {\n          var e = Ir(),\n              n = \"__sak\" + e;\n          return Fs || (Fs = new Ws()), (i = Fs).set(n, e).then(function () {\n            return i.get(n);\n          }).then(function (t) {\n            if (t !== e) throw Error(\"indexedDB not supported!\");\n            return i.P(n);\n          }).then(function () {\n            return i;\n          }).s(function () {\n            return r.c;\n          });\n        }\n\n        return r.c;\n      }).then(function (t) {\n        return r.type = t.type, t.Y(function (e) {\n          L(r.a, function (t) {\n            t(e);\n          });\n        }), t;\n      });\n    }\n\n    function tu() {\n      this.a = {}, this.type = \"inMemory\";\n    }\n\n    function eu() {\n      if (!function () {\n        var t = \"Node\" == ur();\n        if (!(t = nu() || t && Jh.INTERNAL.node && Jh.INTERNAL.node.localStorage)) return !1;\n\n        try {\n          return t.setItem(\"__sak\", \"1\"), t.removeItem(\"__sak\"), !0;\n        } catch (t) {\n          return !1;\n        }\n      }()) {\n        if (\"Node\" == ur()) throw new Yr(\"internal-error\", \"The LocalStorage compatibility library was not found.\");\n        throw new Yr(\"web-storage-unsupported\");\n      }\n\n      this.a = nu() || Jh.INTERNAL.node.localStorage, this.type = \"localStorage\";\n    }\n\n    function nu() {\n      try {\n        var t = l.localStorage,\n            e = Ir();\n        return t && (t.setItem(e, \"1\"), t.removeItem(e)), t;\n      } catch (t) {\n        return null;\n      }\n    }\n\n    function ru() {\n      this.type = \"nullStorage\";\n    }\n\n    function iu() {\n      if (!function () {\n        var t = \"Node\" == ur();\n        if (!(t = ou() || t && Jh.INTERNAL.node && Jh.INTERNAL.node.sessionStorage)) return !1;\n\n        try {\n          return t.setItem(\"__sak\", \"1\"), t.removeItem(\"__sak\"), !0;\n        } catch (t) {\n          return !1;\n        }\n      }()) {\n        if (\"Node\" == ur()) throw new Yr(\"internal-error\", \"The SessionStorage compatibility library was not found.\");\n        throw new Yr(\"web-storage-unsupported\");\n      }\n\n      this.a = ou() || Jh.INTERNAL.node.sessionStorage, this.type = \"sessionStorage\";\n    }\n\n    function ou() {\n      try {\n        var t = l.sessionStorage,\n            e = Ir();\n        return t && (t.setItem(e, \"1\"), t.removeItem(e)), t;\n      } catch (t) {\n        return null;\n      }\n    }\n\n    function au() {\n      var t = {};\n      t.Browser = cu, t.Node = hu, t.ReactNative = lu, t.Worker = fu, this.a = t[ur()];\n    }\n\n    Ls.prototype.f = function (n) {\n      var r = n.data.eventType,\n          i = n.data.eventId,\n          t = this.a[r];\n\n      if (t && 0 < t.length) {\n        n.ports[0].postMessage({\n          status: \"ack\",\n          eventId: i,\n          eventType: r,\n          response: null\n        });\n        var e = [];\n        L(t, function (t) {\n          e.push(Yt().then(function () {\n            return t(n.origin, n.data.data);\n          }));\n        }), $t(e).then(function (t) {\n          var e = [];\n          L(t, function (t) {\n            e.push({\n              fulfilled: t.Eb,\n              value: t.value,\n              reason: t.reason ? t.reason.message : void 0\n            });\n          }), L(e, function (t) {\n            for (var e in t) {\n              void 0 === t[e] && delete t[e];\n            }\n          }), n.ports[0].postMessage({\n            status: \"done\",\n            eventId: i,\n            eventType: r,\n            response: e\n          });\n        });\n      }\n    }, Ls.prototype.subscribe = function (t, e) {\n      Q(this.a) && this.b.addEventListener(\"message\", this.c), void 0 === this.a[t] && (this.a[t] = []), this.a[t].push(e);\n    }, Ls.prototype.unsubscribe = function (t, e) {\n      void 0 !== this.a[t] && e ? (B(this.a[t], function (t) {\n        return t == e;\n      }), 0 == this.a[t].length && delete this.a[t]) : e || delete this.a[t], Q(this.a) && this.b.removeEventListener(\"message\", this.c);\n    }, qs.prototype.postMessage = function (t, e) {\n      this.a.postMessage(t, e);\n    }, Vs.prototype.close = function () {\n      for (; 0 < this.a.length;) {\n        js(this, this.a[0]);\n      }\n\n      this.b = !0;\n    }, (t = Ws.prototype).set = function (n, r) {\n      var i,\n          o = !1,\n          a = this;\n      return Qs(this).then(function (t) {\n        return Ys((t = Gs(zs(i = t, !0))).get(n));\n      }).then(function (t) {\n        var e = Gs(zs(i, !0));\n        return t ? (t.value = r, Ys(e.put(t))) : (a.b++, o = !0, (t = {}).fbase_key = n, t.value = r, Ys(e.add(t)));\n      }).then(function () {\n        return a.c[n] = r, Xs(a, n);\n      }).ia(function () {\n        o && a.b--;\n      });\n    }, t.get = function (e) {\n      return Qs(this).then(function (t) {\n        return Ys(Gs(zs(t, !1)).get(e));\n      }).then(function (t) {\n        return t && t.value;\n      });\n    }, t.P = function (e) {\n      var n = !1,\n          r = this;\n      return Qs(this).then(function (t) {\n        return n = !0, r.b++, Ys(Gs(zs(t, !0)).delete(e));\n      }).then(function () {\n        return delete r.c[e], Xs(r, e);\n      }).ia(function () {\n        n && r.b--;\n      });\n    }, t.Y = function (t) {\n      var n;\n      0 == this.a.length && ($s(n = this), function e() {\n        n.f = setTimeout(function () {\n          n.i = Js(n).then(function (e) {\n            0 < e.length && L(n.a, function (t) {\n              t(e);\n            });\n          }).then(function () {\n            e();\n          }).s(function (t) {\n            \"STOP_EVENT\" != t.message && e();\n          });\n        }, 800);\n      }()), this.a.push(t);\n    }, t.ca = function (e) {\n      B(this.a, function (t) {\n        return t == e;\n      }), 0 == this.a.length && $s(this);\n    }, (t = Zs.prototype).get = function (e) {\n      return this.b.then(function (t) {\n        return t.get(e);\n      });\n    }, t.set = function (e, n) {\n      return this.b.then(function (t) {\n        return t.set(e, n);\n      });\n    }, t.P = function (e) {\n      return this.b.then(function (t) {\n        return t.P(e);\n      });\n    }, t.Y = function (t) {\n      this.a.push(t);\n    }, t.ca = function (e) {\n      B(this.a, function (t) {\n        return t == e;\n      });\n    }, (t = tu.prototype).get = function (t) {\n      return Yt(this.a[t]);\n    }, t.set = function (t, e) {\n      return this.a[t] = e, Yt();\n    }, t.P = function (t) {\n      return delete this.a[t], Yt();\n    }, t.Y = function () {}, t.ca = function () {}, (t = eu.prototype).get = function (t) {\n      var e = this;\n      return Yt().then(function () {\n        return Sr(e.a.getItem(t));\n      });\n    }, t.set = function (e, n) {\n      var r = this;\n      return Yt().then(function () {\n        var t = Er(n);\n        null === t ? r.P(e) : r.a.setItem(e, t);\n      });\n    }, t.P = function (t) {\n      var e = this;\n      return Yt().then(function () {\n        e.a.removeItem(t);\n      });\n    }, t.Y = function (t) {\n      l.window && Ke(l.window, \"storage\", t);\n    }, t.ca = function (t) {\n      l.window && Ge(l.window, \"storage\", t);\n    }, (t = ru.prototype).get = function () {\n      return Yt(null);\n    }, t.set = function () {\n      return Yt();\n    }, t.P = function () {\n      return Yt();\n    }, t.Y = function () {}, t.ca = function () {}, (t = iu.prototype).get = function (t) {\n      var e = this;\n      return Yt().then(function () {\n        return Sr(e.a.getItem(t));\n      });\n    }, t.set = function (e, n) {\n      var r = this;\n      return Yt().then(function () {\n        var t = Er(n);\n        null === t ? r.P(e) : r.a.setItem(e, t);\n      });\n    }, t.P = function (t) {\n      var e = this;\n      return Yt().then(function () {\n        e.a.removeItem(t);\n      });\n    }, t.Y = function () {}, t.ca = function () {};\n    var su,\n        uu,\n        cu = {\n      B: eu,\n      Sa: iu\n    },\n        hu = {\n      B: eu,\n      Sa: iu\n    },\n        lu = {\n      B: Ms,\n      Sa: ru\n    },\n        fu = {\n      B: eu,\n      Sa: ru\n    },\n        pu = {\n      Xc: \"local\",\n      NONE: \"none\",\n      Zc: \"session\"\n    };\n\n    function du() {\n      var t = !(Cr(yr()) || !ar()),\n          e = _r(),\n          n = gr();\n\n      this.o = t, this.h = e, this.m = n, this.a = {}, su || (su = new au()), t = su;\n\n      try {\n        this.g = !Xn() && Rr() || !l.indexedDB ? new t.a.B() : new Zs(sr() ? new tu() : new t.a.B());\n      } catch (t) {\n        this.g = new tu(), this.h = !0;\n      }\n\n      try {\n        this.i = new t.a.Sa();\n      } catch (t) {\n        this.i = new tu();\n      }\n\n      this.l = new tu(), this.f = _(this.Nb, this), this.b = {};\n    }\n\n    function yu() {\n      return uu || (uu = new du()), uu;\n    }\n\n    function mu(t, e) {\n      switch (e) {\n        case \"session\":\n          return t.i;\n\n        case \"none\":\n          return t.l;\n\n        default:\n          return t.g;\n      }\n    }\n\n    function gu(t, e) {\n      return \"firebase:\" + t.name + (e ? \":\" + e : \"\");\n    }\n\n    function vu(t, e, n) {\n      return n = gu(e, n), \"local\" == e.B && (t.b[n] = null), mu(t, e.B).P(n);\n    }\n\n    function bu(t) {\n      t.c && (clearInterval(t.c), t.c = null);\n    }\n\n    function wu(t) {\n      this.a = t, this.b = yu();\n    }\n\n    (t = du.prototype).get = function (t, e) {\n      return mu(this, t.B).get(gu(t, e));\n    }, t.set = function (e, t, n) {\n      var r = gu(e, n),\n          i = this,\n          o = mu(this, e.B);\n      return o.set(r, t).then(function () {\n        return o.get(r);\n      }).then(function (t) {\n        \"local\" == e.B && (i.b[r] = t);\n      });\n    }, t.addListener = function (t, e, n) {\n      var r;\n      t = gu(t, e), this.m && (this.b[t] = l.localStorage.getItem(t)), Q(this.a) && (mu(this, \"local\").Y(this.f), this.h || (Xn() || !Rr()) && l.indexedDB || !this.m || (bu(r = this), r.c = setInterval(function () {\n        for (var t in r.a) {\n          var e = l.localStorage.getItem(t),\n              n = r.b[t];\n          e != n && (r.b[t] = e, e = new Pe({\n            type: \"storage\",\n            key: t,\n            target: window,\n            oldValue: n,\n            newValue: e,\n            a: !0\n          }), r.Nb(e));\n        }\n      }, 1e3))), this.a[t] || (this.a[t] = []), this.a[t].push(n);\n    }, t.removeListener = function (t, e, n) {\n      t = gu(t, e), this.a[t] && (B(this.a[t], function (t) {\n        return t == n;\n      }), 0 == this.a[t].length && delete this.a[t]), Q(this.a) && (mu(this, \"local\").ca(this.f), bu(this));\n    }, t.Nb = function (t) {\n      if (t && t.f) {\n        var e = t.a.key;\n        if (null == e) for (var n in this.a) {\n          var r = this.b[n];\n          void 0 === r && (r = null);\n          var i = l.localStorage.getItem(n);\n          i !== r && (this.b[n] = i, this.Ya(n));\n        } else if (0 == e.indexOf(\"firebase:\") && this.a[e]) {\n          if (void 0 !== t.a.a ? mu(this, \"local\").ca(this.f) : bu(this), this.o) if (n = l.localStorage.getItem(e), (r = t.a.newValue) !== n) null !== r ? l.localStorage.setItem(e, r) : l.localStorage.removeItem(e);else if (this.b[e] === r && void 0 === t.a.a) return;\n          var o = this;\n          n = function n() {\n            void 0 === t.a.a && o.b[e] === l.localStorage.getItem(e) || (o.b[e] = l.localStorage.getItem(e), o.Ya(e));\n          }, me && Ie && 10 == Ie && l.localStorage.getItem(e) !== t.a.newValue && t.a.newValue !== t.a.oldValue ? setTimeout(n, 10) : n();\n        }\n      } else L(t, _(this.Ya, this));\n    }, t.Ya = function (t) {\n      this.a[t] && L(this.a[t], function (t) {\n        t();\n      });\n    };\n\n    var _u,\n        Eu = {\n      name: \"authEvent\",\n      B: \"local\"\n    };\n\n    function Tu() {\n      this.a = yu();\n    }\n\n    function Su(t, e) {\n      this.b = Iu, this.f = l.Uint8Array ? new Uint8Array(this.b) : Array(this.b), this.g = this.c = 0, this.a = [], this.i = t, this.h = e, this.m = l.Int32Array ? new Int32Array(64) : Array(64), void 0 !== _u || (_u = l.Int32Array ? new Int32Array(Ou) : Ou), this.reset();\n    }\n\n    S(Su, function () {\n      this.b = -1;\n    });\n\n    for (var Iu = 64, Cu = Iu - 1, Nu = [], Au = 0; Au < Cu; Au++) {\n      Nu[Au] = 0;\n    }\n\n    var ku = j(128, Nu);\n\n    function Du(t) {\n      for (var e = t.f, n = t.m, r = 0, i = 0; i < e.length;) {\n        n[r++] = e[i] << 24 | e[i + 1] << 16 | e[i + 2] << 8 | e[i + 3], i = 4 * r;\n      }\n\n      for (e = 16; e < 64; e++) {\n        i = 0 | n[e - 15], r = 0 | n[e - 2];\n        var o = (0 | n[e - 16]) + ((i >>> 7 | i << 25) ^ (i >>> 18 | i << 14) ^ i >>> 3) | 0,\n            a = (0 | n[e - 7]) + ((r >>> 17 | r << 15) ^ (r >>> 19 | r << 13) ^ r >>> 10) | 0;\n        n[e] = o + a | 0;\n      }\n\n      r = 0 | t.a[0], i = 0 | t.a[1];\n      var s = 0 | t.a[2],\n          u = 0 | t.a[3],\n          c = 0 | t.a[4],\n          h = 0 | t.a[5],\n          l = 0 | t.a[6];\n\n      for (o = 0 | t.a[7], e = 0; e < 64; e++) {\n        var f = ((r >>> 2 | r << 30) ^ (r >>> 13 | r << 19) ^ (r >>> 22 | r << 10)) + (r & i ^ r & s ^ i & s) | 0;\n        a = (o = o + ((c >>> 6 | c << 26) ^ (c >>> 11 | c << 21) ^ (c >>> 25 | c << 7)) | 0) + ((a = (a = c & h ^ ~c & l) + (0 | _u[e]) | 0) + (0 | n[e]) | 0) | 0, o = l, l = h, h = c, c = u + a | 0, u = s, s = i, i = r, r = a + f | 0;\n      }\n\n      t.a[0] = t.a[0] + r | 0, t.a[1] = t.a[1] + i | 0, t.a[2] = t.a[2] + s | 0, t.a[3] = t.a[3] + u | 0, t.a[4] = t.a[4] + c | 0, t.a[5] = t.a[5] + h | 0, t.a[6] = t.a[6] + l | 0, t.a[7] = t.a[7] + o | 0;\n    }\n\n    function Ru(t, e, n) {\n      void 0 === n && (n = e.length);\n      var r = 0,\n          i = t.c;\n      if (h(e)) for (; r < n;) {\n        t.f[i++] = e.charCodeAt(r++), i == t.b && (Du(t), i = 0);\n      } else {\n        if (!y(e)) throw Error(\"message must be string or array\");\n\n        for (; r < n;) {\n          var o = e[r++];\n          if (!(\"number\" == typeof o && 0 <= o && o <= 255 && o == (0 | o))) throw Error(\"message must be a byte array\");\n          t.f[i++] = o, i == t.b && (Du(t), i = 0);\n        }\n      }\n      t.c = i, t.g += n;\n    }\n\n    Su.prototype.reset = function () {\n      this.g = this.c = 0, this.a = l.Int32Array ? new Int32Array(this.h) : W(this.h);\n    };\n\n    var Ou = [1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993, 2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987, 1925078388, 2162078206, 2614888103, 3248222580, 3835390401, 4022224774, 264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, 2554220882, 2821834349, 2952996808, 3210313671, 3336571891, 3584528711, 113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291, 1695183700, 1986661051, 2177026350, 2456956037, 2730485921, 2820302411, 3259730800, 3345764771, 3516065817, 3600352804, 4094571909, 275423344, 430227734, 506948616, 659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779, 1955562222, 2024104815, 2227730452, 2361852424, 2428436474, 2756734187, 3204031479, 3329325298];\n\n    function Pu() {\n      Su.call(this, 8, xu);\n    }\n\n    S(Pu, Su);\n    var xu = [1779033703, 3144134277, 1013904242, 2773480762, 1359893119, 2600822924, 528734635, 1541459225];\n\n    function Mu(t, e, n, r, i) {\n      this.l = t, this.i = e, this.m = n, this.o = r || null, this.u = i || null, this.h = e + \":\" + n, this.v = new Tu(), this.g = new wu(this.h), this.f = null, this.b = [], this.a = this.c = null;\n    }\n\n    function Lu(t) {\n      return new Yr(\"invalid-cordova-configuration\", t);\n    }\n\n    function Fu(t) {\n      var e = new Pu();\n      Ru(e, t), t = [];\n      var n = 8 * e.g;\n      e.c < 56 ? Ru(e, ku, 56 - e.c) : Ru(e, ku, e.b - (e.c - 56));\n\n      for (var r = 63; 56 <= r; r--) {\n        e.f[r] = 255 & n, n /= 256;\n      }\n\n      for (Du(e), r = n = 0; r < e.i; r++) {\n        for (var i = 24; 0 <= i; i -= 8) {\n          t[n++] = e.a[r] >> i & 255;\n        }\n      }\n\n      return F(t, function (t) {\n        return 1 < (t = t.toString(16)).length ? t : \"0\" + t;\n      }).join(\"\");\n    }\n\n    function Uu(t, e) {\n      for (var n = 0; n < t.b.length; n++) {\n        try {\n          t.b[n](e);\n        } catch (t) {}\n      }\n    }\n\n    function qu(r) {\n      return r.f || (r.f = r.ga().then(function () {\n        return new jt(function (n) {\n          r.wa(function t(e) {\n            return n(e), r.La(t), !1;\n          }), function (i) {\n            function e(r) {\n              t = !0, n && n.cancel(), Vu(i).then(function (t) {\n                var e = o;\n\n                if (t && r && r.url) {\n                  var n = null;\n                  -1 != (e = Pi(r.url)).indexOf(\"/__/auth/callback\") && (n = (n = \"object\" == typeof (n = Sr(wn(n = _n(e), \"firebaseError\") || null)) ? Xr(n) : null) ? new lo(t.c, t.b, null, null, n) : new lo(t.c, t.b, e, t.f)), e = n || o;\n                }\n\n                Uu(i, e);\n              });\n            }\n\n            var o = new lo(\"unknown\", null, null, null, new Yr(\"no-auth-event\")),\n                t = !1,\n                n = un(500).then(function () {\n              return Vu(i).then(function () {\n                t || Uu(i, o);\n              });\n            }),\n                r = l.handleOpenURL;\n            l.handleOpenURL = function (t) {\n              if (0 == t.toLowerCase().indexOf(mr(\"BuildInfo.packageName\", l).toLowerCase() + \"://\") && e({\n                url: t\n              }), \"function\" == typeof r) try {\n                r(t);\n              } catch (t) {\n                console.error(t);\n              }\n            }, mo || (mo = new po()), mo.subscribe(e);\n          }(r);\n        });\n      })), r.f;\n    }\n\n    function Vu(e) {\n      var t,\n          n = null;\n      return (t = e.g, t.b.get(Eu, t.a).then(function (t) {\n        return fo(t);\n      })).then(function (t) {\n        return n = t, vu((t = e.g).b, Eu, t.a);\n      }).then(function () {\n        return n;\n      });\n    }\n\n    function Bu(t) {\n      this.a = t, this.b = yu();\n    }\n\n    (t = Mu.prototype).ga = function () {\n      return this.za ? this.za : this.za = (or(void 0) ? ir().then(function () {\n        return new jt(function (t, e) {\n          var n = l.document,\n              r = setTimeout(function () {\n            e(Error(\"Cordova framework is not ready.\"));\n          }, 1e3);\n          n.addEventListener(\"deviceready\", function () {\n            clearTimeout(r), t();\n          }, !1);\n        });\n      }) : Xt(Error(\"Cordova must run in an Android or iOS file scheme.\"))).then(function () {\n        if (\"function\" != typeof mr(\"universalLinks.subscribe\", l)) throw Lu(\"cordova-universal-links-plugin-fix is not installed\");\n        if (void 0 === mr(\"BuildInfo.packageName\", l)) throw Lu(\"cordova-plugin-buildinfo is not installed\");\n        if (\"function\" != typeof mr(\"cordova.plugins.browsertab.openUrl\", l)) throw Lu(\"cordova-plugin-browsertab is not installed\");\n        if (\"function\" != typeof mr(\"cordova.InAppBrowser.open\", l)) throw Lu(\"cordova-plugin-inappbrowser is not installed\");\n      }, function () {\n        throw new Yr(\"cordova-not-ready\");\n      });\n    }, t.Ea = function (t, e) {\n      return e(new Yr(\"operation-not-supported-in-this-environment\")), Yt();\n    }, t.Db = function () {\n      return Xt(new Yr(\"operation-not-supported-in-this-environment\"));\n    }, t.Ob = function () {\n      return !1;\n    }, t.Mb = function () {\n      return !0;\n    }, t.Hb = function () {\n      return !0;\n    }, t.Ca = function (t, e, n) {\n      if (this.c) return Xt(new Yr(\"redirect-operation-pending\"));\n      var r = this,\n          i = l.document,\n          o = null,\n          a = null,\n          s = null,\n          u = null;\n      return this.c = Yt().then(function () {\n        return ho(e), qu(r);\n      }).then(function () {\n        return function (n, t, e, r) {\n          var i = function () {\n            for (var t = 20, e = []; 0 < t;) {\n              e.push(\"1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\".charAt(Math.floor(62 * Math.random()))), t--;\n            }\n\n            return e.join(\"\");\n          }(),\n              o = new lo(t, r, null, i, new Yr(\"no-auth-event\")),\n              a = mr(\"BuildInfo.packageName\", l);\n\n          if (\"string\" != typeof a) throw new Yr(\"invalid-cordova-configuration\");\n          var s = mr(\"BuildInfo.displayName\", l),\n              u = {};\n          if (yr().toLowerCase().match(/iphone|ipad|ipod/)) u.ibi = a;else {\n            if (!yr().toLowerCase().match(/android/)) return Xt(new Yr(\"operation-not-supported-in-this-environment\"));\n            u.apn = a;\n          }\n          s && (u.appDisplayName = s), i = Fu(i), u.sessionId = i;\n          var c = xs(n.l, n.i, n.m, t, e, null, r, n.o, u, n.u);\n          return n.ga().then(function () {\n            var t = n.h;\n            return n.v.a.set(Eu, o.w(), t);\n          }).then(function () {\n            var t = mr(\"cordova.plugins.browsertab.isAvailable\", l);\n            if (\"function\" != typeof t) throw new Yr(\"invalid-cordova-configuration\");\n            var e = null;\n            t(function (t) {\n              if (t) {\n                if (\"function\" != typeof (e = mr(\"cordova.plugins.browsertab.openUrl\", l))) throw new Yr(\"invalid-cordova-configuration\");\n                e(c);\n              } else {\n                if (\"function\" != typeof (e = mr(\"cordova.InAppBrowser.open\", l))) throw new Yr(\"invalid-cordova-configuration\");\n                t = yr(), n.a = e(c, t.match(/(iPad|iPhone|iPod).*OS 7_\\d/i) || t.match(/(iPad|iPhone|iPod).*OS 8_\\d/i) ? \"_blank\" : \"_system\", \"location=yes\");\n              }\n            });\n          });\n        }(r, t, e, n);\n      }).then(function () {\n        return new jt(function (e, t) {\n          a = function a() {\n            var t = mr(\"cordova.plugins.browsertab.close\", l);\n            return e(), \"function\" == typeof t && t(), r.a && \"function\" == typeof r.a.close && (r.a.close(), r.a = null), !1;\n          }, r.wa(a), s = function s() {\n            o || (o = un(2e3).then(function () {\n              t(new Yr(\"redirect-cancelled-by-user\"));\n            }));\n          }, u = function u() {\n            kr() && s();\n          }, i.addEventListener(\"resume\", s, !1), yr().toLowerCase().match(/android/) || i.addEventListener(\"visibilitychange\", u, !1);\n        }).s(function (t) {\n          return Vu(r).then(function () {\n            throw t;\n          });\n        });\n      }).ia(function () {\n        s && i.removeEventListener(\"resume\", s, !1), u && i.removeEventListener(\"visibilitychange\", u, !1), o && o.cancel(), a && r.La(a), r.c = null;\n      });\n    }, t.wa = function (e) {\n      this.b.push(e), qu(this).s(function (t) {\n        \"auth/invalid-cordova-configuration\" === t.code && (t = new lo(\"unknown\", null, null, null, new Yr(\"no-auth-event\")), e(t));\n      });\n    }, t.La = function (e) {\n      B(this.b, function (t) {\n        return t == e;\n      });\n    };\n    var ju = {\n      name: \"pendingRedirect\",\n      B: \"session\"\n    };\n\n    function Wu(t) {\n      return vu(t.b, ju, t.a);\n    }\n\n    function Ku(t, e, n) {\n      this.i = {}, this.u = 0, this.A = t, this.l = e, this.o = n, this.h = [], this.f = !1, this.m = _(this.cb, this), this.b = new tc(), this.v = new ic(), this.g = new Bu(this.l + \":\" + this.o), this.c = {}, this.c.unknown = this.b, this.c.signInViaRedirect = this.b, this.c.linkViaRedirect = this.b, this.c.reauthViaRedirect = this.b, this.c.signInViaPopup = this.v, this.c.linkViaPopup = this.v, this.c.reauthViaPopup = this.v, this.a = Qu(this.A, this.l, this.o, mi);\n    }\n\n    function Qu(t, e, n, r) {\n      var i = Jh.SDK_VERSION || null;\n      return or() ? new Mu(t, e, n, i, r) : new Ds(t, e, n, i, r);\n    }\n\n    function Hu(e) {\n      e.f || (e.f = !0, e.a.wa(e.m));\n      var n = e.a;\n      return e.a.ga().s(function (t) {\n        throw e.a == n && e.reset(), t;\n      });\n    }\n\n    function Gu(n) {\n      n.a.Mb() && Hu(n).s(function (t) {\n        var e = new lo(\"unknown\", null, null, null, new Yr(\"operation-not-supported-in-this-environment\"));\n        Ju(t) && n.cb(e);\n      }), n.a.Hb() || ec(n.b);\n    }\n\n    (t = Ku.prototype).reset = function () {\n      this.f = !1, this.a.La(this.m), this.a = Qu(this.A, this.l, this.o), this.i = {};\n    }, t.Za = function () {\n      this.b.Za();\n    }, t.subscribe = function (t) {\n      if (q(this.h, t) || this.h.push(t), !this.f) {\n        var n = this;\n        (e = this.g, e.b.get(ju, e.a).then(function (t) {\n          return \"pending\" == t;\n        })).then(function (t) {\n          t ? Wu(n.g).then(function () {\n            Hu(n).s(function (t) {\n              var e = new lo(\"unknown\", null, null, null, new Yr(\"operation-not-supported-in-this-environment\"));\n              Ju(t) && n.cb(e);\n            });\n          }) : Gu(n);\n        }).s(function () {\n          Gu(n);\n        });\n      }\n\n      var e;\n    }, t.unsubscribe = function (e) {\n      B(this.h, function (t) {\n        return t == e;\n      });\n    }, t.cb = function (t) {\n      if (!t) throw new Yr(\"invalid-auth-event\");\n      if (6e5 <= T() - this.u && (this.i = {}, this.u = 0), t && t.getUid() && this.i.hasOwnProperty(t.getUid())) return !1;\n\n      for (var e = !1, n = 0; n < this.h.length; n++) {\n        var r = this.h[n];\n\n        if (r.xb(t.c, t.b)) {\n          (e = this.c[t.c]) && (e.h(t, r), t && (t.f || t.b) && (this.i[t.getUid()] = !0, this.u = T())), e = !0;\n          break;\n        }\n      }\n\n      return ec(this.b), e;\n    };\n    var zu = new Ar(2e3, 1e4),\n        Yu = new Ar(3e4, 6e4);\n\n    function Xu(t, e, n, r, i, o) {\n      return t.a.Db(e, n, r, function () {\n        t.f || (t.f = !0, t.a.wa(t.m));\n      }, function () {\n        t.reset();\n      }, i, o);\n    }\n\n    function Ju(t) {\n      return !(!t || \"auth/cordova-not-ready\" != t.code);\n    }\n\n    Ku.prototype.fa = function () {\n      return this.b.fa();\n    }, Ku.prototype.Ca = function (t, e, n) {\n      var r,\n          i,\n          o = this;\n      return (i = this.g, i.b.set(ju, \"pending\", i.a)).then(function () {\n        return o.a.Ca(t, e, n).s(function (t) {\n          if (Ju(t)) throw new Yr(\"operation-not-supported-in-this-environment\");\n          return r = t, Wu(o.g).then(function () {\n            throw r;\n          });\n        }).then(function () {\n          return o.a.Ob() ? new jt(function () {}) : Wu(o.g).then(function () {\n            return o.fa();\n          }).then(function () {}).s(function () {});\n        });\n      });\n    }, Ku.prototype.Ea = function (e, n, t, r) {\n      return this.a.Ea(t, function (t) {\n        e.ha(n, null, t, r);\n      }, zu.get());\n    };\n    var $u = {};\n\n    function Zu(t, e, n) {\n      var r = e + \":\" + n;\n      return $u[r] || ($u[r] = new Ku(t, e, n)), $u[r];\n    }\n\n    function tc() {\n      this.b = null, this.f = [], this.c = [], this.a = null, this.i = this.g = !1;\n    }\n\n    function ec(t) {\n      t.g || (t.g = !0, rc(t, !1, null, null));\n    }\n\n    function nc(t, e) {\n      if (t.b = function () {\n        return Yt(e);\n      }, t.f.length) for (var n = 0; n < t.f.length; n++) {\n        t.f[n](e);\n      }\n    }\n\n    function rc(t, e, n, r) {\n      e ? r ? function (t, e) {\n        if (t.b = function () {\n          return Xt(e);\n        }, t.c.length) for (var n = 0; n < t.c.length; n++) {\n          t.c[n](e);\n        }\n      }(t, r) : nc(t, n) : nc(t, {\n        user: null\n      }), t.f = [], t.c = [];\n    }\n\n    function ic() {}\n\n    function oc() {\n      this.ub = !1, Object.defineProperty(this, \"appVerificationDisabled\", {\n        get: function get() {\n          return this.ub;\n        },\n        set: function set(t) {\n          this.ub = t;\n        },\n        enumerable: !1\n      });\n    }\n\n    function ac(t, e) {\n      this.a = e, Lr(this, \"verificationId\", t);\n    }\n\n    function sc(t, e, n, r) {\n      return new so(t).Va(e, n).then(function (t) {\n        return new ac(t, r);\n      });\n    }\n\n    function uc(t) {\n      var e = yi(t);\n      if (!(e && e.exp && e.auth_time && e.iat)) throw new Yr(\"internal-error\", \"An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.\");\n      Fr(this, {\n        token: t,\n        expirationTime: Dr(1e3 * e.exp),\n        authTime: Dr(1e3 * e.auth_time),\n        issuedAtTime: Dr(1e3 * e.iat),\n        signInProvider: e.firebase && e.firebase.sign_in_provider ? e.firebase.sign_in_provider : null,\n        claims: e\n      });\n    }\n\n    function cc(t, e, n) {\n      if (this.h = t, this.i = e, this.g = n, this.c = 3e4, this.f = 96e4, this.b = null, this.a = this.c, this.f < this.c) throw Error(\"Proactive refresh lower bound greater than upper bound!\");\n    }\n\n    function hc(t, e) {\n      return e ? (t.a = t.c, t.g()) : (e = t.a, t.a *= 2, t.a > t.f && (t.a = t.f), e);\n    }\n\n    function lc(t) {\n      this.f = t, this.b = this.a = null, this.c = 0;\n    }\n\n    function fc(t, e) {\n      var n = e[Sa],\n          r = e.refreshToken;\n      e = pc(e.expiresIn), t.b = n, t.c = e, t.a = r;\n    }\n\n    function pc(t) {\n      return T() + 1e3 * parseInt(t, 10);\n    }\n\n    function dc(e, t) {\n      return (r = e.f, i = t, new jt(function (e, n) {\n        \"refresh_token\" == i.grant_type && i.refresh_token || \"authorization_code\" == i.grant_type && i.code ? Ra(r, r.i + \"?key=\" + encodeURIComponent(r.b), function (t) {\n          t ? t.error ? n(_s(t)) : t.access_token && t.refresh_token ? e(t) : n(new Yr(\"internal-error\")) : n(new Yr(\"network-request-failed\"));\n        }, \"POST\", Pn(i).toString(), r.f, r.m.get()) : n(new Yr(\"internal-error\"));\n      })).then(function (t) {\n        return e.b = t.access_token, e.c = pc(t.expires_in), e.a = t.refresh_token, {\n          accessToken: e.b,\n          expirationTime: e.c,\n          refreshToken: e.a\n        };\n      }).s(function (t) {\n        throw \"auth/user-token-expired\" == t.code && (e.a = null), t;\n      });\n      var r, i;\n    }\n\n    function yc(t, e) {\n      this.a = t || null, this.b = e || null, Fr(this, {\n        lastSignInTime: Dr(e || null),\n        creationTime: Dr(t || null)\n      });\n    }\n\n    function mc(t, e, n, r, i, o) {\n      Fr(this, {\n        uid: t,\n        displayName: r || null,\n        photoURL: i || null,\n        email: n || null,\n        phoneNumber: o || null,\n        providerId: e\n      });\n    }\n\n    function gc(t, e) {\n      for (var n in Oe.call(this, t), e) {\n        this[n] = e[n];\n      }\n    }\n\n    function vc(t, e, n) {\n      var r;\n      this.G = [], this.l = t.apiKey, this.o = t.appName, this.u = t.authDomain || null, t = Jh.SDK_VERSION ? dr(Jh.SDK_VERSION) : null, this.c = new Ea(this.l, vi(mi), t), this.h = new lc(this.c), Ic(this, e[Sa]), fc(this.h, e), Lr(this, \"refreshToken\", this.h.a), Ac(this, n || {}), nn.call(this), this.I = !1, this.u && vr() && (this.a = Zu(this.u, this.l, this.o)), this.N = [], this.i = null, this.A = (r = this, new cc(function () {\n        return r.F(!0);\n      }, function (t) {\n        return !(!t || \"auth/network-request-failed\" != t.code);\n      }, function () {\n        var t = r.h.c - T() - 3e5;\n        return 0 < t ? t : 0;\n      })), this.V = _(this.Ha, this);\n      var i = this;\n      this.ka = null, this.ta = function (t) {\n        i.pa(t.g);\n      }, this.X = null, this.O = [], this.sa = function (t) {\n        wc(i, t.c);\n      }, this.W = null;\n    }\n\n    function bc(t, e) {\n      t.X && Ge(t.X, \"languageCodeChanged\", t.ta), (t.X = e) && Ke(e, \"languageCodeChanged\", t.ta);\n    }\n\n    function wc(t, e) {\n      t.O = e, Da(t.c, Jh.SDK_VERSION ? dr(Jh.SDK_VERSION, t.O) : null);\n    }\n\n    function _c(t, e) {\n      t.W && Ge(t.W, \"frameworkChanged\", t.sa), (t.W = e) && Ke(e, \"frameworkChanged\", t.sa);\n    }\n\n    function Ec(e) {\n      try {\n        return Jh.app(e.o).auth();\n      } catch (t) {\n        throw new Yr(\"internal-error\", \"No firebase.auth.Auth instance is available for the Firebase App '\" + e.o + \"'!\");\n      }\n    }\n\n    function Tc(t) {\n      t.D || t.A.b || (t.A.start(), Ge(t, \"tokenChanged\", t.V), Ke(t, \"tokenChanged\", t.V));\n    }\n\n    function Sc(t) {\n      Ge(t, \"tokenChanged\", t.V), t.A.stop();\n    }\n\n    function Ic(t, e) {\n      t.ra = e, Lr(t, \"_lat\", e);\n    }\n\n    function Cc(t) {\n      for (var e = [], n = 0; n < t.N.length; n++) {\n        e.push(t.N[n](t));\n      }\n\n      return $t(e).then(function () {\n        return t;\n      });\n    }\n\n    function Nc(t) {\n      t.a && !t.I && (t.I = !0, t.a.subscribe(t));\n    }\n\n    function Ac(t, e) {\n      Fr(t, {\n        uid: e.uid,\n        displayName: e.displayName || null,\n        photoURL: e.photoURL || null,\n        email: e.email || null,\n        emailVerified: e.emailVerified || !1,\n        phoneNumber: e.phoneNumber || null,\n        isAnonymous: e.isAnonymous || !1,\n        metadata: new yc(e.createdAt, e.lastLoginAt),\n        providerData: []\n      });\n    }\n\n    function kc() {}\n\n    function Dc(t) {\n      return Yt().then(function () {\n        if (t.D) throw new Yr(\"app-deleted\");\n      });\n    }\n\n    function Rc(t) {\n      return F(t.providerData, function (t) {\n        return t.providerId;\n      });\n    }\n\n    function Oc(t, e) {\n      e && (Pc(t, e.providerId), t.providerData.push(e));\n    }\n\n    function Pc(t, e) {\n      B(t.providerData, function (t) {\n        return t.providerId == e;\n      });\n    }\n\n    function xc(t, e, n) {\n      (\"uid\" != e || n) && t.hasOwnProperty(e) && Lr(t, e, n);\n    }\n\n    function Mc(e, t) {\n      var n, r, i;\n      e != t && (Fr(e, {\n        uid: t.uid,\n        displayName: t.displayName,\n        photoURL: t.photoURL,\n        email: t.email,\n        emailVerified: t.emailVerified,\n        phoneNumber: t.phoneNumber,\n        isAnonymous: t.isAnonymous,\n        providerData: []\n      }), t.metadata ? Lr(e, \"metadata\", new yc((i = t.metadata).a, i.b)) : Lr(e, \"metadata\", new yc()), L(t.providerData, function (t) {\n        Oc(e, t);\n      }), n = e.h, r = t.h, n.b = r.b, n.a = r.a, n.c = r.c, Lr(e, \"refreshToken\", e.h.a));\n    }\n\n    function Lc(i) {\n      return i.F().then(function (t) {\n        var e,\n            n,\n            r = i.isAnonymous;\n        return (e = i, n = t, bs(e.c, ts, {\n          idToken: n\n        }).then(_(e.wc, e))).then(function () {\n          return r || xc(i, \"isAnonymous\", !1), t;\n        });\n      });\n    }\n\n    function Fc(t, e) {\n      e[Sa] && t.ra != e[Sa] && (fc(t.h, e), t.dispatchEvent(new gc(\"tokenChanged\")), Ic(t, e[Sa]), xc(t, \"refreshToken\", t.h.a));\n    }\n\n    function Uc(t, e) {\n      return Lc(t).then(function () {\n        if (q(Rc(t), e)) return Cc(t).then(function () {\n          throw new Yr(\"provider-already-linked\");\n        });\n      });\n    }\n\n    function qc(t, e, n) {\n      return Ur({\n        user: t,\n        credential: co(e),\n        additionalUserInfo: e = Ti(e),\n        operationType: n\n      });\n    }\n\n    function Vc(t, e) {\n      return Fc(t, e), t.reload().then(function () {\n        return t;\n      });\n    }\n\n    function Bc(n, r, t, e, i) {\n      if (!vr()) return Xt(new Yr(\"operation-not-supported-in-this-environment\"));\n      if (n.i && !i) return Xt(n.i);\n      var o = Ei(t.providerId),\n          a = Ir(n.uid + \":::\"),\n          s = null;\n      (!_r() || ar()) && n.u && t.isOAuthProvider && (s = xs(n.u, n.l, n.o, r, t, null, a, Jh.SDK_VERSION || null));\n      var u = er(s, o && o.Ba, o && o.Aa);\n      return e = e().then(function () {\n        if (Wc(n), !i) return n.F().then(function () {});\n      }).then(function () {\n        return Xu(n.a, u, r, t, a, !!s);\n      }).then(function () {\n        return new jt(function (t, e) {\n          n.ha(r, null, new Yr(\"cancelled-popup-request\"), n.g || null), n.f = t, n.v = e, n.g = a, n.b = n.a.Ea(n, r, u, a);\n        });\n      }).then(function (t) {\n        return u && tr(u), t ? Ur(t) : null;\n      }).s(function (t) {\n        throw u && tr(u), t;\n      }), Kc(n, e, i);\n    }\n\n    function jc(e, t, n, r, i) {\n      if (!vr()) return Xt(new Yr(\"operation-not-supported-in-this-environment\"));\n      if (e.i && !i) return Xt(e.i);\n      var o = null,\n          a = Ir(e.uid + \":::\");\n      return r = r().then(function () {\n        if (Wc(e), !i) return e.F().then(function () {});\n      }).then(function () {\n        return e.aa = a, Cc(e);\n      }).then(function (t) {\n        return e.ba && (t = (t = e.ba).b.set(Gc, e.w(), t.a)), t;\n      }).then(function () {\n        return e.a.Ca(t, n, a);\n      }).s(function (t) {\n        if (o = t, e.ba) return zc(e.ba);\n        throw o;\n      }).then(function () {\n        if (o) throw o;\n      }), Kc(e, r, i);\n    }\n\n    function Wc(t) {\n      if (!t.a || !t.I) {\n        if (t.a && !t.I) throw new Yr(\"internal-error\");\n        throw new Yr(\"auth-domain-config-required\");\n      }\n    }\n\n    function Kc(t, e, n) {\n      var r,\n          i,\n          o,\n          a = (i = e, o = n, (r = t).i && !o ? (i.cancel(), Xt(r.i)) : i.s(function (t) {\n        throw !t || \"auth/user-disabled\" != t.code && \"auth/user-token-expired\" != t.code || (r.i || r.dispatchEvent(new gc(\"userInvalidated\")), r.i = t), t;\n      }));\n      return t.G.push(a), a.ia(function () {\n        V(t.G, a);\n      }), a;\n    }\n\n    function Qc(t) {\n      if (!t.apiKey) return null;\n      var e = {\n        apiKey: t.apiKey,\n        authDomain: t.authDomain,\n        appName: t.appName\n      },\n          n = {};\n      if (!(t.stsTokenManager && t.stsTokenManager.accessToken && t.stsTokenManager.expirationTime)) return null;\n      n[Sa] = t.stsTokenManager.accessToken, n.refreshToken = t.stsTokenManager.refreshToken || null, n.expiresIn = (t.stsTokenManager.expirationTime - T()) / 1e3;\n      var r = new vc(e, n, t);\n      return t.providerData && L(t.providerData, function (t) {\n        t && Oc(r, Ur(t));\n      }), t.redirectEventId && (r.aa = t.redirectEventId), r;\n    }\n\n    function Hc(t) {\n      this.a = t, this.b = yu();\n    }\n\n    tc.prototype.reset = function () {\n      this.b = null, this.a && (this.a.cancel(), this.a = null);\n    }, tc.prototype.h = function (t, e) {\n      if (t) {\n        this.reset(), this.g = !0;\n        var n = t.c,\n            r = t.b,\n            i = t.a && \"auth/web-storage-unsupported\" == t.a.code,\n            o = t.a && \"auth/operation-not-supported-in-this-environment\" == t.a.code;\n        this.i = !(!i && !o), \"unknown\" != n || i || o ? t.a ? (rc(this, !0, null, t.a), Yt()) : e.xa(n, r) ? function (e, t, n) {\n          n = n.xa(t.c, t.b);\n          var r = t.g,\n              i = t.f,\n              o = t.h,\n              a = !!t.c.match(/Redirect$/);\n          n(r, i, o).then(function (t) {\n            rc(e, a, t, null);\n          }).s(function (t) {\n            rc(e, a, null, t);\n          });\n        }(this, t, e) : Xt(new Yr(\"invalid-auth-event\")) : (rc(this, !1, null, null), Yt());\n      } else Xt(new Yr(\"invalid-auth-event\"));\n    }, tc.prototype.Za = function () {\n      this.g && !this.i && rc(this, !1, null, null);\n    }, tc.prototype.fa = function () {\n      var i = this;\n      return new jt(function (t, e) {\n        var n, r;\n        i.b ? i.b().then(t, e) : (i.f.push(t), i.c.push(e), n = i, r = new Yr(\"timeout\"), n.a && n.a.cancel(), n.a = un(Yu.get()).then(function () {\n          n.b || (n.g = !0, rc(n, !0, null, r));\n        }));\n      });\n    }, ic.prototype.h = function (t, e) {\n      if (t) {\n        var n = t.c,\n            r = t.b;\n        t.a ? (e.ha(t.c, null, t.a, t.b), Yt()) : e.xa(n, r) ? (o = e, a = (i = t).b, s = i.c, o.xa(s, a)(i.g, i.f, i.h).then(function (t) {\n          o.ha(s, t, null, a);\n        }).s(function (t) {\n          o.ha(s, null, t, a);\n        })) : Xt(new Yr(\"invalid-auth-event\"));\n      } else Xt(new Yr(\"invalid-auth-event\"));\n\n      var i, o, a, s;\n    }, ac.prototype.confirm = function (t) {\n      return t = uo(this.verificationId, t), this.a(t);\n    }, cc.prototype.start = function () {\n      this.a = this.c, function e(n, t) {\n        n.stop();\n        n.b = un(hc(n, t)).then(function () {\n          return e = l.document, _n2 = null, kr() || !e ? Yt() : new jt(function (t) {\n            _n2 = function n() {\n              kr() && (e.removeEventListener(\"visibilitychange\", _n2, !1), t());\n            }, e.addEventListener(\"visibilitychange\", _n2, !1);\n          }).s(function (t) {\n            throw e.removeEventListener(\"visibilitychange\", _n2, !1), t;\n          });\n\n          var e, _n2;\n        }).then(function () {\n          return n.h();\n        }).then(function () {\n          e(n, !0);\n        }).s(function (t) {\n          n.i(t) && e(n, !1);\n        });\n      }(this, !0);\n    }, cc.prototype.stop = function () {\n      this.b && (this.b.cancel(), this.b = null);\n    }, lc.prototype.w = function () {\n      return {\n        apiKey: this.f.b,\n        refreshToken: this.a,\n        accessToken: this.b,\n        expirationTime: this.c\n      };\n    }, lc.prototype.getToken = function (t) {\n      return t = !!t, this.b && !this.a ? Xt(new Yr(\"user-token-expired\")) : t || !this.b || T() > this.c - 3e4 ? this.a ? dc(this, {\n        grant_type: \"refresh_token\",\n        refresh_token: this.a\n      }) : Yt(null) : Yt({\n        accessToken: this.b,\n        expirationTime: this.c,\n        refreshToken: this.a\n      });\n    }, yc.prototype.w = function () {\n      return {\n        lastLoginAt: this.b,\n        createdAt: this.a\n      };\n    }, S(gc, Oe), S(vc, nn), vc.prototype.pa = function (t) {\n      this.ka = t, ka(this.c, t);\n    }, vc.prototype.ea = function () {\n      return this.ka;\n    }, vc.prototype.ya = function () {\n      return W(this.O);\n    }, vc.prototype.Ha = function () {\n      this.A.b && (this.A.stop(), this.A.start());\n    }, Lr(vc.prototype, \"providerId\", \"firebase\"), (t = vc.prototype).reload = function () {\n      var t = this;\n      return Kc(this, Dc(this).then(function () {\n        return Lc(t).then(function () {\n          return Cc(t);\n        }).then(kc);\n      }));\n    }, t.ac = function (t) {\n      return this.F(t).then(function (t) {\n        return new uc(t);\n      });\n    }, t.F = function (t) {\n      var e = this;\n      return Kc(this, Dc(this).then(function () {\n        return e.h.getToken(t);\n      }).then(function (t) {\n        if (!t) throw new Yr(\"internal-error\");\n        return t.accessToken != e.ra && (Ic(e, t.accessToken), e.dispatchEvent(new gc(\"tokenChanged\"))), xc(e, \"refreshToken\", t.refreshToken), t.accessToken;\n      }));\n    }, t.wc = function (t) {\n      if (!(t = t.users) || !t.length) throw new Yr(\"internal-error\");\n      Ac(this, {\n        uid: (t = t[0]).localId,\n        displayName: t.displayName,\n        photoURL: t.photoUrl,\n        email: t.email,\n        emailVerified: !!t.emailVerified,\n        phoneNumber: t.phoneNumber,\n        lastLoginAt: t.lastLoginAt,\n        createdAt: t.createdAt\n      });\n\n      for (var e = (r = (r = t).providerUserInfo) && r.length ? F(r, function (t) {\n        return new mc(t.rawId, t.providerId, t.email, t.displayName, t.photoUrl, t.phoneNumber);\n      }) : [], n = 0; n < e.length; n++) {\n        Oc(this, e[n]);\n      }\n\n      var r;\n      xc(this, \"isAnonymous\", !(this.email && t.passwordHash || this.providerData && this.providerData.length));\n    }, t.xc = function (t) {\n      return xr(\"firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead.\"), this.hb(t);\n    }, t.hb = function (t) {\n      var e = this,\n          n = null;\n      return Kc(this, t.f(this.c, this.uid).then(function (t) {\n        return Fc(e, t), n = qc(e, t, \"reauthenticate\"), e.i = null, e.reload();\n      }).then(function () {\n        return n;\n      }), !0);\n    }, t.oc = function (t) {\n      return xr(\"firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead.\"), this.fb(t);\n    }, t.fb = function (e) {\n      var n = this,\n          r = null;\n      return Kc(this, Uc(this, e.providerId).then(function () {\n        return n.F();\n      }).then(function (t) {\n        return e.b(n.c, t);\n      }).then(function (t) {\n        return r = qc(n, t, \"link\"), Vc(n, t);\n      }).then(function () {\n        return r;\n      }));\n    }, t.pc = function (t, e) {\n      var n = this;\n      return Kc(this, Uc(this, \"phone\").then(function () {\n        return sc(Ec(n), t, e, _(n.fb, n));\n      }));\n    }, t.yc = function (t, e) {\n      var n = this;\n      return Kc(this, Yt().then(function () {\n        return sc(Ec(n), t, e, _(n.hb, n));\n      }), !0);\n    }, t.rb = function (e) {\n      var n = this;\n      return Kc(this, this.F().then(function (t) {\n        return n.c.rb(t, e);\n      }).then(function (t) {\n        return Fc(n, t), n.reload();\n      }));\n    }, t.Pc = function (e) {\n      var n = this;\n      return Kc(this, this.F().then(function (t) {\n        return e.b(n.c, t);\n      }).then(function (t) {\n        return Fc(n, t), n.reload();\n      }));\n    }, t.sb = function (e) {\n      var n = this;\n      return Kc(this, this.F().then(function (t) {\n        return n.c.sb(t, e);\n      }).then(function (t) {\n        return Fc(n, t), n.reload();\n      }));\n    }, t.tb = function (e) {\n      if (void 0 === e.displayName && void 0 === e.photoURL) return Dc(this);\n      var n = this;\n      return Kc(this, this.F().then(function (t) {\n        return n.c.tb(t, {\n          displayName: e.displayName,\n          photoUrl: e.photoURL\n        });\n      }).then(function (t) {\n        return Fc(n, t), xc(n, \"displayName\", t.displayName || null), xc(n, \"photoURL\", t.photoUrl || null), L(n.providerData, function (t) {\n          \"password\" === t.providerId && (Lr(t, \"displayName\", n.displayName), Lr(t, \"photoURL\", n.photoURL));\n        }), Cc(n);\n      }).then(kc));\n    }, t.Nc = function (i) {\n      var o = this;\n      return Kc(this, Lc(this).then(function (t) {\n        return q(Rc(o), i) ? (e = o.c, n = t, r = [i], bs(e, Ja, {\n          idToken: n,\n          deleteProvider: r\n        })).then(function (t) {\n          var e = {};\n          return L(t.providerUserInfo || [], function (t) {\n            e[t.providerId] = !0;\n          }), L(Rc(o), function (t) {\n            e[t] || Pc(o, t);\n          }), e[so.PROVIDER_ID] || Lr(o, \"phoneNumber\", null), Cc(o);\n        }) : Cc(o).then(function () {\n          throw new Yr(\"no-such-provider\");\n        });\n        var e, n, r;\n      }));\n    }, t.delete = function () {\n      var e = this;\n      return Kc(this, this.F().then(function (t) {\n        return bs(e.c, Xa, {\n          idToken: t\n        });\n      }).then(function () {\n        e.dispatchEvent(new gc(\"userDeleted\"));\n      })).then(function () {\n        for (var t = 0; t < e.G.length; t++) {\n          e.G[t].cancel(\"app-deleted\");\n        }\n\n        bc(e, null), _c(e, null), e.G = [], e.D = !0, Sc(e), Lr(e, \"refreshToken\", null), e.a && e.a.unsubscribe(e);\n      });\n    }, t.xb = function (t, e) {\n      return !!(\"linkViaPopup\" == t && (this.g || null) == e && this.f || \"reauthViaPopup\" == t && (this.g || null) == e && this.f || \"linkViaRedirect\" == t && (this.aa || null) == e || \"reauthViaRedirect\" == t && (this.aa || null) == e);\n    }, t.ha = function (t, e, n, r) {\n      \"linkViaPopup\" != t && \"reauthViaPopup\" != t || r != (this.g || null) || (n && this.v ? this.v(n) : e && !n && this.f && this.f(e), this.b && (this.b.cancel(), this.b = null), delete this.f, delete this.v);\n    }, t.xa = function (t, e) {\n      return \"linkViaPopup\" == t && e == (this.g || null) ? _(this.Bb, this) : \"reauthViaPopup\" == t && e == (this.g || null) ? _(this.Cb, this) : \"linkViaRedirect\" == t && (this.aa || null) == e ? _(this.Bb, this) : \"reauthViaRedirect\" == t && (this.aa || null) == e ? _(this.Cb, this) : null;\n    }, t.qc = function (t) {\n      var e = this;\n      return Bc(this, \"linkViaPopup\", t, function () {\n        return Uc(e, t.providerId).then(function () {\n          return Cc(e);\n        });\n      }, !1);\n    }, t.zc = function (t) {\n      return Bc(this, \"reauthViaPopup\", t, function () {\n        return Yt();\n      }, !0);\n    }, t.rc = function (t) {\n      var e = this;\n      return jc(this, \"linkViaRedirect\", t, function () {\n        return Uc(e, t.providerId);\n      }, !1);\n    }, t.Ac = function (t) {\n      return jc(this, \"reauthViaRedirect\", t, function () {\n        return Yt();\n      }, !0);\n    }, t.Bb = function (e, n, r) {\n      var i = this;\n      this.b && (this.b.cancel(), this.b = null);\n      var o = null;\n      return Kc(this, this.F().then(function (t) {\n        return Wa(i.c, {\n          requestUri: e,\n          postBody: r,\n          sessionId: n,\n          idToken: t\n        });\n      }).then(function (t) {\n        return o = qc(i, t, \"link\"), Vc(i, t);\n      }).then(function () {\n        return o;\n      }));\n    }, t.Cb = function (t, e, n) {\n      var r = this;\n      this.b && (this.b.cancel(), this.b = null);\n      var i = null;\n      return Kc(this, Yt().then(function () {\n        return Mi(Ka(r.c, {\n          requestUri: t,\n          sessionId: e,\n          postBody: n\n        }), r.uid);\n      }).then(function (t) {\n        return i = qc(r, t, \"reauthenticate\"), Fc(r, t), r.i = null, r.reload();\n      }).then(function () {\n        return i;\n      }), !0);\n    }, t.kb = function (e) {\n      var n = this,\n          r = null;\n      return Kc(this, this.F().then(function (t) {\n        return r = t, void 0 === e || Q(e) ? {} : ci(new Zr(e));\n      }).then(function (t) {\n        return n.c.kb(r, t);\n      }).then(function (t) {\n        if (n.email != t) return n.reload();\n      }).then(function () {}));\n    }, t.toJSON = function () {\n      return this.w();\n    }, t.w = function () {\n      var e = {\n        uid: this.uid,\n        displayName: this.displayName,\n        photoURL: this.photoURL,\n        email: this.email,\n        emailVerified: this.emailVerified,\n        phoneNumber: this.phoneNumber,\n        isAnonymous: this.isAnonymous,\n        providerData: [],\n        apiKey: this.l,\n        appName: this.o,\n        authDomain: this.u,\n        stsTokenManager: this.h.w(),\n        redirectEventId: this.aa || null\n      };\n      return this.metadata && z(e, this.metadata.w()), L(this.providerData, function (t) {\n        e.providerData.push(function (t) {\n          var e,\n              n = {};\n\n          for (e in t) {\n            t.hasOwnProperty(e) && (n[e] = t[e]);\n          }\n\n          return n;\n        }(t));\n      }), e;\n    };\n    var Gc = {\n      name: \"redirectUser\",\n      B: \"session\"\n    };\n\n    function zc(t) {\n      return vu(t.b, Gc, t.a);\n    }\n\n    function Yc(t) {\n      var e, n, r, i, o, a, s, u, c;\n      this.a = t, this.b = yu(), this.c = null, this.f = (e = this, n = $c(\"local\"), r = $c(\"session\"), i = $c(\"none\"), (o = e.b, a = n, s = e.a, u = gu(a, s), c = mu(o, a.B), o.get(a, s).then(function (t) {\n        var e = null;\n\n        try {\n          e = Sr(l.localStorage.getItem(u));\n        } catch (t) {}\n\n        if (e && !t) return l.localStorage.removeItem(u), o.set(a, e, s);\n        e && t && \"localStorage\" != c.type && l.localStorage.removeItem(u);\n      })).then(function () {\n        return e.b.get(r, e.a);\n      }).then(function (t) {\n        return t ? r : e.b.get(i, e.a).then(function (t) {\n          return t ? i : e.b.get(n, e.a).then(function (t) {\n            return t ? n : e.b.get(Jc, e.a).then(function (t) {\n              return t ? $c(t) : n;\n            });\n          });\n        });\n      }).then(function (t) {\n        return e.c = t, Xc(e, t.B);\n      }).s(function () {\n        e.c || (e.c = n);\n      })), this.b.addListener($c(\"local\"), this.a, _(this.g, this));\n    }\n\n    function Xc(t, e) {\n      var n,\n          s,\n          r = [];\n\n      for (n in pu) {\n        pu[n] !== e && r.push(vu(t.b, $c(pu[n]), t.a));\n      }\n\n      return r.push(vu(t.b, Jc, t.a)), s = r, new jt(function (n, e) {\n        var r = s.length,\n            i = [];\n        if (r) for (var t = function t(_t3, e) {\n          r--, i[_t3] = e, 0 == r && n(i);\n        }, o = function o(t) {\n          e(t);\n        }, a = 0; a < s.length; a++) {\n          Jt(s[a], E(t, a), o);\n        } else n(i);\n      });\n    }\n\n    Yc.prototype.g = function () {\n      var e = this,\n          n = $c(\"local\");\n      nh(this, function () {\n        return Yt().then(function () {\n          return e.c && \"local\" != e.c.B ? e.b.get(n, e.a) : null;\n        }).then(function (t) {\n          if (t) return Xc(e, \"local\").then(function () {\n            e.c = n;\n          });\n        });\n      });\n    };\n\n    var Jc = {\n      name: \"persistence\",\n      B: \"session\"\n    };\n\n    function $c(t) {\n      return {\n        name: \"authUser\",\n        B: t\n      };\n    }\n\n    function Zc(t, e) {\n      return nh(t, function () {\n        return t.b.set(t.c, e.w(), t.a);\n      });\n    }\n\n    function th(t) {\n      return nh(t, function () {\n        return vu(t.b, t.c, t.a);\n      });\n    }\n\n    function eh(t, e) {\n      return nh(t, function () {\n        return t.b.get(t.c, t.a).then(function (t) {\n          return t && e && (t.authDomain = e), Qc(t || {});\n        });\n      });\n    }\n\n    function nh(t, e) {\n      return t.f = t.f.then(e, e), t.f;\n    }\n\n    function rh(t) {\n      if (this.l = !1, Lr(this, \"settings\", new oc()), Lr(this, \"app\", t), !hh(this).options || !hh(this).options.apiKey) throw new Yr(\"invalid-api-key\");\n      var n, e, r, i, o, a, s, u, c, h, l, f;\n      t = Jh.SDK_VERSION ? dr(Jh.SDK_VERSION) : null, this.c = new Ea(hh(this).options && hh(this).options.apiKey, vi(mi), t), this.N = [], this.o = [], this.I = [], this.Rb = Jh.INTERNAL.createSubscribe(_(this.kc, this)), this.O = void 0, this.Sb = Jh.INTERNAL.createSubscribe(_(this.mc, this)), uh(this, null), this.h = new Yc(hh(this).options.apiKey + \":\" + hh(this).name), this.A = new Hc(hh(this).options.apiKey + \":\" + hh(this).name), this.V = dh(this, (e = hh(n = this).options.authDomain, r = (i = n, o = (a = i.A, s = hh(i).options.authDomain, a.b.get(Gc, a.a).then(function (t) {\n        return t && s && (t.authDomain = s), Qc(t || {});\n      })).then(function (t) {\n        return (i.D = t) && (t.ba = i.A), zc(i.A);\n      }), dh(i, o)).then(function () {\n        return eh(n.h, e);\n      }).then(function (e) {\n        return e ? (e.ba = n.A, n.D && (n.D.aa || null) == (e.aa || null) ? e : e.reload().then(function () {\n          return Zc(n.h, e).then(function () {\n            return e;\n          });\n        }).s(function (t) {\n          return \"auth/network-request-failed\" == t.code ? e : th(n.h);\n        })) : null;\n      }).then(function (t) {\n        uh(n, t || null);\n      }), dh(n, r))), this.i = dh(this, (u = this).V.then(function () {\n        return u.fa();\n      }).s(function () {}).then(function () {\n        if (!u.l) return u.ka();\n      }).s(function () {}).then(function () {\n        if (!u.l) {\n          u.X = !0;\n          var t = u.h;\n          t.b.addListener($c(\"local\"), t.a, u.ka);\n        }\n      })), this.X = !1, this.ka = _(this.Kc, this), this.Ha = _(this.Z, this), this.ra = _(this.Zb, this), this.sa = _(this.ic, this), this.ta = _(this.jc, this), h = hh(c = this).options.authDomain, l = hh(c).options.apiKey, h && vr() && (c.Qb = c.V.then(function () {\n        if (!c.l) {\n          if (c.a = Zu(h, l, hh(c).name), c.a.subscribe(c), lh(c) && Nc(lh(c)), c.D) {\n            Nc(c.D);\n            var t = c.D;\n            t.pa(c.ea()), bc(t, c), wc(t = c.D, c.G), _c(t, c), c.D = null;\n          }\n\n          return c.a;\n        }\n      })), this.INTERNAL = {}, this.INTERNAL.delete = _(this.delete, this), this.INTERNAL.logFramework = _(this.sc, this), this.u = 0, nn.call(this), f = this, Object.defineProperty(f, \"lc\", {\n        get: function get() {\n          return this.ea();\n        },\n        set: function set(t) {\n          this.pa(t);\n        },\n        enumerable: !1\n      }), f.W = null, this.G = [];\n    }\n\n    function ih(t) {\n      Oe.call(this, \"languageCodeChanged\"), this.g = t;\n    }\n\n    function oh(t) {\n      Oe.call(this, \"frameworkChanged\"), this.c = t;\n    }\n\n    function ah(t) {\n      return t.Qb || Xt(new Yr(\"auth-domain-config-required\"));\n    }\n\n    function sh(o, a) {\n      var s = {};\n      return s.apiKey = hh(o).options.apiKey, s.authDomain = hh(o).options.authDomain, s.appName = hh(o).name, o.V.then(function () {\n        return t = s, e = a, n = o.A, r = o.ya(), i = new vc(t, e), n && (i.ba = n), r && wc(i, r), i.reload().then(function () {\n          return i;\n        });\n        var t, e, n, r, i;\n      }).then(function (t) {\n        return lh(o) && t.uid == lh(o).uid ? Mc(lh(o), t) : (uh(o, t), Nc(t)), o.Z(t);\n      }).then(function () {\n        ph(o);\n      });\n    }\n\n    function uh(t, e) {\n      var n, r;\n      lh(t) && (n = lh(t), r = t.Ha, B(n.N, function (t) {\n        return t == r;\n      }), Ge(lh(t), \"tokenChanged\", t.ra), Ge(lh(t), \"userDeleted\", t.sa), Ge(lh(t), \"userInvalidated\", t.ta), Sc(lh(t))), e && (e.N.push(t.Ha), Ke(e, \"tokenChanged\", t.ra), Ke(e, \"userDeleted\", t.sa), Ke(e, \"userInvalidated\", t.ta), 0 < t.u && Tc(e)), Lr(t, \"currentUser\", e), e && (e.pa(t.ea()), bc(e, t), wc(e, t.G), _c(e, t));\n    }\n\n    function ch(e, t) {\n      var n = null,\n          r = null;\n      return dh(e, t.then(function (t) {\n        return n = co(t), r = Ti(t), sh(e, t);\n      }).then(function () {\n        return Ur({\n          user: lh(e),\n          credential: n,\n          additionalUserInfo: r,\n          operationType: \"signIn\"\n        });\n      }));\n    }\n\n    function hh(t) {\n      return t.app;\n    }\n\n    function lh(t) {\n      return t.currentUser;\n    }\n\n    function fh(t) {\n      return lh(t) && lh(t)._lat || null;\n    }\n\n    function ph(t) {\n      if (t.X) {\n        for (var e = 0; e < t.o.length; e++) {\n          t.o[e] && t.o[e](fh(t));\n        }\n\n        if (t.O !== t.getUid() && t.I.length) for (t.O = t.getUid(), e = 0; e < t.I.length; e++) {\n          t.I[e] && t.I[e](fh(t));\n        }\n      }\n    }\n\n    function dh(t, e) {\n      return t.N.push(e), e.ia(function () {\n        V(t.N, e);\n      }), e;\n    }\n\n    function yh() {}\n\n    function mh() {\n      this.a = {}, this.b = 1e12;\n    }\n\n    Yc.prototype.nb = function (e) {\n      var n = null,\n          r = this;\n      return function (t) {\n        var e = new Yr(\"invalid-persistence-type\"),\n            n = new Yr(\"unsupported-persistence-type\");\n\n        t: {\n          for (r in pu) {\n            if (pu[r] == t) {\n              var r = !0;\n              break t;\n            }\n          }\n\n          r = !1;\n        }\n\n        if (!r || \"string\" != typeof t) throw e;\n\n        switch (ur()) {\n          case \"ReactNative\":\n            if (\"session\" === t) throw n;\n            break;\n\n          case \"Node\":\n            if (\"none\" !== t) throw n;\n            break;\n\n          default:\n            if (!gr() && \"none\" !== t) throw n;\n        }\n      }(e), nh(this, function () {\n        return e != r.c.B ? r.b.get(r.c, r.a).then(function (t) {\n          return n = t, Xc(r, e);\n        }).then(function () {\n          if (r.c = $c(e), n) return r.b.set(r.c, n, r.a);\n        }) : Yt();\n      });\n    }, S(rh, nn), S(ih, Oe), S(oh, Oe), (t = rh.prototype).nb = function (t) {\n      return dh(this, t = this.h.nb(t));\n    }, t.pa = function (t) {\n      this.W === t || this.l || (this.W = t, ka(this.c, this.W), this.dispatchEvent(new ih(this.ea())));\n    }, t.ea = function () {\n      return this.W;\n    }, t.Qc = function () {\n      var t = l.navigator;\n      this.pa(t && (t.languages && t.languages[0] || t.language || t.userLanguage) || null);\n    }, t.sc = function (t) {\n      this.G.push(t), Da(this.c, Jh.SDK_VERSION ? dr(Jh.SDK_VERSION, this.G) : null), this.dispatchEvent(new oh(this.G));\n    }, t.ya = function () {\n      return W(this.G);\n    }, t.toJSON = function () {\n      return {\n        apiKey: hh(this).options.apiKey,\n        authDomain: hh(this).options.authDomain,\n        appName: hh(this).name,\n        currentUser: lh(this) && lh(this).w()\n      };\n    }, t.xb = function (t, e) {\n      switch (t) {\n        case \"unknown\":\n        case \"signInViaRedirect\":\n          return !0;\n\n        case \"signInViaPopup\":\n          return this.g == e && !!this.f;\n\n        default:\n          return !1;\n      }\n    }, t.ha = function (t, e, n, r) {\n      \"signInViaPopup\" == t && this.g == r && (n && this.v ? this.v(n) : e && !n && this.f && this.f(e), this.b && (this.b.cancel(), this.b = null), delete this.f, delete this.v);\n    }, t.xa = function (t, e) {\n      return \"signInViaRedirect\" == t || \"signInViaPopup\" == t && this.g == e && this.f ? _(this.Yb, this) : null;\n    }, t.Yb = function (t, e, n) {\n      var r = this;\n      t = {\n        requestUri: t,\n        postBody: n,\n        sessionId: e\n      }, this.b && (this.b.cancel(), this.b = null);\n      var i = null,\n          o = null,\n          a = ja(r.c, t).then(function (t) {\n        return i = co(t), o = Ti(t), t;\n      });\n      return dh(this, t = r.V.then(function () {\n        return a;\n      }).then(function (t) {\n        return sh(r, t);\n      }).then(function () {\n        return Ur({\n          user: lh(r),\n          credential: i,\n          additionalUserInfo: o,\n          operationType: \"signIn\"\n        });\n      }));\n    }, t.Ic = function (e) {\n      if (!vr()) return Xt(new Yr(\"operation-not-supported-in-this-environment\"));\n      var n = this,\n          t = Ei(e.providerId),\n          r = Ir(),\n          i = null;\n      (!_r() || ar()) && hh(this).options.authDomain && e.isOAuthProvider && (i = xs(hh(this).options.authDomain, hh(this).options.apiKey, hh(this).name, \"signInViaPopup\", e, null, r, Jh.SDK_VERSION || null));\n      var o = er(i, t && t.Ba, t && t.Aa);\n      return dh(this, t = ah(this).then(function (t) {\n        return Xu(t, o, \"signInViaPopup\", e, r, !!i);\n      }).then(function () {\n        return new jt(function (t, e) {\n          n.ha(\"signInViaPopup\", null, new Yr(\"cancelled-popup-request\"), n.g), n.f = t, n.v = e, n.g = r, n.b = n.a.Ea(n, \"signInViaPopup\", o, r);\n        });\n      }).then(function (t) {\n        return o && tr(o), t ? Ur(t) : null;\n      }).s(function (t) {\n        throw o && tr(o), t;\n      }));\n    }, t.Jc = function (t) {\n      if (!vr()) return Xt(new Yr(\"operation-not-supported-in-this-environment\"));\n      var e = this;\n      return dh(this, ah(this).then(function () {\n        return nh(t = e.h, function () {\n          return t.b.set(Jc, t.c.B, t.a);\n        });\n        var t;\n      }).then(function () {\n        return e.a.Ca(\"signInViaRedirect\", t);\n      }));\n    }, t.fa = function () {\n      if (!vr()) return Xt(new Yr(\"operation-not-supported-in-this-environment\"));\n      var t = this;\n      return dh(this, ah(this).then(function () {\n        return t.a.fa();\n      }).then(function (t) {\n        return t ? Ur(t) : null;\n      }));\n    }, t.Oc = function (t) {\n      if (!t) return Xt(new Yr(\"null-user\"));\n      var e = this,\n          n = {};\n      n.apiKey = hh(this).options.apiKey, n.authDomain = hh(this).options.authDomain, n.appName = hh(this).name;\n\n      var r = function (t, e, n, r) {\n        e = e || {\n          apiKey: t.l,\n          authDomain: t.u,\n          appName: t.o\n        };\n        var i = t.h,\n            o = {};\n        return o[Sa] = i.b, o.refreshToken = i.a, o.expiresIn = (i.c - T()) / 1e3, e = new vc(e, o), n && (e.ba = n), r && wc(e, r), Mc(e, t), e;\n      }(t, n, e.A, e.ya());\n\n      return dh(this, this.i.then(function () {\n        if (hh(e).options.apiKey != t.l) return r.reload();\n      }).then(function () {\n        return lh(e) && t.uid == lh(e).uid ? (Mc(lh(e), t), e.Z(t)) : (uh(e, r), Nc(r), e.Z(r));\n      }).then(function () {\n        ph(e);\n      }));\n    }, t.pb = function () {\n      var t = this;\n      return dh(this, this.i.then(function () {\n        return lh(t) ? (uh(t, null), th(t.h).then(function () {\n          ph(t);\n        })) : Yt();\n      }));\n    }, t.Kc = function () {\n      var r = this;\n      return eh(this.h, hh(this).options.authDomain).then(function (t) {\n        if (!r.l) {\n          var e;\n\n          if (e = lh(r) && t) {\n            e = lh(r).uid;\n            var n = t.uid;\n            e = null != e && \"\" !== e && null != n && \"\" !== n && e == n;\n          }\n\n          if (e) return Mc(lh(r), t), lh(r).F();\n          (lh(r) || t) && (uh(r, t), t && (Nc(t), t.ba = r.A), r.a && r.a.subscribe(r), ph(r));\n        }\n      });\n    }, t.Z = function (t) {\n      return Zc(this.h, t);\n    }, t.Zb = function () {\n      ph(this), this.Z(lh(this));\n    }, t.ic = function () {\n      this.pb();\n    }, t.jc = function () {\n      this.pb();\n    }, t.kc = function (t) {\n      var e = this;\n      this.addAuthTokenListener(function () {\n        t.next(lh(e));\n      });\n    }, t.mc = function (t) {\n      var e,\n          n,\n          r = this;\n      n = function n() {\n        t.next(lh(r));\n      }, (e = this).I.push(n), dh(e, e.i.then(function () {\n        !e.l && q(e.I, n) && e.O !== e.getUid() && (e.O = e.getUid(), n(fh(e)));\n      }));\n    }, t.uc = function (t, e, n) {\n      var r = this;\n      return this.X && Promise.resolve().then(function () {\n        m(t) ? t(lh(r)) : m(t.next) && t.next(lh(r));\n      }), this.Rb(t, e, n);\n    }, t.tc = function (t, e, n) {\n      var r = this;\n      return this.X && Promise.resolve().then(function () {\n        r.O = r.getUid(), m(t) ? t(lh(r)) : m(t.next) && t.next(lh(r));\n      }), this.Sb(t, e, n);\n    }, t.$b = function (t) {\n      var e = this;\n      return dh(this, this.i.then(function () {\n        return lh(e) ? lh(e).F(t).then(function (t) {\n          return {\n            accessToken: t\n          };\n        }) : null;\n      }));\n    }, t.Ec = function (t) {\n      var n = this;\n      return this.i.then(function () {\n        return ch(n, bs(n.c, ds, {\n          token: t\n        }));\n      }).then(function (t) {\n        var e = t.user;\n        return xc(e, \"isAnonymous\", !1), n.Z(e), t;\n      });\n    }, t.Fc = function (t, e) {\n      var n = this;\n      return this.i.then(function () {\n        return ch(n, bs(n.c, ys, {\n          email: t,\n          password: e\n        }));\n      });\n    }, t.Ub = function (t, e) {\n      var n = this;\n      return this.i.then(function () {\n        return ch(n, bs(n.c, za, {\n          email: t,\n          password: e\n        }));\n      });\n    }, t.Ra = function (t) {\n      var e = this;\n      return this.i.then(function () {\n        return ch(e, t.la(e.c));\n      });\n    }, t.Dc = function (t) {\n      return xr(\"firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead.\"), this.Ra(t);\n    }, t.ob = function () {\n      var n = this;\n      return this.i.then(function () {\n        var t = lh(n);\n        return t && t.isAnonymous ? Ur({\n          user: t,\n          credential: null,\n          additionalUserInfo: Ur({\n            providerId: null,\n            isNewUser: !1\n          }),\n          operationType: \"signIn\"\n        }) : ch(n, n.c.ob()).then(function (t) {\n          var e = t.user;\n          return xc(e, \"isAnonymous\", !0), n.Z(e), t;\n        });\n      });\n    }, t.getUid = function () {\n      return lh(this) && lh(this).uid || null;\n    }, t.Tb = function (t) {\n      this.addAuthTokenListener(t), this.u++, 0 < this.u && lh(this) && Tc(lh(this));\n    }, t.Bc = function (e) {\n      var n = this;\n      L(this.o, function (t) {\n        t == e && n.u--;\n      }), this.u < 0 && (this.u = 0), 0 == this.u && lh(this) && Sc(lh(this)), this.removeAuthTokenListener(e);\n    }, t.addAuthTokenListener = function (t) {\n      var e = this;\n      this.o.push(t), dh(this, this.i.then(function () {\n        e.l || q(e.o, t) && t(fh(e));\n      }));\n    }, t.removeAuthTokenListener = function (e) {\n      B(this.o, function (t) {\n        return t == e;\n      });\n    }, t.delete = function () {\n      this.l = !0;\n\n      for (var t = 0; t < this.N.length; t++) {\n        this.N[t].cancel(\"app-deleted\");\n      }\n\n      return this.N = [], this.h && (t = this.h).b.removeListener($c(\"local\"), t.a, this.ka), this.a && (this.a.unsubscribe(this), this.a.Za()), Promise.resolve();\n    }, t.Xb = function (t) {\n      return dh(this, bs(this.c, Ya, {\n        identifier: t,\n        continueUri: br() ? Jn() : \"http://localhost\"\n      }).then(function (t) {\n        return t.signinMethods || [];\n      }));\n    }, t.nc = function (t) {\n      return !!ro(t);\n    }, t.mb = function (e, n) {\n      var r = this;\n      return dh(this, Yt().then(function () {\n        var t = new Zr(n);\n        if (!t.c) throw new Yr(\"argument-error\", ni + \" must be true when sending sign in link to email\");\n        return ci(t);\n      }).then(function (t) {\n        return r.c.mb(e, t);\n      }).then(function () {}));\n    }, t.Rc = function (t) {\n      return this.Ka(t).then(function (t) {\n        return t.data.email;\n      });\n    }, t.$a = function (t, e) {\n      return dh(this, this.c.$a(t, e).then(function () {}));\n    }, t.Ka = function (t) {\n      return dh(this, this.c.Ka(t).then(function (t) {\n        return new Vr(t);\n      }));\n    }, t.Xa = function (t) {\n      return dh(this, this.c.Xa(t).then(function () {}));\n    }, t.lb = function (e, t) {\n      var n = this;\n      return dh(this, Yt().then(function () {\n        return void 0 === t || Q(t) ? {} : ci(new Zr(t));\n      }).then(function (t) {\n        return n.c.lb(e, t);\n      }).then(function () {}));\n    }, t.Hc = function (t, e) {\n      return dh(this, sc(this, t, e, _(this.Ra, this)));\n    }, t.Gc = function (e, n) {\n      var r = this;\n      return dh(this, Yt().then(function () {\n        var t = no(e, n || Jn());\n        return r.Ra(t);\n      }));\n    }, yh.prototype.render = function () {}, yh.prototype.reset = function () {}, yh.prototype.getResponse = function () {}, yh.prototype.execute = function () {};\n    var gh = null;\n\n    function vh(t, e) {\n      return (e = bh(e)) && t.a[e] || null;\n    }\n\n    function bh(t) {\n      return (t = void 0 === t ? 1e12 : t) ? t.toString() : null;\n    }\n\n    function wh(t, e) {\n      this.g = !1, this.c = e, this.a = this.b = null, this.h = \"invisible\" !== this.c.size, this.f = Vn(t);\n      var n = this;\n      this.i = function () {\n        n.execute();\n      }, this.h ? this.execute() : Ke(this.f, \"click\", this.i);\n    }\n\n    function _h(t) {\n      if (t.g) throw Error(\"reCAPTCHA mock was already deleted!\");\n    }\n\n    function Eh() {}\n\n    mh.prototype.render = function (t, e) {\n      return this.a[this.b.toString()] = new wh(t, e), this.b++;\n    }, mh.prototype.reset = function (t) {\n      var e = vh(this, t);\n      t = bh(t), e && t && (e.delete(), delete this.a[t]);\n    }, mh.prototype.getResponse = function (t) {\n      return (t = vh(this, t)) ? t.getResponse() : null;\n    }, mh.prototype.execute = function (t) {\n      (t = vh(this, t)) && t.execute();\n    }, wh.prototype.getResponse = function () {\n      return _h(this), this.b;\n    }, wh.prototype.execute = function () {\n      _h(this);\n\n      var n = this;\n      this.a || (this.a = setTimeout(function () {\n        n.b = function () {\n          for (var t = 50, e = []; 0 < t;) {\n            e.push(\"1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\".charAt(Math.floor(62 * Math.random()))), t--;\n          }\n\n          return e.join(\"\");\n        }();\n\n        var t = n.c.callback,\n            e = n.c[\"expired-callback\"];\n        if (t) try {\n          t(n.b);\n        } catch (t) {}\n        n.a = setTimeout(function () {\n          if (n.a = null, n.b = null, e) try {\n            e();\n          } catch (t) {}\n          n.h && n.execute();\n        }, 6e4);\n      }, 500));\n    }, wh.prototype.delete = function () {\n      _h(this), this.g = !0, clearTimeout(this.a), this.a = null, Ge(this.f, \"click\", this.i);\n    }, Eh.prototype.g = function () {\n      return gh || (gh = new mh()), Yt(gh);\n    }, Eh.prototype.c = function () {};\n    var Th = null;\n\n    function Sh() {\n      this.b = l.grecaptcha ? 1 / 0 : 0, this.f = null, this.a = \"__rcb\" + Math.floor(1e6 * Math.random()).toString();\n    }\n\n    var Ih = new Y($, \"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}\"),\n        Ch = new Ar(3e4, 6e4);\n    Sh.prototype.g = function (i) {\n      var o = this;\n      return new jt(function (t, e) {\n        var r = setTimeout(function () {\n          e(new Yr(\"network-request-failed\"));\n        }, Ch.get());\n        !l.grecaptcha || i !== o.f && !o.b ? (l[o.a] = function () {\n          if (l.grecaptcha) {\n            o.f = i;\n            var n = l.grecaptcha.render;\n            l.grecaptcha.render = function (t, e) {\n              return t = n(t, e), o.b++, t;\n            }, clearTimeout(r), t(l.grecaptcha);\n          } else clearTimeout(r), e(new Yr(\"internal-error\"));\n\n          delete l[o.a];\n        }, Yt(ya(nt(Ih, {\n          onload: o.a,\n          hl: i || \"\"\n        }))).s(function () {\n          clearTimeout(r), e(new Yr(\"internal-error\", \"Unable to load external reCAPTCHA dependencies!\"));\n        })) : (clearTimeout(r), t(l.grecaptcha));\n      });\n    }, Sh.prototype.c = function () {\n      this.b--;\n    };\n    var Nh = null;\n\n    function Ah(t, e, n, r, i, o, a) {\n      if (Lr(this, \"type\", \"recaptcha\"), this.c = this.f = null, this.D = !1, this.l = e, this.g = null, a = a ? (Th || (Th = new Eh()), Th) : (Nh || (Nh = new Sh()), Nh), this.o = a, this.a = n || {\n        theme: \"light\",\n        type: \"image\"\n      }, this.h = [], this.a[Rh]) throw new Yr(\"argument-error\", \"sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.\");\n      if (this.i = \"invisible\" === this.a[Oh], !l.document) throw new Yr(\"operation-not-supported-in-this-environment\", \"RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.\");\n      if (!Vn(e) || !this.i && Vn(e).hasChildNodes()) throw new Yr(\"argument-error\", \"reCAPTCHA container is either not found or already contains inner elements!\");\n      this.u = new Ea(t, o || null, i || null), this.v = r || function () {\n        return null;\n      };\n      var s = this;\n      this.m = [];\n      var u = this.a[kh];\n\n      this.a[kh] = function (t) {\n        if (Ph(s, t), \"function\" == typeof u) u(t);else if (\"string\" == typeof u) {\n          var e = mr(u, l);\n          \"function\" == typeof e && e(t);\n        }\n      };\n\n      var c = this.a[Dh];\n\n      this.a[Dh] = function () {\n        if (Ph(s, null), \"function\" == typeof c) c();else if (\"string\" == typeof c) {\n          var t = mr(c, l);\n          \"function\" == typeof t && t();\n        }\n      };\n    }\n\n    var kh = \"callback\",\n        Dh = \"expired-callback\",\n        Rh = \"sitekey\",\n        Oh = \"size\";\n\n    function Ph(t, e) {\n      for (var n = 0; n < t.m.length; n++) {\n        try {\n          t.m[n](e);\n        } catch (t) {}\n      }\n    }\n\n    function xh(t, e) {\n      return t.h.push(e), e.ia(function () {\n        V(t.h, e);\n      }), e;\n    }\n\n    function Mh(t) {\n      if (t.D) throw new Yr(\"internal-error\", \"RecaptchaVerifier instance has been destroyed.\");\n    }\n\n    function Lh(t, e, n) {\n      var r = !1;\n\n      try {\n        this.b = n || Jh.app();\n      } catch (t) {\n        throw new Yr(\"argument-error\", \"No firebase.app.App instance is currently initialized.\");\n      }\n\n      if (!this.b.options || !this.b.options.apiKey) throw new Yr(\"invalid-api-key\");\n      n = this.b.options.apiKey;\n      var i = this,\n          o = null;\n\n      try {\n        o = this.b.auth().ya();\n      } catch (t) {}\n\n      try {\n        r = this.b.auth().settings.appVerificationDisabledForTesting;\n      } catch (t) {}\n\n      o = Jh.SDK_VERSION ? dr(Jh.SDK_VERSION, o) : null, Ah.call(this, n, t, e, function () {\n        try {\n          var e = i.b.auth().ea();\n        } catch (t) {\n          e = null;\n        }\n\n        return e;\n      }, o, vi(mi), r);\n    }\n\n    function Fh(t, e, n, r) {\n      t: {\n        n = Array.prototype.slice.call(n);\n\n        for (var i = 0, o = !1, a = 0; a < e.length; a++) {\n          if (e[a].optional) o = !0;else {\n            if (o) throw new Yr(\"internal-error\", \"Argument validator encountered a required argument after an optional argument.\");\n            i++;\n          }\n        }\n\n        if (o = e.length, n.length < i || o < n.length) r = \"Expected \" + (i == o ? 1 == i ? \"1 argument\" : i + \" arguments\" : i + \"-\" + o + \" arguments\") + \" but got \" + n.length + \".\";else {\n          for (i = 0; i < n.length; i++) {\n            if (o = e[i].optional && void 0 === n[i], !e[i].M(n[i]) && !o) {\n              if (e = e[i], i < 0 || i >= Uh.length) throw new Yr(\"internal-error\", \"Argument validator received an unsupported number of arguments.\");\n              n = Uh[i], r = (r ? \"\" : n + \" argument \") + (e.name ? '\"' + e.name + '\" ' : \"\") + \"must be \" + e.K + \".\";\n              break t;\n            }\n          }\n\n          r = null;\n        }\n      }\n\n      if (r) throw new Yr(\"argument-error\", t + \" failed: \" + r);\n    }\n\n    (t = Ah.prototype).za = function () {\n      var e = this;\n      return this.f ? this.f : this.f = xh(this, Yt().then(function () {\n        if (br() && !sr()) return ir();\n        throw new Yr(\"operation-not-supported-in-this-environment\", \"RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.\");\n      }).then(function () {\n        return e.o.g(e.v());\n      }).then(function (t) {\n        return e.g = t, bs(e.u, os, {});\n      }).then(function (t) {\n        e.a[Rh] = t.recaptchaSiteKey;\n      }).s(function (t) {\n        throw e.f = null, t;\n      }));\n    }, t.render = function () {\n      Mh(this);\n      var n = this;\n      return xh(this, this.za().then(function () {\n        if (null === n.c) {\n          var t = n.l;\n\n          if (!n.i) {\n            var e = Vn(t);\n            t = Wn(\"DIV\"), e.appendChild(t);\n          }\n\n          n.c = n.g.render(t, n.a);\n        }\n\n        return n.c;\n      }));\n    }, t.verify = function () {\n      Mh(this);\n      var i = this;\n      return xh(this, this.render().then(function (e) {\n        return new jt(function (n) {\n          var t = i.g.getResponse(e);\n          if (t) n(t);else {\n            var r = function r(t) {\n              var e;\n              t && (e = r, B(i.m, function (t) {\n                return t == e;\n              }), n(t));\n            };\n\n            i.m.push(r), i.i && i.g.execute(i.c);\n          }\n        });\n      }));\n    }, t.reset = function () {\n      Mh(this), null !== this.c && this.g.reset(this.c);\n    }, t.clear = function () {\n      Mh(this), this.D = !0, this.o.c();\n\n      for (var t = 0; t < this.h.length; t++) {\n        this.h[t].cancel(\"RecaptchaVerifier instance has been destroyed.\");\n      }\n\n      if (!this.i) {\n        t = Vn(this.l);\n\n        for (var e; e = t.firstChild;) {\n          t.removeChild(e);\n        }\n      }\n    }, S(Lh, Ah);\n    var Uh = \"First Second Third Fourth Fifth Sixth Seventh Eighth Ninth\".split(\" \");\n\n    function qh(t, e) {\n      return {\n        name: t || \"\",\n        K: \"a valid string\",\n        optional: !!e,\n        M: h\n      };\n    }\n\n    function Vh(t, e) {\n      return {\n        name: t || \"\",\n        K: \"a boolean\",\n        optional: !!e,\n        M: n\n      };\n    }\n\n    function Bh(t, e) {\n      return {\n        name: t || \"\",\n        K: \"a valid object\",\n        optional: !!e,\n        M: g\n      };\n    }\n\n    function jh(t, e) {\n      return {\n        name: t || \"\",\n        K: \"a function\",\n        optional: !!e,\n        M: m\n      };\n    }\n\n    function Wh(t, e) {\n      return {\n        name: t || \"\",\n        K: \"null\",\n        optional: !!e,\n        M: i\n      };\n    }\n\n    function Kh(n) {\n      return {\n        name: n ? n + \"Credential\" : \"credential\",\n        K: n ? \"a valid \" + n + \" credential\" : \"a valid credential\",\n        optional: !1,\n        M: function M(t) {\n          if (!t) return !1;\n          var e = !n || t.providerId === n;\n          return !(!t.la || !e);\n        }\n      };\n    }\n\n    function Qh() {\n      return {\n        name: \"applicationVerifier\",\n        K: \"an implementation of firebase.auth.ApplicationVerifier\",\n        optional: !1,\n        M: function M(t) {\n          return !!(t && h(t.type) && m(t.verify));\n        }\n      };\n    }\n\n    function Hh(e, n, t, r) {\n      return {\n        name: t || \"\",\n        K: e.K + \" or \" + n.K,\n        optional: !!r,\n        M: function M(t) {\n          return e.M(t) || n.M(t);\n        }\n      };\n    }\n\n    function Gh(t, e) {\n      for (var n in e) {\n        var r = e[n].name;\n        t[r] = Xh(r, t[n], e[n].j);\n      }\n    }\n\n    function zh(t, e) {\n      for (var n in e) {\n        var r = e[n].name;\n        r !== n && Object.defineProperty(t, r, {\n          get: E(function (t) {\n            return this[t];\n          }, n),\n          set: E(function (t, e, n, r) {\n            Fh(t, [n], [r], !0), this[e] = r;\n          }, r, n, e[n].vb),\n          enumerable: !0\n        });\n      }\n    }\n\n    function Yh(t, e, n, r) {\n      t[e] = Xh(e, n, r);\n    }\n\n    function Xh(t, e, n) {\n      function r() {\n        var t = Array.prototype.slice.call(arguments);\n        return Fh(a, n, t), e.apply(this, t);\n      }\n\n      if (!n) return e;\n      var i,\n          o,\n          a = (o = (o = t).split(\".\"))[o.length - 1];\n\n      for (i in e) {\n        r[i] = e[i];\n      }\n\n      for (i in e.prototype) {\n        r.prototype[i] = e.prototype[i];\n      }\n\n      return r;\n    }\n\n    Gh(rh.prototype, {\n      Xa: {\n        name: \"applyActionCode\",\n        j: [qh(\"code\")]\n      },\n      Ka: {\n        name: \"checkActionCode\",\n        j: [qh(\"code\")]\n      },\n      $a: {\n        name: \"confirmPasswordReset\",\n        j: [qh(\"code\"), qh(\"newPassword\")]\n      },\n      Ub: {\n        name: \"createUserWithEmailAndPassword\",\n        j: [qh(\"email\"), qh(\"password\")]\n      },\n      Xb: {\n        name: \"fetchSignInMethodsForEmail\",\n        j: [qh(\"email\")]\n      },\n      fa: {\n        name: \"getRedirectResult\",\n        j: []\n      },\n      nc: {\n        name: \"isSignInWithEmailLink\",\n        j: [qh(\"emailLink\")]\n      },\n      tc: {\n        name: \"onAuthStateChanged\",\n        j: [Hh(Bh(), jh(), \"nextOrObserver\"), jh(\"opt_error\", !0), jh(\"opt_completed\", !0)]\n      },\n      uc: {\n        name: \"onIdTokenChanged\",\n        j: [Hh(Bh(), jh(), \"nextOrObserver\"), jh(\"opt_error\", !0), jh(\"opt_completed\", !0)]\n      },\n      lb: {\n        name: \"sendPasswordResetEmail\",\n        j: [qh(\"email\"), Hh(Bh(\"opt_actionCodeSettings\", !0), Wh(null, !0), \"opt_actionCodeSettings\", !0)]\n      },\n      mb: {\n        name: \"sendSignInLinkToEmail\",\n        j: [qh(\"email\"), Bh(\"actionCodeSettings\")]\n      },\n      nb: {\n        name: \"setPersistence\",\n        j: [qh(\"persistence\")]\n      },\n      Dc: {\n        name: \"signInAndRetrieveDataWithCredential\",\n        j: [Kh()]\n      },\n      ob: {\n        name: \"signInAnonymously\",\n        j: []\n      },\n      Ra: {\n        name: \"signInWithCredential\",\n        j: [Kh()]\n      },\n      Ec: {\n        name: \"signInWithCustomToken\",\n        j: [qh(\"token\")]\n      },\n      Fc: {\n        name: \"signInWithEmailAndPassword\",\n        j: [qh(\"email\"), qh(\"password\")]\n      },\n      Gc: {\n        name: \"signInWithEmailLink\",\n        j: [qh(\"email\"), qh(\"emailLink\", !0)]\n      },\n      Hc: {\n        name: \"signInWithPhoneNumber\",\n        j: [qh(\"phoneNumber\"), Qh()]\n      },\n      Ic: {\n        name: \"signInWithPopup\",\n        j: [{\n          name: \"authProvider\",\n          K: \"a valid Auth provider\",\n          optional: !1,\n          M: function M(t) {\n            return !!(t && t.providerId && t.hasOwnProperty && t.hasOwnProperty(\"isOAuthProvider\"));\n          }\n        }]\n      },\n      Jc: {\n        name: \"signInWithRedirect\",\n        j: [{\n          name: \"authProvider\",\n          K: \"a valid Auth provider\",\n          optional: !1,\n          M: function M(t) {\n            return !!(t && t.providerId && t.hasOwnProperty && t.hasOwnProperty(\"isOAuthProvider\"));\n          }\n        }]\n      },\n      Oc: {\n        name: \"updateCurrentUser\",\n        j: [Hh({\n          name: \"user\",\n          K: \"an instance of Firebase User\",\n          optional: !1,\n          M: function M(t) {\n            return !!(t && t instanceof vc);\n          }\n        }, Wh(), \"user\")]\n      },\n      pb: {\n        name: \"signOut\",\n        j: []\n      },\n      toJSON: {\n        name: \"toJSON\",\n        j: [qh(null, !0)]\n      },\n      Qc: {\n        name: \"useDeviceLanguage\",\n        j: []\n      },\n      Rc: {\n        name: \"verifyPasswordResetCode\",\n        j: [qh(\"code\")]\n      }\n    }), zh(rh.prototype, {\n      lc: {\n        name: \"languageCode\",\n        vb: Hh(qh(), Wh(), \"languageCode\")\n      }\n    }), (rh.Persistence = pu).LOCAL = \"local\", rh.Persistence.SESSION = \"session\", rh.Persistence.NONE = \"none\", Gh(vc.prototype, {\n      delete: {\n        name: \"delete\",\n        j: []\n      },\n      ac: {\n        name: \"getIdTokenResult\",\n        j: [Vh(\"opt_forceRefresh\", !0)]\n      },\n      F: {\n        name: \"getIdToken\",\n        j: [Vh(\"opt_forceRefresh\", !0)]\n      },\n      oc: {\n        name: \"linkAndRetrieveDataWithCredential\",\n        j: [Kh()]\n      },\n      fb: {\n        name: \"linkWithCredential\",\n        j: [Kh()]\n      },\n      pc: {\n        name: \"linkWithPhoneNumber\",\n        j: [qh(\"phoneNumber\"), Qh()]\n      },\n      qc: {\n        name: \"linkWithPopup\",\n        j: [{\n          name: \"authProvider\",\n          K: \"a valid Auth provider\",\n          optional: !1,\n          M: function M(t) {\n            return !!(t && t.providerId && t.hasOwnProperty && t.hasOwnProperty(\"isOAuthProvider\"));\n          }\n        }]\n      },\n      rc: {\n        name: \"linkWithRedirect\",\n        j: [{\n          name: \"authProvider\",\n          K: \"a valid Auth provider\",\n          optional: !1,\n          M: function M(t) {\n            return !!(t && t.providerId && t.hasOwnProperty && t.hasOwnProperty(\"isOAuthProvider\"));\n          }\n        }]\n      },\n      xc: {\n        name: \"reauthenticateAndRetrieveDataWithCredential\",\n        j: [Kh()]\n      },\n      hb: {\n        name: \"reauthenticateWithCredential\",\n        j: [Kh()]\n      },\n      yc: {\n        name: \"reauthenticateWithPhoneNumber\",\n        j: [qh(\"phoneNumber\"), Qh()]\n      },\n      zc: {\n        name: \"reauthenticateWithPopup\",\n        j: [{\n          name: \"authProvider\",\n          K: \"a valid Auth provider\",\n          optional: !1,\n          M: function M(t) {\n            return !!(t && t.providerId && t.hasOwnProperty && t.hasOwnProperty(\"isOAuthProvider\"));\n          }\n        }]\n      },\n      Ac: {\n        name: \"reauthenticateWithRedirect\",\n        j: [{\n          name: \"authProvider\",\n          K: \"a valid Auth provider\",\n          optional: !1,\n          M: function M(t) {\n            return !!(t && t.providerId && t.hasOwnProperty && t.hasOwnProperty(\"isOAuthProvider\"));\n          }\n        }]\n      },\n      reload: {\n        name: \"reload\",\n        j: []\n      },\n      kb: {\n        name: \"sendEmailVerification\",\n        j: [Hh(Bh(\"opt_actionCodeSettings\", !0), Wh(null, !0), \"opt_actionCodeSettings\", !0)]\n      },\n      toJSON: {\n        name: \"toJSON\",\n        j: [qh(null, !0)]\n      },\n      Nc: {\n        name: \"unlink\",\n        j: [qh(\"provider\")]\n      },\n      rb: {\n        name: \"updateEmail\",\n        j: [qh(\"email\")]\n      },\n      sb: {\n        name: \"updatePassword\",\n        j: [qh(\"password\")]\n      },\n      Pc: {\n        name: \"updatePhoneNumber\",\n        j: [Kh(\"phone\")]\n      },\n      tb: {\n        name: \"updateProfile\",\n        j: [Bh(\"profile\")]\n      }\n    }), Gh(mh.prototype, {\n      execute: {\n        name: \"execute\"\n      },\n      render: {\n        name: \"render\"\n      },\n      reset: {\n        name: \"reset\"\n      },\n      getResponse: {\n        name: \"getResponse\"\n      }\n    }), Gh(yh.prototype, {\n      execute: {\n        name: \"execute\"\n      },\n      render: {\n        name: \"render\"\n      },\n      reset: {\n        name: \"reset\"\n      },\n      getResponse: {\n        name: \"getResponse\"\n      }\n    }), Gh(jt.prototype, {\n      ia: {\n        name: \"finally\"\n      },\n      s: {\n        name: \"catch\"\n      },\n      then: {\n        name: \"then\"\n      }\n    }), zh(oc.prototype, {\n      appVerificationDisabled: {\n        name: \"appVerificationDisabledForTesting\",\n        vb: Vh(\"appVerificationDisabledForTesting\")\n      }\n    }), Gh(ac.prototype, {\n      confirm: {\n        name: \"confirm\",\n        j: [qh(\"verificationCode\")]\n      }\n    }), Yh(xi, \"fromJSON\", function (t) {\n      t = h(t) ? JSON.parse(t) : t;\n\n      for (var e, n = [Bi, to, oo, Ui], r = 0; r < n.length; r++) {\n        if (e = n[r](t)) return e;\n      }\n\n      return null;\n    }, [Hh(qh(), Bh(), \"json\")]), Yh(eo, \"credential\", function (t, e) {\n      return new Zi(t, e);\n    }, [qh(\"email\"), qh(\"password\")]), Gh(Zi.prototype, {\n      w: {\n        name: \"toJSON\",\n        j: [qh(null, !0)]\n      }\n    }), Gh(Qi.prototype, {\n      ua: {\n        name: \"addScope\",\n        j: [qh(\"scope\")]\n      },\n      Da: {\n        name: \"setCustomParameters\",\n        j: [Bh(\"customOAuthParameters\")]\n      }\n    }), Yh(Qi, \"credential\", Hi, [Hh(qh(), Bh(), \"token\")]), Yh(eo, \"credentialWithLink\", no, [qh(\"email\"), qh(\"emailLink\")]), Gh(Gi.prototype, {\n      ua: {\n        name: \"addScope\",\n        j: [qh(\"scope\")]\n      },\n      Da: {\n        name: \"setCustomParameters\",\n        j: [Bh(\"customOAuthParameters\")]\n      }\n    }), Yh(Gi, \"credential\", zi, [Hh(qh(), Bh(), \"token\")]), Gh(Yi.prototype, {\n      ua: {\n        name: \"addScope\",\n        j: [qh(\"scope\")]\n      },\n      Da: {\n        name: \"setCustomParameters\",\n        j: [Bh(\"customOAuthParameters\")]\n      }\n    }), Yh(Yi, \"credential\", Xi, [Hh(qh(), Hh(Bh(), Wh()), \"idToken\"), Hh(qh(), Wh(), \"accessToken\", !0)]), Gh(Ji.prototype, {\n      Da: {\n        name: \"setCustomParameters\",\n        j: [Bh(\"customOAuthParameters\")]\n      }\n    }), Yh(Ji, \"credential\", $i, [Hh(qh(), Bh(), \"token\"), qh(\"secret\", !0)]), Gh(Ki.prototype, {\n      ua: {\n        name: \"addScope\",\n        j: [qh(\"scope\")]\n      },\n      credential: {\n        name: \"credential\",\n        j: [Hh(qh(), Hh(Bh(), Wh()), \"optionsOrIdToken\"), Hh(qh(), Wh(), \"accessToken\", !0)]\n      },\n      Da: {\n        name: \"setCustomParameters\",\n        j: [Bh(\"customOAuthParameters\")]\n      }\n    }), Gh(qi.prototype, {\n      w: {\n        name: \"toJSON\",\n        j: [qh(null, !0)]\n      }\n    }), Gh(Li.prototype, {\n      w: {\n        name: \"toJSON\",\n        j: [qh(null, !0)]\n      }\n    }), Yh(so, \"credential\", uo, [qh(\"verificationId\"), qh(\"verificationCode\")]), Gh(so.prototype, {\n      Va: {\n        name: \"verifyPhoneNumber\",\n        j: [qh(\"phoneNumber\"), Qh()]\n      }\n    }), Gh(io.prototype, {\n      w: {\n        name: \"toJSON\",\n        j: [qh(null, !0)]\n      }\n    }), Gh(Yr.prototype, {\n      toJSON: {\n        name: \"toJSON\",\n        j: [qh(null, !0)]\n      }\n    }), Gh(vo.prototype, {\n      toJSON: {\n        name: \"toJSON\",\n        j: [qh(null, !0)]\n      }\n    }), Gh(go.prototype, {\n      toJSON: {\n        name: \"toJSON\",\n        j: [qh(null, !0)]\n      }\n    }), Gh(Lh.prototype, {\n      clear: {\n        name: \"clear\",\n        j: []\n      },\n      render: {\n        name: \"render\",\n        j: []\n      },\n      verify: {\n        name: \"verify\",\n        j: []\n      }\n    }), function () {\n      if (void 0 === Jh || !Jh.INTERNAL || !Jh.INTERNAL.registerService) throw Error(\"Cannot find the firebase namespace; be sure to include firebase-app.js before this library.\");\n      var t = {\n        Auth: rh,\n        AuthCredential: xi,\n        Error: Yr\n      };\n      Yh(t, \"EmailAuthProvider\", eo, []), Yh(t, \"FacebookAuthProvider\", Qi, []), Yh(t, \"GithubAuthProvider\", Gi, []), Yh(t, \"GoogleAuthProvider\", Yi, []), Yh(t, \"TwitterAuthProvider\", Ji, []), Yh(t, \"OAuthProvider\", Ki, [qh(\"providerId\")]), Yh(t, \"SAMLAuthProvider\", Wi, [qh(\"providerId\")]), Yh(t, \"PhoneAuthProvider\", so, [{\n        name: \"auth\",\n        K: \"an instance of Firebase Auth\",\n        optional: !0,\n        M: function M(t) {\n          return !!(t && t instanceof rh);\n        }\n      }]), Yh(t, \"RecaptchaVerifier\", Lh, [Hh(qh(), {\n        name: \"\",\n        K: \"an HTML element\",\n        optional: !1,\n        M: function M(t) {\n          return !!(t && t instanceof Element);\n        }\n      }, \"recaptchaContainer\"), Bh(\"recaptchaParameters\", !0), {\n        name: \"app\",\n        K: \"an instance of Firebase App\",\n        optional: !0,\n        M: function M(t) {\n          return !!(t && t instanceof Jh.app.App);\n        }\n      }]), Jh.INTERNAL.registerService(\"auth\", function (t, e) {\n        return e({\n          INTERNAL: {\n            getUid: _((t = new rh(t)).getUid, t),\n            getToken: _(t.$b, t),\n            addAuthTokenListener: _(t.Tb, t),\n            removeAuthTokenListener: _(t.Bc, t)\n          }\n        }), t;\n      }, t, function (t, e) {\n        if (\"create\" === t) try {\n          e.auth();\n        } catch (t) {}\n      }), Jh.INTERNAL.extendNamespace({\n        User: vc\n      });\n    }();\n  }).apply(\"undefined\" != typeof global ? global : \"undefined\" != typeof self ? self : \"undefined\" != typeof window ? window : {});\n\n  var oo,\n      ao = function () {\n    function t(t) {\n      this.domStorage_ = t, this.prefix_ = \"firebase:\";\n    }\n\n    return t.prototype.set = function (t, e) {\n      null == e ? this.domStorage_.removeItem(this.prefixedName_(t)) : this.domStorage_.setItem(this.prefixedName_(t), Ai(e));\n    }, t.prototype.get = function (t) {\n      var e = this.domStorage_.getItem(this.prefixedName_(t));\n      return null == e ? null : Ni(e);\n    }, t.prototype.remove = function (t) {\n      this.domStorage_.removeItem(this.prefixedName_(t));\n    }, t.prototype.prefixedName_ = function (t) {\n      return this.prefix_ + t;\n    }, t.prototype.toString = function () {\n      return this.domStorage_.toString();\n    }, t;\n  }(),\n      so = function () {\n    function t() {\n      this.cache_ = {}, this.isInMemoryStorage = !0;\n    }\n\n    return t.prototype.set = function (t, e) {\n      null == e ? delete this.cache_[t] : this.cache_[t] = e;\n    }, t.prototype.get = function (t) {\n      return Di(this.cache_, t) ? this.cache_[t] : null;\n    }, t.prototype.remove = function (t) {\n      delete this.cache_[t];\n    }, t;\n  }(),\n      uo = function uo(t) {\n    try {\n      if (\"undefined\" != typeof window && void 0 !== window[t]) {\n        var e = window[t];\n        return e.setItem(\"firebase:sentinel\", \"cache\"), e.removeItem(\"firebase:sentinel\"), new ao(e);\n      }\n    } catch (t) {}\n\n    return new so();\n  },\n      co = uo(\"localStorage\"),\n      ho = uo(\"sessionStorage\"),\n      lo = new zi(\"@firebase/database\"),\n      fo = (oo = 1, function () {\n    return oo++;\n  }),\n      po = function po(t) {\n    var e = function (t) {\n      for (var e = [], n = 0, r = 0; r < t.length; r++) {\n        var i = t.charCodeAt(r);\n\n        if (55296 <= i && i <= 56319) {\n          var o = i - 55296;\n          fi(++r < t.length, \"Surrogate pair missing trail surrogate.\"), i = 65536 + (o << 10) + (t.charCodeAt(r) - 56320);\n        }\n\n        e[n++] = i < 128 ? i : (e[n++] = i < 2048 ? i >> 6 | 192 : (e[n++] = i < 65536 ? i >> 12 | 224 : (e[n++] = i >> 18 | 240, i >> 12 & 63 | 128), i >> 6 & 63 | 128), 63 & i | 128);\n      }\n\n      return e;\n    }(t),\n        n = new xi();\n\n    n.update(e);\n    var r = n.digest();\n    return yi.encodeByteArray(r);\n  },\n      yo = function yo() {\n    for (var t = [], e = 0; e < arguments.length; e++) {\n      t[e] = arguments[e];\n    }\n\n    for (var n = \"\", r = 0; r < t.length; r++) {\n      Array.isArray(t[r]) || t[r] && \"object\" == typeof t[r] && \"number\" == typeof t[r].length ? n += yo.apply(null, t[r]) : \"object\" == typeof t[r] ? n += Ai(t[r]) : n += t[r], n += \" \";\n    }\n\n    return n;\n  },\n      mo = null,\n      go = !0,\n      vo = function vo(t, e) {\n    fi(!e || !0 === t || !1 === t, \"Can't turn on custom loggers persistently.\"), !0 === t ? (lo.logLevel = ji.VERBOSE, mo = lo.log.bind(lo), e && ho.set(\"logging_enabled\", !0)) : \"function\" == typeof t ? mo = t : (mo = null, ho.remove(\"logging_enabled\"));\n  },\n      bo = function bo() {\n    for (var t = [], e = 0; e < arguments.length; e++) {\n      t[e] = arguments[e];\n    }\n\n    if (!0 === go && (go = !1, null === mo && !0 === ho.get(\"logging_enabled\") && vo(!0)), mo) {\n      var n = yo.apply(null, t);\n      mo(n);\n    }\n  },\n      wo = function wo(n) {\n    return function () {\n      for (var t = [], e = 0; e < arguments.length; e++) {\n        t[e] = arguments[e];\n      }\n\n      bo.apply(void 0, hi([n], t));\n    };\n  },\n      _o = function _o() {\n    for (var t = [], e = 0; e < arguments.length; e++) {\n      t[e] = arguments[e];\n    }\n\n    var n = \"FIREBASE INTERNAL ERROR: \" + yo.apply(void 0, hi(t));\n    lo.error(n);\n  },\n      Eo = function Eo() {\n    for (var t = [], e = 0; e < arguments.length; e++) {\n      t[e] = arguments[e];\n    }\n\n    var n = \"FIREBASE FATAL ERROR: \" + yo.apply(void 0, hi(t));\n    throw lo.error(n), new Error(n);\n  },\n      To = function To() {\n    for (var t = [], e = 0; e < arguments.length; e++) {\n      t[e] = arguments[e];\n    }\n\n    var n = \"FIREBASE WARNING: \" + yo.apply(void 0, hi(t));\n    lo.warn(n);\n  },\n      So = function So(t) {\n    return \"number\" == typeof t && (t != t || t == Number.POSITIVE_INFINITY || t == Number.NEGATIVE_INFINITY);\n  },\n      Io = \"[MIN_NAME]\",\n      Co = \"[MAX_NAME]\",\n      No = function No(t, e) {\n    if (t === e) return 0;\n    if (t === Io || e === Co) return -1;\n    if (e === Io || t === Co) return 1;\n    var n = Mo(t),\n        r = Mo(e);\n    return null !== n ? null !== r ? n - r == 0 ? t.length - e.length : n - r : -1 : null !== r ? 1 : t < e ? -1 : 1;\n  },\n      Ao = function Ao(t, e) {\n    return t === e ? 0 : t < e ? -1 : 1;\n  },\n      ko = function ko(t, e) {\n    if (e && t in e) return e[t];\n    throw new Error(\"Missing required key (\" + t + \") in object: \" + Ai(e));\n  },\n      Do = function Do(t) {\n    if (\"object\" != typeof t || null === t) return Ai(t);\n    var e = [];\n\n    for (var n in t) {\n      e.push(n);\n    }\n\n    e.sort();\n\n    for (var r = \"{\", i = 0; i < e.length; i++) {\n      0 !== i && (r += \",\"), r += Ai(e[i]), r += \":\", r += Do(t[e[i]]);\n    }\n\n    return r += \"}\";\n  },\n      Ro = function Ro(t, e) {\n    var n = t.length;\n    if (n <= e) return [t];\n\n    for (var r = [], i = 0; i < n; i += e) {\n      n < i + e ? r.push(t.substring(i, n)) : r.push(t.substring(i, i + e));\n    }\n\n    return r;\n  };\n\n  function Oo(t, e) {\n    for (var n in t) {\n      t.hasOwnProperty(n) && e(n, t[n]);\n    }\n  }\n\n  var Po = function Po(t) {\n    fi(!So(t), \"Invalid JSON number\");\n    var e, n, r, i, o, a, s;\n\n    for (0 === t ? e = 1 / t == -1 / (r = n = 0) ? 1 : 0 : (e = t < 0, r = (t = Math.abs(t)) >= Math.pow(2, -1022) ? (n = (i = Math.min(Math.floor(Math.log(t) / Math.LN2), 1023)) + 1023, Math.round(t * Math.pow(2, 52 - i) - Math.pow(2, 52))) : (n = 0, Math.round(t / Math.pow(2, -1074)))), a = [], o = 52; o; o -= 1) {\n      a.push(r % 2 ? 1 : 0), r = Math.floor(r / 2);\n    }\n\n    for (o = 11; o; o -= 1) {\n      a.push(n % 2 ? 1 : 0), n = Math.floor(n / 2);\n    }\n\n    a.push(e ? 1 : 0), a.reverse(), s = a.join(\"\");\n    var u = \"\";\n\n    for (o = 0; o < 64; o += 8) {\n      var c = parseInt(s.substr(o, 8), 2).toString(16);\n      1 === c.length && (c = \"0\" + c), u += c;\n    }\n\n    return u.toLowerCase();\n  },\n      xo = new RegExp(\"^-?\\\\d{1,10}$\"),\n      Mo = function Mo(t) {\n    if (xo.test(t)) {\n      var e = Number(t);\n      if (-2147483648 <= e && e <= 2147483647) return e;\n    }\n\n    return null;\n  },\n      Lo = function Lo(t) {\n    try {\n      t();\n    } catch (e) {\n      setTimeout(function () {\n        var t = e.stack || \"\";\n        throw To(\"Exception was thrown by user callback.\", t), e;\n      }, Math.floor(0));\n    }\n  },\n      Fo = function Fo(t, e) {\n    var n = setTimeout(t, e);\n    return \"object\" == typeof n && n.unref && n.unref(), n;\n  },\n      Uo = function () {\n    function i(t, e) {\n      if (void 0 === e) {\n        this.pieces_ = t.split(\"/\");\n\n        for (var n = 0, r = 0; r < this.pieces_.length; r++) {\n          0 < this.pieces_[r].length && (this.pieces_[n] = this.pieces_[r], n++);\n        }\n\n        this.pieces_.length = n, this.pieceNum_ = 0;\n      } else this.pieces_ = t, this.pieceNum_ = e;\n    }\n\n    return Object.defineProperty(i, \"Empty\", {\n      get: function get() {\n        return new i(\"\");\n      },\n      enumerable: !0,\n      configurable: !0\n    }), i.prototype.getFront = function () {\n      return this.pieceNum_ >= this.pieces_.length ? null : this.pieces_[this.pieceNum_];\n    }, i.prototype.getLength = function () {\n      return this.pieces_.length - this.pieceNum_;\n    }, i.prototype.popFront = function () {\n      var t = this.pieceNum_;\n      return t < this.pieces_.length && t++, new i(this.pieces_, t);\n    }, i.prototype.getBack = function () {\n      return this.pieceNum_ < this.pieces_.length ? this.pieces_[this.pieces_.length - 1] : null;\n    }, i.prototype.toString = function () {\n      for (var t = \"\", e = this.pieceNum_; e < this.pieces_.length; e++) {\n        \"\" !== this.pieces_[e] && (t += \"/\" + this.pieces_[e]);\n      }\n\n      return t || \"/\";\n    }, i.prototype.toUrlEncodedString = function () {\n      for (var t = \"\", e = this.pieceNum_; e < this.pieces_.length; e++) {\n        \"\" !== this.pieces_[e] && (t += \"/\" + encodeURIComponent(String(this.pieces_[e])));\n      }\n\n      return t || \"/\";\n    }, i.prototype.slice = function (t) {\n      return void 0 === t && (t = 0), this.pieces_.slice(this.pieceNum_ + t);\n    }, i.prototype.parent = function () {\n      if (this.pieceNum_ >= this.pieces_.length) return null;\n\n      for (var t = [], e = this.pieceNum_; e < this.pieces_.length - 1; e++) {\n        t.push(this.pieces_[e]);\n      }\n\n      return new i(t, 0);\n    }, i.prototype.child = function (t) {\n      for (var e = [], n = this.pieceNum_; n < this.pieces_.length; n++) {\n        e.push(this.pieces_[n]);\n      }\n\n      if (t instanceof i) for (n = t.pieceNum_; n < t.pieces_.length; n++) {\n        e.push(t.pieces_[n]);\n      } else {\n        var r = t.split(\"/\");\n\n        for (n = 0; n < r.length; n++) {\n          0 < r[n].length && e.push(r[n]);\n        }\n      }\n      return new i(e, 0);\n    }, i.prototype.isEmpty = function () {\n      return this.pieceNum_ >= this.pieces_.length;\n    }, i.relativePath = function (t, e) {\n      var n = t.getFront(),\n          r = e.getFront();\n      if (null === n) return e;\n      if (n === r) return i.relativePath(t.popFront(), e.popFront());\n      throw new Error(\"INTERNAL ERROR: innerPath (\" + e + \") is not within outerPath (\" + t + \")\");\n    }, i.comparePaths = function (t, e) {\n      for (var n = t.slice(), r = e.slice(), i = 0; i < n.length && i < r.length; i++) {\n        var o = No(n[i], r[i]);\n        if (0 !== o) return o;\n      }\n\n      return n.length === r.length ? 0 : n.length < r.length ? -1 : 1;\n    }, i.prototype.equals = function (t) {\n      if (this.getLength() !== t.getLength()) return !1;\n\n      for (var e = this.pieceNum_, n = t.pieceNum_; e <= this.pieces_.length; e++, n++) {\n        if (this.pieces_[e] !== t.pieces_[n]) return !1;\n      }\n\n      return !0;\n    }, i.prototype.contains = function (t) {\n      var e = this.pieceNum_,\n          n = t.pieceNum_;\n      if (this.getLength() > t.getLength()) return !1;\n\n      for (; e < this.pieces_.length;) {\n        if (this.pieces_[e] !== t.pieces_[n]) return !1;\n        ++e, ++n;\n      }\n\n      return !0;\n    }, i;\n  }(),\n      qo = function () {\n    function t(t, e) {\n      this.errorPrefix_ = e, this.parts_ = t.slice(), this.byteLength_ = Math.max(1, this.parts_.length);\n\n      for (var n = 0; n < this.parts_.length; n++) {\n        this.byteLength_ += Ki(this.parts_[n]);\n      }\n\n      this.checkValid_();\n    }\n\n    return Object.defineProperty(t, \"MAX_PATH_DEPTH\", {\n      get: function get() {\n        return 32;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t, \"MAX_PATH_LENGTH_BYTES\", {\n      get: function get() {\n        return 768;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.push = function (t) {\n      0 < this.parts_.length && (this.byteLength_ += 1), this.parts_.push(t), this.byteLength_ += Ki(t), this.checkValid_();\n    }, t.prototype.pop = function () {\n      var t = this.parts_.pop();\n      this.byteLength_ -= Ki(t), 0 < this.parts_.length && (this.byteLength_ -= 1);\n    }, t.prototype.checkValid_ = function () {\n      if (this.byteLength_ > t.MAX_PATH_LENGTH_BYTES) throw new Error(this.errorPrefix_ + \"has a key path longer than \" + t.MAX_PATH_LENGTH_BYTES + \" bytes (\" + this.byteLength_ + \").\");\n      if (this.parts_.length > t.MAX_PATH_DEPTH) throw new Error(this.errorPrefix_ + \"path specified exceeds the maximum depth that can be written (\" + t.MAX_PATH_DEPTH + \") or object contains a cycle \" + this.toErrorString());\n    }, t.prototype.toErrorString = function () {\n      return 0 == this.parts_.length ? \"\" : \"in property '\" + this.parts_.join(\".\") + \"'\";\n    }, t;\n  }(),\n      Vo = \"firebaseio.com\",\n      Bo = \"websocket\",\n      jo = \"long_polling\",\n      Wo = function () {\n    function t(t, e, n, r, i) {\n      void 0 === i && (i = \"\"), this.secure = e, this.namespace = n, this.webSocketOnly = r, this.persistenceKey = i, this.host = t.toLowerCase(), this.domain = this.host.substr(this.host.indexOf(\".\") + 1), this.internalHost = co.get(\"host:\" + t) || this.host;\n    }\n\n    return t.prototype.needsQueryParam = function () {\n      return this.host !== this.internalHost || this.isCustomHost();\n    }, t.prototype.isCacheableHost = function () {\n      return \"s-\" === this.internalHost.substr(0, 2);\n    }, t.prototype.isDemoHost = function () {\n      return \"firebaseio-demo.com\" === this.domain;\n    }, t.prototype.isCustomHost = function () {\n      return \"firebaseio.com\" !== this.domain && \"firebaseio-demo.com\" !== this.domain;\n    }, t.prototype.updateHost = function (t) {\n      t !== this.internalHost && (this.internalHost = t, this.isCacheableHost() && co.set(\"host:\" + this.host, this.internalHost));\n    }, t.prototype.connectionURL = function (t, e) {\n      var n;\n      if (fi(\"string\" == typeof t, \"typeof type must == string\"), fi(\"object\" == typeof e, \"typeof params must == object\"), t === Bo) n = (this.secure ? \"wss://\" : \"ws://\") + this.internalHost + \"/.ws?\";else {\n        if (t !== jo) throw new Error(\"Unknown connection type: \" + t);\n        n = (this.secure ? \"https://\" : \"http://\") + this.internalHost + \"/.lp?\";\n      }\n      this.needsQueryParam() && (e.ns = this.namespace);\n      var r = [];\n      return Oo(e, function (t, e) {\n        r.push(t + \"=\" + e);\n      }), n + r.join(\"&\");\n    }, t.prototype.toString = function () {\n      var t = this.toURLString();\n      return this.persistenceKey && (t += \"<\" + this.persistenceKey + \">\"), t;\n    }, t.prototype.toURLString = function () {\n      return (this.secure ? \"https://\" : \"http://\") + this.host;\n    }, t;\n  }();\n\n  var Ko,\n      Qo,\n      Ho,\n      Go,\n      zo,\n      Yo = function Yo(t) {\n    var e = Xo(t),\n        n = e.subdomain;\n    \"firebase\" === e.domain && Eo(e.host + \" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead\"), n && \"undefined\" != n || \"localhost\" === e.domain || Eo(\"Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com\"), e.secure || \"undefined\" != typeof window && window.location && window.location.protocol && -1 !== window.location.protocol.indexOf(\"https:\") && To(\"Insecure Firebase access from a secure page. Please use https in calls to new Firebase().\");\n    var r = \"ws\" === e.scheme || \"wss\" === e.scheme;\n    return {\n      repoInfo: new Wo(e.host, e.secure, n, r),\n      path: new Uo(e.pathString)\n    };\n  },\n      Xo = function Xo(t) {\n    var e = \"\",\n        n = \"\",\n        r = \"\",\n        i = \"\",\n        o = !0,\n        a = \"https\",\n        s = 443;\n\n    if (\"string\" == typeof t) {\n      var u = t.indexOf(\"//\");\n      0 <= u && (a = t.substring(0, u - 1), t = t.substring(u + 2));\n      var c = t.indexOf(\"/\");\n      -1 === c && (c = t.length);\n      var h = t.indexOf(\"?\");\n      -1 === h && (h = t.length), e = t.substring(0, Math.min(c, h)), c < h && (i = function (t) {\n        for (var e = \"\", n = t.split(\"/\"), r = 0; r < n.length; r++) {\n          if (0 < n[r].length) {\n            var i = n[r];\n\n            try {\n              i = decodeURIComponent(i.replace(/\\+/g, \" \"));\n            } catch (t) {}\n\n            e += \"/\" + i;\n          }\n        }\n\n        return e;\n      }(t.substring(c, h)));\n\n      var l = function (t) {\n        var e,\n            n,\n            r = {};\n        \"?\" === t.charAt(0) && (t = t.substring(1));\n\n        try {\n          for (var i = ui(t.split(\"&\")), o = i.next(); !o.done; o = i.next()) {\n            var a = o.value;\n\n            if (0 !== a.length) {\n              var s = a.split(\"=\");\n              2 === s.length ? r[decodeURIComponent(s[0])] = decodeURIComponent(s[1]) : To(\"Invalid query segment '\" + a + \"' in query '\" + t + \"'\");\n            }\n          }\n        } catch (t) {\n          e = {\n            error: t\n          };\n        } finally {\n          try {\n            o && !o.done && (n = i.return) && n.call(i);\n          } finally {\n            if (e) throw e.error;\n          }\n        }\n\n        return r;\n      }(t.substring(Math.min(t.length, h)));\n\n      0 <= (u = e.indexOf(\":\")) ? (o = \"https\" === a || \"wss\" === a, s = parseInt(e.substring(u + 1), 10)) : u = t.length;\n      var f = e.split(\".\");\n      3 === f.length ? (n = f[1], r = f[0].toLowerCase()) : 2 === f.length ? n = f[0] : \"localhost\" === f[0].slice(0, u).toLowerCase() && (n = \"localhost\"), \"\" === r && \"ns\" in l && (r = l.ns);\n    }\n\n    return {\n      host: e,\n      port: s,\n      domain: n,\n      subdomain: r,\n      secure: o,\n      scheme: a,\n      pathString: i\n    };\n  },\n      Jo = /[\\[\\].#$\\/\\u0000-\\u001F\\u007F]/,\n      $o = /[\\[\\].#$\\u0000-\\u001F\\u007F]/,\n      Zo = 10485760,\n      ta = function ta(t) {\n    return \"string\" == typeof t && 0 !== t.length && !Jo.test(t);\n  },\n      ea = function ea(t) {\n    return \"string\" == typeof t && 0 !== t.length && !$o.test(t);\n  },\n      na = function na(t) {\n    return null === t || \"string\" == typeof t || \"number\" == typeof t && !So(t) || t && \"object\" == typeof t && Di(t, \".sv\");\n  },\n      ra = function ra(t, e, n, r, i) {\n    i && void 0 === n || ia(qi(t, e, i), n, r);\n  },\n      ia = function ia(n, t, e) {\n    var r = e instanceof Uo ? new qo(e, n) : e;\n    if (void 0 === t) throw new Error(n + \"contains undefined \" + r.toErrorString());\n    if (\"function\" == typeof t) throw new Error(n + \"contains a function \" + r.toErrorString() + \" with contents = \" + t.toString());\n    if (So(t)) throw new Error(n + \"contains \" + t.toString() + \" \" + r.toErrorString());\n    if (\"string\" == typeof t && t.length > Zo / 3 && Ki(t) > Zo) throw new Error(n + \"contains a string greater than \" + Zo + \" utf8 bytes \" + r.toErrorString() + \" ('\" + t.substring(0, 50) + \"...')\");\n\n    if (t && \"object\" == typeof t) {\n      var i = !1,\n          o = !1;\n      if (Oo(t, function (t, e) {\n        if (\".value\" === t) i = !0;else if (\".priority\" !== t && \".sv\" !== t && (o = !0, !ta(t))) throw new Error(n + \" contains an invalid key (\" + t + \") \" + r.toErrorString() + '.  Keys must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"');\n        r.push(t), ia(n, e, r), r.pop();\n      }), i && o) throw new Error(n + ' contains \".value\" child ' + r.toErrorString() + \" in addition to actual children.\");\n    }\n  },\n      oa = function oa(t, e, n, r, i) {\n    if (!i || void 0 !== n) {\n      var o = qi(t, e, i);\n      if (!n || \"object\" != typeof n || Array.isArray(n)) throw new Error(o + \" must be an object containing the children to replace.\");\n      var a = [];\n      Oo(n, function (t, e) {\n        var n = new Uo(t);\n        if (ia(o, e, r.child(n)), \".priority\" === n.getBack() && !na(e)) throw new Error(o + \"contains an invalid value for '\" + n.toString() + \"', which must be a valid Firebase priority (a string, finite number, server value, or null).\");\n        a.push(n);\n      }), function (t, e) {\n        var n, r;\n\n        for (n = 0; n < e.length; n++) {\n          for (var i = (r = e[n]).slice(), o = 0; o < i.length; o++) {\n            if (\".priority\" === i[o] && o === i.length - 1) ;else if (!ta(i[o])) throw new Error(t + \"contains an invalid key (\" + i[o] + \") in path \" + r.toString() + '. Keys must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"');\n          }\n        }\n\n        e.sort(Uo.comparePaths);\n        var a = null;\n\n        for (n = 0; n < e.length; n++) {\n          if (r = e[n], null !== a && a.contains(r)) throw new Error(t + \"contains a path \" + a.toString() + \" that is ancestor of another path \" + r.toString());\n          a = r;\n        }\n      }(o, a);\n    }\n  },\n      aa = function aa(t, e, n, r) {\n    if (!r || void 0 !== n) {\n      if (So(n)) throw new Error(qi(t, e, r) + \"is \" + n.toString() + \", but must be a valid Firebase priority (a string, finite number, server value, or null).\");\n      if (!na(n)) throw new Error(qi(t, e, r) + \"must be a valid Firebase priority (a string, finite number, server value, or null).\");\n    }\n  },\n      sa = function sa(t, e, n, r) {\n    if (!r || void 0 !== n) switch (n) {\n      case \"value\":\n      case \"child_added\":\n      case \"child_removed\":\n      case \"child_changed\":\n      case \"child_moved\":\n        break;\n\n      default:\n        throw new Error(qi(t, e, r) + 'must be a valid event type = \"value\", \"child_added\", \"child_removed\", \"child_changed\", or \"child_moved\".');\n    }\n  },\n      ua = function ua(t, e, n, r) {\n    if (!(r && void 0 === n || ta(n))) throw new Error(qi(t, e, r) + 'was an invalid key = \"' + n + '\".  Firebase keys must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\").');\n  },\n      ca = function ca(t, e, n, r) {\n    if (!(r && void 0 === n || ea(n))) throw new Error(qi(t, e, r) + 'was an invalid path = \"' + n + '\". Paths must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\"');\n  },\n      ha = function ha(t, e) {\n    if (\".info\" === e.getFront()) throw new Error(t + \" failed = Can't modify data under /.info/\");\n  },\n      la = function la(t, e, n) {\n    var r,\n        i = n.path.toString();\n    if (\"string\" != typeof n.repoInfo.host || 0 === n.repoInfo.host.length || !ta(n.repoInfo.namespace) && \"localhost\" !== n.repoInfo.host.split(\":\")[0] || 0 !== i.length && ((r = i) && (r = r.replace(/^\\/*\\.info(\\/|$)/, \"/\")), !ea(r))) throw new Error(qi(t, e, !1) + 'must be a valid firebase URL and the path can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\".');\n  },\n      fa = function () {\n    function t(t, e) {\n      this.repo_ = t, this.path_ = e;\n    }\n\n    return t.prototype.cancel = function (t) {\n      Ui(\"OnDisconnect.cancel\", 0, 1, arguments.length), Vi(\"OnDisconnect.cancel\", 1, t, !0);\n      var e = new bi();\n      return this.repo_.onDisconnectCancel(this.path_, e.wrapCallback(t)), e.promise;\n    }, t.prototype.remove = function (t) {\n      Ui(\"OnDisconnect.remove\", 0, 1, arguments.length), ha(\"OnDisconnect.remove\", this.path_), Vi(\"OnDisconnect.remove\", 1, t, !0);\n      var e = new bi();\n      return this.repo_.onDisconnectSet(this.path_, null, e.wrapCallback(t)), e.promise;\n    }, t.prototype.set = function (t, e) {\n      Ui(\"OnDisconnect.set\", 1, 2, arguments.length), ha(\"OnDisconnect.set\", this.path_), ra(\"OnDisconnect.set\", 1, t, this.path_, !1), Vi(\"OnDisconnect.set\", 2, e, !0);\n      var n = new bi();\n      return this.repo_.onDisconnectSet(this.path_, t, n.wrapCallback(e)), n.promise;\n    }, t.prototype.setWithPriority = function (t, e, n) {\n      Ui(\"OnDisconnect.setWithPriority\", 2, 3, arguments.length), ha(\"OnDisconnect.setWithPriority\", this.path_), ra(\"OnDisconnect.setWithPriority\", 1, t, this.path_, !1), aa(\"OnDisconnect.setWithPriority\", 2, e, !1), Vi(\"OnDisconnect.setWithPriority\", 3, n, !0);\n      var r = new bi();\n      return this.repo_.onDisconnectSetWithPriority(this.path_, t, e, r.wrapCallback(n)), r.promise;\n    }, t.prototype.update = function (t, e) {\n      if (Ui(\"OnDisconnect.update\", 1, 2, arguments.length), ha(\"OnDisconnect.update\", this.path_), Array.isArray(t)) {\n        for (var n = {}, r = 0; r < t.length; ++r) {\n          n[\"\" + r] = t[r];\n        }\n\n        t = n, To(\"Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.\");\n      }\n\n      oa(\"OnDisconnect.update\", 1, t, this.path_, !1), Vi(\"OnDisconnect.update\", 2, e, !0);\n      var i = new bi();\n      return this.repo_.onDisconnectUpdate(this.path_, t, i.wrapCallback(e)), i.promise;\n    }, t;\n  }(),\n      pa = function () {\n    function t(t, e) {\n      this.committed = t, this.snapshot = e;\n    }\n\n    return t.prototype.toJSON = function () {\n      return Ui(\"TransactionResult.toJSON\", 0, 1, arguments.length), {\n        committed: this.committed,\n        snapshot: this.snapshot.toJSON()\n      };\n    }, t;\n  }(),\n      da = (Ko = \"-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz\", Qo = 0, Ho = [], function (t) {\n    var e,\n        n = t === Qo;\n    Qo = t;\n    var r = new Array(8);\n\n    for (e = 7; 0 <= e; e--) {\n      r[e] = Ko.charAt(t % 64), t = Math.floor(t / 64);\n    }\n\n    fi(0 === t, \"Cannot push at time == 0\");\n    var i = r.join(\"\");\n\n    if (n) {\n      for (e = 11; 0 <= e && 63 === Ho[e]; e--) {\n        Ho[e] = 0;\n      }\n\n      Ho[e]++;\n    } else for (e = 0; e < 12; e++) {\n      Ho[e] = Math.floor(64 * Math.random());\n    }\n\n    for (e = 0; e < 12; e++) {\n      i += Ko.charAt(Ho[e]);\n    }\n\n    return fi(20 === i.length, \"nextPushId: Length should be 20.\"), i;\n  }),\n      ya = function () {\n    function n(t, e) {\n      this.name = t, this.node = e;\n    }\n\n    return n.Wrap = function (t, e) {\n      return new n(t, e);\n    }, n;\n  }(),\n      ma = function () {\n    function t() {}\n\n    return t.prototype.getCompare = function () {\n      return this.compare.bind(this);\n    }, t.prototype.indexedValueChanged = function (t, e) {\n      var n = new ya(Io, t),\n          r = new ya(Io, e);\n      return 0 !== this.compare(n, r);\n    }, t.prototype.minPost = function () {\n      return ya.MIN;\n    }, t;\n  }(),\n      ga = function (t) {\n    function e() {\n      return null !== t && t.apply(this, arguments) || this;\n    }\n\n    return ii(e, t), Object.defineProperty(e, \"__EMPTY_NODE\", {\n      get: function get() {\n        return Go;\n      },\n      set: function set(t) {\n        Go = t;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), e.prototype.compare = function (t, e) {\n      return No(t.name, e.name);\n    }, e.prototype.isDefinedOn = function (t) {\n      throw pi(\"KeyIndex.isDefinedOn not expected to be called.\");\n    }, e.prototype.indexedValueChanged = function (t, e) {\n      return !1;\n    }, e.prototype.minPost = function () {\n      return ya.MIN;\n    }, e.prototype.maxPost = function () {\n      return new ya(Co, Go);\n    }, e.prototype.makePost = function (t, e) {\n      return fi(\"string\" == typeof t, \"KeyIndex indexValue must always be a string.\"), new ya(t, Go);\n    }, e.prototype.toString = function () {\n      return \".key\";\n    }, e;\n  }(ma),\n      va = new ga();\n\n  var ba,\n      wa,\n      _a,\n      Ea = function Ea(t) {\n    return \"number\" == typeof t ? \"number:\" + Po(t) : \"string:\" + t;\n  },\n      Ta = function Ta(t) {\n    if (t.isLeafNode()) {\n      var e = t.val();\n      fi(\"string\" == typeof e || \"number\" == typeof e || \"object\" == typeof e && Di(e, \".sv\"), \"Priority must be a string or number.\");\n    } else fi(t === zo || t.isEmpty(), \"priority of unexpected type.\");\n\n    fi(t === zo || t.getPriority().isEmpty(), \"Priority nodes can't have a priority of their own.\");\n  },\n      Sa = function () {\n    function o(t, e) {\n      void 0 === e && (e = o.__childrenNodeConstructor.EMPTY_NODE), this.value_ = t, this.priorityNode_ = e, this.lazyHash_ = null, fi(void 0 !== this.value_ && null !== this.value_, \"LeafNode shouldn't be created with null/undefined value.\"), Ta(this.priorityNode_);\n    }\n\n    return Object.defineProperty(o, \"__childrenNodeConstructor\", {\n      get: function get() {\n        return ba;\n      },\n      set: function set(t) {\n        ba = t;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), o.prototype.isLeafNode = function () {\n      return !0;\n    }, o.prototype.getPriority = function () {\n      return this.priorityNode_;\n    }, o.prototype.updatePriority = function (t) {\n      return new o(this.value_, t);\n    }, o.prototype.getImmediateChild = function (t) {\n      return \".priority\" === t ? this.priorityNode_ : o.__childrenNodeConstructor.EMPTY_NODE;\n    }, o.prototype.getChild = function (t) {\n      return t.isEmpty() ? this : \".priority\" === t.getFront() ? this.priorityNode_ : o.__childrenNodeConstructor.EMPTY_NODE;\n    }, o.prototype.hasChild = function () {\n      return !1;\n    }, o.prototype.getPredecessorChildName = function (t, e) {\n      return null;\n    }, o.prototype.updateImmediateChild = function (t, e) {\n      return \".priority\" === t ? this.updatePriority(e) : e.isEmpty() && \".priority\" !== t ? this : o.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t, e).updatePriority(this.priorityNode_);\n    }, o.prototype.updateChild = function (t, e) {\n      var n = t.getFront();\n      return null === n ? e : e.isEmpty() && \".priority\" !== n ? this : (fi(\".priority\" !== n || 1 === t.getLength(), \".priority must be the last token in a path\"), this.updateImmediateChild(n, o.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(), e)));\n    }, o.prototype.isEmpty = function () {\n      return !1;\n    }, o.prototype.numChildren = function () {\n      return 0;\n    }, o.prototype.forEachChild = function (t, e) {\n      return !1;\n    }, o.prototype.val = function (t) {\n      return t && !this.getPriority().isEmpty() ? {\n        \".value\": this.getValue(),\n        \".priority\": this.getPriority().val()\n      } : this.getValue();\n    }, o.prototype.hash = function () {\n      if (null === this.lazyHash_) {\n        var t = \"\";\n        this.priorityNode_.isEmpty() || (t += \"priority:\" + Ea(this.priorityNode_.val()) + \":\");\n        var e = typeof this.value_;\n        t += e + \":\", t += \"number\" === e ? Po(this.value_) : this.value_, this.lazyHash_ = po(t);\n      }\n\n      return this.lazyHash_;\n    }, o.prototype.getValue = function () {\n      return this.value_;\n    }, o.prototype.compareTo = function (t) {\n      return t === o.__childrenNodeConstructor.EMPTY_NODE ? 1 : t instanceof o.__childrenNodeConstructor ? -1 : (fi(t.isLeafNode(), \"Unknown node type\"), this.compareToLeafNode_(t));\n    }, o.prototype.compareToLeafNode_ = function (t) {\n      var e = typeof t.value_,\n          n = typeof this.value_,\n          r = o.VALUE_TYPE_ORDER.indexOf(e),\n          i = o.VALUE_TYPE_ORDER.indexOf(n);\n      return fi(0 <= r, \"Unknown leaf type: \" + e), fi(0 <= i, \"Unknown leaf type: \" + n), r === i ? \"object\" === n ? 0 : this.value_ < t.value_ ? -1 : this.value_ === t.value_ ? 0 : 1 : i - r;\n    }, o.prototype.withIndex = function () {\n      return this;\n    }, o.prototype.isIndexed = function () {\n      return !0;\n    }, o.prototype.equals = function (t) {\n      if (t === this) return !0;\n\n      if (t.isLeafNode()) {\n        var e = t;\n        return this.value_ === e.value_ && this.priorityNode_.equals(e.priorityNode_);\n      }\n\n      return !1;\n    }, o.VALUE_TYPE_ORDER = [\"object\", \"boolean\", \"number\", \"string\"], o;\n  }();\n\n  var Ia,\n      Ca,\n      Na = new (function (t) {\n    function e() {\n      return null !== t && t.apply(this, arguments) || this;\n    }\n\n    return ii(e, t), e.prototype.compare = function (t, e) {\n      var n = t.node.getPriority(),\n          r = e.node.getPriority(),\n          i = n.compareTo(r);\n      return 0 === i ? No(t.name, e.name) : i;\n    }, e.prototype.isDefinedOn = function (t) {\n      return !t.getPriority().isEmpty();\n    }, e.prototype.indexedValueChanged = function (t, e) {\n      return !t.getPriority().equals(e.getPriority());\n    }, e.prototype.minPost = function () {\n      return ya.MIN;\n    }, e.prototype.maxPost = function () {\n      return new ya(Co, new Sa(\"[PRIORITY-POST]\", _a));\n    }, e.prototype.makePost = function (t, e) {\n      var n = wa(t);\n      return new ya(e, new Sa(\"[PRIORITY-POST]\", n));\n    }, e.prototype.toString = function () {\n      return \".priority\";\n    }, e;\n  }(ma))(),\n      Aa = function () {\n    function t(t, e, n, r, i) {\n      void 0 === i && (i = null), this.isReverse_ = r, this.resultGenerator_ = i, this.nodeStack_ = [];\n\n      for (var o = 1; !t.isEmpty();) {\n        if (t = t, o = e ? n(t.key, e) : 1, r && (o *= -1), o < 0) t = this.isReverse_ ? t.left : t.right;else {\n          if (0 === o) {\n            this.nodeStack_.push(t);\n            break;\n          }\n\n          this.nodeStack_.push(t), t = this.isReverse_ ? t.right : t.left;\n        }\n      }\n    }\n\n    return t.prototype.getNext = function () {\n      if (0 === this.nodeStack_.length) return null;\n      var t,\n          e = this.nodeStack_.pop();\n      if (t = this.resultGenerator_ ? this.resultGenerator_(e.key, e.value) : {\n        key: e.key,\n        value: e.value\n      }, this.isReverse_) for (e = e.left; !e.isEmpty();) {\n        this.nodeStack_.push(e), e = e.right;\n      } else for (e = e.right; !e.isEmpty();) {\n        this.nodeStack_.push(e), e = e.left;\n      }\n      return t;\n    }, t.prototype.hasNext = function () {\n      return 0 < this.nodeStack_.length;\n    }, t.prototype.peek = function () {\n      if (0 === this.nodeStack_.length) return null;\n      var t = this.nodeStack_[this.nodeStack_.length - 1];\n      return this.resultGenerator_ ? this.resultGenerator_(t.key, t.value) : {\n        key: t.key,\n        value: t.value\n      };\n    }, t;\n  }(),\n      ka = function () {\n    function o(t, e, n, r, i) {\n      this.key = t, this.value = e, this.color = null != n ? n : o.RED, this.left = null != r ? r : Ra.EMPTY_NODE, this.right = null != i ? i : Ra.EMPTY_NODE;\n    }\n\n    return o.prototype.copy = function (t, e, n, r, i) {\n      return new o(null != t ? t : this.key, null != e ? e : this.value, null != n ? n : this.color, null != r ? r : this.left, null != i ? i : this.right);\n    }, o.prototype.count = function () {\n      return this.left.count() + 1 + this.right.count();\n    }, o.prototype.isEmpty = function () {\n      return !1;\n    }, o.prototype.inorderTraversal = function (t) {\n      return this.left.inorderTraversal(t) || t(this.key, this.value) || this.right.inorderTraversal(t);\n    }, o.prototype.reverseTraversal = function (t) {\n      return this.right.reverseTraversal(t) || t(this.key, this.value) || this.left.reverseTraversal(t);\n    }, o.prototype.min_ = function () {\n      return this.left.isEmpty() ? this : this.left.min_();\n    }, o.prototype.minKey = function () {\n      return this.min_().key;\n    }, o.prototype.maxKey = function () {\n      return this.right.isEmpty() ? this.key : this.right.maxKey();\n    }, o.prototype.insert = function (t, e, n) {\n      var r, i;\n      return (i = (r = n(t, (i = this).key)) < 0 ? i.copy(null, null, null, i.left.insert(t, e, n), null) : 0 === r ? i.copy(null, e, null, null, null) : i.copy(null, null, null, null, i.right.insert(t, e, n))).fixUp_();\n    }, o.prototype.removeMin_ = function () {\n      if (this.left.isEmpty()) return Ra.EMPTY_NODE;\n      var t = this;\n      return t.left.isRed_() || t.left.left.isRed_() || (t = t.moveRedLeft_()), (t = t.copy(null, null, null, t.left.removeMin_(), null)).fixUp_();\n    }, o.prototype.remove = function (t, e) {\n      var n, r;\n      if (e(t, (n = this).key) < 0) n.left.isEmpty() || n.left.isRed_() || n.left.left.isRed_() || (n = n.moveRedLeft_()), n = n.copy(null, null, null, n.left.remove(t, e), null);else {\n        if (n.left.isRed_() && (n = n.rotateRight_()), n.right.isEmpty() || n.right.isRed_() || n.right.left.isRed_() || (n = n.moveRedRight_()), 0 === e(t, n.key)) {\n          if (n.right.isEmpty()) return Ra.EMPTY_NODE;\n          r = n.right.min_(), n = n.copy(r.key, r.value, null, null, n.right.removeMin_());\n        }\n\n        n = n.copy(null, null, null, null, n.right.remove(t, e));\n      }\n      return n.fixUp_();\n    }, o.prototype.isRed_ = function () {\n      return this.color;\n    }, o.prototype.fixUp_ = function () {\n      var t = this;\n      return t.right.isRed_() && !t.left.isRed_() && (t = t.rotateLeft_()), t.left.isRed_() && t.left.left.isRed_() && (t = t.rotateRight_()), t.left.isRed_() && t.right.isRed_() && (t = t.colorFlip_()), t;\n    }, o.prototype.moveRedLeft_ = function () {\n      var t = this.colorFlip_();\n      return t.right.left.isRed_() && (t = (t = (t = t.copy(null, null, null, null, t.right.rotateRight_())).rotateLeft_()).colorFlip_()), t;\n    }, o.prototype.moveRedRight_ = function () {\n      var t = this.colorFlip_();\n      return t.left.left.isRed_() && (t = (t = t.rotateRight_()).colorFlip_()), t;\n    }, o.prototype.rotateLeft_ = function () {\n      var t = this.copy(null, null, o.RED, null, this.right.left);\n      return this.right.copy(null, null, this.color, t, null);\n    }, o.prototype.rotateRight_ = function () {\n      var t = this.copy(null, null, o.RED, this.left.right, null);\n      return this.left.copy(null, null, this.color, null, t);\n    }, o.prototype.colorFlip_ = function () {\n      var t = this.left.copy(null, null, !this.left.color, null, null),\n          e = this.right.copy(null, null, !this.right.color, null, null);\n      return this.copy(null, null, !this.color, t, e);\n    }, o.prototype.checkMaxDepth_ = function () {\n      var t = this.check_();\n      return Math.pow(2, t) <= this.count() + 1;\n    }, o.prototype.check_ = function () {\n      var t;\n      if (this.isRed_() && this.left.isRed_()) throw new Error(\"Red node has red child(\" + this.key + \",\" + this.value + \")\");\n      if (this.right.isRed_()) throw new Error(\"Right child of (\" + this.key + \",\" + this.value + \") is red\");\n      if ((t = this.left.check_()) !== this.right.check_()) throw new Error(\"Black depths differ\");\n      return t + (this.isRed_() ? 0 : 1);\n    }, o.RED = !0, o.BLACK = !1, o;\n  }(),\n      Da = function () {\n    function t() {}\n\n    return t.prototype.copy = function (t, e, n, r, i) {\n      return this;\n    }, t.prototype.insert = function (t, e, n) {\n      return new ka(t, e, null);\n    }, t.prototype.remove = function (t, e) {\n      return this;\n    }, t.prototype.count = function () {\n      return 0;\n    }, t.prototype.isEmpty = function () {\n      return !0;\n    }, t.prototype.inorderTraversal = function (t) {\n      return !1;\n    }, t.prototype.reverseTraversal = function (t) {\n      return !1;\n    }, t.prototype.minKey = function () {\n      return null;\n    }, t.prototype.maxKey = function () {\n      return null;\n    }, t.prototype.check_ = function () {\n      return 0;\n    }, t.prototype.isRed_ = function () {\n      return !1;\n    }, t;\n  }(),\n      Ra = function () {\n    function n(t, e) {\n      void 0 === e && (e = n.EMPTY_NODE), this.comparator_ = t, this.root_ = e;\n    }\n\n    return n.prototype.insert = function (t, e) {\n      return new n(this.comparator_, this.root_.insert(t, e, this.comparator_).copy(null, null, ka.BLACK, null, null));\n    }, n.prototype.remove = function (t) {\n      return new n(this.comparator_, this.root_.remove(t, this.comparator_).copy(null, null, ka.BLACK, null, null));\n    }, n.prototype.get = function (t) {\n      for (var e, n = this.root_; !n.isEmpty();) {\n        if (0 === (e = this.comparator_(t, n.key))) return n.value;\n        e < 0 ? n = n.left : 0 < e && (n = n.right);\n      }\n\n      return null;\n    }, n.prototype.getPredecessorKey = function (t) {\n      for (var e, n = this.root_, r = null; !n.isEmpty();) {\n        if (0 === (e = this.comparator_(t, n.key))) {\n          if (n.left.isEmpty()) return r ? r.key : null;\n\n          for (n = n.left; !n.right.isEmpty();) {\n            n = n.right;\n          }\n\n          return n.key;\n        }\n\n        e < 0 ? n = n.left : 0 < e && (n = (r = n).right);\n      }\n\n      throw new Error(\"Attempted to find predecessor key for a nonexistent key.  What gives?\");\n    }, n.prototype.isEmpty = function () {\n      return this.root_.isEmpty();\n    }, n.prototype.count = function () {\n      return this.root_.count();\n    }, n.prototype.minKey = function () {\n      return this.root_.minKey();\n    }, n.prototype.maxKey = function () {\n      return this.root_.maxKey();\n    }, n.prototype.inorderTraversal = function (t) {\n      return this.root_.inorderTraversal(t);\n    }, n.prototype.reverseTraversal = function (t) {\n      return this.root_.reverseTraversal(t);\n    }, n.prototype.getIterator = function (t) {\n      return new Aa(this.root_, null, this.comparator_, !1, t);\n    }, n.prototype.getIteratorFrom = function (t, e) {\n      return new Aa(this.root_, t, this.comparator_, !1, e);\n    }, n.prototype.getReverseIteratorFrom = function (t, e) {\n      return new Aa(this.root_, t, this.comparator_, !0, e);\n    }, n.prototype.getReverseIterator = function (t) {\n      return new Aa(this.root_, null, this.comparator_, !0, t);\n    }, n.EMPTY_NODE = new Da(), n;\n  }(),\n      Oa = Math.log(2),\n      Pa = function () {\n    function t(t) {\n      var e;\n      this.count = (e = t + 1, parseInt(Math.log(e) / Oa, 10)), this.current_ = this.count - 1;\n      var n,\n          r = (n = this.count, parseInt(Array(n + 1).join(\"1\"), 2));\n      this.bits_ = t + 1 & r;\n    }\n\n    return t.prototype.nextBitIsOne = function () {\n      var t = !(this.bits_ & 1 << this.current_);\n      return this.current_--, t;\n    }, t;\n  }(),\n      xa = function xa(c, t, h, e) {\n    c.sort(t);\n\n    var l = function l(t, e) {\n      var n,\n          r,\n          i = e - t;\n      if (0 == i) return null;\n      if (1 == i) return n = c[t], r = h ? h(n) : n, new ka(r, n.node, ka.BLACK, null, null);\n      var o = parseInt(i / 2, 10) + t,\n          a = l(t, o),\n          s = l(o + 1, e);\n      return n = c[o], r = h ? h(n) : n, new ka(r, n.node, ka.BLACK, a, s);\n    },\n        n = function (t) {\n      for (var e = null, n = null, s = c.length, r = function r(t, e) {\n        var n = s - t,\n            r = s;\n        s -= t;\n        var i = l(n + 1, r),\n            o = c[n],\n            a = h ? h(o) : o;\n        u(new ka(a, o.node, e, null, i));\n      }, u = function u(t) {\n        e = e ? e.left = t : n = t;\n      }, i = 0; i < t.count; ++i) {\n        var o = t.nextBitIsOne(),\n            a = Math.pow(2, t.count - (i + 1));\n        o ? r(a, ka.BLACK) : (r(a, ka.BLACK), r(a, ka.RED));\n      }\n\n      return n;\n    }(new Pa(c.length));\n\n    return new Ra(e || t, n);\n  },\n      Ma = {},\n      La = function () {\n    function l(t, e) {\n      this.indexes_ = t, this.indexSet_ = e;\n    }\n\n    return Object.defineProperty(l, \"Default\", {\n      get: function get() {\n        return fi(Na, \"ChildrenNode.ts has not been loaded\"), Ia = Ia || new l({\n          \".priority\": Ma\n        }, {\n          \".priority\": Na\n        });\n      },\n      enumerable: !0,\n      configurable: !0\n    }), l.prototype.get = function (t) {\n      var e = Ri(this.indexes_, t);\n      if (!e) throw new Error(\"No index defined for \" + t);\n      return e instanceof Ra ? e : null;\n    }, l.prototype.hasIndex = function (t) {\n      return Di(this.indexSet_, t.toString());\n    }, l.prototype.addIndex = function (t, e) {\n      fi(t !== va, \"KeyIndex always exists and isn't meant to be added to the IndexMap.\");\n\n      for (var n, r = [], i = !1, o = e.getIterator(ya.Wrap), a = o.getNext(); a;) {\n        i = i || t.isDefinedOn(a.node), r.push(a), a = o.getNext();\n      }\n\n      n = i ? xa(r, t.getCompare()) : Ma;\n\n      var s = t.toString(),\n          u = _oi({}, this.indexSet_);\n\n      u[s] = t;\n\n      var c = _oi({}, this.indexes_);\n\n      return c[s] = n, new l(c, u);\n    }, l.prototype.addToIndexes = function (u, c) {\n      var h = this;\n      return new l(Pi(this.indexes_, function (t, e) {\n        var n = Ri(h.indexSet_, e);\n\n        if (fi(n, \"Missing index implementation for \" + e), t === Ma) {\n          if (n.isDefinedOn(u.node)) {\n            for (var r = [], i = c.getIterator(ya.Wrap), o = i.getNext(); o;) {\n              o.name != u.name && r.push(o), o = i.getNext();\n            }\n\n            return r.push(u), xa(r, n.getCompare());\n          }\n\n          return Ma;\n        }\n\n        var a = c.get(u.name),\n            s = t;\n        return a && (s = s.remove(new ya(u.name, a))), s.insert(u, u.node);\n      }), this.indexSet_);\n    }, l.prototype.removeFromIndexes = function (n, r) {\n      return new l(Pi(this.indexes_, function (t) {\n        if (t === Ma) return t;\n        var e = r.get(n.name);\n        return e ? t.remove(new ya(n.name, e)) : t;\n      }), this.indexSet_);\n    }, l;\n  }();\n\n  function Fa(t, e) {\n    return No(t.name, e.name);\n  }\n\n  function Ua(t, e) {\n    return No(t, e);\n  }\n\n  var qa = function () {\n    function s(t, e, n) {\n      this.children_ = t, this.priorityNode_ = e, this.indexMap_ = n, this.lazyHash_ = null, this.priorityNode_ && Ta(this.priorityNode_), this.children_.isEmpty() && fi(!this.priorityNode_ || this.priorityNode_.isEmpty(), \"An empty node cannot have a priority\");\n    }\n\n    return Object.defineProperty(s, \"EMPTY_NODE\", {\n      get: function get() {\n        return Ca || (Ca = new s(new Ra(Ua), null, La.Default));\n      },\n      enumerable: !0,\n      configurable: !0\n    }), s.prototype.isLeafNode = function () {\n      return !1;\n    }, s.prototype.getPriority = function () {\n      return this.priorityNode_ || Ca;\n    }, s.prototype.updatePriority = function (t) {\n      return this.children_.isEmpty() ? this : new s(this.children_, t, this.indexMap_);\n    }, s.prototype.getImmediateChild = function (t) {\n      if (\".priority\" === t) return this.getPriority();\n      var e = this.children_.get(t);\n      return null === e ? Ca : e;\n    }, s.prototype.getChild = function (t) {\n      var e = t.getFront();\n      return null === e ? this : this.getImmediateChild(e).getChild(t.popFront());\n    }, s.prototype.hasChild = function (t) {\n      return null !== this.children_.get(t);\n    }, s.prototype.updateImmediateChild = function (t, e) {\n      if (fi(e, \"We should always be passing snapshot nodes\"), \".priority\" === t) return this.updatePriority(e);\n      var n = new ya(t, e),\n          r = void 0,\n          i = void 0;\n      return i = e.isEmpty() ? (r = this.children_.remove(t), this.indexMap_.removeFromIndexes(n, this.children_)) : (r = this.children_.insert(t, e), this.indexMap_.addToIndexes(n, this.children_)), new s(r, r.isEmpty() ? Ca : this.priorityNode_, i);\n    }, s.prototype.updateChild = function (t, e) {\n      var n = t.getFront();\n      if (null === n) return e;\n      fi(\".priority\" !== t.getFront() || 1 === t.getLength(), \".priority must be the last token in a path\");\n      var r = this.getImmediateChild(n).updateChild(t.popFront(), e);\n      return this.updateImmediateChild(n, r);\n    }, s.prototype.isEmpty = function () {\n      return this.children_.isEmpty();\n    }, s.prototype.numChildren = function () {\n      return this.children_.count();\n    }, s.prototype.val = function (n) {\n      if (this.isEmpty()) return null;\n      var r = {},\n          i = 0,\n          o = 0,\n          a = !0;\n\n      if (this.forEachChild(Na, function (t, e) {\n        r[t] = e.val(n), i++, a && s.INTEGER_REGEXP_.test(t) ? o = Math.max(o, Number(t)) : a = !1;\n      }), !n && a && o < 2 * i) {\n        var t = [];\n\n        for (var e in r) {\n          t[e] = r[e];\n        }\n\n        return t;\n      }\n\n      return n && !this.getPriority().isEmpty() && (r[\".priority\"] = this.getPriority().val()), r;\n    }, s.prototype.hash = function () {\n      if (null === this.lazyHash_) {\n        var r = \"\";\n        this.getPriority().isEmpty() || (r += \"priority:\" + Ea(this.getPriority().val()) + \":\"), this.forEachChild(Na, function (t, e) {\n          var n = e.hash();\n          \"\" !== n && (r += \":\" + t + \":\" + n);\n        }), this.lazyHash_ = \"\" === r ? \"\" : po(r);\n      }\n\n      return this.lazyHash_;\n    }, s.prototype.getPredecessorChildName = function (t, e, n) {\n      var r = this.resolveIndex_(n);\n\n      if (r) {\n        var i = r.getPredecessorKey(new ya(t, e));\n        return i ? i.name : null;\n      }\n\n      return this.children_.getPredecessorKey(t);\n    }, s.prototype.getFirstChildName = function (t) {\n      var e = this.resolveIndex_(t);\n\n      if (e) {\n        var n = e.minKey();\n        return n && n.name;\n      }\n\n      return this.children_.minKey();\n    }, s.prototype.getFirstChild = function (t) {\n      var e = this.getFirstChildName(t);\n      return e ? new ya(e, this.children_.get(e)) : null;\n    }, s.prototype.getLastChildName = function (t) {\n      var e = this.resolveIndex_(t);\n\n      if (e) {\n        var n = e.maxKey();\n        return n && n.name;\n      }\n\n      return this.children_.maxKey();\n    }, s.prototype.getLastChild = function (t) {\n      var e = this.getLastChildName(t);\n      return e ? new ya(e, this.children_.get(e)) : null;\n    }, s.prototype.forEachChild = function (t, e) {\n      var n = this.resolveIndex_(t);\n      return n ? n.inorderTraversal(function (t) {\n        return e(t.name, t.node);\n      }) : this.children_.inorderTraversal(e);\n    }, s.prototype.getIterator = function (t) {\n      return this.getIteratorFrom(t.minPost(), t);\n    }, s.prototype.getIteratorFrom = function (t, e) {\n      var n = this.resolveIndex_(e);\n      if (n) return n.getIteratorFrom(t, function (t) {\n        return t;\n      });\n\n      for (var r = this.children_.getIteratorFrom(t.name, ya.Wrap), i = r.peek(); null != i && e.compare(i, t) < 0;) {\n        r.getNext(), i = r.peek();\n      }\n\n      return r;\n    }, s.prototype.getReverseIterator = function (t) {\n      return this.getReverseIteratorFrom(t.maxPost(), t);\n    }, s.prototype.getReverseIteratorFrom = function (t, e) {\n      var n = this.resolveIndex_(e);\n      if (n) return n.getReverseIteratorFrom(t, function (t) {\n        return t;\n      });\n\n      for (var r = this.children_.getReverseIteratorFrom(t.name, ya.Wrap), i = r.peek(); null != i && 0 < e.compare(i, t);) {\n        r.getNext(), i = r.peek();\n      }\n\n      return r;\n    }, s.prototype.compareTo = function (t) {\n      return this.isEmpty() ? t.isEmpty() ? 0 : -1 : t.isLeafNode() || t.isEmpty() ? 1 : t === Va ? -1 : 0;\n    }, s.prototype.withIndex = function (t) {\n      if (t === va || this.indexMap_.hasIndex(t)) return this;\n      var e = this.indexMap_.addIndex(t, this.children_);\n      return new s(this.children_, this.priorityNode_, e);\n    }, s.prototype.isIndexed = function (t) {\n      return t === va || this.indexMap_.hasIndex(t);\n    }, s.prototype.equals = function (t) {\n      if (t === this) return !0;\n      if (t.isLeafNode()) return !1;\n      var e = t;\n\n      if (this.getPriority().equals(e.getPriority())) {\n        if (this.children_.count() !== e.children_.count()) return !1;\n\n        for (var n = this.getIterator(Na), r = e.getIterator(Na), i = n.getNext(), o = r.getNext(); i && o;) {\n          if (i.name !== o.name || !i.node.equals(o.node)) return !1;\n          i = n.getNext(), o = r.getNext();\n        }\n\n        return null === i && null === o;\n      }\n\n      return !1;\n    }, s.prototype.resolveIndex_ = function (t) {\n      return t === va ? null : this.indexMap_.get(t.toString());\n    }, s.INTEGER_REGEXP_ = /^(0|[1-9]\\d*)$/, s;\n  }(),\n      Va = new (function (t) {\n    function e() {\n      return t.call(this, new Ra(Ua), qa.EMPTY_NODE, La.Default) || this;\n    }\n\n    return ii(e, t), e.prototype.compareTo = function (t) {\n      return t === this ? 0 : 1;\n    }, e.prototype.equals = function (t) {\n      return t === this;\n    }, e.prototype.getPriority = function () {\n      return this;\n    }, e.prototype.getImmediateChild = function (t) {\n      return qa.EMPTY_NODE;\n    }, e.prototype.isEmpty = function () {\n      return !1;\n    }, e;\n  }(qa))();\n\n  Object.defineProperties(ya, {\n    MIN: {\n      value: new ya(Io, qa.EMPTY_NODE)\n    },\n    MAX: {\n      value: new ya(Co, Va)\n    }\n  }), ga.__EMPTY_NODE = qa.EMPTY_NODE, Sa.__childrenNodeConstructor = qa, zo = Va, _a = Va;\n  var Ba = !0;\n\n  function ja(r, t) {\n    if (void 0 === t && (t = null), null === r) return qa.EMPTY_NODE;\n    if (\"object\" == typeof r && \".priority\" in r && (t = r[\".priority\"]), fi(null === t || \"string\" == typeof t || \"number\" == typeof t || \"object\" == typeof t && \".sv\" in t, \"Invalid priority type found: \" + typeof t), \"object\" == typeof r && \".value\" in r && null !== r[\".value\"] && (r = r[\".value\"]), \"object\" != typeof r || \".sv\" in r) return new Sa(r, ja(t));\n\n    if (r instanceof Array || !Ba) {\n      var i = qa.EMPTY_NODE;\n      return Oo(r, function (t, e) {\n        if (Di(r, t) && \".\" !== t.substring(0, 1)) {\n          var n = ja(e);\n          !n.isLeafNode() && n.isEmpty() || (i = i.updateImmediateChild(t, n));\n        }\n      }), i.updatePriority(ja(t));\n    }\n\n    var o = [],\n        a = !1;\n    if (Oo(r, function (t, e) {\n      if (\".\" !== t.substring(0, 1)) {\n        var n = ja(e);\n        n.isEmpty() || (a = a || !n.getPriority().isEmpty(), o.push(new ya(t, n)));\n      }\n    }), 0 == o.length) return qa.EMPTY_NODE;\n    var e = xa(o, Fa, function (t) {\n      return t.name;\n    }, Ua);\n\n    if (a) {\n      var n = xa(o, Na.getCompare());\n      return new qa(e, ja(t), new La({\n        \".priority\": n\n      }, {\n        \".priority\": Na\n      }));\n    }\n\n    return new qa(e, ja(t), La.Default);\n  }\n\n  wa = ja;\n\n  var Wa,\n      Ka,\n      Qa,\n      Ha = new (function (t) {\n    function e() {\n      return null !== t && t.apply(this, arguments) || this;\n    }\n\n    return ii(e, t), e.prototype.compare = function (t, e) {\n      var n = t.node.compareTo(e.node);\n      return 0 === n ? No(t.name, e.name) : n;\n    }, e.prototype.isDefinedOn = function (t) {\n      return !0;\n    }, e.prototype.indexedValueChanged = function (t, e) {\n      return !t.equals(e);\n    }, e.prototype.minPost = function () {\n      return ya.MIN;\n    }, e.prototype.maxPost = function () {\n      return ya.MAX;\n    }, e.prototype.makePost = function (t, e) {\n      var n = ja(t);\n      return new ya(e, n);\n    }, e.prototype.toString = function () {\n      return \".value\";\n    }, e;\n  }(ma))(),\n      Ga = function (n) {\n    function t(t) {\n      var e = n.call(this) || this;\n      return e.indexPath_ = t, fi(!t.isEmpty() && \".priority\" !== t.getFront(), \"Can't create PathIndex with empty path or .priority key\"), e;\n    }\n\n    return ii(t, n), t.prototype.extractChild = function (t) {\n      return t.getChild(this.indexPath_);\n    }, t.prototype.isDefinedOn = function (t) {\n      return !t.getChild(this.indexPath_).isEmpty();\n    }, t.prototype.compare = function (t, e) {\n      var n = this.extractChild(t.node),\n          r = this.extractChild(e.node),\n          i = n.compareTo(r);\n      return 0 === i ? No(t.name, e.name) : i;\n    }, t.prototype.makePost = function (t, e) {\n      var n = ja(t),\n          r = qa.EMPTY_NODE.updateChild(this.indexPath_, n);\n      return new ya(e, r);\n    }, t.prototype.maxPost = function () {\n      var t = qa.EMPTY_NODE.updateChild(this.indexPath_, Va);\n      return new ya(Co, t);\n    }, t.prototype.toString = function () {\n      return this.indexPath_.slice().join(\"/\");\n    }, t;\n  }(ma),\n      za = function () {\n    function i(t, e, n) {\n      this.node_ = t, this.ref_ = e, this.index_ = n;\n    }\n\n    return i.prototype.val = function () {\n      return Ui(\"DataSnapshot.val\", 0, 0, arguments.length), this.node_.val();\n    }, i.prototype.exportVal = function () {\n      return Ui(\"DataSnapshot.exportVal\", 0, 0, arguments.length), this.node_.val(!0);\n    }, i.prototype.toJSON = function () {\n      return Ui(\"DataSnapshot.toJSON\", 0, 1, arguments.length), this.exportVal();\n    }, i.prototype.exists = function () {\n      return Ui(\"DataSnapshot.exists\", 0, 0, arguments.length), !this.node_.isEmpty();\n    }, i.prototype.child = function (t) {\n      Ui(\"DataSnapshot.child\", 0, 1, arguments.length), t = String(t), ca(\"DataSnapshot.child\", 1, t, !1);\n      var e = new Uo(t),\n          n = this.ref_.child(e);\n      return new i(this.node_.getChild(e), n, Na);\n    }, i.prototype.hasChild = function (t) {\n      Ui(\"DataSnapshot.hasChild\", 1, 1, arguments.length), ca(\"DataSnapshot.hasChild\", 1, t, !1);\n      var e = new Uo(t);\n      return !this.node_.getChild(e).isEmpty();\n    }, i.prototype.getPriority = function () {\n      return Ui(\"DataSnapshot.getPriority\", 0, 0, arguments.length), this.node_.getPriority().val();\n    }, i.prototype.forEach = function (n) {\n      var r = this;\n      return Ui(\"DataSnapshot.forEach\", 1, 1, arguments.length), Vi(\"DataSnapshot.forEach\", 1, n, !1), !this.node_.isLeafNode() && !!this.node_.forEachChild(this.index_, function (t, e) {\n        return n(new i(e, r.ref_.child(t), Na));\n      });\n    }, i.prototype.hasChildren = function () {\n      return Ui(\"DataSnapshot.hasChildren\", 0, 0, arguments.length), !this.node_.isLeafNode() && !this.node_.isEmpty();\n    }, Object.defineProperty(i.prototype, \"key\", {\n      get: function get() {\n        return this.ref_.getKey();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), i.prototype.numChildren = function () {\n      return Ui(\"DataSnapshot.numChildren\", 0, 0, arguments.length), this.node_.numChildren();\n    }, i.prototype.getRef = function () {\n      return Ui(\"DataSnapshot.ref\", 0, 0, arguments.length), this.ref_;\n    }, Object.defineProperty(i.prototype, \"ref\", {\n      get: function get() {\n        return this.getRef();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), i;\n  }(),\n      Ya = function () {\n    function t(t, e, n, r) {\n      this.eventType = t, this.eventRegistration = e, this.snapshot = n, this.prevName = r;\n    }\n\n    return t.prototype.getPath = function () {\n      var t = this.snapshot.getRef();\n      return \"value\" === this.eventType ? t.path : t.getParent().path;\n    }, t.prototype.getEventType = function () {\n      return this.eventType;\n    }, t.prototype.getEventRunner = function () {\n      return this.eventRegistration.getEventRunner(this);\n    }, t.prototype.toString = function () {\n      return this.getPath().toString() + \":\" + this.eventType + \":\" + Ai(this.snapshot.exportVal());\n    }, t;\n  }(),\n      Xa = function () {\n    function t(t, e, n) {\n      this.eventRegistration = t, this.error = e, this.path = n;\n    }\n\n    return t.prototype.getPath = function () {\n      return this.path;\n    }, t.prototype.getEventType = function () {\n      return \"cancel\";\n    }, t.prototype.getEventRunner = function () {\n      return this.eventRegistration.getEventRunner(this);\n    }, t.prototype.toString = function () {\n      return this.path.toString() + \":cancel\";\n    }, t;\n  }(),\n      Ja = function () {\n    function e(t, e, n) {\n      this.callback_ = t, this.cancelCallback_ = e, this.context_ = n;\n    }\n\n    return e.prototype.respondsTo = function (t) {\n      return \"value\" === t;\n    }, e.prototype.createEvent = function (t, e) {\n      var n = e.getQueryParams().getIndex();\n      return new Ya(\"value\", this, new za(t.snapshotNode, e.getRef(), n));\n    }, e.prototype.getEventRunner = function (t) {\n      var e = this.context_;\n\n      if (\"cancel\" === t.getEventType()) {\n        fi(this.cancelCallback_, \"Raising a cancel event on a listener with no cancel callback\");\n        var n = this.cancelCallback_;\n        return function () {\n          n.call(e, t.error);\n        };\n      }\n\n      var r = this.callback_;\n      return function () {\n        r.call(e, t.snapshot);\n      };\n    }, e.prototype.createCancelEvent = function (t, e) {\n      return this.cancelCallback_ ? new Xa(this, t, e) : null;\n    }, e.prototype.matches = function (t) {\n      return t instanceof e && (!t.callback_ || !this.callback_ || t.callback_ === this.callback_ && t.context_ === this.context_);\n    }, e.prototype.hasAnyCallback = function () {\n      return null !== this.callback_;\n    }, e;\n  }(),\n      $a = function () {\n    function s(t, e, n) {\n      this.callbacks_ = t, this.cancelCallback_ = e, this.context_ = n;\n    }\n\n    return s.prototype.respondsTo = function (t) {\n      var e = \"children_added\" === t ? \"child_added\" : t;\n      return e = \"children_removed\" === e ? \"child_removed\" : e, Di(this.callbacks_, e);\n    }, s.prototype.createCancelEvent = function (t, e) {\n      return this.cancelCallback_ ? new Xa(this, t, e) : null;\n    }, s.prototype.createEvent = function (t, e) {\n      fi(null != t.childName, \"Child events should have a childName.\");\n      var n = e.getRef().child(t.childName),\n          r = e.getQueryParams().getIndex();\n      return new Ya(t.type, this, new za(t.snapshotNode, n, r), t.prevName);\n    }, s.prototype.getEventRunner = function (t) {\n      var e = this.context_;\n\n      if (\"cancel\" === t.getEventType()) {\n        fi(this.cancelCallback_, \"Raising a cancel event on a listener with no cancel callback\");\n        var n = this.cancelCallback_;\n        return function () {\n          n.call(e, t.error);\n        };\n      }\n\n      var r = this.callbacks_[t.eventType];\n      return function () {\n        r.call(e, t.snapshot, t.prevName);\n      };\n    }, s.prototype.matches = function (e) {\n      var n = this;\n\n      if (e instanceof s) {\n        if (!this.callbacks_ || !e.callbacks_) return !0;\n\n        if (this.context_ === e.context_) {\n          var t = Object.keys(e.callbacks_),\n              r = Object.keys(this.callbacks_),\n              i = t.length;\n\n          if (i === r.length) {\n            if (1 !== i) return r.every(function (t) {\n              return e.callbacks_[t] === n.callbacks_[t];\n            });\n            var o = t[0],\n                a = r[0];\n            return !(a !== o || e.callbacks_[o] && this.callbacks_[a] && e.callbacks_[o] !== this.callbacks_[a]);\n          }\n        }\n      }\n\n      return !1;\n    }, s.prototype.hasAnyCallback = function () {\n      return null !== this.callbacks_;\n    }, s;\n  }(),\n      Za = function () {\n    function c(t, e, n, r) {\n      this.repo = t, this.path = e, this.queryParams_ = n, this.orderByCalled_ = r;\n    }\n\n    return Object.defineProperty(c, \"__referenceConstructor\", {\n      get: function get() {\n        return fi(Wa, \"Reference.ts has not been loaded\"), Wa;\n      },\n      set: function set(t) {\n        Wa = t;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), c.validateQueryEndpoints_ = function (t) {\n      var e = null,\n          n = null;\n\n      if (t.hasStart() && (e = t.getIndexStartValue()), t.hasEnd() && (n = t.getIndexEndValue()), t.getIndex() === va) {\n        var r = \"Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().\",\n            i = \"Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.\";\n\n        if (t.hasStart()) {\n          if (t.getIndexStartName() != Io) throw new Error(r);\n          if (\"string\" != typeof e) throw new Error(i);\n        }\n\n        if (t.hasEnd()) {\n          if (t.getIndexEndName() != Co) throw new Error(r);\n          if (\"string\" != typeof n) throw new Error(i);\n        }\n      } else if (t.getIndex() === Na) {\n        if (null != e && !na(e) || null != n && !na(n)) throw new Error(\"Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).\");\n      } else if (fi(t.getIndex() instanceof Ga || t.getIndex() === Ha, \"unknown index type.\"), null != e && \"object\" == typeof e || null != n && \"object\" == typeof n) throw new Error(\"Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.\");\n    }, c.validateLimit_ = function (t) {\n      if (t.hasStart() && t.hasEnd() && t.hasLimit() && !t.hasAnchoredLimit()) throw new Error(\"Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.\");\n    }, c.prototype.validateNoPreviousOrderByCall_ = function (t) {\n      if (!0 === this.orderByCalled_) throw new Error(t + \": You can't combine multiple orderBy calls.\");\n    }, c.prototype.getQueryParams = function () {\n      return this.queryParams_;\n    }, c.prototype.getRef = function () {\n      return Ui(\"Query.ref\", 0, 0, arguments.length), new c.__referenceConstructor(this.repo, this.path);\n    }, c.prototype.on = function (t, e, n, r) {\n      Ui(\"Query.on\", 2, 4, arguments.length), sa(\"Query.on\", 1, t, !1), Vi(\"Query.on\", 2, e, !1);\n      var i = c.getCancelAndContextArgs_(\"Query.on\", n, r);\n      if (\"value\" === t) this.onValueEvent(e, i.cancel, i.context);else {\n        var o = {};\n        o[t] = e, this.onChildEvent(o, i.cancel, i.context);\n      }\n      return e;\n    }, c.prototype.onValueEvent = function (t, e, n) {\n      var r = new Ja(t, e || null, n || null);\n      this.repo.addEventCallbackForQuery(this, r);\n    }, c.prototype.onChildEvent = function (t, e, n) {\n      var r = new $a(t, e, n);\n      this.repo.addEventCallbackForQuery(this, r);\n    }, c.prototype.off = function (t, e, n) {\n      Ui(\"Query.off\", 0, 3, arguments.length), sa(\"Query.off\", 1, t, !0), Vi(\"Query.off\", 2, e, !0), Bi(\"Query.off\", 3, n, !0);\n      var r = null,\n          i = null;\n      \"value\" === t ? r = new Ja(e || null, null, n || null) : t && (e && ((i = {})[t] = e), r = new $a(i, null, n || null));\n      this.repo.removeEventCallbackForQuery(this, r);\n    }, c.prototype.once = function (e, n, t, r) {\n      var i = this;\n      Ui(\"Query.once\", 1, 4, arguments.length), sa(\"Query.once\", 1, e, !1), Vi(\"Query.once\", 2, n, !0);\n      var o = c.getCancelAndContextArgs_(\"Query.once\", t, r),\n          a = !0,\n          s = new bi();\n      s.promise.catch(function () {});\n\n      var u = function u(t) {\n        a && (a = !1, i.off(e, u), n && n.bind(o.context)(t), s.resolve(t));\n      };\n\n      return this.on(e, u, function (t) {\n        i.off(e, u), o.cancel && o.cancel.bind(o.context)(t), s.reject(t);\n      }), s.promise;\n    }, c.prototype.limitToFirst = function (t) {\n      if (Ui(\"Query.limitToFirst\", 1, 1, arguments.length), \"number\" != typeof t || Math.floor(t) !== t || t <= 0) throw new Error(\"Query.limitToFirst: First argument must be a positive integer.\");\n      if (this.queryParams_.hasLimit()) throw new Error(\"Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).\");\n      return new c(this.repo, this.path, this.queryParams_.limitToFirst(t), this.orderByCalled_);\n    }, c.prototype.limitToLast = function (t) {\n      if (Ui(\"Query.limitToLast\", 1, 1, arguments.length), \"number\" != typeof t || Math.floor(t) !== t || t <= 0) throw new Error(\"Query.limitToLast: First argument must be a positive integer.\");\n      if (this.queryParams_.hasLimit()) throw new Error(\"Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).\");\n      return new c(this.repo, this.path, this.queryParams_.limitToLast(t), this.orderByCalled_);\n    }, c.prototype.orderByChild = function (t) {\n      if (Ui(\"Query.orderByChild\", 1, 1, arguments.length), \"$key\" === t) throw new Error('Query.orderByChild: \"$key\" is invalid.  Use Query.orderByKey() instead.');\n      if (\"$priority\" === t) throw new Error('Query.orderByChild: \"$priority\" is invalid.  Use Query.orderByPriority() instead.');\n      if (\"$value\" === t) throw new Error('Query.orderByChild: \"$value\" is invalid.  Use Query.orderByValue() instead.');\n      ca(\"Query.orderByChild\", 1, t, !1), this.validateNoPreviousOrderByCall_(\"Query.orderByChild\");\n      var e = new Uo(t);\n      if (e.isEmpty()) throw new Error(\"Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.\");\n      var n = new Ga(e),\n          r = this.queryParams_.orderBy(n);\n      return c.validateQueryEndpoints_(r), new c(this.repo, this.path, r, !0);\n    }, c.prototype.orderByKey = function () {\n      Ui(\"Query.orderByKey\", 0, 0, arguments.length), this.validateNoPreviousOrderByCall_(\"Query.orderByKey\");\n      var t = this.queryParams_.orderBy(va);\n      return c.validateQueryEndpoints_(t), new c(this.repo, this.path, t, !0);\n    }, c.prototype.orderByPriority = function () {\n      Ui(\"Query.orderByPriority\", 0, 0, arguments.length), this.validateNoPreviousOrderByCall_(\"Query.orderByPriority\");\n      var t = this.queryParams_.orderBy(Na);\n      return c.validateQueryEndpoints_(t), new c(this.repo, this.path, t, !0);\n    }, c.prototype.orderByValue = function () {\n      Ui(\"Query.orderByValue\", 0, 0, arguments.length), this.validateNoPreviousOrderByCall_(\"Query.orderByValue\");\n      var t = this.queryParams_.orderBy(Ha);\n      return c.validateQueryEndpoints_(t), new c(this.repo, this.path, t, !0);\n    }, c.prototype.startAt = function (t, e) {\n      void 0 === t && (t = null), Ui(\"Query.startAt\", 0, 2, arguments.length), ra(\"Query.startAt\", 1, t, this.path, !0), ua(\"Query.startAt\", 2, e, !0);\n      var n = this.queryParams_.startAt(t, e);\n      if (c.validateLimit_(n), c.validateQueryEndpoints_(n), this.queryParams_.hasStart()) throw new Error(\"Query.startAt: Starting point was already set (by another call to startAt or equalTo).\");\n      return void 0 === t && (e = t = null), new c(this.repo, this.path, n, this.orderByCalled_);\n    }, c.prototype.endAt = function (t, e) {\n      void 0 === t && (t = null), Ui(\"Query.endAt\", 0, 2, arguments.length), ra(\"Query.endAt\", 1, t, this.path, !0), ua(\"Query.endAt\", 2, e, !0);\n      var n = this.queryParams_.endAt(t, e);\n      if (c.validateLimit_(n), c.validateQueryEndpoints_(n), this.queryParams_.hasEnd()) throw new Error(\"Query.endAt: Ending point was already set (by another call to endAt or equalTo).\");\n      return new c(this.repo, this.path, n, this.orderByCalled_);\n    }, c.prototype.equalTo = function (t, e) {\n      if (Ui(\"Query.equalTo\", 1, 2, arguments.length), ra(\"Query.equalTo\", 1, t, this.path, !1), ua(\"Query.equalTo\", 2, e, !0), this.queryParams_.hasStart()) throw new Error(\"Query.equalTo: Starting point was already set (by another call to startAt or equalTo).\");\n      if (this.queryParams_.hasEnd()) throw new Error(\"Query.equalTo: Ending point was already set (by another call to endAt or equalTo).\");\n      return this.startAt(t, e).endAt(t, e);\n    }, c.prototype.toString = function () {\n      return Ui(\"Query.toString\", 0, 0, arguments.length), this.repo.toString() + this.path.toUrlEncodedString();\n    }, c.prototype.toJSON = function () {\n      return Ui(\"Query.toJSON\", 0, 1, arguments.length), this.toString();\n    }, c.prototype.queryObject = function () {\n      return this.queryParams_.getQueryObject();\n    }, c.prototype.queryIdentifier = function () {\n      var t = this.queryObject(),\n          e = Do(t);\n      return \"{}\" === e ? \"default\" : e;\n    }, c.prototype.isEqual = function (t) {\n      if (Ui(\"Query.isEqual\", 1, 1, arguments.length), !(t instanceof c)) {\n        throw new Error(\"Query.isEqual failed: First argument must be an instance of firebase.database.Query.\");\n      }\n\n      var e = this.repo === t.repo,\n          n = this.path.equals(t.path),\n          r = this.queryIdentifier() === t.queryIdentifier();\n      return e && n && r;\n    }, c.getCancelAndContextArgs_ = function (t, e, n) {\n      var r = {\n        cancel: null,\n        context: null\n      };\n      if (e && n) r.cancel = e, Vi(t, 3, r.cancel, !0), r.context = n, Bi(t, 4, r.context, !0);else if (e) if (\"object\" == typeof e && null !== e) r.context = e;else {\n        if (\"function\" != typeof e) throw new Error(qi(t, 3, !0) + \" must either be a cancel callback or a context object.\");\n        r.cancel = e;\n      }\n      return r;\n    }, Object.defineProperty(c.prototype, \"ref\", {\n      get: function get() {\n        return this.getRef();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), c;\n  }(),\n      ts = function () {\n    function i() {\n      this.value = null, this.children = new Map();\n    }\n\n    return i.prototype.find = function (t) {\n      if (null != this.value) return this.value.getChild(t);\n\n      if (!t.isEmpty() && 0 < this.children.size) {\n        var e = t.getFront();\n        return t = t.popFront(), this.children.has(e) ? this.children.get(e).find(t) : null;\n      }\n\n      return null;\n    }, i.prototype.remember = function (t, e) {\n      if (t.isEmpty()) this.value = e, this.children.clear();else if (null !== this.value) this.value = this.value.updateChild(t, e);else {\n        var n = t.getFront();\n        this.children.has(n) || this.children.set(n, new i());\n        var r = this.children.get(n);\n        t = t.popFront(), r.remember(t, e);\n      }\n    }, i.prototype.forget = function (t) {\n      if (t.isEmpty()) return this.value = null, this.children.clear(), !0;\n\n      if (null !== this.value) {\n        if (this.value.isLeafNode()) return !1;\n        var e = this.value;\n        this.value = null;\n        var n = this;\n        return e.forEachChild(Na, function (t, e) {\n          n.remember(new Uo(t), e);\n        }), this.forget(t);\n      }\n\n      if (0 < this.children.size) {\n        var r = t.getFront();\n        if (t = t.popFront(), this.children.has(r)) this.children.get(r).forget(t) && this.children.delete(r);\n        return 0 === this.children.size;\n      }\n\n      return !0;\n    }, i.prototype.forEachTree = function (r, i) {\n      null !== this.value ? i(r, this.value) : this.forEachChild(function (t, e) {\n        var n = new Uo(r.toString() + \"/\" + t);\n        e.forEachTree(n, i);\n      });\n    }, i.prototype.forEachChild = function (n) {\n      this.children.forEach(function (t, e) {\n        n(e, t);\n      });\n    }, i;\n  }(),\n      es = function es(t, e) {\n    return t && \"object\" == typeof t ? (fi(\".sv\" in t, \"Unexpected leaf node or priority contents\"), e[t[\".sv\"]]) : t;\n  },\n      ns = function ns(t, r) {\n    var i,\n        e = t.getPriority().val(),\n        n = es(e, r);\n\n    if (t.isLeafNode()) {\n      var o = t,\n          a = es(o.getValue(), r);\n      return a !== o.getValue() || n !== o.getPriority().val() ? new Sa(a, ja(n)) : t;\n    }\n\n    var s = t;\n    return n !== (i = s).getPriority().val() && (i = i.updatePriority(new Sa(n))), s.forEachChild(Na, function (t, e) {\n      var n = ns(e, r);\n      n !== e && (i = i.updateImmediateChild(t, n));\n    }), i;\n  };\n\n  (Qa = Ka || (Ka = {}))[Qa.OVERWRITE = 0] = \"OVERWRITE\", Qa[Qa.MERGE = 1] = \"MERGE\", Qa[Qa.ACK_USER_WRITE = 2] = \"ACK_USER_WRITE\", Qa[Qa.LISTEN_COMPLETE = 3] = \"LISTEN_COMPLETE\";\n\n  var rs,\n      is,\n      os = function () {\n    function e(t, e, n, r) {\n      this.fromUser = t, this.fromServer = e, this.queryId = n, this.tagged = r, fi(!r || e, \"Tagged queries must be from server.\");\n    }\n\n    return e.User = new e(!0, !1, null, !1), e.Server = new e(!1, !0, null, !1), e.forServerTaggedQuery = function (t) {\n      return new e(!1, !0, t, !0);\n    }, e;\n  }(),\n      as = function () {\n    function n(t, e, n) {\n      this.path = t, this.affectedTree = e, this.revert = n, this.type = Ka.ACK_USER_WRITE, this.source = os.User;\n    }\n\n    return n.prototype.operationForChild = function (t) {\n      if (this.path.isEmpty()) {\n        if (null != this.affectedTree.value) return fi(this.affectedTree.children.isEmpty(), \"affectedTree should not have overlapping affected paths.\"), this;\n        var e = this.affectedTree.subtree(new Uo(t));\n        return new n(Uo.Empty, e, this.revert);\n      }\n\n      return fi(this.path.getFront() === t, \"operationForChild called for unrelated child.\"), new n(this.path.popFront(), this.affectedTree, this.revert);\n    }, n;\n  }(),\n      ss = function () {\n    function o(t, e) {\n      void 0 === e && (rs || (rs = new Ra(Ao)), e = rs), this.value = t, this.children = e;\n    }\n\n    return o.fromObject = function (t) {\n      var n = o.Empty;\n      return Oo(t, function (t, e) {\n        n = n.set(new Uo(t), e);\n      }), n;\n    }, o.prototype.isEmpty = function () {\n      return null === this.value && this.children.isEmpty();\n    }, o.prototype.findRootMostMatchingPathAndValue = function (t, e) {\n      if (null != this.value && e(this.value)) return {\n        path: Uo.Empty,\n        value: this.value\n      };\n      if (t.isEmpty()) return null;\n      var n = t.getFront(),\n          r = this.children.get(n);\n      if (null === r) return null;\n      var i = r.findRootMostMatchingPathAndValue(t.popFront(), e);\n      return null == i ? null : {\n        path: new Uo(n).child(i.path),\n        value: i.value\n      };\n    }, o.prototype.findRootMostValueAndPath = function (t) {\n      return this.findRootMostMatchingPathAndValue(t, function () {\n        return !0;\n      });\n    }, o.prototype.subtree = function (t) {\n      if (t.isEmpty()) return this;\n      var e = t.getFront(),\n          n = this.children.get(e);\n      return null !== n ? n.subtree(t.popFront()) : o.Empty;\n    }, o.prototype.set = function (t, e) {\n      if (t.isEmpty()) return new o(e, this.children);\n      var n = t.getFront(),\n          r = (this.children.get(n) || o.Empty).set(t.popFront(), e),\n          i = this.children.insert(n, r);\n      return new o(this.value, i);\n    }, o.prototype.remove = function (t) {\n      if (t.isEmpty()) return this.children.isEmpty() ? o.Empty : new o(null, this.children);\n      var e = t.getFront(),\n          n = this.children.get(e);\n\n      if (n) {\n        var r = n.remove(t.popFront()),\n            i = void 0;\n        return i = r.isEmpty() ? this.children.remove(e) : this.children.insert(e, r), null === this.value && i.isEmpty() ? o.Empty : new o(this.value, i);\n      }\n\n      return this;\n    }, o.prototype.get = function (t) {\n      if (t.isEmpty()) return this.value;\n      var e = t.getFront(),\n          n = this.children.get(e);\n      return n ? n.get(t.popFront()) : null;\n    }, o.prototype.setTree = function (t, e) {\n      if (t.isEmpty()) return e;\n      var n = t.getFront(),\n          r = (this.children.get(n) || o.Empty).setTree(t.popFront(), e),\n          i = void 0;\n      return i = r.isEmpty() ? this.children.remove(n) : this.children.insert(n, r), new o(this.value, i);\n    }, o.prototype.fold = function (t) {\n      return this.fold_(Uo.Empty, t);\n    }, o.prototype.fold_ = function (n, r) {\n      var i = {};\n      return this.children.inorderTraversal(function (t, e) {\n        i[t] = e.fold_(n.child(t), r);\n      }), r(n, this.value, i);\n    }, o.prototype.findOnPath = function (t, e) {\n      return this.findOnPath_(t, Uo.Empty, e);\n    }, o.prototype.findOnPath_ = function (t, e, n) {\n      var r = !!this.value && n(e, this.value);\n      if (r) return r;\n      if (t.isEmpty()) return null;\n      var i = t.getFront(),\n          o = this.children.get(i);\n      return o ? o.findOnPath_(t.popFront(), e.child(i), n) : null;\n    }, o.prototype.foreachOnPath = function (t, e) {\n      return this.foreachOnPath_(t, Uo.Empty, e);\n    }, o.prototype.foreachOnPath_ = function (t, e, n) {\n      if (t.isEmpty()) return this;\n      this.value && n(e, this.value);\n      var r = t.getFront(),\n          i = this.children.get(r);\n      return i ? i.foreachOnPath_(t.popFront(), e.child(r), n) : o.Empty;\n    }, o.prototype.foreach = function (t) {\n      this.foreach_(Uo.Empty, t);\n    }, o.prototype.foreach_ = function (n, r) {\n      this.children.inorderTraversal(function (t, e) {\n        e.foreach_(n.child(t), r);\n      }), this.value && r(n, this.value);\n    }, o.prototype.foreachChild = function (n) {\n      this.children.inorderTraversal(function (t, e) {\n        e.value && n(t, e.value);\n      });\n    }, o.Empty = new o(null), o;\n  }(),\n      us = function () {\n    function e(t, e) {\n      this.source = t, this.path = e, this.type = Ka.LISTEN_COMPLETE;\n    }\n\n    return e.prototype.operationForChild = function (t) {\n      return this.path.isEmpty() ? new e(this.source, Uo.Empty) : new e(this.source, this.path.popFront());\n    }, e;\n  }(),\n      cs = function () {\n    function e(t, e, n) {\n      this.source = t, this.path = e, this.snap = n, this.type = Ka.OVERWRITE;\n    }\n\n    return e.prototype.operationForChild = function (t) {\n      return this.path.isEmpty() ? new e(this.source, Uo.Empty, this.snap.getImmediateChild(t)) : new e(this.source, this.path.popFront(), this.snap);\n    }, e;\n  }(),\n      hs = function () {\n    function n(t, e, n) {\n      this.source = t, this.path = e, this.children = n, this.type = Ka.MERGE;\n    }\n\n    return n.prototype.operationForChild = function (t) {\n      if (this.path.isEmpty()) {\n        var e = this.children.subtree(new Uo(t));\n        return e.isEmpty() ? null : e.value ? new cs(this.source, Uo.Empty, e.value) : new n(this.source, Uo.Empty, e);\n      }\n\n      return fi(this.path.getFront() === t, \"Can't get a merge for a child not on the path of the operation\"), new n(this.source, this.path.popFront(), this.children);\n    }, n.prototype.toString = function () {\n      return \"Operation(\" + this.path + \": \" + this.source.toString() + \" merge: \" + this.children.toString() + \")\";\n    }, n;\n  }(),\n      ls = function () {\n    function t(t, e, n) {\n      this.node_ = t, this.fullyInitialized_ = e, this.filtered_ = n;\n    }\n\n    return t.prototype.isFullyInitialized = function () {\n      return this.fullyInitialized_;\n    }, t.prototype.isFiltered = function () {\n      return this.filtered_;\n    }, t.prototype.isCompleteForPath = function (t) {\n      if (t.isEmpty()) return this.isFullyInitialized() && !this.filtered_;\n      var e = t.getFront();\n      return this.isCompleteForChild(e);\n    }, t.prototype.isCompleteForChild = function (t) {\n      return this.isFullyInitialized() && !this.filtered_ || this.node_.hasChild(t);\n    }, t.prototype.getNode = function () {\n      return this.node_;\n    }, t;\n  }(),\n      fs = function () {\n    function r(t, e) {\n      this.eventCache_ = t, this.serverCache_ = e;\n    }\n\n    return r.prototype.updateEventSnap = function (t, e, n) {\n      return new r(new ls(t, e, n), this.serverCache_);\n    }, r.prototype.updateServerSnap = function (t, e, n) {\n      return new r(this.eventCache_, new ls(t, e, n));\n    }, r.prototype.getEventCache = function () {\n      return this.eventCache_;\n    }, r.prototype.getCompleteEventSnap = function () {\n      return this.eventCache_.isFullyInitialized() ? this.eventCache_.getNode() : null;\n    }, r.prototype.getServerCache = function () {\n      return this.serverCache_;\n    }, r.prototype.getCompleteServerSnap = function () {\n      return this.serverCache_.isFullyInitialized() ? this.serverCache_.getNode() : null;\n    }, r.Empty = new r(new ls(qa.EMPTY_NODE, !1, !1), new ls(qa.EMPTY_NODE, !1, !1)), r;\n  }(),\n      ps = function () {\n    function r(t, e, n, r, i) {\n      this.type = t, this.snapshotNode = e, this.childName = n, this.oldSnap = r, this.prevName = i;\n    }\n\n    return r.valueChange = function (t) {\n      return new r(r.VALUE, t);\n    }, r.childAddedChange = function (t, e) {\n      return new r(r.CHILD_ADDED, e, t);\n    }, r.childRemovedChange = function (t, e) {\n      return new r(r.CHILD_REMOVED, e, t);\n    }, r.childChangedChange = function (t, e, n) {\n      return new r(r.CHILD_CHANGED, e, t, n);\n    }, r.childMovedChange = function (t, e) {\n      return new r(r.CHILD_MOVED, e, t);\n    }, r.CHILD_ADDED = \"child_added\", r.CHILD_REMOVED = \"child_removed\", r.CHILD_CHANGED = \"child_changed\", r.CHILD_MOVED = \"child_moved\", r.VALUE = \"value\", r;\n  }(),\n      ds = function () {\n    function t(t) {\n      this.index_ = t;\n    }\n\n    return t.prototype.updateChild = function (t, e, n, r, i, o) {\n      fi(t.isIndexed(this.index_), \"A node must be indexed if only a child is updated\");\n      var a = t.getImmediateChild(e);\n      return a.getChild(r).equals(n.getChild(r)) && a.isEmpty() == n.isEmpty() ? t : (null != o && (n.isEmpty() ? t.hasChild(e) ? o.trackChildChange(ps.childRemovedChange(e, a)) : fi(t.isLeafNode(), \"A child remove without an old child only makes sense on a leaf node\") : a.isEmpty() ? o.trackChildChange(ps.childAddedChange(e, n)) : o.trackChildChange(ps.childChangedChange(e, n, a))), t.isLeafNode() && n.isEmpty() ? t : t.updateImmediateChild(e, n).withIndex(this.index_));\n    }, t.prototype.updateFullNode = function (r, n, i) {\n      return null != i && (r.isLeafNode() || r.forEachChild(Na, function (t, e) {\n        n.hasChild(t) || i.trackChildChange(ps.childRemovedChange(t, e));\n      }), n.isLeafNode() || n.forEachChild(Na, function (t, e) {\n        if (r.hasChild(t)) {\n          var n = r.getImmediateChild(t);\n          n.equals(e) || i.trackChildChange(ps.childChangedChange(t, e, n));\n        } else i.trackChildChange(ps.childAddedChange(t, e));\n      })), n.withIndex(this.index_);\n    }, t.prototype.updatePriority = function (t, e) {\n      return t.isEmpty() ? qa.EMPTY_NODE : t.updatePriority(e);\n    }, t.prototype.filtersNodes = function () {\n      return !1;\n    }, t.prototype.getIndexedFilter = function () {\n      return this;\n    }, t.prototype.getIndex = function () {\n      return this.index_;\n    }, t;\n  }(),\n      ys = function () {\n    function t() {\n      this.changeMap = new Map();\n    }\n\n    return t.prototype.trackChildChange = function (t) {\n      var e = t.type,\n          n = t.childName;\n      fi(e == ps.CHILD_ADDED || e == ps.CHILD_CHANGED || e == ps.CHILD_REMOVED, \"Only child changes supported for tracking\"), fi(\".priority\" !== n, \"Only non-priority child changes can be tracked.\");\n      var r = this.changeMap.get(n);\n\n      if (r) {\n        var i = r.type;\n        if (e == ps.CHILD_ADDED && i == ps.CHILD_REMOVED) this.changeMap.set(n, ps.childChangedChange(n, t.snapshotNode, r.snapshotNode));else if (e == ps.CHILD_REMOVED && i == ps.CHILD_ADDED) this.changeMap.delete(n);else if (e == ps.CHILD_REMOVED && i == ps.CHILD_CHANGED) this.changeMap.set(n, ps.childRemovedChange(n, r.oldSnap));else if (e == ps.CHILD_CHANGED && i == ps.CHILD_ADDED) this.changeMap.set(n, ps.childAddedChange(n, t.snapshotNode));else {\n          if (e != ps.CHILD_CHANGED || i != ps.CHILD_CHANGED) throw pi(\"Illegal combination of changes: \" + t + \" occurred after \" + r);\n          this.changeMap.set(n, ps.childChangedChange(n, t.snapshotNode, r.oldSnap));\n        }\n      } else this.changeMap.set(n, t);\n    }, t.prototype.getChanges = function () {\n      return Array.from(this.changeMap.values());\n    }, t;\n  }(),\n      ms = new (function () {\n    function t() {}\n\n    return t.prototype.getCompleteChild = function (t) {\n      return null;\n    }, t.prototype.getChildAfterChild = function (t, e, n) {\n      return null;\n    }, t;\n  }())(),\n      gs = function () {\n    function t(t, e, n) {\n      void 0 === n && (n = null), this.writes_ = t, this.viewCache_ = e, this.optCompleteServerCache_ = n;\n    }\n\n    return t.prototype.getCompleteChild = function (t) {\n      var e = this.viewCache_.getEventCache();\n      if (e.isCompleteForChild(t)) return e.getNode().getImmediateChild(t);\n      var n = null != this.optCompleteServerCache_ ? new ls(this.optCompleteServerCache_, !0, !1) : this.viewCache_.getServerCache();\n      return this.writes_.calcCompleteChild(t, n);\n    }, t.prototype.getChildAfterChild = function (t, e, n) {\n      var r = null != this.optCompleteServerCache_ ? this.optCompleteServerCache_ : this.viewCache_.getCompleteServerSnap(),\n          i = this.writes_.calcIndexedSlice(r, e, 1, n, t);\n      return 0 === i.length ? null : i[0];\n    }, t;\n  }(),\n      vs = function vs(t, e) {\n    this.viewCache = t, this.changes = e;\n  },\n      bs = function () {\n    function l(t) {\n      this.filter_ = t;\n    }\n\n    return l.prototype.assertIndexed = function (t) {\n      fi(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()), \"Event snap not indexed\"), fi(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()), \"Server snap not indexed\");\n    }, l.prototype.applyOperation = function (t, e, n, r) {\n      var i,\n          o,\n          a = new ys();\n\n      if (e.type === Ka.OVERWRITE) {\n        var s = e;\n        i = s.source.fromUser ? this.applyUserOverwrite_(t, s.path, s.snap, n, r, a) : (fi(s.source.fromServer, \"Unknown source.\"), o = s.source.tagged || t.getServerCache().isFiltered() && !s.path.isEmpty(), this.applyServerOverwrite_(t, s.path, s.snap, n, r, o, a));\n      } else if (e.type === Ka.MERGE) {\n        var u = e;\n        i = u.source.fromUser ? this.applyUserMerge_(t, u.path, u.children, n, r, a) : (fi(u.source.fromServer, \"Unknown source.\"), o = u.source.tagged || t.getServerCache().isFiltered(), this.applyServerMerge_(t, u.path, u.children, n, r, o, a));\n      } else if (e.type === Ka.ACK_USER_WRITE) {\n        var c = e;\n        i = c.revert ? this.revertUserWrite_(t, c.path, n, r, a) : this.ackUserWrite_(t, c.path, c.affectedTree, n, r, a);\n      } else {\n        if (e.type !== Ka.LISTEN_COMPLETE) throw pi(\"Unknown operation type: \" + e.type);\n        i = this.listenComplete_(t, e.path, n, a);\n      }\n\n      var h = a.getChanges();\n      return l.maybeAddValueEvent_(t, i, h), new vs(i, h);\n    }, l.maybeAddValueEvent_ = function (t, e, n) {\n      var r = e.getEventCache();\n\n      if (r.isFullyInitialized()) {\n        var i = r.getNode().isLeafNode() || r.getNode().isEmpty(),\n            o = t.getCompleteEventSnap();\n        (0 < n.length || !t.getEventCache().isFullyInitialized() || i && !r.getNode().equals(o) || !r.getNode().getPriority().equals(o.getPriority())) && n.push(ps.valueChange(e.getCompleteEventSnap()));\n      }\n    }, l.prototype.generateEventCacheAfterServerEvent_ = function (t, e, n, r, i) {\n      var o = t.getEventCache();\n      if (null != n.shadowingWrite(e)) return t;\n      var a = void 0,\n          s = void 0;\n      if (e.isEmpty()) {\n        if (fi(t.getServerCache().isFullyInitialized(), \"If change path is empty, we must have complete server data\"), t.getServerCache().isFiltered()) {\n          var u = t.getCompleteServerSnap(),\n              c = u instanceof qa ? u : qa.EMPTY_NODE,\n              h = n.calcCompleteEventChildren(c);\n          a = this.filter_.updateFullNode(t.getEventCache().getNode(), h, i);\n        } else {\n          var l = n.calcCompleteEventCache(t.getCompleteServerSnap());\n          a = this.filter_.updateFullNode(t.getEventCache().getNode(), l, i);\n        }\n      } else {\n        var f = e.getFront();\n\n        if (\".priority\" == f) {\n          fi(1 == e.getLength(), \"Can't have a priority with additional path components\");\n          var p = o.getNode();\n          s = t.getServerCache().getNode();\n          var d = n.calcEventCacheAfterServerOverwrite(e, p, s);\n          a = null != d ? this.filter_.updatePriority(p, d) : o.getNode();\n        } else {\n          var y = e.popFront(),\n              m = void 0;\n\n          if (o.isCompleteForChild(f)) {\n            s = t.getServerCache().getNode();\n            var g = n.calcEventCacheAfterServerOverwrite(e, o.getNode(), s);\n            m = null != g ? o.getNode().getImmediateChild(f).updateChild(y, g) : o.getNode().getImmediateChild(f);\n          } else m = n.calcCompleteChild(f, t.getServerCache());\n\n          a = null != m ? this.filter_.updateChild(o.getNode(), f, m, y, r, i) : o.getNode();\n        }\n      }\n      return t.updateEventSnap(a, o.isFullyInitialized() || e.isEmpty(), this.filter_.filtersNodes());\n    }, l.prototype.applyServerOverwrite_ = function (t, e, n, r, i, o, a) {\n      var s,\n          u = t.getServerCache(),\n          c = o ? this.filter_ : this.filter_.getIndexedFilter();\n      if (e.isEmpty()) s = c.updateFullNode(u.getNode(), n, null);else if (c.filtersNodes() && !u.isFiltered()) {\n        var h = u.getNode().updateChild(e, n);\n        s = c.updateFullNode(u.getNode(), h, null);\n      } else {\n        var l = e.getFront();\n        if (!u.isCompleteForPath(e) && 1 < e.getLength()) return t;\n        var f = e.popFront(),\n            p = u.getNode().getImmediateChild(l).updateChild(f, n);\n        s = \".priority\" == l ? c.updatePriority(u.getNode(), p) : c.updateChild(u.getNode(), l, p, f, ms, null);\n      }\n      var d = t.updateServerSnap(s, u.isFullyInitialized() || e.isEmpty(), c.filtersNodes()),\n          y = new gs(r, d, i);\n      return this.generateEventCacheAfterServerEvent_(d, e, r, y, a);\n    }, l.prototype.applyUserOverwrite_ = function (t, e, n, r, i, o) {\n      var a,\n          s,\n          u = t.getEventCache(),\n          c = new gs(r, t, i);\n      if (e.isEmpty()) s = this.filter_.updateFullNode(t.getEventCache().getNode(), n, o), a = t.updateEventSnap(s, !0, this.filter_.filtersNodes());else {\n        var h = e.getFront();\n        if (\".priority\" === h) s = this.filter_.updatePriority(t.getEventCache().getNode(), n), a = t.updateEventSnap(s, u.isFullyInitialized(), u.isFiltered());else {\n          var l = e.popFront(),\n              f = u.getNode().getImmediateChild(h),\n              p = void 0;\n          if (l.isEmpty()) p = n;else {\n            var d = c.getCompleteChild(h);\n            p = null != d ? \".priority\" === l.getBack() && d.getChild(l.parent()).isEmpty() ? d : d.updateChild(l, n) : qa.EMPTY_NODE;\n          }\n          if (f.equals(p)) a = t;else {\n            var y = this.filter_.updateChild(u.getNode(), h, p, l, c, o);\n            a = t.updateEventSnap(y, u.isFullyInitialized(), this.filter_.filtersNodes());\n          }\n        }\n      }\n      return a;\n    }, l.cacheHasChild_ = function (t, e) {\n      return t.getEventCache().isCompleteForChild(e);\n    }, l.prototype.applyUserMerge_ = function (r, i, t, o, a, s) {\n      var u = this,\n          c = r;\n      return t.foreach(function (t, e) {\n        var n = i.child(t);\n        l.cacheHasChild_(r, n.getFront()) && (c = u.applyUserOverwrite_(c, n, e, o, a, s));\n      }), t.foreach(function (t, e) {\n        var n = i.child(t);\n        l.cacheHasChild_(r, n.getFront()) || (c = u.applyUserOverwrite_(c, n, e, o, a, s));\n      }), c;\n    }, l.prototype.applyMerge_ = function (n, t) {\n      return t.foreach(function (t, e) {\n        n = n.updateChild(t, e);\n      }), n;\n    }, l.prototype.applyServerMerge_ = function (o, t, e, a, s, u, c) {\n      var h = this;\n      if (o.getServerCache().getNode().isEmpty() && !o.getServerCache().isFullyInitialized()) return o;\n      var n,\n          l = o;\n      n = t.isEmpty() ? e : ss.Empty.setTree(t, e);\n      var f = o.getServerCache().getNode();\n      return n.children.inorderTraversal(function (t, e) {\n        if (f.hasChild(t)) {\n          var n = o.getServerCache().getNode().getImmediateChild(t),\n              r = h.applyMerge_(n, e);\n          l = h.applyServerOverwrite_(l, new Uo(t), r, a, s, u, c);\n        }\n      }), n.children.inorderTraversal(function (t, e) {\n        var n = !o.getServerCache().isCompleteForChild(t) && null == e.value;\n\n        if (!f.hasChild(t) && !n) {\n          var r = o.getServerCache().getNode().getImmediateChild(t),\n              i = h.applyMerge_(r, e);\n          l = h.applyServerOverwrite_(l, new Uo(t), i, a, s, u, c);\n        }\n      }), l;\n    }, l.prototype.ackUserWrite_ = function (t, r, e, n, i, o) {\n      if (null != n.shadowingWrite(r)) return t;\n      var a = t.getServerCache().isFiltered(),\n          s = t.getServerCache();\n\n      if (null != e.value) {\n        if (r.isEmpty() && s.isFullyInitialized() || s.isCompleteForPath(r)) return this.applyServerOverwrite_(t, r, s.getNode().getChild(r), n, i, a, o);\n\n        if (r.isEmpty()) {\n          var u = ss.Empty;\n          return s.getNode().forEachChild(va, function (t, e) {\n            u = u.set(new Uo(t), e);\n          }), this.applyServerMerge_(t, r, u, n, i, a, o);\n        }\n\n        return t;\n      }\n\n      var c = ss.Empty;\n      return e.foreach(function (t, e) {\n        var n = r.child(t);\n        s.isCompleteForPath(n) && (c = c.set(t, s.getNode().getChild(n)));\n      }), this.applyServerMerge_(t, r, c, n, i, a, o);\n    }, l.prototype.listenComplete_ = function (t, e, n, r) {\n      var i = t.getServerCache(),\n          o = t.updateServerSnap(i.getNode(), i.isFullyInitialized() || e.isEmpty(), i.isFiltered());\n      return this.generateEventCacheAfterServerEvent_(o, e, n, ms, r);\n    }, l.prototype.revertUserWrite_ = function (t, e, n, r, i) {\n      var o;\n      if (null != n.shadowingWrite(e)) return t;\n      var a = new gs(n, t, r),\n          s = t.getEventCache().getNode(),\n          u = void 0;\n\n      if (e.isEmpty() || \".priority\" === e.getFront()) {\n        var c = void 0;\n        if (t.getServerCache().isFullyInitialized()) c = n.calcCompleteEventCache(t.getCompleteServerSnap());else {\n          var h = t.getServerCache().getNode();\n          fi(h instanceof qa, \"serverChildren would be complete if leaf node\"), c = n.calcCompleteEventChildren(h);\n        }\n        c = c, u = this.filter_.updateFullNode(s, c, i);\n      } else {\n        var l = e.getFront(),\n            f = n.calcCompleteChild(l, t.getServerCache());\n        null == f && t.getServerCache().isCompleteForChild(l) && (f = s.getImmediateChild(l)), (u = null != f ? this.filter_.updateChild(s, l, f, e.popFront(), a, i) : t.getEventCache().getNode().hasChild(l) ? this.filter_.updateChild(s, l, qa.EMPTY_NODE, e.popFront(), a, i) : s).isEmpty() && t.getServerCache().isFullyInitialized() && (o = n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode() && (u = this.filter_.updateFullNode(u, o, i));\n      }\n\n      return o = t.getServerCache().isFullyInitialized() || null != n.shadowingWrite(Uo.Empty), t.updateEventSnap(u, o, this.filter_.filtersNodes());\n    }, l;\n  }(),\n      ws = function () {\n    function t(t) {\n      this.query_ = t, this.index_ = this.query_.getQueryParams().getIndex();\n    }\n\n    return t.prototype.generateEventsForChanges = function (t, e, n) {\n      var r = this,\n          i = [],\n          o = [];\n      return t.forEach(function (t) {\n        t.type === ps.CHILD_CHANGED && r.index_.indexedValueChanged(t.oldSnap, t.snapshotNode) && o.push(ps.childMovedChange(t.childName, t.snapshotNode));\n      }), this.generateEventsForType_(i, ps.CHILD_REMOVED, t, n, e), this.generateEventsForType_(i, ps.CHILD_ADDED, t, n, e), this.generateEventsForType_(i, ps.CHILD_MOVED, o, n, e), this.generateEventsForType_(i, ps.CHILD_CHANGED, t, n, e), this.generateEventsForType_(i, ps.VALUE, t, n, e), i;\n    }, t.prototype.generateEventsForType_ = function (r, e, t, i, o) {\n      var a = this,\n          n = t.filter(function (t) {\n        return t.type === e;\n      });\n      n.sort(this.compareChanges_.bind(this)), n.forEach(function (e) {\n        var n = a.materializeSingleChange_(e, o);\n        i.forEach(function (t) {\n          t.respondsTo(e.type) && r.push(t.createEvent(n, a.query_));\n        });\n      });\n    }, t.prototype.materializeSingleChange_ = function (t, e) {\n      return \"value\" === t.type || \"child_removed\" === t.type || (t.prevName = e.getPredecessorChildName(t.childName, t.snapshotNode, this.index_)), t;\n    }, t.prototype.compareChanges_ = function (t, e) {\n      if (null == t.childName || null == e.childName) throw pi(\"Should only compare child_ events.\");\n      var n = new ya(t.childName, t.snapshotNode),\n          r = new ya(e.childName, e.snapshotNode);\n      return this.index_.compare(n, r);\n    }, t;\n  }(),\n      _s = function () {\n    function t(t, e) {\n      this.query_ = t, this.eventRegistrations_ = [];\n      var n = this.query_.getQueryParams(),\n          r = new ds(n.getIndex()),\n          i = n.getNodeFilter();\n      this.processor_ = new bs(i);\n      var o = e.getServerCache(),\n          a = e.getEventCache(),\n          s = r.updateFullNode(qa.EMPTY_NODE, o.getNode(), null),\n          u = i.updateFullNode(qa.EMPTY_NODE, a.getNode(), null),\n          c = new ls(s, o.isFullyInitialized(), r.filtersNodes()),\n          h = new ls(u, a.isFullyInitialized(), i.filtersNodes());\n      this.viewCache_ = new fs(h, c), this.eventGenerator_ = new ws(this.query_);\n    }\n\n    return t.prototype.getQuery = function () {\n      return this.query_;\n    }, t.prototype.getServerCache = function () {\n      return this.viewCache_.getServerCache().getNode();\n    }, t.prototype.getCompleteServerCache = function (t) {\n      var e = this.viewCache_.getCompleteServerSnap();\n      return e && (this.query_.getQueryParams().loadsAllData() || !t.isEmpty() && !e.getImmediateChild(t.getFront()).isEmpty()) ? e.getChild(t) : null;\n    }, t.prototype.isEmpty = function () {\n      return 0 === this.eventRegistrations_.length;\n    }, t.prototype.addEventRegistration = function (t) {\n      this.eventRegistrations_.push(t);\n    }, t.prototype.removeEventRegistration = function (t, n) {\n      var r = [];\n\n      if (n) {\n        fi(null == t, \"A cancel should cancel all event registrations.\");\n        var i = this.query_.path;\n        this.eventRegistrations_.forEach(function (t) {\n          n = n;\n          var e = t.createCancelEvent(n, i);\n          e && r.push(e);\n        });\n      }\n\n      if (t) {\n        for (var e = [], o = 0; o < this.eventRegistrations_.length; ++o) {\n          var a = this.eventRegistrations_[o];\n\n          if (a.matches(t)) {\n            if (t.hasAnyCallback()) {\n              e = e.concat(this.eventRegistrations_.slice(o + 1));\n              break;\n            }\n          } else e.push(a);\n        }\n\n        this.eventRegistrations_ = e;\n      } else this.eventRegistrations_ = [];\n\n      return r;\n    }, t.prototype.applyOperation = function (t, e, n) {\n      t.type === Ka.MERGE && null !== t.source.queryId && (fi(this.viewCache_.getCompleteServerSnap(), \"We should always have a full cache before handling merges\"), fi(this.viewCache_.getCompleteEventSnap(), \"Missing event cache, even though we have a server cache\"));\n      var r = this.viewCache_,\n          i = this.processor_.applyOperation(r, t, e, n);\n      return this.processor_.assertIndexed(i.viewCache), fi(i.viewCache.getServerCache().isFullyInitialized() || !r.getServerCache().isFullyInitialized(), \"Once a server snap is complete, it should never go back\"), this.viewCache_ = i.viewCache, this.generateEventsForChanges_(i.changes, i.viewCache.getEventCache().getNode(), null);\n    }, t.prototype.getInitialEvents = function (t) {\n      var e = this.viewCache_.getEventCache(),\n          n = [];\n      e.getNode().isLeafNode() || e.getNode().forEachChild(Na, function (t, e) {\n        n.push(ps.childAddedChange(t, e));\n      });\n      return e.isFullyInitialized() && n.push(ps.valueChange(e.getNode())), this.generateEventsForChanges_(n, e.getNode(), t);\n    }, t.prototype.generateEventsForChanges_ = function (t, e, n) {\n      var r = n ? [n] : this.eventRegistrations_;\n      return this.eventGenerator_.generateEventsForChanges(t, e, r);\n    }, t;\n  }(),\n      Es = function () {\n    function d() {\n      this.views = new Map();\n    }\n\n    return Object.defineProperty(d, \"__referenceConstructor\", {\n      get: function get() {\n        return fi(is, \"Reference.ts has not been loaded\"), is;\n      },\n      set: function set(t) {\n        fi(!is, \"__referenceConstructor has already been defined\"), is = t;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), d.prototype.isEmpty = function () {\n      return 0 === this.views.size;\n    }, d.prototype.applyOperation = function (t, e, n) {\n      var r,\n          i,\n          o = t.source.queryId;\n\n      if (null !== o) {\n        var a = this.views.get(o);\n        return fi(null != a, \"SyncTree gave us an op for an invalid query.\"), a.applyOperation(t, e, n);\n      }\n\n      var s = [];\n\n      try {\n        for (var u = ui(this.views.values()), c = u.next(); !c.done; c = u.next()) {\n          a = c.value;\n          s = s.concat(a.applyOperation(t, e, n));\n        }\n      } catch (t) {\n        r = {\n          error: t\n        };\n      } finally {\n        try {\n          c && !c.done && (i = u.return) && i.call(u);\n        } finally {\n          if (r) throw r.error;\n        }\n      }\n\n      return s;\n    }, d.prototype.addEventRegistration = function (t, e, n, r, i) {\n      var o = t.queryIdentifier(),\n          a = this.views.get(o);\n\n      if (!a) {\n        var s = n.calcCompleteEventCache(i ? r : null),\n            u = !1;\n        u = !!s || (s = r instanceof qa ? n.calcCompleteEventChildren(r) : qa.EMPTY_NODE, !1);\n        var c = new fs(new ls(s, u, !1), new ls(r, i, !1));\n        a = new _s(t, c), this.views.set(o, a);\n      }\n\n      return a.addEventRegistration(e), a.getInitialEvents(e);\n    }, d.prototype.removeEventRegistration = function (t, e, n) {\n      var r,\n          i,\n          o = t.queryIdentifier(),\n          a = [],\n          s = [],\n          u = this.hasCompleteView();\n      if (\"default\" === o) try {\n        for (var c = ui(this.views.entries()), h = c.next(); !h.done; h = c.next()) {\n          var l = ci(h.value, 2),\n              f = l[0],\n              p = l[1];\n          s = s.concat(p.removeEventRegistration(e, n)), p.isEmpty() && (this.views.delete(f), p.getQuery().getQueryParams().loadsAllData() || a.push(p.getQuery()));\n        }\n      } catch (t) {\n        r = {\n          error: t\n        };\n      } finally {\n        try {\n          h && !h.done && (i = c.return) && i.call(c);\n        } finally {\n          if (r) throw r.error;\n        }\n      } else (p = this.views.get(o)) && (s = s.concat(p.removeEventRegistration(e, n)), p.isEmpty() && (this.views.delete(o), p.getQuery().getQueryParams().loadsAllData() || a.push(p.getQuery())));\n      return u && !this.hasCompleteView() && a.push(new d.__referenceConstructor(t.repo, t.path)), {\n        removed: a,\n        events: s\n      };\n    }, d.prototype.getQueryViews = function () {\n      var e,\n          t,\n          n = [];\n\n      try {\n        for (var r = ui(this.views.values()), i = r.next(); !i.done; i = r.next()) {\n          var o = i.value;\n          o.getQuery().getQueryParams().loadsAllData() || n.push(o);\n        }\n      } catch (t) {\n        e = {\n          error: t\n        };\n      } finally {\n        try {\n          i && !i.done && (t = r.return) && t.call(r);\n        } finally {\n          if (e) throw e.error;\n        }\n      }\n\n      return n;\n    }, d.prototype.getCompleteServerCache = function (t) {\n      var e,\n          n,\n          r = null;\n\n      try {\n        for (var i = ui(this.views.values()), o = i.next(); !o.done; o = i.next()) {\n          var a = o.value;\n          r = r || a.getCompleteServerCache(t);\n        }\n      } catch (t) {\n        e = {\n          error: t\n        };\n      } finally {\n        try {\n          o && !o.done && (n = i.return) && n.call(i);\n        } finally {\n          if (e) throw e.error;\n        }\n      }\n\n      return r;\n    }, d.prototype.viewForQuery = function (t) {\n      if (t.getQueryParams().loadsAllData()) return this.getCompleteView();\n      var e = t.queryIdentifier();\n      return this.views.get(e);\n    }, d.prototype.viewExistsForQuery = function (t) {\n      return null != this.viewForQuery(t);\n    }, d.prototype.hasCompleteView = function () {\n      return null != this.getCompleteView();\n    }, d.prototype.getCompleteView = function () {\n      var e, t;\n\n      try {\n        for (var n = ui(this.views.values()), r = n.next(); !r.done; r = n.next()) {\n          var i = r.value;\n          if (i.getQuery().getQueryParams().loadsAllData()) return i;\n        }\n      } catch (t) {\n        e = {\n          error: t\n        };\n      } finally {\n        try {\n          r && !r.done && (t = n.return) && t.call(n);\n        } finally {\n          if (e) throw e.error;\n        }\n      }\n\n      return null;\n    }, d;\n  }(),\n      Ts = function () {\n    function s(t) {\n      this.writeTree_ = t;\n    }\n\n    return s.prototype.addWrite = function (t, e) {\n      if (t.isEmpty()) return new s(new ss(e));\n      var n = this.writeTree_.findRootMostValueAndPath(t);\n\n      if (null != n) {\n        var r = n.path,\n            i = n.value,\n            o = Uo.relativePath(r, t);\n        return i = i.updateChild(o, e), new s(this.writeTree_.set(r, i));\n      }\n\n      var a = new ss(e);\n      return new s(this.writeTree_.setTree(t, a));\n    }, s.prototype.addWrites = function (n, t) {\n      var r = this;\n      return Oo(t, function (t, e) {\n        r = r.addWrite(n.child(t), e);\n      }), r;\n    }, s.prototype.removeWrite = function (t) {\n      return t.isEmpty() ? s.Empty : new s(this.writeTree_.setTree(t, ss.Empty));\n    }, s.prototype.hasCompleteWrite = function (t) {\n      return null != this.getCompleteNode(t);\n    }, s.prototype.getCompleteNode = function (t) {\n      var e = this.writeTree_.findRootMostValueAndPath(t);\n      return null != e ? this.writeTree_.get(e.path).getChild(Uo.relativePath(e.path, t)) : null;\n    }, s.prototype.getCompleteChildren = function () {\n      var n = [],\n          t = this.writeTree_.value;\n      return null != t ? t.isLeafNode() || t.forEachChild(Na, function (t, e) {\n        n.push(new ya(t, e));\n      }) : this.writeTree_.children.inorderTraversal(function (t, e) {\n        null != e.value && n.push(new ya(t, e.value));\n      }), n;\n    }, s.prototype.childCompoundWrite = function (t) {\n      if (t.isEmpty()) return this;\n      var e = this.getCompleteNode(t);\n      return new s(null != e ? new ss(e) : this.writeTree_.subtree(t));\n    }, s.prototype.isEmpty = function () {\n      return this.writeTree_.isEmpty();\n    }, s.prototype.apply = function (t) {\n      return function n(r, t, i) {\n        {\n          if (null != t.value) return i.updateChild(r, t.value);\n          var o = null;\n          return t.children.inorderTraversal(function (t, e) {\n            \".priority\" === t ? (fi(null !== e.value, \"Priority writes must always be leaf nodes\"), o = e.value) : i = n(r.child(t), e, i);\n          }), i.getChild(r).isEmpty() || null === o || (i = i.updateChild(r.child(\".priority\"), o)), i;\n        }\n      }(Uo.Empty, this.writeTree_, t);\n    }, s.Empty = new s(new ss(null)), s;\n  }();\n\n  var Ss = function () {\n    function c() {\n      this.visibleWrites_ = Ts.Empty, this.allWrites_ = [], this.lastWriteId_ = -1;\n    }\n\n    return c.prototype.childWrites = function (t) {\n      return new Is(t, this);\n    }, c.prototype.addOverwrite = function (t, e, n, r) {\n      fi(n > this.lastWriteId_, \"Stacking an older write on top of newer ones\"), void 0 === r && (r = !0), this.allWrites_.push({\n        path: t,\n        snap: e,\n        writeId: n,\n        visible: r\n      }), r && (this.visibleWrites_ = this.visibleWrites_.addWrite(t, e)), this.lastWriteId_ = n;\n    }, c.prototype.addMerge = function (t, e, n) {\n      fi(n > this.lastWriteId_, \"Stacking an older merge on top of newer ones\"), this.allWrites_.push({\n        path: t,\n        children: e,\n        writeId: n,\n        visible: !0\n      }), this.visibleWrites_ = this.visibleWrites_.addWrites(t, e), this.lastWriteId_ = n;\n    }, c.prototype.getWrite = function (t) {\n      for (var e = 0; e < this.allWrites_.length; e++) {\n        var n = this.allWrites_[e];\n        if (n.writeId === t) return n;\n      }\n\n      return null;\n    }, c.prototype.removeWrite = function (e) {\n      var n = this,\n          t = this.allWrites_.findIndex(function (t) {\n        return t.writeId === e;\n      });\n      fi(0 <= t, \"removeWrite called with nonexistent writeId.\");\n      var r = this.allWrites_[t];\n      this.allWrites_.splice(t, 1);\n\n      for (var i = r.visible, o = !1, a = this.allWrites_.length - 1; i && 0 <= a;) {\n        var s = this.allWrites_[a];\n        s.visible && (t <= a && this.recordContainsPath_(s, r.path) ? i = !1 : r.path.contains(s.path) && (o = !0)), a--;\n      }\n\n      if (i) {\n        if (o) return this.resetTree_(), !0;\n        r.snap ? this.visibleWrites_ = this.visibleWrites_.removeWrite(r.path) : Oo(r.children, function (t) {\n          n.visibleWrites_ = n.visibleWrites_.removeWrite(r.path.child(t));\n        });\n        return !0;\n      }\n\n      return !1;\n    }, c.prototype.getCompleteWriteData = function (t) {\n      return this.visibleWrites_.getCompleteNode(t);\n    }, c.prototype.calcCompleteEventCache = function (e, t, n, r) {\n      if (n || r) {\n        var i = this.visibleWrites_.childCompoundWrite(e);\n        if (!r && i.isEmpty()) return t;\n\n        if (r || null != t || i.hasCompleteWrite(Uo.Empty)) {\n          var o = c.layerTree_(this.allWrites_, function (t) {\n            return (t.visible || r) && (!n || !~n.indexOf(t.writeId)) && (t.path.contains(e) || e.contains(t.path));\n          }, e);\n          u = t || qa.EMPTY_NODE;\n          return o.apply(u);\n        }\n\n        return null;\n      }\n\n      var a = this.visibleWrites_.getCompleteNode(e);\n      if (null != a) return a;\n      var s = this.visibleWrites_.childCompoundWrite(e);\n      if (s.isEmpty()) return t;\n\n      if (null != t || s.hasCompleteWrite(Uo.Empty)) {\n        var u = t || qa.EMPTY_NODE;\n        return s.apply(u);\n      }\n\n      return null;\n    }, c.prototype.calcCompleteEventChildren = function (t, e) {\n      var r = qa.EMPTY_NODE,\n          n = this.visibleWrites_.getCompleteNode(t);\n      if (n) return n.isLeafNode() || n.forEachChild(Na, function (t, e) {\n        r = r.updateImmediateChild(t, e);\n      }), r;\n\n      if (e) {\n        var i = this.visibleWrites_.childCompoundWrite(t);\n        return e.forEachChild(Na, function (t, e) {\n          var n = i.childCompoundWrite(new Uo(t)).apply(e);\n          r = r.updateImmediateChild(t, n);\n        }), i.getCompleteChildren().forEach(function (t) {\n          r = r.updateImmediateChild(t.name, t.node);\n        }), r;\n      }\n\n      return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function (t) {\n        r = r.updateImmediateChild(t.name, t.node);\n      }), r;\n    }, c.prototype.calcEventCacheAfterServerOverwrite = function (t, e, n, r) {\n      fi(n || r, \"Either existingEventSnap or existingServerSnap must exist\");\n      var i = t.child(e);\n      if (this.visibleWrites_.hasCompleteWrite(i)) return null;\n      var o = this.visibleWrites_.childCompoundWrite(i);\n      return o.isEmpty() ? r.getChild(e) : o.apply(r.getChild(e));\n    }, c.prototype.calcCompleteChild = function (t, e, n) {\n      var r = t.child(e),\n          i = this.visibleWrites_.getCompleteNode(r);\n      return null != i ? i : n.isCompleteForChild(e) ? this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)) : null;\n    }, c.prototype.shadowingWrite = function (t) {\n      return this.visibleWrites_.getCompleteNode(t);\n    }, c.prototype.calcIndexedSlice = function (t, e, n, r, i, o) {\n      var a,\n          s = this.visibleWrites_.childCompoundWrite(t),\n          u = s.getCompleteNode(Uo.Empty);\n      if (null != u) a = u;else {\n        if (null == e) return [];\n        a = s.apply(e);\n      }\n      if ((a = a.withIndex(o)).isEmpty() || a.isLeafNode()) return [];\n\n      for (var c = [], h = o.getCompare(), l = i ? a.getReverseIteratorFrom(n, o) : a.getIteratorFrom(n, o), f = l.getNext(); f && c.length < r;) {\n        0 !== h(f, n) && c.push(f), f = l.getNext();\n      }\n\n      return c;\n    }, c.prototype.recordContainsPath_ = function (t, e) {\n      if (t.snap) return t.path.contains(e);\n\n      for (var n in t.children) {\n        if (t.children.hasOwnProperty(n) && t.path.child(n).contains(e)) return !0;\n      }\n\n      return !1;\n    }, c.prototype.resetTree_ = function () {\n      this.visibleWrites_ = c.layerTree_(this.allWrites_, c.DefaultFilter_, Uo.Empty), 0 < this.allWrites_.length ? this.lastWriteId_ = this.allWrites_[this.allWrites_.length - 1].writeId : this.lastWriteId_ = -1;\n    }, c.DefaultFilter_ = function (t) {\n      return t.visible;\n    }, c.layerTree_ = function (t, e, n) {\n      for (var r = Ts.Empty, i = 0; i < t.length; ++i) {\n        var o = t[i];\n\n        if (e(o)) {\n          var a = o.path,\n              s = void 0;\n          if (o.snap) n.contains(a) ? (s = Uo.relativePath(n, a), r = r.addWrite(s, o.snap)) : a.contains(n) && (s = Uo.relativePath(a, n), r = r.addWrite(Uo.Empty, o.snap.getChild(s)));else {\n            if (!o.children) throw pi(\"WriteRecord should have .snap or .children\");\n            if (n.contains(a)) s = Uo.relativePath(n, a), r = r.addWrites(s, o.children);else if (a.contains(n)) if ((s = Uo.relativePath(a, n)).isEmpty()) r = r.addWrites(Uo.Empty, o.children);else {\n              var u = Ri(o.children, s.getFront());\n\n              if (u) {\n                var c = u.getChild(s.popFront());\n                r = r.addWrite(Uo.Empty, c);\n              }\n            }\n          }\n        }\n      }\n\n      return r;\n    }, c;\n  }(),\n      Is = function () {\n    function e(t, e) {\n      this.treePath_ = t, this.writeTree_ = e;\n    }\n\n    return e.prototype.calcCompleteEventCache = function (t, e, n) {\n      return this.writeTree_.calcCompleteEventCache(this.treePath_, t, e, n);\n    }, e.prototype.calcCompleteEventChildren = function (t) {\n      return this.writeTree_.calcCompleteEventChildren(this.treePath_, t);\n    }, e.prototype.calcEventCacheAfterServerOverwrite = function (t, e, n) {\n      return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_, t, e, n);\n    }, e.prototype.shadowingWrite = function (t) {\n      return this.writeTree_.shadowingWrite(this.treePath_.child(t));\n    }, e.prototype.calcIndexedSlice = function (t, e, n, r, i) {\n      return this.writeTree_.calcIndexedSlice(this.treePath_, t, e, n, r, i);\n    }, e.prototype.calcCompleteChild = function (t, e) {\n      return this.writeTree_.calcCompleteChild(this.treePath_, t, e);\n    }, e.prototype.child = function (t) {\n      return new e(this.treePath_.child(t), this.writeTree_);\n    }, e;\n  }(),\n      Cs = function () {\n    function g(t) {\n      this.listenProvider_ = t, this.syncPointTree_ = ss.Empty, this.pendingWriteTree_ = new Ss(), this.tagToQueryMap = new Map(), this.queryToTagMap = new Map();\n    }\n\n    return g.prototype.applyUserOverwrite = function (t, e, n, r) {\n      return this.pendingWriteTree_.addOverwrite(t, e, n, r), r ? this.applyOperationToSyncPoints_(new cs(os.User, t, e)) : [];\n    }, g.prototype.applyUserMerge = function (t, e, n) {\n      this.pendingWriteTree_.addMerge(t, e, n);\n      var r = ss.fromObject(e);\n      return this.applyOperationToSyncPoints_(new hs(os.User, t, r));\n    }, g.prototype.ackUserWrite = function (t, e) {\n      void 0 === e && (e = !1);\n      var n = this.pendingWriteTree_.getWrite(t);\n\n      if (this.pendingWriteTree_.removeWrite(t)) {\n        var r = ss.Empty;\n        return null != n.snap ? r = r.set(Uo.Empty, !0) : Oo(n.children, function (t, e) {\n          r = r.set(new Uo(t), e);\n        }), this.applyOperationToSyncPoints_(new as(n.path, r, e));\n      }\n\n      return [];\n    }, g.prototype.applyServerOverwrite = function (t, e) {\n      return this.applyOperationToSyncPoints_(new cs(os.Server, t, e));\n    }, g.prototype.applyServerMerge = function (t, e) {\n      var n = ss.fromObject(e);\n      return this.applyOperationToSyncPoints_(new hs(os.Server, t, n));\n    }, g.prototype.applyListenComplete = function (t) {\n      return this.applyOperationToSyncPoints_(new us(os.Server, t));\n    }, g.prototype.applyTaggedQueryOverwrite = function (t, e, n) {\n      var r = this.queryKeyForTag_(n);\n      if (null == r) return [];\n      var i = g.parseQueryKey_(r),\n          o = i.path,\n          a = i.queryId,\n          s = Uo.relativePath(o, t),\n          u = new cs(os.forServerTaggedQuery(a), s, e);\n      return this.applyTaggedOperation_(o, u);\n    }, g.prototype.applyTaggedQueryMerge = function (t, e, n) {\n      var r = this.queryKeyForTag_(n);\n\n      if (r) {\n        var i = g.parseQueryKey_(r),\n            o = i.path,\n            a = i.queryId,\n            s = Uo.relativePath(o, t),\n            u = ss.fromObject(e),\n            c = new hs(os.forServerTaggedQuery(a), s, u);\n        return this.applyTaggedOperation_(o, c);\n      }\n\n      return [];\n    }, g.prototype.applyTaggedListenComplete = function (t, e) {\n      var n = this.queryKeyForTag_(e);\n\n      if (n) {\n        var r = g.parseQueryKey_(n),\n            i = r.path,\n            o = r.queryId,\n            a = Uo.relativePath(i, t),\n            s = new us(os.forServerTaggedQuery(o), a);\n        return this.applyTaggedOperation_(i, s);\n      }\n\n      return [];\n    }, g.prototype.addEventRegistration = function (t, e) {\n      var r = t.path,\n          i = null,\n          o = !1;\n      this.syncPointTree_.foreachOnPath(r, function (t, e) {\n        var n = Uo.relativePath(t, r);\n        i = i || e.getCompleteServerCache(n), o = o || e.hasCompleteView();\n      });\n      var n,\n          a = this.syncPointTree_.get(r);\n      (a ? (o = o || a.hasCompleteView(), i = i || a.getCompleteServerCache(Uo.Empty)) : (a = new Es(), this.syncPointTree_ = this.syncPointTree_.set(r, a)), null != i) ? n = !0 : (n = !1, i = qa.EMPTY_NODE, this.syncPointTree_.subtree(r).foreachChild(function (t, e) {\n        var n = e.getCompleteServerCache(Uo.Empty);\n        n && (i = i.updateImmediateChild(t, n));\n      }));\n      var s = a.viewExistsForQuery(t);\n\n      if (!s && !t.getQueryParams().loadsAllData()) {\n        var u = g.makeQueryKey_(t);\n        fi(!this.queryToTagMap.has(u), \"View does not exist, but we have a tag\");\n        var c = g.getNextQueryTag_();\n        this.queryToTagMap.set(u, c), this.tagToQueryMap.set(c, u);\n      }\n\n      var h = this.pendingWriteTree_.childWrites(r),\n          l = a.addEventRegistration(t, e, h, i, n);\n\n      if (!s && !o) {\n        var f = a.viewForQuery(t);\n        l = l.concat(this.setupListener_(t, f));\n      }\n\n      return l;\n    }, g.prototype.removeEventRegistration = function (t, e, n) {\n      var r = this,\n          i = t.path,\n          o = this.syncPointTree_.get(i),\n          a = [];\n\n      if (o && (\"default\" === t.queryIdentifier() || o.viewExistsForQuery(t))) {\n        var s = o.removeEventRegistration(t, e, n);\n        o.isEmpty() && (this.syncPointTree_ = this.syncPointTree_.remove(i));\n        var u = s.removed;\n        a = s.events;\n        var c = -1 !== u.findIndex(function (t) {\n          return t.getQueryParams().loadsAllData();\n        }),\n            h = this.syncPointTree_.findOnPath(i, function (t, e) {\n          return e.hasCompleteView();\n        });\n\n        if (c && !h) {\n          var l = this.syncPointTree_.subtree(i);\n          if (!l.isEmpty()) for (var f = this.collectDistinctViewsForSubTree_(l), p = 0; p < f.length; ++p) {\n            var d = f[p],\n                y = d.getQuery(),\n                m = this.createListenerForView_(d);\n            this.listenProvider_.startListening(g.queryForListening_(y), this.tagForQuery_(y), m.hashFn, m.onComplete);\n          }\n        }\n\n        if (!h && 0 < u.length && !n) if (c) {\n          this.listenProvider_.stopListening(g.queryForListening_(t), null);\n        } else u.forEach(function (t) {\n          var e = r.queryToTagMap.get(g.makeQueryKey_(t));\n          r.listenProvider_.stopListening(g.queryForListening_(t), e);\n        });\n        this.removeTags_(u);\n      }\n\n      return a;\n    }, g.prototype.calcCompleteEventCache = function (i, t) {\n      var e = this.pendingWriteTree_,\n          n = this.syncPointTree_.findOnPath(i, function (t, e) {\n        var n = Uo.relativePath(t, i),\n            r = e.getCompleteServerCache(n);\n        if (r) return r;\n      });\n      return e.calcCompleteEventCache(i, n, t, !0);\n    }, g.prototype.collectDistinctViewsForSubTree_ = function (t) {\n      return t.fold(function (t, e, n) {\n        if (e && e.hasCompleteView()) return [e.getCompleteView()];\n        var r = [];\n        return e && (r = e.getQueryViews()), Oo(n, function (t, e) {\n          r = r.concat(e);\n        }), r;\n      });\n    }, g.prototype.removeTags_ = function (t) {\n      for (var e = 0; e < t.length; ++e) {\n        var n = t[e];\n\n        if (!n.getQueryParams().loadsAllData()) {\n          var r = g.makeQueryKey_(n),\n              i = this.queryToTagMap.get(r);\n          this.queryToTagMap.delete(r), this.tagToQueryMap.delete(i);\n        }\n      }\n    }, g.queryForListening_ = function (t) {\n      return t.getQueryParams().loadsAllData() && !t.getQueryParams().isDefault() ? t.getRef() : t;\n    }, g.prototype.setupListener_ = function (t, e) {\n      var n = t.path,\n          r = this.tagForQuery_(t),\n          i = this.createListenerForView_(e),\n          o = this.listenProvider_.startListening(g.queryForListening_(t), r, i.hashFn, i.onComplete),\n          a = this.syncPointTree_.subtree(n);\n      if (r) fi(!a.value.hasCompleteView(), \"If we're adding a query, it shouldn't be shadowed\");else for (var s = a.fold(function (t, e, n) {\n        if (!t.isEmpty() && e && e.hasCompleteView()) return [e.getCompleteView().getQuery()];\n        var r = [];\n        return e && (r = r.concat(e.getQueryViews().map(function (t) {\n          return t.getQuery();\n        }))), Oo(n, function (t, e) {\n          r = r.concat(e);\n        }), r;\n      }), u = 0; u < s.length; ++u) {\n        var c = s[u];\n        this.listenProvider_.stopListening(g.queryForListening_(c), this.tagForQuery_(c));\n      }\n      return o;\n    }, g.prototype.createListenerForView_ = function (t) {\n      var n = this,\n          r = t.getQuery(),\n          i = this.tagForQuery_(r);\n      return {\n        hashFn: function hashFn() {\n          return (t.getServerCache() || qa.EMPTY_NODE).hash();\n        },\n        onComplete: function onComplete(t) {\n          if (\"ok\" === t) return i ? n.applyTaggedListenComplete(r.path, i) : n.applyListenComplete(r.path);\n\n          var e = function (t, e) {\n            var n = \"Unknown Error\";\n            \"too_big\" === t ? n = \"The data requested exceeds the maximum size that can be accessed with a single request.\" : \"permission_denied\" == t ? n = \"Client doesn't have permission to access the desired data.\" : \"unavailable\" == t && (n = \"The service is unavailable\");\n            var r = new Error(t + \" at \" + e.path.toString() + \": \" + n);\n            return r.code = t.toUpperCase(), r;\n          }(t, r);\n\n          return n.removeEventRegistration(r, null, e);\n        }\n      };\n    }, g.makeQueryKey_ = function (t) {\n      return t.path.toString() + \"$\" + t.queryIdentifier();\n    }, g.parseQueryKey_ = function (t) {\n      var e = t.indexOf(\"$\");\n      return fi(-1 !== e && e < t.length - 1, \"Bad queryKey.\"), {\n        queryId: t.substr(e + 1),\n        path: new Uo(t.substr(0, e))\n      };\n    }, g.prototype.queryKeyForTag_ = function (t) {\n      return this.tagToQueryMap.get(t);\n    }, g.prototype.tagForQuery_ = function (t) {\n      var e = g.makeQueryKey_(t);\n      return this.queryToTagMap.get(e);\n    }, g.getNextQueryTag_ = function () {\n      return g.nextQueryTag_++;\n    }, g.prototype.applyTaggedOperation_ = function (t, e) {\n      var n = this.syncPointTree_.get(t);\n      fi(n, \"Missing sync point for query tag that we're tracking\");\n      var r = this.pendingWriteTree_.childWrites(t);\n      return n.applyOperation(e, r, null);\n    }, g.prototype.applyOperationToSyncPoints_ = function (t) {\n      return this.applyOperationHelper_(t, this.syncPointTree_, null, this.pendingWriteTree_.childWrites(Uo.Empty));\n    }, g.prototype.applyOperationHelper_ = function (t, e, n, r) {\n      if (t.path.isEmpty()) return this.applyOperationDescendantsHelper_(t, e, n, r);\n      var i = e.get(Uo.Empty);\n      null == n && null != i && (n = i.getCompleteServerCache(Uo.Empty));\n      var o = [],\n          a = t.path.getFront(),\n          s = t.operationForChild(a),\n          u = e.children.get(a);\n\n      if (u && s) {\n        var c = n ? n.getImmediateChild(a) : null,\n            h = r.child(a);\n        o = o.concat(this.applyOperationHelper_(s, u, c, h));\n      }\n\n      return i && (o = o.concat(i.applyOperation(t, r, n))), o;\n    }, g.prototype.applyOperationDescendantsHelper_ = function (o, t, a, s) {\n      var u = this,\n          e = t.get(Uo.Empty);\n      null == a && null != e && (a = e.getCompleteServerCache(Uo.Empty));\n      var c = [];\n      return t.children.inorderTraversal(function (t, e) {\n        var n = a ? a.getImmediateChild(t) : null,\n            r = s.child(t),\n            i = o.operationForChild(t);\n        i && (c = c.concat(u.applyOperationDescendantsHelper_(i, e, n, r)));\n      }), e && (c = c.concat(e.applyOperation(o, s, a))), c;\n    }, g.nextQueryTag_ = 1, g;\n  }(),\n      Ns = function () {\n    function t() {\n      this.rootNode_ = qa.EMPTY_NODE;\n    }\n\n    return t.prototype.getNode = function (t) {\n      return this.rootNode_.getChild(t);\n    }, t.prototype.updateSnapshot = function (t, e) {\n      this.rootNode_ = this.rootNode_.updateChild(t, e);\n    }, t;\n  }(),\n      As = function () {\n    function t(t) {\n      this.app_ = t;\n    }\n\n    return t.prototype.getToken = function (t) {\n      return this.app_.INTERNAL.getToken(t).then(null, function (t) {\n        return t && \"auth/token-not-initialized\" === t.code ? (bo(\"Got auth/token-not-initialized error.  Treating as null token.\"), null) : Promise.reject(t);\n      });\n    }, t.prototype.addTokenChangeListener = function (t) {\n      this.app_.INTERNAL.addAuthTokenListener(t);\n    }, t.prototype.removeTokenChangeListener = function (t) {\n      this.app_.INTERNAL.removeAuthTokenListener(t);\n    }, t.prototype.notifyForInvalidToken = function () {\n      var t = 'Provided authentication credentials for the app named \"' + this.app_.name + '\" are invalid. This usually indicates your app was not initialized correctly. ';\n      \"credential\" in this.app_.options ? t += 'Make sure the \"credential\" property provided to initializeApp() is authorized to access the specified \"databaseURL\" and is from the correct project.' : \"serviceAccount\" in this.app_.options ? t += 'Make sure the \"serviceAccount\" property provided to initializeApp() is authorized to access the specified \"databaseURL\" and is from the correct project.' : t += 'Make sure the \"apiKey\" and \"databaseURL\" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.', To(t);\n    }, t;\n  }(),\n      ks = function () {\n    function t() {\n      this.counters_ = {};\n    }\n\n    return t.prototype.incrementCounter = function (t, e) {\n      void 0 === e && (e = 1), Di(this.counters_, t) || (this.counters_[t] = 0), this.counters_[t] += e;\n    }, t.prototype.get = function () {\n      return gi(this.counters_);\n    }, t;\n  }(),\n      Ds = function () {\n    function t() {}\n\n    return t.getCollection = function (t) {\n      var e = t.toString();\n      return this.collections_[e] || (this.collections_[e] = new ks()), this.collections_[e];\n    }, t.getOrCreateReporter = function (t, e) {\n      var n = t.toString();\n      return this.reporters_[n] || (this.reporters_[n] = e()), this.reporters_[n];\n    }, t.collections_ = {}, t.reporters_ = {}, t;\n  }(),\n      Rs = function () {\n    function t(t) {\n      this.collection_ = t, this.last_ = null;\n    }\n\n    return t.prototype.get = function () {\n      var t = this.collection_.get(),\n          n = _oi({}, t);\n\n      return this.last_ && Oo(this.last_, function (t, e) {\n        n[t] = n[t] - e;\n      }), this.last_ = t, n;\n    }, t;\n  }(),\n      Os = function () {\n    function t(t, e) {\n      this.server_ = e, this.statsToReport_ = {}, this.statsListener_ = new Rs(t);\n      var n = 1e4 + 2e4 * Math.random();\n      Fo(this.reportStats_.bind(this), Math.floor(n));\n    }\n\n    return t.prototype.includeStat = function (t) {\n      this.statsToReport_[t] = !0;\n    }, t.prototype.reportStats_ = function () {\n      var n = this,\n          t = this.statsListener_.get(),\n          r = {},\n          i = !1;\n      Oo(t, function (t, e) {\n        0 < e && Di(n.statsToReport_, t) && (r[t] = e, i = !0);\n      }), i && this.server_.reportStats(r), Fo(this.reportStats_.bind(this), Math.floor(2 * Math.random() * 3e5));\n    }, t;\n  }(),\n      Ps = function () {\n    function t() {\n      this.eventLists_ = [], this.recursionDepth_ = 0;\n    }\n\n    return t.prototype.queueEvents = function (t) {\n      for (var e = null, n = 0; n < t.length; n++) {\n        var r = t[n],\n            i = r.getPath();\n        null === e || i.equals(e.getPath()) || (this.eventLists_.push(e), e = null), null === e && (e = new xs(i)), e.add(r);\n      }\n\n      e && this.eventLists_.push(e);\n    }, t.prototype.raiseEventsAtPath = function (e, t) {\n      this.queueEvents(t), this.raiseQueuedEventsMatchingPredicate_(function (t) {\n        return t.equals(e);\n      });\n    }, t.prototype.raiseEventsForChangedPath = function (e, t) {\n      this.queueEvents(t), this.raiseQueuedEventsMatchingPredicate_(function (t) {\n        return t.contains(e) || e.contains(t);\n      });\n    }, t.prototype.raiseQueuedEventsMatchingPredicate_ = function (t) {\n      this.recursionDepth_++;\n\n      for (var e = !0, n = 0; n < this.eventLists_.length; n++) {\n        var r = this.eventLists_[n];\n        if (r) t(r.getPath()) ? (this.eventLists_[n].raise(), this.eventLists_[n] = null) : e = !1;\n      }\n\n      e && (this.eventLists_ = []), this.recursionDepth_--;\n    }, t;\n  }(),\n      xs = function () {\n    function t(t) {\n      this.path_ = t, this.events_ = [];\n    }\n\n    return t.prototype.add = function (t) {\n      this.events_.push(t);\n    }, t.prototype.raise = function () {\n      for (var t = 0; t < this.events_.length; t++) {\n        var e = this.events_[t];\n\n        if (null !== e) {\n          this.events_[t] = null;\n          var n = e.getEventRunner();\n          mo && bo(\"event: \" + e.toString()), Lo(n);\n        }\n      }\n    }, t.prototype.getPath = function () {\n      return this.path_;\n    }, t;\n  }(),\n      Ms = function () {\n    function t(t) {\n      this.allowedEvents_ = t, this.listeners_ = {}, fi(Array.isArray(t) && 0 < t.length, \"Requires a non-empty array\");\n    }\n\n    return t.prototype.trigger = function (t) {\n      for (var e = [], n = 1; n < arguments.length; n++) {\n        e[n - 1] = arguments[n];\n      }\n\n      if (Array.isArray(this.listeners_[t])) for (var r = hi(this.listeners_[t]), i = 0; i < r.length; i++) {\n        r[i].callback.apply(r[i].context, e);\n      }\n    }, t.prototype.on = function (t, e, n) {\n      this.validateEventType_(t), this.listeners_[t] = this.listeners_[t] || [], this.listeners_[t].push({\n        callback: e,\n        context: n\n      });\n      var r = this.getInitialEvent(t);\n      r && e.apply(n, r);\n    }, t.prototype.off = function (t, e, n) {\n      this.validateEventType_(t);\n\n      for (var r = this.listeners_[t] || [], i = 0; i < r.length; i++) {\n        if (r[i].callback === e && (!n || n === r[i].context)) return void r.splice(i, 1);\n      }\n    }, t.prototype.validateEventType_ = function (e) {\n      fi(this.allowedEvents_.find(function (t) {\n        return t === e;\n      }), \"Unknown event: \" + e);\n    }, t;\n  }(),\n      Ls = function (r) {\n    function t() {\n      var e,\n          t,\n          n = r.call(this, [\"visible\"]) || this;\n      return \"undefined\" != typeof document && void 0 !== document.addEventListener && (void 0 !== document.hidden ? (t = \"visibilitychange\", e = \"hidden\") : void 0 !== document.mozHidden ? (t = \"mozvisibilitychange\", e = \"mozHidden\") : void 0 !== document.msHidden ? (t = \"msvisibilitychange\", e = \"msHidden\") : void 0 !== document.webkitHidden && (t = \"webkitvisibilitychange\", e = \"webkitHidden\")), n.visible_ = !0, t && document.addEventListener(t, function () {\n        var t = !document[e];\n        t !== n.visible_ && (n.visible_ = t, n.trigger(\"visible\", t));\n      }, !1), n;\n    }\n\n    return ii(t, r), t.getInstance = function () {\n      return new t();\n    }, t.prototype.getInitialEvent = function (t) {\n      return fi(\"visible\" === t, \"Unknown event type: \" + t), [this.visible_];\n    }, t;\n  }(Ms),\n      Fs = function (e) {\n    function t() {\n      var t = e.call(this, [\"online\"]) || this;\n      return t.online_ = !0, \"undefined\" == typeof window || void 0 === window.addEventListener || _i() || (window.addEventListener(\"online\", function () {\n        t.online_ || (t.online_ = !0, t.trigger(\"online\", !0));\n      }, !1), window.addEventListener(\"offline\", function () {\n        t.online_ && (t.online_ = !1, t.trigger(\"online\", !1));\n      }, !1)), t;\n    }\n\n    return ii(t, e), t.getInstance = function () {\n      return new t();\n    }, t.prototype.getInitialEvent = function (t) {\n      return fi(\"online\" === t, \"Unknown event type: \" + t), [this.online_];\n    }, t.prototype.currentlyOnline = function () {\n      return this.online_;\n    }, t;\n  }(Ms),\n      Us = function () {\n    function t(t) {\n      this.onMessage_ = t, this.pendingResponses = [], this.currentResponseNum = 0, this.closeAfterResponse = -1, this.onClose = null;\n    }\n\n    return t.prototype.closeAfter = function (t, e) {\n      this.closeAfterResponse = t, this.onClose = e, this.closeAfterResponse < this.currentResponseNum && (this.onClose(), this.onClose = null);\n    }, t.prototype.handleResponse = function (t, e) {\n      var r = this;\n      this.pendingResponses[t] = e;\n\n      for (var n = function n() {\n        var e = i.pendingResponses[i.currentResponseNum];\n        delete i.pendingResponses[i.currentResponseNum];\n\n        for (var t = function t(_t4) {\n          e[_t4] && Lo(function () {\n            r.onMessage_(e[_t4]);\n          });\n        }, n = 0; n < e.length; ++n) {\n          t(n);\n        }\n\n        if (i.currentResponseNum === i.closeAfterResponse) return i.onClose && (i.onClose(), i.onClose = null), \"break\";\n        i.currentResponseNum++;\n      }, i = this; this.pendingResponses[this.currentResponseNum];) {\n        if (\"break\" === n()) break;\n      }\n    }, t;\n  }(),\n      qs = function () {\n    function t(t, e, n, r) {\n      this.connId = t, this.repoInfo = e, this.transportSessionId = n, this.lastSessionId = r, this.bytesSent = 0, this.bytesReceived = 0, this.everConnected_ = !1, this.log_ = wo(t), this.stats_ = Ds.getCollection(e), this.urlFn = function (t) {\n        return e.connectionURL(jo, t);\n      };\n    }\n\n    return t.prototype.open = function (t, e) {\n      var a = this;\n      this.curSegmentNum = 0, this.onDisconnect_ = e, this.myPacketOrderer = new Us(t), this.isClosed_ = !1, this.connectTimeoutTimer_ = setTimeout(function () {\n        a.log_(\"Timed out trying to connect.\"), a.onClosed_(), a.connectTimeoutTimer_ = null;\n      }, Math.floor(3e4)), function (t) {\n        if (\"complete\" === document.readyState) t();else {\n          var e = !1,\n              n = function n() {\n            document.body ? e || (e = !0, t()) : setTimeout(n, Math.floor(10));\n          };\n\n          document.addEventListener ? (document.addEventListener(\"DOMContentLoaded\", n, !1), window.addEventListener(\"load\", n, !1)) : document.attachEvent && (document.attachEvent(\"onreadystatechange\", function () {\n            \"complete\" === document.readyState && n();\n          }), window.attachEvent(\"onload\", n));\n        }\n      }(function () {\n        if (!a.isClosed_) {\n          a.scriptTagHolder = new Vs(function () {\n            for (var t = [], e = 0; e < arguments.length; e++) {\n              t[e] = arguments[e];\n            }\n\n            var n = ci(t, 5),\n                r = n[0],\n                i = n[1],\n                o = n[2];\n            n[3], n[4];\n            if (a.incrementIncomingBytes_(t), a.scriptTagHolder) if (a.connectTimeoutTimer_ && (clearTimeout(a.connectTimeoutTimer_), a.connectTimeoutTimer_ = null), a.everConnected_ = !0, \"start\" == r) a.id = i, a.password = o;else {\n              if (\"close\" !== r) throw new Error(\"Unrecognized command received: \" + r);\n              i ? (a.scriptTagHolder.sendNewPolls = !1, a.myPacketOrderer.closeAfter(i, function () {\n                a.onClosed_();\n              })) : a.onClosed_();\n            }\n          }, function () {\n            for (var t = [], e = 0; e < arguments.length; e++) {\n              t[e] = arguments[e];\n            }\n\n            var n = ci(t, 2),\n                r = n[0],\n                i = n[1];\n            a.incrementIncomingBytes_(t), a.myPacketOrderer.handleResponse(r, i);\n          }, function () {\n            a.onClosed_();\n          }, a.urlFn);\n          var t = {\n            start: \"t\"\n          };\n          t.ser = Math.floor(1e8 * Math.random()), a.scriptTagHolder.uniqueCallbackIdentifier && (t.cb = a.scriptTagHolder.uniqueCallbackIdentifier), t.v = \"5\", a.transportSessionId && (t.s = a.transportSessionId), a.lastSessionId && (t.ls = a.lastSessionId), \"undefined\" != typeof location && location.href && -1 !== location.href.indexOf(Vo) && (t.r = \"f\");\n          var e = a.urlFn(t);\n          a.log_(\"Connecting via long-poll to \" + e), a.scriptTagHolder.addTag(e, function () {});\n        }\n      });\n    }, t.prototype.start = function () {\n      this.scriptTagHolder.startLongPoll(this.id, this.password), this.addDisconnectPingFrame(this.id, this.password);\n    }, t.forceAllow = function () {\n      t.forceAllow_ = !0;\n    }, t.forceDisallow = function () {\n      t.forceDisallow_ = !0;\n    }, t.isAvailable = function () {\n      return t.forceAllow_ || !t.forceDisallow_ && \"undefined\" != typeof document && null != document.createElement && !(\"object\" == typeof window && window.chrome && window.chrome.extension && !/^chrome/.test(window.location.href)) && !(\"object\" == typeof Windows && \"object\" == typeof Windows.UI) && !Ti();\n    }, t.prototype.markConnectionHealthy = function () {}, t.prototype.shutdown_ = function () {\n      this.isClosed_ = !0, this.scriptTagHolder && (this.scriptTagHolder.close(), this.scriptTagHolder = null), this.myDisconnFrame && (document.body.removeChild(this.myDisconnFrame), this.myDisconnFrame = null), this.connectTimeoutTimer_ && (clearTimeout(this.connectTimeoutTimer_), this.connectTimeoutTimer_ = null);\n    }, t.prototype.onClosed_ = function () {\n      this.isClosed_ || (this.log_(\"Longpoll is closing itself\"), this.shutdown_(), this.onDisconnect_ && (this.onDisconnect_(this.everConnected_), this.onDisconnect_ = null));\n    }, t.prototype.close = function () {\n      this.isClosed_ || (this.log_(\"Longpoll is being closed.\"), this.shutdown_());\n    }, t.prototype.send = function (t) {\n      var e = Ai(t);\n      this.bytesSent += e.length, this.stats_.incrementCounter(\"bytes_sent\", e.length);\n\n      for (var n, r = (n = di(e), yi.encodeByteArray(n, !0)), i = Ro(r, 1840), o = 0; o < i.length; o++) {\n        this.scriptTagHolder.enqueueSegment(this.curSegmentNum, i.length, i[o]), this.curSegmentNum++;\n      }\n    }, t.prototype.addDisconnectPingFrame = function (t, e) {\n      this.myDisconnFrame = document.createElement(\"iframe\");\n      var n = {\n        dframe: \"t\"\n      };\n      n.id = t, n.pw = e, this.myDisconnFrame.src = this.urlFn(n), this.myDisconnFrame.style.display = \"none\", document.body.appendChild(this.myDisconnFrame);\n    }, t.prototype.incrementIncomingBytes_ = function (t) {\n      var e = Ai(t).length;\n      this.bytesReceived += e, this.stats_.incrementCounter(\"bytes_received\", e);\n    }, t;\n  }(),\n      Vs = function () {\n    function a(t, e, n, r) {\n      this.onDisconnect = n, this.urlFn = r, this.outstandingRequests = new Set(), this.pendingSegs = [], this.currentSerial = Math.floor(1e8 * Math.random()), this.sendNewPolls = !0, this.uniqueCallbackIdentifier = fo(), window[\"pLPCommand\" + this.uniqueCallbackIdentifier] = t, window[\"pRTLPCB\" + this.uniqueCallbackIdentifier] = e, this.myIFrame = a.createIFrame_();\n      var i = \"\";\n      this.myIFrame.src && \"javascript:\" === this.myIFrame.src.substr(0, \"javascript:\".length) && (i = '<script>document.domain=\"' + document.domain + '\";<\\/script>');\n      var o = \"<html><body>\" + i + \"</body></html>\";\n\n      try {\n        this.myIFrame.doc.open(), this.myIFrame.doc.write(o), this.myIFrame.doc.close();\n      } catch (t) {\n        bo(\"frame writing exception\"), t.stack && bo(t.stack), bo(t);\n      }\n    }\n\n    return a.createIFrame_ = function () {\n      var e = document.createElement(\"iframe\");\n      if (e.style.display = \"none\", !document.body) throw \"Document body has not initialized. Wait to initialize Firebase until after the document is ready.\";\n      document.body.appendChild(e);\n\n      try {\n        e.contentWindow.document || bo(\"No IE domain setting required\");\n      } catch (t) {\n        var n = document.domain;\n        e.src = \"javascript:void((function(){document.open();document.domain='\" + n + \"';document.close();})())\";\n      }\n\n      return e.contentDocument ? e.doc = e.contentDocument : e.contentWindow ? e.doc = e.contentWindow.document : e.document && (e.doc = e.document), e;\n    }, a.prototype.close = function () {\n      var t = this;\n      this.alive = !1, this.myIFrame && (this.myIFrame.doc.body.innerHTML = \"\", setTimeout(function () {\n        null !== t.myIFrame && (document.body.removeChild(t.myIFrame), t.myIFrame = null);\n      }, Math.floor(0)));\n      var e = this.onDisconnect;\n      e && (this.onDisconnect = null, e());\n    }, a.prototype.startLongPoll = function (t, e) {\n      for (this.myID = t, this.myPW = e, this.alive = !0; this.newRequest_();) {\n        ;\n      }\n    }, a.prototype.newRequest_ = function () {\n      if (this.alive && this.sendNewPolls && this.outstandingRequests.size < (0 < this.pendingSegs.length ? 2 : 1)) {\n        this.currentSerial++;\n        var t = {};\n        t.id = this.myID, t.pw = this.myPW, t.ser = this.currentSerial;\n\n        for (var e = this.urlFn(t), n = \"\", r = 0; 0 < this.pendingSegs.length;) {\n          if (!(this.pendingSegs[0].d.length + 30 + n.length <= 1870)) break;\n          var i = this.pendingSegs.shift();\n          n = n + \"&seg\" + r + \"=\" + i.seg + \"&ts\" + r + \"=\" + i.ts + \"&d\" + r + \"=\" + i.d, r++;\n        }\n\n        return e += n, this.addLongPollTag_(e, this.currentSerial), !0;\n      }\n\n      return !1;\n    }, a.prototype.enqueueSegment = function (t, e, n) {\n      this.pendingSegs.push({\n        seg: t,\n        ts: e,\n        d: n\n      }), this.alive && this.newRequest_();\n    }, a.prototype.addLongPollTag_ = function (t, e) {\n      var n = this;\n      this.outstandingRequests.add(e);\n\n      var r = function r() {\n        n.outstandingRequests.delete(e), n.newRequest_();\n      },\n          i = setTimeout(r, Math.floor(25e3));\n\n      this.addTag(t, function () {\n        clearTimeout(i), r();\n      });\n    }, a.prototype.addTag = function (t, n) {\n      var r = this;\n      setTimeout(function () {\n        try {\n          if (!r.sendNewPolls) return;\n          var e = r.myIFrame.doc.createElement(\"script\");\n          e.type = \"text/javascript\", e.async = !0, e.src = t, e.onload = e.onreadystatechange = function () {\n            var t = e.readyState;\n            t && \"loaded\" !== t && \"complete\" !== t || (e.onload = e.onreadystatechange = null, e.parentNode && e.parentNode.removeChild(e), n());\n          }, e.onerror = function () {\n            bo(\"Long-poll script failed to load: \" + t), r.sendNewPolls = !1, r.close();\n          }, r.myIFrame.doc.body.appendChild(e);\n        } catch (t) {}\n      }, Math.floor(1));\n    }, a;\n  }(),\n      Bs = \"\";\n\n  var js = null;\n  \"undefined\" != typeof MozWebSocket ? js = MozWebSocket : \"undefined\" != typeof WebSocket && (js = WebSocket);\n\n  var Ws = function () {\n    function i(t, e, n, r) {\n      this.connId = t, this.keepaliveTimer = null, this.frames = null, this.totalFrames = 0, this.bytesSent = 0, this.bytesReceived = 0, this.log_ = wo(this.connId), this.stats_ = Ds.getCollection(e), this.connURL = i.connectionURL_(e, n, r);\n    }\n\n    return i.connectionURL_ = function (t, e, n) {\n      var r = {\n        v: \"5\"\n      };\n      return \"undefined\" != typeof location && location.href && -1 !== location.href.indexOf(Vo) && (r.r = \"f\"), e && (r.s = e), n && (r.ls = n), t.connectionURL(Bo, r);\n    }, i.prototype.open = function (t, e) {\n      var n = this;\n      this.onDisconnect = e, this.onMessage = t, this.log_(\"Websocket connecting to \" + this.connURL), this.everConnected_ = !1, co.set(\"previous_websocket_failure\", !0);\n\n      try {\n        if (Ti()) {\n          var r = li.NODE_ADMIN ? \"AdminNode\" : \"Node\",\n              i = {\n            headers: {\n              \"User-Agent\": \"Firebase/5/\" + Bs + \"/\" + process.platform + \"/\" + r\n            }\n          },\n              o = process.env,\n              a = 0 == this.connURL.indexOf(\"wss://\") ? o.HTTPS_PROXY || o.https_proxy : o.HTTP_PROXY || o.http_proxy;\n          a && (i.proxy = {\n            origin: a\n          }), this.mySock = new js(this.connURL, [], i);\n        } else this.mySock = new js(this.connURL);\n      } catch (t) {\n        this.log_(\"Error instantiating WebSocket.\");\n        var s = t.message || t.data;\n        return s && this.log_(s), void this.onClosed_();\n      }\n\n      this.mySock.onopen = function () {\n        n.log_(\"Websocket connected.\"), n.everConnected_ = !0;\n      }, this.mySock.onclose = function () {\n        n.log_(\"Websocket connection was disconnected.\"), n.mySock = null, n.onClosed_();\n      }, this.mySock.onmessage = function (t) {\n        n.handleIncomingFrame(t);\n      }, this.mySock.onerror = function (t) {\n        n.log_(\"WebSocket error.  Closing connection.\");\n        var e = t.message || t.data;\n        e && n.log_(e), n.onClosed_();\n      };\n    }, i.prototype.start = function () {}, i.forceDisallow = function () {\n      i.forceDisallow_ = !0;\n    }, i.isAvailable = function () {\n      var t = !1;\n\n      if (\"undefined\" != typeof navigator && navigator.userAgent) {\n        var e = navigator.userAgent.match(/Android ([0-9]{0,}\\.[0-9]{0,})/);\n        e && 1 < e.length && parseFloat(e[1]) < 4.4 && (t = !0);\n      }\n\n      return !t && null !== js && !i.forceDisallow_;\n    }, i.previouslyFailed = function () {\n      return co.isInMemoryStorage || !0 === co.get(\"previous_websocket_failure\");\n    }, i.prototype.markConnectionHealthy = function () {\n      co.remove(\"previous_websocket_failure\");\n    }, i.prototype.appendFrame_ = function (t) {\n      if (this.frames.push(t), this.frames.length == this.totalFrames) {\n        var e = this.frames.join(\"\");\n        this.frames = null;\n        var n = Ni(e);\n        this.onMessage(n);\n      }\n    }, i.prototype.handleNewFrameCount_ = function (t) {\n      this.totalFrames = t, this.frames = [];\n    }, i.prototype.extractFrameCount_ = function (t) {\n      if (fi(null === this.frames, \"We already have a frame buffer\"), t.length <= 6) {\n        var e = Number(t);\n        if (!isNaN(e)) return this.handleNewFrameCount_(e), null;\n      }\n\n      return this.handleNewFrameCount_(1), t;\n    }, i.prototype.handleIncomingFrame = function (t) {\n      if (null !== this.mySock) {\n        var e = t.data;\n        if (this.bytesReceived += e.length, this.stats_.incrementCounter(\"bytes_received\", e.length), this.resetKeepAlive(), null !== this.frames) this.appendFrame_(e);else {\n          var n = this.extractFrameCount_(e);\n          null !== n && this.appendFrame_(n);\n        }\n      }\n    }, i.prototype.send = function (t) {\n      this.resetKeepAlive();\n      var e = Ai(t);\n      this.bytesSent += e.length, this.stats_.incrementCounter(\"bytes_sent\", e.length);\n      var n = Ro(e, 16384);\n      1 < n.length && this.sendString_(String(n.length));\n\n      for (var r = 0; r < n.length; r++) {\n        this.sendString_(n[r]);\n      }\n    }, i.prototype.shutdown_ = function () {\n      this.isClosed_ = !0, this.keepaliveTimer && (clearInterval(this.keepaliveTimer), this.keepaliveTimer = null), this.mySock && (this.mySock.close(), this.mySock = null);\n    }, i.prototype.onClosed_ = function () {\n      this.isClosed_ || (this.log_(\"WebSocket is closing itself\"), this.shutdown_(), this.onDisconnect && (this.onDisconnect(this.everConnected_), this.onDisconnect = null));\n    }, i.prototype.close = function () {\n      this.isClosed_ || (this.log_(\"WebSocket is being closed\"), this.shutdown_());\n    }, i.prototype.resetKeepAlive = function () {\n      var t = this;\n      clearInterval(this.keepaliveTimer), this.keepaliveTimer = setInterval(function () {\n        t.mySock && t.sendString_(\"0\"), t.resetKeepAlive();\n      }, Math.floor(45e3));\n    }, i.prototype.sendString_ = function (t) {\n      try {\n        this.mySock.send(t);\n      } catch (t) {\n        this.log_(\"Exception thrown from WebSocket.send():\", t.message || t.data, \"Closing connection.\"), setTimeout(this.onClosed_.bind(this), 0);\n      }\n    }, i.responsesRequiredToBeHealthy = 2, i.healthyTimeout = 3e4, i;\n  }(),\n      Ks = function () {\n    function c(t) {\n      this.initTransports_(t);\n    }\n\n    return Object.defineProperty(c, \"ALL_TRANSPORTS\", {\n      get: function get() {\n        return [qs, Ws];\n      },\n      enumerable: !0,\n      configurable: !0\n    }), c.prototype.initTransports_ = function (t) {\n      var e,\n          n,\n          r = Ws && Ws.isAvailable(),\n          i = r && !Ws.previouslyFailed();\n      if (t.webSocketOnly && (r || To(\"wss:// URL used, but browser isn't known to support websockets.  Trying anyway.\"), i = !0), i) this.transports_ = [Ws];else {\n        var o = this.transports_ = [];\n\n        try {\n          for (var a = ui(c.ALL_TRANSPORTS), s = a.next(); !s.done; s = a.next()) {\n            var u = s.value;\n            u && u.isAvailable() && o.push(u);\n          }\n        } catch (t) {\n          e = {\n            error: t\n          };\n        } finally {\n          try {\n            s && !s.done && (n = a.return) && n.call(a);\n          } finally {\n            if (e) throw e.error;\n          }\n        }\n      }\n    }, c.prototype.initialTransport = function () {\n      if (0 < this.transports_.length) return this.transports_[0];\n      throw new Error(\"No transports available\");\n    }, c.prototype.upgradeTransport = function () {\n      return 1 < this.transports_.length ? this.transports_[1] : null;\n    }, c;\n  }(),\n      Qs = function () {\n    function t(t, e, n, r, i, o, a) {\n      this.id = t, this.repoInfo_ = e, this.onMessage_ = n, this.onReady_ = r, this.onDisconnect_ = i, this.onKill_ = o, this.lastSessionId = a, this.connectionCount = 0, this.pendingDataMessages = [], this.state_ = 0, this.log_ = wo(\"c:\" + this.id + \":\"), this.transportManager_ = new Ks(e), this.log_(\"Connection created\"), this.start_();\n    }\n\n    return t.prototype.start_ = function () {\n      var t = this,\n          e = this.transportManager_.initialTransport();\n      this.conn_ = new e(this.nextTransportId_(), this.repoInfo_, void 0, this.lastSessionId), this.primaryResponsesRequired_ = e.responsesRequiredToBeHealthy || 0;\n      var n = this.connReceiver_(this.conn_),\n          r = this.disconnReceiver_(this.conn_);\n      this.tx_ = this.conn_, this.rx_ = this.conn_, this.secondaryConn_ = null, this.isHealthy_ = !1, setTimeout(function () {\n        t.conn_ && t.conn_.open(n, r);\n      }, Math.floor(0));\n      var i = e.healthyTimeout || 0;\n      0 < i && (this.healthyTimeout_ = Fo(function () {\n        t.healthyTimeout_ = null, t.isHealthy_ || (t.conn_ && 102400 < t.conn_.bytesReceived ? (t.log_(\"Connection exceeded healthy timeout but has received \" + t.conn_.bytesReceived + \" bytes.  Marking connection healthy.\"), t.isHealthy_ = !0, t.conn_.markConnectionHealthy()) : t.conn_ && 10240 < t.conn_.bytesSent ? t.log_(\"Connection exceeded healthy timeout but has sent \" + t.conn_.bytesSent + \" bytes.  Leaving connection alive.\") : (t.log_(\"Closing unhealthy connection after timeout.\"), t.close()));\n      }, Math.floor(i)));\n    }, t.prototype.nextTransportId_ = function () {\n      return \"c:\" + this.id + \":\" + this.connectionCount++;\n    }, t.prototype.disconnReceiver_ = function (e) {\n      var n = this;\n      return function (t) {\n        e === n.conn_ ? n.onConnectionLost_(t) : e === n.secondaryConn_ ? (n.log_(\"Secondary connection lost.\"), n.onSecondaryConnectionLost_()) : n.log_(\"closing an old connection\");\n      };\n    }, t.prototype.connReceiver_ = function (e) {\n      var n = this;\n      return function (t) {\n        2 != n.state_ && (e === n.rx_ ? n.onPrimaryMessageReceived_(t) : e === n.secondaryConn_ ? n.onSecondaryMessageReceived_(t) : n.log_(\"message on old connection\"));\n      };\n    }, t.prototype.sendRequest = function (t) {\n      var e = {\n        t: \"d\",\n        d: t\n      };\n      this.sendData_(e);\n    }, t.prototype.tryCleanupConnection = function () {\n      this.tx_ === this.secondaryConn_ && this.rx_ === this.secondaryConn_ && (this.log_(\"cleaning up and promoting a connection: \" + this.secondaryConn_.connId), this.conn_ = this.secondaryConn_, this.secondaryConn_ = null);\n    }, t.prototype.onSecondaryControl_ = function (t) {\n      if (\"t\" in t) {\n        var e = t.t;\n        \"a\" === e ? this.upgradeIfSecondaryHealthy_() : \"r\" === e ? (this.log_(\"Got a reset on secondary, closing it\"), this.secondaryConn_.close(), this.tx_ !== this.secondaryConn_ && this.rx_ !== this.secondaryConn_ || this.close()) : \"o\" === e && (this.log_(\"got pong on secondary.\"), this.secondaryResponsesRequired_--, this.upgradeIfSecondaryHealthy_());\n      }\n    }, t.prototype.onSecondaryMessageReceived_ = function (t) {\n      var e = ko(\"t\", t),\n          n = ko(\"d\", t);\n      if (\"c\" == e) this.onSecondaryControl_(n);else {\n        if (\"d\" != e) throw new Error(\"Unknown protocol layer: \" + e);\n        this.pendingDataMessages.push(n);\n      }\n    }, t.prototype.upgradeIfSecondaryHealthy_ = function () {\n      this.secondaryResponsesRequired_ <= 0 ? (this.log_(\"Secondary connection is healthy.\"), this.isHealthy_ = !0, this.secondaryConn_.markConnectionHealthy(), this.proceedWithUpgrade_()) : (this.log_(\"sending ping on secondary.\"), this.secondaryConn_.send({\n        t: \"c\",\n        d: {\n          t: \"p\",\n          d: {}\n        }\n      }));\n    }, t.prototype.proceedWithUpgrade_ = function () {\n      this.secondaryConn_.start(), this.log_(\"sending client ack on secondary\"), this.secondaryConn_.send({\n        t: \"c\",\n        d: {\n          t: \"a\",\n          d: {}\n        }\n      }), this.log_(\"Ending transmission on primary\"), this.conn_.send({\n        t: \"c\",\n        d: {\n          t: \"n\",\n          d: {}\n        }\n      }), this.tx_ = this.secondaryConn_, this.tryCleanupConnection();\n    }, t.prototype.onPrimaryMessageReceived_ = function (t) {\n      var e = ko(\"t\", t),\n          n = ko(\"d\", t);\n      \"c\" == e ? this.onControl_(n) : \"d\" == e && this.onDataMessage_(n);\n    }, t.prototype.onDataMessage_ = function (t) {\n      this.onPrimaryResponse_(), this.onMessage_(t);\n    }, t.prototype.onPrimaryResponse_ = function () {\n      this.isHealthy_ || (this.primaryResponsesRequired_--, this.primaryResponsesRequired_ <= 0 && (this.log_(\"Primary connection is healthy.\"), this.isHealthy_ = !0, this.conn_.markConnectionHealthy()));\n    }, t.prototype.onControl_ = function (t) {\n      var e = ko(\"t\", t);\n\n      if (\"d\" in t) {\n        var n = t.d;\n        if (\"h\" === e) this.onHandshake_(n);else if (\"n\" === e) {\n          this.log_(\"recvd end transmission on primary\"), this.rx_ = this.secondaryConn_;\n\n          for (var r = 0; r < this.pendingDataMessages.length; ++r) {\n            this.onDataMessage_(this.pendingDataMessages[r]);\n          }\n\n          this.pendingDataMessages = [], this.tryCleanupConnection();\n        } else \"s\" === e ? this.onConnectionShutdown_(n) : \"r\" === e ? this.onReset_(n) : \"e\" === e ? _o(\"Server Error: \" + n) : \"o\" === e ? (this.log_(\"got pong on primary.\"), this.onPrimaryResponse_(), this.sendPingOnPrimaryIfNecessary_()) : _o(\"Unknown control packet command: \" + e);\n      }\n    }, t.prototype.onHandshake_ = function (t) {\n      var e = t.ts,\n          n = t.v,\n          r = t.h;\n      this.sessionId = t.s, this.repoInfo_.updateHost(r), 0 == this.state_ && (this.conn_.start(), this.onConnectionEstablished_(this.conn_, e), \"5\" !== n && To(\"Protocol version mismatch detected\"), this.tryStartUpgrade_());\n    }, t.prototype.tryStartUpgrade_ = function () {\n      var t = this.transportManager_.upgradeTransport();\n      t && this.startUpgrade_(t);\n    }, t.prototype.startUpgrade_ = function (t) {\n      var e = this;\n      this.secondaryConn_ = new t(this.nextTransportId_(), this.repoInfo_, this.sessionId), this.secondaryResponsesRequired_ = t.responsesRequiredToBeHealthy || 0;\n      var n = this.connReceiver_(this.secondaryConn_),\n          r = this.disconnReceiver_(this.secondaryConn_);\n      this.secondaryConn_.open(n, r), Fo(function () {\n        e.secondaryConn_ && (e.log_(\"Timed out trying to upgrade.\"), e.secondaryConn_.close());\n      }, Math.floor(6e4));\n    }, t.prototype.onReset_ = function (t) {\n      this.log_(\"Reset packet received.  New host: \" + t), this.repoInfo_.updateHost(t), 1 === this.state_ ? this.close() : (this.closeConnections_(), this.start_());\n    }, t.prototype.onConnectionEstablished_ = function (t, e) {\n      var n = this;\n      this.log_(\"Realtime connection established.\"), this.conn_ = t, this.state_ = 1, this.onReady_ && (this.onReady_(e, this.sessionId), this.onReady_ = null), 0 === this.primaryResponsesRequired_ ? (this.log_(\"Primary connection is healthy.\"), this.isHealthy_ = !0) : Fo(function () {\n        n.sendPingOnPrimaryIfNecessary_();\n      }, Math.floor(5e3));\n    }, t.prototype.sendPingOnPrimaryIfNecessary_ = function () {\n      this.isHealthy_ || 1 !== this.state_ || (this.log_(\"sending ping on primary.\"), this.sendData_({\n        t: \"c\",\n        d: {\n          t: \"p\",\n          d: {}\n        }\n      }));\n    }, t.prototype.onSecondaryConnectionLost_ = function () {\n      var t = this.secondaryConn_;\n      this.secondaryConn_ = null, this.tx_ !== t && this.rx_ !== t || this.close();\n    }, t.prototype.onConnectionLost_ = function (t) {\n      this.conn_ = null, t || 0 !== this.state_ ? 1 === this.state_ && this.log_(\"Realtime connection lost.\") : (this.log_(\"Realtime connection failed.\"), this.repoInfo_.isCacheableHost() && (co.remove(\"host:\" + this.repoInfo_.host), this.repoInfo_.internalHost = this.repoInfo_.host)), this.close();\n    }, t.prototype.onConnectionShutdown_ = function (t) {\n      this.log_(\"Connection shutdown command received. Shutting down...\"), this.onKill_ && (this.onKill_(t), this.onKill_ = null), this.onDisconnect_ = null, this.close();\n    }, t.prototype.sendData_ = function (t) {\n      if (1 !== this.state_) throw \"Connection is not connected\";\n      this.tx_.send(t);\n    }, t.prototype.close = function () {\n      2 !== this.state_ && (this.log_(\"Closing realtime connection.\"), this.state_ = 2, this.closeConnections_(), this.onDisconnect_ && (this.onDisconnect_(), this.onDisconnect_ = null));\n    }, t.prototype.closeConnections_ = function () {\n      this.log_(\"Shutting down all connections\"), this.conn_ && (this.conn_.close(), this.conn_ = null), this.secondaryConn_ && (this.secondaryConn_.close(), this.secondaryConn_ = null), this.healthyTimeout_ && (clearTimeout(this.healthyTimeout_), this.healthyTimeout_ = null);\n    }, t;\n  }(),\n      Hs = function () {\n    function t() {}\n\n    return t.prototype.put = function (t, e, n, r) {}, t.prototype.merge = function (t, e, n, r) {}, t.prototype.refreshAuthToken = function (t) {}, t.prototype.onDisconnectPut = function (t, e, n) {}, t.prototype.onDisconnectMerge = function (t, e, n) {}, t.prototype.onDisconnectCancel = function (t, e) {}, t.prototype.reportStats = function (t) {}, t;\n  }(),\n      Gs = function (s) {\n    function h(t, e, n, r, i, o) {\n      var a = s.call(this) || this;\n      if (a.repoInfo_ = t, a.onDataUpdate_ = e, a.onConnectStatus_ = n, a.onServerInfoUpdate_ = r, a.authTokenProvider_ = i, a.authOverride_ = o, a.id = h.nextPersistentConnectionId_++, a.log_ = wo(\"p:\" + a.id + \":\"), a.interruptReasons_ = {}, a.listens = new Map(), a.outstandingPuts_ = [], a.outstandingPutCount_ = 0, a.onDisconnectRequestQueue_ = [], a.connected_ = !1, a.reconnectDelay_ = 1e3, a.maxReconnectDelay_ = 3e5, a.securityDebugCallback_ = null, a.lastSessionId = null, a.establishConnectionTimer_ = null, a.visible_ = !1, a.requestCBHash_ = {}, a.requestNumber_ = 0, a.realtime_ = null, a.authToken_ = null, a.forceTokenRefresh_ = !1, a.invalidAuthTokenCount_ = 0, a.firstConnection_ = !0, a.lastConnectionAttemptTime_ = null, a.lastConnectionEstablishedTime_ = null, o && !Ti()) throw new Error(\"Auth override specified in options, but not supported on non Node.js platforms\");\n      return a.scheduleConnect_(0), Ls.getInstance().on(\"visible\", a.onVisible_, a), -1 === t.host.indexOf(\"fblocal\") && Fs.getInstance().on(\"online\", a.onOnline_, a), a;\n    }\n\n    return ii(h, s), h.prototype.sendRequest = function (t, e, n) {\n      var r = ++this.requestNumber_,\n          i = {\n        r: r,\n        a: t,\n        b: e\n      };\n      this.log_(Ai(i)), fi(this.connected_, \"sendRequest call when we're not connected not allowed.\"), this.realtime_.sendRequest(i), n && (this.requestCBHash_[r] = n);\n    }, h.prototype.listen = function (t, e, n, r) {\n      var i = t.queryIdentifier(),\n          o = t.path.toString();\n      this.log_(\"Listen called for \" + o + \" \" + i), this.listens.has(o) || this.listens.set(o, new Map()), fi(t.getQueryParams().isDefault() || !t.getQueryParams().loadsAllData(), \"listen() called for non-default but complete query\"), fi(!this.listens.get(o).has(i), \"listen() called twice for same path/queryId.\");\n      var a = {\n        onComplete: r,\n        hashFn: e,\n        query: t,\n        tag: n\n      };\n      this.listens.get(o).set(i, a), this.connected_ && this.sendListen_(a);\n    }, h.prototype.sendListen_ = function (r) {\n      var i = this,\n          o = r.query,\n          a = o.path.toString(),\n          s = o.queryIdentifier();\n      this.log_(\"Listen on \" + a + \" for \" + s);\n      var t = {\n        p: a\n      };\n      r.tag && (t.q = o.queryObject(), t.t = r.tag), t.h = r.hashFn(), this.sendRequest(\"q\", t, function (t) {\n        var e = t.d,\n            n = t.s;\n        h.warnOnListenWarnings_(e, o), (i.listens.get(a) && i.listens.get(a).get(s)) === r && (i.log_(\"listen response\", t), \"ok\" !== n && i.removeListen_(a, s), r.onComplete && r.onComplete(n, e));\n      });\n    }, h.warnOnListenWarnings_ = function (t, e) {\n      if (t && \"object\" == typeof t && Di(t, \"w\")) {\n        var n = Ri(t, \"w\");\n\n        if (Array.isArray(n) && ~n.indexOf(\"no_index\")) {\n          var r = '\".indexOn\": \"' + e.getQueryParams().getIndex().toString() + '\"',\n              i = e.path.toString();\n          To(\"Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding \" + r + \" at \" + i + \" to your security rules for better performance.\");\n        }\n      }\n    }, h.prototype.refreshAuthToken = function (t) {\n      this.authToken_ = t, this.log_(\"Auth token refreshed\"), this.authToken_ ? this.tryAuth() : this.connected_ && this.sendRequest(\"unauth\", {}, function () {}), this.reduceReconnectDelayIfAdminCredential_(t);\n    }, h.prototype.reduceReconnectDelayIfAdminCredential_ = function (t) {\n      var e;\n      (t && 40 === t.length || \"object\" == typeof (e = ki(t).claims) && !0 === e.admin) && (this.log_(\"Admin auth credential detected.  Reducing max reconnect time.\"), this.maxReconnectDelay_ = 3e4);\n    }, h.prototype.tryAuth = function () {\n      var t,\n          r = this;\n\n      if (this.connected_ && this.authToken_) {\n        var i = this.authToken_,\n            e = (t = ki(i).claims) && \"object\" == typeof t && t.hasOwnProperty(\"iat\") ? \"auth\" : \"gauth\",\n            n = {\n          cred: i\n        };\n        null === this.authOverride_ ? n.noauth = !0 : \"object\" == typeof this.authOverride_ && (n.authvar = this.authOverride_), this.sendRequest(e, n, function (t) {\n          var e = t.s,\n              n = t.d || \"error\";\n          r.authToken_ === i && (\"ok\" === e ? r.invalidAuthTokenCount_ = 0 : r.onAuthRevoked_(e, n));\n        });\n      }\n    }, h.prototype.unlisten = function (t, e) {\n      var n = t.path.toString(),\n          r = t.queryIdentifier();\n      this.log_(\"Unlisten called for \" + n + \" \" + r), fi(t.getQueryParams().isDefault() || !t.getQueryParams().loadsAllData(), \"unlisten() called for non-default but complete query\"), this.removeListen_(n, r) && this.connected_ && this.sendUnlisten_(n, r, t.queryObject(), e);\n    }, h.prototype.sendUnlisten_ = function (t, e, n, r) {\n      this.log_(\"Unlisten on \" + t + \" for \" + e);\n      var i = {\n        p: t\n      };\n      r && (i.q = n, i.t = r), this.sendRequest(\"n\", i);\n    }, h.prototype.onDisconnectPut = function (t, e, n) {\n      this.connected_ ? this.sendOnDisconnect_(\"o\", t, e, n) : this.onDisconnectRequestQueue_.push({\n        pathString: t,\n        action: \"o\",\n        data: e,\n        onComplete: n\n      });\n    }, h.prototype.onDisconnectMerge = function (t, e, n) {\n      this.connected_ ? this.sendOnDisconnect_(\"om\", t, e, n) : this.onDisconnectRequestQueue_.push({\n        pathString: t,\n        action: \"om\",\n        data: e,\n        onComplete: n\n      });\n    }, h.prototype.onDisconnectCancel = function (t, e) {\n      this.connected_ ? this.sendOnDisconnect_(\"oc\", t, null, e) : this.onDisconnectRequestQueue_.push({\n        pathString: t,\n        action: \"oc\",\n        data: null,\n        onComplete: e\n      });\n    }, h.prototype.sendOnDisconnect_ = function (t, e, n, r) {\n      var i = {\n        p: e,\n        d: n\n      };\n      this.log_(\"onDisconnect \" + t, i), this.sendRequest(t, i, function (t) {\n        r && setTimeout(function () {\n          r(t.s, t.d);\n        }, Math.floor(0));\n      });\n    }, h.prototype.put = function (t, e, n, r) {\n      this.putInternal(\"p\", t, e, n, r);\n    }, h.prototype.merge = function (t, e, n, r) {\n      this.putInternal(\"m\", t, e, n, r);\n    }, h.prototype.putInternal = function (t, e, n, r, i) {\n      var o = {\n        p: e,\n        d: n\n      };\n      void 0 !== i && (o.h = i), this.outstandingPuts_.push({\n        action: t,\n        request: o,\n        onComplete: r\n      }), this.outstandingPutCount_++;\n      var a = this.outstandingPuts_.length - 1;\n      this.connected_ ? this.sendPut_(a) : this.log_(\"Buffering put: \" + e);\n    }, h.prototype.sendPut_ = function (e) {\n      var n = this,\n          r = this.outstandingPuts_[e].action,\n          t = this.outstandingPuts_[e].request,\n          i = this.outstandingPuts_[e].onComplete;\n      this.outstandingPuts_[e].queued = this.connected_, this.sendRequest(r, t, function (t) {\n        n.log_(r + \" response\", t), delete n.outstandingPuts_[e], n.outstandingPutCount_--, 0 === n.outstandingPutCount_ && (n.outstandingPuts_ = []), i && i(t.s, t.d);\n      });\n    }, h.prototype.reportStats = function (t) {\n      var n = this;\n\n      if (this.connected_) {\n        var e = {\n          c: t\n        };\n        this.log_(\"reportStats\", e), this.sendRequest(\"s\", e, function (t) {\n          if (\"ok\" !== t.s) {\n            var e = t.d;\n            n.log_(\"reportStats\", \"Error sending stats: \" + e);\n          }\n        });\n      }\n    }, h.prototype.onDataMessage_ = function (t) {\n      if (\"r\" in t) {\n        this.log_(\"from server: \" + Ai(t));\n        var e = t.r,\n            n = this.requestCBHash_[e];\n        n && (delete this.requestCBHash_[e], n(t.b));\n      } else {\n        if (\"error\" in t) throw \"A server-side error has occurred: \" + t.error;\n        \"a\" in t && this.onDataPush_(t.a, t.b);\n      }\n    }, h.prototype.onDataPush_ = function (t, e) {\n      this.log_(\"handleServerMessage\", t, e), \"d\" === t ? this.onDataUpdate_(e.p, e.d, !1, e.t) : \"m\" === t ? this.onDataUpdate_(e.p, e.d, !0, e.t) : \"c\" === t ? this.onListenRevoked_(e.p, e.q) : \"ac\" === t ? this.onAuthRevoked_(e.s, e.d) : \"sd\" === t ? this.onSecurityDebugPacket_(e) : _o(\"Unrecognized action received from server: \" + Ai(t) + \"\\nAre you using the latest client?\");\n    }, h.prototype.onReady_ = function (t, e) {\n      this.log_(\"connection ready\"), this.connected_ = !0, this.lastConnectionEstablishedTime_ = new Date().getTime(), this.handleTimestamp_(t), this.lastSessionId = e, this.firstConnection_ && this.sendConnectStats_(), this.restoreState_(), this.firstConnection_ = !1, this.onConnectStatus_(!0);\n    }, h.prototype.scheduleConnect_ = function (t) {\n      var e = this;\n      fi(!this.realtime_, \"Scheduling a connect when we're already connected/ing?\"), this.establishConnectionTimer_ && clearTimeout(this.establishConnectionTimer_), this.establishConnectionTimer_ = setTimeout(function () {\n        e.establishConnectionTimer_ = null, e.establishConnection_();\n      }, Math.floor(t));\n    }, h.prototype.onVisible_ = function (t) {\n      t && !this.visible_ && this.reconnectDelay_ === this.maxReconnectDelay_ && (this.log_(\"Window became visible.  Reducing delay.\"), this.reconnectDelay_ = 1e3, this.realtime_ || this.scheduleConnect_(0)), this.visible_ = t;\n    }, h.prototype.onOnline_ = function (t) {\n      t ? (this.log_(\"Browser went online.\"), this.reconnectDelay_ = 1e3, this.realtime_ || this.scheduleConnect_(0)) : (this.log_(\"Browser went offline.  Killing connection.\"), this.realtime_ && this.realtime_.close());\n    }, h.prototype.onRealtimeDisconnect_ = function () {\n      if (this.log_(\"data client disconnected\"), this.connected_ = !1, this.realtime_ = null, this.cancelSentTransactions_(), this.requestCBHash_ = {}, this.shouldReconnect_()) {\n        if (this.visible_) {\n          if (this.lastConnectionEstablishedTime_) {\n            3e4 < new Date().getTime() - this.lastConnectionEstablishedTime_ && (this.reconnectDelay_ = 1e3), this.lastConnectionEstablishedTime_ = null;\n          }\n        } else this.log_(\"Window isn't visible.  Delaying reconnect.\"), this.reconnectDelay_ = this.maxReconnectDelay_, this.lastConnectionAttemptTime_ = new Date().getTime();\n\n        var t = new Date().getTime() - this.lastConnectionAttemptTime_,\n            e = Math.max(0, this.reconnectDelay_ - t);\n        e = Math.random() * e, this.log_(\"Trying to reconnect in \" + e + \"ms\"), this.scheduleConnect_(e), this.reconnectDelay_ = Math.min(this.maxReconnectDelay_, 1.3 * this.reconnectDelay_);\n      }\n\n      this.onConnectStatus_(!1);\n    }, h.prototype.establishConnection_ = function () {\n      if (this.shouldReconnect_()) {\n        this.log_(\"Making a connection attempt\"), this.lastConnectionAttemptTime_ = new Date().getTime(), this.lastConnectionEstablishedTime_ = null;\n\n        var e = this.onDataMessage_.bind(this),\n            n = this.onReady_.bind(this),\n            r = this.onRealtimeDisconnect_.bind(this),\n            i = this.id + \":\" + h.nextConnectionId_++,\n            o = this,\n            a = this.lastSessionId,\n            s = !1,\n            u = null,\n            c = function c() {\n          u ? u.close() : (s = !0, r());\n        };\n\n        this.realtime_ = {\n          close: c,\n          sendRequest: function sendRequest(t) {\n            fi(u, \"sendRequest call when we're not connected not allowed.\"), u.sendRequest(t);\n          }\n        };\n        var t = this.forceTokenRefresh_;\n        this.forceTokenRefresh_ = !1, this.authTokenProvider_.getToken(t).then(function (t) {\n          s ? bo(\"getToken() completed but was canceled\") : (bo(\"getToken() completed. Creating connection.\"), o.authToken_ = t && t.accessToken, u = new Qs(i, o.repoInfo_, e, n, r, function (t) {\n            To(t + \" (\" + o.repoInfo_.toString() + \")\"), o.interrupt(\"server_kill\");\n          }, a));\n        }).then(null, function (t) {\n          o.log_(\"Failed to get token: \" + t), s || c();\n        });\n      }\n    }, h.prototype.interrupt = function (t) {\n      bo(\"Interrupting connection for reason: \" + t), this.interruptReasons_[t] = !0, this.realtime_ ? this.realtime_.close() : (this.establishConnectionTimer_ && (clearTimeout(this.establishConnectionTimer_), this.establishConnectionTimer_ = null), this.connected_ && this.onRealtimeDisconnect_());\n    }, h.prototype.resume = function (t) {\n      bo(\"Resuming connection for reason: \" + t), delete this.interruptReasons_[t], Oi(this.interruptReasons_) && (this.reconnectDelay_ = 1e3, this.realtime_ || this.scheduleConnect_(0));\n    }, h.prototype.handleTimestamp_ = function (t) {\n      var e = t - new Date().getTime();\n      this.onServerInfoUpdate_({\n        serverTimeOffset: e\n      });\n    }, h.prototype.cancelSentTransactions_ = function () {\n      for (var t = 0; t < this.outstandingPuts_.length; t++) {\n        var e = this.outstandingPuts_[t];\n        e && \"h\" in e.request && e.queued && (e.onComplete && e.onComplete(\"disconnect\"), delete this.outstandingPuts_[t], this.outstandingPutCount_--);\n      }\n\n      0 === this.outstandingPutCount_ && (this.outstandingPuts_ = []);\n    }, h.prototype.onListenRevoked_ = function (t, e) {\n      var n;\n      n = e ? e.map(function (t) {\n        return Do(t);\n      }).join(\"$\") : \"default\";\n      var r = this.removeListen_(t, n);\n      r && r.onComplete && r.onComplete(\"permission_denied\");\n    }, h.prototype.removeListen_ = function (t, e) {\n      var n,\n          r = new Uo(t).toString();\n\n      if (this.listens.has(r)) {\n        var i = this.listens.get(r);\n        n = i.get(e), i.delete(e), 0 === i.size && this.listens.delete(r);\n      } else n = void 0;\n\n      return n;\n    }, h.prototype.onAuthRevoked_ = function (t, e) {\n      bo(\"Auth token revoked: \" + t + \"/\" + e), this.authToken_ = null, this.forceTokenRefresh_ = !0, this.realtime_.close(), \"invalid_token\" !== t && \"permission_denied\" !== t || (this.invalidAuthTokenCount_++, 3 <= this.invalidAuthTokenCount_ && (this.reconnectDelay_ = 3e4, this.authTokenProvider_.notifyForInvalidToken()));\n    }, h.prototype.onSecurityDebugPacket_ = function (t) {\n      this.securityDebugCallback_ ? this.securityDebugCallback_(t) : \"msg\" in t && console.log(\"FIREBASE: \" + t.msg.replace(\"\\n\", \"\\nFIREBASE: \"));\n    }, h.prototype.restoreState_ = function () {\n      var e, t, n, r;\n      this.tryAuth();\n\n      try {\n        for (var i = ui(this.listens.values()), o = i.next(); !o.done; o = i.next()) {\n          var a = o.value;\n\n          try {\n            for (var s = (n = void 0, ui(a.values())), u = s.next(); !u.done; u = s.next()) {\n              var c = u.value;\n              this.sendListen_(c);\n            }\n          } catch (t) {\n            n = {\n              error: t\n            };\n          } finally {\n            try {\n              u && !u.done && (r = s.return) && r.call(s);\n            } finally {\n              if (n) throw n.error;\n            }\n          }\n        }\n      } catch (t) {\n        e = {\n          error: t\n        };\n      } finally {\n        try {\n          o && !o.done && (t = i.return) && t.call(i);\n        } finally {\n          if (e) throw e.error;\n        }\n      }\n\n      for (var h = 0; h < this.outstandingPuts_.length; h++) {\n        this.outstandingPuts_[h] && this.sendPut_(h);\n      }\n\n      for (; this.onDisconnectRequestQueue_.length;) {\n        var l = this.onDisconnectRequestQueue_.shift();\n        this.sendOnDisconnect_(l.action, l.pathString, l.data, l.onComplete);\n      }\n    }, h.prototype.sendConnectStats_ = function () {\n      var t = {};\n      t[\"sdk.js.\" + Bs.replace(/\\./g, \"-\")] = 1, _i() ? t[\"framework.cordova\"] = 1 : Ei() && (t[\"framework.reactnative\"] = 1), this.reportStats(t);\n    }, h.prototype.shouldReconnect_ = function () {\n      var t = Fs.getInstance().currentlyOnline();\n      return Oi(this.interruptReasons_) && t;\n    }, h.nextPersistentConnectionId_ = 0, h.nextConnectionId_ = 0, h;\n  }(Hs),\n      zs = function (i) {\n    function c(t, e, n) {\n      var r = i.call(this) || this;\n      return r.repoInfo_ = t, r.onDataUpdate_ = e, r.authTokenProvider_ = n, r.log_ = wo(\"p:rest:\"), r.listens_ = {}, r;\n    }\n\n    return ii(c, i), c.prototype.reportStats = function (t) {\n      throw new Error(\"Method not implemented.\");\n    }, c.getListenId_ = function (t, e) {\n      return void 0 !== e ? \"tag$\" + e : (fi(t.getQueryParams().isDefault(), \"should have a tag if it's not a default query.\"), t.path.toString());\n    }, c.prototype.listen = function (t, e, r, i) {\n      var o = this,\n          a = t.path.toString();\n      this.log_(\"Listen called for \" + a + \" \" + t.queryIdentifier());\n      var s = c.getListenId_(t, r),\n          u = {};\n      this.listens_[s] = u;\n      var n = t.getQueryParams().toRestQueryStringParameters();\n      this.restRequest_(a + \".json\", n, function (t, e) {\n        var n = e;\n        (404 === t && (t = n = null), null === t && o.onDataUpdate_(a, n, !1, r), Ri(o.listens_, s) === u) && i(t ? 401 == t ? \"permission_denied\" : \"rest_error:\" + t : \"ok\", null);\n      });\n    }, c.prototype.unlisten = function (t, e) {\n      var n = c.getListenId_(t, e);\n      delete this.listens_[n];\n    }, c.prototype.refreshAuthToken = function (t) {}, c.prototype.restRequest_ = function (i, o, a) {\n      var s = this;\n      void 0 === o && (o = {}), o.format = \"export\", this.authTokenProvider_.getToken(!1).then(function (t) {\n        var e = t && t.accessToken;\n        e && (o.auth = e);\n\n        var n = (s.repoInfo_.secure ? \"https://\" : \"http://\") + s.repoInfo_.host + i + \"?ns=\" + s.repoInfo_.namespace + function (t) {\n          for (var n = [], e = function e(_e3, t) {\n            Array.isArray(t) ? t.forEach(function (t) {\n              n.push(encodeURIComponent(_e3) + \"=\" + encodeURIComponent(t));\n            }) : n.push(encodeURIComponent(_e3) + \"=\" + encodeURIComponent(t));\n          }, r = 0, i = Object.entries(t); r < i.length; r++) {\n            var o = i[r];\n            e(o[0], o[1]);\n          }\n\n          return n.length ? \"&\" + n.join(\"&\") : \"\";\n        }(o);\n\n        s.log_(\"Sending REST request for \" + n);\n        var r = new XMLHttpRequest();\n        r.onreadystatechange = function () {\n          if (a && 4 === r.readyState) {\n            s.log_(\"REST Response for \" + n + \" received. status:\", r.status, \"response:\", r.responseText);\n            var t = null;\n\n            if (200 <= r.status && r.status < 300) {\n              try {\n                t = Ni(r.responseText);\n              } catch (t) {\n                To(\"Failed to parse JSON response for \" + n + \": \" + r.responseText);\n              }\n\n              a(null, t);\n            } else 401 !== r.status && 404 !== r.status && To(\"Got unsuccessful REST response for \" + n + \" Status: \" + r.status), a(r.status);\n\n            a = null;\n          }\n        }, r.open(\"GET\", n, !0), r.send();\n      });\n    }, c;\n  }(Hs),\n      Ys = \"repo_interrupt\",\n      Xs = function () {\n    function t(t, e, n) {\n      var a = this;\n      this.repoInfo_ = t, this.app = n, this.dataUpdateCount = 0, this.statsListener_ = null, this.eventQueue_ = new Ps(), this.nextWriteId_ = 1, this.interceptServerDataCallback_ = null, this.onDisconnect_ = new ts(), this.persistentConnection_ = null;\n      var r = new As(n);\n      if (this.stats_ = Ds.getCollection(t), e || 0 <= (\"object\" == typeof window && window.navigator && window.navigator.userAgent || \"\").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)) this.server_ = new zs(this.repoInfo_, this.onDataUpdate_.bind(this), r), setTimeout(this.onConnectStatus_.bind(this, !0), 0);else {\n        var i = n.options.databaseAuthVariableOverride;\n\n        if (null != i) {\n          if (\"object\" != typeof i) throw new Error(\"Only objects are supported for option databaseAuthVariableOverride\");\n\n          try {\n            Ai(i);\n          } catch (t) {\n            throw new Error(\"Invalid authOverride provided: \" + t);\n          }\n        }\n\n        this.persistentConnection_ = new Gs(this.repoInfo_, this.onDataUpdate_.bind(this), this.onConnectStatus_.bind(this), this.onServerInfoUpdate_.bind(this), r, i), this.server_ = this.persistentConnection_;\n      }\n      r.addTokenChangeListener(function (t) {\n        a.server_.refreshAuthToken(t);\n      }), this.statsReporter_ = Ds.getOrCreateReporter(t, function () {\n        return new Os(a.stats_, a.server_);\n      }), this.transactions_init_(), this.infoData_ = new Ns(), this.infoSyncTree_ = new Cs({\n        startListening: function startListening(t, e, n, r) {\n          var i = [],\n              o = a.infoData_.getNode(t.path);\n          return o.isEmpty() || (i = a.infoSyncTree_.applyServerOverwrite(t.path, o), setTimeout(function () {\n            r(\"ok\");\n          }, 0)), i;\n        },\n        stopListening: function stopListening() {}\n      }), this.updateInfo_(\"connected\", !1), this.serverSyncTree_ = new Cs({\n        startListening: function startListening(r, t, e, i) {\n          return a.server_.listen(r, e, t, function (t, e) {\n            var n = i(t, e);\n            a.eventQueue_.raiseEventsForChangedPath(r.path, n);\n          }), [];\n        },\n        stopListening: function stopListening(t, e) {\n          a.server_.unlisten(t, e);\n        }\n      });\n    }\n\n    return t.prototype.toString = function () {\n      return (this.repoInfo_.secure ? \"https://\" : \"http://\") + this.repoInfo_.host;\n    }, t.prototype.name = function () {\n      return this.repoInfo_.namespace;\n    }, t.prototype.serverTime = function () {\n      var t = this.infoData_.getNode(new Uo(\".info/serverTimeOffset\")).val() || 0;\n      return new Date().getTime() + t;\n    }, t.prototype.generateServerValues = function () {\n      return (t = (t = {\n        timestamp: this.serverTime()\n      }) || {}).timestamp = t.timestamp || new Date().getTime(), t;\n      var t;\n    }, t.prototype.onDataUpdate_ = function (t, e, n, r) {\n      this.dataUpdateCount++;\n      var i = new Uo(t);\n      e = this.interceptServerDataCallback_ ? this.interceptServerDataCallback_(t, e) : e;\n      var o = [];\n      if (r) {\n        if (n) {\n          var a = Pi(e, function (t) {\n            return ja(t);\n          });\n          o = this.serverSyncTree_.applyTaggedQueryMerge(i, a, r);\n        } else {\n          var s = ja(e);\n          o = this.serverSyncTree_.applyTaggedQueryOverwrite(i, s, r);\n        }\n      } else if (n) {\n        var u = Pi(e, function (t) {\n          return ja(t);\n        });\n        o = this.serverSyncTree_.applyServerMerge(i, u);\n      } else {\n        var c = ja(e);\n        o = this.serverSyncTree_.applyServerOverwrite(i, c);\n      }\n      var h = i;\n      0 < o.length && (h = this.rerunTransactions_(i)), this.eventQueue_.raiseEventsForChangedPath(h, o);\n    }, t.prototype.interceptServerData_ = function (t) {\n      this.interceptServerDataCallback_ = t;\n    }, t.prototype.onConnectStatus_ = function (t) {\n      this.updateInfo_(\"connected\", t), !1 === t && this.runOnDisconnectEvents_();\n    }, t.prototype.onServerInfoUpdate_ = function (t) {\n      var n = this;\n      Oo(t, function (t, e) {\n        n.updateInfo_(e, t);\n      });\n    }, t.prototype.updateInfo_ = function (t, e) {\n      var n = new Uo(\"/.info/\" + t),\n          r = ja(e);\n      this.infoData_.updateSnapshot(n, r);\n      var i = this.infoSyncTree_.applyServerOverwrite(n, r);\n      this.eventQueue_.raiseEventsForChangedPath(n, i);\n    }, t.prototype.getNextWriteId_ = function () {\n      return this.nextWriteId_++;\n    }, t.prototype.setWithPriority = function (i, t, e, o) {\n      var a = this;\n      this.log_(\"set\", {\n        path: i.toString(),\n        value: t,\n        priority: e\n      });\n      var n = this.generateServerValues(),\n          r = ja(t, e),\n          s = ns(r, n),\n          u = this.getNextWriteId_(),\n          c = this.serverSyncTree_.applyUserOverwrite(i, s, u, !0);\n      this.eventQueue_.queueEvents(c), this.server_.put(i.toString(), r.val(!0), function (t, e) {\n        var n = \"ok\" === t;\n        n || To(\"set at \" + i + \" failed: \" + t);\n        var r = a.serverSyncTree_.ackUserWrite(u, !n);\n        a.eventQueue_.raiseEventsForChangedPath(i, r), a.callOnCompleteCallback(o, t, e);\n      });\n      var h = this.abortTransactions_(i);\n      this.rerunTransactions_(h), this.eventQueue_.raiseEventsForChangedPath(h, []);\n    }, t.prototype.update = function (o, t, a) {\n      var s = this;\n      this.log_(\"update\", {\n        path: o.toString(),\n        value: t\n      });\n      var r = !0,\n          i = this.generateServerValues(),\n          u = {};\n      if (Oo(t, function (t, e) {\n        r = !1;\n        var n = ja(e);\n        u[t] = ns(n, i);\n      }), r) bo(\"update() called with empty data.  Don't do anything.\"), this.callOnCompleteCallback(a, \"ok\");else {\n        var c = this.getNextWriteId_(),\n            e = this.serverSyncTree_.applyUserMerge(o, u, c);\n        this.eventQueue_.queueEvents(e), this.server_.merge(o.toString(), t, function (t, e) {\n          var n = \"ok\" === t;\n          n || To(\"update at \" + o + \" failed: \" + t);\n          var r = s.serverSyncTree_.ackUserWrite(c, !n),\n              i = 0 < r.length ? s.rerunTransactions_(o) : o;\n          s.eventQueue_.raiseEventsForChangedPath(i, r), s.callOnCompleteCallback(a, t, e);\n        }), Oo(t, function (t) {\n          var e = s.abortTransactions_(o.child(t));\n          s.rerunTransactions_(e);\n        }), this.eventQueue_.raiseEventsForChangedPath(o, []);\n      }\n    }, t.prototype.runOnDisconnectEvents_ = function () {\n      var r = this;\n      this.log_(\"onDisconnectEvents\");\n      var t,\n          n,\n          i,\n          e = this.generateServerValues(),\n          o = (t = this.onDisconnect_, n = e, i = new ts(), t.forEachTree(new Uo(\"\"), function (t, e) {\n        i.remember(t, ns(e, n));\n      }), i),\n          a = [];\n      o.forEachTree(Uo.Empty, function (t, e) {\n        a = a.concat(r.serverSyncTree_.applyServerOverwrite(t, e));\n        var n = r.abortTransactions_(t);\n        r.rerunTransactions_(n);\n      }), this.onDisconnect_ = new ts(), this.eventQueue_.raiseEventsForChangedPath(Uo.Empty, a);\n    }, t.prototype.onDisconnectCancel = function (n, r) {\n      var i = this;\n      this.server_.onDisconnectCancel(n.toString(), function (t, e) {\n        \"ok\" === t && i.onDisconnect_.forget(n), i.callOnCompleteCallback(r, t, e);\n      });\n    }, t.prototype.onDisconnectSet = function (n, t, r) {\n      var i = this,\n          o = ja(t);\n      this.server_.onDisconnectPut(n.toString(), o.val(!0), function (t, e) {\n        \"ok\" === t && i.onDisconnect_.remember(n, o), i.callOnCompleteCallback(r, t, e);\n      });\n    }, t.prototype.onDisconnectSetWithPriority = function (n, t, e, r) {\n      var i = this,\n          o = ja(t, e);\n      this.server_.onDisconnectPut(n.toString(), o.val(!0), function (t, e) {\n        \"ok\" === t && i.onDisconnect_.remember(n, o), i.callOnCompleteCallback(r, t, e);\n      });\n    }, t.prototype.onDisconnectUpdate = function (r, n, i) {\n      var o = this;\n      if (Oi(n)) return bo(\"onDisconnect().update() called with empty data.  Don't do anything.\"), void this.callOnCompleteCallback(i, \"ok\");\n      this.server_.onDisconnectMerge(r.toString(), n, function (t, e) {\n        \"ok\" === t && Oo(n, function (t, e) {\n          var n = ja(e);\n          o.onDisconnect_.remember(r.child(t), n);\n        }), o.callOnCompleteCallback(i, t, e);\n      });\n    }, t.prototype.addEventCallbackForQuery = function (t, e) {\n      var n;\n      n = \".info\" === t.path.getFront() ? this.infoSyncTree_.addEventRegistration(t, e) : this.serverSyncTree_.addEventRegistration(t, e), this.eventQueue_.raiseEventsAtPath(t.path, n);\n    }, t.prototype.removeEventCallbackForQuery = function (t, e) {\n      var n;\n      n = \".info\" === t.path.getFront() ? this.infoSyncTree_.removeEventRegistration(t, e) : this.serverSyncTree_.removeEventRegistration(t, e), this.eventQueue_.raiseEventsAtPath(t.path, n);\n    }, t.prototype.interrupt = function () {\n      this.persistentConnection_ && this.persistentConnection_.interrupt(Ys);\n    }, t.prototype.resume = function () {\n      this.persistentConnection_ && this.persistentConnection_.resume(Ys);\n    }, t.prototype.stats = function (t) {\n      if (void 0 === t && (t = !1), \"undefined\" != typeof console) {\n        var e;\n        e = t ? (this.statsListener_ || (this.statsListener_ = new Rs(this.stats_)), this.statsListener_.get()) : this.stats_.get();\n        var i = Object.keys(e).reduce(function (t, e) {\n          return Math.max(e.length, t);\n        }, 0);\n        Oo(e, function (t, e) {\n          for (var n = t, r = t.length; r < i + 2; r++) {\n            n += \" \";\n          }\n\n          console.log(n + e);\n        });\n      }\n    }, t.prototype.statsIncrementCounter = function (t) {\n      this.stats_.incrementCounter(t), this.statsReporter_.includeStat(t);\n    }, t.prototype.log_ = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) {\n        t[e] = arguments[e];\n      }\n\n      var n = \"\";\n      this.persistentConnection_ && (n = this.persistentConnection_.id + \":\"), bo.apply(void 0, hi([n], t));\n    }, t.prototype.callOnCompleteCallback = function (r, i, o) {\n      r && Lo(function () {\n        if (\"ok\" == i) r(null);else {\n          var t = (i || \"error\").toUpperCase(),\n              e = t;\n          o && (e += \": \" + o);\n          var n = new Error(e);\n          n.code = t, r(n);\n        }\n      });\n    }, Object.defineProperty(t.prototype, \"database\", {\n      get: function get() {\n        return this.__database || (this.__database = new uu(this));\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t;\n  }(),\n      Js = function () {\n    function e(t) {\n      this.indexedFilter_ = new ds(t.getIndex()), this.index_ = t.getIndex(), this.startPost_ = e.getStartPost_(t), this.endPost_ = e.getEndPost_(t);\n    }\n\n    return e.prototype.getStartPost = function () {\n      return this.startPost_;\n    }, e.prototype.getEndPost = function () {\n      return this.endPost_;\n    }, e.prototype.matches = function (t) {\n      return this.index_.compare(this.getStartPost(), t) <= 0 && this.index_.compare(t, this.getEndPost()) <= 0;\n    }, e.prototype.updateChild = function (t, e, n, r, i, o) {\n      return this.matches(new ya(e, n)) || (n = qa.EMPTY_NODE), this.indexedFilter_.updateChild(t, e, n, r, i, o);\n    }, e.prototype.updateFullNode = function (t, e, n) {\n      e.isLeafNode() && (e = qa.EMPTY_NODE);\n      var r = e.withIndex(this.index_);\n      r = r.updatePriority(qa.EMPTY_NODE);\n      var i = this;\n      return e.forEachChild(Na, function (t, e) {\n        i.matches(new ya(t, e)) || (r = r.updateImmediateChild(t, qa.EMPTY_NODE));\n      }), this.indexedFilter_.updateFullNode(t, r, n);\n    }, e.prototype.updatePriority = function (t, e) {\n      return t;\n    }, e.prototype.filtersNodes = function () {\n      return !0;\n    }, e.prototype.getIndexedFilter = function () {\n      return this.indexedFilter_;\n    }, e.prototype.getIndex = function () {\n      return this.index_;\n    }, e.getStartPost_ = function (t) {\n      if (t.hasStart()) {\n        var e = t.getIndexStartName();\n        return t.getIndex().makePost(t.getIndexStartValue(), e);\n      }\n\n      return t.getIndex().minPost();\n    }, e.getEndPost_ = function (t) {\n      if (t.hasEnd()) {\n        var e = t.getIndexEndName();\n        return t.getIndex().makePost(t.getIndexEndValue(), e);\n      }\n\n      return t.getIndex().maxPost();\n    }, e;\n  }(),\n      $s = function () {\n    function t(t) {\n      this.rangedFilter_ = new Js(t), this.index_ = t.getIndex(), this.limit_ = t.getLimit(), this.reverse_ = !t.isViewFromLeft();\n    }\n\n    return t.prototype.updateChild = function (t, e, n, r, i, o) {\n      return this.rangedFilter_.matches(new ya(e, n)) || (n = qa.EMPTY_NODE), t.getImmediateChild(e).equals(n) ? t : t.numChildren() < this.limit_ ? this.rangedFilter_.getIndexedFilter().updateChild(t, e, n, r, i, o) : this.fullLimitUpdateChild_(t, e, n, i, o);\n    }, t.prototype.updateFullNode = function (t, e, n) {\n      var r;\n      if (e.isLeafNode() || e.isEmpty()) r = qa.EMPTY_NODE.withIndex(this.index_);else if (2 * this.limit_ < e.numChildren() && e.isIndexed(this.index_)) {\n        r = qa.EMPTY_NODE.withIndex(this.index_);\n        var i = void 0;\n        i = this.reverse_ ? e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(), this.index_) : e.getIteratorFrom(this.rangedFilter_.getStartPost(), this.index_);\n\n        for (var o = 0; i.hasNext() && o < this.limit_;) {\n          var a = i.getNext();\n          if (!(this.reverse_ ? this.index_.compare(this.rangedFilter_.getStartPost(), a) <= 0 : this.index_.compare(a, this.rangedFilter_.getEndPost()) <= 0)) break;\n          r = r.updateImmediateChild(a.name, a.node), o++;\n        }\n      } else {\n        r = (r = e.withIndex(this.index_)).updatePriority(qa.EMPTY_NODE);\n        var s = void 0,\n            u = void 0,\n            c = void 0;\n        i = void 0;\n\n        if (this.reverse_) {\n          i = r.getReverseIterator(this.index_), s = this.rangedFilter_.getEndPost(), u = this.rangedFilter_.getStartPost();\n          var h = this.index_.getCompare();\n\n          c = function c(t, e) {\n            return h(e, t);\n          };\n        } else i = r.getIterator(this.index_), s = this.rangedFilter_.getStartPost(), u = this.rangedFilter_.getEndPost(), c = this.index_.getCompare();\n\n        o = 0;\n\n        for (var l = !1; i.hasNext();) {\n          a = i.getNext();\n          !l && c(s, a) <= 0 && (l = !0), l && o < this.limit_ && c(a, u) <= 0 ? o++ : r = r.updateImmediateChild(a.name, qa.EMPTY_NODE);\n        }\n      }\n      return this.rangedFilter_.getIndexedFilter().updateFullNode(t, r, n);\n    }, t.prototype.updatePriority = function (t, e) {\n      return t;\n    }, t.prototype.filtersNodes = function () {\n      return !0;\n    }, t.prototype.getIndexedFilter = function () {\n      return this.rangedFilter_.getIndexedFilter();\n    }, t.prototype.getIndex = function () {\n      return this.index_;\n    }, t.prototype.fullLimitUpdateChild_ = function (t, e, n, r, i) {\n      var o;\n\n      if (this.reverse_) {\n        var a = this.index_.getCompare();\n\n        o = function o(t, e) {\n          return a(e, t);\n        };\n      } else o = this.index_.getCompare();\n\n      var s = t;\n      fi(s.numChildren() == this.limit_, \"\");\n      var u = new ya(e, n),\n          c = this.reverse_ ? s.getFirstChild(this.index_) : s.getLastChild(this.index_),\n          h = this.rangedFilter_.matches(u);\n\n      if (s.hasChild(e)) {\n        for (var l = s.getImmediateChild(e), f = r.getChildAfterChild(this.index_, c, this.reverse_); null != f && (f.name == e || s.hasChild(f.name));) {\n          f = r.getChildAfterChild(this.index_, f, this.reverse_);\n        }\n\n        var p = null == f ? 1 : o(f, u);\n        if (h && !n.isEmpty() && 0 <= p) return null != i && i.trackChildChange(ps.childChangedChange(e, n, l)), s.updateImmediateChild(e, n);\n        null != i && i.trackChildChange(ps.childRemovedChange(e, l));\n        var d = s.updateImmediateChild(e, qa.EMPTY_NODE);\n        return null != f && this.rangedFilter_.matches(f) ? (null != i && i.trackChildChange(ps.childAddedChange(f.name, f.node)), d.updateImmediateChild(f.name, f.node)) : d;\n      }\n\n      return n.isEmpty() ? t : h && 0 <= o(c, u) ? (null != i && (i.trackChildChange(ps.childRemovedChange(c.name, c.node)), i.trackChildChange(ps.childAddedChange(e, n))), s.updateImmediateChild(e, n).updateImmediateChild(c.name, qa.EMPTY_NODE)) : t;\n    }, t;\n  }(),\n      Zs = function () {\n    function r() {\n      this.limitSet_ = !1, this.startSet_ = !1, this.startNameSet_ = !1, this.endSet_ = !1, this.endNameSet_ = !1, this.limit_ = 0, this.viewFrom_ = \"\", this.indexStartValue_ = null, this.indexStartName_ = \"\", this.indexEndValue_ = null, this.indexEndName_ = \"\", this.index_ = Na;\n    }\n\n    return r.prototype.hasStart = function () {\n      return this.startSet_;\n    }, r.prototype.isViewFromLeft = function () {\n      return \"\" === this.viewFrom_ ? this.startSet_ : this.viewFrom_ === r.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT;\n    }, r.prototype.getIndexStartValue = function () {\n      return fi(this.startSet_, \"Only valid if start has been set\"), this.indexStartValue_;\n    }, r.prototype.getIndexStartName = function () {\n      return fi(this.startSet_, \"Only valid if start has been set\"), this.startNameSet_ ? this.indexStartName_ : Io;\n    }, r.prototype.hasEnd = function () {\n      return this.endSet_;\n    }, r.prototype.getIndexEndValue = function () {\n      return fi(this.endSet_, \"Only valid if end has been set\"), this.indexEndValue_;\n    }, r.prototype.getIndexEndName = function () {\n      return fi(this.endSet_, \"Only valid if end has been set\"), this.endNameSet_ ? this.indexEndName_ : Co;\n    }, r.prototype.hasLimit = function () {\n      return this.limitSet_;\n    }, r.prototype.hasAnchoredLimit = function () {\n      return this.limitSet_ && \"\" !== this.viewFrom_;\n    }, r.prototype.getLimit = function () {\n      return fi(this.limitSet_, \"Only valid if limit has been set\"), this.limit_;\n    }, r.prototype.getIndex = function () {\n      return this.index_;\n    }, r.prototype.copy_ = function () {\n      var t = new r();\n      return t.limitSet_ = this.limitSet_, t.limit_ = this.limit_, t.startSet_ = this.startSet_, t.indexStartValue_ = this.indexStartValue_, t.startNameSet_ = this.startNameSet_, t.indexStartName_ = this.indexStartName_, t.endSet_ = this.endSet_, t.indexEndValue_ = this.indexEndValue_, t.endNameSet_ = this.endNameSet_, t.indexEndName_ = this.indexEndName_, t.index_ = this.index_, t.viewFrom_ = this.viewFrom_, t;\n    }, r.prototype.limit = function (t) {\n      var e = this.copy_();\n      return e.limitSet_ = !0, e.limit_ = t, e.viewFrom_ = \"\", e;\n    }, r.prototype.limitToFirst = function (t) {\n      var e = this.copy_();\n      return e.limitSet_ = !0, e.limit_ = t, e.viewFrom_ = r.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT, e;\n    }, r.prototype.limitToLast = function (t) {\n      var e = this.copy_();\n      return e.limitSet_ = !0, e.limit_ = t, e.viewFrom_ = r.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT, e;\n    }, r.prototype.startAt = function (t, e) {\n      var n = this.copy_();\n      return n.startSet_ = !0, void 0 === t && (t = null), n.indexStartValue_ = t, n.indexStartName_ = null != e ? (n.startNameSet_ = !0, e) : (n.startNameSet_ = !1, \"\"), n;\n    }, r.prototype.endAt = function (t, e) {\n      var n = this.copy_();\n      return n.endSet_ = !0, void 0 === t && (t = null), n.indexEndValue_ = t, n.indexEndName_ = void 0 !== e ? (n.endNameSet_ = !0, e) : (n.endNameSet_ = !1, \"\"), n;\n    }, r.prototype.orderBy = function (t) {\n      var e = this.copy_();\n      return e.index_ = t, e;\n    }, r.prototype.getQueryObject = function () {\n      var t = r.WIRE_PROTOCOL_CONSTANTS_,\n          e = {};\n\n      if (this.startSet_ && (e[t.INDEX_START_VALUE] = this.indexStartValue_, this.startNameSet_ && (e[t.INDEX_START_NAME] = this.indexStartName_)), this.endSet_ && (e[t.INDEX_END_VALUE] = this.indexEndValue_, this.endNameSet_ && (e[t.INDEX_END_NAME] = this.indexEndName_)), this.limitSet_) {\n        e[t.LIMIT] = this.limit_;\n        var n = this.viewFrom_;\n        \"\" === n && (n = this.isViewFromLeft() ? t.VIEW_FROM_LEFT : t.VIEW_FROM_RIGHT), e[t.VIEW_FROM] = n;\n      }\n\n      return this.index_ !== Na && (e[t.INDEX] = this.index_.toString()), e;\n    }, r.prototype.loadsAllData = function () {\n      return !(this.startSet_ || this.endSet_ || this.limitSet_);\n    }, r.prototype.isDefault = function () {\n      return this.loadsAllData() && this.index_ == Na;\n    }, r.prototype.getNodeFilter = function () {\n      return this.loadsAllData() ? new ds(this.getIndex()) : this.hasLimit() ? new $s(this) : new Js(this);\n    }, r.prototype.toRestQueryStringParameters = function () {\n      var t,\n          e = r.REST_QUERY_CONSTANTS_,\n          n = {};\n      return this.isDefault() || (t = this.index_ === Na ? e.PRIORITY_INDEX : this.index_ === Ha ? e.VALUE_INDEX : this.index_ === va ? e.KEY_INDEX : (fi(this.index_ instanceof Ga, \"Unrecognized index type!\"), this.index_.toString()), n[e.ORDER_BY] = Ai(t), this.startSet_ && (n[e.START_AT] = Ai(this.indexStartValue_), this.startNameSet_ && (n[e.START_AT] += \",\" + Ai(this.indexStartName_))), this.endSet_ && (n[e.END_AT] = Ai(this.indexEndValue_), this.endNameSet_ && (n[e.END_AT] += \",\" + Ai(this.indexEndName_))), this.limitSet_ && (this.isViewFromLeft() ? n[e.LIMIT_TO_FIRST] = this.limit_ : n[e.LIMIT_TO_LAST] = this.limit_)), n;\n    }, r.WIRE_PROTOCOL_CONSTANTS_ = {\n      INDEX_START_VALUE: \"sp\",\n      INDEX_START_NAME: \"sn\",\n      INDEX_END_VALUE: \"ep\",\n      INDEX_END_NAME: \"en\",\n      LIMIT: \"l\",\n      VIEW_FROM: \"vf\",\n      VIEW_FROM_LEFT: \"l\",\n      VIEW_FROM_RIGHT: \"r\",\n      INDEX: \"i\"\n    }, r.REST_QUERY_CONSTANTS_ = {\n      ORDER_BY: \"orderBy\",\n      PRIORITY_INDEX: \"$priority\",\n      VALUE_INDEX: \"$value\",\n      KEY_INDEX: \"$key\",\n      START_AT: \"startAt\",\n      END_AT: \"endAt\",\n      LIMIT_TO_FIRST: \"limitToFirst\",\n      LIMIT_TO_LAST: \"limitToLast\"\n    }, r.DEFAULT = new r(), r;\n  }(),\n      tu = function (n) {\n    function o(t, e) {\n      if (!(t instanceof Xs)) throw new Error(\"new Reference() no longer supported - use app.database().\");\n      return n.call(this, t, e, Zs.DEFAULT, !1) || this;\n    }\n\n    return ii(o, n), o.prototype.getKey = function () {\n      return Ui(\"Reference.key\", 0, 0, arguments.length), this.path.isEmpty() ? null : this.path.getBack();\n    }, o.prototype.child = function (t) {\n      var e, n, r, i;\n      return Ui(\"Reference.child\", 1, 1, arguments.length), \"number\" == typeof t ? t = String(t) : t instanceof Uo || (null === this.path.getFront() ? (e = \"Reference.child\", i = !(n = 1), (r = t) && (r = r.replace(/^\\/*\\.info(\\/|$)/, \"/\")), ca(e, n, r, i)) : ca(\"Reference.child\", 1, t, !1)), new o(this.repo, this.path.child(t));\n    }, o.prototype.getParent = function () {\n      Ui(\"Reference.parent\", 0, 0, arguments.length);\n      var t = this.path.parent();\n      return null === t ? null : new o(this.repo, t);\n    }, o.prototype.getRoot = function () {\n      Ui(\"Reference.root\", 0, 0, arguments.length);\n\n      for (var t = this; null !== t.getParent();) {\n        t = t.getParent();\n      }\n\n      return t;\n    }, o.prototype.databaseProp = function () {\n      return this.repo.database;\n    }, o.prototype.set = function (t, e) {\n      Ui(\"Reference.set\", 1, 2, arguments.length), ha(\"Reference.set\", this.path), ra(\"Reference.set\", 1, t, this.path, !1), Vi(\"Reference.set\", 2, e, !0);\n      var n = new bi();\n      return this.repo.setWithPriority(this.path, t, null, n.wrapCallback(e)), n.promise;\n    }, o.prototype.update = function (t, e) {\n      if (Ui(\"Reference.update\", 1, 2, arguments.length), ha(\"Reference.update\", this.path), Array.isArray(t)) {\n        for (var n = {}, r = 0; r < t.length; ++r) {\n          n[\"\" + r] = t[r];\n        }\n\n        t = n, To(\"Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.\");\n      }\n\n      oa(\"Reference.update\", 1, t, this.path, !1), Vi(\"Reference.update\", 2, e, !0);\n      var i = new bi();\n      return this.repo.update(this.path, t, i.wrapCallback(e)), i.promise;\n    }, o.prototype.setWithPriority = function (t, e, n) {\n      if (Ui(\"Reference.setWithPriority\", 2, 3, arguments.length), ha(\"Reference.setWithPriority\", this.path), ra(\"Reference.setWithPriority\", 1, t, this.path, !1), aa(\"Reference.setWithPriority\", 2, e, !1), Vi(\"Reference.setWithPriority\", 3, n, !0), \".length\" === this.getKey() || \".keys\" === this.getKey()) throw \"Reference.setWithPriority failed: \" + this.getKey() + \" is a read-only object.\";\n      var r = new bi();\n      return this.repo.setWithPriority(this.path, t, e, r.wrapCallback(n)), r.promise;\n    }, o.prototype.remove = function (t) {\n      return Ui(\"Reference.remove\", 0, 1, arguments.length), ha(\"Reference.remove\", this.path), Vi(\"Reference.remove\", 1, t, !0), this.set(null, t);\n    }, o.prototype.transaction = function (t, r, e) {\n      if (Ui(\"Reference.transaction\", 1, 3, arguments.length), ha(\"Reference.transaction\", this.path), Vi(\"Reference.transaction\", 1, t, !1), Vi(\"Reference.transaction\", 2, r, !0), function (t, e, n, r) {\n        if ((!r || void 0 !== n) && \"boolean\" != typeof n) throw new Error(qi(t, e, r) + \"must be a boolean.\");\n      }(\"Reference.transaction\", 3, e, !0), \".length\" === this.getKey() || \".keys\" === this.getKey()) throw \"Reference.transaction failed: \" + this.getKey() + \" is a read-only object.\";\n      void 0 === e && (e = !0);\n      var i = new bi();\n      \"function\" == typeof r && i.promise.catch(function () {});\n      return this.repo.startTransaction(this.path, t, function (t, e, n) {\n        t ? i.reject(t) : i.resolve(new pa(e, n)), \"function\" == typeof r && r(t, e, n);\n      }, e), i.promise;\n    }, o.prototype.setPriority = function (t, e) {\n      Ui(\"Reference.setPriority\", 1, 2, arguments.length), ha(\"Reference.setPriority\", this.path), aa(\"Reference.setPriority\", 1, t, !1), Vi(\"Reference.setPriority\", 2, e, !0);\n      var n = new bi();\n      return this.repo.setWithPriority(this.path.child(\".priority\"), t, null, n.wrapCallback(e)), n.promise;\n    }, o.prototype.push = function (t, e) {\n      Ui(\"Reference.push\", 0, 2, arguments.length), ha(\"Reference.push\", this.path), ra(\"Reference.push\", 1, t, this.path, !0), Vi(\"Reference.push\", 2, e, !0);\n      var n,\n          r = this.repo.serverTime(),\n          i = da(r),\n          o = this.child(i),\n          a = this.child(i);\n      return n = null != t ? o.set(t, e).then(function () {\n        return a;\n      }) : Promise.resolve(a), o.then = n.then.bind(n), o.catch = n.then.bind(n, void 0), \"function\" == typeof e && n.catch(function () {}), o;\n    }, o.prototype.onDisconnect = function () {\n      return ha(\"Reference.onDisconnect\", this.path), new fa(this.repo, this.path);\n    }, Object.defineProperty(o.prototype, \"database\", {\n      get: function get() {\n        return this.databaseProp();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(o.prototype, \"key\", {\n      get: function get() {\n        return this.getKey();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(o.prototype, \"parent\", {\n      get: function get() {\n        return this.getParent();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(o.prototype, \"root\", {\n      get: function get() {\n        return this.getRoot();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), o;\n  }(Za);\n\n  Za.__referenceConstructor = tu, Es.__referenceConstructor = tu;\n\n  var eu,\n      nu,\n      ru = function ru() {\n    this.children = {}, this.childCount = 0, this.value = null;\n  },\n      iu = function () {\n    function i(t, e, n) {\n      void 0 === t && (t = \"\"), void 0 === e && (e = null), void 0 === n && (n = new ru()), this.name_ = t, this.parent_ = e, this.node_ = n;\n    }\n\n    return i.prototype.subTree = function (t) {\n      for (var e, n = t instanceof Uo ? t : new Uo(t), r = this; null !== (e = n.getFront());) {\n        r = new i(e, r, Ri(r.node_.children, e) || new ru()), n = n.popFront();\n      }\n\n      return r;\n    }, i.prototype.getValue = function () {\n      return this.node_.value;\n    }, i.prototype.setValue = function (t) {\n      fi(void 0 !== t, \"Cannot set value to undefined\"), this.node_.value = t, this.updateParents_();\n    }, i.prototype.clear = function () {\n      this.node_.value = null, this.node_.children = {}, this.node_.childCount = 0, this.updateParents_();\n    }, i.prototype.hasChildren = function () {\n      return 0 < this.node_.childCount;\n    }, i.prototype.isEmpty = function () {\n      return null === this.getValue() && !this.hasChildren();\n    }, i.prototype.forEachChild = function (n) {\n      var r = this;\n      Oo(this.node_.children, function (t, e) {\n        n(new i(t, r, e));\n      });\n    }, i.prototype.forEachDescendant = function (e, t, n) {\n      t && !n && e(this), this.forEachChild(function (t) {\n        t.forEachDescendant(e, !0, n);\n      }), t && n && e(this);\n    }, i.prototype.forEachAncestor = function (t, e) {\n      for (var n = e ? this : this.parent(); null !== n;) {\n        if (t(n)) return !0;\n        n = n.parent();\n      }\n\n      return !1;\n    }, i.prototype.forEachImmediateDescendantWithValue = function (e) {\n      this.forEachChild(function (t) {\n        null !== t.getValue() ? e(t) : t.forEachImmediateDescendantWithValue(e);\n      });\n    }, i.prototype.path = function () {\n      return new Uo(null === this.parent_ ? this.name_ : this.parent_.path() + \"/\" + this.name_);\n    }, i.prototype.name = function () {\n      return this.name_;\n    }, i.prototype.parent = function () {\n      return this.parent_;\n    }, i.prototype.updateParents_ = function () {\n      null !== this.parent_ && this.parent_.updateChild_(this.name_, this);\n    }, i.prototype.updateChild_ = function (t, e) {\n      var n = e.isEmpty(),\n          r = Di(this.node_.children, t);\n      n && r ? (delete this.node_.children[t], this.node_.childCount--, this.updateParents_()) : n || r || (this.node_.children[t] = e.node_, this.node_.childCount++, this.updateParents_());\n    }, i;\n  }();\n\n  (nu = eu || (eu = {}))[nu.RUN = 0] = \"RUN\", nu[nu.SENT = 1] = \"SENT\", nu[nu.COMPLETED = 2] = \"COMPLETED\", nu[nu.SENT_NEEDS_ABORT = 3] = \"SENT_NEEDS_ABORT\", nu[nu.NEEDS_ABORT = 4] = \"NEEDS_ABORT\", Xs.MAX_TRANSACTION_RETRIES_ = 25, Xs.prototype.transactions_init_ = function () {\n    this.transactionQueueTree_ = new iu();\n  }, Xs.prototype.startTransaction = function (t, e, n, r) {\n    this.log_(\"transaction on \" + t);\n\n    var i = function i() {},\n        o = new tu(this, t);\n\n    o.on(\"value\", i);\n    var a = {\n      path: t,\n      update: e,\n      onComplete: n,\n      status: null,\n      order: fo(),\n      applyLocally: r,\n      retryCount: 0,\n      unwatcher: function unwatcher() {\n        o.off(\"value\", i);\n      },\n      abortReason: null,\n      currentWriteId: null,\n      currentInputSnapshot: null,\n      currentOutputSnapshotRaw: null,\n      currentOutputSnapshotResolved: null\n    },\n        s = this.getLatestState_(t);\n    a.currentInputSnapshot = s;\n    var u = a.update(s.val());\n\n    if (void 0 === u) {\n      if (a.unwatcher(), a.currentOutputSnapshotRaw = null, a.currentOutputSnapshotResolved = null, a.onComplete) {\n        var c = new za(a.currentInputSnapshot, new tu(this, a.path), Na);\n        a.onComplete(null, !1, c);\n      }\n    } else {\n      ia(\"transaction failed: Data returned \", u, a.path), a.status = eu.RUN;\n      var h = this.transactionQueueTree_.subTree(t),\n          l = h.getValue() || [];\n      l.push(a), h.setValue(l);\n      var f = void 0;\n      if (\"object\" == typeof u && null !== u && Di(u, \".priority\")) f = Ri(u, \".priority\"), fi(na(f), \"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.\");else f = (this.serverSyncTree_.calcCompleteEventCache(t) || qa.EMPTY_NODE).getPriority().val();\n      f = f;\n      var p = this.generateServerValues(),\n          d = ja(u, f),\n          y = ns(d, p);\n      a.currentOutputSnapshotRaw = d, a.currentOutputSnapshotResolved = y, a.currentWriteId = this.getNextWriteId_();\n      var m = this.serverSyncTree_.applyUserOverwrite(t, y, a.currentWriteId, a.applyLocally);\n      this.eventQueue_.raiseEventsForChangedPath(t, m), this.sendReadyTransactions_();\n    }\n  }, Xs.prototype.getLatestState_ = function (t, e) {\n    return this.serverSyncTree_.calcCompleteEventCache(t, e) || qa.EMPTY_NODE;\n  }, Xs.prototype.sendReadyTransactions_ = function (t) {\n    var e = this;\n\n    if (void 0 === t && (t = this.transactionQueueTree_), t || this.pruneCompletedTransactionsBelowNode_(t), null !== t.getValue()) {\n      var n = this.buildTransactionQueue_(t);\n      fi(0 < n.length, \"Sending zero length transaction queue\"), n.every(function (t) {\n        return t.status === eu.RUN;\n      }) && this.sendTransactionQueue_(t.path(), n);\n    } else t.hasChildren() && t.forEachChild(function (t) {\n      e.sendReadyTransactions_(t);\n    });\n  }, Xs.prototype.sendTransactionQueue_ = function (s, u) {\n    for (var c = this, t = u.map(function (t) {\n      return t.currentWriteId;\n    }), e = this.getLatestState_(s, t), n = e, r = e.hash(), i = 0; i < u.length; i++) {\n      var o = u[i];\n      fi(o.status === eu.RUN, \"tryToSendTransactionQueue_: items in queue should all be run.\"), o.status = eu.SENT, o.retryCount++;\n      var a = Uo.relativePath(s, o.path);\n      n = n.updateChild(a, o.currentOutputSnapshotRaw);\n    }\n\n    var h = n.val(!0),\n        l = s;\n    this.server_.put(l.toString(), h, function (t) {\n      c.log_(\"transaction put response\", {\n        path: l.toString(),\n        status: t\n      });\n      var e = [];\n\n      if (\"ok\" === t) {\n        for (var n = [], r = 0; r < u.length; r++) {\n          if (u[r].status = eu.COMPLETED, e = e.concat(c.serverSyncTree_.ackUserWrite(u[r].currentWriteId)), u[r].onComplete) {\n            var i = u[r].currentOutputSnapshotResolved,\n                o = new tu(c, u[r].path),\n                a = new za(i, o, Na);\n            n.push(u[r].onComplete.bind(null, null, !0, a));\n          }\n\n          u[r].unwatcher();\n        }\n\n        c.pruneCompletedTransactionsBelowNode_(c.transactionQueueTree_.subTree(s)), c.sendReadyTransactions_(), c.eventQueue_.raiseEventsForChangedPath(s, e);\n\n        for (r = 0; r < n.length; r++) {\n          Lo(n[r]);\n        }\n      } else {\n        if (\"datastale\" === t) for (r = 0; r < u.length; r++) {\n          u[r].status === eu.SENT_NEEDS_ABORT ? u[r].status = eu.NEEDS_ABORT : u[r].status = eu.RUN;\n        } else {\n          To(\"transaction at \" + l.toString() + \" failed: \" + t);\n\n          for (r = 0; r < u.length; r++) {\n            u[r].status = eu.NEEDS_ABORT, u[r].abortReason = t;\n          }\n        }\n        c.rerunTransactions_(s);\n      }\n    }, r);\n  }, Xs.prototype.rerunTransactions_ = function (t) {\n    var e = this.getAncestorTransactionNode_(t),\n        n = e.path(),\n        r = this.buildTransactionQueue_(e);\n    return this.rerunTransactionQueue_(r, n), n;\n  }, Xs.prototype.rerunTransactionQueue_ = function (t, e) {\n    if (0 !== t.length) {\n      for (var n, r = [], i = [], o = t.filter(function (t) {\n        return t.status === eu.RUN;\n      }).map(function (t) {\n        return t.currentWriteId;\n      }), a = 0; a < t.length; a++) {\n        var s = t[a],\n            u = Uo.relativePath(e, s.path),\n            c = !1,\n            h = void 0;\n        if (fi(null !== u, \"rerunTransactionsUnderNode_: relativePath should not be null.\"), s.status === eu.NEEDS_ABORT) c = !0, h = s.abortReason, i = i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId, !0));else if (s.status === eu.RUN) if (s.retryCount >= Xs.MAX_TRANSACTION_RETRIES_) c = !0, h = \"maxretry\", i = i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId, !0));else {\n          var l = this.getLatestState_(s.path, o);\n          s.currentInputSnapshot = l;\n          var f = t[a].update(l.val());\n\n          if (void 0 !== f) {\n            ia(\"transaction failed: Data returned \", f, s.path);\n            var p = ja(f);\n            \"object\" == typeof f && null != f && Di(f, \".priority\") || (p = p.updatePriority(l.getPriority()));\n            var d = s.currentWriteId,\n                y = this.generateServerValues(),\n                m = ns(p, y);\n            s.currentOutputSnapshotRaw = p, s.currentOutputSnapshotResolved = m, s.currentWriteId = this.getNextWriteId_(), o.splice(o.indexOf(d), 1), i = (i = i.concat(this.serverSyncTree_.applyUserOverwrite(s.path, m, s.currentWriteId, s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d, !0));\n          } else c = !0, h = \"nodata\", i = i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId, !0));\n        }\n        if (this.eventQueue_.raiseEventsForChangedPath(e, i), i = [], c && (t[a].status = eu.COMPLETED, n = t[a].unwatcher, setTimeout(n, Math.floor(0)), t[a].onComplete)) if (\"nodata\" === h) {\n          var g = new tu(this, t[a].path),\n              v = t[a].currentInputSnapshot,\n              b = new za(v, g, Na);\n          r.push(t[a].onComplete.bind(null, null, !1, b));\n        } else r.push(t[a].onComplete.bind(null, new Error(h), !1, null));\n      }\n\n      this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);\n\n      for (a = 0; a < r.length; a++) {\n        Lo(r[a]);\n      }\n\n      this.sendReadyTransactions_();\n    }\n  }, Xs.prototype.getAncestorTransactionNode_ = function (t) {\n    for (var e, n = this.transactionQueueTree_; null !== (e = t.getFront()) && null === n.getValue();) {\n      n = n.subTree(e), t = t.popFront();\n    }\n\n    return n;\n  }, Xs.prototype.buildTransactionQueue_ = function (t) {\n    var e = [];\n    return this.aggregateTransactionQueuesForNode_(t, e), e.sort(function (t, e) {\n      return t.order - e.order;\n    }), e;\n  }, Xs.prototype.aggregateTransactionQueuesForNode_ = function (t, e) {\n    var n = this,\n        r = t.getValue();\n    if (null !== r) for (var i = 0; i < r.length; i++) {\n      e.push(r[i]);\n    }\n    t.forEachChild(function (t) {\n      n.aggregateTransactionQueuesForNode_(t, e);\n    });\n  }, Xs.prototype.pruneCompletedTransactionsBelowNode_ = function (t) {\n    var e = this,\n        n = t.getValue();\n\n    if (n) {\n      for (var r = 0, i = 0; i < n.length; i++) {\n        n[i].status !== eu.COMPLETED && (n[r] = n[i], r++);\n      }\n\n      n.length = r, t.setValue(0 < n.length ? n : null);\n    }\n\n    t.forEachChild(function (t) {\n      e.pruneCompletedTransactionsBelowNode_(t);\n    });\n  }, Xs.prototype.abortTransactions_ = function (t) {\n    var e = this,\n        n = this.getAncestorTransactionNode_(t).path(),\n        r = this.transactionQueueTree_.subTree(t);\n    return r.forEachAncestor(function (t) {\n      e.abortTransactionsOnNode_(t);\n    }), this.abortTransactionsOnNode_(r), r.forEachDescendant(function (t) {\n      e.abortTransactionsOnNode_(t);\n    }), n;\n  }, Xs.prototype.abortTransactionsOnNode_ = function (t) {\n    var e = t.getValue();\n\n    if (null !== e) {\n      for (var n = [], r = [], i = -1, o = 0; o < e.length; o++) {\n        if (e[o].status === eu.SENT_NEEDS_ABORT) ;else if (e[o].status === eu.SENT) fi(i === o - 1, \"All SENT items should be at beginning of queue.\"), e[i = o].status = eu.SENT_NEEDS_ABORT, e[o].abortReason = \"set\";else if (fi(e[o].status === eu.RUN, \"Unexpected transaction status in abort\"), e[o].unwatcher(), r = r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId, !0)), e[o].onComplete) {\n          n.push(e[o].onComplete.bind(null, new Error(\"set\"), !1, null));\n        }\n      }\n\n      -1 === i ? t.setValue(null) : e.length = i + 1, this.eventQueue_.raiseEventsForChangedPath(t.path(), r);\n\n      for (o = 0; o < n.length; o++) {\n        Lo(n[o]);\n      }\n    }\n  };\n\n  var ou,\n      au = \"databaseURL\",\n      su = function () {\n    function t() {\n      this.repos_ = {}, this.useRestClient_ = !1;\n    }\n\n    return t.getInstance = function () {\n      return ou || (ou = new t()), ou;\n    }, t.prototype.interrupt = function () {\n      for (var t in this.repos_) {\n        for (var e in this.repos_[t]) {\n          this.repos_[t][e].interrupt();\n        }\n      }\n    }, t.prototype.resume = function () {\n      for (var t in this.repos_) {\n        for (var e in this.repos_[t]) {\n          this.repos_[t][e].resume();\n        }\n      }\n    }, t.prototype.databaseFromApp = function (t, e) {\n      var n = e || t.options[au];\n      void 0 === n && Eo(\"Can't determine Firebase Database URL.  Be sure to include \" + au + \" option when calling firebase.initializeApp().\");\n      var r = Yo(n),\n          i = r.repoInfo,\n          o = void 0;\n      return \"undefined\" != typeof process && (o = process.env.FIREBASE_DATABASE_EMULATOR_HOST), o && (n = \"http://\" + o + \"?ns=\" + i.namespace), la(\"Invalid Firebase Database URL\", 1, r), r.path.isEmpty() || Eo(\"Database URL must point to the root of a Firebase Database (not including a child path).\"), this.createRepo(i, t).database;\n    }, t.prototype.deleteRepo = function (t) {\n      var e = Ri(this.repos_, t.app.name);\n      e && Ri(e, t.repoInfo_.toURLString()) === t || Eo(\"Database \" + t.app.name + \"(\" + t.repoInfo_ + \") has already been deleted.\"), t.interrupt(), delete e[t.repoInfo_.toURLString()];\n    }, t.prototype.createRepo = function (t, e) {\n      var n = Ri(this.repos_, e.name);\n      n || (n = {}, this.repos_[e.name] = n);\n      var r = Ri(n, t.toURLString());\n      return r && Eo(\"Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.\"), r = new Xs(t, this.useRestClient_, e), n[t.toURLString()] = r;\n    }, t.prototype.forceRestClient = function (t) {\n      this.useRestClient_ = t;\n    }, t;\n  }(),\n      uu = function () {\n    function t(t) {\n      (this.repo_ = t) instanceof Xs || Eo(\"Don't call new Database() directly - please use firebase.database().\"), this.root_ = new tu(t, Uo.Empty), this.INTERNAL = new cu(this);\n    }\n\n    return Object.defineProperty(t.prototype, \"app\", {\n      get: function get() {\n        return this.repo_.app;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.ref = function (t) {\n      return this.checkDeleted_(\"ref\"), Ui(\"database.ref\", 0, 1, arguments.length), t instanceof tu ? this.refFromURL(t.toString()) : void 0 !== t ? this.root_.child(t) : this.root_;\n    }, t.prototype.refFromURL = function (t) {\n      var e = \"database.refFromURL\";\n      this.checkDeleted_(e), Ui(e, 1, 1, arguments.length);\n      var n = Yo(t);\n      la(e, 1, n);\n      var r = n.repoInfo;\n      return r.host !== this.repo_.repoInfo_.host && Eo(e + \": Host name does not match the current database: (found \" + r.host + \" but expected \" + this.repo_.repoInfo_.host + \")\"), this.ref(n.path.toString());\n    }, t.prototype.checkDeleted_ = function (t) {\n      null === this.repo_ && Eo(\"Cannot call \" + t + \" on a deleted database.\");\n    }, t.prototype.goOffline = function () {\n      Ui(\"database.goOffline\", 0, 0, arguments.length), this.checkDeleted_(\"goOffline\"), this.repo_.interrupt();\n    }, t.prototype.goOnline = function () {\n      Ui(\"database.goOnline\", 0, 0, arguments.length), this.checkDeleted_(\"goOnline\"), this.repo_.resume();\n    }, t.ServerValue = {\n      TIMESTAMP: {\n        \".sv\": \"timestamp\"\n      }\n    }, t;\n  }(),\n      cu = function () {\n    function t(t) {\n      this.database = t;\n    }\n\n    return t.prototype.delete = function () {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          return this.database.checkDeleted_(\"delete\"), su.getInstance().deleteRepo(this.database.repo_), this.database.repo_ = null, this.database.root_ = null, this.database.INTERNAL = null, this.database = null, [2];\n        });\n      });\n    }, t;\n  }(),\n      hu = Object.freeze({\n    forceLongPolling: function forceLongPolling() {\n      Ws.forceDisallow(), qs.forceAllow();\n    },\n    forceWebSockets: function forceWebSockets() {\n      qs.forceDisallow();\n    },\n    isWebSocketsAvailable: function isWebSocketsAvailable() {\n      return Ws.isAvailable();\n    },\n    setSecurityDebugCallback: function setSecurityDebugCallback(t, e) {\n      t.repo.persistentConnection_.securityDebugCallback_ = e;\n    },\n    stats: function stats(t, e) {\n      t.repo.stats(e);\n    },\n    statsIncrementCounter: function statsIncrementCounter(t, e) {\n      t.repo.statsIncrementCounter(e);\n    },\n    dataUpdateCount: function dataUpdateCount(t) {\n      return t.repo.dataUpdateCount;\n    },\n    interceptServerData: function interceptServerData(t, e) {\n      return t.repo.interceptServerData_(e);\n    }\n  }),\n      lu = Gs;\n\n  Gs.prototype.simpleListen = function (t, e) {\n    this.sendRequest(\"q\", {\n      p: t\n    }, e);\n  }, Gs.prototype.echo = function (t, e) {\n    this.sendRequest(\"echo\", {\n      d: t\n    }, e);\n  };\n  var fu,\n      pu,\n      du = Qs,\n      yu = Wo,\n      mu = Object.freeze({\n    DataConnection: lu,\n    RealTimeConnection: du,\n    hijackHash: function hijackHash(i) {\n      var o = Gs.prototype.put;\n      return Gs.prototype.put = function (t, e, n, r) {\n        void 0 !== r && (r = i()), o.call(this, t, e, n, r);\n      }, function () {\n        Gs.prototype.put = o;\n      };\n    },\n    ConnectionTarget: yu,\n    queryIdentifier: function queryIdentifier(t) {\n      return t.queryIdentifier();\n    },\n    forceRestClient: function forceRestClient(t) {\n      su.getInstance().forceRestClient(t);\n    }\n  }),\n      gu = uu.ServerValue;\n  pu = (fu = Jh).SDK_VERSION, Bs = pu, fu.INTERNAL.registerService(\"database\", function (t, e, n) {\n    return su.getInstance().databaseFromApp(t, n);\n  }, {\n    Reference: tu,\n    Query: Za,\n    Database: uu,\n    DataSnapshot: za,\n    enableLogging: vo,\n    INTERNAL: hu,\n    ServerValue: gu,\n    TEST_ACCESS: mu\n  }, null, !0);\n  var vu,\n      bu = \"undefined\" != typeof globalThis ? globalThis : \"undefined\" != typeof window ? window : \"undefined\" != typeof global ? global : \"undefined\" != typeof self ? self : {},\n      wu = wu || {},\n      _u = bu;\n\n  function Eu(t) {\n    return \"string\" == typeof t;\n  }\n\n  function Tu(t) {\n    return \"number\" == typeof t;\n  }\n\n  function Su(t, e) {\n    t = t.split(\".\"), e = e || _u;\n\n    for (var n = 0; n < t.length; n++) {\n      if (null == (e = e[t[n]])) return null;\n    }\n\n    return e;\n  }\n\n  function Iu() {}\n\n  function Cu(t) {\n    var e = typeof t;\n\n    if (\"object\" == e) {\n      if (!t) return \"null\";\n      if (t instanceof Array) return \"array\";\n      if (t instanceof Object) return e;\n      var n = Object.prototype.toString.call(t);\n      if (\"[object Window]\" == n) return \"object\";\n      if (\"[object Array]\" == n || \"number\" == typeof t.length && void 0 !== t.splice && void 0 !== t.propertyIsEnumerable && !t.propertyIsEnumerable(\"splice\")) return \"array\";\n      if (\"[object Function]\" == n || void 0 !== t.call && void 0 !== t.propertyIsEnumerable && !t.propertyIsEnumerable(\"call\")) return \"function\";\n    } else if (\"function\" == e && void 0 === t.call) return \"object\";\n\n    return e;\n  }\n\n  function Nu(t) {\n    return \"array\" == Cu(t);\n  }\n\n  function Au(t) {\n    var e = Cu(t);\n    return \"array\" == e || \"object\" == e && \"number\" == typeof t.length;\n  }\n\n  function ku(t) {\n    var e = typeof t;\n    return \"object\" == e && null != t || \"function\" == e;\n  }\n\n  var Du = \"closure_uid_\" + (1e9 * Math.random() >>> 0),\n      Ru = 0;\n\n  function Ou(t, e, n) {\n    return t.call.apply(t.bind, arguments);\n  }\n\n  function Pu(e, n, t) {\n    if (!e) throw Error();\n\n    if (2 < arguments.length) {\n      var r = Array.prototype.slice.call(arguments, 2);\n      return function () {\n        var t = Array.prototype.slice.call(arguments);\n        return Array.prototype.unshift.apply(t, r), e.apply(n, t);\n      };\n    }\n\n    return function () {\n      return e.apply(n, arguments);\n    };\n  }\n\n  function xu(t, e, n) {\n    return (xu = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf(\"native code\") ? Ou : Pu).apply(null, arguments);\n  }\n\n  function Mu(e, t) {\n    var n = Array.prototype.slice.call(arguments, 1);\n    return function () {\n      var t = n.slice();\n      return t.push.apply(t, arguments), e.apply(this, t);\n    };\n  }\n\n  var Lu = Date.now || function () {\n    return +new Date();\n  };\n\n  function Fu(t, o) {\n    function e() {}\n\n    e.prototype = o.prototype, t.N = o.prototype, t.prototype = new e(), (t.prototype.constructor = t).yb = function (t, e, n) {\n      for (var r = Array(arguments.length - 2), i = 2; i < arguments.length; i++) {\n        r[i - 2] = arguments[i];\n      }\n\n      return o.prototype[e].apply(t, r);\n    };\n  }\n\n  function Uu() {\n    this.j = this.j, this.i = this.i;\n  }\n\n  Uu.prototype.j = !1, Uu.prototype.la = function () {\n    if (!this.j && (this.j = !0, this.G(), 0)) this[Du] || (this[Du] = ++Ru);\n  }, Uu.prototype.G = function () {\n    if (this.i) for (; this.i.length;) {\n      this.i.shift()();\n    }\n  };\n  var qu = Array.prototype.indexOf ? function (t, e) {\n    return Array.prototype.indexOf.call(t, e, void 0);\n  } : function (t, e) {\n    if (Eu(t)) return Eu(e) && 1 == e.length ? t.indexOf(e, 0) : -1;\n\n    for (var n = 0; n < t.length; n++) {\n      if (n in t && t[n] === e) return n;\n    }\n\n    return -1;\n  },\n      Vu = Array.prototype.forEach ? function (t, e, n) {\n    Array.prototype.forEach.call(t, e, n);\n  } : function (t, e, n) {\n    for (var r = t.length, i = Eu(t) ? t.split(\"\") : t, o = 0; o < r; o++) {\n      o in i && e.call(n, i[o], o, t);\n    }\n  };\n\n  function Bu(t) {\n    return Array.prototype.concat.apply([], arguments);\n  }\n\n  function ju(t) {\n    var e = t.length;\n\n    if (0 < e) {\n      for (var n = Array(e), r = 0; r < e; r++) {\n        n[r] = t[r];\n      }\n\n      return n;\n    }\n\n    return [];\n  }\n\n  function Wu(t) {\n    return /^[\\s\\xa0]*$/.test(t);\n  }\n\n  var Ku,\n      Qu = String.prototype.trim ? function (t) {\n    return t.trim();\n  } : function (t) {\n    return /^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(t)[1];\n  };\n\n  function Hu(t, e) {\n    return -1 != t.indexOf(e);\n  }\n\n  function Gu(t, e) {\n    return t < e ? -1 : e < t ? 1 : 0;\n  }\n\n  t: {\n    var zu = _u.navigator;\n\n    if (zu) {\n      var Yu = zu.userAgent;\n\n      if (Yu) {\n        Ku = Yu;\n        break t;\n      }\n    }\n\n    Ku = \"\";\n  }\n\n  function Xu(t, e, n) {\n    for (var r in t) {\n      e.call(n, t[r], r, t);\n    }\n  }\n\n  function Ju(t) {\n    var e,\n        n = {};\n\n    for (e in t) {\n      n[e] = t[e];\n    }\n\n    return n;\n  }\n\n  var $u = \"constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf\".split(\" \");\n\n  function Zu(t, e) {\n    for (var n, r, i = 1; i < arguments.length; i++) {\n      for (n in r = arguments[i]) {\n        t[n] = r[n];\n      }\n\n      for (var o = 0; o < $u.length; o++) {\n        n = $u[o], Object.prototype.hasOwnProperty.call(r, n) && (t[n] = r[n]);\n      }\n    }\n  }\n\n  function tc(t) {\n    return tc[\" \"](t), t;\n  }\n\n  tc[\" \"] = Iu;\n  var ec,\n      nc,\n      rc = Hu(Ku, \"Opera\"),\n      ic = Hu(Ku, \"Trident\") || Hu(Ku, \"MSIE\"),\n      oc = Hu(Ku, \"Edge\"),\n      ac = oc || ic,\n      sc = Hu(Ku, \"Gecko\") && !(Hu(Ku.toLowerCase(), \"webkit\") && !Hu(Ku, \"Edge\")) && !(Hu(Ku, \"Trident\") || Hu(Ku, \"MSIE\")) && !Hu(Ku, \"Edge\"),\n      uc = Hu(Ku.toLowerCase(), \"webkit\") && !Hu(Ku, \"Edge\");\n\n  function cc() {\n    var t = _u.document;\n    return t ? t.documentMode : void 0;\n  }\n\n  t: {\n    var hc = \"\",\n        lc = (nc = Ku, sc ? /rv:([^\\);]+)(\\)|;)/.exec(nc) : oc ? /Edge\\/([\\d\\.]+)/.exec(nc) : ic ? /\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(nc) : uc ? /WebKit\\/(\\S+)/.exec(nc) : rc ? /(?:Version)[ \\/]?(\\S+)/.exec(nc) : void 0);\n\n    if (lc && (hc = lc ? lc[1] : \"\"), ic) {\n      var fc = cc();\n\n      if (null != fc && fc > parseFloat(hc)) {\n        ec = String(fc);\n        break t;\n      }\n    }\n\n    ec = hc;\n  }\n\n  var pc,\n      dc = {};\n\n  function yc(s) {\n    return t = s, e = function e() {\n      for (var t = 0, e = Qu(String(ec)).split(\".\"), n = Qu(String(s)).split(\".\"), r = Math.max(e.length, n.length), i = 0; 0 == t && i < r; i++) {\n        var o = e[i] || \"\",\n            a = n[i] || \"\";\n\n        do {\n          if (o = /(\\d*)(\\D*)(.*)/.exec(o) || [\"\", \"\", \"\", \"\"], a = /(\\d*)(\\D*)(.*)/.exec(a) || [\"\", \"\", \"\", \"\"], 0 == o[0].length && 0 == a[0].length) break;\n          t = Gu(0 == o[1].length ? 0 : parseInt(o[1], 10), 0 == a[1].length ? 0 : parseInt(a[1], 10)) || Gu(0 == o[2].length, 0 == a[2].length) || Gu(o[2], a[2]), o = o[3], a = a[3];\n        } while (0 == t);\n      }\n\n      return 0 <= t;\n    }, n = dc, Object.prototype.hasOwnProperty.call(n, t) ? n[t] : n[t] = e(t);\n    var t, e, n;\n  }\n\n  var mc = _u.document;\n  pc = mc && ic ? cc() || (\"CSS1Compat\" == mc.compatMode ? parseInt(ec, 10) : 5) : void 0;\n\n  var gc = !ic || 9 <= Number(pc),\n      vc = ic && !yc(\"9\"),\n      bc = function () {\n    if (!_u.addEventListener || !Object.defineProperty) return !1;\n    var t = !1,\n        e = Object.defineProperty({}, \"passive\", {\n      get: function get() {\n        t = !0;\n      }\n    });\n\n    try {\n      _u.addEventListener(\"test\", Iu, e), _u.removeEventListener(\"test\", Iu, e);\n    } catch (t) {}\n\n    return t;\n  }();\n\n  function wc(t, e) {\n    this.type = t, this.a = this.target = e, this.Ja = !0;\n  }\n\n  function _c(t, e) {\n    if (wc.call(this, t ? t.type : \"\"), this.relatedTarget = this.a = this.target = null, this.button = this.screenY = this.screenX = this.clientY = this.clientX = 0, this.key = \"\", this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = !1, this.pointerId = 0, this.pointerType = \"\", this.c = null, t) {\n      var n = this.type = t.type,\n          r = t.changedTouches && t.changedTouches.length ? t.changedTouches[0] : null;\n\n      if (this.target = t.target || t.srcElement, this.a = e, e = t.relatedTarget) {\n        if (sc) {\n          t: {\n            try {\n              tc(e.nodeName);\n              var i = !0;\n              break t;\n            } catch (t) {}\n\n            i = !1;\n          }\n\n          i || (e = null);\n        }\n      } else \"mouseover\" == n ? e = t.fromElement : \"mouseout\" == n && (e = t.toElement);\n\n      this.relatedTarget = e, this.screenY = r ? (this.clientX = void 0 !== r.clientX ? r.clientX : r.pageX, this.clientY = void 0 !== r.clientY ? r.clientY : r.pageY, this.screenX = r.screenX || 0, r.screenY || 0) : (this.clientX = void 0 !== t.clientX ? t.clientX : t.pageX, this.clientY = void 0 !== t.clientY ? t.clientY : t.pageY, this.screenX = t.screenX || 0, t.screenY || 0), this.button = t.button, this.key = t.key || \"\", this.ctrlKey = t.ctrlKey, this.altKey = t.altKey, this.shiftKey = t.shiftKey, this.metaKey = t.metaKey, this.pointerId = t.pointerId || 0, this.pointerType = Eu(t.pointerType) ? t.pointerType : Ec[t.pointerType] || \"\", (this.c = t).defaultPrevented && this.b();\n    }\n  }\n\n  wc.prototype.b = function () {\n    this.Ja = !1;\n  }, Fu(_c, wc);\n  var Ec = {\n    2: \"touch\",\n    3: \"pen\",\n    4: \"mouse\"\n  };\n\n  _c.prototype.b = function () {\n    _c.N.b.call(this);\n\n    var t = this.c;\n    if (t.preventDefault) t.preventDefault();else if (t.returnValue = !1, vc) try {\n      (t.ctrlKey || 112 <= t.keyCode && t.keyCode <= 123) && (t.keyCode = -1);\n    } catch (t) {}\n  };\n\n  var Tc = \"closure_listenable_\" + (1e6 * Math.random() | 0),\n      Sc = 0;\n\n  function Ic(t, e, n, r, i) {\n    this.listener = t, this.proxy = null, this.src = e, this.type = n, this.capture = !!r, this.da = i, this.key = ++Sc, this.X = this.Z = !1;\n  }\n\n  function Cc(t) {\n    t.X = !0, t.listener = null, t.proxy = null, t.src = null, t.da = null;\n  }\n\n  function Nc(t) {\n    this.src = t, this.a = {}, this.b = 0;\n  }\n\n  function Ac(t, e) {\n    var n = e.type;\n\n    if (n in t.a) {\n      var r,\n          i = t.a[n],\n          o = qu(i, e);\n      (r = 0 <= o) && Array.prototype.splice.call(i, o, 1), r && (Cc(e), 0 == t.a[n].length && (delete t.a[n], t.b--));\n    }\n  }\n\n  function kc(t, e, n, r) {\n    for (var i = 0; i < t.length; ++i) {\n      var o = t[i];\n      if (!o.X && o.listener == e && o.capture == !!n && o.da == r) return i;\n    }\n\n    return -1;\n  }\n\n  Nc.prototype.add = function (t, e, n, r, i) {\n    var o = t.toString();\n    (t = this.a[o]) || (t = this.a[o] = [], this.b++);\n    var a = kc(t, e, r, i);\n    return -1 < a ? (e = t[a], n || (e.Z = !1)) : ((e = new Ic(e, this.src, o, !!r, i)).Z = n, t.push(e)), e;\n  };\n\n  var Dc = \"closure_lm_\" + (1e6 * Math.random() | 0),\n      Rc = {};\n\n  function Oc(t, e, n, r, i) {\n    if (r && r.once) return function t(e, n, r, i, o) {\n      if (Nu(n)) {\n        for (var a = 0; a < n.length; a++) {\n          t(e, n[a], r, i, o);\n        }\n\n        return null;\n      }\n\n      r = Vc(r);\n      return e && e[Tc] ? e.Ba(n, r, ku(i) ? !!i.capture : !!i, o) : Pc(e, n, r, !0, i, o);\n    }(t, e, n, r, i);\n\n    if (Nu(e)) {\n      for (var o = 0; o < e.length; o++) {\n        Oc(t, e[o], n, r, i);\n      }\n\n      return null;\n    }\n\n    return n = Vc(n), t && t[Tc] ? t.Aa(e, n, ku(r) ? !!r.capture : !!r, i) : Pc(t, e, n, !1, r, i);\n  }\n\n  function Pc(t, e, n, r, i, o) {\n    if (!e) throw Error(\"Invalid event type\");\n    var a = ku(i) ? !!i.capture : !!i;\n    if (a && !gc) return null;\n    var s,\n        u,\n        c = Uc(t);\n    if (c || (t[Dc] = c = new Nc(t)), (n = c.add(e, n, r, a, o)).proxy) return n;\n    if (s = Fc, r = u = gc ? function (t) {\n      return s.call(u.src, u.listener, t);\n    } : function (t) {\n      if (!(t = s.call(u.src, u.listener, t))) return t;\n    }, (n.proxy = r).src = t, r.listener = n, t.addEventListener) bc || (i = a), void 0 === i && (i = !1), t.addEventListener(e.toString(), r, i);else if (t.attachEvent) t.attachEvent(Mc(e.toString()), r);else {\n      if (!t.addListener || !t.removeListener) throw Error(\"addEventListener and attachEvent are unavailable.\");\n      t.addListener(r);\n    }\n    return n;\n  }\n\n  function xc(t) {\n    if (!Tu(t) && t && !t.X) {\n      var e = t.src;\n      if (e && e[Tc]) Ac(e.c, t);else {\n        var n = t.type,\n            r = t.proxy;\n        e.removeEventListener ? e.removeEventListener(n, r, t.capture) : e.detachEvent ? e.detachEvent(Mc(n), r) : e.addListener && e.removeListener && e.removeListener(r), (n = Uc(e)) ? (Ac(n, t), 0 == n.b && (n.src = null, e[Dc] = null)) : Cc(t);\n      }\n    }\n  }\n\n  function Mc(t) {\n    return t in Rc ? Rc[t] : Rc[t] = \"on\" + t;\n  }\n\n  function Lc(t, e) {\n    var n = t.listener,\n        r = t.da || t.src;\n    return t.Z && xc(t), n.call(r, e);\n  }\n\n  function Fc(t, e) {\n    return !!t.X || (gc ? Lc(t, new _c(e, this)) : Lc(t, e = new _c(e || Su(\"window.event\"), this)));\n  }\n\n  function Uc(t) {\n    return (t = t[Dc]) instanceof Nc ? t : null;\n  }\n\n  var qc = \"__closure_events_fn_\" + (1e9 * Math.random() >>> 0);\n\n  function Vc(e) {\n    return \"function\" == Cu(e) ? e : (e[qc] || (e[qc] = function (t) {\n      return e.handleEvent(t);\n    }), e[qc]);\n  }\n\n  function Bc() {\n    Uu.call(this), this.c = new Nc(this), (this.J = this).B = null;\n  }\n\n  function jc(t, e, n, r) {\n    if (!(e = t.c.a[String(e)])) return !0;\n    e = e.concat();\n\n    for (var i = !0, o = 0; o < e.length; ++o) {\n      var a = e[o];\n\n      if (a && !a.X && a.capture == n) {\n        var s = a.listener,\n            u = a.da || a.src;\n        a.Z && Ac(t.c, a), i = !1 !== s.call(u, r) && i;\n      }\n    }\n\n    return i && 0 != r.Ja;\n  }\n\n  Fu(Bc, Uu), Bc.prototype[Tc] = !0, (vu = Bc.prototype).addEventListener = function (t, e, n, r) {\n    Oc(this, t, e, n, r);\n  }, vu.removeEventListener = function (t, e, n, r) {\n    !function t(e, n, r, i, o) {\n      if (Nu(n)) for (var a = 0; a < n.length; a++) {\n        t(e, n[a], r, i, o);\n      } else i = ku(i) ? !!i.capture : !!i, r = Vc(r), e && e[Tc] ? (e = e.c, (n = String(n).toString()) in e.a && -1 < (r = kc(a = e.a[n], r, i, o)) && (Cc(a[r]), Array.prototype.splice.call(a, r, 1), 0 == a.length && (delete e.a[n], e.b--))) : e && (e = Uc(e)) && (n = e.a[n.toString()], e = -1, n && (e = kc(n, r, i, o)), (r = -1 < e ? n[e] : null) && xc(r));\n    }(this, t, e, n, r);\n  }, vu.dispatchEvent = function (t) {\n    var e,\n        n = this.B;\n    if (n) for (e = []; n; n = n.B) {\n      e.push(n);\n    }\n    n = this.J;\n    var r = t.type || t;\n    if (Eu(t)) t = new wc(t, n);else if (t instanceof wc) t.target = t.target || n;else {\n      var i = t;\n      Zu(t = new wc(r, n), i);\n    }\n    if (i = !0, e) for (var o = e.length - 1; 0 <= o; o--) {\n      var a = t.a = e[o];\n      i = jc(a, r, !0, t) && i;\n    }\n    if (i = jc(a = t.a = n, r, !0, t) && i, i = jc(a, r, !1, t) && i, e) for (o = 0; o < e.length; o++) {\n      i = jc(a = t.a = e[o], r, !1, t) && i;\n    }\n    return i;\n  }, vu.G = function () {\n    if (Bc.N.G.call(this), this.c) {\n      var t,\n          e = this.c;\n\n      for (t in e.a) {\n        for (var n = e.a[t], r = 0; r < n.length; r++) {\n          Cc(n[r]);\n        }\n\n        delete e.a[t], e.b--;\n      }\n    }\n\n    this.B = null;\n  }, vu.Aa = function (t, e, n, r) {\n    return this.c.add(String(t), e, !1, n, r);\n  }, vu.Ba = function (t, e, n, r) {\n    return this.c.add(String(t), e, !0, n, r);\n  };\n  var Wc = _u.JSON.stringify;\n\n  function Kc(t, e) {\n    this.c = t, this.f = e, this.b = 0, this.a = null;\n  }\n\n  function Qc() {\n    this.b = this.a = null;\n  }\n\n  Kc.prototype.get = function () {\n    if (0 < this.b) {\n      this.b--;\n      var t = this.a;\n      this.a = t.next, t.next = null;\n    } else t = this.c();\n\n    return t;\n  };\n\n  var Hc,\n      Gc = new Kc(function () {\n    return new zc();\n  }, function (t) {\n    t.reset();\n  });\n\n  function zc() {\n    this.next = this.b = this.a = null;\n  }\n\n  function Yc(t) {\n    _u.setTimeout(function () {\n      throw t;\n    }, 0);\n  }\n\n  function Xc(t, e) {\n    var n;\n    Hc || (n = _u.Promise.resolve(void 0), Hc = function Hc() {\n      n.then(Zc);\n    }), Jc || (Hc(), Jc = !0), $c.add(t, e);\n  }\n\n  Qc.prototype.add = function (t, e) {\n    var n = Gc.get();\n    n.set(t, e), this.b ? this.b.next = n : this.a = n, this.b = n;\n  }, zc.prototype.set = function (t, e) {\n    this.a = t, this.b = e, this.next = null;\n  };\n  var Jc = !(zc.prototype.reset = function () {\n    this.next = this.b = this.a = null;\n  }),\n      $c = new Qc();\n\n  function Zc() {\n    for (var t; r = n = void 0, r = null, (n = $c).a && (r = n.a, n.a = n.a.next, n.a || (n.b = null), r.next = null), t = r;) {\n      try {\n        t.a.call(t.b);\n      } catch (t) {\n        Yc(t);\n      }\n\n      var e = Gc;\n      e.f(t), e.b < 100 && (e.b++, t.next = e.a, e.a = t);\n    }\n\n    var n, r;\n    Jc = !1;\n  }\n\n  function th(t, e) {\n    Bc.call(this), this.b = t || 1, this.a = e || _u, this.f = xu(this.gb, this), this.g = Lu();\n  }\n\n  function eh(t) {\n    t.ba = !1, t.L && (t.a.clearTimeout(t.L), t.L = null);\n  }\n\n  function nh(t, e, n) {\n    if (\"function\" == Cu(t)) n && (t = xu(t, n));else {\n      if (!t || \"function\" != typeof t.handleEvent) throw Error(\"Invalid listener argument\");\n      t = xu(t.handleEvent, t);\n    }\n    return 2147483647 < Number(e) ? -1 : _u.setTimeout(t, e || 0);\n  }\n\n  function rh(t, e, n) {\n    Uu.call(this), this.f = null != n ? xu(t, n) : t, this.c = e, this.b = xu(this.ab, this), this.a = [];\n  }\n\n  function ih(t) {\n    t.U = nh(t.b, t.c), t.f.apply(null, t.a);\n  }\n\n  function oh(t) {\n    Uu.call(this), this.b = t, this.a = {};\n  }\n\n  Fu(th, Bc), (vu = th.prototype).ba = !1, vu.L = null, vu.gb = function () {\n    if (this.ba) {\n      var t = Lu() - this.g;\n      0 < t && t < .8 * this.b ? this.L = this.a.setTimeout(this.f, this.b - t) : (this.L && (this.a.clearTimeout(this.L), this.L = null), this.dispatchEvent(\"tick\"), this.ba && (eh(this), this.start()));\n    }\n  }, vu.start = function () {\n    this.ba = !0, this.L || (this.L = this.a.setTimeout(this.f, this.b), this.g = Lu());\n  }, vu.G = function () {\n    th.N.G.call(this), eh(this), delete this.a;\n  }, Fu(rh, Uu), (vu = rh.prototype).ea = !1, vu.U = null, vu.Ua = function (t) {\n    this.a = arguments, this.U ? this.ea = !0 : ih(this);\n  }, vu.G = function () {\n    rh.N.G.call(this), this.U && (_u.clearTimeout(this.U), this.U = null, this.ea = !1, this.a = []);\n  }, vu.ab = function () {\n    this.U = null, this.ea && (this.ea = !1, ih(this));\n  }, Fu(oh, Uu);\n  var ah = [];\n\n  function sh(t, e, n, r) {\n    Nu(n) || (n && (ah[0] = n.toString()), n = ah);\n\n    for (var i = 0; i < n.length; i++) {\n      var o = Oc(e, n[i], r || t.handleEvent, !1, t.b || t);\n      if (!o) break;\n      t.a[o.key] = o;\n    }\n  }\n\n  function uh(t) {\n    Xu(t.a, function (t, e) {\n      this.a.hasOwnProperty(e) && xc(t);\n    }, t), t.a = {};\n  }\n\n  function ch() {}\n\n  oh.prototype.G = function () {\n    oh.N.G.call(this), uh(this);\n  }, oh.prototype.handleEvent = function () {\n    throw Error(\"EventHandler.handleEvent not implemented\");\n  };\n  var hh = new Bc();\n\n  function lh(t) {\n    wc.call(this, \"serverreachability\", t);\n  }\n\n  function fh(t) {\n    hh.dispatchEvent(new lh(hh, t));\n  }\n\n  function ph(t) {\n    wc.call(this, \"statevent\", t);\n  }\n\n  function dh(t) {\n    hh.dispatchEvent(new ph(hh, t));\n  }\n\n  function yh(t) {\n    wc.call(this, \"timingevent\", t);\n  }\n\n  function mh(t, e) {\n    if (\"function\" != Cu(t)) throw Error(\"Fn must not be null and must be a function\");\n    return _u.setTimeout(function () {\n      t();\n    }, e);\n  }\n\n  Fu(lh, wc), Fu(ph, wc), Fu(yh, wc);\n  var gh = {\n    NO_ERROR: 0,\n    hb: 1,\n    ob: 2,\n    nb: 3,\n    kb: 4,\n    mb: 5,\n    pb: 6,\n    Ma: 7,\n    TIMEOUT: 8,\n    sb: 9\n  },\n      vh = {\n    jb: \"complete\",\n    wb: \"success\",\n    Na: \"error\",\n    Ma: \"abort\",\n    ub: \"ready\",\n    vb: \"readystatechange\",\n    TIMEOUT: \"timeout\",\n    qb: \"incrementaldata\",\n    tb: \"progress\",\n    lb: \"downloadprogress\",\n    xb: \"uploadprogress\"\n  };\n\n  function bh() {}\n\n  function wh(t) {\n    var e;\n    return (e = t.a) || (e = t.a = {}), e;\n  }\n\n  function _h() {}\n\n  bh.prototype.a = null;\n  var Eh,\n      Th = {\n    OPEN: \"a\",\n    ib: \"b\",\n    Na: \"c\",\n    rb: \"d\"\n  };\n\n  function Sh() {\n    wc.call(this, \"d\");\n  }\n\n  function Ih() {\n    wc.call(this, \"c\");\n  }\n\n  function Ch() {}\n\n  function Nh(t, e, n) {\n    this.g = t, this.W = e, this.V = n || 1, this.I = new oh(this), this.O = Ah, t = ac ? 125 : void 0, this.P = new th(t), this.h = null, this.b = !1, this.l = this.D = this.f = this.F = this.v = this.R = this.i = null, this.j = [], this.a = null, this.A = 0, this.c = this.w = null, this.o = -1, this.m = !1, this.J = 0, this.B = null, this.s = this.S = this.H = !1;\n  }\n\n  Fu(Sh, wc), Fu(Ih, wc), Fu(Ch, bh), Eh = new Ch();\n  var Ah = 45e3,\n      kh = {},\n      Dh = {};\n\n  function Rh(t, e, n) {\n    t.F = 1, t.f = rl(Yh(e)), t.l = n, t.H = !0, Ph(t, null);\n  }\n\n  function Oh(t, e, n, r) {\n    t.F = 1, t.f = rl(Yh(e)), t.l = null, t.H = n, Ph(t, r);\n  }\n\n  function Ph(t, e) {\n    t.v = Lu(), Lh(t), t.D = Yh(t.f), nl(t.D, \"t\", t.V), t.A = 0, t.a = t.g.$(t.g.Y() ? e : null), 0 < t.J && (t.B = new rh(xu(t.Ka, t, t.a), t.J)), sh(t.I, t.a, \"readystatechange\", t.eb), e = t.h ? Ju(t.h) : {}, t.l ? (t.w || (t.w = \"POST\"), e[\"Content-Type\"] = \"application/x-www-form-urlencoded\", t.a.ca(t.D, t.w, t.l, e)) : (t.w = \"GET\", t.a.ca(t.D, t.w, null, e)), fh(1);\n  }\n\n  function xh(t, e, n) {\n    for (var r = !0; !t.m && t.A < n.length;) {\n      var i = Mh(t, n);\n\n      if (i == Dh) {\n        4 == e && (t.c = 4, dh(14), r = !1);\n        break;\n      }\n\n      if (i == kh) {\n        t.c = 4, dh(15), r = !1;\n        break;\n      }\n\n      Bh(t, i);\n    }\n\n    4 == e && 0 == n.length && (t.c = 1, dh(16), r = !1), t.b = t.b && r, r || (Vh(t), qh(t));\n  }\n\n  function Mh(t, e) {\n    var n = t.A,\n        r = e.indexOf(\"\\n\", n);\n    return -1 == r ? Dh : (n = Number(e.substring(n, r)), isNaN(n) ? kh : (r += 1) + n > e.length ? Dh : (e = e.substr(r, n), t.A = r + n, e));\n  }\n\n  function Lh(t) {\n    t.R = Lu() + t.O, Fh(t, t.O);\n  }\n\n  function Fh(t, e) {\n    if (null != t.i) throw Error(\"WatchDog timer not null\");\n    t.i = mh(xu(t.bb, t), e);\n  }\n\n  function Uh(t) {\n    t.i && (_u.clearTimeout(t.i), t.i = null);\n  }\n\n  function qh(t) {\n    t.g.Da() || t.m || t.g.na(t);\n  }\n\n  function Vh(t) {\n    Uh(t);\n    var e = t.B;\n    e && \"function\" == typeof e.la && e.la(), t.B = null, eh(t.P), uh(t.I), t.a && (e = t.a, t.a = null, e.abort(), e.la());\n  }\n\n  function Bh(t, e) {\n    try {\n      t.g.Ga(t, e), fh(4);\n    } catch (t) {}\n  }\n\n  function jh(t, e) {\n    if (t.forEach && \"function\" == typeof t.forEach) t.forEach(e, void 0);else if (Au(t) || Eu(t)) Vu(t, e, void 0);else {\n      if (t.K && \"function\" == typeof t.K) var n = t.K();else if (t.C && \"function\" == typeof t.C) n = void 0;else if (Au(t) || Eu(t)) {\n        n = [];\n\n        for (var r = t.length, i = 0; i < r; i++) {\n          n.push(i);\n        }\n      } else for (i in n = [], r = 0, t) {\n        n[r++] = i;\n      }\n\n      i = (r = function (t) {\n        if (t.C && \"function\" == typeof t.C) return t.C();\n        if (Eu(t)) return t.split(\"\");\n\n        if (Au(t)) {\n          for (var e = [], n = t.length, r = 0; r < n; r++) {\n            e.push(t[r]);\n          }\n\n          return e;\n        }\n\n        for (r in e = [], n = 0, t) {\n          e[n++] = t[r];\n        }\n\n        return e;\n      }(t)).length;\n\n      for (var o = 0; o < i; o++) {\n        e.call(void 0, r[o], n && n[o], t);\n      }\n    }\n  }\n\n  function Wh(t, e) {\n    this.b = {}, this.a = [], this.c = 0;\n    var n = arguments.length;\n\n    if (1 < n) {\n      if (n % 2) throw Error(\"Uneven number of arguments\");\n\n      for (var r = 0; r < n; r += 2) {\n        this.set(arguments[r], arguments[r + 1]);\n      }\n    } else if (t) if (t instanceof Wh) for (n = t.K(), r = 0; r < n.length; r++) {\n      this.set(n[r], t.get(n[r]));\n    } else for (r in t) {\n      this.set(r, t[r]);\n    }\n  }\n\n  function Kh(t, e) {\n    Hh(t.b, e) && (delete t.b[e], t.c--, t.a.length > 2 * t.c && Qh(t));\n  }\n\n  function Qh(t) {\n    if (t.c != t.a.length) {\n      for (var e = 0, n = 0; e < t.a.length;) {\n        var r = t.a[e];\n        Hh(t.b, r) && (t.a[n++] = r), e++;\n      }\n\n      t.a.length = n;\n    }\n\n    if (t.c != t.a.length) {\n      var i = {};\n\n      for (n = e = 0; e < t.a.length;) {\n        Hh(i, r = t.a[e]) || (i[t.a[n++] = r] = 1), e++;\n      }\n\n      t.a.length = n;\n    }\n  }\n\n  function Hh(t, e) {\n    return Object.prototype.hasOwnProperty.call(t, e);\n  }\n\n  (vu = Nh.prototype).setTimeout = function (t) {\n    this.O = t;\n  }, vu.eb = function (t) {\n    t = t.target;\n    var e = this.B;\n    e && 3 == Yl(t) ? e.Ua() : this.Ka(t);\n  }, vu.Ka = function (t) {\n    try {\n      if (t == this.a) t: {\n        var e = Yl(this.a),\n            n = this.a.ya(),\n            r = this.a.T();\n\n        if (!(e < 3 || 3 == e && !ac && !this.a.aa())) {\n          this.m || 4 != e || 7 == n || fh(8 == n || r <= 0 ? 3 : 2), Uh(this);\n          var i = this.a.T();\n          this.o = i;\n          var o = this.a.aa();\n\n          if (this.b = 200 == i) {\n            if (this.S && !this.s) {\n              e: {\n                if (this.a) {\n                  var a = Xl(this.a, \"X-HTTP-Initial-Response\");\n\n                  if (a && !Wu(a)) {\n                    var s = a;\n                    break e;\n                  }\n                }\n\n                s = null;\n              }\n\n              if (!s) {\n                this.b = !1, this.c = 3, dh(12), Vh(this), qh(this);\n                break t;\n              }\n\n              this.s = !0, Bh(this, s);\n            }\n\n            this.H ? (xh(this, e, o), ac && this.b && 3 == e && (sh(this.I, this.P, \"tick\", this.cb), this.P.start())) : Bh(this, o), 4 == e && Vh(this), this.b && !this.m && (4 == e ? this.g.na(this) : (this.b = !1, Lh(this)));\n          } else 400 == i && 0 < o.indexOf(\"Unknown SID\") ? (this.c = 3, dh(12)) : (this.c = 0, dh(13)), Vh(this), qh(this);\n        }\n      }\n    } catch (t) {}\n  }, vu.cb = function () {\n    if (this.a) {\n      var t = Yl(this.a),\n          e = this.a.aa();\n      this.A < e.length && (Uh(this), xh(this, t, e), this.b && 4 != t && Lh(this));\n    }\n  }, vu.cancel = function () {\n    this.m = !0, Vh(this);\n  }, vu.bb = function () {\n    this.i = null;\n    var t = Lu();\n    0 <= t - this.R ? (2 != this.F && (fh(3), dh(17)), Vh(this), this.c = 2, qh(this)) : Fh(this, this.R - t);\n  }, (vu = Wh.prototype).C = function () {\n    Qh(this);\n\n    for (var t = [], e = 0; e < this.a.length; e++) {\n      t.push(this.b[this.a[e]]);\n    }\n\n    return t;\n  }, vu.K = function () {\n    return Qh(this), this.a.concat();\n  }, vu.get = function (t, e) {\n    return Hh(this.b, t) ? this.b[t] : e;\n  }, vu.set = function (t, e) {\n    Hh(this.b, t) || (this.c++, this.a.push(t)), this.b[t] = e;\n  }, vu.forEach = function (t, e) {\n    for (var n = this.K(), r = 0; r < n.length; r++) {\n      var i = n[r],\n          o = this.get(i);\n      t.call(e, o, i, this);\n    }\n  };\n  var Gh = /^(?:([^:/?#.]+):)?(?:\\/\\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$/;\n\n  function zh(t, e) {\n    var n;\n    this.b = this.j = this.f = \"\", this.i = null, this.g = this.a = \"\", this.h = !1, t instanceof zh ? (this.h = void 0 !== e ? e : t.h, Xh(this, t.f), this.j = t.j, $h(this, t.b), Zh(this, t.i), this.a = t.a, tl(this, gl(t.c)), this.g = t.g) : t && (n = String(t).match(Gh)) ? (this.h = !!e, Xh(this, n[1] || \"\", !0), this.j = il(n[2] || \"\"), $h(this, n[3] || \"\", !0), Zh(this, n[4]), this.a = il(n[5] || \"\", !0), tl(this, n[6] || \"\", !0), this.g = il(n[7] || \"\")) : (this.h = !!e, this.c = new fl(null, this.h));\n  }\n\n  function Yh(t) {\n    return new zh(t);\n  }\n\n  function Xh(t, e, n) {\n    t.f = n ? il(e, !0) : e, t.f && (t.f = t.f.replace(/:$/, \"\"));\n  }\n\n  function $h(t, e, n) {\n    t.b = n ? il(e, !0) : e;\n  }\n\n  function Zh(t, e) {\n    if (e) {\n      if (e = Number(e), isNaN(e) || e < 0) throw Error(\"Bad port number \" + e);\n      t.i = e;\n    } else t.i = null;\n  }\n\n  function tl(t, e, n) {\n    var r, i;\n    e instanceof fl ? (t.c = e, r = t.c, (i = t.h) && !r.f && (pl(r), r.c = null, r.a.forEach(function (t, e) {\n      var n = e.toLowerCase();\n      e != n && (dl(this, e), ml(this, n, t));\n    }, r)), r.f = i) : (n || (e = ol(e, hl)), t.c = new fl(e, t.h));\n  }\n\n  function el(t, e, n) {\n    t.c.set(e, n);\n  }\n\n  function nl(t, e, n) {\n    Nu(n) || (n = [String(n)]), ml(t.c, e, n);\n  }\n\n  function rl(t) {\n    return el(t, \"zx\", Math.floor(2147483648 * Math.random()).toString(36) + Math.abs(Math.floor(2147483648 * Math.random()) ^ Lu()).toString(36)), t;\n  }\n\n  function il(t, e) {\n    return t ? e ? decodeURI(t.replace(/%25/g, \"%2525\")) : decodeURIComponent(t) : \"\";\n  }\n\n  function ol(t, e, n) {\n    return Eu(t) ? (t = encodeURI(t).replace(e, al), n && (t = t.replace(/%25([0-9a-fA-F]{2})/g, \"%$1\")), t) : null;\n  }\n\n  function al(t) {\n    return \"%\" + ((t = t.charCodeAt(0)) >> 4 & 15).toString(16) + (15 & t).toString(16);\n  }\n\n  zh.prototype.toString = function () {\n    var t = [],\n        e = this.f;\n    e && t.push(ol(e, sl, !0), \":\");\n    var n = this.b;\n    return (n || \"file\" == e) && (t.push(\"//\"), (e = this.j) && t.push(ol(e, sl, !0), \"@\"), t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g, \"%$1\")), null != (n = this.i) && t.push(\":\", String(n))), (n = this.a) && (this.b && \"/\" != n.charAt(0) && t.push(\"/\"), t.push(ol(n, \"/\" == n.charAt(0) ? cl : ul, !0))), (n = this.c.toString()) && t.push(\"?\", n), (n = this.g) && t.push(\"#\", ol(n, ll)), t.join(\"\");\n  }, zh.prototype.resolve = function (t) {\n    var e = Yh(this),\n        n = !!t.f;\n    n ? Xh(e, t.f) : n = !!t.j, n ? e.j = t.j : n = !!t.b, n ? $h(e, t.b) : n = null != t.i;\n    var r = t.a;\n    if (n) Zh(e, t.i);else if (n = !!t.a) {\n      if (\"/\" != r.charAt(0)) if (this.b && !this.a) r = \"/\" + r;else {\n        var i = e.a.lastIndexOf(\"/\");\n        -1 != i && (r = e.a.substr(0, i + 1) + r);\n      }\n      if (\"..\" == (i = r) || \".\" == i) r = \"\";else if (Hu(i, \"./\") || Hu(i, \"/.\")) {\n        r = 0 == i.lastIndexOf(\"/\", 0), i = i.split(\"/\");\n\n        for (var o = [], a = 0; a < i.length;) {\n          var s = i[a++];\n          \".\" == s ? r && a == i.length && o.push(\"\") : \"..\" == s ? ((1 < o.length || 1 == o.length && \"\" != o[0]) && o.pop(), r && a == i.length && o.push(\"\")) : (o.push(s), r = !0);\n        }\n\n        r = o.join(\"/\");\n      } else r = i;\n    }\n    return n ? e.a = r : n = \"\" !== t.c.toString(), n ? tl(e, gl(t.c)) : n = !!t.g, n && (e.g = t.g), e;\n  };\n  var sl = /[#\\/\\?@]/g,\n      ul = /[#\\?:]/g,\n      cl = /[#\\?]/g,\n      hl = /[#\\?@]/g,\n      ll = /#/g;\n\n  function fl(t, e) {\n    this.b = this.a = null, this.c = t || null, this.f = !!e;\n  }\n\n  function pl(n) {\n    n.a || (n.a = new Wh(), n.b = 0, n.c && function (t, e) {\n      if (t) {\n        t = t.split(\"&\");\n\n        for (var n = 0; n < t.length; n++) {\n          var r = t[n].indexOf(\"=\"),\n              i = null;\n\n          if (0 <= r) {\n            var o = t[n].substring(0, r);\n            i = t[n].substring(r + 1);\n          } else o = t[n];\n\n          e(o, i ? decodeURIComponent(i.replace(/\\+/g, \" \")) : \"\");\n        }\n      }\n    }(n.c, function (t, e) {\n      n.add(decodeURIComponent(t.replace(/\\+/g, \" \")), e);\n    }));\n  }\n\n  function dl(t, e) {\n    pl(t), e = vl(t, e), Hh(t.a.b, e) && (t.c = null, t.b -= t.a.get(e).length, Kh(t.a, e));\n  }\n\n  function yl(t, e) {\n    return pl(t), e = vl(t, e), Hh(t.a.b, e);\n  }\n\n  function ml(t, e, n) {\n    dl(t, e), 0 < n.length && (t.c = null, t.a.set(vl(t, e), ju(n)), t.b += n.length);\n  }\n\n  function gl(t) {\n    var e = new fl();\n    return e.c = t.c, t.a && (e.a = new Wh(t.a), e.b = t.b), e;\n  }\n\n  function vl(t, e) {\n    return e = String(e), t.f && (e = e.toLowerCase()), e;\n  }\n\n  function bl(t) {\n    this.a = t, this.b = this.h = null, this.g = !1, this.i = null, this.c = -1, this.l = this.f = null;\n  }\n\n  function wl(t) {\n    var e = t.a.F.a;\n    if (null != e) dh(4), e ? (dh(10), cf(t.a, t, !1)) : (dh(11), cf(t.a, t, !0));else {\n      t.b = new Nh(t, void 0, void 0), t.b.h = t.h, e = df(e = t.a, e.Y() ? t.f : null, t.i), dh(4), nl(e, \"TYPE\", \"xmlhttp\");\n      var n = t.a.j,\n          r = t.a.I;\n      n && r && el(e, n, r), Oh(t.b, e, !1, t.f);\n    }\n  }\n\n  function _l() {\n    this.a = this.b = null;\n  }\n\n  function El() {\n    this.a = new Wh();\n  }\n\n  function Tl(t) {\n    var e = typeof t;\n    return \"object\" == e && t || \"function\" == e ? \"o\" + (t[Du] || (t[Du] = ++Ru)) : e.charAt(0) + t;\n  }\n\n  function Sl(t, e) {\n    this.b = t, this.a = e;\n  }\n\n  function Il(t) {\n    this.g = t || Cl, t = _u.PerformanceNavigationTiming ? 0 < (t = _u.performance.getEntriesByType(\"navigation\")).length && (\"hq\" == t[0].nextHopProtocol || \"h2\" == t[0].nextHopProtocol) : !!(_u.ka && _u.ka.Ea && _u.ka.Ea() && _u.ka.Ea().zb), this.f = t ? this.g : 1, this.a = null, 1 < this.f && (this.a = new El()), this.b = null, this.c = [];\n  }\n\n  (vu = fl.prototype).add = function (t, e) {\n    pl(this), this.c = null, t = vl(this, t);\n    var n = this.a.get(t);\n    return n || this.a.set(t, n = []), n.push(e), this.b += 1, this;\n  }, vu.forEach = function (n, r) {\n    pl(this), this.a.forEach(function (t, e) {\n      Vu(t, function (t) {\n        n.call(r, t, e, this);\n      }, this);\n    }, this);\n  }, vu.K = function () {\n    pl(this);\n\n    for (var t = this.a.C(), e = this.a.K(), n = [], r = 0; r < e.length; r++) {\n      for (var i = t[r], o = 0; o < i.length; o++) {\n        n.push(e[r]);\n      }\n    }\n\n    return n;\n  }, vu.C = function (t) {\n    pl(this);\n    var e = [];\n    if (Eu(t)) yl(this, t) && (e = Bu(e, this.a.get(vl(this, t))));else {\n      t = this.a.C();\n\n      for (var n = 0; n < t.length; n++) {\n        e = Bu(e, t[n]);\n      }\n    }\n    return e;\n  }, vu.set = function (t, e) {\n    return pl(this), this.c = null, yl(this, t = vl(this, t)) && (this.b -= this.a.get(t).length), this.a.set(t, [e]), this.b += 1, this;\n  }, vu.get = function (t, e) {\n    return t && 0 < (t = this.C(t)).length ? String(t[0]) : e;\n  }, vu.toString = function () {\n    if (this.c) return this.c;\n    if (!this.a) return \"\";\n\n    for (var t = [], e = this.a.K(), n = 0; n < e.length; n++) {\n      var r = e[n],\n          i = encodeURIComponent(String(r));\n      r = this.C(r);\n\n      for (var o = 0; o < r.length; o++) {\n        var a = i;\n        \"\" !== r[o] && (a += \"=\" + encodeURIComponent(String(r[o]))), t.push(a);\n      }\n    }\n\n    return this.c = t.join(\"&\");\n  }, Fu(function () {}, function () {}), (vu = bl.prototype).M = null, vu.$ = function (t) {\n    return this.a.$(t);\n  }, vu.abort = function () {\n    this.b && (this.b.cancel(), this.b = null), this.c = -1;\n  }, vu.Da = function () {\n    return !1;\n  }, vu.Ga = function (t, e) {\n    if (this.c = t.o, 0 == this.M) {\n      if (!this.a.o && (t = t.a)) {\n        var n = Xl(t, \"X-Client-Wire-Protocol\");\n        this.l = n || null, this.a.j && (t = Xl(t, \"X-HTTP-Session-Id\")) && (this.a.I = t);\n      }\n\n      if (e) {\n        try {\n          var r = this.a.ja.a.parse(e);\n        } catch (t) {\n          return (e = this.a).m = this.c, void ff(e, 2);\n        }\n\n        this.f = r[0];\n      } else (e = this.a).m = this.c, ff(e, 2);\n    } else 1 == this.M && (this.g ? dh(6) : \"11111\" == e ? (dh(5), this.g = !0, (!ic || 10 <= Number(pc)) && (this.c = 200, this.b.cancel(), dh(11), cf(this.a, this, !0))) : (dh(7), this.g = !1));\n  }, vu.na = function () {\n    if (this.c = this.b.o, this.b.b) 0 == this.M ? (this.M = 1, wl(this)) : 1 == this.M && (this.g ? (dh(11), cf(this.a, this, !0)) : (dh(10), cf(this.a, this, !1)));else {\n      0 == this.M ? dh(8) : 1 == this.M && dh(9);\n      var t = this.a;\n      t.m = this.c, ff(t, 2);\n    }\n  }, vu.Y = function () {\n    return this.a.Y();\n  }, vu.ma = function () {\n    return this.a.ma();\n  }, El.prototype.add = function (t) {\n    this.a.set(Tl(t), t);\n  }, El.prototype.C = function () {\n    return this.a.C();\n  };\n  var Cl = 10;\n\n  function Nl(t, e) {\n    !t.a && (Hu(e, \"spdy\") || Hu(e, \"quic\") || Hu(e, \"h2\")) && (t.f = t.g, t.a = new El(), t.b && (Rl(t, t.b), t.b = null));\n  }\n\n  function Al(t) {\n    return !!t.b || !!t.a && t.a.a.c >= t.f;\n  }\n\n  function kl(t) {\n    return t.b ? 1 : t.a ? t.a.a.c : 0;\n  }\n\n  function Dl(t, e) {\n    return t = t.b ? t.b == e : !!t.a && (e = Tl(e), Hh(t.a.a.b, e));\n  }\n\n  function Rl(t, e) {\n    t.a ? t.a.add(e) : t.b = e;\n  }\n\n  function Ol(t, e) {\n    var n;\n    t.b && t.b == e ? t.b = null : ((n = t.a) && (n = Tl(e), n = Hh(t.a.a.b, n)), n && Kh(t.a.a, Tl(e)));\n  }\n\n  function Pl(t) {\n    if (null != t.b) return t.c.concat(t.b.j);\n    if (null == t.a || 0 == t.a.a.c) return ju(t.c);\n    var e = t.c;\n    return Vu(t.a.C(), function (t) {\n      e = e.concat(t.j);\n    }), e;\n  }\n\n  function xl() {}\n\n  function Ml() {\n    this.a = new xl();\n  }\n\n  function Ll(t, r, e) {\n    var i = e || \"\";\n\n    try {\n      jh(t, function (t, e) {\n        var n = t;\n        ku(t) && (n = Wc(t)), r.push(i + e + \"=\" + encodeURIComponent(n));\n      });\n    } catch (t) {\n      throw r.push(i + \"type=\" + encodeURIComponent(\"_badmap\")), t;\n    }\n  }\n\n  function Fl(t, e, n, r, i) {\n    try {\n      e.onload = null, e.onerror = null, e.onabort = null, e.ontimeout = null, i(r);\n    } catch (t) {}\n  }\n\n  Il.prototype.cancel = function () {\n    var t;\n    this.c = Pl(this), this.b ? (this.b.cancel(), this.b = null) : this.a && 0 != this.a.a.c && (Vu(this.a.C(), function (t) {\n      t.cancel();\n    }), (t = this.a.a).b = {}, t.a.length = 0, t.c = 0);\n  }, xl.prototype.stringify = function (t) {\n    return _u.JSON.stringify(t, void 0);\n  }, xl.prototype.parse = function (t) {\n    return _u.JSON.parse(t, void 0);\n  };\n  var Ul = _u.JSON.parse;\n\n  function ql(t) {\n    Bc.call(this), this.headers = new Wh(), this.H = t || null, this.b = !1, this.s = this.a = null, this.A = \"\", this.h = 0, this.f = \"\", this.g = this.w = this.l = this.v = !1, this.o = 0, this.m = null, this.I = Vl, this.D = this.F = !1;\n  }\n\n  Fu(ql, Bc);\n  var Vl = \"\",\n      Bl = /^https?$/i,\n      jl = [\"POST\", \"PUT\"];\n\n  function Wl(t) {\n    return \"content-type\" == t.toLowerCase();\n  }\n\n  function Kl(t, e) {\n    t.b = !1, t.a && (t.g = !0, t.a.abort(), t.g = !1), t.f = e, t.h = 5, Ql(t), Gl(t);\n  }\n\n  function Ql(t) {\n    t.v || (t.v = !0, t.dispatchEvent(\"complete\"), t.dispatchEvent(\"error\"));\n  }\n\n  function Hl(t) {\n    if (t.b && void 0 !== wu && (!t.s[1] || 4 != Yl(t) || 2 != t.T())) if (t.l && 4 == Yl(t)) nh(t.Fa, 0, t);else if (t.dispatchEvent(\"readystatechange\"), 4 == Yl(t)) {\n      t.b = !1;\n\n      try {\n        var e,\n            n = t.T();\n\n        t: switch (n) {\n          case 200:\n          case 201:\n          case 202:\n          case 204:\n          case 206:\n          case 304:\n          case 1223:\n            var r = !0;\n            break t;\n\n          default:\n            r = !1;\n        }\n\n        if (!(e = r)) {\n          var i;\n\n          if (i = 0 === n) {\n            var o = String(t.A).match(Gh)[1] || null;\n\n            if (!o && _u.self && _u.self.location) {\n              var a = _u.self.location.protocol;\n              o = a.substr(0, a.length - 1);\n            }\n\n            i = !Bl.test(o ? o.toLowerCase() : \"\");\n          }\n\n          e = i;\n        }\n\n        e ? (t.dispatchEvent(\"complete\"), t.dispatchEvent(\"success\")) : (t.h = 6, t.f = t.za() + \" [\" + t.T() + \"]\", Ql(t));\n      } finally {\n        Gl(t);\n      }\n    }\n  }\n\n  function Gl(t, e) {\n    if (t.a) {\n      zl(t);\n      var n = t.a,\n          r = t.s[0] ? Iu : null;\n      t.a = null, t.s = null, e || t.dispatchEvent(\"ready\");\n\n      try {\n        n.onreadystatechange = r;\n      } catch (t) {}\n    }\n  }\n\n  function zl(t) {\n    t.a && t.D && (t.a.ontimeout = null), t.m && (_u.clearTimeout(t.m), t.m = null);\n  }\n\n  function Yl(t) {\n    return t.a ? t.a.readyState : 0;\n  }\n\n  function Xl(t, e) {\n    return t.a ? t.a.getResponseHeader(e) : null;\n  }\n\n  function Jl(t, e, n) {\n    t: {\n      for (r in n) {\n        var r = !1;\n        break t;\n      }\n\n      r = !0;\n    }\n\n    if (r) return t;\n    var i;\n\n    if (i = \"\", Xu(n, function (t, e) {\n      i += e, i += \":\", i += t, i += \"\\r\\n\";\n    }), n = i, Eu(t)) {\n      if (e = encodeURIComponent(String(e)), e += n = null != n ? \"=\" + encodeURIComponent(String(n)) : \"\") {\n        if ((n = t.indexOf(\"#\")) < 0 && (n = t.length), (r = t.indexOf(\"?\")) < 0 || n < r) {\n          r = n;\n          var o = \"\";\n        } else o = t.substring(r + 1, n);\n\n        n = (t = [t.substr(0, r), o, t.substr(n)])[1], t[1] = e ? n ? n + \"&\" + e : e : n, t = t[0] + (t[1] ? \"?\" + t[1] : \"\") + t[2];\n      }\n\n      return t;\n    }\n\n    return el(t, e, n), t;\n  }\n\n  function $l(t) {\n    this.f = [], this.F = new _l(), this.ga = this.pa = this.B = this.ha = this.a = this.I = this.j = this.V = this.g = this.J = this.i = null, this.Ra = this.P = 0, this.Pa = !!Su(\"internalChannelParams.failFast\", t), this.ia = this.w = this.s = this.l = this.h = this.c = null, this.oa = !0, this.m = this.ra = this.O = -1, this.S = this.v = this.A = 0, this.Oa = Su(\"internalChannelParams.baseRetryDelayMs\", t) || 5e3, this.Sa = Su(\"internalChannelParams.retryDelaySeedMs\", t) || 1e4, this.Qa = Su(\"internalChannelParams.forwardChannelMaxRetries\", t) || 2, this.qa = Su(\"internalChannelParams.forwardChannelRequestTimeoutMs\", t) || 2e4, this.La = t && t.Ab || void 0, this.D = void 0, this.R = t && t.supportsCrossDomainXhr || !1, this.H = \"\", this.b = new Il(t && t.concurrentRequestLimit), this.ja = new Ml(), this.o = !t || void 0 === t.backgroundChannelTest || t.backgroundChannelTest, (this.W = t && t.fastHandshake || !1) && !this.o && (this.o = !0), t && t.forceLongPolling && (this.oa = !1), this.fa = void 0;\n  }\n\n  function Zl(t) {\n    if (tf(t), 3 == t.u) {\n      var e = t.P++,\n          n = Yh(t.B);\n      el(n, \"SID\", t.H), el(n, \"RID\", e), el(n, \"TYPE\", \"terminate\"), of(t, n), (e = new Nh(t, e, void 0)).F = 2, e.f = rl(Yh(n)), n = !1, _u.navigator && _u.navigator.sendBeacon && (n = _u.navigator.sendBeacon(e.f.toString(), \"\")), !n && _u.Image && (new Image().src = e.f, n = !0), n || (e.a = e.g.$(null), e.a.ca(e.f)), e.v = Lu(), Lh(e);\n    }\n\n    pf(t);\n  }\n\n  function tf(t) {\n    t.w && (t.w.abort(), t.w = null), t.a && (t.a.cancel(), t.a = null), t.l && (_u.clearTimeout(t.l), t.l = null), hf(t), t.b.cancel(), t.h && (Tu(t.h) && _u.clearTimeout(t.h), t.h = null);\n  }\n\n  function ef(t, e) {\n    t.f.push(new Sl(t.Ra++, e)), 3 == t.u && nf(t);\n  }\n\n  function nf(t) {\n    Al(t.b) || t.h || (t.h = !0, Xc(t.Ia, t), t.A = 0);\n  }\n\n  function rf(t, e) {\n    var n;\n    n = e ? e.W : t.P++;\n    var r = Yh(t.B);\n    el(r, \"SID\", t.H), el(r, \"RID\", n), el(r, \"AID\", t.O), of(t, r), t.g && t.i && Jl(r, t.g, t.i), n = new Nh(t, n, t.A + 1), null === t.g && (n.h = t.i), e && (t.f = e.j.concat(t.f)), e = af(t, n, 1e3), n.setTimeout(Math.round(.5 * t.qa) + Math.round(.5 * t.qa * Math.random())), Rl(t.b, n), Rh(n, r, e);\n  }\n\n  function of(t, n) {\n    t.c && jh({}, function (t, e) {\n      el(n, e, t);\n    });\n  }\n\n  function af(t, e, n) {\n    n = Math.min(t.f.length, n);\n    var r = t.c ? xu(t.c.Ta, t.c, t) : null;\n\n    t: for (var i = t.f, o = -1;;) {\n      var a = [\"count=\" + n];\n      -1 == o ? 0 < n ? (o = i[0].b, a.push(\"ofs=\" + o)) : o = 0 : a.push(\"ofs=\" + o);\n\n      for (var s = !0, u = 0; u < n; u++) {\n        var c = i[u].b,\n            h = i[u].a;\n        if ((c -= o) < 0) o = Math.max(0, i[u].b - 100), s = !1;else try {\n          Ll(h, a, \"req\" + c + \"_\");\n        } catch (t) {\n          r && r(h);\n        }\n      }\n\n      if (s) {\n        r = a.join(\"&\");\n        break t;\n      }\n    }\n\n    return t = t.f.splice(0, n), e.j = t, r;\n  }\n\n  function sf(t) {\n    t.a || t.l || (t.S = 1, Xc(t.Ha, t), t.v = 0);\n  }\n\n  function uf(t) {\n    return !(t.a || t.l || 3 <= t.v) && (t.S++, t.l = mh(xu(t.Ha, t), lf(t, t.v)), t.v++, !0);\n  }\n\n  function cf(t, e, n) {\n    var r = e.l;\n    r && Nl(t.b, r), t.ia = t.oa && n, t.m = e.c, t.B = df(t, null, t.ha), nf(t);\n  }\n\n  function hf(t) {\n    null != t.s && (_u.clearTimeout(t.s), t.s = null);\n  }\n\n  function lf(t, e) {\n    var n = t.Oa + Math.floor(Math.random() * t.Sa);\n    return t.ma() || (n *= 2), n * e;\n  }\n\n  function ff(t, e) {\n    if (2 == e) {\n      var n = null;\n      t.c && (n = null);\n      var r = xu(t.fb, t);\n      n || (n = new zh(\"//www.google.com/images/cleardot.gif\"), _u.location && \"http\" == _u.location.protocol || Xh(n, \"https\"), rl(n)), function (t, e) {\n        var n = new ch();\n\n        if (_u.Image) {\n          var r = new Image();\n          r.onload = Mu(Fl, n, r, \"TestLoadImage: loaded\", !0, e), r.onerror = Mu(Fl, n, r, \"TestLoadImage: error\", !1, e), r.onabort = Mu(Fl, n, r, \"TestLoadImage: abort\", !1, e), r.ontimeout = Mu(Fl, n, r, \"TestLoadImage: timeout\", !1, e), _u.setTimeout(function () {\n            r.ontimeout && r.ontimeout();\n          }, 1e4), r.src = t;\n        } else e(!1);\n      }(n.toString(), r);\n    } else dh(2);\n\n    t.u = 0, t.c && t.c.ta(e), pf(t), tf(t);\n  }\n\n  function pf(t) {\n    t.u = 0, t.m = -1, t.c && (0 == Pl(t.b).length && 0 == t.f.length || (t.b.c.length = 0, ju(t.f), t.f.length = 0), t.c.sa());\n  }\n\n  function df(t, e, n) {\n    var r,\n        i,\n        o,\n        a,\n        s,\n        u,\n        c = (r = n) instanceof zh ? Yh(r) : new zh(r, void 0);\n    if (\"\" != c.b) e && $h(c, e + \".\" + c.b), Zh(c, c.i);else {\n      var h,\n          l = _u.location;\n      h = e ? e + \".\" + l.hostname : l.hostname, i = l.protocol, o = h, a = +l.port, s = n, u = new zh(null, void 0), i && Xh(u, i), o && $h(u, o), a && Zh(u, a), s && (u.a = s), c = u;\n    }\n    return t.V && Xu(t.V, function (t, e) {\n      el(c, e, t);\n    }), e = t.j, n = t.I, e && n && el(c, e, n), el(c, \"VER\", t.wa), of(t, c), c;\n  }\n\n  function yf() {}\n\n  function mf() {\n    if (ic && !(10 <= Number(pc))) throw Error(\"Environmental error: no available transport.\");\n  }\n\n  function gf(t, e) {\n    Bc.call(this), this.a = new $l(e), this.g = t, this.m = e && e.testUrl ? e.testUrl : function (t) {\n      for (var e = t, n = 1; n < arguments.length; n++) {\n        var r,\n            i = arguments[n];\n        0 == i.lastIndexOf(\"/\", 0) ? e = i : ((r = \"\" == e) || (r = 0 <= (r = e.length - 1) && e.indexOf(\"/\", r) == r), e += r ? i : \"/\" + i);\n      }\n\n      return e;\n    }(this.g, \"test\"), this.b = e && e.messageUrlParams || null, t = e && e.messageHeaders || null, e && e.clientProtocolHeaderRequired && (t ? t[\"X-Client-Protocol\"] = \"webchannel\" : t = {\n      \"X-Client-Protocol\": \"webchannel\"\n    }), this.a.i = t, t = e && e.initMessageHeaders || null, e && e.messageContentType && (t ? t[\"X-WebChannel-Content-Type\"] = e.messageContentType : t = {\n      \"X-WebChannel-Content-Type\": e.messageContentType\n    }), e && e.xa && (t ? t[\"X-WebChannel-Client-Profile\"] = e.xa : t = {\n      \"X-WebChannel-Client-Profile\": e.xa\n    }), this.a.J = t, (t = e && e.httpHeadersOverwriteParam) && !Wu(t) && (this.a.g = t), this.l = e && e.supportsCrossDomainXhr || !1, this.h = e && e.sendRawJson || !1, (e = e && e.httpSessionIdParam) && !Wu(e) && (this.a.j = e, null !== (t = this.b) && e in t && e in (t = this.b) && delete t[e]), this.f = new wf(this);\n  }\n\n  function vf(t) {\n    Sh.call(this);\n    var e = t.__sm__;\n\n    if (e) {\n      t: {\n        for (var n in e) {\n          t = n;\n          break t;\n        }\n\n        t = void 0;\n      }\n\n      (this.c = t) ? (t = this.c, this.data = null !== e && t in e ? e[t] : void 0) : this.data = e;\n    } else this.data = t;\n  }\n\n  function bf() {\n    Ih.call(this), this.status = 1;\n  }\n\n  function wf(t) {\n    this.a = t;\n  }\n\n  (vu = ql.prototype).ca = function (t, e, n, r) {\n    if (this.a) throw Error(\"[goog.net.XhrIo] Object is active with another request=\" + this.A + \"; newUri=\" + t);\n    e = e ? e.toUpperCase() : \"GET\", this.A = t, this.f = \"\", this.h = 0, this.v = !1, this.b = !0, this.a = new XMLHttpRequest(), this.s = this.H ? wh(this.H) : wh(Eh), this.a.onreadystatechange = xu(this.Fa, this);\n\n    try {\n      this.w = !0, this.a.open(e, String(t), !0), this.w = !1;\n    } catch (t) {\n      return void Kl(this, t);\n    }\n\n    t = n || \"\";\n    var i,\n        o = new Wh(this.headers);\n    r && jh(r, function (t, e) {\n      o.set(e, t);\n    }), r = function (t) {\n      t: {\n        for (var e = Wl, n = t.length, r = Eu(t) ? t.split(\"\") : t, i = 0; i < n; i++) {\n          if (i in r && e.call(void 0, r[i], i, t)) {\n            e = i;\n            break t;\n          }\n        }\n\n        e = -1;\n      }\n\n      return e < 0 ? null : Eu(t) ? t.charAt(e) : t[e];\n    }(o.K()), n = _u.FormData && t instanceof _u.FormData, !(0 <= qu(jl, e)) || r || n || o.set(\"Content-Type\", \"application/x-www-form-urlencoded;charset=utf-8\"), o.forEach(function (t, e) {\n      this.a.setRequestHeader(e, t);\n    }, this), this.I && (this.a.responseType = this.I), \"withCredentials\" in this.a && this.a.withCredentials !== this.F && (this.a.withCredentials = this.F);\n\n    try {\n      zl(this), 0 < this.o && ((this.D = (i = this.a, ic && yc(9) && Tu(i.timeout) && void 0 !== i.ontimeout)) ? (this.a.timeout = this.o, this.a.ontimeout = xu(this.Ca, this)) : this.m = nh(this.Ca, this.o, this)), this.l = !0, this.a.send(t), this.l = !1;\n    } catch (t) {\n      Kl(this, t);\n    }\n  }, vu.Ca = function () {\n    void 0 !== wu && this.a && (this.f = \"Timed out after \" + this.o + \"ms, aborting\", this.h = 8, this.dispatchEvent(\"timeout\"), this.abort(8));\n  }, vu.abort = function (t) {\n    this.a && this.b && (this.b = !1, this.g = !0, this.a.abort(), this.g = !1, this.h = t || 7, this.dispatchEvent(\"complete\"), this.dispatchEvent(\"abort\"), Gl(this));\n  }, vu.G = function () {\n    this.a && (this.b && (this.b = !1, this.g = !0, this.a.abort(), this.g = !1), Gl(this, !0)), ql.N.G.call(this);\n  }, vu.Fa = function () {\n    this.j || (this.w || this.l || this.g ? Hl(this) : this.$a());\n  }, vu.$a = function () {\n    Hl(this);\n  }, vu.T = function () {\n    try {\n      return 2 < Yl(this) ? this.a.status : -1;\n    } catch (t) {\n      return -1;\n    }\n  }, vu.za = function () {\n    try {\n      return 2 < Yl(this) ? this.a.statusText : \"\";\n    } catch (t) {\n      return \"\";\n    }\n  }, vu.aa = function () {\n    try {\n      return this.a ? this.a.responseText : \"\";\n    } catch (t) {\n      return \"\";\n    }\n  }, vu.Va = function (t) {\n    if (this.a) {\n      var e = this.a.responseText;\n      return t && 0 == e.indexOf(t) && (e = e.substring(t.length)), Ul(e);\n    }\n  }, vu.ya = function () {\n    return this.h;\n  }, vu.Ya = function () {\n    return Eu(this.f) ? this.f : String(this.f);\n  }, (vu = $l.prototype).wa = 8, vu.u = 1, vu.Da = function () {\n    return 0 == this.u;\n  }, vu.Ia = function (t) {\n    if (this.h) if (this.h = null, 1 == this.u) {\n      if (!t) {\n        this.P = Math.floor(1e5 * Math.random());\n        var e,\n            n = new Nh(this, t = this.P++, void 0),\n            r = this.i;\n        if (this.J && (r ? Zu(r = Ju(r), this.J) : r = this.J), null === this.g && (n.h = r), this.W) t: {\n          for (var i = e = 0; i < this.f.length; i++) {\n            var o = this.f[i];\n            if (void 0 === (o = \"__data__\" in o.a && Eu(o = o.a.__data__) ? o.length : void 0)) break;\n\n            if (4096 < (e += o)) {\n              e = i;\n              break t;\n            }\n\n            if (4096 === e || i === this.f.length - 1) {\n              e = i + 1;\n              break t;\n            }\n          }\n\n          e = 1e3;\n        } else e = 1e3;\n        e = af(this, n, e), el(i = Yh(this.B), \"RID\", t), el(i, \"CVER\", 22), this.o && this.j && el(i, \"X-HTTP-Session-Id\", this.j), of(this, i), this.g && r && Jl(i, this.g, r), Rl(this.b, n), this.W ? (el(i, \"$req\", e), el(i, \"SID\", \"null\"), n.S = !0, Rh(n, i, null)) : Rh(n, i, e), this.u = 2;\n      }\n    } else 3 == this.u && (t ? rf(this, t) : 0 == this.f.length || Al(this.b) || rf(this));\n  }, vu.Ha = function () {\n    this.l = null, this.a = new Nh(this, \"rpc\", this.S), null === this.g && (this.a.h = this.i), this.a.J = 0;\n    var t = Yh(this.pa);\n    el(t, \"RID\", \"rpc\"), el(t, \"SID\", this.H), el(t, \"CI\", this.ia ? \"0\" : \"1\"), el(t, \"AID\", this.O), of(this, t), el(t, \"TYPE\", \"xmlhttp\"), this.g && this.i && Jl(t, this.g, this.i), this.D && this.a.setTimeout(this.D), Oh(this.a, t, !0, this.ga);\n  }, vu.Ga = function (t, e) {\n    if (0 != this.u && (this.a == t || Dl(this.b, t))) if (this.m = t.o, !t.s && Dl(this.b, t) && 3 == this.u) {\n      try {\n        var n = this.ja.a.parse(e);\n      } catch (t) {\n        n = null;\n      }\n\n      if (Nu(n) && 3 == n.length) {\n        if (0 == (e = n)[0]) {\n          t: if (!this.l) {\n            if (this.a) {\n              if (!(this.a.v + 3e3 < t.v)) break t;\n              hf(this), this.a.cancel(), this.a = null;\n            }\n\n            uf(this), dh(18);\n          }\n        } else this.ra = e[1], 0 < this.ra - this.O && e[2] < 37500 && this.ia && 0 == this.v && !this.s && (this.s = mh(xu(this.Za, this), 6e3));\n\n        if (kl(this.b) <= 1 && this.fa) {\n          try {\n            this.fa();\n          } catch (t) {}\n\n          this.fa = void 0;\n        }\n      } else ff(this, 11);\n    } else if ((t.s || this.a == t) && hf(this), !Wu(e)) for (e = n = this.ja.a.parse(e), n = 0; n < e.length; n++) {\n      var r = e[n];\n      if (this.O = r[0], r = r[1], 2 == this.u) {\n        if (\"c\" == r[0]) {\n          this.H = r[1], this.ga = r[2];\n          var i = r[3];\n          null != i && (this.wa = i), null != (r = r[5]) && Tu(r) && 0 < r && (this.D = 1.5 * r), this.o && (r = t.a) && ((i = Xl(r, \"X-Client-Wire-Protocol\")) && Nl(this.b, i), this.j && (r = Xl(r, \"X-HTTP-Session-Id\"))) && (this.I = r, el(this.B, this.j, r)), this.u = 3, this.c && this.c.va(), r = t, this.pa = df(this, this.Y() ? this.ga : null, this.ha), r.s ? (Ol(this.b, r), (i = this.D) && r.setTimeout(i), r.i && (Uh(r), Lh(r)), this.a = r) : sf(this), 0 < this.f.length && nf(this);\n        } else \"stop\" != r[0] && \"close\" != r[0] || ff(this, 7);\n      } else 3 == this.u && (\"stop\" == r[0] || \"close\" == r[0] ? \"stop\" == r[0] ? ff(this, 7) : Zl(this) : \"noop\" != r[0] && this.c && this.c.ua(r), this.v = 0);\n    }\n  }, vu.Za = function () {\n    null != this.s && (this.s = null, this.a.cancel(), this.a = null, uf(this), dh(19));\n  }, vu.na = function (t) {\n    var e,\n        n,\n        r = null;\n\n    if (this.a == t) {\n      hf(this), this.a = null;\n      var i = 2;\n    } else {\n      if (!Dl(this.b, t)) return;\n      r = t.j, Ol(this.b, t), i = 1;\n    }\n\n    if (this.m = t.o, 0 != this.u) if (t.b) 1 == i ? (r = Lu() - t.v, hh.dispatchEvent(new yh(hh, t.l ? t.l.length : 0, r, this.A)), nf(this)) : sf(this);else {\n      var o = t.c;\n      if (3 == o || 0 == o && 0 < this.m || (1 != i || (n = t, kl((e = this).b) >= e.b.f - (e.h ? 1 : 0) || (e.h ? (e.f = n.j.concat(e.f), 0) : 1 == e.u || 2 == e.u || e.A >= (e.Pa ? 0 : e.Qa) || (e.h = mh(xu(e.Ia, e, n), lf(e, e.A)), e.A++, 0)))) && (2 != i || !uf(this))) switch (r && 0 < r.length && (t = this.b, t.c = t.c.concat(r)), o) {\n        case 1:\n          ff(this, 5);\n          break;\n\n        case 4:\n          ff(this, 10);\n          break;\n\n        case 3:\n          ff(this, 6);\n          break;\n\n        default:\n          ff(this, 2);\n      }\n    }\n  }, vu.fb = function (t) {\n    dh(t ? 2 : 1);\n  }, vu.$ = function (t) {\n    if (t && !this.R) throw Error(\"Can't create secondary domain capable XhrIo object.\");\n    return (t = new ql(this.La)).F = this.R, t;\n  }, vu.ma = function () {\n    return !!this.c && !0;\n  }, vu.Y = function () {\n    return this.R;\n  }, (vu = yf.prototype).va = function () {}, vu.ua = function () {}, vu.ta = function () {}, vu.sa = function () {}, vu.Ta = function () {}, mf.prototype.a = function (t, e) {\n    return new gf(t, e);\n  }, Fu(gf, Bc), (vu = gf.prototype).addEventListener = function (t, e, n, r) {\n    gf.N.addEventListener.call(this, t, e, n, r);\n  }, vu.removeEventListener = function (t, e, n, r) {\n    gf.N.removeEventListener.call(this, t, e, n, r);\n  }, vu.Wa = function () {\n    this.a.c = this.f, this.l && (this.a.R = !0);\n    var t = this.a,\n        e = this.m,\n        n = this.g,\n        r = this.b || void 0;\n    dh(0), t.ha = n, t.V = r || {}, t.o && (t.F.b = [], t.F.a = !1), t.w = new bl(t), null === t.g && (t.w.h = t.i), n = e, t.g && t.i && (n = Jl(e, t.g, t.i)), (t = t.w).i = n, e = df(t.a, null, t.i), dh(3), null != (n = t.a.F.b) ? (t.f = n[0], t.M = 1, wl(t)) : (nl(e, \"MODE\", \"init\"), !t.a.o && t.a.j && nl(e, \"X-HTTP-Session-Id\", t.a.j), t.b = new Nh(t, void 0, void 0), t.b.h = t.h, Oh(t.b, e, !1, null), t.M = 0);\n  }, vu.close = function () {\n    Zl(this.a);\n  }, vu.Xa = function (t) {\n    if (Eu(t)) {\n      var e = {};\n      e.__data__ = t, ef(this.a, e);\n    } else this.h ? ((e = {}).__data__ = Wc(t), ef(this.a, e)) : ef(this.a, t);\n  }, vu.G = function () {\n    this.a.c = null, delete this.f, Zl(this.a), delete this.a, gf.N.G.call(this);\n  }, Fu(vf, Sh), Fu(bf, Ih), Fu(wf, yf), wf.prototype.va = function () {\n    this.a.dispatchEvent(\"a\");\n  }, wf.prototype.ua = function (t) {\n    this.a.dispatchEvent(new vf(t));\n  }, wf.prototype.ta = function (t) {\n    this.a.dispatchEvent(new bf(t));\n  }, wf.prototype.sa = function () {\n    this.a.dispatchEvent(\"b\");\n  };\n\n  var _f = Mu(function (t, e) {\n    function n() {}\n\n    n.prototype = t.prototype;\n    var r = new n();\n    return t.apply(r, Array.prototype.slice.call(arguments, 1)), r;\n  }, mf);\n\n  mf.prototype.createWebChannel = mf.prototype.a, gf.prototype.send = gf.prototype.Xa, gf.prototype.open = gf.prototype.Wa, gf.prototype.close = gf.prototype.close, gh.NO_ERROR = 0, gh.TIMEOUT = 8, gh.HTTP_ERROR = 6, vh.COMPLETE = \"complete\", (_h.EventType = Th).OPEN = \"a\", Th.CLOSE = \"b\", Th.ERROR = \"c\", Th.MESSAGE = \"d\", Bc.prototype.listen = Bc.prototype.Aa, ql.prototype.listenOnce = ql.prototype.Ba, ql.prototype.getLastError = ql.prototype.Ya, ql.prototype.getLastErrorCode = ql.prototype.ya, ql.prototype.getStatus = ql.prototype.T, ql.prototype.getStatusText = ql.prototype.za, ql.prototype.getResponseJson = ql.prototype.Va, ql.prototype.getResponseText = ql.prototype.aa, ql.prototype.send = ql.prototype.ca;\n  var Ef,\n      Tf,\n      Sf = {\n    createWebChannelTransport: _f,\n    ErrorCode: gh,\n    EventType: vh,\n    WebChannel: _h,\n    XhrIo: ql\n  },\n      If = Sf.createWebChannelTransport,\n      Cf = Sf.ErrorCode,\n      Nf = Sf.EventType,\n      Af = Sf.WebChannel,\n      kf = Sf.XhrIo,\n      Df = Jh.SDK_VERSION,\n      Rf = new zi(\"@firebase/firestore\");\n\n  function Of() {\n    return Rf.logLevel === ji.DEBUG ? Ef.DEBUG : Rf.logLevel === ji.SILENT ? Ef.SILENT : Ef.ERROR;\n  }\n\n  function Pf(t) {\n    switch (t) {\n      case Ef.DEBUG:\n        Rf.logLevel = ji.DEBUG;\n        break;\n\n      case Ef.ERROR:\n        Rf.logLevel = ji.ERROR;\n        break;\n\n      case Ef.SILENT:\n        Rf.logLevel = ji.SILENT;\n        break;\n\n      default:\n        Rf.error(\"Firestore (\" + Df + \"): Invalid value passed to `setLogLevel`\");\n    }\n  }\n\n  function xf(t, e) {\n    for (var n = [], r = 2; r < arguments.length; r++) {\n      n[r - 2] = arguments[r];\n    }\n\n    if (Rf.logLevel <= ji.DEBUG) {\n      var i = n.map(Lf);\n      Rf.debug.apply(Rf, [\"Firestore (\" + Df + \") [\" + t + \"]: \" + e].concat(i));\n    }\n  }\n\n  function Mf(t) {\n    for (var e = [], n = 1; n < arguments.length; n++) {\n      e[n - 1] = arguments[n];\n    }\n\n    if (Rf.logLevel <= ji.ERROR) {\n      var r = e.map(Lf);\n      Rf.error.apply(Rf, [\"Firestore (\" + Df + \"): \" + t].concat(r));\n    }\n  }\n\n  function Lf(e) {\n    if (\"string\" == typeof e) return e;\n    var t = qf.getPlatform();\n\n    try {\n      return t.formatJSON(e);\n    } catch (t) {\n      return e;\n    }\n  }\n\n  function Ff(t) {\n    var e = \"FIRESTORE (\" + Df + \") INTERNAL ASSERTION FAILED: \" + t;\n    throw Mf(e), new Error(e);\n  }\n\n  function Uf(t, e) {\n    t || Ff(e);\n  }\n\n  (Tf = Ef || (Ef = {}))[Tf.DEBUG = 0] = \"DEBUG\", Tf[Tf.ERROR = 1] = \"ERROR\", Tf[Tf.SILENT = 2] = \"SILENT\";\n\n  var qf = function () {\n    function e() {}\n\n    return e.setPlatform = function (t) {\n      e.platform && Ff(\"Platform already defined\"), e.platform = t;\n    }, e.getPlatform = function () {\n      return e.platform || Ff(\"Platform not set\"), e.platform;\n    }, e;\n  }();\n\n  function Vf() {\n    return qf.getPlatform().emptyByteString;\n  }\n\n  var Bf = {\n    OK: \"ok\",\n    CANCELLED: \"cancelled\",\n    UNKNOWN: \"unknown\",\n    INVALID_ARGUMENT: \"invalid-argument\",\n    DEADLINE_EXCEEDED: \"deadline-exceeded\",\n    NOT_FOUND: \"not-found\",\n    ALREADY_EXISTS: \"already-exists\",\n    PERMISSION_DENIED: \"permission-denied\",\n    UNAUTHENTICATED: \"unauthenticated\",\n    RESOURCE_EXHAUSTED: \"resource-exhausted\",\n    FAILED_PRECONDITION: \"failed-precondition\",\n    ABORTED: \"aborted\",\n    OUT_OF_RANGE: \"out-of-range\",\n    UNIMPLEMENTED: \"unimplemented\",\n    INTERNAL: \"internal\",\n    UNAVAILABLE: \"unavailable\",\n    DATA_LOSS: \"data-loss\"\n  },\n      jf = function (r) {\n    function t(t, e) {\n      var n = r.call(this, e) || this;\n      return n.code = t, n.message = e, n.name = \"FirebaseError\", n.toString = function () {\n        return n.name + \": [code=\" + n.code + \"]: \" + n.message;\n      }, n;\n    }\n\n    return ii(t, r), t;\n  }(Error);\n\n  function Wf(t, e) {\n    function n() {\n      var t = \"This constructor is private.\";\n      throw e && (t += \" \", t += e), new jf(Bf.INVALID_ARGUMENT, t);\n    }\n\n    for (var r in n.prototype = t.prototype, t) {\n      t.hasOwnProperty(r) && (n[r] = t[r]);\n    }\n\n    return n;\n  }\n\n  function Kf(t, e) {\n    return Object.prototype.hasOwnProperty.call(t, e);\n  }\n\n  function Qf(t, e) {\n    return void 0 !== t ? t : e;\n  }\n\n  function Hf(t, e) {\n    for (var n in t) {\n      if (Object.prototype.hasOwnProperty.call(t, n)) {\n        var r = Number(n);\n        isNaN(r) || e(r, t[n]);\n      }\n    }\n  }\n\n  function Gf(t, e) {\n    for (var n in t) {\n      Object.prototype.hasOwnProperty.call(t, n) && e(n, t[n]);\n    }\n  }\n\n  function zf(t) {\n    for (var e in Uf(null != t && \"object\" == typeof t, \"isEmpty() expects object parameter.\"), t) {\n      if (Object.prototype.hasOwnProperty.call(t, e)) return !1;\n    }\n\n    return !0;\n  }\n\n  function Yf(t, e) {\n    if (0 !== e.length) throw new jf(Bf.INVALID_ARGUMENT, \"Function \" + t + \"() does not support arguments, but was called with \" + fp(e.length, \"argument\") + \".\");\n  }\n\n  function Xf(t, e, n) {\n    if (e.length !== n) throw new jf(Bf.INVALID_ARGUMENT, \"Function \" + t + \"() requires \" + fp(n, \"argument\") + \", but was called with \" + fp(e.length, \"argument\") + \".\");\n  }\n\n  function Jf(t, e, n) {\n    if (e.length < n) throw new jf(Bf.INVALID_ARGUMENT, \"Function \" + t + \"() requires at least \" + fp(n, \"argument\") + \", but was called with \" + fp(e.length, \"argument\") + \".\");\n  }\n\n  function $f(t, e, n, r) {\n    if (e.length < n || e.length > r) throw new jf(Bf.INVALID_ARGUMENT, \"Function \" + t + \"() requires between \" + n + \" and \" + r + \" arguments, but was called with \" + fp(e.length, \"argument\") + \".\");\n  }\n\n  function Zf(t, e, n, r) {\n    op(t, e, lp(n) + \" argument\", r);\n  }\n\n  function tp(t, e, n, r) {\n    void 0 !== r && Zf(t, e, n, r);\n  }\n\n  function ep(t, e, n, r) {\n    op(t, e, n + \" option\", r);\n  }\n\n  function np(t, e, n, r) {\n    void 0 !== r && ep(t, e, n, r);\n  }\n\n  function rp(t, e, n, r, i) {\n    void 0 !== r && function (t, e, n, r, i) {\n      if (!(r instanceof Array)) throw new jf(Bf.INVALID_ARGUMENT, \"Function \" + t + \"() requires its \" + e + \" option to be an array, but it was: \" + sp(r));\n\n      for (var o = 0; o < r.length; ++o) {\n        if (!i(r[o])) throw new jf(Bf.INVALID_ARGUMENT, \"Function \" + t + \"() requires all \" + e + \" elements to be \" + n + \", but the value at index \" + o + \" was: \" + sp(r[o]));\n      }\n    }(t, e, n, r, i);\n  }\n\n  function ip(t, e, n, r, i) {\n    void 0 !== r && function (t, e, n, r, i) {\n      for (var o = [], a = 0, s = i; a < s.length; a++) {\n        var u = s[a];\n        if (u === r) return;\n        o.push(sp(u));\n      }\n\n      var c = sp(r);\n      throw new jf(Bf.INVALID_ARGUMENT, \"Invalid value \" + c + \" provided to function \" + t + '() for option \"' + n + '\". Acceptable values: ' + o.join(\", \"));\n    }(t, 0, n, r, i);\n  }\n\n  function op(t, e, n, r) {\n    if (!(\"object\" === e ? ap(r) : \"non-empty string\" === e ? \"string\" == typeof r && \"\" !== r : typeof r === e)) {\n      var i = sp(r);\n      throw new jf(Bf.INVALID_ARGUMENT, \"Function \" + t + \"() requires its \" + n + \" to be of type \" + e + \", but it was: \" + i);\n    }\n  }\n\n  function ap(t) {\n    return \"object\" == typeof t && null !== t && (Object.getPrototypeOf(t) === Object.prototype || null === Object.getPrototypeOf(t));\n  }\n\n  function sp(t) {\n    if (void 0 === t) return \"undefined\";\n    if (null === t) return \"null\";\n    if (\"string\" == typeof t) return 20 < t.length && (t = t.substring(0, 20) + \"...\"), JSON.stringify(t);\n    if (\"number\" == typeof t || \"boolean\" == typeof t) return \"\" + t;\n    if (\"object\" != typeof t) return \"function\" == typeof t ? \"a function\" : Ff(\"Unknown wrong type: \" + typeof t);\n    if (t instanceof Array) return \"an array\";\n\n    var e = function (t) {\n      if (t.constructor) {\n        var e = /function\\s+([^\\s(]+)\\s*\\(/.exec(t.constructor.toString());\n        if (e && 1 < e.length) return e[1];\n      }\n\n      return null;\n    }(t);\n\n    return e ? \"a custom \" + e + \" object\" : \"an object\";\n  }\n\n  function up(t, e, n) {\n    if (void 0 === n) throw new jf(Bf.INVALID_ARGUMENT, \"Function \" + t + \"() requires a valid \" + lp(e) + \" argument, but it was undefined.\");\n  }\n\n  function cp(n, t, r) {\n    Gf(t, function (t, e) {\n      if (r.indexOf(t) < 0) throw new jf(Bf.INVALID_ARGUMENT, \"Unknown option '\" + t + \"' passed to function \" + n + \"(). Available options: \" + r.join(\", \"));\n    });\n  }\n\n  function hp(t, e, n, r) {\n    var i = sp(r);\n    return new jf(Bf.INVALID_ARGUMENT, \"Function \" + t + \"() requires its \" + lp(n) + \" argument to be a \" + e + \", but it was: \" + i);\n  }\n\n  function lp(t) {\n    switch (t) {\n      case 1:\n        return \"first\";\n\n      case 2:\n        return \"second\";\n\n      case 3:\n        return \"third\";\n\n      default:\n        return t + \"th\";\n    }\n  }\n\n  function fp(t, e) {\n    return t + \" \" + e + (1 === t ? \"\" : \"s\");\n  }\n\n  var pp = function () {\n    function t() {}\n\n    return t.newId = function () {\n      for (var t = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\", e = \"\", n = 0; n < 20; n++) {\n        e += t.charAt(Math.floor(Math.random() * t.length));\n      }\n\n      return Uf(20 === e.length, \"Invalid auto ID: \" + e), e;\n    }, t;\n  }();\n\n  function dp(t, e) {\n    return t < e ? -1 : e < t ? 1 : 0;\n  }\n\n  function yp(t, e) {\n    if (t.length !== e.length) return !1;\n\n    for (var n = 0; n < t.length; n++) {\n      if (!t[n].isEqual(e[n])) return !1;\n    }\n\n    return !0;\n  }\n\n  function mp(t) {\n    return t + \"\\0\";\n  }\n\n  function gp() {\n    if (\"undefined\" == typeof Uint8Array) throw new jf(Bf.UNIMPLEMENTED, \"Uint8Arrays are not available in this environment.\");\n  }\n\n  function vp() {\n    if (!qf.getPlatform().base64Available) throw new jf(Bf.UNIMPLEMENTED, \"Blobs are unavailable in Firestore in this environment.\");\n  }\n\n  var bp,\n      wp,\n      _p = function () {\n    function e(t) {\n      vp(), this._binaryString = t;\n    }\n\n    return e.fromBase64String = function (t) {\n      Xf(\"Blob.fromBase64String\", arguments, 1), Zf(\"Blob.fromBase64String\", \"string\", 1, t), vp();\n\n      try {\n        return new e(qf.getPlatform().atob(t));\n      } catch (t) {\n        throw new jf(Bf.INVALID_ARGUMENT, \"Failed to construct Blob from Base64 string: \" + t);\n      }\n    }, e.fromUint8Array = function (t) {\n      if (Xf(\"Blob.fromUint8Array\", arguments, 1), gp(), !(t instanceof Uint8Array)) throw hp(\"Blob.fromUint8Array\", \"Uint8Array\", 1, t);\n      return new e(Array.prototype.map.call(t, function (t) {\n        return String.fromCharCode(t);\n      }).join(\"\"));\n    }, e.prototype.toBase64 = function () {\n      return Xf(\"Blob.toBase64\", arguments, 0), vp(), qf.getPlatform().btoa(this._binaryString);\n    }, e.prototype.toUint8Array = function () {\n      Xf(\"Blob.toUint8Array\", arguments, 0), gp();\n\n      for (var t = new Uint8Array(this._binaryString.length), e = 0; e < this._binaryString.length; e++) {\n        t[e] = this._binaryString.charCodeAt(e);\n      }\n\n      return t;\n    }, e.prototype.toString = function () {\n      return \"Blob(base64: \" + this.toBase64() + \")\";\n    }, e.prototype.isEqual = function (t) {\n      return this._binaryString === t._binaryString;\n    }, e.prototype._compareTo = function (t) {\n      return dp(this._binaryString, t._binaryString);\n    }, e;\n  }(),\n      Ep = Wf(_p, \"Use Blob.fromUint8Array() or Blob.fromBase64String() instead.\"),\n      Tp = function Tp(t, e, n, r, i) {\n    this.databaseId = t, this.persistenceKey = e, this.host = n, this.ssl = r, this.forceLongPolling = i;\n  },\n      Sp = \"(default)\",\n      Ip = function () {\n    function e(t, e) {\n      this.projectId = t, this.database = e || Sp;\n    }\n\n    return Object.defineProperty(e.prototype, \"isDefaultDatabase\", {\n      get: function get() {\n        return this.database === Sp;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), e.prototype.isEqual = function (t) {\n      return t instanceof e && t.projectId === this.projectId && t.database === this.database;\n    }, e.prototype.compareTo = function (t) {\n      return dp(this.projectId, t.projectId) || dp(this.database, t.database);\n    }, e;\n  }(),\n      Cp = function () {\n    function t(t, e) {\n      var n = this;\n      this.previousValue = t, e && (e.sequenceNumberHandler = function (t) {\n        return n.setPreviousValue(t);\n      }, this.writeNewSequenceNumber = function (t) {\n        return e.writeSequenceNumber(t);\n      });\n    }\n\n    return t.prototype.setPreviousValue = function (t) {\n      return this.previousValue = Math.max(t, this.previousValue), this.previousValue;\n    }, t.prototype.next = function () {\n      var t = ++this.previousValue;\n      return this.writeNewSequenceNumber && this.writeNewSequenceNumber(t), t;\n    }, t.INVALID = -1, t;\n  }(),\n      Np = \"__name__\",\n      Ap = function () {\n    function n(t, e, n) {\n      this.init(t, e, n);\n    }\n\n    return n.prototype.init = function (t, e, n) {\n      void 0 === e ? e = 0 : e > t.length && Ff(\"offset \" + e + \" out of range \" + t.length), void 0 === n ? n = t.length - e : n > t.length - e && Ff(\"length \" + n + \" out of range \" + (t.length - e)), this.segments = t, this.offset = e, this.len = n;\n    }, n.prototype.construct = function (t, e, n) {\n      var r = Object.create(Object.getPrototypeOf(this));\n      return r.init(t, e, n), r;\n    }, Object.defineProperty(n.prototype, \"length\", {\n      get: function get() {\n        return this.len;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), n.prototype.isEqual = function (t) {\n      return 0 === n.comparator(this, t);\n    }, n.prototype.child = function (t) {\n      var e = this.segments.slice(this.offset, this.limit());\n      return t instanceof n ? t.forEach(function (t) {\n        e.push(t);\n      }) : \"string\" == typeof t ? e.push(t) : Ff(\"Unknown parameter type for Path.child(): \" + t), this.construct(e);\n    }, n.prototype.limit = function () {\n      return this.offset + this.length;\n    }, n.prototype.popFirst = function (t) {\n      return t = void 0 === t ? 1 : t, Uf(this.length >= t, \"Can't call popFirst() with less segments\"), this.construct(this.segments, this.offset + t, this.length - t);\n    }, n.prototype.popLast = function () {\n      return Uf(!this.isEmpty(), \"Can't call popLast() on empty path\"), this.construct(this.segments, this.offset, this.length - 1);\n    }, n.prototype.firstSegment = function () {\n      return Uf(!this.isEmpty(), \"Can't call firstSegment() on empty path\"), this.segments[this.offset];\n    }, n.prototype.lastSegment = function () {\n      return this.get(this.length - 1);\n    }, n.prototype.get = function (t) {\n      return Uf(t < this.length, \"Index out of range\"), this.segments[this.offset + t];\n    }, n.prototype.isEmpty = function () {\n      return 0 === this.length;\n    }, n.prototype.isPrefixOf = function (t) {\n      if (t.length < this.length) return !1;\n\n      for (var e = 0; e < this.length; e++) {\n        if (this.get(e) !== t.get(e)) return !1;\n      }\n\n      return !0;\n    }, n.prototype.isImmediateParentOf = function (t) {\n      if (this.length + 1 !== t.length) return !1;\n\n      for (var e = 0; e < this.length; e++) {\n        if (this.get(e) !== t.get(e)) return !1;\n      }\n\n      return !0;\n    }, n.prototype.forEach = function (t) {\n      for (var e = this.offset, n = this.limit(); e < n; e++) {\n        t(this.segments[e]);\n      }\n    }, n.prototype.toArray = function () {\n      return this.segments.slice(this.offset, this.limit());\n    }, n.comparator = function (t, e) {\n      for (var n = Math.min(t.length, e.length), r = 0; r < n; r++) {\n        var i = t.get(r),\n            o = e.get(r);\n        if (i < o) return -1;\n        if (o < i) return 1;\n      }\n\n      return t.length < e.length ? -1 : t.length > e.length ? 1 : 0;\n    }, n;\n  }(),\n      kp = function (t) {\n    function e() {\n      return null !== t && t.apply(this, arguments) || this;\n    }\n\n    return ii(e, t), e.prototype.canonicalString = function () {\n      return this.toArray().join(\"/\");\n    }, e.prototype.toString = function () {\n      return this.canonicalString();\n    }, e.fromString = function (t) {\n      if (0 <= t.indexOf(\"//\")) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid path (\" + t + \"). Paths must not contain // in them.\");\n      return new e(t.split(\"/\").filter(function (t) {\n        return 0 < t.length;\n      }));\n    }, e.EMPTY_PATH = new e([]), e;\n  }(Ap),\n      Dp = /^[_a-zA-Z][_a-zA-Z0-9]*$/,\n      Rp = function (t) {\n    function u() {\n      return null !== t && t.apply(this, arguments) || this;\n    }\n\n    return ii(u, t), u.isValidIdentifier = function (t) {\n      return Dp.test(t);\n    }, u.prototype.canonicalString = function () {\n      return this.toArray().map(function (t) {\n        return t = t.replace(\"\\\\\", \"\\\\\\\\\").replace(\"`\", \"\\\\`\"), u.isValidIdentifier(t) || (t = \"`\" + t + \"`\"), t;\n      }).join(\".\");\n    }, u.prototype.toString = function () {\n      return this.canonicalString();\n    }, u.prototype.isKeyField = function () {\n      return 1 === this.length && this.get(0) === Np;\n    }, u.keyField = function () {\n      return new u([Np]);\n    }, u.fromServerFormat = function (t) {\n      for (var e = [], n = \"\", r = 0, i = function i() {\n        if (0 === n.length) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid field path (\" + t + \"). Paths must not be empty, begin with '.', end with '.', or contain '..'\");\n        e.push(n), n = \"\";\n      }, o = !1; r < t.length;) {\n        var a = t[r];\n\n        if (\"\\\\\" === a) {\n          if (r + 1 === t.length) throw new jf(Bf.INVALID_ARGUMENT, \"Path has trailing escape character: \" + t);\n          var s = t[r + 1];\n          if (\"\\\\\" !== s && \".\" !== s && \"`\" !== s) throw new jf(Bf.INVALID_ARGUMENT, \"Path has invalid escape sequence: \" + t);\n          n += s, r += 2;\n        } else \"`\" === a ? o = !o : \".\" !== a || o ? n += a : i(), r++;\n      }\n\n      if (i(), o) throw new jf(Bf.INVALID_ARGUMENT, \"Unterminated ` in path: \" + t);\n      return new u(e);\n    }, u.EMPTY_PATH = new u([]), u;\n  }(Ap),\n      Op = function () {\n    function e(t) {\n      this.path = t, Uf(e.isDocumentKey(t), \"Invalid DocumentKey with an odd number of segments: \" + t.toArray().join(\"/\"));\n    }\n\n    return e.prototype.hasCollectionId = function (t) {\n      return 2 <= this.path.length && this.path.get(this.path.length - 2) === t;\n    }, e.prototype.isEqual = function (t) {\n      return null !== t && 0 === kp.comparator(this.path, t.path);\n    }, e.prototype.toString = function () {\n      return this.path.toString();\n    }, e.comparator = function (t, e) {\n      return kp.comparator(t.path, e.path);\n    }, e.isDocumentKey = function (t) {\n      return t.length % 2 == 0;\n    }, e.fromSegments = function (t) {\n      return new e(new kp(t.slice()));\n    }, e.fromPathString = function (t) {\n      return new e(kp.fromString(t));\n    }, e.EMPTY = new e(new kp([])), e;\n  }(),\n      Pp = function Pp() {\n    var n = this;\n    this.promise = new Promise(function (t, e) {\n      n.resolve = t, n.reject = e;\n    });\n  };\n\n  (wp = bp || (bp = {})).All = \"all\", wp.ListenStreamIdle = \"listen_stream_idle\", wp.ListenStreamConnectionBackoff = \"listen_stream_connection_backoff\", wp.WriteStreamIdle = \"write_stream_idle\", wp.WriteStreamConnectionBackoff = \"write_stream_connection_backoff\", wp.OnlineStateTimeout = \"online_state_timeout\", wp.ClientMetadataRefresh = \"client_metadata_refresh\", wp.LruGarbageCollection = \"lru_garbage_collection\";\n\n  var xp = function () {\n    function a(t, e, n, r, i) {\n      this.asyncQueue = t, this.timerId = e, this.targetTimeMs = n, this.op = r, this.removalCallback = i, this.deferred = new Pp(), this.then = this.deferred.promise.then.bind(this.deferred.promise), this.catch = this.deferred.promise.catch.bind(this.deferred.promise), this.deferred.promise.catch(function (t) {});\n    }\n\n    return a.createAndSchedule = function (t, e, n, r, i) {\n      var o = new a(t, e, Date.now() + n, r, i);\n      return o.start(n), o;\n    }, a.prototype.start = function (t) {\n      var e = this;\n      this.timerHandle = setTimeout(function () {\n        return e.handleDelayElapsed();\n      }, t);\n    }, a.prototype.skipDelay = function () {\n      return this.handleDelayElapsed();\n    }, a.prototype.cancel = function (t) {\n      null !== this.timerHandle && (this.clearTimeout(), this.deferred.reject(new jf(Bf.CANCELLED, \"Operation cancelled\" + (t ? \": \" + t : \"\"))));\n    }, a.prototype.handleDelayElapsed = function () {\n      var e = this;\n      this.asyncQueue.enqueueAndForget(function () {\n        return null !== e.timerHandle ? (e.clearTimeout(), e.op().then(function (t) {\n          return e.deferred.resolve(t);\n        })) : Promise.resolve();\n      });\n    }, a.prototype.clearTimeout = function () {\n      null !== this.timerHandle && (this.removalCallback(this), clearTimeout(this.timerHandle), this.timerHandle = null);\n    }, a;\n  }(),\n      Mp = function () {\n    function t() {\n      this.tail = Promise.resolve(), this.delayedOperations = [], this.operationInProgress = !1;\n    }\n\n    return t.prototype.enqueueAndForget = function (t) {\n      this.enqueue(t);\n    }, t.prototype.enqueue = function (t) {\n      var n = this;\n      this.verifyNotFailed();\n      var e = this.tail.then(function () {\n        return n.operationInProgress = !0, t().catch(function (t) {\n          n.failure = t, n.operationInProgress = !1;\n          var e = t.stack || t.message || \"\";\n          throw Mf(\"INTERNAL UNHANDLED ERROR: \", e), e.indexOf(\"Firestore Test Simulated Error\") < 0 && setTimeout(function () {\n            throw t;\n          }, 0), t;\n        }).then(function (t) {\n          return n.operationInProgress = !1, t;\n        });\n      });\n      return this.tail = e;\n    }, t.prototype.enqueueAfterDelay = function (t, e, n) {\n      var r = this;\n      this.verifyNotFailed(), Uf(0 <= e, \"Attempted to schedule an operation with a negative delay of \" + e), Uf(!this.containsDelayedOperation(t), \"Attempted to schedule multiple operations with timer id \" + t + \".\");\n      var i = xp.createAndSchedule(this, t, e, n, function (t) {\n        return r.removeDelayedOperation(t);\n      });\n      return this.delayedOperations.push(i), i;\n    }, t.prototype.verifyNotFailed = function () {\n      this.failure && Ff(\"AsyncQueue is already failed: \" + (this.failure.stack || this.failure.message));\n    }, t.prototype.verifyOperationInProgress = function () {\n      Uf(this.operationInProgress, \"verifyOpInProgress() called when no op in progress on this queue.\");\n    }, t.prototype.drain = function () {\n      return this.enqueue(function () {\n        return Promise.resolve();\n      });\n    }, t.prototype.containsDelayedOperation = function (t) {\n      for (var e = 0, n = this.delayedOperations; e < n.length; e++) {\n        if (n[e].timerId === t) return !0;\n      }\n\n      return !1;\n    }, t.prototype.runDelayedOperationsEarly = function (r) {\n      var i = this;\n      return this.drain().then(function () {\n        Uf(r === bp.All || i.containsDelayedOperation(r), \"Attempted to drain to missing operation \" + r), i.delayedOperations.sort(function (t, e) {\n          return t.targetTimeMs - e.targetTimeMs;\n        });\n\n        for (var t = 0, e = i.delayedOperations; t < e.length; t++) {\n          var n = e[t];\n          if (n.skipDelay(), r !== bp.All && n.timerId === r) break;\n        }\n\n        return i.drain();\n      });\n    }, t.prototype.removeDelayedOperation = function (t) {\n      var e = this.delayedOperations.indexOf(t);\n      Uf(0 <= e, \"Delayed operation not found.\"), this.delayedOperations.splice(e, 1);\n    }, t;\n  }(),\n      Lp = \"\u0001\",\n      Fp = \"\u0001\",\n      Up = \"\u0010\",\n      qp = \"\u0011\";\n\n  function Vp(t) {\n    for (var e = \"\", n = 0; n < t.length; n++) {\n      0 < e.length && (e = jp(e)), e = Bp(t.get(n), e);\n    }\n\n    return jp(e);\n  }\n\n  function Bp(t, e) {\n    for (var n = e, r = t.length, i = 0; i < r; i++) {\n      var o = t.charAt(i);\n\n      switch (o) {\n        case \"\\0\":\n          n += Lp + Up;\n          break;\n\n        case Lp:\n          n += Lp + qp;\n          break;\n\n        default:\n          n += o;\n      }\n    }\n\n    return n;\n  }\n\n  function jp(t) {\n    return t + Lp + Fp;\n  }\n\n  function Wp(t) {\n    var e = t.length;\n    if (Uf(2 <= e, \"Invalid path \" + t), 2 === e) return Uf(t.charAt(0) === Lp && t.charAt(1) === Fp, \"Non-empty path \" + t + \" had length 2\"), kp.EMPTY_PATH;\n\n    for (var n = e - 2, r = [], i = \"\", o = 0; o < e;) {\n      var a = t.indexOf(Lp, o);\n\n      switch ((a < 0 || n < a) && Ff('Invalid encoded resource path: \"' + t + '\"'), t.charAt(a + 1)) {\n        case Fp:\n          var s = t.substring(o, a),\n              u = void 0;\n          0 === i.length ? u = s : (u = i += s, i = \"\"), r.push(u);\n          break;\n\n        case Up:\n          i += t.substring(o, a), i += \"\\0\";\n          break;\n\n        case qp:\n          i += t.substring(o, a + 1);\n          break;\n\n        default:\n          Ff('Invalid encoded resource path: \"' + t + '\"');\n      }\n\n      o = a + 2;\n    }\n\n    return new kp(r);\n  }\n\n  var Kp = function () {\n    function n(t, e) {\n      if (this.seconds = t, (this.nanoseconds = e) < 0) throw new jf(Bf.INVALID_ARGUMENT, \"Timestamp nanoseconds out of range: \" + e);\n      if (1e9 <= e) throw new jf(Bf.INVALID_ARGUMENT, \"Timestamp nanoseconds out of range: \" + e);\n      if (t < -62135596800) throw new jf(Bf.INVALID_ARGUMENT, \"Timestamp seconds out of range: \" + t);\n      if (253402300800 <= t) throw new jf(Bf.INVALID_ARGUMENT, \"Timestamp seconds out of range: \" + t);\n    }\n\n    return n.now = function () {\n      return n.fromMillis(Date.now());\n    }, n.fromDate = function (t) {\n      return n.fromMillis(t.getTime());\n    }, n.fromMillis = function (t) {\n      var e = Math.floor(t / 1e3);\n      return new n(e, 1e6 * (t - 1e3 * e));\n    }, n.prototype.toDate = function () {\n      return new Date(this.toMillis());\n    }, n.prototype.toMillis = function () {\n      return 1e3 * this.seconds + this.nanoseconds / 1e6;\n    }, n.prototype._compareTo = function (t) {\n      return this.seconds === t.seconds ? dp(this.nanoseconds, t.nanoseconds) : dp(this.seconds, t.seconds);\n    }, n.prototype.isEqual = function (t) {\n      return t.seconds === this.seconds && t.nanoseconds === this.nanoseconds;\n    }, n.prototype.toString = function () {\n      return \"Timestamp(seconds=\" + this.seconds + \", nanoseconds=\" + this.nanoseconds + \")\";\n    }, n;\n  }(),\n      Qp = function () {\n    function n(t) {\n      this.timestamp = t;\n    }\n\n    return n.fromMicroseconds = function (t) {\n      var e = Math.floor(t / 1e6);\n      return new n(new Kp(e, t % 1e6 * 1e3));\n    }, n.fromTimestamp = function (t) {\n      return new n(t);\n    }, n.forDeletedDoc = function () {\n      return n.MIN;\n    }, n.prototype.compareTo = function (t) {\n      return this.timestamp._compareTo(t.timestamp);\n    }, n.prototype.isEqual = function (t) {\n      return this.timestamp.isEqual(t.timestamp);\n    }, n.prototype.toMicroseconds = function () {\n      return 1e6 * this.timestamp.seconds + this.timestamp.nanoseconds / 1e3;\n    }, n.prototype.toString = function () {\n      return \"SnapshotVersion(\" + this.timestamp.toString() + \")\";\n    }, n.prototype.toTimestamp = function () {\n      return this.timestamp;\n    }, n.MIN = new n(new Kp(0, 0)), n;\n  }(),\n      Hp = function () {\n    function n(t, e) {\n      this.comparator = t, this.root = e || zp.EMPTY;\n    }\n\n    return n.prototype.insert = function (t, e) {\n      return new n(this.comparator, this.root.insert(t, e, this.comparator).copy(null, null, zp.BLACK, null, null));\n    }, n.prototype.remove = function (t) {\n      return new n(this.comparator, this.root.remove(t, this.comparator).copy(null, null, zp.BLACK, null, null));\n    }, n.prototype.get = function (t) {\n      for (var e = this.root; !e.isEmpty();) {\n        var n = this.comparator(t, e.key);\n        if (0 === n) return e.value;\n        n < 0 ? e = e.left : 0 < n && (e = e.right);\n      }\n\n      return null;\n    }, n.prototype.indexOf = function (t) {\n      for (var e = 0, n = this.root; !n.isEmpty();) {\n        var r = this.comparator(t, n.key);\n        if (0 === r) return e + n.left.size;\n        n = r < 0 ? n.left : (e += n.left.size + 1, n.right);\n      }\n\n      return -1;\n    }, n.prototype.isEmpty = function () {\n      return this.root.isEmpty();\n    }, Object.defineProperty(n.prototype, \"size\", {\n      get: function get() {\n        return this.root.size;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), n.prototype.minKey = function () {\n      return this.root.minKey();\n    }, n.prototype.maxKey = function () {\n      return this.root.maxKey();\n    }, n.prototype.inorderTraversal = function (t) {\n      return this.root.inorderTraversal(t);\n    }, n.prototype.forEach = function (n) {\n      this.inorderTraversal(function (t, e) {\n        return n(t, e), !1;\n      });\n    }, n.prototype.toString = function () {\n      var n = [];\n      return this.inorderTraversal(function (t, e) {\n        return n.push(t + \":\" + e), !1;\n      }), \"{\" + n.join(\", \") + \"}\";\n    }, n.prototype.reverseTraversal = function (t) {\n      return this.root.reverseTraversal(t);\n    }, n.prototype.getIterator = function () {\n      return new Gp(this.root, null, this.comparator, !1);\n    }, n.prototype.getIteratorFrom = function (t) {\n      return new Gp(this.root, t, this.comparator, !1);\n    }, n.prototype.getReverseIterator = function () {\n      return new Gp(this.root, null, this.comparator, !0);\n    }, n.prototype.getReverseIteratorFrom = function (t) {\n      return new Gp(this.root, t, this.comparator, !0);\n    }, n;\n  }(),\n      Gp = function () {\n    function t(t, e, n, r) {\n      this.isReverse = r, this.nodeStack = [];\n\n      for (var i = 1; !t.isEmpty();) {\n        if (i = e ? n(t.key, e) : 1, r && (i *= -1), i < 0) t = this.isReverse ? t.left : t.right;else {\n          if (0 === i) {\n            this.nodeStack.push(t);\n            break;\n          }\n\n          this.nodeStack.push(t), t = this.isReverse ? t.right : t.left;\n        }\n      }\n    }\n\n    return t.prototype.getNext = function () {\n      Uf(0 < this.nodeStack.length, \"getNext() called on iterator when hasNext() is false.\");\n      var t = this.nodeStack.pop(),\n          e = {\n        key: t.key,\n        value: t.value\n      };\n      if (this.isReverse) for (t = t.left; !t.isEmpty();) {\n        this.nodeStack.push(t), t = t.right;\n      } else for (t = t.right; !t.isEmpty();) {\n        this.nodeStack.push(t), t = t.left;\n      }\n      return e;\n    }, t.prototype.hasNext = function () {\n      return 0 < this.nodeStack.length;\n    }, t.prototype.peek = function () {\n      if (0 === this.nodeStack.length) return null;\n      var t = this.nodeStack[this.nodeStack.length - 1];\n      return {\n        key: t.key,\n        value: t.value\n      };\n    }, t;\n  }(),\n      zp = function () {\n    function o(t, e, n, r, i) {\n      this.key = t, this.value = e, this.color = null != n ? n : o.RED, this.left = null != r ? r : o.EMPTY, this.right = null != i ? i : o.EMPTY, this.size = this.left.size + 1 + this.right.size;\n    }\n\n    return o.prototype.copy = function (t, e, n, r, i) {\n      return new o(null != t ? t : this.key, null != e ? e : this.value, null != n ? n : this.color, null != r ? r : this.left, null != i ? i : this.right);\n    }, o.prototype.isEmpty = function () {\n      return !1;\n    }, o.prototype.inorderTraversal = function (t) {\n      return this.left.inorderTraversal(t) || t(this.key, this.value) || this.right.inorderTraversal(t);\n    }, o.prototype.reverseTraversal = function (t) {\n      return this.right.reverseTraversal(t) || t(this.key, this.value) || this.left.reverseTraversal(t);\n    }, o.prototype.min = function () {\n      return this.left.isEmpty() ? this : this.left.min();\n    }, o.prototype.minKey = function () {\n      return this.min().key;\n    }, o.prototype.maxKey = function () {\n      return this.right.isEmpty() ? this.key : this.right.maxKey();\n    }, o.prototype.insert = function (t, e, n) {\n      var r = this,\n          i = n(t, r.key);\n      return (r = i < 0 ? r.copy(null, null, null, r.left.insert(t, e, n), null) : 0 === i ? r.copy(null, e, null, null, null) : r.copy(null, null, null, null, r.right.insert(t, e, n))).fixUp();\n    }, o.prototype.removeMin = function () {\n      if (this.left.isEmpty()) return o.EMPTY;\n      var t = this;\n      return t.left.isRed() || t.left.left.isRed() || (t = t.moveRedLeft()), (t = t.copy(null, null, null, t.left.removeMin(), null)).fixUp();\n    }, o.prototype.remove = function (t, e) {\n      var n,\n          r = this;\n      if (e(t, r.key) < 0) r.left.isEmpty() || r.left.isRed() || r.left.left.isRed() || (r = r.moveRedLeft()), r = r.copy(null, null, null, r.left.remove(t, e), null);else {\n        if (r.left.isRed() && (r = r.rotateRight()), r.right.isEmpty() || r.right.isRed() || r.right.left.isRed() || (r = r.moveRedRight()), 0 === e(t, r.key)) {\n          if (r.right.isEmpty()) return o.EMPTY;\n          n = r.right.min(), r = r.copy(n.key, n.value, null, null, r.right.removeMin());\n        }\n\n        r = r.copy(null, null, null, null, r.right.remove(t, e));\n      }\n      return r.fixUp();\n    }, o.prototype.isRed = function () {\n      return this.color;\n    }, o.prototype.fixUp = function () {\n      var t = this;\n      return t.right.isRed() && !t.left.isRed() && (t = t.rotateLeft()), t.left.isRed() && t.left.left.isRed() && (t = t.rotateRight()), t.left.isRed() && t.right.isRed() && (t = t.colorFlip()), t;\n    }, o.prototype.moveRedLeft = function () {\n      var t = this.colorFlip();\n      return t.right.left.isRed() && (t = (t = (t = t.copy(null, null, null, null, t.right.rotateRight())).rotateLeft()).colorFlip()), t;\n    }, o.prototype.moveRedRight = function () {\n      var t = this.colorFlip();\n      return t.left.left.isRed() && (t = (t = t.rotateRight()).colorFlip()), t;\n    }, o.prototype.rotateLeft = function () {\n      var t = this.copy(null, null, o.RED, null, this.right.left);\n      return this.right.copy(null, null, this.color, t, null);\n    }, o.prototype.rotateRight = function () {\n      var t = this.copy(null, null, o.RED, this.left.right, null);\n      return this.left.copy(null, null, this.color, null, t);\n    }, o.prototype.colorFlip = function () {\n      var t = this.left.copy(null, null, !this.left.color, null, null),\n          e = this.right.copy(null, null, !this.right.color, null, null);\n      return this.copy(null, null, !this.color, t, e);\n    }, o.prototype.checkMaxDepth = function () {\n      var t = this.check();\n      return Math.pow(2, t) <= this.size + 1;\n    }, o.prototype.check = function () {\n      if (this.isRed() && this.left.isRed()) throw Ff(\"Red node has red child(\" + this.key + \",\" + this.value + \")\");\n      if (this.right.isRed()) throw Ff(\"Right child of (\" + this.key + \",\" + this.value + \") is red\");\n      var t = this.left.check();\n      if (t !== this.right.check()) throw Ff(\"Black depths differ\");\n      return t + (this.isRed() ? 0 : 1);\n    }, o.EMPTY = null, o.RED = !0, o.BLACK = !1, o;\n  }(),\n      Yp = function () {\n    function t() {\n      this.size = 0;\n    }\n\n    return t.prototype.copy = function (t, e, n, r, i) {\n      return this;\n    }, t.prototype.insert = function (t, e, n) {\n      return new zp(t, e);\n    }, t.prototype.remove = function (t, e) {\n      return this;\n    }, t.prototype.isEmpty = function () {\n      return !0;\n    }, t.prototype.inorderTraversal = function (t) {\n      return !1;\n    }, t.prototype.reverseTraversal = function (t) {\n      return !1;\n    }, t.prototype.minKey = function () {\n      return null;\n    }, t.prototype.maxKey = function () {\n      return null;\n    }, t.prototype.isRed = function () {\n      return !1;\n    }, t.prototype.checkMaxDepth = function () {\n      return !0;\n    }, t.prototype.check = function () {\n      return 0;\n    }, t;\n  }();\n\n  zp.EMPTY = new Yp();\n\n  var Xp = function () {\n    function o(t) {\n      this.comparator = t, this.data = new Hp(this.comparator);\n    }\n\n    return o.fromMapKeys = function (t) {\n      var e = new o(t.comparator);\n      return t.forEach(function (t) {\n        e = e.add(t);\n      }), e;\n    }, o.prototype.has = function (t) {\n      return null !== this.data.get(t);\n    }, o.prototype.first = function () {\n      return this.data.minKey();\n    }, o.prototype.last = function () {\n      return this.data.maxKey();\n    }, Object.defineProperty(o.prototype, \"size\", {\n      get: function get() {\n        return this.data.size;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), o.prototype.indexOf = function (t) {\n      return this.data.indexOf(t);\n    }, o.prototype.forEach = function (n) {\n      this.data.inorderTraversal(function (t, e) {\n        return n(t), !1;\n      });\n    }, o.prototype.forEachInRange = function (t, e) {\n      for (var n = this.data.getIteratorFrom(t[0]); n.hasNext();) {\n        var r = n.getNext();\n        if (0 <= this.comparator(r.key, t[1])) return;\n        e(r.key);\n      }\n    }, o.prototype.forEachWhile = function (t, e) {\n      var n;\n\n      for (n = void 0 !== e ? this.data.getIteratorFrom(e) : this.data.getIterator(); n.hasNext();) {\n        if (!t(n.getNext().key)) return;\n      }\n    }, o.prototype.firstAfterOrEqual = function (t) {\n      var e = this.data.getIteratorFrom(t);\n      return e.hasNext() ? e.getNext().key : null;\n    }, o.prototype.getIterator = function () {\n      return new Jp(this.data.getIterator());\n    }, o.prototype.getIteratorFrom = function (t) {\n      return new Jp(this.data.getIteratorFrom(t));\n    }, o.prototype.add = function (t) {\n      return this.copy(this.data.remove(t).insert(t, !0));\n    }, o.prototype.delete = function (t) {\n      return this.has(t) ? this.copy(this.data.remove(t)) : this;\n    }, o.prototype.isEmpty = function () {\n      return this.data.isEmpty();\n    }, o.prototype.unionWith = function (t) {\n      var e = this;\n      return t.forEach(function (t) {\n        e = e.add(t);\n      }), e;\n    }, o.prototype.isEqual = function (t) {\n      if (!(t instanceof o)) return !1;\n      if (this.size !== t.size) return !1;\n\n      for (var e = this.data.getIterator(), n = t.data.getIterator(); e.hasNext();) {\n        var r = e.getNext().key,\n            i = n.getNext().key;\n        if (0 !== this.comparator(r, i)) return !1;\n      }\n\n      return !0;\n    }, o.prototype.toArray = function () {\n      var e = [];\n      return this.forEach(function (t) {\n        e.push(t);\n      }), e;\n    }, o.prototype.toString = function () {\n      var e = [];\n      return this.forEach(function (t) {\n        return e.push(t);\n      }), \"SortedSet(\" + e.toString() + \")\";\n    }, o.prototype.copy = function (t) {\n      var e = new o(this.comparator);\n      return e.data = t, e;\n    }, o;\n  }(),\n      Jp = function () {\n    function t(t) {\n      this.iter = t;\n    }\n\n    return t.prototype.getNext = function () {\n      return this.iter.getNext().key;\n    }, t.prototype.hasNext = function () {\n      return this.iter.hasNext();\n    }, t;\n  }(),\n      $p = new Hp(Op.comparator);\n\n  function Zp() {\n    return $p;\n  }\n\n  function td() {\n    return Zp();\n  }\n\n  var ed = new Hp(Op.comparator);\n\n  function nd() {\n    return ed;\n  }\n\n  var rd = new Hp(Op.comparator);\n\n  function id() {\n    return rd;\n  }\n\n  var od = new Xp(Op.comparator);\n\n  function ad() {\n    for (var t = [], e = 0; e < arguments.length; e++) {\n      t[e] = arguments[e];\n    }\n\n    for (var n = od, r = 0, i = t; r < i.length; r++) {\n      var o = i[r];\n      n = n.add(o);\n    }\n\n    return n;\n  }\n\n  var sd = new Xp(dp);\n\n  function ud() {\n    return sd;\n  }\n\n  var cd = function () {\n    function t(t, e, n, r) {\n      this.batchId = t, this.localWriteTime = e, this.baseMutations = n, Uf(0 < (this.mutations = r).length, \"Cannot create an empty mutation batch\");\n    }\n\n    return t.prototype.applyToRemoteDocument = function (t, e, n) {\n      e && Uf(e.key.isEqual(t), \"applyToRemoteDocument: key \" + t + \" should match maybeDoc key\\n        \" + e.key);\n      var r = n.mutationResults;\n      Uf(r.length === this.mutations.length, \"Mismatch between mutations length\\n      (\" + this.mutations.length + \") and mutation results length\\n      (\" + r.length + \").\");\n\n      for (var i = 0; i < this.mutations.length; i++) {\n        var o = this.mutations[i];\n\n        if (o.key.isEqual(t)) {\n          var a = r[i];\n          e = o.applyToRemoteDocument(e, a);\n        }\n      }\n\n      return e;\n    }, t.prototype.applyToLocalView = function (t, e) {\n      e && Uf(e.key.isEqual(t), \"applyToLocalDocument: key \" + t + \" should match maybeDoc key\\n        \" + e.key);\n\n      for (var n = 0, r = this.baseMutations; n < r.length; n++) {\n        (s = r[n]).key.isEqual(t) && (e = s.applyToLocalView(e, e, this.localWriteTime));\n      }\n\n      for (var i = e, o = 0, a = this.mutations; o < a.length; o++) {\n        var s;\n        (s = a[o]).key.isEqual(t) && (e = s.applyToLocalView(e, i, this.localWriteTime));\n      }\n\n      return e;\n    }, t.prototype.applyToLocalDocumentSet = function (n) {\n      var r = this,\n          i = n;\n      return this.mutations.forEach(function (t) {\n        var e = r.applyToLocalView(t.key, n.get(t.key));\n        e && (i = i.insert(t.key, e));\n      }), i;\n    }, t.prototype.keys = function () {\n      return this.mutations.reduce(function (t, e) {\n        return t.add(e.key);\n      }, ad());\n    }, t.prototype.isEqual = function (t) {\n      return this.batchId === t.batchId && yp(this.mutations, t.mutations) && yp(this.baseMutations, t.baseMutations);\n    }, t;\n  }(),\n      hd = function () {\n    function s(t, e, n, r, i) {\n      this.batch = t, this.commitVersion = e, this.mutationResults = n, this.streamToken = r, this.docVersions = i;\n    }\n\n    return s.from = function (t, e, n, r) {\n      Uf(t.mutations.length === n.length, \"Mutations sent \" + t.mutations.length + \" must equal results received \" + n.length);\n\n      for (var i = id(), o = t.mutations, a = 0; a < o.length; a++) {\n        i = i.insert(o[a].key, n[a].version);\n      }\n\n      return new s(t, e, n, r, i);\n    }, s;\n  }(),\n      ld = function () {\n    function a(t) {\n      var e = this;\n      this.nextCallback = null, this.catchCallback = null, this.result = void 0, this.error = void 0, this.isDone = !1, this.callbackAttached = !1, t(function (t) {\n        e.isDone = !0, e.result = t, e.nextCallback && e.nextCallback(t);\n      }, function (t) {\n        e.isDone = !0, e.error = t, e.catchCallback && e.catchCallback(t);\n      });\n    }\n\n    return a.prototype.catch = function (t) {\n      return this.next(void 0, t);\n    }, a.prototype.next = function (r, i) {\n      var o = this;\n      return this.callbackAttached && Ff(\"Called next() or catch() twice for PersistencePromise\"), this.callbackAttached = !0, this.isDone ? this.error ? this.wrapFailure(i, this.error) : this.wrapSuccess(r, this.result) : new a(function (e, n) {\n        o.nextCallback = function (t) {\n          o.wrapSuccess(r, t).next(e, n);\n        }, o.catchCallback = function (t) {\n          o.wrapFailure(i, t).next(e, n);\n        };\n      });\n    }, a.prototype.toPromise = function () {\n      var n = this;\n      return new Promise(function (t, e) {\n        n.next(t, e);\n      });\n    }, a.prototype.wrapUserFunction = function (t) {\n      try {\n        var e = t();\n        return e instanceof a ? e : a.resolve(e);\n      } catch (t) {\n        return a.reject(t);\n      }\n    }, a.prototype.wrapSuccess = function (t, e) {\n      return t ? this.wrapUserFunction(function () {\n        return t(e);\n      }) : a.resolve(e);\n    }, a.prototype.wrapFailure = function (t, e) {\n      return t ? this.wrapUserFunction(function () {\n        return t(e);\n      }) : a.reject(e);\n    }, a.resolve = function (n) {\n      return new a(function (t, e) {\n        t(n);\n      });\n    }, a.reject = function (n) {\n      return new a(function (t, e) {\n        e(n);\n      });\n    }, a.waitFor = function (t) {\n      return new a(function (e, n) {\n        var r = 0,\n            i = 0,\n            o = !1;\n        t.forEach(function (t) {\n          ++r, t.next(function () {\n            ++i, o && i === r && e();\n          }, function (t) {\n            return n(t);\n          });\n        }), o = !0, i === r && e();\n      });\n    }, a.or = function (t) {\n      for (var n = a.resolve(!1), e = function e(_e4) {\n        n = n.next(function (t) {\n          return t ? a.resolve(t) : _e4();\n        });\n      }, r = 0, i = t; r < i.length; r++) {\n        e(i[r]);\n      }\n\n      return n;\n    }, a.forEach = function (t, n) {\n      var r = this,\n          i = [];\n      return t.forEach(function (t, e) {\n        i.push(n.call(r, t, e));\n      }), this.waitFor(i);\n    }, a;\n  }(),\n      fd = function () {\n    function i(t, e, n, r) {\n      this.userId = t, this.serializer = e, this.indexManager = n, this.referenceDelegate = r, this.documentKeysByBatchId = {};\n    }\n\n    return i.forUser = function (t, e, n, r) {\n      return Uf(\"\" !== t.uid, \"UserID must not be an empty string.\"), new i(t.isAuthenticated() ? t.uid : \"\", e, n, r);\n    }, i.prototype.checkEmpty = function (t) {\n      var r = !0,\n          e = IDBKeyRange.bound([this.userId, Number.NEGATIVE_INFINITY], [this.userId, Number.POSITIVE_INFINITY]);\n      return md(t).iterate({\n        index: ny.userMutationsIndex,\n        range: e\n      }, function (t, e, n) {\n        r = !1, n.done();\n      }).next(function () {\n        return r;\n      });\n    }, i.prototype.acknowledgeBatch = function (e, t, n) {\n      return this.getMutationQueueMetadata(e).next(function (t) {\n        return t.lastStreamToken = yd(n), vd(e).put(t);\n      });\n    }, i.prototype.getLastStreamToken = function (t) {\n      return this.getMutationQueueMetadata(t).next(function (t) {\n        return t.lastStreamToken;\n      });\n    }, i.prototype.setLastStreamToken = function (e, n) {\n      return this.getMutationQueueMetadata(e).next(function (t) {\n        return t.lastStreamToken = yd(n), vd(e).put(t);\n      });\n    }, i.prototype.addMutationBatch = function (u, c, h, l) {\n      var f = this,\n          p = gd(u),\n          d = md(u);\n      return d.add({}).next(function (t) {\n        Uf(\"number\" == typeof t, \"Auto-generated key is not a number\");\n        var e = new cd(t, c, h, l),\n            n = f.serializer.toDbMutationBatch(f.userId, e);\n        f.documentKeysByBatchId[t] = e.keys();\n\n        for (var r = [], i = 0, o = l; i < o.length; i++) {\n          var a = o[i],\n              s = ry.key(f.userId, a.key.path, t);\n          r.push(d.put(n)), r.push(p.put(s, ry.PLACEHOLDER)), r.push(f.indexManager.addToCollectionParentIndex(u, a.key.path.popLast()));\n        }\n\n        return ld.waitFor(r).next(function () {\n          return e;\n        });\n      });\n    }, i.prototype.lookupMutationBatch = function (t, e) {\n      var n = this;\n      return md(t).get(e).next(function (t) {\n        return t ? (Uf(t.userId === n.userId, \"Unexpected user '\" + t.userId + \"' for mutation batch \" + e), n.serializer.fromDbMutationBatch(t)) : null;\n      });\n    }, i.prototype.lookupMutationKeys = function (t, n) {\n      var r = this;\n      return this.documentKeysByBatchId[n] ? ld.resolve(this.documentKeysByBatchId[n]) : this.lookupMutationBatch(t, n).next(function (t) {\n        if (t) {\n          var e = t.keys();\n          return r.documentKeysByBatchId[n] = e;\n        }\n\n        return null;\n      });\n    }, i.prototype.getNextMutationBatchAfterBatchId = function (t, e) {\n      var r = this,\n          i = e + 1,\n          n = IDBKeyRange.lowerBound([this.userId, i]),\n          o = null;\n      return md(t).iterate({\n        index: ny.userMutationsIndex,\n        range: n\n      }, function (t, e, n) {\n        e.userId === r.userId && (Uf(e.batchId >= i, \"Should have found mutation after \" + i), o = r.serializer.fromDbMutationBatch(e)), n.done();\n      }).next(function () {\n        return o;\n      });\n    }, i.prototype.getAllMutationBatches = function (t) {\n      var e = this,\n          n = IDBKeyRange.bound([this.userId, -1], [this.userId, Number.POSITIVE_INFINITY]);\n      return md(t).loadAll(ny.userMutationsIndex, n).next(function (t) {\n        return t.map(function (t) {\n          return e.serializer.fromDbMutationBatch(t);\n        });\n      });\n    }, i.prototype.getAllMutationBatchesAffectingDocumentKey = function (s, u) {\n      var c = this,\n          t = ry.prefixForPath(this.userId, u.path),\n          e = IDBKeyRange.lowerBound(t),\n          h = [];\n      return gd(s).iterate({\n        range: e\n      }, function (e, t, n) {\n        var r = e[0],\n            i = e[1],\n            o = e[2],\n            a = Wp(i);\n        if (r === c.userId && u.path.isEqual(a)) return md(s).get(o).next(function (t) {\n          if (!t) throw Ff(\"Dangling document-mutation reference found: \" + e + \" which points to \" + o);\n          Uf(t.userId === c.userId, \"Unexpected user '\" + t.userId + \"' for mutation batch \" + o), h.push(c.serializer.fromDbMutationBatch(t));\n        });\n        n.done();\n      }).next(function () {\n        return h;\n      });\n    }, i.prototype.getAllMutationBatchesAffectingDocumentKeys = function (r, t) {\n      var u = this,\n          c = new Xp(dp),\n          i = [];\n      return t.forEach(function (s) {\n        var t = ry.prefixForPath(u.userId, s.path),\n            e = IDBKeyRange.lowerBound(t),\n            n = gd(r).iterate({\n          range: e\n        }, function (t, e, n) {\n          var r = t[0],\n              i = t[1],\n              o = t[2],\n              a = Wp(i);\n          r === u.userId && s.path.isEqual(a) ? c = c.add(o) : n.done();\n        });\n        i.push(n);\n      }), ld.waitFor(i).next(function () {\n        return u.lookupMutationBatches(r, c);\n      });\n    }, i.prototype.getAllMutationBatchesAffectingQuery = function (t, e) {\n      var s = this;\n      Uf(!e.isDocumentQuery(), \"Document queries shouldn't go down this path\"), Uf(!e.isCollectionGroupQuery(), \"CollectionGroup queries should be handled in LocalDocumentsView\");\n      var u = e.path,\n          c = u.length + 1,\n          n = ry.prefixForPath(this.userId, u),\n          r = IDBKeyRange.lowerBound(n),\n          h = new Xp(dp);\n      return gd(t).iterate({\n        range: r\n      }, function (t, e, n) {\n        var r = t[0],\n            i = t[1],\n            o = t[2],\n            a = Wp(i);\n        r === s.userId && u.isPrefixOf(a) ? a.length === c && (h = h.add(o)) : n.done();\n      }).next(function () {\n        return s.lookupMutationBatches(t, h);\n      });\n    }, i.prototype.lookupMutationBatches = function (t, e) {\n      var n = this,\n          r = [],\n          i = [];\n      return e.forEach(function (e) {\n        i.push(md(t).get(e).next(function (t) {\n          if (null === t) throw Ff(\"Dangling document-mutation reference found, which points to \" + e);\n          Uf(t.userId === n.userId, \"Unexpected user '\" + t.userId + \"' for mutation batch \" + e), r.push(n.serializer.fromDbMutationBatch(t));\n        }));\n      }), ld.waitFor(i).next(function () {\n        return r;\n      });\n    }, i.prototype.removeMutationBatch = function (e, n) {\n      var r = this;\n      return dd(e.simpleDbTransaction, this.userId, n).next(function (t) {\n        return r.removeCachedMutationKeys(n.batchId), ld.forEach(t, function (t) {\n          return r.referenceDelegate.removeMutationReference(e, t);\n        });\n      });\n    }, i.prototype.removeCachedMutationKeys = function (t) {\n      delete this.documentKeysByBatchId[t];\n    }, i.prototype.performConsistencyCheck = function (n) {\n      var o = this;\n      return this.checkEmpty(n).next(function (t) {\n        if (!t) return ld.resolve();\n        var e = IDBKeyRange.lowerBound(ry.prefixForUser(o.userId)),\n            i = [];\n        return gd(n).iterate({\n          range: e\n        }, function (t, e, n) {\n          if (t[0] === o.userId) {\n            var r = Wp(t[1]);\n            i.push(r);\n          } else n.done();\n        }).next(function () {\n          Uf(0 === i.length, \"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: \" + i.map(function (t) {\n            return t.canonicalString();\n          }));\n        });\n      });\n    }, i.prototype.containsKey = function (t, e) {\n      return pd(t, this.userId, e);\n    }, i.prototype.getMutationQueueMetadata = function (t) {\n      var e = this;\n      return vd(t).get(this.userId).next(function (t) {\n        return t || new ey(e.userId, -1, \"\");\n      });\n    }, i;\n  }();\n\n  function pd(t, o, e) {\n    var n = ry.prefixForPath(o, e.path),\n        a = n[1],\n        r = IDBKeyRange.lowerBound(n),\n        s = !1;\n    return gd(t).iterate({\n      range: r,\n      keysOnly: !0\n    }, function (t, e, n) {\n      var r = t[0],\n          i = t[1];\n      t[2];\n      r === o && i === a && (s = !0), n.done();\n    }).next(function () {\n      return s;\n    });\n  }\n\n  function dd(t, e, n) {\n    var r = t.store(ny.store),\n        i = t.store(ry.store),\n        o = [],\n        a = IDBKeyRange.only(n.batchId),\n        s = 0,\n        u = r.iterate({\n      range: a\n    }, function (t, e, n) {\n      return s++, n.delete();\n    });\n    o.push(u.next(function () {\n      Uf(1 === s, \"Dangling document-mutation reference found: Missing batch \" + n.batchId);\n    }));\n\n    for (var c = [], h = 0, l = n.mutations; h < l.length; h++) {\n      var f = l[h],\n          p = ry.key(e, f.key.path, n.batchId);\n      o.push(i.delete(p)), c.push(f.key);\n    }\n\n    return ld.waitFor(o).next(function () {\n      return c;\n    });\n  }\n\n  function yd(t) {\n    return t instanceof Uint8Array ? (Uf(\"YES\" === process.env.USE_MOCK_PERSISTENCE, \"Persisting non-string stream tokens is only supported with mock persistence.\"), t.toString()) : t;\n  }\n\n  function md(t) {\n    return Oy.getStore(t, ny.store);\n  }\n\n  function gd(t) {\n    return Oy.getStore(t, ry.store);\n  }\n\n  function vd(t) {\n    return Oy.getStore(t, ey.store);\n  }\n\n  var bd, wd;\n  (wd = bd || (bd = {}))[wd.QueryCache = 0] = \"QueryCache\", wd[wd.SyncEngine = 1] = \"SyncEngine\";\n\n  var _d = function () {\n    function t(t, e) {\n      Uf((1 & (this.generatorId = t)) === t, \"Generator ID \" + t + \" contains more than 1 reserved bits\"), this.seek(void 0 !== e ? e : this.generatorId);\n    }\n\n    return t.prototype.next = function () {\n      var t = this.nextId;\n      return this.nextId += 2, t;\n    }, t.prototype.after = function (t) {\n      return this.seek(t + 2), this.next();\n    }, t.prototype.seek = function (t) {\n      Uf((1 & t) === this.generatorId, \"Cannot supply target ID from different generator ID\"), this.nextId = t;\n    }, t.forQueryCache = function () {\n      return new t(bd.QueryCache, 2);\n    }, t.forSyncEngine = function () {\n      return new t(bd.SyncEngine);\n    }, t;\n  }(),\n      Ed = \"SimpleDb\",\n      Td = function () {\n    function s(t) {\n      this.db = t, 12.2 === s.getIOSVersion(wi()) && Mf(\"Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.\");\n    }\n\n    return s.openOrCreate = function (o, t, a) {\n      return Uf(s.isAvailable(), \"IndexedDB not supported in current environment.\"), xf(Ed, \"Opening database:\", o), new ld(function (n, r) {\n        var i = window.indexedDB.open(o, t);\n        i.onsuccess = function (t) {\n          var e = t.target.result;\n          n(new s(e));\n        }, i.onblocked = function () {\n          r(new jf(Bf.FAILED_PRECONDITION, \"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed.\"));\n        }, i.onerror = function (t) {\n          var e = t.target.error;\n          \"VersionError\" === e.name ? r(new jf(Bf.FAILED_PRECONDITION, \"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.\")) : r(e);\n        }, i.onupgradeneeded = function (t) {\n          xf(Ed, 'Database \"' + o + '\" requires upgrade from version:', t.oldVersion);\n          var e = t.target.result,\n              n = new Id(i.transaction);\n          a.createOrUpgrade(e, n, t.oldVersion, Jd).next(function () {\n            xf(Ed, \"Database upgrade to version \" + Jd + \" complete\");\n          });\n        };\n      }).toPromise();\n    }, s.delete = function (t) {\n      return xf(Ed, \"Removing database:\", t), Nd(window.indexedDB.deleteDatabase(t)).toPromise();\n    }, s.isAvailable = function () {\n      if (\"undefined\" == typeof window || null == window.indexedDB) return !1;\n      if (void 0 === window.navigator) return \"YES\" === process.env.USE_MOCK_PERSISTENCE;\n      var t = wi(),\n          e = s.getIOSVersion(t),\n          n = 0 < e && e < 10,\n          r = s.getAndroidVersion(t),\n          i = 0 < r && r < 4.5;\n      return !(0 < t.indexOf(\"MSIE \") || 0 < t.indexOf(\"Trident/\") || 0 < t.indexOf(\"Edge/\") || n || i);\n    }, s.getStore = function (t, e) {\n      return t.store(e);\n    }, s.getIOSVersion = function (t) {\n      var e = t.match(/i(?:phone|pad|pod) os ([\\d_]+)/i),\n          n = e ? e[1].split(\"_\").slice(0, 2).join(\".\") : \"-1\";\n      return Number(n);\n    }, s.getAndroidVersion = function (t) {\n      var e = t.match(/Android ([\\d.]+)/i),\n          n = e ? e[1].split(\".\").slice(0, 2).join(\".\") : \"-1\";\n      return Number(n);\n    }, s.prototype.setVersionChangeListener = function (e) {\n      this.db.onversionchange = function (t) {\n        return e(t);\n      };\n    }, s.prototype.runTransaction = function (t, e, n) {\n      var r = Id.open(this.db, t, e),\n          i = n(r).catch(function (t) {\n        return r.abort(t), ld.reject(t);\n      }).toPromise();\n      return i.catch(function () {}), r.completionPromise.then(function () {\n        return i;\n      });\n    }, s.prototype.close = function () {\n      this.db.close();\n    }, s;\n  }(),\n      Sd = function () {\n    function t(t) {\n      this.dbCursor = t, this.shouldStop = !1, this.nextKey = null;\n    }\n\n    return Object.defineProperty(t.prototype, \"isDone\", {\n      get: function get() {\n        return this.shouldStop;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"skipToKey\", {\n      get: function get() {\n        return this.nextKey;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"cursor\", {\n      set: function set(t) {\n        this.dbCursor = t;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.done = function () {\n      this.shouldStop = !0;\n    }, t.prototype.skip = function (t) {\n      this.nextKey = t;\n    }, t.prototype.delete = function () {\n      return Nd(this.dbCursor.delete());\n    }, t;\n  }(),\n      Id = function () {\n    function r(t) {\n      var n = this;\n      this.transaction = t, this.aborted = !1, this.completionDeferred = new Pp(), this.transaction.oncomplete = function () {\n        n.completionDeferred.resolve();\n      }, this.transaction.onabort = function () {\n        t.error ? n.completionDeferred.reject(t.error) : n.completionDeferred.resolve();\n      }, this.transaction.onerror = function (t) {\n        var e = kd(t.target.error);\n        n.completionDeferred.reject(e);\n      };\n    }\n\n    return r.open = function (t, e, n) {\n      return new r(t.transaction(n, e));\n    }, Object.defineProperty(r.prototype, \"completionPromise\", {\n      get: function get() {\n        return this.completionDeferred.promise;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), r.prototype.abort = function (t) {\n      t && this.completionDeferred.reject(t), this.aborted || (xf(Ed, \"Aborting transaction:\", t ? t.message : \"Client-initiated abort\"), this.aborted = !0, this.transaction.abort());\n    }, r.prototype.store = function (t) {\n      var e = this.transaction.objectStore(t);\n      return Uf(!!e, \"Object store not part of transaction: \" + t), new Cd(e);\n    }, r;\n  }(),\n      Cd = function () {\n    function t(t) {\n      this.store = t;\n    }\n\n    return t.prototype.put = function (t, e) {\n      return Nd(void 0 !== e ? (xf(Ed, \"PUT\", this.store.name, t, e), this.store.put(e, t)) : (xf(Ed, \"PUT\", this.store.name, \"<auto-key>\", t), this.store.put(t)));\n    }, t.prototype.add = function (t) {\n      return xf(Ed, \"ADD\", this.store.name, t, t), Nd(this.store.add(t));\n    }, t.prototype.get = function (e) {\n      var n = this;\n      return Nd(this.store.get(e)).next(function (t) {\n        return void 0 === t && (t = null), xf(Ed, \"GET\", n.store.name, e, t), t;\n      });\n    }, t.prototype.delete = function (t) {\n      return xf(Ed, \"DELETE\", this.store.name, t), Nd(this.store.delete(t));\n    }, t.prototype.count = function () {\n      return xf(Ed, \"COUNT\", this.store.name), Nd(this.store.count());\n    }, t.prototype.loadAll = function (t, e) {\n      var n = this.cursor(this.options(t, e)),\n          r = [];\n      return this.iterateCursor(n, function (t, e) {\n        r.push(e);\n      }).next(function () {\n        return r;\n      });\n    }, t.prototype.deleteAll = function (t, e) {\n      xf(Ed, \"DELETE ALL\", this.store.name);\n      var n = this.options(t, e);\n      n.keysOnly = !1;\n      var r = this.cursor(n);\n      return this.iterateCursor(r, function (t, e, n) {\n        return n.delete();\n      });\n    }, t.prototype.iterate = function (t, e) {\n      var n;\n      e ? n = t : (n = {}, e = t);\n      var r = this.cursor(n);\n      return this.iterateCursor(r, e);\n    }, t.prototype.iterateSerial = function (i) {\n      var t = this.cursor({});\n      return new ld(function (n, r) {\n        t.onerror = function (t) {\n          var e = kd(t.target.error);\n          r(e);\n        }, t.onsuccess = function (t) {\n          var e = t.target.result;\n          e ? i(e.primaryKey, e.value).next(function (t) {\n            t ? e.continue() : n();\n          }) : n();\n        };\n      });\n    }, t.prototype.iterateCursor = function (t, a) {\n      var s = [];\n      return new ld(function (o, e) {\n        t.onerror = function (t) {\n          e(t.target.error);\n        }, t.onsuccess = function (t) {\n          var e = t.target.result;\n\n          if (e) {\n            var n = new Sd(e),\n                r = a(e.primaryKey, e.value, n);\n\n            if (r instanceof ld) {\n              var i = r.catch(function (t) {\n                return n.done(), ld.reject(t);\n              });\n              s.push(i);\n            }\n\n            n.isDone ? o() : null === n.skipToKey ? e.continue() : e.continue(n.skipToKey);\n          } else o();\n        };\n      }).next(function () {\n        return ld.waitFor(s);\n      });\n    }, t.prototype.options = function (t, e) {\n      var n = void 0;\n      return void 0 !== t && (\"string\" == typeof t ? n = t : (Uf(void 0 === e, \"3rd argument must not be defined if 2nd is a range.\"), e = t)), {\n        index: n,\n        range: e\n      };\n    }, t.prototype.cursor = function (t) {\n      var e = \"next\";\n\n      if (t.reverse && (e = \"prev\"), t.index) {\n        var n = this.store.index(t.index);\n        return t.keysOnly ? n.openKeyCursor(t.range, e) : n.openCursor(t.range, e);\n      }\n\n      return this.store.openCursor(t.range, e);\n    }, t;\n  }();\n\n  function Nd(t) {\n    return new ld(function (n, r) {\n      t.onsuccess = function (t) {\n        var e = t.target.result;\n        n(e);\n      }, t.onerror = function (t) {\n        var e = kd(t.target.error);\n        r(e);\n      };\n    });\n  }\n\n  var Ad = !1;\n\n  function kd(t) {\n    var e = Td.getIOSVersion(wi());\n\n    if (12.2 <= e && e < 13) {\n      var n = \"An internal error was encountered in the Indexed Database server\";\n\n      if (0 <= t.message.indexOf(n)) {\n        var r = new jf(\"internal\", \"IOS_INDEXEDDB_BUG1: IndexedDb has thrown '\" + n + \"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.\");\n        return Ad || (Ad = !0, setTimeout(function () {\n          throw r;\n        }, 0)), r;\n      }\n    }\n\n    return t;\n  }\n\n  var Dd = function () {\n    function t(t, e) {\n      this.referenceDelegate = t, this.serializer = e, this.targetIdGenerator = _d.forQueryCache();\n    }\n\n    return t.prototype.allocateTargetId = function (e) {\n      var n = this;\n      return this.retrieveMetadata(e).next(function (t) {\n        return t.highestTargetId = n.targetIdGenerator.after(t.highestTargetId), n.saveMetadata(e, t).next(function () {\n          return t.highestTargetId;\n        });\n      });\n    }, t.prototype.getLastRemoteSnapshotVersion = function (t) {\n      return this.retrieveMetadata(t).next(function (t) {\n        return Qp.fromTimestamp(new Kp(t.lastRemoteSnapshotVersion.seconds, t.lastRemoteSnapshotVersion.nanoseconds));\n      });\n    }, t.prototype.getHighestSequenceNumber = function (t) {\n      return Pd(t.simpleDbTransaction);\n    }, t.prototype.setTargetsMetadata = function (e, n, r) {\n      var i = this;\n      return this.retrieveMetadata(e).next(function (t) {\n        return t.highestListenSequenceNumber = n, r && (t.lastRemoteSnapshotVersion = r.toTimestamp()), n > t.highestListenSequenceNumber && (t.highestListenSequenceNumber = n), i.saveMetadata(e, t);\n      });\n    }, t.prototype.addQueryData = function (e, n) {\n      var r = this;\n      return this.saveQueryData(e, n).next(function () {\n        return r.retrieveMetadata(e).next(function (t) {\n          return t.targetCount += 1, r.updateMetadataFromQueryData(n, t), r.saveMetadata(e, t);\n        });\n      });\n    }, t.prototype.updateQueryData = function (t, e) {\n      return this.saveQueryData(t, e);\n    }, t.prototype.removeQueryData = function (e, t) {\n      var n = this;\n      return this.removeMatchingKeysForTargetId(e, t.targetId).next(function () {\n        return Rd(e).delete(t.targetId);\n      }).next(function () {\n        return n.retrieveMetadata(e);\n      }).next(function (t) {\n        return Uf(0 < t.targetCount, \"Removing from an empty query cache\"), t.targetCount -= 1, n.saveMetadata(e, t);\n      });\n    }, t.prototype.removeTargets = function (r, i, o) {\n      var a = this,\n          s = 0,\n          u = [];\n      return Rd(r).iterate(function (t, e) {\n        var n = a.serializer.fromDbTarget(e);\n        n.sequenceNumber <= i && void 0 === o[n.targetId] && (s++, u.push(a.removeQueryData(r, n)));\n      }).next(function () {\n        return ld.waitFor(u);\n      }).next(function () {\n        return s;\n      });\n    }, t.prototype.forEachTarget = function (t, r) {\n      var i = this;\n      return Rd(t).iterate(function (t, e) {\n        var n = i.serializer.fromDbTarget(e);\n        r(n);\n      });\n    }, t.prototype.retrieveMetadata = function (t) {\n      return Od(t.simpleDbTransaction);\n    }, t.prototype.saveMetadata = function (t, e) {\n      return (n = t, Oy.getStore(n, hy.store)).put(hy.key, e);\n      var n;\n    }, t.prototype.saveQueryData = function (t, e) {\n      return Rd(t).put(this.serializer.toDbTarget(e));\n    }, t.prototype.updateMetadataFromQueryData = function (t, e) {\n      var n = !1;\n      return t.targetId > e.highestTargetId && (e.highestTargetId = t.targetId, n = !0), t.sequenceNumber > e.highestListenSequenceNumber && (e.highestListenSequenceNumber = t.sequenceNumber, n = !0), n;\n    }, t.prototype.getQueryCount = function (t) {\n      return this.retrieveMetadata(t).next(function (t) {\n        return t.targetCount;\n      });\n    }, t.prototype.getQueryData = function (t, i) {\n      var o = this,\n          e = i.canonicalId(),\n          n = IDBKeyRange.bound([e, Number.NEGATIVE_INFINITY], [e, Number.POSITIVE_INFINITY]),\n          a = null;\n      return Rd(t).iterate({\n        range: n,\n        index: uy.queryTargetsIndexName\n      }, function (t, e, n) {\n        var r = o.serializer.fromDbTarget(e);\n        i.isEqual(r.query) && (a = r, n.done());\n      }).next(function () {\n        return a;\n      });\n    }, t.prototype.addMatchingKeys = function (n, t, r) {\n      var i = this,\n          o = [],\n          a = xd(n);\n      return t.forEach(function (t) {\n        var e = Vp(t.path);\n        o.push(a.put(new cy(r, e))), o.push(i.referenceDelegate.addReference(n, t));\n      }), ld.waitFor(o);\n    }, t.prototype.removeMatchingKeys = function (n, t, r) {\n      var i = this,\n          o = xd(n);\n      return ld.forEach(t, function (t) {\n        var e = Vp(t.path);\n        return ld.waitFor([o.delete([r, e]), i.referenceDelegate.removeReference(n, t)]);\n      });\n    }, t.prototype.removeMatchingKeysForTargetId = function (t, e) {\n      var n = xd(t),\n          r = IDBKeyRange.bound([e], [e + 1], !1, !0);\n      return n.delete(r);\n    }, t.prototype.getMatchingKeysForTargetId = function (t, e) {\n      var n = IDBKeyRange.bound([e], [e + 1], !1, !0),\n          r = xd(t),\n          o = ad();\n      return r.iterate({\n        range: n,\n        keysOnly: !0\n      }, function (t, e, n) {\n        var r = Wp(t[1]),\n            i = new Op(r);\n        o = o.add(i);\n      }).next(function () {\n        return o;\n      });\n    }, t.prototype.containsKey = function (t, e) {\n      var n = Vp(e.path),\n          r = IDBKeyRange.bound([n], [mp(n)], !1, !0),\n          i = 0;\n      return xd(t).iterate({\n        index: cy.documentTargetsIndex,\n        keysOnly: !0,\n        range: r\n      }, function (t, e, n) {\n        var r = t[0];\n        t[1];\n        0 !== r && (i++, n.done());\n      }).next(function () {\n        return 0 < i;\n      });\n    }, t.prototype.getQueryDataForTarget = function (t, e) {\n      var n = this;\n      return Rd(t).get(e).next(function (t) {\n        return t ? n.serializer.fromDbTarget(t) : null;\n      });\n    }, t;\n  }();\n\n  function Rd(t) {\n    return Oy.getStore(t, uy.store);\n  }\n\n  function Od(t) {\n    return Td.getStore(t, hy.store).get(hy.key).next(function (t) {\n      return Uf(null !== t, \"Missing metadata row.\"), t;\n    });\n  }\n\n  function Pd(t) {\n    return Od(t).next(function (t) {\n      return t.highestListenSequenceNumber;\n    });\n  }\n\n  function xd(t) {\n    return Oy.getStore(t, cy.store);\n  }\n\n  var Md = function () {\n    function t(t, e) {\n      this.key = t, this.version = e;\n    }\n\n    return t.compareByKey = function (t, e) {\n      return Op.comparator(t.key, e.key);\n    }, t;\n  }(),\n      Ld = function (a) {\n    function e(t, e, n, r, i) {\n      var o = a.call(this, t, e) || this;\n      return o.data = n, o.proto = i, o.hasLocalMutations = !!r.hasLocalMutations, o.hasCommittedMutations = !!r.hasCommittedMutations, o;\n    }\n\n    return ii(e, a), e.prototype.field = function (t) {\n      return this.data.field(t);\n    }, e.prototype.fieldValue = function (t) {\n      var e = this.field(t);\n      return e ? e.value() : void 0;\n    }, e.prototype.value = function () {\n      return this.data.value();\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && this.key.isEqual(t.key) && this.version.isEqual(t.version) && this.data.isEqual(t.data) && this.hasLocalMutations === t.hasLocalMutations && this.hasCommittedMutations === t.hasCommittedMutations;\n    }, e.prototype.toString = function () {\n      return \"Document(\" + this.key + \", \" + this.version + \", \" + this.data.toString() + \", {hasLocalMutations: \" + this.hasLocalMutations + \"}), {hasCommittedMutations: \" + this.hasCommittedMutations + \"})\";\n    }, Object.defineProperty(e.prototype, \"hasPendingWrites\", {\n      get: function get() {\n        return this.hasLocalMutations || this.hasCommittedMutations;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), e.compareByField = function (t, e, n) {\n      var r = e.field(t),\n          i = n.field(t);\n      return null !== r && null !== i ? r.compareTo(i) : Ff(\"Trying to compare documents on fields that don't exist\");\n    }, e;\n  }(Md),\n      Fd = function (i) {\n    function e(t, e, n) {\n      var r = i.call(this, t, e) || this;\n      return r.hasCommittedMutations = !(!n || !n.hasCommittedMutations), r;\n    }\n\n    return ii(e, i), e.prototype.toString = function () {\n      return \"NoDocument(\" + this.key + \", \" + this.version + \")\";\n    }, Object.defineProperty(e.prototype, \"hasPendingWrites\", {\n      get: function get() {\n        return this.hasCommittedMutations;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), e.prototype.isEqual = function (t) {\n      return t instanceof e && t.hasCommittedMutations === this.hasCommittedMutations && t.version.isEqual(this.version) && t.key.isEqual(this.key);\n    }, e;\n  }(Md),\n      Ud = function (t) {\n    function e() {\n      return null !== t && t.apply(this, arguments) || this;\n    }\n\n    return ii(e, t), e.prototype.toString = function () {\n      return \"UnknownDocument(\" + this.key + \", \" + this.version + \")\";\n    }, Object.defineProperty(e.prototype, \"hasPendingWrites\", {\n      get: function get() {\n        return !0;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), e.prototype.isEqual = function (t) {\n      return t instanceof e && t.version.isEqual(this.version) && t.key.isEqual(this.key);\n    }, e;\n  }(Md),\n      qd = function () {\n    function t(t) {\n      this.mapKeyFn = t, this.inner = {};\n    }\n\n    return t.prototype.get = function (t) {\n      var e = this.mapKeyFn(t),\n          n = this.inner[e];\n      if (void 0 !== n) for (var r = 0, i = n; r < i.length; r++) {\n        var o = i[r],\n            a = o[0],\n            s = o[1];\n        if (a.isEqual(t)) return s;\n      }\n    }, t.prototype.has = function (t) {\n      return void 0 !== this.get(t);\n    }, t.prototype.set = function (t, e) {\n      var n = this.mapKeyFn(t),\n          r = this.inner[n];\n\n      if (void 0 !== r) {\n        for (var i = 0; i < r.length; i++) {\n          if (r[i][0].isEqual(t)) return void (r[i] = [t, e]);\n        }\n\n        r.push([t, e]);\n      } else this.inner[n] = [[t, e]];\n    }, t.prototype.delete = function (t) {\n      var e = this.mapKeyFn(t),\n          n = this.inner[e];\n      if (void 0 === n) return !1;\n\n      for (var r = 0; r < n.length; r++) {\n        if (n[r][0].isEqual(t)) return 1 === n.length ? delete this.inner[e] : n.splice(r, 1), !0;\n      }\n\n      return !1;\n    }, t.prototype.forEach = function (s) {\n      Gf(this.inner, function (t, e) {\n        for (var n = 0, r = e; n < r.length; n++) {\n          var i = r[n],\n              o = i[0],\n              a = i[1];\n          s(o, a);\n        }\n      });\n    }, t.prototype.isEmpty = function () {\n      return zf(this.inner);\n    }, t;\n  }(),\n      Vd = function () {\n    function t() {\n      this.changes = Zp(), this.documentSizes = new qd(function (t) {\n        return t.toString();\n      });\n    }\n\n    return t.prototype.addEntry = function (t) {\n      var e = this.assertChanges();\n      this.changes = e.insert(t.key, t);\n    }, t.prototype.getEntry = function (t, e) {\n      var n = this,\n          r = this.assertChanges().get(e);\n      return r ? ld.resolve(r) : this.getFromCache(t, e).next(function (t) {\n        return null === t ? (n.documentSizes.set(e, 0), null) : (n.documentSizes.set(e, t.size), t.maybeDocument);\n      });\n    }, t.prototype.getEntries = function (t, e) {\n      var n = this;\n      return this.getAllFromCache(t, e).next(function (t) {\n        var e = t.maybeDocuments;\n        return t.sizeMap.forEach(function (t, e) {\n          n.documentSizes.set(t, e);\n        }), e;\n      });\n    }, t.prototype.apply = function (t) {\n      var e = this.applyChanges(t);\n      return this.changes = null, e;\n    }, t.prototype.assertChanges = function () {\n      return Uf(null !== this.changes, \"Changes have already been applied.\"), this.changes;\n    }, t;\n  }(),\n      Bd = \"The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.\",\n      jd = function () {\n    function t(t, e, n) {\n      this.serializer = t, this.indexManager = e, this.keepDocumentChangeLog = n, this._lastProcessedDocumentChangeId = 0;\n    }\n\n    return Object.defineProperty(t.prototype, \"lastProcessedDocumentChangeId\", {\n      get: function get() {\n        return this._lastProcessedDocumentChangeId;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.start = function (t) {\n      var e = Td.getStore(t, py.store);\n      return this.synchronizeLastDocumentChangeId(e);\n    }, t.prototype.addEntries = function (t, e, n) {\n      var r = [];\n\n      if (0 < e.length) {\n        for (var i = Qd(t), o = ad(), a = 0, s = e; a < s.length; a++) {\n          var u = s[a],\n              c = u.key,\n              h = u.doc;\n          r.push(i.put(Gd(c), h)), o = o.add(c), r.push(this.indexManager.addToCollectionParentIndex(t, c.path.popLast()));\n        }\n\n        this.keepDocumentChangeLog && r.push(Hd(t).put({\n          changes: this.serializer.toDbResourcePaths(o)\n        })), r.push(this.updateSize(t, n));\n      }\n\n      return ld.waitFor(r);\n    }, t.prototype.removeEntry = function (t, e) {\n      var n = Qd(t),\n          r = Gd(e);\n      return n.get(r).next(function (t) {\n        return t ? n.delete(r).next(function () {\n          return zd(t);\n        }) : ld.resolve(0);\n      });\n    }, t.prototype.getEntry = function (t, e) {\n      var n = this;\n      return Qd(t).get(Gd(e)).next(function (t) {\n        return t ? n.serializer.fromDbRemoteDocument(t) : null;\n      });\n    }, t.prototype.getSizedEntry = function (t, e) {\n      var n = this;\n      return Qd(t).get(Gd(e)).next(function (t) {\n        return t ? {\n          maybeDocument: n.serializer.fromDbRemoteDocument(t),\n          size: zd(t)\n        } : null;\n      });\n    }, t.prototype.getEntries = function (t, e) {\n      var n = this,\n          r = td();\n      return this.forEachDbEntry(t, e, function (t, e) {\n        r = e ? r.insert(t, n.serializer.fromDbRemoteDocument(e)) : r.insert(t, null);\n      }).next(function () {\n        return r;\n      });\n    }, t.prototype.getSizedEntries = function (t, e) {\n      var n = this,\n          r = td(),\n          i = new Hp(Op.comparator);\n      return this.forEachDbEntry(t, e, function (t, e) {\n        i = e ? (r = r.insert(t, n.serializer.fromDbRemoteDocument(e)), i.insert(t, zd(e))) : (r = r.insert(t, null), i.insert(t, 0));\n      }).next(function () {\n        return {\n          maybeDocuments: r,\n          sizeMap: i\n        };\n      });\n    }, t.prototype.forEachDbEntry = function (t, e, i) {\n      if (e.isEmpty()) return ld.resolve();\n      var n = IDBKeyRange.bound(e.first().path.toArray(), e.last().path.toArray()),\n          o = e.getIterator(),\n          a = o.getNext();\n      return Qd(t).iterate({\n        range: n\n      }, function (t, e, n) {\n        for (var r = Op.fromSegments(t); a && Op.comparator(a, r) < 0;) {\n          i(a, null), a = o.getNext();\n        }\n\n        a && a.isEqual(r) && (i(a, e), a = o.hasNext() ? o.getNext() : null), a ? n.skip(a.path.toArray()) : n.done();\n      }).next(function () {\n        for (; a;) {\n          i(a, null), a = o.hasNext() ? o.getNext() : null;\n        }\n      });\n    }, t.prototype.getDocumentsMatchingQuery = function (t, i) {\n      var o = this;\n      Uf(!i.isCollectionGroupQuery(), \"CollectionGroup queries should be handled in LocalDocumentsView\");\n      var a = nd(),\n          s = i.path.length + 1,\n          e = i.path.toArray(),\n          n = IDBKeyRange.lowerBound(e);\n      return Qd(t).iterate({\n        range: n\n      }, function (t, e, n) {\n        if (t.length === s) {\n          var r = o.serializer.fromDbRemoteDocument(e);\n          i.path.isPrefixOf(r.key.path) ? r instanceof Ld && i.matches(r) && (a = a.insert(r.key, r)) : n.done();\n        }\n      }).next(function () {\n        return a;\n      });\n    }, t.prototype.getNewDocumentChanges = function (e) {\n      var r = this;\n      Uf(this.keepDocumentChangeLog, \"Can only call getNewDocumentChanges() when document change log is enabled\");\n      var n = ad(),\n          i = Zp(),\n          t = IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId + 1),\n          o = !0,\n          a = Hd(e);\n      return a.iterate({\n        range: t\n      }, function (t, e) {\n        if (o && (o = !1, r._lastProcessedDocumentChangeId + 1 !== e.id)) return r.synchronizeLastDocumentChangeId(a).next(function () {\n          return ld.reject(new jf(Bf.DATA_LOSS, Bd));\n        });\n        n = n.unionWith(r.serializer.fromDbResourcePaths(e.changes)), r._lastProcessedDocumentChangeId = e.id;\n      }).next(function () {\n        var t = [];\n        return n.forEach(function (n) {\n          t.push(r.getEntry(e, n).next(function (t) {\n            var e = t || new Fd(n, Qp.forDeletedDoc());\n            i = i.insert(n, e);\n          }));\n        }), ld.waitFor(t);\n      }).next(function () {\n        return i;\n      });\n    }, t.prototype.removeDocumentChangesThroughChangeId = function (t, e) {\n      var n = IDBKeyRange.upperBound(e);\n      return Hd(t).delete(n);\n    }, t.prototype.synchronizeLastDocumentChangeId = function (t) {\n      var r = this;\n      return this._lastProcessedDocumentChangeId = 0, t.iterate({\n        keysOnly: !0,\n        reverse: !0\n      }, function (t, e, n) {\n        r._lastProcessedDocumentChangeId = t, n.done();\n      });\n    }, t.prototype.newChangeBuffer = function () {\n      return new Kd(this);\n    }, t.prototype.getSize = function (t) {\n      return this.getMetadata(t).next(function (t) {\n        return t.byteSize;\n      });\n    }, t.prototype.getMetadata = function (t) {\n      return Wd(t).get(sy.key).next(function (t) {\n        return Uf(!!t, \"Missing document cache metadata\"), t;\n      });\n    }, t.prototype.setMetadata = function (t, e) {\n      return Wd(t).put(sy.key, e);\n    }, t.prototype.updateSize = function (e, n) {\n      var r = this;\n      return this.getMetadata(e).next(function (t) {\n        return t.byteSize += n, r.setMetadata(e, t);\n      });\n    }, t;\n  }();\n\n  function Wd(t) {\n    return Oy.getStore(t, sy.store);\n  }\n\n  var Kd = function (n) {\n    function t(t) {\n      var e = n.call(this) || this;\n      return e.documentCache = t, e;\n    }\n\n    return ii(t, n), t.prototype.applyChanges = function (t) {\n      var o = this,\n          e = this.assertChanges(),\n          a = 0,\n          s = [];\n      return e.forEach(function (t, e) {\n        var n = o.documentCache.serializer.toDbRemoteDocument(e),\n            r = o.documentSizes.get(t);\n        Uf(void 0 !== r, \"Attempting to change document \" + t.toString() + \" without having read it first\");\n        var i = zd(n);\n        a += i - r, s.push({\n          key: t,\n          doc: n\n        });\n      }), this.documentCache.addEntries(t, s, a);\n    }, t.prototype.getFromCache = function (t, e) {\n      return this.documentCache.getSizedEntry(t, e);\n    }, t.prototype.getAllFromCache = function (t, e) {\n      return this.documentCache.getSizedEntries(t, e);\n    }, t;\n  }(Vd);\n\n  function Qd(t) {\n    return Oy.getStore(t, ay.store);\n  }\n\n  function Hd(t) {\n    return Oy.getStore(t, py.store);\n  }\n\n  function Gd(t) {\n    return t.path.toArray();\n  }\n\n  function zd(t) {\n    var e;\n    if (t.document) e = t.document;else if (t.unknownDocument) e = t.unknownDocument;else {\n      if (!t.noDocument) throw Ff(\"Unknown remote document type\");\n      e = t.noDocument;\n    }\n    return JSON.stringify(e).length;\n  }\n\n  var Yd = function () {\n    function t() {\n      this.collectionParentIndex = new Xd();\n    }\n\n    return t.prototype.addToCollectionParentIndex = function (t, e) {\n      return this.collectionParentIndex.add(e), ld.resolve();\n    }, t.prototype.getCollectionParents = function (t, e) {\n      return ld.resolve(this.collectionParentIndex.getEntries(e));\n    }, t;\n  }(),\n      Xd = function () {\n    function t() {\n      this.index = {};\n    }\n\n    return t.prototype.add = function (t) {\n      Uf(t.length % 2 == 1, \"Expected a collection path.\");\n      var e = t.lastSegment(),\n          n = t.popLast(),\n          r = this.index[e] || new Xp(kp.comparator),\n          i = !r.has(n);\n      return this.index[e] = r.add(n), i;\n    }, t.prototype.getEntries = function (t) {\n      return (this.index[t] || new Xp(kp.comparator)).toArray();\n    }, t;\n  }(),\n      Jd = 8,\n      $d = function () {\n    function t(t) {\n      this.serializer = t;\n    }\n\n    return t.prototype.createOrUpgrade = function (t, n, e, r) {\n      var i,\n          o = this;\n      Uf(e < r && 0 <= e && r <= Jd, \"Unexpected schema upgrade from v\" + e + \" to v{toVersion}.\"), e < 1 && 1 <= r && (t.createObjectStore(ty.store), (i = t).createObjectStore(ey.store, {\n        keyPath: ey.keyPath\n      }), i.createObjectStore(ny.store, {\n        keyPath: ny.keyPath,\n        autoIncrement: !0\n      }).createIndex(ny.userMutationsIndex, ny.userMutationsKeyPath, {\n        unique: !0\n      }), i.createObjectStore(ry.store), fy(t), t.createObjectStore(ay.store));\n      var a,\n          s = ld.resolve();\n      return e < 3 && 3 <= r && (0 !== e && ((a = t).deleteObjectStore(cy.store), a.deleteObjectStore(uy.store), a.deleteObjectStore(hy.store), fy(t)), s = s.next(function () {\n        return t = n.store(hy.store), e = new hy(0, 0, Qp.MIN.toTimestamp(), 0), t.put(hy.key, e);\n        var t, e;\n      })), e < 4 && 4 <= r && (0 !== e && (s = s.next(function () {\n        return i = t, (o = n).store(ny.store).loadAll().next(function (t) {\n          i.deleteObjectStore(ny.store);\n          var e = i.createObjectStore(ny.store, {\n            keyPath: ny.keyPath,\n            autoIncrement: !0\n          });\n          e.createIndex(ny.userMutationsIndex, ny.userMutationsKeyPath, {\n            unique: !0\n          });\n          var n = o.store(ny.store),\n              r = t.map(function (t) {\n            return n.put(t);\n          });\n          return ld.waitFor(r);\n        });\n        var i, o;\n      })), s = s.next(function () {\n        t.createObjectStore(dy.store, {\n          keyPath: dy.keyPath\n        }), t.createObjectStore(py.store, {\n          keyPath: \"id\",\n          autoIncrement: !0\n        });\n      })), e < 5 && 5 <= r && (s = s.next(function () {\n        return o.removeAcknowledgedMutations(n);\n      })), e < 6 && 6 <= r && (s = s.next(function () {\n        return t.createObjectStore(sy.store), o.addDocumentGlobal(n);\n      })), e < 7 && 7 <= r && (s = s.next(function () {\n        return o.ensureSequenceNumbers(n);\n      })), e < 8 && 8 <= r && (s = s.next(function () {\n        return o.createCollectionParentIndex(t, n);\n      })), s;\n    }, t.prototype.addDocumentGlobal = function (e) {\n      var n = 0;\n      return e.store(ay.store).iterate(function (t, e) {\n        n += zd(e);\n      }).next(function () {\n        var t = new sy(n);\n        return e.store(sy.store).put(sy.key, t);\n      });\n    }, t.prototype.removeAcknowledgedMutations = function (r) {\n      var i = this,\n          t = r.store(ey.store),\n          e = r.store(ny.store);\n      return t.loadAll().next(function (t) {\n        return ld.forEach(t, function (n) {\n          var t = IDBKeyRange.bound([n.userId, -1], [n.userId, n.lastAcknowledgedBatchId]);\n          return e.loadAll(ny.userMutationsIndex, t).next(function (t) {\n            return ld.forEach(t, function (t) {\n              Uf(t.userId === n.userId, \"Cannot process batch \" + t.batchId + \" from unexpected user\");\n              var e = i.serializer.fromDbMutationBatch(t);\n              return dd(r, n.userId, e).next(function () {});\n            });\n          });\n        });\n      });\n    }, t.prototype.ensureSequenceNumbers = function (t) {\n      var a = t.store(cy.store),\n          e = t.store(ay.store);\n      return Pd(t).next(function (i) {\n        var o = [];\n        return e.iterate(function (t, e) {\n          var n = new kp(t),\n              r = [0, Vp(n)];\n          o.push(a.get(r).next(function (t) {\n            return t ? ld.resolve() : (e = n, a.put(new cy(0, Vp(e), i)));\n            var e;\n          }));\n        }).next(function () {\n          return ld.waitFor(o);\n        });\n      });\n    }, t.prototype.createCollectionParentIndex = function (t, e) {\n      t.createObjectStore(ly.store, {\n        keyPath: ly.keyPath\n      });\n\n      var r = e.store(ly.store),\n          i = new Xd(),\n          o = function o(t) {\n        if (i.add(t)) {\n          var e = t.lastSegment(),\n              n = t.popLast();\n          return r.put({\n            collectionId: e,\n            parent: Vp(n)\n          });\n        }\n      };\n\n      return e.store(ay.store).iterate({\n        keysOnly: !0\n      }, function (t, e) {\n        var n = new kp(t);\n        return o(n.popLast());\n      }).next(function () {\n        return e.store(ry.store).iterate({\n          keysOnly: !0\n        }, function (t, e) {\n          t[0];\n          var n = t[1],\n              r = (t[2], Wp(n));\n          return o(r.popLast());\n        });\n      });\n    }, t;\n  }();\n\n  var Zd = function Zd(t, e) {\n    this.seconds = t, this.nanoseconds = e;\n  },\n      ty = function () {\n    function t(t, e, n) {\n      this.ownerId = t, this.allowTabSynchronization = e, this.leaseTimestampMs = n;\n    }\n\n    return t.store = \"owner\", t.key = \"owner\", t;\n  }();\n\n  var ey = function () {\n    function t(t, e, n) {\n      this.userId = t, this.lastAcknowledgedBatchId = e, this.lastStreamToken = n;\n    }\n\n    return t.store = \"mutationQueues\", t.keyPath = \"userId\", t;\n  }(),\n      ny = function () {\n    function t(t, e, n, r, i) {\n      this.userId = t, this.batchId = e, this.localWriteTimeMs = n, this.baseMutations = r, this.mutations = i;\n    }\n\n    return t.store = \"mutations\", t.keyPath = \"batchId\", t.userMutationsIndex = \"userMutationsIndex\", t.userMutationsKeyPath = [\"userId\", \"batchId\"], t;\n  }();\n\n  var ry = function () {\n    function t() {}\n\n    return t.prefixForUser = function (t) {\n      return [t];\n    }, t.prefixForPath = function (t, e) {\n      return [t, Vp(e)];\n    }, t.key = function (t, e, n) {\n      return [t, Vp(e), n];\n    }, t.store = \"documentMutations\", t.PLACEHOLDER = new t(), t;\n  }();\n\n  var iy = function iy(t, e) {\n    this.path = t, this.readTime = e;\n  },\n      oy = function oy(t, e) {\n    this.path = t, this.version = e;\n  },\n      ay = function () {\n    function t(t, e, n, r) {\n      this.unknownDocument = t, this.noDocument = e, this.document = n, this.hasCommittedMutations = r;\n    }\n\n    return t.store = \"remoteDocuments\", t;\n  }(),\n      sy = function () {\n    function t(t) {\n      this.byteSize = t;\n    }\n\n    return t.store = \"remoteDocumentGlobal\", t.key = \"remoteDocumentGlobalKey\", t;\n  }();\n\n  var uy = function () {\n    function t(t, e, n, r, i, o) {\n      this.targetId = t, this.canonicalId = e, this.readTime = n, this.resumeToken = r, this.lastListenSequenceNumber = i, this.query = o;\n    }\n\n    return t.store = \"targets\", t.keyPath = \"targetId\", t.queryTargetsIndexName = \"queryTargetsIndex\", t.queryTargetsKeyPath = [\"canonicalId\", \"targetId\"], t;\n  }(),\n      cy = function () {\n    function t(t, e, n) {\n      this.targetId = t, this.path = e, Uf(0 === t == (void 0 !== (this.sequenceNumber = n)), \"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number\");\n    }\n\n    return t.store = \"targetDocuments\", t.keyPath = [\"targetId\", \"path\"], t.documentTargetsIndex = \"documentTargetsIndex\", t.documentTargetsKeyPath = [\"path\", \"targetId\"], t;\n  }(),\n      hy = function () {\n    function t(t, e, n, r) {\n      this.highestTargetId = t, this.highestListenSequenceNumber = e, this.lastRemoteSnapshotVersion = n, this.targetCount = r;\n    }\n\n    return t.key = \"targetGlobalKey\", t.store = \"targetGlobal\", t;\n  }(),\n      ly = function () {\n    function t(t, e) {\n      this.collectionId = t, this.parent = e;\n    }\n\n    return t.store = \"collectionParents\", t.keyPath = [\"collectionId\", \"parent\"], t;\n  }();\n\n  function fy(t) {\n    t.createObjectStore(cy.store, {\n      keyPath: cy.keyPath\n    }).createIndex(cy.documentTargetsIndex, cy.documentTargetsKeyPath, {\n      unique: !0\n    }), t.createObjectStore(uy.store, {\n      keyPath: uy.keyPath\n    }).createIndex(uy.queryTargetsIndexName, uy.queryTargetsKeyPath, {\n      unique: !0\n    }), t.createObjectStore(hy.store);\n  }\n\n  var py = function () {\n    function t(t) {\n      this.changes = t;\n    }\n\n    return t.store = \"remoteDocumentChanges\", t.keyPath = \"id\", t;\n  }();\n\n  var dy = function () {\n    function t(t, e, n, r, i) {\n      this.clientId = t, this.updateTimeMs = e, this.networkEnabled = n, this.inForeground = r, this.lastProcessedDocumentChangeId = i;\n    }\n\n    return t.store = \"clientMetadata\", t.keyPath = \"clientId\", t;\n  }();\n\n  var yy,\n      my,\n      gy = [ey.store, ny.store, ry.store, ay.store, uy.store, ty.store, hy.store, cy.store].concat([dy.store, py.store]).concat([sy.store]).concat([ly.store]),\n      vy = function () {\n    function t() {\n      this.collectionParentsCache = new Xd();\n    }\n\n    return t.prototype.addToCollectionParentIndex = function (t, e) {\n      if (Uf(e.length % 2 == 1, \"Expected a collection path.\"), this.collectionParentsCache.add(e)) {\n        Uf(1 <= e.length, \"Invalid collection path.\");\n        var n = e.lastSegment(),\n            r = e.popLast();\n        return by(t).put({\n          collectionId: n,\n          parent: Vp(r)\n        });\n      }\n\n      return ld.resolve();\n    }, t.prototype.getCollectionParents = function (t, i) {\n      var o = [],\n          e = IDBKeyRange.bound([i, \"\"], [mp(i), \"\"], !1, !0);\n      return by(t).loadAll(e).next(function (t) {\n        for (var e = 0, n = t; e < n.length; e++) {\n          var r = n[e];\n          if (r.collectionId !== i) break;\n          o.push(Wp(r.parent));\n        }\n\n        return o;\n      });\n    }, t;\n  }();\n\n  function by(t) {\n    return Oy.getStore(t, ly.store);\n  }\n\n  (my = yy || (yy = {}))[my.Listen = 0] = \"Listen\", my[my.ExistenceFilterMismatch = 1] = \"ExistenceFilterMismatch\", my[my.LimboResolution = 2] = \"LimboResolution\";\n\n  var wy = function () {\n    function e(t, e, n, r, i, o) {\n      void 0 === i && (i = Qp.MIN), void 0 === o && (o = Vf()), this.query = t, this.targetId = e, this.purpose = n, this.sequenceNumber = r, this.snapshotVersion = i, this.resumeToken = o;\n    }\n\n    return e.prototype.copy = function (t) {\n      return new e(this.query, this.targetId, this.purpose, void 0 === t.sequenceNumber ? this.sequenceNumber : t.sequenceNumber, void 0 === t.snapshotVersion ? this.snapshotVersion : t.snapshotVersion, void 0 === t.resumeToken ? this.resumeToken : t.resumeToken);\n    }, e.prototype.isEqual = function (t) {\n      return this.targetId === t.targetId && this.purpose === t.purpose && this.sequenceNumber === t.sequenceNumber && this.snapshotVersion.isEqual(t.snapshotVersion) && this.resumeToken === t.resumeToken && this.query.isEqual(t.query);\n    }, e;\n  }(),\n      _y = function () {\n    function t(t) {\n      this.remoteSerializer = t;\n    }\n\n    return t.prototype.fromDbRemoteDocument = function (t) {\n      if (t.document) return this.remoteSerializer.fromDocument(t.document, !!t.hasCommittedMutations);\n\n      if (t.noDocument) {\n        var e = Op.fromSegments(t.noDocument.path),\n            n = this.fromDbTimestamp(t.noDocument.readTime);\n        return new Fd(e, n, {\n          hasCommittedMutations: !!t.hasCommittedMutations\n        });\n      }\n\n      if (t.unknownDocument) {\n        e = Op.fromSegments(t.unknownDocument.path), n = this.fromDbTimestamp(t.unknownDocument.version);\n        return new Ud(e, n);\n      }\n\n      return Ff(\"Unexpected DbRemoteDocument\");\n    }, t.prototype.toDbRemoteDocument = function (t) {\n      if (t instanceof Ld) {\n        var e = t.proto ? t.proto : this.remoteSerializer.toDocument(t),\n            n = t.hasCommittedMutations;\n        return new ay(null, null, e, n);\n      }\n\n      if (t instanceof Fd) {\n        var r = t.key.path.toArray(),\n            i = this.toDbTimestamp(t.version);\n        n = t.hasCommittedMutations;\n        return new ay(null, new iy(r, i), null, n);\n      }\n\n      if (t instanceof Ud) {\n        r = t.key.path.toArray(), i = this.toDbTimestamp(t.version);\n        return new ay(new oy(r, i), null, null, !0);\n      }\n\n      return Ff(\"Unexpected MaybeDocumment\");\n    }, t.prototype.toDbTimestamp = function (t) {\n      var e = t.toTimestamp();\n      return new Zd(e.seconds, e.nanoseconds);\n    }, t.prototype.fromDbTimestamp = function (t) {\n      var e = new Kp(t.seconds, t.nanoseconds);\n      return Qp.fromTimestamp(e);\n    }, t.prototype.toDbMutationBatch = function (t, e) {\n      var n = this,\n          r = e.baseMutations.map(function (t) {\n        return n.remoteSerializer.toMutation(t);\n      }),\n          i = e.mutations.map(function (t) {\n        return n.remoteSerializer.toMutation(t);\n      });\n      return new ny(t, e.batchId, e.localWriteTime.toMillis(), r, i);\n    }, t.prototype.fromDbMutationBatch = function (t) {\n      var e = this,\n          n = (t.baseMutations || []).map(function (t) {\n        return e.remoteSerializer.fromMutation(t);\n      }),\n          r = t.mutations.map(function (t) {\n        return e.remoteSerializer.fromMutation(t);\n      }),\n          i = Kp.fromMillis(t.localWriteTimeMs);\n      return new cd(t.batchId, i, n, r);\n    }, t.prototype.toDbResourcePaths = function (t) {\n      var e = [];\n      return t.forEach(function (t) {\n        e.push(Vp(t.path));\n      }), e;\n    }, t.prototype.fromDbResourcePaths = function (t) {\n      for (var e = ad(), n = 0, r = t; n < r.length; n++) {\n        var i = r[n];\n        e = e.add(new Op(Wp(i)));\n      }\n\n      return e;\n    }, t.prototype.fromDbTarget = function (t) {\n      var e,\n          n = this.fromDbTimestamp(t.readTime);\n      return e = void 0 !== t.query.documents ? this.remoteSerializer.fromDocumentsTarget(t.query) : this.remoteSerializer.fromQueryTarget(t.query), new wy(e, t.targetId, yy.Listen, t.lastListenSequenceNumber, n, t.resumeToken);\n    }, t.prototype.toDbTarget = function (t) {\n      Uf(yy.Listen === t.purpose, \"Only queries with purpose \" + yy.Listen + \" may be stored, got \" + t.purpose);\n      var e,\n          n,\n          r = this.toDbTimestamp(t.snapshotVersion);\n      return e = t.query.isDocumentQuery() ? this.remoteSerializer.toDocumentsTarget(t.query) : this.remoteSerializer.toQueryTarget(t.query), n = t.resumeToken instanceof Uint8Array ? (Uf(\"YES\" === process.env.USE_MOCK_PERSISTENCE, \"Persisting non-string stream tokens is only supported with mock persistence .\"), t.resumeToken.toString()) : t.resumeToken, new uy(t.targetId, t.query.canonicalId(), r, n, t.sequenceNumber, e);\n    }, t;\n  }();\n\n  function Ey(t, e) {\n    var n = t[0],\n        r = t[1],\n        i = e[0],\n        o = e[1],\n        a = dp(n, i);\n    return 0 === a ? dp(r, o) : a;\n  }\n\n  var Ty = function () {\n    function t(t) {\n      this.maxElements = t, this.buffer = new Xp(Ey), this.previousIndex = 0;\n    }\n\n    return t.prototype.nextIndex = function () {\n      return ++this.previousIndex;\n    }, t.prototype.addElement = function (t) {\n      var e = [t, this.nextIndex()];\n      if (this.buffer.size < this.maxElements) this.buffer = this.buffer.add(e);else {\n        var n = this.buffer.last();\n        Ey(e, n) < 0 && (this.buffer = this.buffer.delete(n).add(e));\n      }\n    }, Object.defineProperty(t.prototype, \"maxValue\", {\n      get: function get() {\n        return this.buffer.last()[0];\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t;\n  }(),\n      Sy = {\n    didRun: !1,\n    sequenceNumbersCollected: 0,\n    targetsRemoved: 0,\n    documentsRemoved: 0\n  },\n      Iy = function () {\n    function e(t, e, n) {\n      this.cacheSizeCollectionThreshold = t, this.percentileToCollect = e, this.maximumSequenceNumbersToCollect = n;\n    }\n\n    return e.withCacheSize = function (t) {\n      return new e(t, e.DEFAULT_COLLECTION_PERCENTILE, e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT);\n    }, e.COLLECTION_DISABLED = -1, e.MINIMUM_CACHE_SIZE_BYTES = 1048576, e.DEFAULT = new e(e.DEFAULT_CACHE_SIZE_BYTES = 41943040, e.DEFAULT_COLLECTION_PERCENTILE = 10, e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT = 1e3), e.DISABLED = new e(e.COLLECTION_DISABLED, 0, 0), e;\n  }(),\n      Cy = function () {\n    function t(t, e, n) {\n      this.garbageCollector = t, this.asyncQueue = e, this.localStore = n, this.gcTask = null;\n    }\n\n    return t.prototype.start = function () {\n      Uf(null === this.gcTask, \"Cannot start an already started LruScheduler\"), this.garbageCollector.params.cacheSizeCollectionThreshold !== Iy.COLLECTION_DISABLED && this.scheduleGC();\n    }, t.prototype.stop = function () {\n      this.gcTask && (this.gcTask.cancel(), this.gcTask = null);\n    }, Object.defineProperty(t.prototype, \"started\", {\n      get: function get() {\n        return null !== this.gcTask;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.scheduleGC = function () {\n      var t = this;\n      Uf(null === this.gcTask, \"Cannot schedule GC while a task is pending\");\n      var e = this.hasRun ? 3e5 : 6e4;\n      xf(\"LruGarbageCollector\", \"Garbage collection scheduled in \" + e + \"ms\"), this.gcTask = this.asyncQueue.enqueueAfterDelay(bp.LruGarbageCollection, e, function () {\n        return t.gcTask = null, t.hasRun = !0, t.localStore.collectGarbage(t.garbageCollector).then(function () {\n          return t.scheduleGC();\n        }).catch(Py);\n      });\n    }, t;\n  }(),\n      Ny = function () {\n    function t(t, e) {\n      this.delegate = t, this.params = e;\n    }\n\n    return t.prototype.calculateTargetCount = function (t, e) {\n      return this.delegate.getSequenceNumberCount(t).next(function (t) {\n        return Math.floor(e / 100 * t);\n      });\n    }, t.prototype.nthSequenceNumber = function (t, e) {\n      var n = this;\n      if (0 === e) return ld.resolve(Cp.INVALID);\n      var r = new Ty(e);\n      return this.delegate.forEachTarget(t, function (t) {\n        return r.addElement(t.sequenceNumber);\n      }).next(function () {\n        return n.delegate.forEachOrphanedDocumentSequenceNumber(t, function (t) {\n          return r.addElement(t);\n        });\n      }).next(function () {\n        return r.maxValue;\n      });\n    }, t.prototype.removeTargets = function (t, e, n) {\n      return this.delegate.removeTargets(t, e, n);\n    }, t.prototype.removeOrphanedDocuments = function (t, e) {\n      return this.delegate.removeOrphanedDocuments(t, e);\n    }, t.prototype.collect = function (e, n) {\n      var r = this;\n      return this.params.cacheSizeCollectionThreshold === Iy.COLLECTION_DISABLED ? (xf(\"LruGarbageCollector\", \"Garbage collection skipped; disabled\"), ld.resolve(Sy)) : this.getCacheSize(e).next(function (t) {\n        return t < r.params.cacheSizeCollectionThreshold ? (xf(\"LruGarbageCollector\", \"Garbage collection skipped; Cache size \" + t + \" is lower than threshold \" + r.params.cacheSizeCollectionThreshold), Sy) : r.runGarbageCollection(e, n);\n      });\n    }, t.prototype.getCacheSize = function (t) {\n      return this.delegate.getCacheSize(t);\n    }, t.prototype.runGarbageCollection = function (e, n) {\n      var r,\n          i,\n          o,\n          a,\n          s,\n          u,\n          c,\n          h = this,\n          l = Date.now();\n      return this.calculateTargetCount(e, this.params.percentileToCollect).next(function (t) {\n        return i = t > h.params.maximumSequenceNumbersToCollect ? (xf(\"LruGarbageCollector\", \"Capping sequence numbers to collect down to the maximum of \" + h.params.maximumSequenceNumbersToCollect + \" from \" + t), h.params.maximumSequenceNumbersToCollect) : t, a = Date.now(), h.nthSequenceNumber(e, i);\n      }).next(function (t) {\n        return r = t, s = Date.now(), h.removeTargets(e, r, n);\n      }).next(function (t) {\n        return o = t, u = Date.now(), h.removeOrphanedDocuments(e, r);\n      }).next(function (t) {\n        (c = Date.now(), Of() <= Ef.DEBUG) && xf(\"LruGarbageCollector\", \"LRU Garbage Collection\\n\\tCounted targets in \" + (a - l) + \"ms\\n\\tDetermined least recently used \" + i + \" in \" + (s - a) + \"ms\\n\\tRemoved \" + o + \" targets in \" + (u - s) + \"ms\\n\\tRemoved \" + t + \" documents in \" + (c - u) + \"ms\\nTotal Duration: \" + (c - l) + \"ms\");\n        return ld.resolve({\n          didRun: !0,\n          sequenceNumbersCollected: i,\n          targetsRemoved: o,\n          documentsRemoved: t\n        });\n      });\n    }, t;\n  }(),\n      Ay = \"IndexedDbPersistence\",\n      ky = \"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.\",\n      Dy = \"Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.\",\n      Ry = function (r) {\n    function t(t, e) {\n      var n = r.call(this) || this;\n      return n.simpleDbTransaction = t, n.currentSequenceNumber = e, n;\n    }\n\n    return ii(t, r), t;\n  }(function () {}),\n      Oy = function () {\n    function c(t, e, n, r, i, o, a) {\n      if (this.persistenceKey = t, this.clientId = e, this.queue = r, this.multiClientParams = a, this._started = !1, this.isPrimary = !1, this.networkEnabled = !0, this.inForeground = !1, this.lastGarbageCollectionTime = Number.NEGATIVE_INFINITY, this.primaryStateListener = function (t) {\n        return Promise.resolve();\n      }, !c.isAvailable()) throw new jf(Bf.UNIMPLEMENTED, \"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.\");\n      if (this.referenceDelegate = new Vy(this, o), this.dbName = t + c.MAIN_DATABASE, this.serializer = new _y(i), this.document = n.document, this.allowTabSynchronization = void 0 !== a, this.queryCache = new Dd(this.referenceDelegate, this.serializer), this.indexManager = new vy(), this.remoteDocumentCache = new jd(this.serializer, this.indexManager, this.allowTabSynchronization), !n.window || !n.window.localStorage) throw new jf(Bf.UNIMPLEMENTED, \"IndexedDB persistence is only available on platforms that support LocalStorage.\");\n      this.window = n.window, this.webStorage = this.window.localStorage;\n    }\n\n    return c.getStore = function (t, e) {\n      if (t instanceof Ry) return Td.getStore(t.simpleDbTransaction, e);\n      throw Ff(\"IndexedDbPersistence must use instances of IndexedDbTransaction\");\n    }, c.createIndexedDbPersistence = function (n, r, i, o, a, s) {\n      return ai(this, void 0, void 0, function () {\n        var e;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, (e = new c(n, r, i, o, a, s)).start()];\n\n            case 1:\n              return t.sent(), [2, e];\n          }\n        });\n      });\n    }, c.createMultiClientIndexedDbPersistence = function (n, r, i, o, a, s, u) {\n      return ai(this, void 0, void 0, function () {\n        var e;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, (e = new c(n, r, i, o, a, s, u)).start()];\n\n            case 1:\n              return t.sent(), [2, e];\n          }\n        });\n      });\n    }, c.prototype.start = function () {\n      var n = this;\n      return Uf(!this.started, \"IndexedDbPersistence double-started!\"), Uf(null !== this.window, \"Expected 'window' to be defined\"), Td.openOrCreate(this.dbName, Jd, new $d(this.serializer)).then(function (t) {\n        return n.simpleDb = t, n.updateClientMetadataAndTryBecomePrimary();\n      }).then(function () {\n        return n.attachVisibilityHandler(), n.attachWindowUnloadHook(), n.scheduleClientMetadataAndPrimaryLeaseRefreshes(), n.startRemoteDocumentCache();\n      }).then(function () {\n        return n.simpleDb.runTransaction(\"readonly\", [hy.store], function (t) {\n          return Pd(t).next(function (t) {\n            var e = n.multiClientParams ? n.multiClientParams.sequenceNumberSyncer : void 0;\n            n.listenSequence = new Cp(t, e);\n          });\n        });\n      }).then(function () {\n        n._started = !0;\n      }).catch(function (t) {\n        return n.simpleDb && n.simpleDb.close(), Promise.reject(t);\n      });\n    }, c.prototype.startRemoteDocumentCache = function () {\n      var e = this;\n      return this.simpleDb.runTransaction(\"readonly\", gy, function (t) {\n        return e.remoteDocumentCache.start(t);\n      });\n    }, c.prototype.setPrimaryStateListener = function (n) {\n      var t = this;\n      return this.primaryStateListener = function (e) {\n        return ai(t, void 0, void 0, function () {\n          return si(this, function (t) {\n            return this.started ? [2, n(e)] : [2];\n          });\n        });\n      }, n(this.isPrimary);\n    }, c.prototype.setDatabaseDeletedListener = function (n) {\n      var t = this;\n      this.simpleDb.setVersionChangeListener(function (e) {\n        return ai(t, void 0, void 0, function () {\n          return si(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return null !== e.newVersion ? [3, 2] : [4, n()];\n\n              case 1:\n                t.sent(), t.label = 2;\n\n              case 2:\n                return [2];\n            }\n          });\n        });\n      });\n    }, c.prototype.setNetworkEnabled = function (t) {\n      var e = this;\n      this.networkEnabled !== t && (this.networkEnabled = t, this.queue.enqueueAndForget(function () {\n        return ai(e, void 0, void 0, function () {\n          return si(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.started ? [4, this.updateClientMetadataAndTryBecomePrimary()] : [3, 2];\n\n              case 1:\n                t.sent(), t.label = 2;\n\n              case 2:\n                return [2];\n            }\n          });\n        });\n      }));\n    }, c.prototype.updateClientMetadataAndTryBecomePrimary = function () {\n      var r = this;\n      return this.simpleDb.runTransaction(\"readwrite\", gy, function (n) {\n        return My(n).put(new dy(r.clientId, Date.now(), r.networkEnabled, r.inForeground, r.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function () {\n          if (r.isPrimary) return r.verifyPrimaryLease(n).next(function (t) {\n            t || (r.isPrimary = !1, r.queue.enqueueAndForget(function () {\n              return r.primaryStateListener(!1);\n            }));\n          });\n        }).next(function () {\n          return r.canActAsPrimary(n);\n        }).next(function (t) {\n          var e = r.isPrimary;\n          return r.isPrimary = t, e !== r.isPrimary && r.queue.enqueueAndForget(function () {\n            return r.primaryStateListener(r.isPrimary);\n          }), e && !r.isPrimary ? r.releasePrimaryLeaseIfHeld(n) : r.isPrimary ? r.acquireOrExtendPrimaryLease(n) : void 0;\n        });\n      });\n    }, c.prototype.verifyPrimaryLease = function (t) {\n      var e = this;\n      return xy(t).get(ty.key).next(function (t) {\n        return ld.resolve(e.isLocalClient(t));\n      });\n    }, c.prototype.removeClientMetadata = function (t) {\n      return My(t).delete(this.clientId);\n    }, c.prototype.maybeGarbageCollectMultiClientState = function () {\n      return ai(this, void 0, void 0, function () {\n        var r,\n            i,\n            o = this;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return !this.isPrimary || this.isWithinAge(this.lastGarbageCollectionTime, 18e5) ? [3, 2] : (this.lastGarbageCollectionTime = Date.now(), i = [], [4, this.runTransaction(\"maybeGarbageCollectMultiClientState\", \"readwrite-primary\", function (n) {\n                var e = c.getStore(n, dy.store);\n                return e.loadAll().next(function (t) {\n                  r = o.filterActiveClients(t, 18e5), i = t.filter(function (t) {\n                    return -1 === r.indexOf(t);\n                  });\n                }).next(function () {\n                  return ld.forEach(i, function (t) {\n                    return e.delete(t.clientId);\n                  });\n                }).next(function () {\n                  if (0 < (r = r.filter(function (t) {\n                    return t.clientId !== o.clientId;\n                  })).length) {\n                    var t = r.map(function (t) {\n                      return t.lastProcessedDocumentChangeId || 0;\n                    }),\n                        e = Math.min.apply(Math, t);\n                    return o.remoteDocumentCache.removeDocumentChangesThroughChangeId(n, e);\n                  }\n                });\n              })]);\n\n            case 1:\n              t.sent(), i.forEach(function (t) {\n                o.window.localStorage.removeItem(o.zombiedClientLocalStorageKey(t.clientId));\n              }), t.label = 2;\n\n            case 2:\n              return [2];\n          }\n        });\n      });\n    }, c.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes = function () {\n      var t = this;\n      this.clientMetadataRefresher = this.queue.enqueueAfterDelay(bp.ClientMetadataRefresh, 4e3, function () {\n        return t.updateClientMetadataAndTryBecomePrimary().then(function () {\n          return t.maybeGarbageCollectMultiClientState();\n        }).then(function () {\n          return t.scheduleClientMetadataAndPrimaryLeaseRefreshes();\n        });\n      });\n    }, c.prototype.isLocalClient = function (t) {\n      return !!t && t.ownerId === this.clientId;\n    }, c.prototype.canActAsPrimary = function (e) {\n      var i = this;\n      return xy(e).get(ty.key).next(function (t) {\n        if (null !== t && i.isWithinAge(t.leaseTimestampMs, 5e3) && !i.isClientZombied(t.ownerId)) {\n          if (i.isLocalClient(t) && i.networkEnabled) return !0;\n\n          if (!i.isLocalClient(t)) {\n            if (!t.allowTabSynchronization) throw new jf(Bf.FAILED_PRECONDITION, Dy);\n            return !1;\n          }\n        }\n\n        return !(!i.networkEnabled || !i.inForeground) || My(e).loadAll().next(function (t) {\n          return void 0 === i.filterActiveClients(t, 5e3).find(function (t) {\n            if (i.clientId !== t.clientId) {\n              var e = !i.networkEnabled && t.networkEnabled,\n                  n = !i.inForeground && t.inForeground,\n                  r = i.networkEnabled === t.networkEnabled;\n              if (e || n && r) return !0;\n            }\n\n            return !1;\n          });\n        });\n      }).next(function (t) {\n        return i.isPrimary !== t && xf(Ay, \"Client \" + (t ? \"is\" : \"is not\") + \" eligible for a primary lease.\"), t;\n      });\n    }, c.prototype.shutdown = function () {\n      return ai(this, void 0, void 0, function () {\n        var e = this;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this._started = !1, this.markClientZombied(), this.clientMetadataRefresher && this.clientMetadataRefresher.cancel(), this.detachVisibilityHandler(), this.detachWindowUnloadHook(), [4, this.simpleDb.runTransaction(\"readwrite\", [ty.store, dy.store], function (t) {\n                return e.releasePrimaryLeaseIfHeld(t).next(function () {\n                  return e.removeClientMetadata(t);\n                });\n              })];\n\n            case 1:\n              return t.sent(), this.simpleDb.close(), this.removeClientZombiedEntry(), [2];\n          }\n        });\n      });\n    }, c.prototype.filterActiveClients = function (t, e) {\n      var n = this;\n      return t.filter(function (t) {\n        return n.isWithinAge(t.updateTimeMs, e) && !n.isClientZombied(t.clientId);\n      });\n    }, c.prototype.getActiveClients = function () {\n      var e = this;\n      return this.simpleDb.runTransaction(\"readonly\", [dy.store], function (t) {\n        return My(t).loadAll().next(function (t) {\n          return e.filterActiveClients(t, 18e5).map(function (t) {\n            return t.clientId;\n          });\n        });\n      });\n    }, c.clearPersistence = function (n) {\n      return ai(this, void 0, void 0, function () {\n        var e;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return c.isAvailable() ? (e = n + c.MAIN_DATABASE, [4, Td.delete(e)]) : [2, Promise.resolve()];\n\n            case 1:\n              return t.sent(), [2];\n          }\n        });\n      });\n    }, Object.defineProperty(c.prototype, \"started\", {\n      get: function get() {\n        return this._started;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), c.prototype.getMutationQueue = function (t) {\n      return Uf(this.started, \"Cannot initialize MutationQueue before persistence is started.\"), fd.forUser(t, this.serializer, this.indexManager, this.referenceDelegate);\n    }, c.prototype.getQueryCache = function () {\n      return Uf(this.started, \"Cannot initialize QueryCache before persistence is started.\"), this.queryCache;\n    }, c.prototype.getRemoteDocumentCache = function () {\n      return Uf(this.started, \"Cannot initialize RemoteDocumentCache before persistence is started.\"), this.remoteDocumentCache;\n    }, c.prototype.getIndexManager = function () {\n      return Uf(this.started, \"Cannot initialize IndexManager before persistence is started.\"), this.indexManager;\n    }, c.prototype.runTransaction = function (n, t, r) {\n      var i = this;\n      return xf(Ay, \"Starting transaction:\", n), this.simpleDb.runTransaction(\"readonly\" === t ? \"readonly\" : \"readwrite\", gy, function (e) {\n        return \"readwrite-primary\" === t ? i.verifyPrimaryLease(e).next(function (t) {\n          if (!t) throw Mf(\"Failed to obtain primary lease for action '\" + n + \"'.\"), i.isPrimary = !1, i.queue.enqueueAndForget(function () {\n            return i.primaryStateListener(!1);\n          }), new jf(Bf.FAILED_PRECONDITION, ky);\n          return r(new Ry(e, i.listenSequence.next()));\n        }).next(function (t) {\n          return i.acquireOrExtendPrimaryLease(e).next(function () {\n            return t;\n          });\n        }) : i.verifyAllowTabSynchronization(e).next(function () {\n          return r(new Ry(e, i.listenSequence.next()));\n        });\n      });\n    }, c.prototype.verifyAllowTabSynchronization = function (t) {\n      var e = this;\n      return xy(t).get(ty.key).next(function (t) {\n        if (null !== t && e.isWithinAge(t.leaseTimestampMs, 5e3) && !e.isClientZombied(t.ownerId) && !e.isLocalClient(t) && !t.allowTabSynchronization) throw new jf(Bf.FAILED_PRECONDITION, Dy);\n      });\n    }, c.prototype.acquireOrExtendPrimaryLease = function (t) {\n      var e = new ty(this.clientId, this.allowTabSynchronization, Date.now());\n      return xy(t).put(ty.key, e);\n    }, c.isAvailable = function () {\n      return Td.isAvailable();\n    }, c.buildStoragePrefix = function (t) {\n      var e = t.databaseId.projectId;\n      return t.databaseId.isDefaultDatabase || (e += \".\" + t.databaseId.database), \"firestore/\" + t.persistenceKey + \"/\" + e + \"/\";\n    }, c.prototype.releasePrimaryLeaseIfHeld = function (t) {\n      var e = this,\n          n = xy(t);\n      return n.get(ty.key).next(function (t) {\n        return e.isLocalClient(t) ? (xf(Ay, \"Releasing primary lease.\"), n.delete(ty.key)) : ld.resolve();\n      });\n    }, c.prototype.isWithinAge = function (t, e) {\n      var n = Date.now();\n      return !(t < n - e) && (!(n < t) || (Mf(\"Detected an update time that is in the future: \" + t + \" > \" + n), !1));\n    }, c.prototype.attachVisibilityHandler = function () {\n      var t = this;\n      null !== this.document && \"function\" == typeof this.document.addEventListener && (this.documentVisibilityHandler = function () {\n        t.queue.enqueueAndForget(function () {\n          return t.inForeground = \"visible\" === t.document.visibilityState, t.updateClientMetadataAndTryBecomePrimary();\n        });\n      }, this.document.addEventListener(\"visibilitychange\", this.documentVisibilityHandler), this.inForeground = \"visible\" === this.document.visibilityState);\n    }, c.prototype.detachVisibilityHandler = function () {\n      this.documentVisibilityHandler && (Uf(null !== this.document && \"function\" == typeof this.document.addEventListener, \"Expected 'document.addEventListener' to be a function\"), this.document.removeEventListener(\"visibilitychange\", this.documentVisibilityHandler), this.documentVisibilityHandler = null);\n    }, c.prototype.attachWindowUnloadHook = function () {\n      var t = this;\n      \"function\" == typeof this.window.addEventListener && (this.windowUnloadHandler = function () {\n        t.markClientZombied(), t.queue.enqueueAndForget(function () {\n          return t.shutdown();\n        });\n      }, this.window.addEventListener(\"unload\", this.windowUnloadHandler));\n    }, c.prototype.detachWindowUnloadHook = function () {\n      this.windowUnloadHandler && (Uf(\"function\" == typeof this.window.removeEventListener, \"Expected 'window.removeEventListener' to be a function\"), this.window.removeEventListener(\"unload\", this.windowUnloadHandler), this.windowUnloadHandler = null);\n    }, c.prototype.isClientZombied = function (t) {\n      try {\n        var e = null !== this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));\n        return xf(Ay, \"Client '\" + t + \"' \" + (e ? \"is\" : \"is not\") + \" zombied in LocalStorage\"), e;\n      } catch (t) {\n        return Mf(Ay, \"Failed to get zombied client id.\", t), !1;\n      }\n    }, c.prototype.markClientZombied = function () {\n      try {\n        this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId), String(Date.now()));\n      } catch (t) {\n        Mf(\"Failed to set zombie client id.\", t);\n      }\n    }, c.prototype.removeClientZombiedEntry = function () {\n      try {\n        this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId));\n      } catch (t) {}\n    }, c.prototype.zombiedClientLocalStorageKey = function (t) {\n      return \"firestore_zombie_\" + this.persistenceKey + \"_\" + t;\n    }, c.MAIN_DATABASE = \"main\", c;\n  }();\n\n  function Py(n) {\n    return ai(this, void 0, void 0, function () {\n      return si(this, function (t) {\n        if ((e = n).code !== Bf.FAILED_PRECONDITION || e.message !== ky) throw n;\n        var e;\n        return xf(Ay, \"Unexpectedly lost primary lease\"), [2];\n      });\n    });\n  }\n\n  function xy(t) {\n    return t.store(ty.store);\n  }\n\n  function My(t) {\n    return t.store(dy.store);\n  }\n\n  var Ly,\n      Fy,\n      Uy,\n      qy,\n      Vy = function () {\n    function t(t, e) {\n      this.db = t, this.garbageCollector = new Ny(this, e);\n    }\n\n    return t.prototype.getSequenceNumberCount = function (t) {\n      var n = this.orphanedDocmentCount(t);\n      return this.db.getQueryCache().getQueryCount(t).next(function (e) {\n        return n.next(function (t) {\n          return e + t;\n        });\n      });\n    }, t.prototype.orphanedDocmentCount = function (t) {\n      var e = 0;\n      return this.forEachOrphanedDocumentSequenceNumber(t, function (t) {\n        e++;\n      }).next(function () {\n        return e;\n      });\n    }, t.prototype.forEachTarget = function (t, e) {\n      return this.db.getQueryCache().forEachTarget(t, e);\n    }, t.prototype.forEachOrphanedDocumentSequenceNumber = function (t, n) {\n      return this.forEachOrphanedDocument(t, function (t, e) {\n        return n(e);\n      });\n    }, t.prototype.setInMemoryPins = function (t) {\n      this.inMemoryPins = t;\n    }, t.prototype.addReference = function (t, e) {\n      return By(t, e);\n    }, t.prototype.removeReference = function (t, e) {\n      return By(t, e);\n    }, t.prototype.removeTargets = function (t, e, n) {\n      return this.db.getQueryCache().removeTargets(t, e, n);\n    }, t.prototype.removeMutationReference = function (t, e) {\n      return By(t, e);\n    }, t.prototype.isPinned = function (t, e) {\n      return this.inMemoryPins.containsKey(e) ? ld.resolve(!0) : (r = e, i = !1, vd(n = t).iterateSerial(function (t) {\n        return pd(n, t, r).next(function (t) {\n          return t && (i = !0), ld.resolve(!t);\n        });\n      }).next(function () {\n        return i;\n      }));\n      var n, r, i;\n    }, t.prototype.removeOrphanedDocuments = function (r, i) {\n      var o = this,\n          a = 0,\n          s = 0,\n          u = [];\n      return this.forEachOrphanedDocument(r, function (e, t) {\n        if (t <= i) {\n          var n = o.isPinned(r, e).next(function (t) {\n            if (!t) return a++, o.removeOrphanedDocument(r, e).next(function (t) {\n              s += t;\n            });\n          });\n          u.push(n);\n        }\n      }).next(function () {\n        return ld.waitFor(u);\n      }).next(function () {\n        return o.db.getRemoteDocumentCache().updateSize(r, -s);\n      }).next(function () {\n        return a;\n      });\n    }, t.prototype.removeOrphanedDocument = function (t, e) {\n      var n,\n          r = 0,\n          i = this.db.getRemoteDocumentCache();\n      return ld.waitFor([xd(t).delete((n = e, [0, Vp(n.path)])), i.removeEntry(t, e).next(function (t) {\n        r += t;\n      })]).next(function () {\n        return r;\n      });\n    }, t.prototype.removeTarget = function (t, e) {\n      var n = e.copy({\n        sequenceNumber: t.currentSequenceNumber\n      });\n      return this.db.getQueryCache().updateQueryData(t, n);\n    }, t.prototype.updateLimboDocument = function (t, e) {\n      return By(t, e);\n    }, t.prototype.forEachOrphanedDocument = function (t, o) {\n      var a,\n          e = xd(t),\n          s = Cp.INVALID;\n      return e.iterate({\n        index: cy.documentTargetsIndex\n      }, function (t, e) {\n        var n = t[0],\n            r = (t[1], e.path),\n            i = e.sequenceNumber;\n        0 === n ? (s !== Cp.INVALID && o(new Op(Wp(a)), s), s = i, a = r) : s = Cp.INVALID;\n      }).next(function () {\n        s !== Cp.INVALID && o(new Op(Wp(a)), s);\n      });\n    }, t.prototype.getCacheSize = function (t) {\n      return this.db.getRemoteDocumentCache().getSize(t);\n    }, t;\n  }();\n\n  function By(t, e) {\n    return xd(t).put((n = e, r = t.currentSequenceNumber, new cy(0, Vp(n.path), r)));\n    var n, r;\n  }\n\n  (Fy = Ly || (Ly = {}))[Fy.NullValue = 0] = \"NullValue\", Fy[Fy.BooleanValue = 1] = \"BooleanValue\", Fy[Fy.NumberValue = 2] = \"NumberValue\", Fy[Fy.TimestampValue = 3] = \"TimestampValue\", Fy[Fy.StringValue = 4] = \"StringValue\", Fy[Fy.BlobValue = 5] = \"BlobValue\", Fy[Fy.RefValue = 6] = \"RefValue\", Fy[Fy.GeoPointValue = 7] = \"GeoPointValue\", Fy[Fy.ArrayValue = 8] = \"ArrayValue\", Fy[Fy.ObjectValue = 9] = \"ObjectValue\", (qy = Uy || (Uy = {}))[qy.Default = 0] = \"Default\", qy[qy.Estimate = 1] = \"Estimate\", qy[qy.Previous = 2] = \"Previous\";\n\n  var jy = function () {\n    function n(t, e) {\n      this.serverTimestampBehavior = t, this.timestampsInSnapshots = e;\n    }\n\n    return n.fromSnapshotOptions = function (t, e) {\n      switch (t.serverTimestamps) {\n        case \"estimate\":\n          return new n(Uy.Estimate, e);\n\n        case \"previous\":\n          return new n(Uy.Previous, e);\n\n        case \"none\":\n        case void 0:\n          return new n(Uy.Default, e);\n\n        default:\n          return Ff(\"fromSnapshotOptions() called with invalid options.\");\n      }\n    }, n;\n  }(),\n      Wy = function () {\n    function t() {}\n\n    return t.prototype.toString = function () {\n      var t = this.value();\n      return null === t ? \"null\" : t.toString();\n    }, t.prototype.defaultCompareTo = function (t) {\n      return Uf(this.typeOrder !== t.typeOrder, \"Default compareTo should not be used for values of same type.\"), dp(this.typeOrder, t.typeOrder);\n    }, t;\n  }(),\n      Ky = function (e) {\n    function n() {\n      var t = e.call(this) || this;\n      return t.typeOrder = Ly.NullValue, t.internalValue = null, t;\n    }\n\n    return ii(n, e), n.prototype.value = function (t) {\n      return null;\n    }, n.prototype.isEqual = function (t) {\n      return t instanceof n;\n    }, n.prototype.compareTo = function (t) {\n      return t instanceof n ? 0 : this.defaultCompareTo(t);\n    }, n.INSTANCE = new n(), n;\n  }(Wy),\n      Qy = function (n) {\n    function e(t) {\n      var e = n.call(this) || this;\n      return e.internalValue = t, e.typeOrder = Ly.BooleanValue, e;\n    }\n\n    return ii(e, n), e.prototype.value = function (t) {\n      return this.internalValue;\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && this.internalValue === t.internalValue;\n    }, e.prototype.compareTo = function (t) {\n      return t instanceof e ? dp(this, t) : this.defaultCompareTo(t);\n    }, e.of = function (t) {\n      return t ? e.TRUE : e.FALSE;\n    }, e.TRUE = new e(!0), e.FALSE = new e(!1), e;\n  }(Wy),\n      Hy = function (n) {\n    function r(t) {\n      var e = n.call(this) || this;\n      return e.internalValue = t, e.typeOrder = Ly.NumberValue, e;\n    }\n\n    return ii(r, n), r.prototype.value = function (t) {\n      return this.internalValue;\n    }, r.prototype.compareTo = function (t) {\n      return t instanceof r ? (e = this.internalValue, n = t.internalValue, e < n ? -1 : n < e ? 1 : e === n ? 0 : isNaN(e) ? isNaN(n) ? 0 : -1 : 1) : this.defaultCompareTo(t);\n      var e, n;\n    }, r;\n  }(Wy);\n\n  function Gy(t, e) {\n    return t === e ? 0 !== t || 1 / t == 1 / e : t != t && e != e;\n  }\n\n  var zy,\n      Yy,\n      Xy = function (t) {\n    function e() {\n      return null !== t && t.apply(this, arguments) || this;\n    }\n\n    return ii(e, t), e.prototype.isEqual = function (t) {\n      return t instanceof e && Gy(this.internalValue, t.internalValue);\n    }, e;\n  }(Hy),\n      Jy = function (t) {\n    function e() {\n      return null !== t && t.apply(this, arguments) || this;\n    }\n\n    return ii(e, t), e.prototype.isEqual = function (t) {\n      return t instanceof e && Gy(this.internalValue, t.internalValue);\n    }, e.NAN = new e(NaN), e.POSITIVE_INFINITY = new e(1 / 0), e.NEGATIVE_INFINITY = new e(-1 / 0), e;\n  }(Hy),\n      $y = function (n) {\n    function e(t) {\n      var e = n.call(this) || this;\n      return e.internalValue = t, e.typeOrder = Ly.StringValue, e;\n    }\n\n    return ii(e, n), e.prototype.value = function (t) {\n      return this.internalValue;\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && this.internalValue === t.internalValue;\n    }, e.prototype.compareTo = function (t) {\n      return t instanceof e ? dp(this.internalValue, t.internalValue) : this.defaultCompareTo(t);\n    }, e;\n  }(Wy),\n      Zy = function (n) {\n    function e(t) {\n      var e = n.call(this) || this;\n      return e.internalValue = t, e.typeOrder = Ly.TimestampValue, e;\n    }\n\n    return ii(e, n), e.prototype.value = function (t) {\n      return !t || t.timestampsInSnapshots ? this.internalValue : this.internalValue.toDate();\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && this.internalValue.isEqual(t.internalValue);\n    }, e.prototype.compareTo = function (t) {\n      return t instanceof e ? this.internalValue._compareTo(t.internalValue) : t instanceof tm ? -1 : this.defaultCompareTo(t);\n    }, e;\n  }(Wy),\n      tm = function (r) {\n    function e(t, e) {\n      var n = r.call(this) || this;\n      return n.localWriteTime = t, n.previousValue = e, n.typeOrder = Ly.TimestampValue, n;\n    }\n\n    return ii(e, r), e.prototype.value = function (t) {\n      return t && t.serverTimestampBehavior === Uy.Estimate ? new Zy(this.localWriteTime).value(t) : t && t.serverTimestampBehavior === Uy.Previous && this.previousValue ? this.previousValue.value(t) : null;\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && this.localWriteTime.isEqual(t.localWriteTime);\n    }, e.prototype.compareTo = function (t) {\n      return t instanceof e ? this.localWriteTime._compareTo(t.localWriteTime) : t instanceof Zy ? 1 : this.defaultCompareTo(t);\n    }, e.prototype.toString = function () {\n      return \"<ServerTimestamp localTime=\" + this.localWriteTime.toString() + \">\";\n    }, e;\n  }(Wy),\n      em = function (n) {\n    function e(t) {\n      var e = n.call(this) || this;\n      return e.internalValue = t, e.typeOrder = Ly.BlobValue, e;\n    }\n\n    return ii(e, n), e.prototype.value = function (t) {\n      return this.internalValue;\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && this.internalValue.isEqual(t.internalValue);\n    }, e.prototype.compareTo = function (t) {\n      return t instanceof e ? this.internalValue._compareTo(t.internalValue) : this.defaultCompareTo(t);\n    }, e;\n  }(Wy),\n      nm = function (r) {\n    function n(t, e) {\n      var n = r.call(this) || this;\n      return n.databaseId = t, n.key = e, n.typeOrder = Ly.RefValue, n;\n    }\n\n    return ii(n, r), n.prototype.value = function (t) {\n      return this.key;\n    }, n.prototype.isEqual = function (t) {\n      return t instanceof n && this.key.isEqual(t.key) && this.databaseId.isEqual(t.databaseId);\n    }, n.prototype.compareTo = function (t) {\n      if (t instanceof n) {\n        var e = this.databaseId.compareTo(t.databaseId);\n        return 0 !== e ? e : Op.comparator(this.key, t.key);\n      }\n\n      return this.defaultCompareTo(t);\n    }, n;\n  }(Wy),\n      rm = function (n) {\n    function e(t) {\n      var e = n.call(this) || this;\n      return e.internalValue = t, e.typeOrder = Ly.GeoPointValue, e;\n    }\n\n    return ii(e, n), e.prototype.value = function (t) {\n      return this.internalValue;\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && this.internalValue.isEqual(t.internalValue);\n    }, e.prototype.compareTo = function (t) {\n      return t instanceof e ? this.internalValue._compareTo(t.internalValue) : this.defaultCompareTo(t);\n    }, e;\n  }(Wy),\n      im = function (n) {\n    function a(t) {\n      var e = n.call(this) || this;\n      return e.internalValue = t, e.typeOrder = Ly.ObjectValue, e;\n    }\n\n    return ii(a, n), a.prototype.value = function (n) {\n      var r = {};\n      return this.internalValue.inorderTraversal(function (t, e) {\n        r[t] = e.value(n);\n      }), r;\n    }, a.prototype.forEach = function (t) {\n      this.internalValue.inorderTraversal(t);\n    }, a.prototype.isEqual = function (t) {\n      if (t instanceof a) {\n        for (var e = this.internalValue.getIterator(), n = t.internalValue.getIterator(); e.hasNext() && n.hasNext();) {\n          var r = e.getNext(),\n              i = n.getNext();\n          if (r.key !== i.key || !r.value.isEqual(i.value)) return !1;\n        }\n\n        return !e.hasNext() && !n.hasNext();\n      }\n\n      return !1;\n    }, a.prototype.compareTo = function (t) {\n      if (t instanceof a) {\n        for (var e = this.internalValue.getIterator(), n = t.internalValue.getIterator(); e.hasNext() && n.hasNext();) {\n          var r = e.getNext(),\n              i = n.getNext(),\n              o = dp(r.key, i.key) || r.value.compareTo(i.value);\n          if (o) return o;\n        }\n\n        return dp(e.hasNext(), n.hasNext());\n      }\n\n      return this.defaultCompareTo(t);\n    }, a.prototype.set = function (t, e) {\n      if (Uf(!t.isEmpty(), \"Cannot set field for empty path on ObjectValue\"), 1 === t.length) return this.setChild(t.firstSegment(), e);\n      var n = this.child(t.firstSegment());\n      n instanceof a || (n = a.EMPTY);\n      var r = n.set(t.popFirst(), e);\n      return this.setChild(t.firstSegment(), r);\n    }, a.prototype.delete = function (t) {\n      if (Uf(!t.isEmpty(), \"Cannot delete field for empty path on ObjectValue\"), 1 === t.length) return new a(this.internalValue.remove(t.firstSegment()));\n      var e = this.child(t.firstSegment());\n\n      if (e instanceof a) {\n        var n = e.delete(t.popFirst());\n        return new a(this.internalValue.insert(t.firstSegment(), n));\n      }\n\n      return this;\n    }, a.prototype.contains = function (t) {\n      return null !== this.field(t);\n    }, a.prototype.field = function (t) {\n      Uf(!t.isEmpty(), \"Can't get field of empty path\");\n      var e = this;\n      return t.forEach(function (t) {\n        e = e instanceof a ? e.internalValue.get(t) : null;\n      }), e;\n    }, a.prototype.fieldMask = function () {\n      var i = new Xp(Rp.comparator);\n      return this.internalValue.forEach(function (t, e) {\n        var n = new Rp([t]);\n\n        if (e instanceof a) {\n          var r = e.fieldMask().fields;\n          r.isEmpty() ? i = i.add(n) : r.forEach(function (t) {\n            i = i.add(n.child(t));\n          });\n        } else i = i.add(n);\n      }), am.fromSet(i);\n    }, a.prototype.toString = function () {\n      return this.internalValue.toString();\n    }, a.prototype.child = function (t) {\n      return this.internalValue.get(t) || void 0;\n    }, a.prototype.setChild = function (t, e) {\n      return new a(this.internalValue.insert(t, e));\n    }, a.EMPTY = new a(new Hp(dp)), a;\n  }(Wy),\n      om = function (n) {\n    function i(t) {\n      var e = n.call(this) || this;\n      return e.internalValue = t, e.typeOrder = Ly.ArrayValue, e;\n    }\n\n    return ii(i, n), i.prototype.value = function (e) {\n      return this.internalValue.map(function (t) {\n        return t.value(e);\n      });\n    }, i.prototype.contains = function (t) {\n      for (var e = 0, n = this.internalValue; e < n.length; e++) {\n        if (n[e].isEqual(t)) return !0;\n      }\n\n      return !1;\n    }, i.prototype.forEach = function (t) {\n      this.internalValue.forEach(t);\n    }, i.prototype.isEqual = function (t) {\n      if (t instanceof i) {\n        if (this.internalValue.length !== t.internalValue.length) return !1;\n\n        for (var e = 0; e < this.internalValue.length; e++) {\n          if (!this.internalValue[e].isEqual(t.internalValue[e])) return !1;\n        }\n\n        return !0;\n      }\n\n      return !1;\n    }, i.prototype.compareTo = function (t) {\n      if (t instanceof i) {\n        for (var e = Math.min(this.internalValue.length, t.internalValue.length), n = 0; n < e; n++) {\n          var r = this.internalValue[n].compareTo(t.internalValue[n]);\n          if (r) return r;\n        }\n\n        return dp(this.internalValue.length, t.internalValue.length);\n      }\n\n      return this.defaultCompareTo(t);\n    }, i.prototype.toString = function () {\n      return \"[\" + this.internalValue.map(function (t) {\n        return t.toString();\n      }).join(\",\") + \"]\";\n    }, i;\n  }(Wy),\n      am = function () {\n    function n(t) {\n      this.fields = t;\n    }\n\n    return n.fromSet = function (t) {\n      return new n(t);\n    }, n.fromArray = function (t) {\n      var e = new Xp(Rp.comparator);\n      return t.forEach(function (t) {\n        return e = e.add(t);\n      }), new n(e);\n    }, n.prototype.covers = function (e) {\n      var n = !1;\n      return this.fields.forEach(function (t) {\n        t.isPrefixOf(e) && (n = !0);\n      }), n;\n    }, n.prototype.isEqual = function (t) {\n      return this.fields.isEqual(t.fields);\n    }, n;\n  }(),\n      sm = function () {\n    function t(t, e) {\n      this.field = t, this.transform = e;\n    }\n\n    return t.prototype.isEqual = function (t) {\n      return this.field.isEqual(t.field) && this.transform.isEqual(t.transform);\n    }, t;\n  }(),\n      um = function um(t, e) {\n    this.version = t, this.transformResults = e;\n  };\n\n  (Yy = zy || (zy = {}))[Yy.Set = 0] = \"Set\", Yy[Yy.Patch = 1] = \"Patch\", Yy[Yy.Transform = 2] = \"Transform\", Yy[Yy.Delete = 3] = \"Delete\";\n\n  var cm = function () {\n    function e(t, e) {\n      this.updateTime = t, this.exists = e, Uf(void 0 === t || void 0 === e, 'Precondition can specify \"exists\" or \"updateTime\" but not both');\n    }\n\n    return e.exists = function (t) {\n      return new e(void 0, t);\n    }, e.updateTime = function (t) {\n      return new e(t);\n    }, Object.defineProperty(e.prototype, \"isNone\", {\n      get: function get() {\n        return void 0 === this.updateTime && void 0 === this.exists;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), e.prototype.isValidFor = function (t) {\n      return void 0 !== this.updateTime ? t instanceof Ld && t.version.isEqual(this.updateTime) : void 0 !== this.exists ? this.exists === t instanceof Ld : (Uf(this.isNone, \"Precondition should be empty\"), !0);\n    }, e.prototype.isEqual = function (t) {\n      return e = this.updateTime, n = t.updateTime, (null != e ? !(!n || !e.isEqual(n)) : e === n) && this.exists === t.exists;\n      var e, n;\n    }, e.NONE = new e(), e;\n  }(),\n      hm = function () {\n    function t() {}\n\n    return t.prototype.verifyKeyMatches = function (t) {\n      null != t && Uf(t.key.isEqual(this.key), \"Can only apply a mutation to a document with the same key\");\n    }, t.getPostMutationVersion = function (t) {\n      return t instanceof Ld ? t.version : Qp.MIN;\n    }, t;\n  }(),\n      lm = function (i) {\n    function e(t, e, n) {\n      var r = i.call(this) || this;\n      return r.key = t, r.value = e, r.precondition = n, r.type = zy.Set, r;\n    }\n\n    return ii(e, i), e.prototype.applyToRemoteDocument = function (t, e) {\n      this.verifyKeyMatches(t), Uf(null == e.transformResults, \"Transform results received by SetMutation.\");\n      var n = e.version;\n      return new Ld(this.key, n, this.value, {\n        hasCommittedMutations: !0\n      });\n    }, e.prototype.applyToLocalView = function (t, e, n) {\n      if (this.verifyKeyMatches(t), !this.precondition.isValidFor(t)) return t;\n      var r = hm.getPostMutationVersion(t);\n      return new Ld(this.key, r, this.value, {\n        hasLocalMutations: !0\n      });\n    }, e.prototype.extractBaseValue = function (t) {\n      return null;\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && this.key.isEqual(t.key) && this.value.isEqual(t.value) && this.precondition.isEqual(t.precondition);\n    }, e;\n  }(hm),\n      fm = function (o) {\n    function e(t, e, n, r) {\n      var i = o.call(this) || this;\n      return i.key = t, i.data = e, i.fieldMask = n, i.precondition = r, i.type = zy.Patch, i;\n    }\n\n    return ii(e, o), e.prototype.applyToRemoteDocument = function (t, e) {\n      if (this.verifyKeyMatches(t), Uf(null == e.transformResults, \"Transform results received by PatchMutation.\"), !this.precondition.isValidFor(t)) return new Ud(this.key, e.version);\n      var n = this.patchDocument(t);\n      return new Ld(this.key, e.version, n, {\n        hasCommittedMutations: !0\n      });\n    }, e.prototype.applyToLocalView = function (t, e, n) {\n      if (this.verifyKeyMatches(t), !this.precondition.isValidFor(t)) return t;\n      var r = hm.getPostMutationVersion(t),\n          i = this.patchDocument(t);\n      return new Ld(this.key, r, i, {\n        hasLocalMutations: !0\n      });\n    }, e.prototype.extractBaseValue = function (t) {\n      return null;\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && this.key.isEqual(t.key) && this.fieldMask.isEqual(t.fieldMask) && this.precondition.isEqual(t.precondition);\n    }, e.prototype.patchDocument = function (t) {\n      var e;\n      return e = t instanceof Ld ? t.data : im.EMPTY, this.patchObject(e);\n    }, e.prototype.patchObject = function (n) {\n      var r = this;\n      return this.fieldMask.fields.forEach(function (t) {\n        if (!t.isEmpty()) {\n          var e = r.data.field(t);\n          n = null !== e ? n.set(t, e) : n.delete(t);\n        }\n      }), n;\n    }, e;\n  }(hm),\n      pm = function (r) {\n    function e(t, e) {\n      var n = r.call(this) || this;\n      return n.key = t, n.fieldTransforms = e, n.type = zy.Transform, n.precondition = cm.exists(!0), n;\n    }\n\n    return ii(e, r), e.prototype.applyToRemoteDocument = function (t, e) {\n      if (this.verifyKeyMatches(t), Uf(null != e.transformResults, \"Transform results missing for TransformMutation.\"), !this.precondition.isValidFor(t)) return new Ud(this.key, e.version);\n      var n = this.requireDocument(t),\n          r = this.serverTransformResults(t, e.transformResults),\n          i = e.version,\n          o = this.transformObject(n.data, r);\n      return new Ld(this.key, i, o, {\n        hasCommittedMutations: !0\n      });\n    }, e.prototype.applyToLocalView = function (t, e, n) {\n      if (this.verifyKeyMatches(t), !this.precondition.isValidFor(t)) return t;\n      var r = this.requireDocument(t),\n          i = this.localTransformResults(n, t, e),\n          o = this.transformObject(r.data, i);\n      return new Ld(this.key, r.version, o, {\n        hasLocalMutations: !0\n      });\n    }, e.prototype.extractBaseValue = function (t) {\n      for (var e = null, n = 0, r = this.fieldTransforms; n < r.length; n++) {\n        var i = r[n],\n            o = t instanceof Ld ? t.field(i.field) : void 0,\n            a = i.transform.computeBaseValue(o || null);\n        null != a && (e = null == e ? im.EMPTY.set(i.field, a) : e.set(i.field, a));\n      }\n\n      return e;\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && this.key.isEqual(t.key) && yp(this.fieldTransforms, t.fieldTransforms) && this.precondition.isEqual(t.precondition);\n    }, e.prototype.requireDocument = function (t) {\n      Uf(t instanceof Ld, \"Unknown MaybeDocument type \" + t);\n      var e = t;\n      return Uf(e.key.isEqual(this.key), \"Can only transform a document with the same key\"), e;\n    }, e.prototype.serverTransformResults = function (t, e) {\n      var n = [];\n      Uf(this.fieldTransforms.length === e.length, \"server transform result count (\" + e.length + \") should match field transform count (\" + this.fieldTransforms.length + \")\");\n\n      for (var r = 0; r < e.length; r++) {\n        var i = this.fieldTransforms[r],\n            o = i.transform,\n            a = null;\n        t instanceof Ld && (a = t.field(i.field)), n.push(o.applyToRemoteDocument(a, e[r]));\n      }\n\n      return n;\n    }, e.prototype.localTransformResults = function (t, e, n) {\n      for (var r = [], i = 0, o = this.fieldTransforms; i < o.length; i++) {\n        var a = o[i],\n            s = a.transform,\n            u = null;\n        e instanceof Ld && (u = e.field(a.field)), null === u && n instanceof Ld && (u = n.field(a.field)), r.push(s.applyToLocalView(u, t));\n      }\n\n      return r;\n    }, e.prototype.transformObject = function (t, e) {\n      Uf(e.length === this.fieldTransforms.length, \"TransformResults length mismatch.\");\n\n      for (var n = 0; n < this.fieldTransforms.length; n++) {\n        var r = this.fieldTransforms[n].field;\n        t = t.set(r, e[n]);\n      }\n\n      return t;\n    }, e;\n  }(hm),\n      dm = function (r) {\n    function e(t, e) {\n      var n = r.call(this) || this;\n      return n.key = t, n.precondition = e, n.type = zy.Delete, n;\n    }\n\n    return ii(e, r), e.prototype.applyToRemoteDocument = function (t, e) {\n      return this.verifyKeyMatches(t), Uf(null == e.transformResults, \"Transform results received by DeleteMutation.\"), new Fd(this.key, e.version, {\n        hasCommittedMutations: !0\n      });\n    }, e.prototype.applyToLocalView = function (t, e, n) {\n      return this.verifyKeyMatches(t), this.precondition.isValidFor(t) ? (t && Uf(t.key.isEqual(this.key), \"Can only apply mutation to document with same key\"), new Fd(this.key, Qp.forDeletedDoc())) : t;\n    }, e.prototype.extractBaseValue = function (t) {\n      return null;\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && this.key.isEqual(t.key) && this.precondition.isEqual(t.precondition);\n    }, e;\n  }(hm),\n      ym = function () {\n    function t(t, e, n) {\n      this.remoteDocumentCache = t, this.mutationQueue = e, this.indexManager = n;\n    }\n\n    return t.prototype.getDocument = function (e, n) {\n      var r = this;\n      return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e, n).next(function (t) {\n        return r.getDocumentInternal(e, n, t);\n      });\n    }, t.prototype.getDocumentInternal = function (t, r, i) {\n      return this.remoteDocumentCache.getEntry(t, r).next(function (t) {\n        for (var e = 0, n = i; e < n.length; e++) {\n          t = n[e].applyToLocalView(r, t);\n        }\n\n        return t;\n      });\n    }, t.prototype.applyLocalMutationsToDocuments = function (t, e, i) {\n      var o = td();\n      return e.forEach(function (t, e) {\n        for (var n = 0, r = i; n < r.length; n++) {\n          e = r[n].applyToLocalView(t, e);\n        }\n\n        o = o.insert(t, e);\n      }), o;\n    }, t.prototype.getDocuments = function (e, t) {\n      var n = this;\n      return this.remoteDocumentCache.getEntries(e, t).next(function (t) {\n        return n.getLocalViewOfDocuments(e, t);\n      });\n    }, t.prototype.getLocalViewOfDocuments = function (r, i) {\n      var o = this;\n      return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(r, i).next(function (t) {\n        var e = o.applyLocalMutationsToDocuments(r, i, t),\n            n = Zp();\n        return e.forEach(function (t, e) {\n          e || (e = new Fd(t, Qp.forDeletedDoc())), n = n.insert(t, e);\n        }), n;\n      });\n    }, t.prototype.getDocumentsMatchingQuery = function (t, e) {\n      return e.isDocumentQuery() ? this.getDocumentsMatchingDocumentQuery(t, e.path) : e.isCollectionGroupQuery() ? this.getDocumentsMatchingCollectionGroupQuery(t, e) : this.getDocumentsMatchingCollectionQuery(t, e);\n    }, t.prototype.getDocumentsMatchingDocumentQuery = function (t, e) {\n      return this.getDocument(t, new Op(e)).next(function (t) {\n        var e = nd();\n        return t instanceof Ld && (e = e.insert(t.key, t)), e;\n      });\n    }, t.prototype.getDocumentsMatchingCollectionGroupQuery = function (n, r) {\n      var i = this;\n      Uf(r.path.isEmpty(), \"Currently we only support collection group queries at the root.\");\n      var o = r.collectionGroup,\n          a = nd();\n      return this.indexManager.getCollectionParents(n, o).next(function (t) {\n        return ld.forEach(t, function (t) {\n          var e = r.asCollectionQueryAtPath(t.child(o));\n          return i.getDocumentsMatchingCollectionQuery(n, e).next(function (t) {\n            t.forEach(function (t, e) {\n              a = a.insert(t, e);\n            });\n          });\n        }).next(function () {\n          return a;\n        });\n      });\n    }, t.prototype.getDocumentsMatchingCollectionQuery = function (e, n) {\n      var h,\n          l,\n          r = this;\n      return this.remoteDocumentCache.getDocumentsMatchingQuery(e, n).next(function (t) {\n        return h = t, r.mutationQueue.getAllMutationBatchesAffectingQuery(e, n);\n      }).next(function (t) {\n        return l = t, r.addMissingBaseDocuments(e, l, h).next(function (t) {\n          h = t;\n\n          for (var e = 0, n = l; e < n.length; e++) {\n            for (var r = n[e], i = 0, o = r.mutations; i < o.length; i++) {\n              var a = o[i],\n                  s = a.key,\n                  u = h.get(s),\n                  c = a.applyToLocalView(u, u, r.localWriteTime);\n              h = c instanceof Ld ? h.insert(s, c) : h.remove(s);\n            }\n          }\n        });\n      }).next(function () {\n        return h.forEach(function (t, e) {\n          n.matches(e) || (h = h.remove(t));\n        }), h;\n      });\n    }, t.prototype.addMissingBaseDocuments = function (t, e, n) {\n      for (var r = ad(), i = 0, o = e; i < o.length; i++) {\n        for (var a = 0, s = o[i].mutations; a < s.length; a++) {\n          var u = s[a];\n          u instanceof fm && null === n.get(u.key) && (r = r.add(u.key));\n        }\n      }\n\n      var c = n;\n      return this.remoteDocumentCache.getEntries(t, r).next(function (t) {\n        return t.forEach(function (t, e) {\n          null !== e && e instanceof Ld && (c = c.insert(t, e));\n        }), c;\n      });\n    }, t;\n  }(),\n      mm = function () {\n    function t() {\n      this.refsByKey = new Xp(gm.compareByKey), this.refsByTarget = new Xp(gm.compareByTargetId);\n    }\n\n    return t.prototype.isEmpty = function () {\n      return this.refsByKey.isEmpty();\n    }, t.prototype.addReference = function (t, e) {\n      var n = new gm(t, e);\n      this.refsByKey = this.refsByKey.add(n), this.refsByTarget = this.refsByTarget.add(n);\n    }, t.prototype.addReferences = function (t, e) {\n      var n = this;\n      t.forEach(function (t) {\n        return n.addReference(t, e);\n      });\n    }, t.prototype.removeReference = function (t, e) {\n      this.removeRef(new gm(t, e));\n    }, t.prototype.removeReferences = function (t, e) {\n      var n = this;\n      t.forEach(function (t) {\n        return n.removeReference(t, e);\n      });\n    }, t.prototype.removeReferencesForId = function (t) {\n      var e = this,\n          n = Op.EMPTY,\n          r = new gm(n, t),\n          i = new gm(n, t + 1),\n          o = [];\n      return this.refsByTarget.forEachInRange([r, i], function (t) {\n        e.removeRef(t), o.push(t.key);\n      }), o;\n    }, t.prototype.removeAllReferences = function () {\n      var e = this;\n      this.refsByKey.forEach(function (t) {\n        return e.removeRef(t);\n      });\n    }, t.prototype.removeRef = function (t) {\n      this.refsByKey = this.refsByKey.delete(t), this.refsByTarget = this.refsByTarget.delete(t);\n    }, t.prototype.referencesForId = function (t) {\n      var e = Op.EMPTY,\n          n = new gm(e, t),\n          r = new gm(e, t + 1),\n          i = ad();\n      return this.refsByTarget.forEachInRange([n, r], function (t) {\n        i = i.add(t.key);\n      }), i;\n    }, t.prototype.containsKey = function (t) {\n      var e = new gm(t, 0),\n          n = this.refsByKey.firstAfterOrEqual(e);\n      return null !== n && t.isEqual(n.key);\n    }, t;\n  }(),\n      gm = function () {\n    function t(t, e) {\n      this.key = t, this.targetOrBatchId = e;\n    }\n\n    return t.compareByKey = function (t, e) {\n      return Op.comparator(t.key, e.key) || dp(t.targetOrBatchId, e.targetOrBatchId);\n    }, t.compareByTargetId = function (t, e) {\n      return dp(t.targetOrBatchId, e.targetOrBatchId) || Op.comparator(t.key, e.key);\n    }, t;\n  }(),\n      vm = function () {\n    function l(t, e) {\n      this.persistence = t, this.localViewReferences = new mm(), this.queryDataByTarget = {}, Uf(t.started, \"LocalStore was passed an unstarted persistence implementation\"), this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences), this.mutationQueue = t.getMutationQueue(e), this.remoteDocuments = t.getRemoteDocumentCache(), this.queryCache = t.getQueryCache(), this.localDocuments = new ym(this.remoteDocuments, this.mutationQueue, this.persistence.getIndexManager());\n    }\n\n    return l.prototype.handleUserChange = function (e) {\n      var m = this;\n      return this.persistence.runTransaction(\"Handle user change\", \"readonly\", function (d) {\n        var y;\n        return m.mutationQueue.getAllMutationBatches(d).next(function (t) {\n          return y = t, m.mutationQueue = m.persistence.getMutationQueue(e), m.localDocuments = new ym(m.remoteDocuments, m.mutationQueue, m.persistence.getIndexManager()), m.mutationQueue.getAllMutationBatches(d);\n        }).next(function (t) {\n          for (var e = [], n = [], r = ad(), i = 0, o = y; i < o.length; i++) {\n            var a = o[i];\n            e.push(a.batchId);\n\n            for (var s = 0, u = a.mutations; s < u.length; s++) {\n              var c = u[s];\n              r = r.add(c.key);\n            }\n          }\n\n          for (var h = 0, l = t; h < l.length; h++) {\n            a = l[h];\n            n.push(a.batchId);\n\n            for (var f = 0, p = a.mutations; f < p.length; f++) {\n              c = p[f];\n              r = r.add(c.key);\n            }\n          }\n\n          return m.localDocuments.getDocuments(d, r).next(function (t) {\n            return {\n              affectedDocuments: t,\n              removedBatchIds: e,\n              addedBatchIds: n\n            };\n          });\n        });\n      });\n    }, l.prototype.localWrite = function (s) {\n      var u = this,\n          c = Kp.now(),\n          t = s.reduce(function (t, e) {\n        return t.add(e.key);\n      }, ad());\n      return this.persistence.runTransaction(\"Locally write mutations\", \"readwrite\", function (a) {\n        return u.localDocuments.getDocuments(a, t).next(function (n) {\n          for (var t = [], e = 0, r = s; e < r.length; e++) {\n            var i = r[e],\n                o = i.extractBaseValue(n.get(i.key));\n            null != o && t.push(new fm(i.key, o, o.fieldMask(), cm.exists(!0)));\n          }\n\n          return u.mutationQueue.addMutationBatch(a, c, t, s).next(function (t) {\n            var e = t.applyToLocalDocumentSet(n);\n            return {\n              batchId: t.batchId,\n              changes: e\n            };\n          });\n        });\n      });\n    }, l.prototype.lookupMutationDocuments = function (t) {\n      var n = this;\n      return this.persistence.runTransaction(\"Lookup mutation documents\", \"readonly\", function (e) {\n        return n.mutationQueue.lookupMutationKeys(e, t).next(function (t) {\n          return t ? n.localDocuments.getDocuments(e, t) : ld.resolve(null);\n        });\n      });\n    }, l.prototype.acknowledgeBatch = function (r) {\n      var i = this;\n      return this.persistence.runTransaction(\"Acknowledge batch\", \"readwrite-primary\", function (t) {\n        var e = r.batch.keys(),\n            n = i.remoteDocuments.newChangeBuffer();\n        return i.mutationQueue.acknowledgeBatch(t, r.batch, r.streamToken).next(function () {\n          return i.applyWriteToRemoteDocuments(t, r, n);\n        }).next(function () {\n          return n.apply(t);\n        }).next(function () {\n          return i.mutationQueue.performConsistencyCheck(t);\n        }).next(function () {\n          return i.localDocuments.getDocuments(t, e);\n        });\n      });\n    }, l.prototype.rejectBatch = function (t) {\n      var r = this;\n      return this.persistence.runTransaction(\"Reject batch\", \"readwrite-primary\", function (e) {\n        var n;\n        return r.mutationQueue.lookupMutationBatch(e, t).next(function (t) {\n          return Uf(null !== t, \"Attempt to reject nonexistent batch!\"), n = t.keys(), r.mutationQueue.removeMutationBatch(e, t);\n        }).next(function () {\n          return r.mutationQueue.performConsistencyCheck(e);\n        }).next(function () {\n          return r.localDocuments.getDocuments(e, n);\n        });\n      });\n    }, l.prototype.getLastStreamToken = function () {\n      var e = this;\n      return this.persistence.runTransaction(\"Get last stream token\", \"readonly\", function (t) {\n        return e.mutationQueue.getLastStreamToken(t);\n      });\n    }, l.prototype.setLastStreamToken = function (e) {\n      var n = this;\n      return this.persistence.runTransaction(\"Set last stream token\", \"readwrite-primary\", function (t) {\n        return n.mutationQueue.setLastStreamToken(t, e);\n      });\n    }, l.prototype.getLastRemoteSnapshotVersion = function () {\n      var e = this;\n      return this.persistence.runTransaction(\"Get last remote snapshot version\", \"readonly\", function (t) {\n        return e.queryCache.getLastRemoteSnapshotVersion(t);\n      });\n    }, l.prototype.applyRemoteEvent = function (u) {\n      var c = this,\n          h = this.remoteDocuments.newChangeBuffer();\n      return this.persistence.runTransaction(\"Apply remote event\", \"readwrite-primary\", function (o) {\n        var a = [],\n            s = ad();\n        Hf(u.targetChanges, function (t, e) {\n          var n = c.queryDataByTarget[t];\n\n          if (n) {\n            e.addedDocuments.forEach(function (t) {\n              s = s.add(t);\n            }), e.modifiedDocuments.forEach(function (t) {\n              s = s.add(t);\n            }), a.push(c.queryCache.removeMatchingKeys(o, e.removedDocuments, t).next(function () {\n              return c.queryCache.addMatchingKeys(o, e.addedDocuments, t);\n            }));\n            var r = e.resumeToken;\n\n            if (0 < r.length) {\n              var i = n;\n              n = n.copy({\n                resumeToken: r,\n                snapshotVersion: u.snapshotVersion\n              }), c.queryDataByTarget[t] = n, l.shouldPersistQueryData(i, n, e) && a.push(c.queryCache.updateQueryData(o, n));\n            }\n          }\n        });\n        var i = Zp(),\n            n = ad();\n        u.documentUpdates.forEach(function (t, e) {\n          n = n.add(t);\n        }), a.push(h.getEntries(o, n).next(function (r) {\n          u.documentUpdates.forEach(function (t, e) {\n            var n = r.get(t);\n            null == n || e.version.isEqual(Qp.MIN) || s.has(e.key) && !n.hasPendingWrites || 0 <= e.version.compareTo(n.version) ? (h.addEntry(e), i = i.insert(t, e)) : xf(\"LocalStore\", \"Ignoring outdated watch update for \", t, \". Current version:\", n.version, \" Watch version:\", e.version), u.resolvedLimboDocuments.has(t) && a.push(c.persistence.referenceDelegate.updateLimboDocument(o, t));\n          });\n        }));\n        var e = u.snapshotVersion;\n\n        if (!e.isEqual(Qp.MIN)) {\n          var t = c.queryCache.getLastRemoteSnapshotVersion(o).next(function (t) {\n            return Uf(0 <= e.compareTo(t), \"Watch stream reverted to previous snapshot?? \" + e + \" < \" + t), c.queryCache.setTargetsMetadata(o, o.currentSequenceNumber, e);\n          });\n          a.push(t);\n        }\n\n        return ld.waitFor(a).next(function () {\n          return h.apply(o);\n        }).next(function () {\n          return c.localDocuments.getLocalViewOfDocuments(o, i);\n        });\n      });\n    }, l.shouldPersistQueryData = function (t, e, n) {\n      return 0 !== e.resumeToken.length && (0 === t.resumeToken.length || e.snapshotVersion.toMicroseconds() - t.snapshotVersion.toMicroseconds() >= this.RESUME_TOKEN_MAX_AGE_MICROS || 0 < n.addedDocuments.size + n.modifiedDocuments.size + n.removedDocuments.size);\n    }, l.prototype.notifyLocalViewChanges = function (t) {\n      var n = this;\n      return this.persistence.runTransaction(\"notifyLocalViewChanges\", \"readwrite\", function (e) {\n        return ld.forEach(t, function (t) {\n          return n.localViewReferences.addReferences(t.addedKeys, t.targetId), n.localViewReferences.removeReferences(t.removedKeys, t.targetId), ld.forEach(t.removedKeys, function (t) {\n            return n.persistence.referenceDelegate.removeReference(e, t);\n          });\n        });\n      });\n    }, l.prototype.nextMutationBatch = function (e) {\n      var n = this;\n      return this.persistence.runTransaction(\"Get next mutation batch\", \"readonly\", function (t) {\n        return void 0 === e && (e = -1), n.mutationQueue.getNextMutationBatchAfterBatchId(t, e);\n      });\n    }, l.prototype.readDocument = function (e) {\n      var n = this;\n      return this.persistence.runTransaction(\"read document\", \"readonly\", function (t) {\n        return n.localDocuments.getDocument(t, e);\n      });\n    }, l.prototype.allocateQuery = function (r) {\n      var i = this;\n      return this.persistence.runTransaction(\"Allocate query\", \"readwrite\", function (e) {\n        var n;\n        return i.queryCache.getQueryData(e, r).next(function (t) {\n          return t ? (n = t, ld.resolve()) : i.queryCache.allocateTargetId(e).next(function (t) {\n            return n = new wy(r, t, yy.Listen, e.currentSequenceNumber), i.queryCache.addQueryData(e, n);\n          });\n        }).next(function () {\n          return Uf(!i.queryDataByTarget[n.targetId], \"Tried to allocate an already allocated query: \" + r), i.queryDataByTarget[n.targetId] = n;\n        });\n      });\n    }, l.prototype.releaseQuery = function (o, a) {\n      var s = this,\n          t = a ? \"readwrite\" : \"readwrite-primary\";\n      return this.persistence.runTransaction(\"Release query\", t, function (i) {\n        return s.queryCache.getQueryData(i, o).next(function (t) {\n          Uf(null != t, \"Tried to release nonexistent query: \" + o);\n          var e = t.targetId,\n              n = s.queryDataByTarget[e],\n              r = s.localViewReferences.removeReferencesForId(e);\n          return delete s.queryDataByTarget[e], a ? ld.resolve() : ld.forEach(r, function (t) {\n            return s.persistence.referenceDelegate.removeReference(i, t);\n          }).next(function () {\n            return s.persistence.referenceDelegate.removeTarget(i, n);\n          });\n        });\n      });\n    }, l.prototype.executeQuery = function (e) {\n      var n = this;\n      return this.persistence.runTransaction(\"Execute query\", \"readonly\", function (t) {\n        return n.localDocuments.getDocumentsMatchingQuery(t, e);\n      });\n    }, l.prototype.remoteDocumentKeys = function (e) {\n      var n = this;\n      return this.persistence.runTransaction(\"Remote document keys\", \"readonly\", function (t) {\n        return n.queryCache.getMatchingKeysForTargetId(t, e);\n      });\n    }, l.prototype.getActiveClients = function () {\n      return this.persistence.getActiveClients();\n    }, l.prototype.removeCachedMutationBatchMetadata = function (t) {\n      this.mutationQueue.removeCachedMutationKeys(t);\n    }, l.prototype.setNetworkEnabled = function (t) {\n      this.persistence.setNetworkEnabled(t);\n    }, l.prototype.applyWriteToRemoteDocuments = function (t, i, o) {\n      var e = this,\n          a = i.batch,\n          n = a.keys(),\n          s = ld.resolve();\n      return n.forEach(function (r) {\n        s = s.next(function () {\n          return o.getEntry(t, r);\n        }).next(function (t) {\n          var e = t,\n              n = i.docVersions.get(r);\n          Uf(null !== n, \"ackVersions should contain every doc in the write.\"), (!e || e.version.compareTo(n) < 0) && ((e = a.applyToRemoteDocument(r, e, i)) ? o.addEntry(e) : Uf(!t, \"Mutation batch \" + a + \" applied to document \" + t + \" resulted in null\"));\n        });\n      }), s.next(function () {\n        return e.mutationQueue.removeMutationBatch(t, a);\n      });\n    }, l.prototype.collectGarbage = function (e) {\n      var n = this;\n      return this.persistence.runTransaction(\"Collect garbage\", \"readwrite-primary\", function (t) {\n        return e.collect(t, n.queryDataByTarget);\n      });\n    }, l.prototype.getQueryForTarget = function (e) {\n      var n = this;\n      return this.queryDataByTarget[e] ? Promise.resolve(this.queryDataByTarget[e].query) : this.persistence.runTransaction(\"Get query data\", \"readonly\", function (t) {\n        return n.queryCache.getQueryDataForTarget(t, e).next(function (t) {\n          return t ? t.query : null;\n        });\n      });\n    }, l.prototype.getNewDocumentChanges = function () {\n      var e = this;\n      return this.persistence.runTransaction(\"Get new document changes\", \"readonly\", function (t) {\n        return e.remoteDocuments.getNewDocumentChanges(t);\n      });\n    }, l.RESUME_TOKEN_MAX_AGE_MICROS = 3e8, l;\n  }(),\n      bm = function () {\n    function t(t, e) {\n      this.indexManager = t, this.referenceDelegate = e, this.mutationQueue = [], this.nextBatchId = 1, this.lastStreamToken = Vf(), this.batchesByDocumentKey = new Xp(gm.compareByKey);\n    }\n\n    return t.prototype.checkEmpty = function (t) {\n      return ld.resolve(0 === this.mutationQueue.length);\n    }, t.prototype.acknowledgeBatch = function (t, e, n) {\n      var r = e.batchId,\n          i = this.indexOfExistingBatchId(r, \"acknowledged\");\n      Uf(0 === i, \"Can only acknowledge the first batch in the mutation queue\");\n      var o = this.mutationQueue[i];\n      return Uf(r === o.batchId, \"Queue ordering failure: expected batch \" + r + \", got batch \" + o.batchId), this.lastStreamToken = n, ld.resolve();\n    }, t.prototype.getLastStreamToken = function (t) {\n      return ld.resolve(this.lastStreamToken);\n    }, t.prototype.setLastStreamToken = function (t, e) {\n      return this.lastStreamToken = e, ld.resolve();\n    }, t.prototype.addMutationBatch = function (t, e, n, r) {\n      Uf(0 !== r.length, \"Mutation batches should not be empty\");\n      var i = this.nextBatchId;\n      (this.nextBatchId++, 0 < this.mutationQueue.length) && Uf(this.mutationQueue[this.mutationQueue.length - 1].batchId < i, \"Mutation batchIDs must be monotonically increasing order\");\n      var o = new cd(i, e, n, r);\n      this.mutationQueue.push(o);\n\n      for (var a = 0, s = r; a < s.length; a++) {\n        var u = s[a];\n        this.batchesByDocumentKey = this.batchesByDocumentKey.add(new gm(u.key, i)), this.indexManager.addToCollectionParentIndex(t, u.key.path.popLast());\n      }\n\n      return ld.resolve(o);\n    }, t.prototype.lookupMutationBatch = function (t, e) {\n      return ld.resolve(this.findMutationBatch(e));\n    }, t.prototype.lookupMutationKeys = function (t, e) {\n      var n = this.findMutationBatch(e);\n      return Uf(null != n, \"Failed to find local mutation batch.\"), ld.resolve(n.keys());\n    }, t.prototype.getNextMutationBatchAfterBatchId = function (t, e) {\n      var n = e + 1,\n          r = this.indexOfBatchId(n),\n          i = r < 0 ? 0 : r;\n      return ld.resolve(this.mutationQueue.length > i ? this.mutationQueue[i] : null);\n    }, t.prototype.getAllMutationBatches = function (t) {\n      return ld.resolve(this.mutationQueue.slice());\n    }, t.prototype.getAllMutationBatchesAffectingDocumentKey = function (t, n) {\n      var r = this,\n          e = new gm(n, 0),\n          i = new gm(n, Number.POSITIVE_INFINITY),\n          o = [];\n      return this.batchesByDocumentKey.forEachInRange([e, i], function (t) {\n        Uf(n.isEqual(t.key), \"Should only iterate over a single key's batches\");\n        var e = r.findMutationBatch(t.targetOrBatchId);\n        Uf(null !== e, \"Batches in the index must exist in the main table\"), o.push(e);\n      }), ld.resolve(o);\n    }, t.prototype.getAllMutationBatchesAffectingDocumentKeys = function (t, e) {\n      var r = this,\n          i = new Xp(dp);\n      return e.forEach(function (e) {\n        var t = new gm(e, 0),\n            n = new gm(e, Number.POSITIVE_INFINITY);\n        r.batchesByDocumentKey.forEachInRange([t, n], function (t) {\n          Uf(e.isEqual(t.key), \"For each key, should only iterate over a single key's batches\"), i = i.add(t.targetOrBatchId);\n        });\n      }), ld.resolve(this.findMutationBatches(i));\n    }, t.prototype.getAllMutationBatchesAffectingQuery = function (t, e) {\n      Uf(!e.isCollectionGroupQuery(), \"CollectionGroup queries should be handled in LocalDocumentsView\");\n      var n = e.path,\n          r = n.length + 1,\n          i = n;\n      Op.isDocumentKey(i) || (i = i.child(\"\"));\n      var o = new gm(new Op(i), 0),\n          a = new Xp(dp);\n      return this.batchesByDocumentKey.forEachWhile(function (t) {\n        var e = t.key.path;\n        return !!n.isPrefixOf(e) && (e.length === r && (a = a.add(t.targetOrBatchId)), !0);\n      }, o), ld.resolve(this.findMutationBatches(a));\n    }, t.prototype.findMutationBatches = function (t) {\n      var n = this,\n          r = [];\n      return t.forEach(function (t) {\n        var e = n.findMutationBatch(t);\n        null !== e && r.push(e);\n      }), r;\n    }, t.prototype.removeMutationBatch = function (n, r) {\n      var i = this;\n      Uf(0 === this.indexOfExistingBatchId(r.batchId, \"removed\"), \"Can only remove the first entry of the mutation queue\"), this.mutationQueue.shift();\n      var o = this.batchesByDocumentKey;\n      return ld.forEach(r.mutations, function (t) {\n        var e = new gm(t.key, r.batchId);\n        return o = o.delete(e), i.referenceDelegate.removeMutationReference(n, t.key);\n      }).next(function () {\n        i.batchesByDocumentKey = o;\n      });\n    }, t.prototype.removeCachedMutationKeys = function (t) {}, t.prototype.containsKey = function (t, e) {\n      var n = new gm(e, 0),\n          r = this.batchesByDocumentKey.firstAfterOrEqual(n);\n      return ld.resolve(e.isEqual(r && r.key));\n    }, t.prototype.performConsistencyCheck = function (t) {\n      return 0 === this.mutationQueue.length && Uf(this.batchesByDocumentKey.isEmpty(), \"Document leak -- detected dangling mutation references when queue is empty.\"), ld.resolve();\n    }, t.prototype.indexOfExistingBatchId = function (t, e) {\n      var n = this.indexOfBatchId(t);\n      return Uf(0 <= n && n < this.mutationQueue.length, \"Batches must exist to be \" + e), n;\n    }, t.prototype.indexOfBatchId = function (t) {\n      return 0 === this.mutationQueue.length ? 0 : t - this.mutationQueue[0].batchId;\n    }, t.prototype.findMutationBatch = function (t) {\n      var e = this.indexOfBatchId(t);\n      if (e < 0 || e >= this.mutationQueue.length) return null;\n      var n = this.mutationQueue[e];\n      return Uf(n.batchId === t, \"If found batch must match\"), n;\n    }, t;\n  }(),\n      wm = function () {\n    function t(t) {\n      this.persistence = t, this.queries = new qd(function (t) {\n        return t.canonicalId();\n      }), this.lastRemoteSnapshotVersion = Qp.MIN, this.highestTargetId = 0, this.highestSequenceNumber = 0, this.references = new mm(), this.targetCount = 0, this.targetIdGenerator = _d.forQueryCache();\n    }\n\n    return t.prototype.getTargetCount = function (t) {\n      return ld.resolve(this.targetCount);\n    }, t.prototype.forEachTarget = function (t, n) {\n      return this.queries.forEach(function (t, e) {\n        return n(e);\n      }), ld.resolve();\n    }, t.prototype.getLastRemoteSnapshotVersion = function (t) {\n      return ld.resolve(this.lastRemoteSnapshotVersion);\n    }, t.prototype.getHighestSequenceNumber = function (t) {\n      return ld.resolve(this.highestSequenceNumber);\n    }, t.prototype.allocateTargetId = function (t) {\n      var e = this.targetIdGenerator.after(this.highestTargetId);\n      return this.highestTargetId = e, ld.resolve(e);\n    }, t.prototype.setTargetsMetadata = function (t, e, n) {\n      return n && (this.lastRemoteSnapshotVersion = n), e > this.highestSequenceNumber && (this.highestSequenceNumber = e), ld.resolve();\n    }, t.prototype.saveQueryData = function (t) {\n      this.queries.set(t.query, t);\n      var e = t.targetId;\n      e > this.highestTargetId && (this.highestTargetId = e), t.sequenceNumber > this.highestSequenceNumber && (this.highestSequenceNumber = t.sequenceNumber);\n    }, t.prototype.addQueryData = function (t, e) {\n      return Uf(!this.queries.has(e.query), \"Adding a query that already exists\"), this.saveQueryData(e), this.targetCount += 1, ld.resolve();\n    }, t.prototype.updateQueryData = function (t, e) {\n      return Uf(this.queries.has(e.query), \"Updating a non-existent query\"), this.saveQueryData(e), ld.resolve();\n    }, t.prototype.removeQueryData = function (t, e) {\n      return Uf(0 < this.targetCount, \"Removing a target from an empty cache\"), Uf(this.queries.has(e.query), \"Removing a non-existent target from the cache\"), this.queries.delete(e.query), this.references.removeReferencesForId(e.targetId), this.targetCount -= 1, ld.resolve();\n    }, t.prototype.removeTargets = function (n, r, i) {\n      var o = this,\n          a = 0,\n          s = [];\n      return this.queries.forEach(function (t, e) {\n        e.sequenceNumber <= r && !i[e.targetId] && (o.queries.delete(t), s.push(o.removeMatchingKeysForTargetId(n, e.targetId)), a++);\n      }), ld.waitFor(s).next(function () {\n        return a;\n      });\n    }, t.prototype.getQueryCount = function (t) {\n      return ld.resolve(this.targetCount);\n    }, t.prototype.getQueryData = function (t, e) {\n      var n = this.queries.get(e) || null;\n      return ld.resolve(n);\n    }, t.prototype.getQueryDataForTarget = function (t, e) {\n      return Ff(\"Not yet implemented.\");\n    }, t.prototype.addMatchingKeys = function (e, t, n) {\n      this.references.addReferences(t, n);\n      var r = this.persistence.referenceDelegate,\n          i = [];\n      return r && t.forEach(function (t) {\n        i.push(r.addReference(e, t));\n      }), ld.waitFor(i);\n    }, t.prototype.removeMatchingKeys = function (e, t, n) {\n      this.references.removeReferences(t, n);\n      var r = this.persistence.referenceDelegate,\n          i = [];\n      return r && t.forEach(function (t) {\n        i.push(r.removeReference(e, t));\n      }), ld.waitFor(i);\n    }, t.prototype.removeMatchingKeysForTargetId = function (t, e) {\n      return this.references.removeReferencesForId(e), ld.resolve();\n    }, t.prototype.getMatchingKeysForTargetId = function (t, e) {\n      var n = this.references.referencesForId(e);\n      return ld.resolve(n);\n    }, t.prototype.containsKey = function (t, e) {\n      return ld.resolve(this.references.containsKey(e));\n    }, t;\n  }();\n\n  var _m = function () {\n    function t(t, e) {\n      this.indexManager = t, this.sizer = e, this.docs = new Hp(Op.comparator), this.newDocumentChanges = ad(), this.size = 0;\n    }\n\n    return t.prototype.addEntries = function (t, e, n) {\n      for (var r = [], i = 0, o = e; i < o.length; i++) {\n        var a = o[i],\n            s = a.maybeDocument.key;\n        this.docs = this.docs.insert(s, a), this.newDocumentChanges = this.newDocumentChanges.add(s), r.push(this.indexManager.addToCollectionParentIndex(t, s.path.popLast()));\n      }\n\n      return this.size += n, ld.waitFor(r);\n    }, t.prototype.removeEntry = function (t, e) {\n      var n = this.docs.get(e);\n      return n ? (this.docs = this.docs.remove(e), this.size -= n.size, ld.resolve(n.size)) : ld.resolve(0);\n    }, t.prototype.getEntry = function (t, e) {\n      var n = this.docs.get(e);\n      return ld.resolve(n ? n.maybeDocument : null);\n    }, t.prototype.getSizedEntry = function (t, e) {\n      return ld.resolve(this.docs.get(e));\n    }, t.prototype.getEntries = function (t, e) {\n      var n = this,\n          r = td();\n      return e.forEach(function (t) {\n        var e = n.docs.get(t);\n        r = r.insert(t, e ? e.maybeDocument : null);\n      }), ld.resolve(r);\n    }, t.prototype.getSizedEntries = function (t, e) {\n      var n = this,\n          r = td(),\n          i = new Hp(Op.comparator);\n      return e.forEach(function (t) {\n        var e = n.docs.get(t);\n        r = r.insert(t, e ? e.maybeDocument : null), i = i.insert(t, e ? e.size : 0);\n      }), ld.resolve({\n        maybeDocuments: r,\n        sizeMap: i\n      });\n    }, t.prototype.getDocumentsMatchingQuery = function (t, e) {\n      Uf(!e.isCollectionGroupQuery(), \"CollectionGroup queries should be handled in LocalDocumentsView\");\n\n      for (var n = nd(), r = new Op(e.path.child(\"\")), i = this.docs.getIteratorFrom(r); i.hasNext();) {\n        var o = i.getNext(),\n            a = o.key,\n            s = o.value.maybeDocument;\n        if (!e.path.isPrefixOf(a.path)) break;\n        s instanceof Ld && e.matches(s) && (n = n.insert(s.key, s));\n      }\n\n      return ld.resolve(n);\n    }, t.prototype.forEachDocumentKey = function (t, e) {\n      return ld.forEach(this.docs, function (t) {\n        return e(t);\n      });\n    }, t.prototype.getNewDocumentChanges = function (t) {\n      var r = this,\n          i = Zp();\n      return this.newDocumentChanges.forEach(function (t) {\n        var e = r.docs.get(t),\n            n = e ? e.maybeDocument : new Fd(t, Qp.forDeletedDoc());\n        i = i.insert(t, n);\n      }), this.newDocumentChanges = ad(), ld.resolve(i);\n    }, t.prototype.newChangeBuffer = function () {\n      return new Em(this.sizer, this);\n    }, t.prototype.getSize = function (t) {\n      return ld.resolve(this.size);\n    }, t;\n  }(),\n      Em = function (r) {\n    function t(t, e) {\n      var n = r.call(this) || this;\n      return n.sizer = t, n.documentCache = e, n;\n    }\n\n    return ii(t, r), t.prototype.applyChanges = function (t) {\n      var i = this,\n          e = this.assertChanges(),\n          o = 0,\n          a = [];\n      return e.forEach(function (t, e) {\n        var n = i.documentSizes.get(t);\n        Uf(void 0 !== n, \"Attempting to change document \" + t.toString() + \" without having read it first\");\n        var r = i.sizer(e);\n        o += r - n, a.push({\n          maybeDocument: e,\n          size: r\n        });\n      }), this.documentCache.addEntries(t, a, o);\n    }, t.prototype.getFromCache = function (t, e) {\n      return this.documentCache.getSizedEntry(t, e);\n    }, t.prototype.getAllFromCache = function (t, e) {\n      return this.documentCache.getSizedEntries(t, e);\n    }, t;\n  }(Vd),\n      Tm = function () {\n    function r(t, e) {\n      var n = this;\n      this.clientId = t, this.mutationQueues = {}, this.listenSequence = new Cp(0), this._started = !1, this._started = !0, this.referenceDelegate = e(this), this.queryCache = new wm(this);\n      this.indexManager = new Yd(), this.remoteDocumentCache = new _m(this.indexManager, function (t) {\n        return n.referenceDelegate.documentSize(t);\n      });\n    }\n\n    return r.createLruPersistence = function (t, e, n) {\n      return new r(t, function (t) {\n        return new Cm(t, new _y(e), n);\n      });\n    }, r.createEagerPersistence = function (t) {\n      return new r(t, function (t) {\n        return new Im(t);\n      });\n    }, r.prototype.shutdown = function () {\n      return this._started = !1, Promise.resolve();\n    }, Object.defineProperty(r.prototype, \"started\", {\n      get: function get() {\n        return this._started;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), r.prototype.getActiveClients = function () {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          return [2, [this.clientId]];\n        });\n      });\n    }, r.prototype.setPrimaryStateListener = function (t) {\n      return t(!0);\n    }, r.prototype.setDatabaseDeletedListener = function () {}, r.prototype.setNetworkEnabled = function (t) {}, r.prototype.getIndexManager = function () {\n      return this.indexManager;\n    }, r.prototype.getMutationQueue = function (t) {\n      var e = this.mutationQueues[t.toKey()];\n      return e || (e = new bm(this.indexManager, this.referenceDelegate), this.mutationQueues[t.toKey()] = e), e;\n    }, r.prototype.getQueryCache = function () {\n      return this.queryCache;\n    }, r.prototype.getRemoteDocumentCache = function () {\n      return this.remoteDocumentCache;\n    }, r.prototype.runTransaction = function (t, e, n) {\n      var r = this;\n      xf(\"MemoryPersistence\", \"Starting transaction:\", t);\n      var i = new Sm(this.listenSequence.next());\n      return this.referenceDelegate.onTransactionStarted(), n(i).next(function (t) {\n        return r.referenceDelegate.onTransactionCommitted(i).next(function () {\n          return t;\n        });\n      }).toPromise();\n    }, r.prototype.mutationQueuesContainKey = function (e, n) {\n      return ld.or((t = this.mutationQueues, r = [], Gf(t, function (t, e) {\n        return r.push(e);\n      }), r).map(function (t) {\n        return function () {\n          return t.containsKey(e, n);\n        };\n      }));\n      var t, r;\n    }, r;\n  }(),\n      Sm = function Sm(t) {\n    this.currentSequenceNumber = t;\n  },\n      Im = function () {\n    function t(t) {\n      this.persistence = t;\n    }\n\n    return t.prototype.setInMemoryPins = function (t) {\n      this.inMemoryPins = t;\n    }, t.prototype.addReference = function (t, e) {\n      return this.orphanedDocuments.delete(e), ld.resolve();\n    }, t.prototype.removeReference = function (t, e) {\n      return this.orphanedDocuments.add(e), ld.resolve();\n    }, t.prototype.removeMutationReference = function (t, e) {\n      return this.orphanedDocuments.add(e), ld.resolve();\n    }, t.prototype.removeTarget = function (t, e) {\n      var n = this,\n          r = this.persistence.getQueryCache();\n      return r.getMatchingKeysForTargetId(t, e.targetId).next(function (t) {\n        t.forEach(function (t) {\n          return n.orphanedDocuments.add(t);\n        });\n      }).next(function () {\n        return r.removeQueryData(t, e);\n      });\n    }, t.prototype.onTransactionStarted = function () {\n      this.orphanedDocuments = new Set();\n    }, t.prototype.onTransactionCommitted = function (n) {\n      var t = this,\n          r = this.persistence.getRemoteDocumentCache();\n      return ld.forEach(this.orphanedDocuments, function (e) {\n        return t.isReferenced(n, e).next(function (t) {\n          return t ? ld.resolve() : r.removeEntry(n, e).next(function () {});\n        });\n      });\n    }, t.prototype.updateLimboDocument = function (t, e) {\n      var n = this;\n      return this.isReferenced(t, e).next(function (t) {\n        t ? n.orphanedDocuments.delete(e) : n.orphanedDocuments.add(e);\n      });\n    }, t.prototype.documentSize = function (t) {\n      return 0;\n    }, t.prototype.isReferenced = function (t, e) {\n      var n = this;\n      return ld.or([function () {\n        return n.persistence.getQueryCache().containsKey(t, e);\n      }, function () {\n        return n.persistence.mutationQueuesContainKey(t, e);\n      }, function () {\n        return ld.resolve(n.inMemoryPins.containsKey(e));\n      }]);\n    }, t;\n  }(),\n      Cm = function () {\n    function t(t, e, n) {\n      this.persistence = t, this.serializer = e, this.orphanedSequenceNumbers = new qd(function (t) {\n        return Vp(t.path);\n      }), this.garbageCollector = new Ny(this, n);\n    }\n\n    return t.prototype.onTransactionStarted = function () {}, t.prototype.onTransactionCommitted = function (t) {\n      return ld.resolve();\n    }, t.prototype.forEachTarget = function (t, e) {\n      return this.persistence.getQueryCache().forEachTarget(t, e);\n    }, t.prototype.getSequenceNumberCount = function (t) {\n      var n = this.orphanedDocumentCount(t);\n      return this.persistence.getQueryCache().getTargetCount(t).next(function (e) {\n        return n.next(function (t) {\n          return e + t;\n        });\n      });\n    }, t.prototype.orphanedDocumentCount = function (t) {\n      var e = 0;\n      return this.forEachOrphanedDocumentSequenceNumber(t, function (t) {\n        e++;\n      }).next(function () {\n        return e;\n      });\n    }, t.prototype.forEachOrphanedDocumentSequenceNumber = function (n, r) {\n      var i = this;\n      return ld.forEach(this.orphanedSequenceNumbers, function (t, e) {\n        return i.isPinned(n, t, e).next(function (t) {\n          return t ? ld.resolve() : r(e);\n        });\n      });\n    }, t.prototype.setInMemoryPins = function (t) {\n      this.inMemoryPins = t;\n    }, t.prototype.removeTargets = function (t, e, n) {\n      return this.persistence.getQueryCache().removeTargets(t, e, n);\n    }, t.prototype.removeOrphanedDocuments = function (n, t) {\n      var r = this,\n          i = 0,\n          o = this.persistence.getRemoteDocumentCache();\n      return o.forEachDocumentKey(n, function (e) {\n        return r.isPinned(n, e, t).next(function (t) {\n          return t ? ld.resolve() : (i++, o.removeEntry(n, e).next());\n        });\n      }).next(function () {\n        return i;\n      });\n    }, t.prototype.removeMutationReference = function (t, e) {\n      return this.orphanedSequenceNumbers.set(e, t.currentSequenceNumber), ld.resolve();\n    }, t.prototype.removeTarget = function (t, e) {\n      var n = e.copy({\n        sequenceNumber: t.currentSequenceNumber\n      });\n      return this.persistence.getQueryCache().updateQueryData(t, n);\n    }, t.prototype.addReference = function (t, e) {\n      return this.orphanedSequenceNumbers.set(e, t.currentSequenceNumber), ld.resolve();\n    }, t.prototype.removeReference = function (t, e) {\n      return this.orphanedSequenceNumbers.set(e, t.currentSequenceNumber), ld.resolve();\n    }, t.prototype.updateLimboDocument = function (t, e) {\n      return this.orphanedSequenceNumbers.set(e, t.currentSequenceNumber), ld.resolve();\n    }, t.prototype.documentSize = function (t) {\n      var e,\n          n = this.serializer.toDbRemoteDocument(t);\n      if (n.document) e = n.document;else if (n.unknownDocument) e = n.unknownDocument;else {\n        if (!n.noDocument) throw Ff(\"Unknown remote document type\");\n        e = n.noDocument;\n      }\n      return JSON.stringify(e).length;\n    }, t.prototype.isPinned = function (t, e, n) {\n      var r = this;\n      return ld.or([function () {\n        return r.persistence.mutationQueuesContainKey(t, e);\n      }, function () {\n        return ld.resolve(r.inMemoryPins.containsKey(e));\n      }, function () {\n        return r.persistence.getQueryCache().containsKey(t, e);\n      }, function () {\n        var t = r.orphanedSequenceNumbers.get(e);\n        return ld.resolve(void 0 !== t && n < t);\n      }]);\n    }, t.prototype.getCacheSize = function (t) {\n      return this.persistence.getRemoteDocumentCache().getSize(t);\n    }, t;\n  }(),\n      Nm = Number,\n      Am = Nm.MIN_SAFE_INTEGER || -(Math.pow(2, 53) - 1),\n      km = Nm.MAX_SAFE_INTEGER || Math.pow(2, 53) - 1,\n      Dm = Nm.isInteger || function (t) {\n    return \"number\" == typeof t && isFinite(t) && Math.floor(t) === t;\n  };\n\n  function Rm(t) {\n    return null == t;\n  }\n\n  function Om(t) {\n    return Dm(t) && t <= km && Am <= t;\n  }\n\n  var Pm,\n      xm,\n      Mm = function () {\n    function t(t, e, n, r, i) {\n      this.queue = t, this.timerId = e, this.initialDelayMs = n, this.backoffFactor = r, this.maxDelayMs = i, this.timerPromise = null, this.lastAttemptTime = Date.now(), this.reset();\n    }\n\n    return t.prototype.reset = function () {\n      this.currentBaseMs = 0;\n    }, t.prototype.resetToMax = function () {\n      this.currentBaseMs = this.maxDelayMs;\n    }, t.prototype.backoffAndRun = function (t) {\n      var e = this;\n      this.cancel();\n      var n = Math.floor(this.currentBaseMs + this.jitterDelayMs()),\n          r = Math.max(0, Date.now() - this.lastAttemptTime),\n          i = Math.max(0, n - r);\n      0 < this.currentBaseMs && xf(\"ExponentialBackoff\", \"Backing off for \" + i + \" ms (base delay: \" + this.currentBaseMs + \" ms, delay with jitter: \" + n + \" ms, last attempt: \" + r + \" ms ago)\"), this.timerPromise = this.queue.enqueueAfterDelay(this.timerId, i, function () {\n        return e.lastAttemptTime = Date.now(), t();\n      }), this.currentBaseMs *= this.backoffFactor, this.currentBaseMs < this.initialDelayMs && (this.currentBaseMs = this.initialDelayMs), this.currentBaseMs > this.maxDelayMs && (this.currentBaseMs = this.maxDelayMs);\n    }, t.prototype.cancel = function () {\n      null !== this.timerPromise && (this.timerPromise.cancel(), this.timerPromise = null);\n    }, t.prototype.jitterDelayMs = function () {\n      return (Math.random() - .5) * this.currentBaseMs;\n    }, t;\n  }(),\n      Lm = \"PersistentStream\";\n\n  (xm = Pm || (Pm = {}))[xm.Initial = 0] = \"Initial\", xm[xm.Starting = 1] = \"Starting\", xm[xm.Open = 2] = \"Open\", xm[xm.Error = 3] = \"Error\", xm[xm.Backoff = 4] = \"Backoff\";\n\n  var Fm,\n      Um,\n      qm,\n      Vm,\n      Bm = function () {\n    function t(t, e, n, r, i, o) {\n      this.queue = t, this.idleTimerId = n, this.connection = r, this.credentialsProvider = i, this.listener = o, this.state = Pm.Initial, this.closeCount = 0, this.idleTimer = null, this.stream = null, this.backoff = new Mm(t, e, 1e3, 1.5, 6e4);\n    }\n\n    return t.prototype.isStarted = function () {\n      return this.state === Pm.Starting || this.state === Pm.Open || this.state === Pm.Backoff;\n    }, t.prototype.isOpen = function () {\n      return this.state === Pm.Open;\n    }, t.prototype.start = function () {\n      this.state !== Pm.Error ? (Uf(this.state === Pm.Initial, \"Already started\"), this.auth()) : this.performBackoff();\n    }, t.prototype.stop = function () {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.isStarted() ? [4, this.close(Pm.Initial)] : [3, 2];\n\n            case 1:\n              t.sent(), t.label = 2;\n\n            case 2:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.inhibitBackoff = function () {\n      Uf(!this.isStarted(), \"Can only inhibit backoff in a stopped state\"), this.state = Pm.Initial, this.backoff.reset();\n    }, t.prototype.markIdle = function () {\n      var t = this;\n      this.isOpen() && null === this.idleTimer && (this.idleTimer = this.queue.enqueueAfterDelay(this.idleTimerId, 6e4, function () {\n        return t.handleIdleCloseTimer();\n      }));\n    }, t.prototype.sendRequest = function (t) {\n      this.cancelIdleCheck(), this.stream.send(t);\n    }, t.prototype.handleIdleCloseTimer = function () {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          return this.isOpen() ? [2, this.close(Pm.Initial)] : [2];\n        });\n      });\n    }, t.prototype.cancelIdleCheck = function () {\n      this.idleTimer && (this.idleTimer.cancel(), this.idleTimer = null);\n    }, t.prototype.close = function (e, n) {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return Uf(this.isStarted(), \"Only started streams should be closed.\"), Uf(e === Pm.Error || Rm(n), \"Can't provide an error when not in an error state.\"), this.cancelIdleCheck(), this.backoff.cancel(), this.closeCount++, e !== Pm.Error ? this.backoff.reset() : n && n.code === Bf.RESOURCE_EXHAUSTED ? (Mf(n.toString()), Mf(\"Using maximum backoff delay to prevent overloading the backend.\"), this.backoff.resetToMax()) : n && n.code === Bf.UNAUTHENTICATED && this.credentialsProvider.invalidateToken(), null !== this.stream && (this.tearDown(), this.stream.close(), this.stream = null), this.state = e, [4, this.listener.onClose(n)];\n\n            case 1:\n              return t.sent(), [2];\n          }\n        });\n      });\n    }, t.prototype.tearDown = function () {}, t.prototype.auth = function () {\n      var n = this;\n      Uf(this.state === Pm.Initial, \"Must be in initial state to auth\"), this.state = Pm.Starting;\n      var t = this.getCloseGuardedDispatcher(this.closeCount),\n          e = this.closeCount;\n      this.credentialsProvider.getToken().then(function (t) {\n        n.closeCount === e && n.startStream(t);\n      }, function (e) {\n        t(function () {\n          var t = new jf(Bf.UNKNOWN, \"Fetching auth token failed: \" + e.message);\n          return n.handleStreamClose(t);\n        });\n      });\n    }, t.prototype.startStream = function (t) {\n      var e = this;\n      Uf(this.state === Pm.Starting, \"Trying to start stream in a non-starting state\");\n      var n = this.getCloseGuardedDispatcher(this.closeCount);\n      this.stream = this.startRpc(t), this.stream.onOpen(function () {\n        n(function () {\n          return Uf(e.state === Pm.Starting, \"Expected stream to be in state Starting, but was \" + e.state), e.state = Pm.Open, e.listener.onOpen();\n        });\n      }), this.stream.onClose(function (t) {\n        n(function () {\n          return e.handleStreamClose(t);\n        });\n      }), this.stream.onMessage(function (t) {\n        n(function () {\n          return e.onMessage(t);\n        });\n      });\n    }, t.prototype.performBackoff = function () {\n      var t = this;\n      Uf(this.state === Pm.Error, \"Should only perform backoff when in Error state\"), this.state = Pm.Backoff, this.backoff.backoffAndRun(function () {\n        return ai(t, void 0, void 0, function () {\n          return si(this, function (t) {\n            return Uf(this.state === Pm.Backoff, \"Backoff elapsed but state is now: \" + this.state), this.state = Pm.Initial, this.start(), Uf(this.isStarted(), \"PersistentStream should have started\"), [2];\n          });\n        });\n      });\n    }, t.prototype.handleStreamClose = function (t) {\n      return Uf(this.isStarted(), \"Can't handle server close on non-started stream\"), xf(Lm, \"close with error: \" + t), this.stream = null, this.close(Pm.Error, t);\n    }, t.prototype.getCloseGuardedDispatcher = function (e) {\n      var n = this;\n      return function (t) {\n        n.queue.enqueueAndForget(function () {\n          return n.closeCount === e ? t() : (xf(Lm, \"stream callback skipped by getCloseGuardedDispatcher.\"), Promise.resolve());\n        });\n      };\n    }, t;\n  }(),\n      jm = function (a) {\n    function t(t, e, n, r, i) {\n      var o = a.call(this, t, bp.ListenStreamConnectionBackoff, bp.ListenStreamIdle, e, n, i) || this;\n      return o.serializer = r, o;\n    }\n\n    return ii(t, a), t.prototype.startRpc = function (t) {\n      return this.connection.openStream(\"Listen\", t);\n    }, t.prototype.onMessage = function (t) {\n      this.backoff.reset();\n      var e = this.serializer.fromWatchChange(t),\n          n = this.serializer.versionFromListenResponse(t);\n      return this.listener.onWatchChange(e, n);\n    }, t.prototype.watch = function (t) {\n      var e = {};\n      e.database = this.serializer.encodedDatabaseId, e.addTarget = this.serializer.toTarget(t);\n      var n = this.serializer.toListenRequestLabels(t);\n      n && (e.labels = n), this.sendRequest(e);\n    }, t.prototype.unwatch = function (t) {\n      var e = {};\n      e.database = this.serializer.encodedDatabaseId, e.removeTarget = t, this.sendRequest(e);\n    }, t;\n  }(Bm),\n      Wm = function (a) {\n    function t(t, e, n, r, i) {\n      var o = a.call(this, t, bp.WriteStreamConnectionBackoff, bp.WriteStreamIdle, e, n, i) || this;\n      return o.serializer = r, o.handshakeComplete_ = !1, o;\n    }\n\n    return ii(t, a), Object.defineProperty(t.prototype, \"handshakeComplete\", {\n      get: function get() {\n        return this.handshakeComplete_;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.start = function () {\n      this.handshakeComplete_ = !1, a.prototype.start.call(this);\n    }, t.prototype.tearDown = function () {\n      this.handshakeComplete_ && this.writeMutations([]);\n    }, t.prototype.startRpc = function (t) {\n      return this.connection.openStream(\"Write\", t);\n    }, t.prototype.onMessage = function (t) {\n      if (Uf(!!t.streamToken, \"Got a write response without a stream token\"), this.lastStreamToken = t.streamToken, this.handshakeComplete_) {\n        this.backoff.reset();\n        var e = this.serializer.fromWriteResults(t.writeResults, t.commitTime),\n            n = this.serializer.fromVersion(t.commitTime);\n        return this.listener.onMutationResult(n, e);\n      }\n\n      return Uf(!t.writeResults || 0 === t.writeResults.length, \"Got mutation results for handshake\"), this.handshakeComplete_ = !0, this.listener.onHandshakeComplete();\n    }, t.prototype.writeHandshake = function () {\n      Uf(this.isOpen(), \"Writing handshake requires an opened stream\"), Uf(!this.handshakeComplete_, \"Handshake already completed\");\n      var t = {};\n      t.database = this.serializer.encodedDatabaseId, this.sendRequest(t);\n    }, t.prototype.writeMutations = function (t) {\n      var e = this;\n      Uf(this.isOpen(), \"Writing mutations requires an opened stream\"), Uf(this.handshakeComplete_, \"Handshake must be complete before writing mutations\"), Uf(0 < this.lastStreamToken.length, \"Trying to write mutation without a token\");\n      var n = {\n        streamToken: this.lastStreamToken,\n        writes: t.map(function (t) {\n          return e.serializer.toMutation(t);\n        })\n      };\n      this.sendRequest(n);\n    }, t;\n  }(Bm),\n      Km = function () {\n    function t(t, e, n, r) {\n      this.queue = t, this.connection = e, this.credentials = n, this.serializer = r;\n    }\n\n    return t.prototype.newPersistentWriteStream = function (t) {\n      return new Wm(this.queue, this.connection, this.credentials, this.serializer, t);\n    }, t.prototype.newPersistentWatchStream = function (t) {\n      return new jm(this.queue, this.connection, this.credentials, this.serializer, t);\n    }, t.prototype.commit = function (t) {\n      var e = this,\n          n = {\n        database: this.serializer.encodedDatabaseId,\n        writes: t.map(function (t) {\n          return e.serializer.toMutation(t);\n        })\n      };\n      return this.invokeRPC(\"Commit\", n).then(function (t) {\n        return e.serializer.fromWriteResults(t.writeResults, t.commitTime);\n      });\n    }, t.prototype.lookup = function (e) {\n      var i = this,\n          t = {\n        database: this.serializer.encodedDatabaseId,\n        documents: e.map(function (t) {\n          return i.serializer.toName(t);\n        })\n      };\n      return this.invokeStreamingRPC(\"BatchGetDocuments\", t).then(function (t) {\n        var n = Zp();\n        t.forEach(function (t) {\n          var e = i.serializer.fromMaybeDocument(t);\n          n = n.insert(e.key, e);\n        });\n        var r = [];\n        return e.forEach(function (t) {\n          var e = n.get(t);\n          Uf(!!e, \"Missing entity in write response for \" + t), r.push(e);\n        }), r;\n      });\n    }, t.prototype.invokeRPC = function (e, n) {\n      var r = this;\n      return this.credentials.getToken().then(function (t) {\n        return r.connection.invokeRPC(e, n, t);\n      }).catch(function (t) {\n        throw t.code === Bf.UNAUTHENTICATED && r.credentials.invalidateToken(), t;\n      });\n    }, t.prototype.invokeStreamingRPC = function (e, n) {\n      var r = this;\n      return this.credentials.getToken().then(function (t) {\n        return r.connection.invokeStreamingRPC(e, n, t);\n      }).catch(function (t) {\n        throw t.code === Bf.UNAUTHENTICATED && r.credentials.invalidateToken(), t;\n      });\n    }, t;\n  }(),\n      Qm = function () {\n    function t(t) {\n      this.datastore = t, this.readVersions = id(), this.mutations = [], this.committed = !1, this.writtenDocs = new Set();\n    }\n\n    return t.prototype.lookup = function (r) {\n      return ai(this, void 0, void 0, function () {\n        var e,\n            n = this;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              if (this.ensureCommitNotCalled(), 0 < this.mutations.length) throw new jf(Bf.INVALID_ARGUMENT, \"Firestore transactions require all reads to be executed before all writes.\");\n              return [4, this.datastore.lookup(r)];\n\n            case 1:\n              return (e = t.sent()).forEach(function (t) {\n                t instanceof Fd || t instanceof Ld ? n.recordVersion(t) : Ff(\"Document in a transaction was a \" + t.constructor.name);\n              }), [2, e];\n          }\n        });\n      });\n    }, t.prototype.set = function (t, e) {\n      this.write(e.toMutations(t, this.precondition(t))), this.writtenDocs.add(t);\n    }, t.prototype.update = function (t, e) {\n      try {\n        this.write(e.toMutations(t, this.preconditionForUpdate(t)));\n      } catch (t) {\n        this.lastWriteError = t;\n      }\n\n      this.writtenDocs.add(t);\n    }, t.prototype.delete = function (t) {\n      this.write([new dm(t, this.precondition(t))]), this.writtenDocs.add(t);\n    }, t.prototype.commit = function () {\n      return ai(this, void 0, void 0, function () {\n        var e;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              if (this.ensureCommitNotCalled(), this.lastWriteError) throw this.lastWriteError;\n              if (e = this.readVersions, this.mutations.forEach(function (t) {\n                e = e.remove(t.key);\n              }), !e.isEmpty()) throw new jf(Bf.INVALID_ARGUMENT, \"Every document read in a transaction must also be written.\");\n              return [4, this.datastore.commit(this.mutations)];\n\n            case 1:\n              return t.sent(), this.committed = !0, [2];\n          }\n        });\n      });\n    }, t.prototype.recordVersion = function (t) {\n      var e;\n      if (t instanceof Ld) e = t.version;else {\n        if (!(t instanceof Fd)) throw Ff(\"Document in a transaction was a \" + t.constructor.name);\n        e = Qp.forDeletedDoc();\n      }\n      var n = this.readVersions.get(t.key);\n\n      if (null !== n) {\n        if (!e.isEqual(n)) throw new jf(Bf.ABORTED, \"Document version changed between two reads.\");\n      } else this.readVersions = this.readVersions.insert(t.key, e);\n    }, t.prototype.precondition = function (t) {\n      var e = this.readVersions.get(t);\n      return !this.writtenDocs.has(t) && e ? cm.updateTime(e) : cm.NONE;\n    }, t.prototype.preconditionForUpdate = function (t) {\n      var e = this.readVersions.get(t);\n      if (this.writtenDocs.has(t) || !e) return cm.exists(!0);\n      if (e.isEqual(Qp.forDeletedDoc())) throw new jf(Bf.INVALID_ARGUMENT, \"Can't update a document that doesn't exist.\");\n      return cm.updateTime(e);\n    }, t.prototype.write = function (t) {\n      this.ensureCommitNotCalled(), this.mutations = this.mutations.concat(t);\n    }, t.prototype.ensureCommitNotCalled = function () {\n      Uf(!this.committed, \"A transaction object cannot be used after its update callback has been invoked.\");\n    }, t;\n  }();\n\n  (Um = Fm || (Fm = {}))[Um.Unknown = 0] = \"Unknown\", Um[Um.Online = 1] = \"Online\", Um[Um.Offline = 2] = \"Offline\", (Vm = qm || (qm = {}))[Vm.RemoteStore = 0] = \"RemoteStore\", Vm[Vm.SharedClientState = 1] = \"SharedClientState\";\n\n  var Hm,\n      Gm,\n      zm = function () {\n    function t(t, e) {\n      this.asyncQueue = t, this.onlineStateHandler = e, this.state = Fm.Unknown, this.watchStreamFailures = 0, this.onlineStateTimer = null, this.shouldWarnClientIsOffline = !0;\n    }\n\n    return t.prototype.handleWatchStreamStart = function () {\n      var t = this;\n      0 === this.watchStreamFailures && (this.setAndBroadcast(Fm.Unknown), Uf(null === this.onlineStateTimer, \"onlineStateTimer shouldn't be started yet\"), this.onlineStateTimer = this.asyncQueue.enqueueAfterDelay(bp.OnlineStateTimeout, 1e4, function () {\n        return t.onlineStateTimer = null, Uf(t.state === Fm.Unknown, \"Timer should be canceled if we transitioned to a different state.\"), t.logClientOfflineWarningIfNecessary(\"Backend didn't respond within 10 seconds.\"), t.setAndBroadcast(Fm.Offline), Promise.resolve();\n      }));\n    }, t.prototype.handleWatchStreamFailure = function (t) {\n      this.state === Fm.Online ? (this.setAndBroadcast(Fm.Unknown), Uf(0 === this.watchStreamFailures, \"watchStreamFailures must be 0\"), Uf(null === this.onlineStateTimer, \"onlineStateTimer must be null\")) : (this.watchStreamFailures++, 1 <= this.watchStreamFailures && (this.clearOnlineStateTimer(), this.logClientOfflineWarningIfNecessary(\"Connection failed 1 times. Most recent error: \" + t.toString()), this.setAndBroadcast(Fm.Offline)));\n    }, t.prototype.set = function (t) {\n      this.clearOnlineStateTimer(), this.watchStreamFailures = 0, t === Fm.Online && (this.shouldWarnClientIsOffline = !1), this.setAndBroadcast(t);\n    }, t.prototype.setAndBroadcast = function (t) {\n      t !== this.state && (this.state = t, this.onlineStateHandler(t));\n    }, t.prototype.logClientOfflineWarningIfNecessary = function (t) {\n      var e = \"Could not reach Cloud Firestore backend. \" + t + \"\\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.\";\n      this.shouldWarnClientIsOffline ? (Mf(e), this.shouldWarnClientIsOffline = !1) : xf(\"OnlineStateTracker\", e);\n    }, t.prototype.clearOnlineStateTimer = function () {\n      null !== this.onlineStateTimer && (this.onlineStateTimer.cancel(), this.onlineStateTimer = null);\n    }, t;\n  }();\n\n  function Ym(t) {\n    switch (t) {\n      case Bf.OK:\n        return Ff(\"Treated status OK as error\");\n\n      case Bf.CANCELLED:\n      case Bf.UNKNOWN:\n      case Bf.DEADLINE_EXCEEDED:\n      case Bf.RESOURCE_EXHAUSTED:\n      case Bf.INTERNAL:\n      case Bf.UNAVAILABLE:\n      case Bf.UNAUTHENTICATED:\n        return !1;\n\n      case Bf.INVALID_ARGUMENT:\n      case Bf.NOT_FOUND:\n      case Bf.ALREADY_EXISTS:\n      case Bf.PERMISSION_DENIED:\n      case Bf.FAILED_PRECONDITION:\n      case Bf.ABORTED:\n      case Bf.OUT_OF_RANGE:\n      case Bf.UNIMPLEMENTED:\n      case Bf.DATA_LOSS:\n        return !0;\n\n      default:\n        return Ff(\"Unknown status code: \" + t);\n    }\n  }\n\n  function Xm(t) {\n    if (void 0 === t) return Mf(\"GRPC error has no .code\"), Bf.UNKNOWN;\n\n    switch (t) {\n      case Hm.OK:\n        return Bf.OK;\n\n      case Hm.CANCELLED:\n        return Bf.CANCELLED;\n\n      case Hm.UNKNOWN:\n        return Bf.UNKNOWN;\n\n      case Hm.DEADLINE_EXCEEDED:\n        return Bf.DEADLINE_EXCEEDED;\n\n      case Hm.RESOURCE_EXHAUSTED:\n        return Bf.RESOURCE_EXHAUSTED;\n\n      case Hm.INTERNAL:\n        return Bf.INTERNAL;\n\n      case Hm.UNAVAILABLE:\n        return Bf.UNAVAILABLE;\n\n      case Hm.UNAUTHENTICATED:\n        return Bf.UNAUTHENTICATED;\n\n      case Hm.INVALID_ARGUMENT:\n        return Bf.INVALID_ARGUMENT;\n\n      case Hm.NOT_FOUND:\n        return Bf.NOT_FOUND;\n\n      case Hm.ALREADY_EXISTS:\n        return Bf.ALREADY_EXISTS;\n\n      case Hm.PERMISSION_DENIED:\n        return Bf.PERMISSION_DENIED;\n\n      case Hm.FAILED_PRECONDITION:\n        return Bf.FAILED_PRECONDITION;\n\n      case Hm.ABORTED:\n        return Bf.ABORTED;\n\n      case Hm.OUT_OF_RANGE:\n        return Bf.OUT_OF_RANGE;\n\n      case Hm.UNIMPLEMENTED:\n        return Bf.UNIMPLEMENTED;\n\n      case Hm.DATA_LOSS:\n        return Bf.DATA_LOSS;\n\n      default:\n        return Ff(\"Unknown status code: \" + t);\n    }\n  }\n\n  (Gm = Hm || (Hm = {}))[Gm.OK = 0] = \"OK\", Gm[Gm.CANCELLED = 1] = \"CANCELLED\", Gm[Gm.UNKNOWN = 2] = \"UNKNOWN\", Gm[Gm.INVALID_ARGUMENT = 3] = \"INVALID_ARGUMENT\", Gm[Gm.DEADLINE_EXCEEDED = 4] = \"DEADLINE_EXCEEDED\", Gm[Gm.NOT_FOUND = 5] = \"NOT_FOUND\", Gm[Gm.ALREADY_EXISTS = 6] = \"ALREADY_EXISTS\", Gm[Gm.PERMISSION_DENIED = 7] = \"PERMISSION_DENIED\", Gm[Gm.UNAUTHENTICATED = 16] = \"UNAUTHENTICATED\", Gm[Gm.RESOURCE_EXHAUSTED = 8] = \"RESOURCE_EXHAUSTED\", Gm[Gm.FAILED_PRECONDITION = 9] = \"FAILED_PRECONDITION\", Gm[Gm.ABORTED = 10] = \"ABORTED\", Gm[Gm.OUT_OF_RANGE = 11] = \"OUT_OF_RANGE\", Gm[Gm.UNIMPLEMENTED = 12] = \"UNIMPLEMENTED\", Gm[Gm.INTERNAL = 13] = \"INTERNAL\", Gm[Gm.UNAVAILABLE = 14] = \"UNAVAILABLE\", Gm[Gm.DATA_LOSS = 15] = \"DATA_LOSS\";\n\n  var Jm,\n      $m,\n      Zm,\n      tg,\n      eg = function () {\n    function o(n) {\n      this.comparator = n ? function (t, e) {\n        return n(t, e) || Op.comparator(t.key, e.key);\n      } : function (t, e) {\n        return Op.comparator(t.key, e.key);\n      }, this.keyedMap = nd(), this.sortedSet = new Hp(this.comparator);\n    }\n\n    return o.emptySet = function (t) {\n      return new o(t.comparator);\n    }, o.prototype.has = function (t) {\n      return null != this.keyedMap.get(t);\n    }, o.prototype.get = function (t) {\n      return this.keyedMap.get(t);\n    }, o.prototype.first = function () {\n      return this.sortedSet.minKey();\n    }, o.prototype.last = function () {\n      return this.sortedSet.maxKey();\n    }, o.prototype.isEmpty = function () {\n      return this.sortedSet.isEmpty();\n    }, o.prototype.indexOf = function (t) {\n      var e = this.keyedMap.get(t);\n      return e ? this.sortedSet.indexOf(e) : -1;\n    }, Object.defineProperty(o.prototype, \"size\", {\n      get: function get() {\n        return this.sortedSet.size;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), o.prototype.forEach = function (n) {\n      this.sortedSet.inorderTraversal(function (t, e) {\n        return n(t), !1;\n      });\n    }, o.prototype.add = function (t) {\n      var e = this.delete(t.key);\n      return e.copy(e.keyedMap.insert(t.key, t), e.sortedSet.insert(t, null));\n    }, o.prototype.delete = function (t) {\n      var e = this.get(t);\n      return e ? this.copy(this.keyedMap.remove(t), this.sortedSet.remove(e)) : this;\n    }, o.prototype.isEqual = function (t) {\n      if (!(t instanceof o)) return !1;\n      if (this.size !== t.size) return !1;\n\n      for (var e = this.sortedSet.getIterator(), n = t.sortedSet.getIterator(); e.hasNext();) {\n        var r = e.getNext().key,\n            i = n.getNext().key;\n        if (!r.isEqual(i)) return !1;\n      }\n\n      return !0;\n    }, o.prototype.toString = function () {\n      var e = [];\n      return this.forEach(function (t) {\n        e.push(t.toString());\n      }), 0 === e.length ? \"DocumentSet ()\" : \"DocumentSet (\\n  \" + e.join(\"  \\n\") + \"\\n)\";\n    }, o.prototype.copy = function (t, e) {\n      var n = new o();\n      return n.comparator = this.comparator, n.keyedMap = t, n.sortedSet = e, n;\n    }, o;\n  }();\n\n  ($m = Jm || (Jm = {}))[$m.Added = 0] = \"Added\", $m[$m.Removed = 1] = \"Removed\", $m[$m.Modified = 2] = \"Modified\", $m[$m.Metadata = 3] = \"Metadata\", (tg = Zm || (Zm = {}))[tg.Local = 0] = \"Local\", tg[tg.Synced = 1] = \"Synced\";\n\n  var ng,\n      rg,\n      ig = function () {\n    function t() {\n      this.changeMap = new Hp(Op.comparator);\n    }\n\n    return t.prototype.track = function (t) {\n      var e = t.doc.key,\n          n = this.changeMap.get(e);\n      n ? t.type !== Jm.Added && n.type === Jm.Metadata ? this.changeMap = this.changeMap.insert(e, t) : t.type === Jm.Metadata && n.type !== Jm.Removed ? this.changeMap = this.changeMap.insert(e, {\n        type: n.type,\n        doc: t.doc\n      }) : t.type === Jm.Modified && n.type === Jm.Modified ? this.changeMap = this.changeMap.insert(e, {\n        type: Jm.Modified,\n        doc: t.doc\n      }) : t.type === Jm.Modified && n.type === Jm.Added ? this.changeMap = this.changeMap.insert(e, {\n        type: Jm.Added,\n        doc: t.doc\n      }) : t.type === Jm.Removed && n.type === Jm.Added ? this.changeMap = this.changeMap.remove(e) : t.type === Jm.Removed && n.type === Jm.Modified ? this.changeMap = this.changeMap.insert(e, {\n        type: Jm.Removed,\n        doc: n.doc\n      }) : t.type === Jm.Added && n.type === Jm.Removed ? this.changeMap = this.changeMap.insert(e, {\n        type: Jm.Modified,\n        doc: t.doc\n      }) : Ff(\"unsupported combination of changes: \" + JSON.stringify(t) + \" after \" + JSON.stringify(n)) : this.changeMap = this.changeMap.insert(e, t);\n    }, t.prototype.getChanges = function () {\n      var n = [];\n      return this.changeMap.inorderTraversal(function (t, e) {\n        n.push(e);\n      }), n;\n    }, t;\n  }(),\n      og = function () {\n    function o(t, e, n, r, i, o, a, s) {\n      this.query = t, this.docs = e, this.oldDocs = n, this.docChanges = r, this.mutatedKeys = i, this.fromCache = o, this.syncStateChanged = a, this.excludesMetadataChanges = s;\n    }\n\n    return o.fromInitialDocuments = function (t, e, n, r) {\n      var i = [];\n      return e.forEach(function (t) {\n        i.push({\n          type: Jm.Added,\n          doc: t\n        });\n      }), new o(t, e, eg.emptySet(e), i, n, r, !0, !1);\n    }, Object.defineProperty(o.prototype, \"hasPendingWrites\", {\n      get: function get() {\n        return !this.mutatedKeys.isEmpty();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), o.prototype.isEqual = function (t) {\n      if (!(this.fromCache === t.fromCache && this.syncStateChanged === t.syncStateChanged && this.mutatedKeys.isEqual(t.mutatedKeys) && this.query.isEqual(t.query) && this.docs.isEqual(t.docs) && this.oldDocs.isEqual(t.oldDocs))) return !1;\n      var e = this.docChanges,\n          n = t.docChanges;\n      if (e.length !== n.length) return !1;\n\n      for (var r = 0; r < e.length; r++) {\n        if (e[r].type !== n[r].type || !e[r].doc.isEqual(n[r].doc)) return !1;\n      }\n\n      return !0;\n    }, o;\n  }(),\n      ag = function () {\n    function i(t, e, n, r, i) {\n      this.snapshotVersion = t, this.targetChanges = e, this.targetMismatches = n, this.documentUpdates = r, this.resolvedLimboDocuments = i;\n    }\n\n    return i.createSynthesizedRemoteEventForCurrentChange = function (t, e) {\n      var n,\n          r = ((n = {})[t] = sg.createSynthesizedTargetChangeForCurrentChange(t, e), n);\n      return new i(Qp.MIN, r, ud(), Zp(), ad());\n    }, i;\n  }(),\n      sg = function () {\n    function n(t, e, n, r, i) {\n      this.resumeToken = t, this.current = e, this.addedDocuments = n, this.modifiedDocuments = r, this.removedDocuments = i;\n    }\n\n    return n.createSynthesizedTargetChangeForCurrentChange = function (t, e) {\n      return new n(Vf(), e, ad(), ad(), ad());\n    }, n;\n  }(),\n      ug = function ug(t, e, n, r) {\n    this.updatedTargetIds = t, this.removedTargetIds = e, this.key = n, this.newDoc = r;\n  },\n      cg = function cg(t, e) {\n    this.targetId = t, this.existenceFilter = e;\n  };\n\n  (rg = ng || (ng = {}))[rg.NoChange = 0] = \"NoChange\", rg[rg.Added = 1] = \"Added\", rg[rg.Removed = 2] = \"Removed\", rg[rg.Current = 3] = \"Current\", rg[rg.Reset = 4] = \"Reset\";\n\n  var hg = function hg(t, e, n, r) {\n    void 0 === n && (n = Vf()), void 0 === r && (r = null), this.state = t, this.targetIds = e, this.resumeToken = n, this.cause = r;\n  },\n      lg = function () {\n    function t() {\n      this.pendingResponses = 0, this.documentChanges = dg(), this._resumeToken = Vf(), this._current = !1, this._hasPendingChanges = !0;\n    }\n\n    return Object.defineProperty(t.prototype, \"current\", {\n      get: function get() {\n        return this._current;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"resumeToken\", {\n      get: function get() {\n        return this._resumeToken;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"isPending\", {\n      get: function get() {\n        return 0 !== this.pendingResponses;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"hasPendingChanges\", {\n      get: function get() {\n        return this._hasPendingChanges;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.updateResumeToken = function (t) {\n      0 < t.length && (this._hasPendingChanges = !0, this._resumeToken = t);\n    }, t.prototype.toTargetChange = function () {\n      var n = ad(),\n          r = ad(),\n          i = ad();\n      return this.documentChanges.forEach(function (t, e) {\n        switch (e) {\n          case Jm.Added:\n            n = n.add(t);\n            break;\n\n          case Jm.Modified:\n            r = r.add(t);\n            break;\n\n          case Jm.Removed:\n            i = i.add(t);\n            break;\n\n          default:\n            Ff(\"Encountered invalid change type: \" + e);\n        }\n      }), new sg(this._resumeToken, this._current, n, r, i);\n    }, t.prototype.clearPendingChanges = function () {\n      this._hasPendingChanges = !1, this.documentChanges = dg();\n    }, t.prototype.addDocumentChange = function (t, e) {\n      this._hasPendingChanges = !0, this.documentChanges = this.documentChanges.insert(t, e);\n    }, t.prototype.removeDocumentChange = function (t) {\n      this._hasPendingChanges = !0, this.documentChanges = this.documentChanges.remove(t);\n    }, t.prototype.recordPendingTargetRequest = function () {\n      this.pendingResponses += 1;\n    }, t.prototype.recordTargetResponse = function () {\n      this.pendingResponses -= 1;\n    }, t.prototype.markCurrent = function () {\n      this._hasPendingChanges = !0, this._current = !0;\n    }, t;\n  }(),\n      fg = function () {\n    function t(t) {\n      this.metadataProvider = t, this.targetStates = {}, this.pendingDocumentUpdates = Zp(), this.pendingDocumentTargetMapping = pg(), this.pendingTargetResets = new Xp(dp);\n    }\n\n    return t.prototype.handleDocumentChange = function (t) {\n      for (var e = 0, n = t.updatedTargetIds; e < n.length; e++) {\n        var r = n[e];\n        t.newDoc instanceof Ld ? this.addDocumentToTarget(r, t.newDoc) : t.newDoc instanceof Fd && this.removeDocumentFromTarget(r, t.key, t.newDoc);\n      }\n\n      for (var i = 0, o = t.removedTargetIds; i < o.length; i++) {\n        r = o[i];\n        this.removeDocumentFromTarget(r, t.key, t.newDoc);\n      }\n    }, t.prototype.handleTargetChange = function (n) {\n      var r = this;\n      this.forEachTarget(n, function (t) {\n        var e = r.ensureTargetState(t);\n\n        switch (n.state) {\n          case ng.NoChange:\n            r.isActiveTarget(t) && e.updateResumeToken(n.resumeToken);\n            break;\n\n          case ng.Added:\n            e.recordTargetResponse(), e.isPending || e.clearPendingChanges(), e.updateResumeToken(n.resumeToken);\n            break;\n\n          case ng.Removed:\n            e.recordTargetResponse(), e.isPending || r.removeTarget(t), Uf(!n.cause, \"WatchChangeAggregator does not handle errored targets\");\n            break;\n\n          case ng.Current:\n            r.isActiveTarget(t) && (e.markCurrent(), e.updateResumeToken(n.resumeToken));\n            break;\n\n          case ng.Reset:\n            r.isActiveTarget(t) && (r.resetTarget(t), e.updateResumeToken(n.resumeToken));\n            break;\n\n          default:\n            Ff(\"Unknown target watch change state: \" + n.state);\n        }\n      });\n    }, t.prototype.forEachTarget = function (t, e) {\n      0 < t.targetIds.length ? t.targetIds.forEach(e) : Hf(this.targetStates, e);\n    }, t.prototype.handleExistenceFilter = function (t) {\n      var e = t.targetId,\n          n = t.existenceFilter.count,\n          r = this.queryDataForActiveTarget(e);\n\n      if (r) {\n        var i = r.query;\n        if (i.isDocumentQuery()) {\n          if (0 === n) {\n            var o = new Op(i.path);\n            this.removeDocumentFromTarget(e, o, new Fd(o, Qp.forDeletedDoc()));\n          } else Uf(1 === n, \"Single document existence filter with count: \" + n);\n        } else this.getCurrentDocumentCountForTarget(e) !== n && (this.resetTarget(e), this.pendingTargetResets = this.pendingTargetResets.add(e));\n      }\n    }, t.prototype.createRemoteEvent = function (i) {\n      var o = this,\n          a = {};\n      Hf(this.targetStates, function (t, e) {\n        var n = o.queryDataForActiveTarget(t);\n\n        if (n) {\n          if (e.current && n.query.isDocumentQuery()) {\n            var r = new Op(n.query.path);\n            null !== o.pendingDocumentUpdates.get(r) || o.targetContainsDocument(t, r) || o.removeDocumentFromTarget(t, r, new Fd(r, i));\n          }\n\n          e.hasPendingChanges && (a[t] = e.toTargetChange(), e.clearPendingChanges());\n        }\n      });\n      var r = ad();\n      this.pendingDocumentTargetMapping.forEach(function (t, e) {\n        var n = !0;\n        e.forEachWhile(function (t) {\n          var e = o.queryDataForActiveTarget(t);\n          return !e || e.purpose === yy.LimboResolution || (n = !1);\n        }), n && (r = r.add(t));\n      });\n      var t = new ag(i, a, this.pendingTargetResets, this.pendingDocumentUpdates, r);\n      return this.pendingDocumentUpdates = Zp(), this.pendingDocumentTargetMapping = pg(), this.pendingTargetResets = new Xp(dp), t;\n    }, t.prototype.addDocumentToTarget = function (t, e) {\n      if (this.isActiveTarget(t)) {\n        var n = this.targetContainsDocument(t, e.key) ? Jm.Modified : Jm.Added;\n        this.ensureTargetState(t).addDocumentChange(e.key, n), this.pendingDocumentUpdates = this.pendingDocumentUpdates.insert(e.key, e), this.pendingDocumentTargetMapping = this.pendingDocumentTargetMapping.insert(e.key, this.ensureDocumentTargetMapping(e.key).add(t));\n      }\n    }, t.prototype.removeDocumentFromTarget = function (t, e, n) {\n      if (this.isActiveTarget(t)) {\n        var r = this.ensureTargetState(t);\n        this.targetContainsDocument(t, e) ? r.addDocumentChange(e, Jm.Removed) : r.removeDocumentChange(e), this.pendingDocumentTargetMapping = this.pendingDocumentTargetMapping.insert(e, this.ensureDocumentTargetMapping(e).delete(t)), n && (this.pendingDocumentUpdates = this.pendingDocumentUpdates.insert(e, n));\n      }\n    }, t.prototype.removeTarget = function (t) {\n      delete this.targetStates[t];\n    }, t.prototype.getCurrentDocumentCountForTarget = function (t) {\n      var e = this.ensureTargetState(t).toTargetChange();\n      return this.metadataProvider.getRemoteKeysForTarget(t).size + e.addedDocuments.size - e.removedDocuments.size;\n    }, t.prototype.recordPendingTargetRequest = function (t) {\n      this.ensureTargetState(t).recordPendingTargetRequest();\n    }, t.prototype.ensureTargetState = function (t) {\n      return this.targetStates[t] || (this.targetStates[t] = new lg()), this.targetStates[t];\n    }, t.prototype.ensureDocumentTargetMapping = function (t) {\n      var e = this.pendingDocumentTargetMapping.get(t);\n      return e || (e = new Xp(dp), this.pendingDocumentTargetMapping = this.pendingDocumentTargetMapping.insert(t, e)), e;\n    }, t.prototype.isActiveTarget = function (t) {\n      return null !== this.queryDataForActiveTarget(t);\n    }, t.prototype.queryDataForActiveTarget = function (t) {\n      var e = this.targetStates[t];\n      return e && e.isPending ? null : this.metadataProvider.getQueryDataForTarget(t);\n    }, t.prototype.resetTarget = function (e) {\n      var n = this;\n      Uf(!this.targetStates[e].isPending, \"Should only reset active targets\"), this.targetStates[e] = new lg(), this.metadataProvider.getRemoteKeysForTarget(e).forEach(function (t) {\n        n.removeDocumentFromTarget(e, t, null);\n      });\n    }, t.prototype.targetContainsDocument = function (t, e) {\n      return this.metadataProvider.getRemoteKeysForTarget(t).has(e);\n    }, t;\n  }();\n\n  function pg() {\n    return new Hp(Op.comparator);\n  }\n\n  function dg() {\n    return new Hp(Op.comparator);\n  }\n\n  var yg = \"RemoteStore\",\n      mg = function () {\n    function t(t, e, n, r, i) {\n      var o = this;\n      this.localStore = t, this.datastore = e, this.writePipeline = [], this.listenTargets = {}, this.watchChangeAggregator = null, this.networkEnabled = !1, this.isPrimary = !1, this.connectivityMonitor = i, this.connectivityMonitor.addCallback(function (t) {\n        n.enqueueAndForget(function () {\n          return ai(o, void 0, void 0, function () {\n            return si(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return this.canUseNetwork() ? (xf(yg, \"Restarting streams for network reachability change.\"), [4, this.restartNetwork()]) : [3, 2];\n\n                case 1:\n                  t.sent(), t.label = 2;\n\n                case 2:\n                  return [2];\n              }\n            });\n          });\n        });\n      }), this.onlineStateTracker = new zm(n, r), this.watchStream = this.datastore.newPersistentWatchStream({\n        onOpen: this.onWatchStreamOpen.bind(this),\n        onClose: this.onWatchStreamClose.bind(this),\n        onWatchChange: this.onWatchStreamChange.bind(this)\n      }), this.writeStream = this.datastore.newPersistentWriteStream({\n        onOpen: this.onWriteStreamOpen.bind(this),\n        onClose: this.onWriteStreamClose.bind(this),\n        onHandshakeComplete: this.onWriteHandshakeComplete.bind(this),\n        onMutationResult: this.onMutationResult.bind(this)\n      });\n    }\n\n    return t.prototype.start = function () {\n      return this.enableNetwork();\n    }, t.prototype.enableNetwork = function () {\n      return ai(this, void 0, void 0, function () {\n        var e;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.networkEnabled = !0, this.canUseNetwork() ? (e = this.writeStream, [4, this.localStore.getLastStreamToken()]) : [3, 3];\n\n            case 1:\n              return e.lastStreamToken = t.sent(), this.shouldStartWatchStream() ? this.startWatchStream() : this.onlineStateTracker.set(Fm.Unknown), [4, this.fillWritePipeline()];\n\n            case 2:\n              t.sent(), t.label = 3;\n\n            case 3:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.disableNetwork = function () {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.networkEnabled = !1, [4, this.disableNetworkInternal()];\n\n            case 1:\n              return t.sent(), this.onlineStateTracker.set(Fm.Offline), [2];\n          }\n        });\n      });\n    }, t.prototype.disableNetworkInternal = function () {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, this.writeStream.stop()];\n\n            case 1:\n              return t.sent(), [4, this.watchStream.stop()];\n\n            case 2:\n              return t.sent(), 0 < this.writePipeline.length && (xf(yg, \"Stopping write stream with \" + this.writePipeline.length + \" pending writes\"), this.writePipeline = []), this.cleanUpWatchStreamState(), [2];\n          }\n        });\n      });\n    }, t.prototype.shutdown = function () {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return xf(yg, \"RemoteStore shutting down.\"), this.networkEnabled = !1, [4, this.disableNetworkInternal()];\n\n            case 1:\n              return t.sent(), this.connectivityMonitor.shutdown(), this.onlineStateTracker.set(Fm.Unknown), [2];\n          }\n        });\n      });\n    }, t.prototype.listen = function (t) {\n      Uf(!Kf(this.listenTargets, t.targetId), \"listen called with duplicate targetId!\"), this.listenTargets[t.targetId] = t, this.shouldStartWatchStream() ? this.startWatchStream() : this.watchStream.isOpen() && this.sendWatchRequest(t);\n    }, t.prototype.unlisten = function (t) {\n      Uf(Kf(this.listenTargets, t), \"unlisten called without assigned target ID!\"), delete this.listenTargets[t], this.watchStream.isOpen() && this.sendUnwatchRequest(t), zf(this.listenTargets) && (this.watchStream.isOpen() ? this.watchStream.markIdle() : this.canUseNetwork() && this.onlineStateTracker.set(Fm.Unknown));\n    }, t.prototype.getQueryDataForTarget = function (t) {\n      return this.listenTargets[t] || null;\n    }, t.prototype.getRemoteKeysForTarget = function (t) {\n      return this.syncEngine.getRemoteKeysForTarget(t);\n    }, t.prototype.sendWatchRequest = function (t) {\n      this.watchChangeAggregator.recordPendingTargetRequest(t.targetId), this.watchStream.watch(t);\n    }, t.prototype.sendUnwatchRequest = function (t) {\n      this.watchChangeAggregator.recordPendingTargetRequest(t), this.watchStream.unwatch(t);\n    }, t.prototype.startWatchStream = function () {\n      Uf(this.shouldStartWatchStream(), \"startWatchStream() called when shouldStartWatchStream() is false.\"), this.watchChangeAggregator = new fg(this), this.watchStream.start(), this.onlineStateTracker.handleWatchStreamStart();\n    }, t.prototype.shouldStartWatchStream = function () {\n      return this.canUseNetwork() && !this.watchStream.isStarted() && !zf(this.listenTargets);\n    }, t.prototype.canUseNetwork = function () {\n      return this.isPrimary && this.networkEnabled;\n    }, t.prototype.cleanUpWatchStreamState = function () {\n      this.watchChangeAggregator = null;\n    }, t.prototype.onWatchStreamOpen = function () {\n      return ai(this, void 0, void 0, function () {\n        var n = this;\n        return si(this, function (t) {\n          return Hf(this.listenTargets, function (t, e) {\n            n.sendWatchRequest(e);\n          }), [2];\n        });\n      });\n    }, t.prototype.onWatchStreamClose = function (e) {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          return void 0 === e && Uf(!this.shouldStartWatchStream(), \"Watch stream was stopped gracefully while still needed.\"), this.cleanUpWatchStreamState(), this.shouldStartWatchStream() ? (this.onlineStateTracker.handleWatchStreamFailure(e), this.startWatchStream()) : this.onlineStateTracker.set(Fm.Unknown), [2];\n        });\n      });\n    }, t.prototype.onWatchStreamChange = function (n, r) {\n      return ai(this, void 0, void 0, function () {\n        var e;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.onlineStateTracker.set(Fm.Online), n instanceof hg && n.state === ng.Removed && n.cause ? [2, this.handleTargetError(n)] : (n instanceof ug ? this.watchChangeAggregator.handleDocumentChange(n) : n instanceof cg ? this.watchChangeAggregator.handleExistenceFilter(n) : (Uf(n instanceof hg, \"Expected watchChange to be an instance of WatchTargetChange\"), this.watchChangeAggregator.handleTargetChange(n)), r.isEqual(Qp.MIN) ? [3, 3] : [4, this.localStore.getLastRemoteSnapshotVersion()]);\n\n            case 1:\n              return e = t.sent(), 0 <= r.compareTo(e) ? [4, this.raiseWatchSnapshot(r)] : [3, 3];\n\n            case 2:\n              t.sent(), t.label = 3;\n\n            case 3:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.raiseWatchSnapshot = function (r) {\n      var i = this;\n      Uf(!r.isEqual(Qp.MIN), \"Can't raise event for unknown SnapshotVersion\");\n      var t = this.watchChangeAggregator.createRemoteEvent(r);\n      return Hf(t.targetChanges, function (t, e) {\n        if (0 < e.resumeToken.length) {\n          var n = i.listenTargets[t];\n          n && (i.listenTargets[t] = n.copy({\n            resumeToken: e.resumeToken,\n            snapshotVersion: r\n          }));\n        }\n      }), t.targetMismatches.forEach(function (t) {\n        var e = i.listenTargets[t];\n\n        if (e) {\n          i.listenTargets[t] = e.copy({\n            resumeToken: Vf()\n          }), i.sendUnwatchRequest(t);\n          var n = new wy(e.query, t, yy.ExistenceFilterMismatch, e.sequenceNumber);\n          i.sendWatchRequest(n);\n        }\n      }), this.syncEngine.applyRemoteEvent(t);\n    }, t.prototype.handleTargetError = function (t) {\n      var n = this;\n      Uf(!!t.cause, \"Handling target error without a cause\");\n      var r = t.cause,\n          i = Promise.resolve();\n      return t.targetIds.forEach(function (e) {\n        i = i.then(function () {\n          return ai(n, void 0, void 0, function () {\n            return si(this, function (t) {\n              return Kf(this.listenTargets, e) ? (delete this.listenTargets[e], this.watchChangeAggregator.removeTarget(e), [2, this.syncEngine.rejectListen(e, r)]) : [2];\n            });\n          });\n        });\n      }), i;\n    }, t.prototype.fillWritePipeline = function () {\n      return ai(this, void 0, void 0, function () {\n        var e, n;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.canAddToWritePipeline() ? (e = 0 < this.writePipeline.length ? this.writePipeline[this.writePipeline.length - 1].batchId : -1, [4, this.localStore.nextMutationBatch(e)]) : [3, 4];\n\n            case 1:\n              return null !== (n = t.sent()) ? [3, 2] : (0 === this.writePipeline.length && this.writeStream.markIdle(), [3, 4]);\n\n            case 2:\n              return this.addToWritePipeline(n), [4, this.fillWritePipeline()];\n\n            case 3:\n              t.sent(), t.label = 4;\n\n            case 4:\n              return this.shouldStartWriteStream() && this.startWriteStream(), [2];\n          }\n        });\n      });\n    }, t.prototype.canAddToWritePipeline = function () {\n      return this.canUseNetwork() && this.writePipeline.length < 10;\n    }, t.prototype.outstandingWrites = function () {\n      return this.writePipeline.length;\n    }, t.prototype.addToWritePipeline = function (t) {\n      Uf(this.canAddToWritePipeline(), \"addToWritePipeline called when pipeline is full\"), this.writePipeline.push(t), this.writeStream.isOpen() && this.writeStream.handshakeComplete && this.writeStream.writeMutations(t.mutations);\n    }, t.prototype.shouldStartWriteStream = function () {\n      return this.canUseNetwork() && !this.writeStream.isStarted() && 0 < this.writePipeline.length;\n    }, t.prototype.startWriteStream = function () {\n      Uf(this.shouldStartWriteStream(), \"startWriteStream() called when shouldStartWriteStream() is false.\"), this.writeStream.start();\n    }, t.prototype.onWriteStreamOpen = function () {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          return this.writeStream.writeHandshake(), [2];\n        });\n      });\n    }, t.prototype.onWriteHandshakeComplete = function () {\n      var r = this;\n      return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function () {\n        for (var t = 0, e = r.writePipeline; t < e.length; t++) {\n          var n = e[t];\n          r.writeStream.writeMutations(n.mutations);\n        }\n      }).catch(Py);\n    }, t.prototype.onMutationResult = function (t, e) {\n      var n = this;\n      Uf(0 < this.writePipeline.length, \"Got result for empty write pipeline\");\n      var r = this.writePipeline.shift(),\n          i = hd.from(r, t, e, this.writeStream.lastStreamToken);\n      return this.syncEngine.applySuccessfulWrite(i).then(function () {\n        return n.fillWritePipeline();\n      });\n    }, t.prototype.onWriteStreamClose = function (n) {\n      return ai(this, void 0, void 0, function () {\n        var e = this;\n        return si(this, function (t) {\n          return void 0 === n && Uf(!this.shouldStartWriteStream(), \"Write stream was stopped gracefully while still needed.\"), n && 0 < this.writePipeline.length ? (void 0, [2, (this.writeStream.handshakeComplete ? this.handleWriteError(n) : this.handleHandshakeError(n)).then(function () {\n            e.shouldStartWriteStream() && e.startWriteStream();\n          })]) : [2];\n        });\n      });\n    }, t.prototype.handleHandshakeError = function (e) {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          return Ym(e.code) ? (xf(yg, \"RemoteStore error before completed handshake; resetting stream token: \", this.writeStream.lastStreamToken), this.writeStream.lastStreamToken = Vf(), [2, this.localStore.setLastStreamToken(Vf()).catch(Py)]) : [2];\n        });\n      });\n    }, t.prototype.handleWriteError = function (i) {\n      return ai(this, void 0, void 0, function () {\n        var n,\n            r = this;\n        return si(this, function (t) {\n          return Ym(e = i.code) && e !== Bf.ABORTED ? (n = this.writePipeline.shift(), this.writeStream.inhibitBackoff(), [2, this.syncEngine.rejectFailedWrite(n.batchId, i).then(function () {\n            return r.fillWritePipeline();\n          })]) : [2];\n          var e;\n        });\n      });\n    }, t.prototype.createTransaction = function () {\n      return new Qm(this.datastore);\n    }, t.prototype.restartNetwork = function () {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.networkEnabled = !1, [4, this.disableNetworkInternal()];\n\n            case 1:\n              return t.sent(), this.onlineStateTracker.set(Fm.Unknown), [4, this.enableNetwork()];\n\n            case 2:\n              return t.sent(), [2];\n          }\n        });\n      });\n    }, t.prototype.handleCredentialChange = function () {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.canUseNetwork() ? (xf(yg, \"RemoteStore restarting streams for new credential\"), [4, this.restartNetwork()]) : [3, 2];\n\n            case 1:\n              t.sent(), t.label = 2;\n\n            case 2:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.applyPrimaryState = function (e) {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return (this.isPrimary = e) && this.networkEnabled ? [4, this.enableNetwork()] : [3, 2];\n\n            case 1:\n              return t.sent(), [3, 4];\n\n            case 2:\n              return e ? [3, 4] : [4, this.disableNetworkInternal()];\n\n            case 3:\n              t.sent(), this.onlineStateTracker.set(Fm.Unknown), t.label = 4;\n\n            case 4:\n              return [2];\n          }\n        });\n      });\n    }, t;\n  }(),\n      gg = function () {\n    function t(t, e) {\n      if (Xf(\"GeoPoint\", arguments, 2), Zf(\"GeoPoint\", \"number\", 1, t), Zf(\"GeoPoint\", \"number\", 2, e), !isFinite(t) || t < -90 || 90 < t) throw new jf(Bf.INVALID_ARGUMENT, \"Latitude must be a number between -90 and 90, but was: \" + t);\n      if (!isFinite(e) || e < -180 || 180 < e) throw new jf(Bf.INVALID_ARGUMENT, \"Longitude must be a number between -180 and 180, but was: \" + e);\n      this._lat = t, this._long = e;\n    }\n\n    return Object.defineProperty(t.prototype, \"latitude\", {\n      get: function get() {\n        return this._lat;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"longitude\", {\n      get: function get() {\n        return this._long;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.isEqual = function (t) {\n      return this._lat === t._lat && this._long === t._long;\n    }, t.prototype._compareTo = function (t) {\n      return dp(this._lat, t._lat) || dp(this._long, t._long);\n    }, t;\n  }(),\n      vg = function () {\n    function n(t, e, n, r, i, o, a) {\n      void 0 === e && (e = null), void 0 === n && (n = []), void 0 === r && (r = []), void 0 === i && (i = null), void 0 === o && (o = null), void 0 === a && (a = null), this.path = t, this.collectionGroup = e, this.explicitOrderBy = n, this.filters = r, this.limit = i, this.startAt = o, this.endAt = a, this.memoizedCanonicalId = null, this.memoizedOrderBy = null, this.startAt && this.assertValidBound(this.startAt), this.endAt && this.assertValidBound(this.endAt);\n    }\n\n    return n.atPath = function (t) {\n      return new n(t);\n    }, Object.defineProperty(n.prototype, \"orderBy\", {\n      get: function get() {\n        if (null === this.memoizedOrderBy) {\n          var t = this.getInequalityFilterField(),\n              e = this.getFirstOrderByField();\n          if (null !== t && null === e) t.isKeyField() ? this.memoizedOrderBy = [Dg] : this.memoizedOrderBy = [new kg(t), Dg];else {\n            Uf(null === t || null !== e && t.isEqual(e), \"First orderBy should match inequality field.\");\n\n            for (var n = !(this.memoizedOrderBy = []), r = 0, i = this.explicitOrderBy; r < i.length; r++) {\n              var o = i[r];\n              this.memoizedOrderBy.push(o), o.field.isKeyField() && (n = !0);\n            }\n\n            if (!n) {\n              var a = 0 < this.explicitOrderBy.length ? this.explicitOrderBy[this.explicitOrderBy.length - 1].dir : Ng.ASCENDING;\n              this.memoizedOrderBy.push(a === Ng.ASCENDING ? Dg : Rg);\n            }\n          }\n        }\n\n        return this.memoizedOrderBy;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), n.prototype.addFilter = function (t) {\n      Uf(null == this.getInequalityFilterField() || !(t instanceof _g) || !t.isInequality() || t.field.isEqual(this.getInequalityFilterField()), \"Query must only have one inequality field.\"), Uf(!this.isDocumentQuery(), \"No filtering allowed for document query\");\n      var e = this.filters.concat([t]);\n      return new n(this.path, this.collectionGroup, this.explicitOrderBy.slice(), e, this.limit, this.startAt, this.endAt);\n    }, n.prototype.addOrderBy = function (t) {\n      Uf(!this.startAt && !this.endAt, \"Bounds must be set after orderBy\");\n      var e = this.explicitOrderBy.concat([t]);\n      return new n(this.path, this.collectionGroup, e, this.filters.slice(), this.limit, this.startAt, this.endAt);\n    }, n.prototype.withLimit = function (t) {\n      return new n(this.path, this.collectionGroup, this.explicitOrderBy.slice(), this.filters.slice(), t, this.startAt, this.endAt);\n    }, n.prototype.withStartAt = function (t) {\n      return new n(this.path, this.collectionGroup, this.explicitOrderBy.slice(), this.filters.slice(), this.limit, t, this.endAt);\n    }, n.prototype.withEndAt = function (t) {\n      return new n(this.path, this.collectionGroup, this.explicitOrderBy.slice(), this.filters.slice(), this.limit, this.startAt, t);\n    }, n.prototype.asCollectionQueryAtPath = function (t) {\n      return new n(t, null, this.explicitOrderBy.slice(), this.filters.slice(), this.limit, this.startAt, this.endAt);\n    }, n.prototype.canonicalId = function () {\n      if (null === this.memoizedCanonicalId) {\n        var t = this.path.canonicalString();\n        this.isCollectionGroupQuery() && (t += \"|cg:\" + this.collectionGroup), t += \"|f:\";\n\n        for (var e = 0, n = this.filters; e < n.length; e++) {\n          t += n[e].canonicalId(), t += \",\";\n        }\n\n        t += \"|ob:\";\n\n        for (var r = 0, i = this.orderBy; r < i.length; r++) {\n          t += i[r].canonicalId(), t += \",\";\n        }\n\n        Rm(this.limit) || (t += \"|l:\", t += this.limit), this.startAt && (t += \"|lb:\", t += this.startAt.canonicalId()), this.endAt && (t += \"|ub:\", t += this.endAt.canonicalId()), this.memoizedCanonicalId = t;\n      }\n\n      return this.memoizedCanonicalId;\n    }, n.prototype.toString = function () {\n      var t = \"Query(\" + this.path.canonicalString();\n      return this.isCollectionGroupQuery() && (t += \" collectionGroup=\" + this.collectionGroup), 0 < this.filters.length && (t += \", filters: [\" + this.filters.join(\", \") + \"]\"), Rm(this.limit) || (t += \", limit: \" + this.limit), 0 < this.explicitOrderBy.length && (t += \", orderBy: [\" + this.explicitOrderBy.join(\", \") + \"]\"), this.startAt && (t += \", startAt: \" + this.startAt.canonicalId()), this.endAt && (t += \", endAt: \" + this.endAt.canonicalId()), t + \")\";\n    }, n.prototype.isEqual = function (t) {\n      if (this.limit !== t.limit) return !1;\n      if (this.orderBy.length !== t.orderBy.length) return !1;\n\n      for (var e = 0; e < this.orderBy.length; e++) {\n        if (!this.orderBy[e].isEqual(t.orderBy[e])) return !1;\n      }\n\n      if (this.filters.length !== t.filters.length) return !1;\n\n      for (e = 0; e < this.filters.length; e++) {\n        if (!this.filters[e].isEqual(t.filters[e])) return !1;\n      }\n\n      return this.collectionGroup === t.collectionGroup && !!this.path.isEqual(t.path) && !(null !== this.startAt ? !this.startAt.isEqual(t.startAt) : null !== t.startAt) && (null !== this.endAt ? this.endAt.isEqual(t.endAt) : null === t.endAt);\n    }, n.prototype.docComparator = function (t, e) {\n      for (var n = !1, r = 0, i = this.orderBy; r < i.length; r++) {\n        var o = i[r],\n            a = o.compare(t, e);\n        if (0 !== a) return a;\n        n = n || o.field.isKeyField();\n      }\n\n      return Uf(n, \"orderBy used that doesn't compare on key field\"), 0;\n    }, n.prototype.matches = function (t) {\n      return this.matchesPathAndCollectionGroup(t) && this.matchesOrderBy(t) && this.matchesFilters(t) && this.matchesBounds(t);\n    }, n.prototype.hasLimit = function () {\n      return !Rm(this.limit);\n    }, n.prototype.getFirstOrderByField = function () {\n      return 0 < this.explicitOrderBy.length ? this.explicitOrderBy[0].field : null;\n    }, n.prototype.getInequalityFilterField = function () {\n      for (var t = 0, e = this.filters; t < e.length; t++) {\n        var n = e[t];\n        if (n instanceof _g && n.isInequality()) return n.field;\n      }\n\n      return null;\n    }, n.prototype.findFilterOperator = function (t) {\n      for (var e = 0, n = this.filters; e < n.length; e++) {\n        var r = n[e];\n        if (r instanceof _g && 0 <= t.indexOf(r.op)) return r.op;\n      }\n\n      return null;\n    }, n.prototype.isDocumentQuery = function () {\n      return Op.isDocumentKey(this.path) && null === this.collectionGroup && 0 === this.filters.length;\n    }, n.prototype.isCollectionGroupQuery = function () {\n      return null !== this.collectionGroup;\n    }, n.prototype.matchesPathAndCollectionGroup = function (t) {\n      var e = t.key.path;\n      return null !== this.collectionGroup ? t.key.hasCollectionId(this.collectionGroup) && this.path.isPrefixOf(e) : Op.isDocumentKey(this.path) ? this.path.isEqual(e) : this.path.isImmediateParentOf(e);\n    }, n.prototype.matchesOrderBy = function (t) {\n      for (var e = 0, n = this.explicitOrderBy; e < n.length; e++) {\n        var r = n[e];\n        if (!r.field.isKeyField() && null === t.field(r.field)) return !1;\n      }\n\n      return !0;\n    }, n.prototype.matchesFilters = function (t) {\n      for (var e = 0, n = this.filters; e < n.length; e++) {\n        if (!n[e].matches(t)) return !1;\n      }\n\n      return !0;\n    }, n.prototype.matchesBounds = function (t) {\n      return !(this.startAt && !this.startAt.sortsBeforeDocument(this.orderBy, t)) && (!this.endAt || !this.endAt.sortsBeforeDocument(this.orderBy, t));\n    }, n.prototype.assertValidBound = function (t) {\n      Uf(t.position.length <= this.orderBy.length, \"Bound is longer than orderBy\");\n    }, n;\n  }(),\n      bg = function bg() {},\n      wg = function () {\n    function e(t) {\n      this.name = t;\n    }\n\n    return e.fromString = function (t) {\n      switch (t) {\n        case \"<\":\n          return e.LESS_THAN;\n\n        case \"<=\":\n          return e.LESS_THAN_OR_EQUAL;\n\n        case \"==\":\n          return e.EQUAL;\n\n        case \">=\":\n          return e.GREATER_THAN_OR_EQUAL;\n\n        case \">\":\n          return e.GREATER_THAN;\n\n        case \"array-contains\":\n          return e.ARRAY_CONTAINS;\n\n        case \"in\":\n          return e.IN;\n\n        case \"array-contains-any\":\n          return e.ARRAY_CONTAINS_ANY;\n\n        default:\n          return Ff(\"Unknown FieldFilter operator: \" + t);\n      }\n    }, e.prototype.toString = function () {\n      return this.name;\n    }, e.prototype.isEqual = function (t) {\n      return this.name === t.name;\n    }, e.LESS_THAN = new e(\"<\"), e.LESS_THAN_OR_EQUAL = new e(\"<=\"), e.EQUAL = new e(\"==\"), e.GREATER_THAN = new e(\">\"), e.GREATER_THAN_OR_EQUAL = new e(\">=\"), e.ARRAY_CONTAINS = new e(\"array-contains\"), e.IN = new e(\"in\"), e.ARRAY_CONTAINS_ANY = new e(\"array-contains-any\"), e;\n  }(),\n      _g = function (i) {\n    function r(t, e, n) {\n      var r = i.call(this) || this;\n      return r.field = t, r.op = e, r.value = n, r;\n    }\n\n    return ii(r, i), r.create = function (t, e, n) {\n      if (t.isKeyField()) return e === wg.IN ? (Uf(n instanceof om, \"Comparing on key with IN, but filter value not an ArrayValue\"), Uf(n.internalValue.every(function (t) {\n        return t instanceof nm;\n      }), \"Comparing on key with IN, but an array value was not a RefValue\"), new Tg(t, n)) : (Uf(n instanceof nm, \"Comparing on key, but filter value not a RefValue\"), Uf(e !== wg.ARRAY_CONTAINS && e !== wg.ARRAY_CONTAINS_ANY, \"'\" + e.toString() + \"' queries don't make sense on document keys.\"), new Eg(t, e, n));\n\n      if (n.isEqual(Ky.INSTANCE)) {\n        if (e !== wg.EQUAL) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid query. Null supports only equality comparisons.\");\n        return new r(t, e, n);\n      }\n\n      if (n.isEqual(Jy.NAN)) {\n        if (e !== wg.EQUAL) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid query. NaN supports only equality comparisons.\");\n        return new r(t, e, n);\n      }\n\n      return e === wg.ARRAY_CONTAINS ? new Sg(t, n) : e === wg.IN ? (Uf(n instanceof om, \"IN filter has invalid value: \" + n.toString()), new Ig(t, n)) : e === wg.ARRAY_CONTAINS_ANY ? (Uf(n instanceof om, \"ARRAY_CONTAINS_ANY filter has invalid value: \" + n.toString()), new Cg(t, n)) : new r(t, e, n);\n    }, r.prototype.matches = function (t) {\n      var e = t.field(this.field);\n      return null !== e && this.value.typeOrder === e.typeOrder && this.matchesComparison(e.compareTo(this.value));\n    }, r.prototype.matchesComparison = function (t) {\n      switch (this.op) {\n        case wg.LESS_THAN:\n          return t < 0;\n\n        case wg.LESS_THAN_OR_EQUAL:\n          return t <= 0;\n\n        case wg.EQUAL:\n          return 0 === t;\n\n        case wg.GREATER_THAN:\n          return 0 < t;\n\n        case wg.GREATER_THAN_OR_EQUAL:\n          return 0 <= t;\n\n        default:\n          return Ff(\"Unknown FieldFilter operator: \" + this.op);\n      }\n    }, r.prototype.isInequality = function () {\n      return 0 <= [wg.LESS_THAN, wg.LESS_THAN_OR_EQUAL, wg.GREATER_THAN, wg.GREATER_THAN_OR_EQUAL].indexOf(this.op);\n    }, r.prototype.canonicalId = function () {\n      return this.field.canonicalString() + this.op.toString() + this.value.toString();\n    }, r.prototype.isEqual = function (t) {\n      return t instanceof r && this.op.isEqual(t.op) && this.field.isEqual(t.field) && this.value.isEqual(t.value);\n    }, r.prototype.toString = function () {\n      return this.field.canonicalString() + \" \" + this.op + \" \" + this.value.value();\n    }, r;\n  }(bg),\n      Eg = function (t) {\n    function e() {\n      return null !== t && t.apply(this, arguments) || this;\n    }\n\n    return ii(e, t), e.prototype.matches = function (t) {\n      var e = this.value,\n          n = Op.comparator(t.key, e.key);\n      return this.matchesComparison(n);\n    }, e;\n  }(_g),\n      Tg = function (r) {\n    function t(t, e) {\n      var n = r.call(this, t, wg.IN, e) || this;\n      return n.value = e, n;\n    }\n\n    return ii(t, r), t.prototype.matches = function (e) {\n      return this.value.internalValue.some(function (t) {\n        return e.key.isEqual(t.key);\n      });\n    }, t;\n  }(_g),\n      Sg = function (n) {\n    function t(t, e) {\n      return n.call(this, t, wg.ARRAY_CONTAINS, e) || this;\n    }\n\n    return ii(t, n), t.prototype.matches = function (t) {\n      var e = t.field(this.field);\n      return e instanceof om && e.contains(this.value);\n    }, t;\n  }(_g),\n      Ig = function (r) {\n    function t(t, e) {\n      var n = r.call(this, t, wg.IN, e) || this;\n      return n.value = e, n;\n    }\n\n    return ii(t, r), t.prototype.matches = function (t) {\n      var e = this.value,\n          n = t.field(this.field);\n      return null !== n && e.contains(n);\n    }, t;\n  }(_g),\n      Cg = function (r) {\n    function t(t, e) {\n      var n = r.call(this, t, wg.ARRAY_CONTAINS_ANY, e) || this;\n      return n.value = e, n;\n    }\n\n    return ii(t, r), t.prototype.matches = function (t) {\n      var e = this,\n          n = t.field(this.field);\n      return n instanceof om && n.internalValue.some(function (t) {\n        return e.value.contains(t);\n      });\n    }, t;\n  }(_g),\n      Ng = function () {\n    function t(t) {\n      this.name = t;\n    }\n\n    return t.prototype.toString = function () {\n      return this.name;\n    }, t.ASCENDING = new t(\"asc\"), t.DESCENDING = new t(\"desc\"), t;\n  }(),\n      Ag = function () {\n    function t(t, e) {\n      this.position = t, this.before = e;\n    }\n\n    return t.prototype.canonicalId = function () {\n      for (var t = this.before ? \"b:\" : \"a:\", e = 0, n = this.position; e < n.length; e++) {\n        t += n[e].toString();\n      }\n\n      return t;\n    }, t.prototype.sortsBeforeDocument = function (t, e) {\n      Uf(this.position.length <= t.length, \"Bound has more components than query's orderBy\");\n\n      for (var n = 0, r = 0; r < this.position.length; r++) {\n        var i = t[r],\n            o = this.position[r];\n        if (i.field.isKeyField()) Uf(o instanceof nm, \"Bound has a non-key value where the key path is being used.\"), n = Op.comparator(o.key, e.key);else {\n          var a = e.field(i.field);\n          Uf(void 0 !== a, \"Field should exist since document matched the orderBy already.\"), n = o.compareTo(a);\n        }\n        if (i.dir === Ng.DESCENDING && (n *= -1), 0 !== n) break;\n      }\n\n      return this.before ? n <= 0 : n < 0;\n    }, t.prototype.isEqual = function (t) {\n      if (null === t) return !1;\n      if (this.before !== t.before || this.position.length !== t.position.length) return !1;\n\n      for (var e = 0; e < this.position.length; e++) {\n        var n = this.position[e],\n            r = t.position[e];\n        if (!n.isEqual(r)) return !1;\n      }\n\n      return !0;\n    }, t;\n  }(),\n      kg = function () {\n    function t(t, e) {\n      this.field = t, void 0 === e && (e = Ng.ASCENDING), this.dir = e, this.isKeyOrderBy = t.isKeyField();\n    }\n\n    return t.prototype.compare = function (t, e) {\n      var n = this.isKeyOrderBy ? Ld.compareByKey(t, e) : Ld.compareByField(this.field, t, e);\n\n      switch (this.dir) {\n        case Ng.ASCENDING:\n          return n;\n\n        case Ng.DESCENDING:\n          return -1 * n;\n\n        default:\n          return Ff(\"Unknown direction: \" + this.dir);\n      }\n    }, t.prototype.canonicalId = function () {\n      return this.field.canonicalString() + this.dir.toString();\n    }, t.prototype.toString = function () {\n      return this.field.canonicalString() + \" (\" + this.dir + \")\";\n    }, t.prototype.isEqual = function (t) {\n      return this.dir === t.dir && this.field.isEqual(t.field);\n    }, t;\n  }(),\n      Dg = new kg(Rp.keyField(), Ng.ASCENDING),\n      Rg = new kg(Rp.keyField(), Ng.DESCENDING),\n      Og = function () {\n    function e() {}\n\n    return e.prototype.applyToLocalView = function (t, e) {\n      return new tm(e, t);\n    }, e.prototype.applyToRemoteDocument = function (t, e) {\n      return e;\n    }, e.prototype.computeBaseValue = function (t) {\n      return null;\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e;\n    }, e.instance = new e(), e;\n  }(),\n      Pg = function () {\n    function e(t) {\n      this.elements = t;\n    }\n\n    return e.prototype.applyToLocalView = function (t, e) {\n      return this.apply(t);\n    }, e.prototype.applyToRemoteDocument = function (t, e) {\n      return this.apply(t);\n    }, e.prototype.apply = function (t) {\n      for (var n = Lg(t), e = function e(_e5) {\n        n.find(function (t) {\n          return t.isEqual(_e5);\n        }) || n.push(_e5);\n      }, r = 0, i = this.elements; r < i.length; r++) {\n        e(i[r]);\n      }\n\n      return new om(n);\n    }, e.prototype.computeBaseValue = function (t) {\n      return null;\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && yp(t.elements, this.elements);\n    }, e;\n  }(),\n      xg = function () {\n    function e(t) {\n      this.elements = t;\n    }\n\n    return e.prototype.applyToLocalView = function (t, e) {\n      return this.apply(t);\n    }, e.prototype.applyToRemoteDocument = function (t, e) {\n      return this.apply(t);\n    }, e.prototype.apply = function (t) {\n      for (var n = Lg(t), e = function e(_e6) {\n        n = n.filter(function (t) {\n          return !t.isEqual(_e6);\n        });\n      }, r = 0, i = this.elements; r < i.length; r++) {\n        e(i[r]);\n      }\n\n      return new om(n);\n    }, e.prototype.computeBaseValue = function (t) {\n      return null;\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && yp(t.elements, this.elements);\n    }, e;\n  }(),\n      Mg = function () {\n    function e(t) {\n      this.operand = t;\n    }\n\n    return e.prototype.applyToLocalView = function (t, e) {\n      var n = this.computeBaseValue(t);\n\n      if (n instanceof Xy && this.operand instanceof Xy) {\n        var r = n.internalValue + this.operand.internalValue;\n        return new Xy(r);\n      }\n\n      r = n.internalValue + this.operand.internalValue;\n      return new Jy(r);\n    }, e.prototype.applyToRemoteDocument = function (t, e) {\n      return Uf(null !== e, \"Didn't receive transformResult for NUMERIC_ADD transform\"), e;\n    }, e.prototype.computeBaseValue = function (t) {\n      return t instanceof Hy ? t : new Xy(0);\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && this.operand.isEqual(t.operand);\n    }, e;\n  }();\n\n  function Lg(t) {\n    return t instanceof om ? t.internalValue.slice() : [];\n  }\n\n  var Fg,\n      Ug,\n      qg = function () {\n    function t(t) {\n      this.count = t;\n    }\n\n    return t.prototype.isEqual = function (t) {\n      return t && t.count === this.count;\n    }, t;\n  }(),\n      Vg = ((Fg = {})[Ng.ASCENDING.name] = \"ASCENDING\", Fg[Ng.DESCENDING.name] = \"DESCENDING\", Fg),\n      Bg = ((Ug = {})[wg.LESS_THAN.name] = \"LESS_THAN\", Ug[wg.LESS_THAN_OR_EQUAL.name] = \"LESS_THAN_OR_EQUAL\", Ug[wg.GREATER_THAN.name] = \"GREATER_THAN\", Ug[wg.GREATER_THAN_OR_EQUAL.name] = \"GREATER_THAN_OR_EQUAL\", Ug[wg.EQUAL.name] = \"EQUAL\", Ug[wg.ARRAY_CONTAINS.name] = \"ARRAY_CONTAINS\", Ug[wg.IN.name] = \"IN\", Ug[wg.ARRAY_CONTAINS_ANY.name] = \"ARRAY_CONTAINS_ANY\", Ug),\n      jg = new RegExp(/^\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(?:\\.(\\d+))?Z$/);\n\n  function Wg(t, e) {\n    Uf(!Rm(t), e + \" is missing\");\n  }\n\n  function Kg(t) {\n    return \"number\" == typeof t ? t : \"string\" == typeof t ? Number(t) : Ff(\"can't parse \" + t);\n  }\n\n  var Qg = function () {\n    function t(t, e) {\n      this.databaseId = t, this.options = e;\n    }\n\n    return t.prototype.emptyByteString = function () {\n      return this.options.useProto3Json ? \"\" : new Uint8Array(0);\n    }, t.prototype.unsafeCastProtoByteString = function (t) {\n      return t;\n    }, t.prototype.fromRpcStatus = function (t) {\n      var e = void 0 === t.code ? Bf.UNKNOWN : Xm(t.code);\n      return new jf(e, t.message || \"\");\n    }, t.prototype.toInt32Value = function (t) {\n      return Rm(t) ? void 0 : {\n        value: t\n      };\n    }, t.prototype.fromInt32Value = function (t) {\n      var e;\n      return Rm(e = \"object\" == typeof t ? t.value : t) ? null : e;\n    }, t.prototype.toTimestamp = function (t) {\n      return {\n        seconds: \"\" + t.seconds,\n        nanos: t.nanoseconds\n      };\n    }, t.prototype.fromTimestamp = function (t) {\n      if (\"string\" == typeof t) return this.fromIso8601String(t);\n      Uf(!!t, \"Cannot deserialize null or undefined timestamp.\");\n      var e = Kg(t.seconds || \"0\"),\n          n = t.nanos || 0;\n      return new Kp(e, n);\n    }, t.prototype.fromIso8601String = function (t) {\n      var e = 0,\n          n = jg.exec(t);\n\n      if (Uf(!!n, \"invalid timestamp: \" + t), n[1]) {\n        var r = n[1];\n        r = (r + \"000000000\").substr(0, 9), e = Number(r);\n      }\n\n      var i = new Date(t),\n          o = Math.floor(i.getTime() / 1e3);\n      return new Kp(o, e);\n    }, t.prototype.toBytes = function (t) {\n      return this.options.useProto3Json ? t.toBase64() : this.unsafeCastProtoByteString(t.toUint8Array());\n    }, t.prototype.fromBlob = function (t) {\n      return \"string\" == typeof t ? (Uf(this.options.useProto3Json, \"Expected bytes to be passed in as Uint8Array, but got a string instead.\"), _p.fromBase64String(t)) : (Uf(!this.options.useProto3Json, \"Expected bytes to be passed in as Uint8Array, but got a string instead.\"), _p.fromUint8Array(t));\n    }, t.prototype.toVersion = function (t) {\n      return this.toTimestamp(t.toTimestamp());\n    }, t.prototype.fromVersion = function (t) {\n      return Uf(!!t, \"Trying to deserialize version that isn't set\"), Qp.fromTimestamp(this.fromTimestamp(t));\n    }, t.prototype.toResourceName = function (t, e) {\n      return this.fullyQualifiedPrefixPath(t).child(\"documents\").child(e).canonicalString();\n    }, t.prototype.fromResourceName = function (t) {\n      var e = kp.fromString(t);\n      return Uf(this.isValidResourceName(e), \"Tried to deserialize invalid key \" + e.toString()), e;\n    }, t.prototype.toName = function (t) {\n      return this.toResourceName(this.databaseId, t.path);\n    }, t.prototype.fromName = function (t) {\n      var e = this.fromResourceName(t);\n      return Uf(e.get(1) === this.databaseId.projectId, \"Tried to deserialize key from different project: \" + e.get(1) + \" vs \" + this.databaseId.projectId), Uf(!e.get(3) && !this.databaseId.database || e.get(3) === this.databaseId.database, \"Tried to deserialize key from different database: \" + e.get(3) + \" vs \" + this.databaseId.database), new Op(this.extractLocalPathFromResourceName(e));\n    }, t.prototype.toQueryPath = function (t) {\n      return this.toResourceName(this.databaseId, t);\n    }, t.prototype.fromQueryPath = function (t) {\n      var e = this.fromResourceName(t);\n      return 4 === e.length ? kp.EMPTY_PATH : this.extractLocalPathFromResourceName(e);\n    }, Object.defineProperty(t.prototype, \"encodedDatabaseId\", {\n      get: function get() {\n        return new kp([\"projects\", this.databaseId.projectId, \"databases\", this.databaseId.database]).canonicalString();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.fullyQualifiedPrefixPath = function (t) {\n      return new kp([\"projects\", t.projectId, \"databases\", t.database]);\n    }, t.prototype.extractLocalPathFromResourceName = function (t) {\n      return Uf(4 < t.length && \"documents\" === t.get(4), \"tried to deserialize invalid key \" + t.toString()), t.popFirst(5);\n    }, t.prototype.isValidResourceName = function (t) {\n      return 4 <= t.length && \"projects\" === t.get(0) && \"databases\" === t.get(2);\n    }, t.prototype.toValue = function (t) {\n      if (t instanceof Ky) return {\n        nullValue: \"NULL_VALUE\"\n      };\n      if (t instanceof Qy) return {\n        booleanValue: t.value()\n      };\n      if (t instanceof Xy) return {\n        integerValue: \"\" + t.value()\n      };\n\n      if (t instanceof Jy) {\n        var e = t.value();\n\n        if (this.options.useProto3Json) {\n          if (isNaN(e)) return {\n            doubleValue: \"NaN\"\n          };\n          if (e === 1 / 0) return {\n            doubleValue: \"Infinity\"\n          };\n          if (e === -1 / 0) return {\n            doubleValue: \"-Infinity\"\n          };\n        }\n\n        return {\n          doubleValue: t.value()\n        };\n      }\n\n      return t instanceof $y ? {\n        stringValue: t.value()\n      } : t instanceof im ? {\n        mapValue: this.toMapValue(t)\n      } : t instanceof om ? {\n        arrayValue: this.toArrayValue(t)\n      } : t instanceof Zy ? {\n        timestampValue: this.toTimestamp(t.internalValue)\n      } : t instanceof rm ? {\n        geoPointValue: {\n          latitude: t.value().latitude,\n          longitude: t.value().longitude\n        }\n      } : t instanceof em ? {\n        bytesValue: this.toBytes(t.value())\n      } : t instanceof nm ? {\n        referenceValue: this.toResourceName(t.databaseId, t.key.path)\n      } : Ff(\"Unknown FieldValue \" + JSON.stringify(t));\n    }, t.prototype.fromValue = function (t) {\n      var e = this;\n      if (\"nullValue\" in t) return Ky.INSTANCE;\n      if (\"booleanValue\" in t) return Qy.of(t.booleanValue);\n      if (\"integerValue\" in t) return new Xy(Kg(t.integerValue));\n\n      if (\"doubleValue\" in t) {\n        if (this.options.useProto3Json) {\n          if (\"NaN\" === t.doubleValue) return Jy.NAN;\n          if (\"Infinity\" === t.doubleValue) return Jy.POSITIVE_INFINITY;\n          if (\"-Infinity\" === t.doubleValue) return Jy.NEGATIVE_INFINITY;\n        }\n\n        return new Jy(t.doubleValue);\n      }\n\n      if (\"stringValue\" in t) return new $y(t.stringValue);\n      if (\"mapValue\" in t) return this.fromFields(t.mapValue.fields || {});\n\n      if (\"arrayValue\" in t) {\n        Wg(t.arrayValue, \"arrayValue\");\n        var n = t.arrayValue.values || [];\n        return new om(n.map(function (t) {\n          return e.fromValue(t);\n        }));\n      }\n\n      if (\"timestampValue\" in t) return Wg(t.timestampValue, \"timestampValue\"), new Zy(this.fromTimestamp(t.timestampValue));\n\n      if (\"geoPointValue\" in t) {\n        Wg(t.geoPointValue, \"geoPointValue\");\n        var r = t.geoPointValue.latitude || 0,\n            i = t.geoPointValue.longitude || 0;\n        return new rm(new gg(r, i));\n      }\n\n      if (\"bytesValue\" in t) {\n        Wg(t.bytesValue, \"bytesValue\");\n        var o = this.fromBlob(t.bytesValue);\n        return new em(o);\n      }\n\n      if (\"referenceValue\" in t) {\n        Wg(t.referenceValue, \"referenceValue\");\n        var a = this.fromResourceName(t.referenceValue),\n            s = new Ip(a.get(1), a.get(3)),\n            u = new Op(this.extractLocalPathFromResourceName(a));\n        return new nm(s, u);\n      }\n\n      return Ff(\"Unknown Value proto \" + JSON.stringify(t));\n    }, t.prototype.toMutationDocument = function (t, e) {\n      return {\n        name: this.toName(t),\n        fields: this.toFields(e)\n      };\n    }, t.prototype.toDocument = function (t) {\n      return Uf(!t.hasLocalMutations, \"Can't serialize documents with mutations.\"), {\n        name: this.toName(t.key),\n        fields: this.toFields(t.data),\n        updateTime: this.toTimestamp(t.version.toTimestamp())\n      };\n    }, t.prototype.fromDocument = function (t, e) {\n      return new Ld(this.fromName(t.name), this.fromVersion(t.updateTime), this.fromFields(t.fields || {}), {\n        hasCommittedMutations: !!e\n      });\n    }, t.prototype.toFields = function (t) {\n      var n = this,\n          r = {};\n      return t.forEach(function (t, e) {\n        r[t] = n.toValue(e);\n      }), r;\n    }, t.prototype.fromFields = function (t) {\n      var n = this,\n          e = t,\n          r = im.EMPTY;\n      return Gf(e, function (t, e) {\n        r = r.set(new Rp([t]), n.fromValue(e));\n      }), r;\n    }, t.prototype.toMapValue = function (t) {\n      return {\n        fields: this.toFields(t)\n      };\n    }, t.prototype.toArrayValue = function (t) {\n      var e = this,\n          n = [];\n      return t.forEach(function (t) {\n        n.push(e.toValue(t));\n      }), {\n        values: n\n      };\n    }, t.prototype.fromFound = function (t) {\n      Uf(!!t.found, \"Tried to deserialize a found document from a missing document.\"), Wg(t.found.name, \"doc.found.name\"), Wg(t.found.updateTime, \"doc.found.updateTime\");\n      var e = this.fromName(t.found.name),\n          n = this.fromVersion(t.found.updateTime),\n          r = this.fromFields(t.found.fields || {});\n      return new Ld(e, n, r, {}, t.found);\n    }, t.prototype.fromMissing = function (t) {\n      Uf(!!t.missing, \"Tried to deserialize a missing document from a found document.\"), Uf(!!t.readTime, \"Tried to deserialize a missing document without a read time.\");\n      var e = this.fromName(t.missing),\n          n = this.fromVersion(t.readTime);\n      return new Fd(e, n);\n    }, t.prototype.fromMaybeDocument = function (t) {\n      return \"found\" in t ? this.fromFound(t) : \"missing\" in t ? this.fromMissing(t) : Ff(\"invalid batch get response: \" + JSON.stringify(t));\n    }, t.prototype.toWatchTargetChangeState = function (t) {\n      switch (t) {\n        case ng.Added:\n          return \"ADD\";\n\n        case ng.Current:\n          return \"CURRENT\";\n\n        case ng.NoChange:\n          return \"NO_CHANGE\";\n\n        case ng.Removed:\n          return \"REMOVE\";\n\n        case ng.Reset:\n          return \"RESET\";\n\n        default:\n          return Ff(\"Unknown WatchTargetChangeState: \" + t);\n      }\n    }, t.prototype.toTestWatchChange = function (t) {\n      if (t instanceof cg) return {\n        filter: {\n          count: t.existenceFilter.count,\n          targetId: t.targetId\n        }\n      };\n\n      if (t instanceof ug) {\n        if (t.newDoc instanceof Ld) {\n          var e = t.newDoc;\n          return {\n            documentChange: {\n              document: {\n                name: this.toName(e.key),\n                fields: this.toFields(e.data),\n                updateTime: this.toVersion(e.version)\n              },\n              targetIds: t.updatedTargetIds,\n              removedTargetIds: t.removedTargetIds\n            }\n          };\n        }\n\n        if (t.newDoc instanceof Fd) {\n          e = t.newDoc;\n          return {\n            documentDelete: {\n              document: this.toName(e.key),\n              readTime: this.toVersion(e.version),\n              removedTargetIds: t.removedTargetIds\n            }\n          };\n        }\n\n        if (null === t.newDoc) return {\n          documentRemove: {\n            document: this.toName(t.key),\n            removedTargetIds: t.removedTargetIds\n          }\n        };\n      }\n\n      if (t instanceof hg) {\n        var n = void 0;\n        return t.cause && (n = {\n          code: function (t) {\n            if (void 0 === t) return Hm.OK;\n\n            switch (t) {\n              case Bf.OK:\n                return Hm.OK;\n\n              case Bf.CANCELLED:\n                return Hm.CANCELLED;\n\n              case Bf.UNKNOWN:\n                return Hm.UNKNOWN;\n\n              case Bf.DEADLINE_EXCEEDED:\n                return Hm.DEADLINE_EXCEEDED;\n\n              case Bf.RESOURCE_EXHAUSTED:\n                return Hm.RESOURCE_EXHAUSTED;\n\n              case Bf.INTERNAL:\n                return Hm.INTERNAL;\n\n              case Bf.UNAVAILABLE:\n                return Hm.UNAVAILABLE;\n\n              case Bf.UNAUTHENTICATED:\n                return Hm.UNAUTHENTICATED;\n\n              case Bf.INVALID_ARGUMENT:\n                return Hm.INVALID_ARGUMENT;\n\n              case Bf.NOT_FOUND:\n                return Hm.NOT_FOUND;\n\n              case Bf.ALREADY_EXISTS:\n                return Hm.ALREADY_EXISTS;\n\n              case Bf.PERMISSION_DENIED:\n                return Hm.PERMISSION_DENIED;\n\n              case Bf.FAILED_PRECONDITION:\n                return Hm.FAILED_PRECONDITION;\n\n              case Bf.ABORTED:\n                return Hm.ABORTED;\n\n              case Bf.OUT_OF_RANGE:\n                return Hm.OUT_OF_RANGE;\n\n              case Bf.UNIMPLEMENTED:\n                return Hm.UNIMPLEMENTED;\n\n              case Bf.DATA_LOSS:\n                return Hm.DATA_LOSS;\n\n              default:\n                return Ff(\"Unknown status code: \" + t);\n            }\n          }(t.cause.code),\n          message: t.cause.message\n        }), {\n          targetChange: {\n            targetChangeType: this.toWatchTargetChangeState(t.state),\n            targetIds: t.targetIds,\n            resumeToken: this.unsafeCastProtoByteString(t.resumeToken),\n            cause: n\n          }\n        };\n      }\n\n      return Ff(\"Unrecognized watch change: \" + JSON.stringify(t));\n    }, t.prototype.fromWatchChange = function (t) {\n      var e;\n\n      if (\"targetChange\" in t) {\n        Wg(t.targetChange, \"targetChange\");\n        var n = this.fromWatchTargetChangeState(t.targetChange.targetChangeType || \"NO_CHANGE\"),\n            r = t.targetChange.targetIds || [],\n            i = t.targetChange.resumeToken || this.emptyByteString(),\n            o = t.targetChange.cause,\n            a = o && this.fromRpcStatus(o);\n        e = new hg(n, r, i, a || null);\n      } else if (\"documentChange\" in t) {\n        Wg(t.documentChange, \"documentChange\"), Wg(t.documentChange.document, \"documentChange.name\"), Wg(t.documentChange.document.name, \"documentChange.document.name\"), Wg(t.documentChange.document.updateTime, \"documentChange.document.updateTime\");\n        var s = t.documentChange,\n            u = this.fromName(s.document.name),\n            c = this.fromVersion(s.document.updateTime),\n            h = this.fromFields(s.document.fields || {}),\n            l = new Ld(u, c, h, {}, s.document),\n            f = s.targetIds || [],\n            p = s.removedTargetIds || [];\n        e = new ug(f, p, l.key, l);\n      } else if (\"documentDelete\" in t) {\n        Wg(t.documentDelete, \"documentDelete\"), Wg(t.documentDelete.document, \"documentDelete.document\");\n        var d = t.documentDelete;\n        u = this.fromName(d.document), c = d.readTime ? this.fromVersion(d.readTime) : Qp.forDeletedDoc(), l = new Fd(u, c), p = d.removedTargetIds || [];\n        e = new ug([], p, l.key, l);\n      } else if (\"documentRemove\" in t) {\n        Wg(t.documentRemove, \"documentRemove\"), Wg(t.documentRemove.document, \"documentRemove\");\n        var y = t.documentRemove;\n        u = this.fromName(y.document), p = y.removedTargetIds || [];\n        e = new ug([], p, u, null);\n      } else {\n        if (!(\"filter\" in t)) return Ff(\"Unknown change type \" + JSON.stringify(t));\n        Wg(t.filter, \"filter\"), Wg(t.filter.targetId, \"filter.targetId\");\n        var m = t.filter,\n            g = m.count || 0,\n            v = new qg(g),\n            b = m.targetId;\n        e = new cg(b, v);\n      }\n\n      return e;\n    }, t.prototype.fromWatchTargetChangeState = function (t) {\n      return \"NO_CHANGE\" === t ? ng.NoChange : \"ADD\" === t ? ng.Added : \"REMOVE\" === t ? ng.Removed : \"CURRENT\" === t ? ng.Current : \"RESET\" === t ? ng.Reset : Ff(\"Got unexpected TargetChange.state: \" + t);\n    }, t.prototype.versionFromListenResponse = function (t) {\n      if (!(\"targetChange\" in t)) return Qp.MIN;\n      var e = t.targetChange;\n      return e.targetIds && e.targetIds.length ? Qp.MIN : e.readTime ? this.fromVersion(e.readTime) : Qp.MIN;\n    }, t.prototype.toMutation = function (t) {\n      var e,\n          n = this;\n      if (t instanceof lm) e = {\n        update: this.toMutationDocument(t.key, t.value)\n      };else if (t instanceof dm) e = {\n        delete: this.toName(t.key)\n      };else if (t instanceof fm) e = {\n        update: this.toMutationDocument(t.key, t.data),\n        updateMask: this.toDocumentMask(t.fieldMask)\n      };else {\n        if (!(t instanceof pm)) return Ff(\"Unknown mutation type \" + t.type);\n        e = {\n          transform: {\n            document: this.toName(t.key),\n            fieldTransforms: t.fieldTransforms.map(function (t) {\n              return n.toFieldTransform(t);\n            })\n          }\n        };\n      }\n      return t.precondition.isNone || (e.currentDocument = this.toPrecondition(t.precondition)), e;\n    }, t.prototype.fromMutation = function (t) {\n      var e = this,\n          n = t.currentDocument ? this.fromPrecondition(t.currentDocument) : cm.NONE;\n\n      if (t.update) {\n        Wg(t.update.name, \"name\");\n        var r = this.fromName(t.update.name),\n            i = this.fromFields(t.update.fields || {});\n\n        if (t.updateMask) {\n          var o = this.fromDocumentMask(t.updateMask);\n          return new fm(r, i, o, n);\n        }\n\n        return new lm(r, i, n);\n      }\n\n      if (t.delete) {\n        r = this.fromName(t.delete);\n        return new dm(r, n);\n      }\n\n      if (t.transform) {\n        r = this.fromName(t.transform.document);\n        var a = t.transform.fieldTransforms.map(function (t) {\n          return e.fromFieldTransform(t);\n        });\n        return Uf(!0 === n.exists, 'Transforms only support precondition \"exists == true\"'), new pm(r, a);\n      }\n\n      return Ff(\"unknown mutation proto: \" + JSON.stringify(t));\n    }, t.prototype.toPrecondition = function (t) {\n      return Uf(!t.isNone, \"Can't serialize an empty precondition\"), void 0 !== t.updateTime ? {\n        updateTime: this.toVersion(t.updateTime)\n      } : void 0 !== t.exists ? {\n        exists: t.exists\n      } : Ff(\"Unknown precondition\");\n    }, t.prototype.fromPrecondition = function (t) {\n      return void 0 !== t.updateTime ? cm.updateTime(this.fromVersion(t.updateTime)) : void 0 !== t.exists ? cm.exists(t.exists) : cm.NONE;\n    }, t.prototype.fromWriteResult = function (t, e) {\n      var n = this,\n          r = t.updateTime ? this.fromVersion(t.updateTime) : this.fromVersion(e),\n          i = null;\n      return t.transformResults && 0 < t.transformResults.length && (i = t.transformResults.map(function (t) {\n        return n.fromValue(t);\n      })), new um(r, i);\n    }, t.prototype.fromWriteResults = function (t, e) {\n      var n = this;\n      return t && 0 < t.length ? (Uf(void 0 !== e, \"Received a write result without a commit time\"), t.map(function (t) {\n        return n.fromWriteResult(t, e);\n      })) : [];\n    }, t.prototype.toFieldTransform = function (t) {\n      var e = this,\n          n = t.transform;\n      if (n instanceof Og) return {\n        fieldPath: t.field.canonicalString(),\n        setToServerValue: \"REQUEST_TIME\"\n      };\n      if (n instanceof Pg) return {\n        fieldPath: t.field.canonicalString(),\n        appendMissingElements: {\n          values: n.elements.map(function (t) {\n            return e.toValue(t);\n          })\n        }\n      };\n      if (n instanceof xg) return {\n        fieldPath: t.field.canonicalString(),\n        removeAllFromArray: {\n          values: n.elements.map(function (t) {\n            return e.toValue(t);\n          })\n        }\n      };\n      if (n instanceof Mg) return {\n        fieldPath: t.field.canonicalString(),\n        increment: this.toValue(n.operand)\n      };\n      throw Ff(\"Unknown transform: \" + t.transform);\n    }, t.prototype.fromFieldTransform = function (t) {\n      var e = this,\n          n = null;\n      if (\"setToServerValue\" in t) Uf(\"REQUEST_TIME\" === t.setToServerValue, \"Unknown server value transform proto: \" + JSON.stringify(t)), n = Og.instance;else if (\"appendMissingElements\" in t) {\n        var r = t.appendMissingElements.values || [];\n        n = new Pg(r.map(function (t) {\n          return e.fromValue(t);\n        }));\n      } else if (\"removeAllFromArray\" in t) {\n        r = t.removeAllFromArray.values || [];\n        n = new xg(r.map(function (t) {\n          return e.fromValue(t);\n        }));\n      } else if (\"increment\" in t) {\n        var i = this.fromValue(t.increment);\n        Uf(i instanceof Hy, \"NUMERIC_ADD transform requires a NumberValue\"), n = new Mg(i);\n      } else Ff(\"Unknown transform proto: \" + JSON.stringify(t));\n      var o = Rp.fromServerFormat(t.fieldPath);\n      return new sm(o, n);\n    }, t.prototype.toDocumentsTarget = function (t) {\n      return {\n        documents: [this.toQueryPath(t.path)]\n      };\n    }, t.prototype.fromDocumentsTarget = function (t) {\n      var e = t.documents.length;\n      Uf(1 === e, \"DocumentsTarget contained other than 1 document: \" + e);\n      var n = t.documents[0];\n      return vg.atPath(this.fromQueryPath(n));\n    }, t.prototype.toQueryTarget = function (t) {\n      var e = {\n        structuredQuery: {}\n      },\n          n = t.path;\n      null !== t.collectionGroup ? (Uf(n.length % 2 == 0, \"Collection Group queries should be within a document path or root.\"), e.parent = this.toQueryPath(n), e.structuredQuery.from = [{\n        collectionId: t.collectionGroup,\n        allDescendants: !0\n      }]) : (Uf(n.length % 2 != 0, \"Document queries with filters are not supported.\"), e.parent = this.toQueryPath(n.popLast()), e.structuredQuery.from = [{\n        collectionId: n.lastSegment()\n      }]);\n      var r = this.toFilter(t.filters);\n      r && (e.structuredQuery.where = r);\n      var i = this.toOrder(t.orderBy);\n      i && (e.structuredQuery.orderBy = i);\n      var o = this.toInt32Value(t.limit);\n      return void 0 !== o && (e.structuredQuery.limit = o), t.startAt && (e.structuredQuery.startAt = this.toCursor(t.startAt)), t.endAt && (e.structuredQuery.endAt = this.toCursor(t.endAt)), e;\n    }, t.prototype.fromQueryTarget = function (t) {\n      var e = this.fromQueryPath(t.parent),\n          n = t.structuredQuery,\n          r = n.from ? n.from.length : 0,\n          i = null;\n\n      if (0 < r) {\n        Uf(1 === r, \"StructuredQuery.from with more than one collection is not supported.\");\n        var o = n.from[0];\n        o.allDescendants ? i = o.collectionId : e = e.child(o.collectionId);\n      }\n\n      var a = [];\n      n.where && (a = this.fromFilter(n.where));\n      var s = [];\n      n.orderBy && (s = this.fromOrder(n.orderBy));\n      var u = null;\n      n.limit && (u = this.fromInt32Value(n.limit));\n      var c = null;\n      n.startAt && (c = this.fromCursor(n.startAt));\n      var h = null;\n      return n.endAt && (h = this.fromCursor(n.endAt)), new vg(e, i, s, a, u, c, h);\n    }, t.prototype.toListenRequestLabels = function (t) {\n      var e = this.toLabel(t.purpose);\n      return null == e ? null : {\n        \"goog-listen-tags\": e\n      };\n    }, t.prototype.toLabel = function (t) {\n      switch (t) {\n        case yy.Listen:\n          return null;\n\n        case yy.ExistenceFilterMismatch:\n          return \"existence-filter-mismatch\";\n\n        case yy.LimboResolution:\n          return \"limbo-document\";\n\n        default:\n          return Ff(\"Unrecognized query purpose: \" + t);\n      }\n    }, t.prototype.toTarget = function (t) {\n      var e,\n          n = t.query;\n      return (e = n.isDocumentQuery() ? {\n        documents: this.toDocumentsTarget(n)\n      } : {\n        query: this.toQueryTarget(n)\n      }).targetId = t.targetId, 0 < t.resumeToken.length && (e.resumeToken = this.unsafeCastProtoByteString(t.resumeToken)), e;\n    }, t.prototype.toFilter = function (t) {\n      var e = this;\n\n      if (0 !== t.length) {\n        var n = t.map(function (t) {\n          return t instanceof _g ? e.toUnaryOrFieldFilter(t) : Ff(\"Unrecognized filter: \" + JSON.stringify(t));\n        });\n        return 1 === n.length ? n[0] : {\n          compositeFilter: {\n            op: \"AND\",\n            filters: n\n          }\n        };\n      }\n    }, t.prototype.fromFilter = function (t) {\n      var e = this;\n      return t ? void 0 !== t.unaryFilter ? [this.fromUnaryFilter(t)] : void 0 !== t.fieldFilter ? [this.fromFieldFilter(t)] : void 0 !== t.compositeFilter ? t.compositeFilter.filters.map(function (t) {\n        return e.fromFilter(t);\n      }).reduce(function (t, e) {\n        return t.concat(e);\n      }) : Ff(\"Unknown filter: \" + JSON.stringify(t)) : [];\n    }, t.prototype.toOrder = function (t) {\n      var e = this;\n      if (0 !== t.length) return t.map(function (t) {\n        return e.toPropertyOrder(t);\n      });\n    }, t.prototype.fromOrder = function (t) {\n      var e = this;\n      return t.map(function (t) {\n        return e.fromPropertyOrder(t);\n      });\n    }, t.prototype.toCursor = function (t) {\n      var e = this;\n      return {\n        before: t.before,\n        values: t.position.map(function (t) {\n          return e.toValue(t);\n        })\n      };\n    }, t.prototype.fromCursor = function (t) {\n      var e = this,\n          n = !!t.before,\n          r = t.values.map(function (t) {\n        return e.fromValue(t);\n      });\n      return new Ag(r, n);\n    }, t.prototype.toDirection = function (t) {\n      return Vg[t.name];\n    }, t.prototype.fromDirection = function (t) {\n      switch (t) {\n        case \"ASCENDING\":\n          return Ng.ASCENDING;\n\n        case \"DESCENDING\":\n          return Ng.DESCENDING;\n\n        default:\n          return;\n      }\n    }, t.prototype.toOperatorName = function (t) {\n      return Bg[t.name];\n    }, t.prototype.fromOperatorName = function (t) {\n      switch (t) {\n        case \"EQUAL\":\n          return wg.EQUAL;\n\n        case \"GREATER_THAN\":\n          return wg.GREATER_THAN;\n\n        case \"GREATER_THAN_OR_EQUAL\":\n          return wg.GREATER_THAN_OR_EQUAL;\n\n        case \"LESS_THAN\":\n          return wg.LESS_THAN;\n\n        case \"LESS_THAN_OR_EQUAL\":\n          return wg.LESS_THAN_OR_EQUAL;\n\n        case \"ARRAY_CONTAINS\":\n          return wg.ARRAY_CONTAINS;\n\n        case \"IN\":\n          return wg.IN;\n\n        case \"ARRAY_CONTAINS_ANY\":\n          return wg.ARRAY_CONTAINS_ANY;\n\n        case \"OPERATOR_UNSPECIFIED\":\n          return Ff(\"Unspecified operator\");\n\n        default:\n          return Ff(\"Unknown operator\");\n      }\n    }, t.prototype.toFieldPathReference = function (t) {\n      return {\n        fieldPath: t.canonicalString()\n      };\n    }, t.prototype.fromFieldPathReference = function (t) {\n      return Rp.fromServerFormat(t.fieldPath);\n    }, t.prototype.toPropertyOrder = function (t) {\n      return {\n        field: this.toFieldPathReference(t.field),\n        direction: this.toDirection(t.dir)\n      };\n    }, t.prototype.fromPropertyOrder = function (t) {\n      return new kg(this.fromFieldPathReference(t.field), this.fromDirection(t.direction));\n    }, t.prototype.fromFieldFilter = function (t) {\n      return _g.create(this.fromFieldPathReference(t.fieldFilter.field), this.fromOperatorName(t.fieldFilter.op), this.fromValue(t.fieldFilter.value));\n    }, t.prototype.toUnaryOrFieldFilter = function (t) {\n      if (t.op === wg.EQUAL) {\n        if (t.value.isEqual(Jy.NAN)) return {\n          unaryFilter: {\n            field: this.toFieldPathReference(t.field),\n            op: \"IS_NAN\"\n          }\n        };\n        if (t.value.isEqual(Ky.INSTANCE)) return {\n          unaryFilter: {\n            field: this.toFieldPathReference(t.field),\n            op: \"IS_NULL\"\n          }\n        };\n      }\n\n      return {\n        fieldFilter: {\n          field: this.toFieldPathReference(t.field),\n          op: this.toOperatorName(t.op),\n          value: this.toValue(t.value)\n        }\n      };\n    }, t.prototype.fromUnaryFilter = function (t) {\n      switch (t.unaryFilter.op) {\n        case \"IS_NAN\":\n          var e = this.fromFieldPathReference(t.unaryFilter.field);\n          return _g.create(e, wg.EQUAL, Jy.NAN);\n\n        case \"IS_NULL\":\n          var n = this.fromFieldPathReference(t.unaryFilter.field);\n          return _g.create(n, wg.EQUAL, Ky.INSTANCE);\n\n        case \"OPERATOR_UNSPECIFIED\":\n          return Ff(\"Unspecified filter\");\n\n        default:\n          return Ff(\"Unknown filter\");\n      }\n    }, t.prototype.toDocumentMask = function (t) {\n      var e = [];\n      return t.fields.forEach(function (t) {\n        return e.push(t.canonicalString());\n      }), {\n        fieldPaths: e\n      };\n    }, t.prototype.fromDocumentMask = function (t) {\n      var e = (t.fieldPaths || []).map(function (t) {\n        return Rp.fromServerFormat(t);\n      });\n      return am.fromArray(e);\n    }, t;\n  }(),\n      Hg = function Hg() {\n    this.listeners = [];\n  },\n      Gg = function () {\n    function t(t) {\n      this.syncEngine = t, this.queries = new qd(function (t) {\n        return t.canonicalId();\n      }), this.onlineState = Fm.Unknown, this.syncEngine.subscribe(this);\n    }\n\n    return t.prototype.listen = function (t) {\n      var e = t.query,\n          n = !1,\n          r = this.queries.get(e);\n      return r || (n = !0, r = new Hg(), this.queries.set(e, r)), r.listeners.push(t), t.applyOnlineStateChange(this.onlineState), r.viewSnap && t.onViewSnapshot(r.viewSnap), n ? this.syncEngine.listen(e).then(function (t) {\n        return r.targetId = t;\n      }) : Promise.resolve(r.targetId);\n    }, t.prototype.unlisten = function (o) {\n      return ai(this, void 0, void 0, function () {\n        var e, n, r, i;\n        return si(this, function (t) {\n          return e = o.query, n = !1, (r = this.queries.get(e)) && 0 <= (i = r.listeners.indexOf(o)) && (r.listeners.splice(i, 1), n = 0 === r.listeners.length), n ? (this.queries.delete(e), [2, this.syncEngine.unlisten(e)]) : [2];\n        });\n      });\n    }, t.prototype.onWatchChange = function (t) {\n      for (var e = 0, n = t; e < n.length; e++) {\n        var r = n[e],\n            i = r.query,\n            o = this.queries.get(i);\n\n        if (o) {\n          for (var a = 0, s = o.listeners; a < s.length; a++) {\n            s[a].onViewSnapshot(r);\n          }\n\n          o.viewSnap = r;\n        }\n      }\n    }, t.prototype.onWatchError = function (t, e) {\n      var n = this.queries.get(t);\n      if (n) for (var r = 0, i = n.listeners; r < i.length; r++) {\n        i[r].onError(e);\n      }\n      this.queries.delete(t);\n    }, t.prototype.onOnlineStateChange = function (i) {\n      this.onlineState = i, this.queries.forEach(function (t, e) {\n        for (var n = 0, r = e.listeners; n < r.length; n++) {\n          r[n].applyOnlineStateChange(i);\n        }\n      });\n    }, t;\n  }(),\n      zg = function () {\n    function t(t, e, n) {\n      this.query = t, this.queryObserver = e, this.raisedInitialEvent = !1, this.onlineState = Fm.Unknown, this.options = n || {};\n    }\n\n    return t.prototype.onViewSnapshot = function (t) {\n      if (Uf(0 < t.docChanges.length || t.syncStateChanged, \"We got a new snapshot with no changes?\"), !this.options.includeMetadataChanges) {\n        for (var e = [], n = 0, r = t.docChanges; n < r.length; n++) {\n          var i = r[n];\n          i.type !== Jm.Metadata && e.push(i);\n        }\n\n        t = new og(t.query, t.docs, t.oldDocs, e, t.mutatedKeys, t.fromCache, t.syncStateChanged, !0);\n      }\n\n      this.raisedInitialEvent ? this.shouldRaiseEvent(t) && this.queryObserver.next(t) : this.shouldRaiseInitialEvent(t, this.onlineState) && this.raiseInitialEvent(t), this.snap = t;\n    }, t.prototype.onError = function (t) {\n      this.queryObserver.error(t);\n    }, t.prototype.applyOnlineStateChange = function (t) {\n      this.onlineState = t, this.snap && !this.raisedInitialEvent && this.shouldRaiseInitialEvent(this.snap, t) && this.raiseInitialEvent(this.snap);\n    }, t.prototype.shouldRaiseInitialEvent = function (t, e) {\n      if (Uf(!this.raisedInitialEvent, \"Determining whether to raise first event but already had first event\"), !t.fromCache) return !0;\n      var n = e !== Fm.Offline;\n      return this.options.waitForSyncWhenOnline && n ? (Uf(t.fromCache, \"Waiting for sync, but snapshot is not from cache\"), !1) : !t.docs.isEmpty() || e === Fm.Offline;\n    }, t.prototype.shouldRaiseEvent = function (t) {\n      if (0 < t.docChanges.length) return !0;\n      var e = this.snap && this.snap.hasPendingWrites !== t.hasPendingWrites;\n      return !(!t.syncStateChanged && !e) && !0 === this.options.includeMetadataChanges;\n    }, t.prototype.raiseInitialEvent = function (t) {\n      Uf(!this.raisedInitialEvent, \"Trying to raise initial events for second time\"), t = og.fromInitialDocuments(t.query, t.docs, t.mutatedKeys, t.fromCache), this.raisedInitialEvent = !0, this.queryObserver.next(t);\n    }, t;\n  }(),\n      Yg = function () {\n    function s(t, e, n) {\n      this.targetId = t, this.addedKeys = e, this.removedKeys = n;\n    }\n\n    return s.fromSnapshot = function (t, e) {\n      for (var n = ad(), r = ad(), i = 0, o = e.docChanges; i < o.length; i++) {\n        var a = o[i];\n\n        switch (a.type) {\n          case Jm.Added:\n            n = n.add(a.doc.key);\n            break;\n\n          case Jm.Removed:\n            r = r.add(a.doc.key);\n        }\n      }\n\n      return new s(t, n, r);\n    }, s;\n  }(),\n      Xg = function Xg(t) {\n    this.key = t;\n  },\n      Jg = function Jg(t) {\n    this.key = t;\n  },\n      $g = function () {\n    function t(t, e) {\n      this.query = t, this._syncedDocuments = e, this.syncState = null, this.current = !1, this.limboDocuments = ad(), this.mutatedKeys = ad(), this.documentSet = new eg(t.docComparator.bind(t));\n    }\n\n    return Object.defineProperty(t.prototype, \"syncedDocuments\", {\n      get: function get() {\n        return this._syncedDocuments;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.computeDocChanges = function (t, e) {\n      var s = this,\n          u = e ? e.changeSet : new ig(),\n          c = e ? e.documentSet : this.documentSet,\n          h = e ? e.mutatedKeys : this.mutatedKeys,\n          l = c,\n          f = !1,\n          p = this.query.hasLimit() && c.size === this.query.limit ? c.last() : null;\n      if (t.inorderTraversal(function (t, e) {\n        var n = c.get(t),\n            r = e instanceof Ld ? e : null;\n        r && (Uf(t.isEqual(r.key), \"Mismatching keys found in document changes: \" + t + \" != \" + r.key), r = s.query.matches(r) ? r : null);\n        var i = !!n && s.mutatedKeys.has(n.key),\n            o = !!r && (r.hasLocalMutations || s.mutatedKeys.has(r.key) && r.hasCommittedMutations),\n            a = !1;\n        n && r ? n.data.isEqual(r.data) ? i !== o && (u.track({\n          type: Jm.Metadata,\n          doc: r\n        }), a = !0) : s.shouldWaitForSyncedDocument(n, r) || (u.track({\n          type: Jm.Modified,\n          doc: r\n        }), a = !0, p && 0 < s.query.docComparator(r, p) && (f = !0)) : !n && r ? (u.track({\n          type: Jm.Added,\n          doc: r\n        }), a = !0) : n && !r && (u.track({\n          type: Jm.Removed,\n          doc: n\n        }), a = !0, p && (f = !0));\n        a && (h = r ? (l = l.add(r), o ? h.add(t) : h.delete(t)) : (l = l.delete(t), h.delete(t)));\n      }), this.query.hasLimit()) for (; l.size > this.query.limit;) {\n        var n = l.last();\n        l = l.delete(n.key), h = h.delete(n.key), u.track({\n          type: Jm.Removed,\n          doc: n\n        });\n      }\n      return Uf(!f || !e, \"View was refilled using docs that themselves needed refilling.\"), {\n        documentSet: l,\n        changeSet: u,\n        needsRefill: f,\n        mutatedKeys: h\n      };\n    }, t.prototype.shouldWaitForSyncedDocument = function (t, e) {\n      return t.hasLocalMutations && e.hasCommittedMutations && !e.hasLocalMutations;\n    }, t.prototype.applyChanges = function (t, e, n) {\n      var o = this;\n      Uf(!t.needsRefill, \"Cannot apply changes that need a refill\");\n      var r = this.documentSet;\n      this.documentSet = t.documentSet, this.mutatedKeys = t.mutatedKeys;\n      var i = t.changeSet.getChanges();\n      i.sort(function (t, e) {\n        return n = t.type, r = e.type, (i = function i(t) {\n          switch (t) {\n            case Jm.Added:\n              return 1;\n\n            case Jm.Modified:\n            case Jm.Metadata:\n              return 2;\n\n            case Jm.Removed:\n              return 0;\n\n            default:\n              return Ff(\"Unknown ChangeType: \" + t);\n          }\n        })(n) - i(r) || o.query.docComparator(t.doc, e.doc);\n        var n, r, i;\n      }), this.applyTargetChange(n);\n      var a = e ? this.updateLimboDocuments() : [],\n          s = 0 === this.limboDocuments.size && this.current ? Zm.Synced : Zm.Local,\n          u = s !== this.syncState;\n      return this.syncState = s, 0 !== i.length || u ? {\n        snapshot: new og(this.query, t.documentSet, r, i, t.mutatedKeys, s === Zm.Local, u, !1),\n        limboChanges: a\n      } : {\n        limboChanges: a\n      };\n    }, t.prototype.applyOnlineStateChange = function (t) {\n      return this.current && t === Fm.Offline ? (this.current = !1, this.applyChanges({\n        documentSet: this.documentSet,\n        changeSet: new ig(),\n        mutatedKeys: this.mutatedKeys,\n        needsRefill: !1\n      }, !1)) : {\n        limboChanges: []\n      };\n    }, t.prototype.shouldBeInLimbo = function (t) {\n      return !this._syncedDocuments.has(t) && !!this.documentSet.has(t) && !this.documentSet.get(t).hasLocalMutations;\n    }, t.prototype.applyTargetChange = function (t) {\n      var e = this;\n      t && (t.addedDocuments.forEach(function (t) {\n        return e._syncedDocuments = e._syncedDocuments.add(t);\n      }), t.modifiedDocuments.forEach(function (t) {\n        return Uf(e._syncedDocuments.has(t), \"Modified document \" + t + \" not found in view.\");\n      }), t.removedDocuments.forEach(function (t) {\n        return e._syncedDocuments = e._syncedDocuments.delete(t);\n      }), this.current = t.current);\n    }, t.prototype.updateLimboDocuments = function () {\n      var e = this;\n      if (!this.current) return [];\n      var n = this.limboDocuments;\n      this.limboDocuments = ad(), this.documentSet.forEach(function (t) {\n        e.shouldBeInLimbo(t.key) && (e.limboDocuments = e.limboDocuments.add(t.key));\n      });\n      var r = [];\n      return n.forEach(function (t) {\n        e.limboDocuments.has(t) || r.push(new Jg(t));\n      }), this.limboDocuments.forEach(function (t) {\n        n.has(t) || r.push(new Xg(t));\n      }), r;\n    }, t.prototype.synchronizeWithPersistedState = function (t, e) {\n      this._syncedDocuments = e, this.limboDocuments = ad();\n      var n = this.computeDocChanges(t);\n      return this.applyChanges(n, !0);\n    }, t.prototype.computeInitialSnapshot = function () {\n      return og.fromInitialDocuments(this.query, this.documentSet, this.mutatedKeys, this.syncState === Zm.Local);\n    }, t;\n  }();\n\n  var Zg = \"SyncEngine\",\n      tv = function tv(t, e, n) {\n    this.query = t, this.targetId = e, this.view = n;\n  },\n      ev = function ev(t) {\n    this.key = t;\n  },\n      nv = function () {\n    function t(t, e, n, r) {\n      this.localStore = t, this.remoteStore = e, this.sharedClientState = n, this.currentUser = r, this.syncEngineListener = null, this.queryViewsByQuery = new qd(function (t) {\n        return t.canonicalId();\n      }), this.queryViewsByTarget = {}, this.limboTargetsByKey = new Hp(Op.comparator), this.limboResolutionsByTarget = {}, this.limboDocumentRefs = new mm(), this.mutationUserCallbacks = {}, this.limboTargetIdGenerator = _d.forSyncEngine(), this.isPrimary = void 0, this.onlineState = Fm.Unknown;\n    }\n\n    return Object.defineProperty(t.prototype, \"isPrimaryClient\", {\n      get: function get() {\n        return !0 === this.isPrimary;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.subscribe = function (t) {\n      Uf(null !== t, \"SyncEngine listener cannot be null\"), Uf(null === this.syncEngineListener, \"SyncEngine already has a subscriber.\"), this.syncEngineListener = t;\n    }, t.prototype.listen = function (a) {\n      return ai(this, void 0, void 0, function () {\n        var e, n, r, i, o;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.assertSubscribed(\"listen()\"), (r = this.queryViewsByQuery.get(a)) ? (e = r.targetId, this.sharedClientState.addLocalQueryTarget(e), n = r.view.computeInitialSnapshot(), [3, 4]) : [3, 1];\n\n            case 1:\n              return [4, this.localStore.allocateQuery(a)];\n\n            case 2:\n              return i = t.sent(), o = this.sharedClientState.addLocalQueryTarget(i.targetId), e = i.targetId, [4, this.initializeViewAndComputeSnapshot(i, \"current\" === o)];\n\n            case 3:\n              n = t.sent(), this.isPrimary && this.remoteStore.listen(i), t.label = 4;\n\n            case 4:\n              return this.syncEngineListener.onWatchChange([n]), [2, e];\n          }\n        });\n      });\n    }, t.prototype.initializeViewAndComputeSnapshot = function (c, h) {\n      return ai(this, void 0, void 0, function () {\n        var e, n, r, i, o, a, s, u;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return e = c.query, [4, this.localStore.executeQuery(e)];\n\n            case 1:\n              return n = t.sent(), [4, this.localStore.remoteDocumentKeys(c.targetId)];\n\n            case 2:\n              return r = t.sent(), i = new $g(e, r), o = i.computeDocChanges(n), a = sg.createSynthesizedTargetChangeForCurrentChange(c.targetId, h && this.onlineState !== Fm.Offline), Uf(0 === (s = i.applyChanges(o, !0 === this.isPrimary, a)).limboChanges.length, \"View returned limbo docs before target ack from the server.\"), Uf(!!s.snapshot, \"applyChanges for new view should always return a snapshot\"), u = new tv(e, c.targetId, i), this.queryViewsByQuery.set(e, u), this.queryViewsByTarget[c.targetId] = u, [2, s.snapshot];\n          }\n        });\n      });\n    }, t.prototype.synchronizeViewAndComputeSnapshot = function (i) {\n      return ai(this, void 0, void 0, function () {\n        var e, n, r;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, this.localStore.executeQuery(i.query)];\n\n            case 1:\n              return e = t.sent(), [4, this.localStore.remoteDocumentKeys(i.targetId)];\n\n            case 2:\n              return n = t.sent(), r = i.view.synchronizeWithPersistedState(e, n), this.isPrimary && this.updateTrackedLimbos(i.targetId, r.limboChanges), [2, r];\n          }\n        });\n      });\n    }, t.prototype.unlisten = function (r) {\n      return ai(this, void 0, void 0, function () {\n        var e,\n            n = this;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.assertSubscribed(\"unlisten()\"), Uf(!!(e = this.queryViewsByQuery.get(r)), \"Trying to unlisten on query not found:\" + r), this.isPrimary ? (this.sharedClientState.removeLocalQueryTarget(e.targetId), this.sharedClientState.isActiveQueryTarget(e.targetId) ? [3, 2] : [4, this.localStore.releaseQuery(r, !1).then(function () {\n                n.sharedClientState.clearQueryState(e.targetId), n.remoteStore.unlisten(e.targetId), n.removeAndCleanupQuery(e);\n              }).catch(Py)]) : [3, 3];\n\n            case 1:\n              t.sent(), t.label = 2;\n\n            case 2:\n              return [3, 5];\n\n            case 3:\n              return this.removeAndCleanupQuery(e), [4, this.localStore.releaseQuery(r, !0)];\n\n            case 4:\n              t.sent(), t.label = 5;\n\n            case 5:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.write = function (n, r) {\n      return ai(this, void 0, void 0, function () {\n        var e;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.assertSubscribed(\"write()\"), [4, this.localStore.localWrite(n)];\n\n            case 1:\n              return e = t.sent(), this.sharedClientState.addPendingMutation(e.batchId), this.addMutationCallback(e.batchId, r), [4, this.emitNewSnapsAndNotifyLocalStore(e.changes)];\n\n            case 2:\n              return t.sent(), [4, this.remoteStore.fillWritePipeline()];\n\n            case 3:\n              return t.sent(), [2];\n          }\n        });\n      });\n    }, t.prototype.runTransaction = function (o, a) {\n      return void 0 === a && (a = 5), ai(this, void 0, void 0, function () {\n        var e, n, r, i;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              if (Uf(0 <= a, \"Got negative number of retries for transaction.\"), e = this.remoteStore.createTransaction(), Rm(n = o(e)) || !n.catch || !n.then) return [2, Promise.reject(Error(\"Transaction callback must return a Promise\"))];\n              t.label = 1;\n\n            case 1:\n              return t.trys.push([1, 4,, 5]), [4, n];\n\n            case 2:\n              return r = t.sent(), [4, e.commit()];\n\n            case 3:\n              return t.sent(), [2, r];\n\n            case 4:\n              return i = t.sent(), 0 < a && this.isRetryableTransactionError(i) ? [2, this.runTransaction(o, a - 1)] : [2, Promise.reject(i)];\n\n            case 5:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.applyRemoteEvent = function (n) {\n      return ai(this, void 0, void 0, function () {\n        var e,\n            r = this;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              this.assertSubscribed(\"applyRemoteEvent()\"), t.label = 1;\n\n            case 1:\n              return t.trys.push([1, 4,, 6]), [4, this.localStore.applyRemoteEvent(n)];\n\n            case 2:\n              return e = t.sent(), Gf(n.targetChanges, function (t, e) {\n                var n = r.limboResolutionsByTarget[Number(t)];\n                n && (Uf(e.addedDocuments.size + e.modifiedDocuments.size + e.removedDocuments.size <= 1, \"Limbo resolution for single document contains multiple changes.\"), 0 < e.addedDocuments.size ? n.receivedDocument = !0 : 0 < e.modifiedDocuments.size ? Uf(n.receivedDocument, \"Received change for limbo target document without add.\") : 0 < e.removedDocuments.size && (Uf(n.receivedDocument, \"Received remove for limbo target document without add.\"), n.receivedDocument = !1));\n              }), [4, this.emitNewSnapsAndNotifyLocalStore(e, n)];\n\n            case 3:\n              return t.sent(), [3, 6];\n\n            case 4:\n              return [4, Py(t.sent())];\n\n            case 5:\n              return t.sent(), [3, 6];\n\n            case 6:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.applyOnlineStateChange = function (r, t) {\n      if (this.isPrimary && t === qm.RemoteStore || !this.isPrimary && t === qm.SharedClientState) {\n        var i = [];\n        this.queryViewsByQuery.forEach(function (t, e) {\n          var n = e.view.applyOnlineStateChange(r);\n          Uf(0 === n.limboChanges.length, \"OnlineState should not affect limbo documents.\"), n.snapshot && i.push(n.snapshot);\n        }), this.syncEngineListener.onOnlineStateChange(r), this.syncEngineListener.onWatchChange(i), this.onlineState = r, this.isPrimary && this.sharedClientState.setOnlineState(r);\n      }\n    }, t.prototype.rejectListen = function (u, c) {\n      return ai(this, void 0, void 0, function () {\n        var e,\n            n,\n            r,\n            i,\n            o,\n            a,\n            s = this;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.assertSubscribed(\"rejectListens()\"), this.sharedClientState.updateQueryState(u, \"rejected\", c), e = this.limboResolutionsByTarget[u], (n = e && e.key) ? (this.limboTargetsByKey = this.limboTargetsByKey.remove(n), delete this.limboResolutionsByTarget[u], r = (r = new Hp(Op.comparator)).insert(n, new Fd(n, Qp.forDeletedDoc())), i = ad().add(n), o = new ag(Qp.MIN, {}, new Xp(dp), r, i), [2, this.applyRemoteEvent(o)]) : [3, 1];\n\n            case 1:\n              return Uf(!!(a = this.queryViewsByTarget[u]), \"Unknown targetId: \" + u), [4, this.localStore.releaseQuery(a.query, !1).then(function () {\n                return s.removeAndCleanupQuery(a);\n              }).catch(Py)];\n\n            case 2:\n              t.sent(), this.syncEngineListener.onWatchError(a.query, c), t.label = 3;\n\n            case 3:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.applyBatchState = function (n, r, i) {\n      return ai(this, void 0, void 0, function () {\n        var e;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.assertSubscribed(\"applyBatchState()\"), [4, this.localStore.lookupMutationDocuments(n)];\n\n            case 1:\n              return null === (e = t.sent()) ? (xf(Zg, \"Cannot apply mutation batch with id: \" + n), [2]) : \"pending\" !== r ? [3, 3] : [4, this.remoteStore.fillWritePipeline()];\n\n            case 2:\n              return t.sent(), [3, 4];\n\n            case 3:\n              \"acknowledged\" === r || \"rejected\" === r ? (this.processUserCallback(n, i || null), this.localStore.removeCachedMutationBatchMetadata(n)) : Ff(\"Unknown batchState: \" + r), t.label = 4;\n\n            case 4:\n              return [4, this.emitNewSnapsAndNotifyLocalStore(e)];\n\n            case 5:\n              return t.sent(), [2];\n          }\n        });\n      });\n    }, t.prototype.applySuccessfulWrite = function (r) {\n      return ai(this, void 0, void 0, function () {\n        var e, n;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              this.assertSubscribed(\"applySuccessfulWrite()\"), e = r.batch.batchId, this.processUserCallback(e, null), t.label = 1;\n\n            case 1:\n              return t.trys.push([1, 4,, 6]), [4, this.localStore.acknowledgeBatch(r)];\n\n            case 2:\n              return n = t.sent(), this.sharedClientState.updateMutationState(e, \"acknowledged\"), [4, this.emitNewSnapsAndNotifyLocalStore(n)];\n\n            case 3:\n              return t.sent(), [3, 6];\n\n            case 4:\n              return [4, Py(t.sent())];\n\n            case 5:\n              return t.sent(), [3, 6];\n\n            case 6:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.rejectFailedWrite = function (n, r) {\n      return ai(this, void 0, void 0, function () {\n        var e;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              this.assertSubscribed(\"rejectFailedWrite()\"), this.processUserCallback(n, r), t.label = 1;\n\n            case 1:\n              return t.trys.push([1, 4,, 6]), [4, this.localStore.rejectBatch(n)];\n\n            case 2:\n              return e = t.sent(), this.sharedClientState.updateMutationState(n, \"rejected\", r), [4, this.emitNewSnapsAndNotifyLocalStore(e)];\n\n            case 3:\n              return t.sent(), [3, 6];\n\n            case 4:\n              return [4, Py(t.sent())];\n\n            case 5:\n              return t.sent(), [3, 6];\n\n            case 6:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.addMutationCallback = function (t, e) {\n      var n = this.mutationUserCallbacks[this.currentUser.toKey()];\n      n || (n = new Hp(dp)), n = n.insert(t, e), this.mutationUserCallbacks[this.currentUser.toKey()] = n;\n    }, t.prototype.processUserCallback = function (t, e) {\n      var n = this.mutationUserCallbacks[this.currentUser.toKey()];\n\n      if (n) {\n        var r = n.get(t);\n        r && (Uf(t === n.minKey(), \"Mutation callbacks processed out-of-order?\"), e ? r.reject(e) : r.resolve(), n = n.remove(t)), this.mutationUserCallbacks[this.currentUser.toKey()] = n;\n      }\n    }, t.prototype.removeAndCleanupQuery = function (t) {\n      var e = this;\n\n      if (this.sharedClientState.removeLocalQueryTarget(t.targetId), this.queryViewsByQuery.delete(t.query), delete this.queryViewsByTarget[t.targetId], this.isPrimary) {\n        var n = this.limboDocumentRefs.referencesForId(t.targetId);\n        this.limboDocumentRefs.removeReferencesForId(t.targetId), n.forEach(function (t) {\n          e.limboDocumentRefs.containsKey(t) || e.removeLimboTarget(t);\n        });\n      }\n    }, t.prototype.removeLimboTarget = function (t) {\n      var e = this.limboTargetsByKey.get(t);\n      null !== e && (this.remoteStore.unlisten(e), this.limboTargetsByKey = this.limboTargetsByKey.remove(t), delete this.limboResolutionsByTarget[e]);\n    }, t.prototype.updateTrackedLimbos = function (t, e) {\n      for (var n = 0, r = e; n < r.length; n++) {\n        var i = r[n];\n        if (i instanceof Xg) this.limboDocumentRefs.addReference(i.key, t), this.trackLimboChange(i);else if (i instanceof Jg) {\n          xf(Zg, \"Document no longer in limbo: \" + i.key), this.limboDocumentRefs.removeReference(i.key, t), this.limboDocumentRefs.containsKey(i.key) || this.removeLimboTarget(i.key);\n        } else Ff(\"Unknown limbo change: \" + JSON.stringify(i));\n      }\n    }, t.prototype.trackLimboChange = function (t) {\n      var e = t.key;\n\n      if (!this.limboTargetsByKey.get(e)) {\n        xf(Zg, \"New document in limbo: \" + e);\n        var n = this.limboTargetIdGenerator.next(),\n            r = vg.atPath(e.path);\n        this.limboResolutionsByTarget[n] = new ev(e), this.remoteStore.listen(new wy(r, n, yy.LimboResolution, Cp.INVALID)), this.limboTargetsByKey = this.limboTargetsByKey.insert(e, n);\n      }\n    }, t.prototype.currentLimboDocs = function () {\n      return this.limboTargetsByKey;\n    }, t.prototype.emitNewSnapsAndNotifyLocalStore = function (n, u) {\n      return ai(this, void 0, void 0, function () {\n        var o,\n            a,\n            e,\n            s = this;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return o = [], a = [], e = [], this.queryViewsByQuery.forEach(function (t, i) {\n                e.push(Promise.resolve().then(function () {\n                  var e = i.view.computeDocChanges(n);\n                  return e.needsRefill ? s.localStore.executeQuery(i.query).then(function (t) {\n                    return i.view.computeDocChanges(t, e);\n                  }) : e;\n                }).then(function (t) {\n                  var e = u && u.targetChanges[i.targetId],\n                      n = i.view.applyChanges(t, !0 === s.isPrimary, e);\n\n                  if (s.updateTrackedLimbos(i.targetId, n.limboChanges), n.snapshot) {\n                    s.isPrimary && s.sharedClientState.updateQueryState(i.targetId, n.snapshot.fromCache ? \"not-current\" : \"current\"), o.push(n.snapshot);\n                    var r = Yg.fromSnapshot(i.targetId, n.snapshot);\n                    a.push(r);\n                  }\n                }));\n              }), [4, Promise.all(e)];\n\n            case 1:\n              return t.sent(), this.syncEngineListener.onWatchChange(o), [4, this.localStore.notifyLocalViewChanges(a)];\n\n            case 2:\n              return t.sent(), [2];\n          }\n        });\n      });\n    }, t.prototype.assertSubscribed = function (t) {\n      Uf(null !== this.syncEngineListener, \"Trying to call \" + t + \" before calling subscribe().\");\n    }, t.prototype.handleCredentialChange = function (r) {\n      return ai(this, void 0, void 0, function () {\n        var e, n;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return e = !this.currentUser.isEqual(r), this.currentUser = r, e ? [4, this.localStore.handleUserChange(r)] : [3, 3];\n\n            case 1:\n              return n = t.sent(), this.sharedClientState.handleUserChange(r, n.removedBatchIds, n.addedBatchIds), [4, this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];\n\n            case 2:\n              t.sent(), t.label = 3;\n\n            case 3:\n              return [4, this.remoteStore.handleCredentialChange()];\n\n            case 4:\n              return t.sent(), [2];\n          }\n        });\n      });\n    }, t.prototype.applyPrimaryState = function (c) {\n      return ai(this, void 0, void 0, function () {\n        var e,\n            n,\n            r,\n            i,\n            o,\n            a,\n            s,\n            u = this;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return !0 !== c || !0 === this.isPrimary ? [3, 3] : (this.isPrimary = !0, [4, this.remoteStore.applyPrimaryState(!0)]);\n\n            case 1:\n              return t.sent(), e = this.sharedClientState.getAllActiveQueryTargets(), [4, this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];\n\n            case 2:\n              for (n = t.sent(), r = 0, i = n; r < i.length; r++) {\n                o = i[r], this.remoteStore.listen(o);\n              }\n\n              return [3, 7];\n\n            case 3:\n              return !1 !== c || !1 === this.isPrimary ? [3, 7] : (this.isPrimary = !1, a = [], s = Promise.resolve(), Hf(this.queryViewsByTarget, function (t, e) {\n                u.sharedClientState.isLocalQueryTarget(t) ? a.push(t) : s = s.then(function () {\n                  return u.unlisten(e.query);\n                }), u.remoteStore.unlisten(e.targetId);\n              }), [4, s]);\n\n            case 4:\n              return t.sent(), [4, this.synchronizeQueryViewsAndRaiseSnapshots(a)];\n\n            case 5:\n              return t.sent(), this.resetLimboDocuments(), [4, this.remoteStore.applyPrimaryState(!1)];\n\n            case 6:\n              t.sent(), t.label = 7;\n\n            case 7:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.resetLimboDocuments = function () {\n      var e = this;\n      Hf(this.limboResolutionsByTarget, function (t) {\n        e.remoteStore.unlisten(t);\n      }), this.limboDocumentRefs.removeAllReferences(), this.limboResolutionsByTarget = [], this.limboTargetsByKey = new Hp(Op.comparator);\n    }, t.prototype.synchronizeQueryViewsAndRaiseSnapshots = function (h) {\n      return ai(this, void 0, void 0, function () {\n        var e, n, r, i, o, a, s, u, c;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              e = [], n = [], r = 0, i = h, t.label = 1;\n\n            case 1:\n              return r < i.length ? (o = i[r], a = void 0, (s = this.queryViewsByTarget[o]) ? [4, this.localStore.releaseQuery(s.query, !0)] : [3, 5]) : [3, 11];\n\n            case 2:\n              return t.sent(), [4, this.localStore.allocateQuery(s.query)];\n\n            case 3:\n              return a = t.sent(), [4, this.synchronizeViewAndComputeSnapshot(s)];\n\n            case 4:\n              return (u = t.sent()).snapshot && n.push(u.snapshot), [3, 9];\n\n            case 5:\n              return Uf(!0 === this.isPrimary, \"A secondary tab should never have an active query without an active view.\"), [4, this.localStore.getQueryForTarget(o)];\n\n            case 6:\n              return Uf(!!(c = t.sent()), \"Query data for target \" + o + \" not found\"), [4, this.localStore.allocateQuery(c)];\n\n            case 7:\n              return a = t.sent(), [4, this.initializeViewAndComputeSnapshot(a, !1)];\n\n            case 8:\n              t.sent(), t.label = 9;\n\n            case 9:\n              e.push(a), t.label = 10;\n\n            case 10:\n              return r++, [3, 1];\n\n            case 11:\n              return this.syncEngineListener.onWatchChange(n), [2, e];\n          }\n        });\n      });\n    }, t.prototype.isRetryableTransactionError = function (t) {\n      if (\"FirebaseError\" !== t.name) return !1;\n      var e = t.code;\n      return \"aborted\" === e || \"failed-precondition\" === e || !Ym(e);\n    }, t.prototype.getActiveClients = function () {\n      return this.localStore.getActiveClients();\n    }, t.prototype.applyTargetState = function (s, u, c) {\n      return ai(this, void 0, void 0, function () {\n        var n, r, i, o, a;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              if (this.isPrimary) return xf(Zg, \"Ignoring unexpected query state notification.\"), [2];\n              if (!this.queryViewsByTarget[s]) return [3, 11];\n\n              switch (u) {\n                case \"current\":\n                case \"not-current\":\n                  return [3, 1];\n\n                case \"rejected\":\n                  return [3, 8];\n              }\n\n              return [3, 10];\n\n            case 1:\n              return t.trys.push([1, 4,, 8]), [4, this.localStore.getNewDocumentChanges()];\n\n            case 2:\n              return n = t.sent(), r = ag.createSynthesizedRemoteEventForCurrentChange(s, \"current\" === u), [4, this.emitNewSnapsAndNotifyLocalStore(n, r)];\n\n            case 3:\n              return t.sent(), [3, 11];\n\n            case 4:\n              return i = t.sent(), (e = i).code !== Bf.DATA_LOSS || e.message !== Bd ? [3, 6] : (o = [], Hf(this.queryViewsByTarget, function (t) {\n                return o.push(t);\n              }), [4, this.synchronizeQueryViewsAndRaiseSnapshots(o)]);\n\n            case 5:\n              return t.sent(), [3, 7];\n\n            case 6:\n              throw i;\n\n            case 7:\n              return [3, 8];\n\n            case 8:\n              return a = this.queryViewsByTarget[s], this.removeAndCleanupQuery(a), [4, this.localStore.releaseQuery(a.query, !0)];\n\n            case 9:\n              return t.sent(), this.syncEngineListener.onWatchError(a.query, c), [3, 11];\n\n            case 10:\n              Ff(\"Unexpected target state: \" + u), t.label = 11;\n\n            case 11:\n              return [2];\n          }\n\n          var e;\n        });\n      });\n    }, t.prototype.applyActiveTargetsChange = function (l, f) {\n      return ai(this, void 0, void 0, function () {\n        var e,\n            n,\n            r,\n            i,\n            o,\n            a,\n            s,\n            u,\n            c,\n            h = this;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              if (!this.isPrimary) return [2];\n              e = 0, n = l, t.label = 1;\n\n            case 1:\n              return e < n.length ? (c = n[e], Uf(!this.queryViewsByTarget[c], \"Trying to add an already active target\"), [4, this.localStore.getQueryForTarget(c)]) : [3, 6];\n\n            case 2:\n              return Uf(!!(r = t.sent()), \"Query data for active target \" + c + \" not found\"), [4, this.localStore.allocateQuery(r)];\n\n            case 3:\n              return i = t.sent(), [4, this.initializeViewAndComputeSnapshot(i, !1)];\n\n            case 4:\n              t.sent(), this.remoteStore.listen(i), t.label = 5;\n\n            case 5:\n              return e++, [3, 1];\n\n            case 6:\n              o = function o(e) {\n                var n;\n                return si(this, function (t) {\n                  switch (t.label) {\n                    case 0:\n                      return (n = a.queryViewsByTarget[e]) ? [4, a.localStore.releaseQuery(n.query, !1).then(function () {\n                        h.remoteStore.unlisten(e), h.removeAndCleanupQuery(n);\n                      }).catch(Py)] : [3, 2];\n\n                    case 1:\n                      t.sent(), t.label = 2;\n\n                    case 2:\n                      return [2];\n                  }\n                });\n              }, a = this, s = 0, u = f, t.label = 7;\n\n            case 7:\n              return s < u.length ? (c = u[s], [5, o(c)]) : [3, 10];\n\n            case 8:\n              t.sent(), t.label = 9;\n\n            case 9:\n              return s++, [3, 7];\n\n            case 10:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.enableNetwork = function () {\n      return this.localStore.setNetworkEnabled(!0), this.remoteStore.enableNetwork();\n    }, t.prototype.disableNetwork = function () {\n      return this.localStore.setNetworkEnabled(!1), this.remoteStore.disableNetwork();\n    }, t.prototype.getRemoteKeysForTarget = function (t) {\n      var e = this.limboResolutionsByTarget[t];\n      return e && e.receivedDocument ? ad().add(e.key) : this.queryViewsByTarget[t] ? this.queryViewsByTarget[t].view.syncedDocuments : ad();\n    }, t;\n  }(),\n      rv = function () {\n    function t(t) {\n      this.uid = t;\n    }\n\n    return t.prototype.isAuthenticated = function () {\n      return null != this.uid;\n    }, t.prototype.toKey = function () {\n      return this.isAuthenticated() ? \"uid:\" + this.uid : \"anonymous-user\";\n    }, t.prototype.isEqual = function (t) {\n      return t.uid === this.uid;\n    }, t.UNAUTHENTICATED = new t(null), t.GOOGLE_CREDENTIALS = new t(\"google-credentials-uid\"), t.FIRST_PARTY = new t(\"first-party-uid\"), t;\n  }(),\n      iv = \"SharedClientState\",\n      ov = \"firestore_clients\",\n      av = \"firestore_mutations\",\n      sv = \"firestore_targets\",\n      uv = function () {\n    function a(t, e, n, r) {\n      this.user = t, this.batchId = e, this.state = n, Uf(void 0 !== (this.error = r) == (\"rejected\" === n), \"MutationMetadata must contain an error iff state is 'rejected'\");\n    }\n\n    return a.fromWebStorageEntry = function (t, e, n) {\n      var r = JSON.parse(n),\n          i = \"object\" == typeof r && -1 !== [\"pending\", \"acknowledged\", \"rejected\"].indexOf(r.state) && (void 0 === r.error || \"object\" == typeof r.error),\n          o = void 0;\n      return i && r.error && (i = \"string\" == typeof r.error.message && \"string\" == typeof r.error.code) && (o = new jf(r.error.code, r.error.message)), i ? new a(t, e, r.state, o) : (Mf(iv, \"Failed to parse mutation state for ID '\" + e + \"': \" + n), null);\n    }, a.prototype.toWebStorageJSON = function () {\n      var t = {\n        state: this.state,\n        updateTimeMs: Date.now()\n      };\n      return this.error && (t.error = {\n        code: this.error.code,\n        message: this.error.message\n      }), JSON.stringify(t);\n    }, a;\n  }(),\n      cv = function () {\n    function o(t, e, n) {\n      this.targetId = t, this.state = e, Uf(void 0 !== (this.error = n) == (\"rejected\" === e), \"QueryTargetMetadata must contain an error iff state is 'rejected'\");\n    }\n\n    return o.fromWebStorageEntry = function (t, e) {\n      var n = JSON.parse(e),\n          r = \"object\" == typeof n && -1 !== [\"not-current\", \"current\", \"rejected\"].indexOf(n.state) && (void 0 === n.error || \"object\" == typeof n.error),\n          i = void 0;\n      return r && n.error && (r = \"string\" == typeof n.error.message && \"string\" == typeof n.error.code) && (i = new jf(n.error.code, n.error.message)), r ? new o(t, n.state, i) : (Mf(iv, \"Failed to parse target state for ID '\" + t + \"': \" + e), null);\n    }, o.prototype.toWebStorageJSON = function () {\n      var t = {\n        state: this.state,\n        updateTimeMs: Date.now()\n      };\n      return this.error && (t.error = {\n        code: this.error.code,\n        message: this.error.message\n      }), JSON.stringify(t);\n    }, o;\n  }(),\n      hv = function () {\n    function a(t, e) {\n      this.clientId = t, this.activeTargetIds = e;\n    }\n\n    return a.fromWebStorageEntry = function (t, e) {\n      for (var n = JSON.parse(e), r = \"object\" == typeof n && n.activeTargetIds instanceof Array, i = ud(), o = 0; r && o < n.activeTargetIds.length; ++o) {\n        r = Om(n.activeTargetIds[o]), i = i.add(n.activeTargetIds[o]);\n      }\n\n      return r ? new a(t, i) : (Mf(iv, \"Failed to parse client data for instance '\" + t + \"': \" + e), null);\n    }, a;\n  }(),\n      lv = function () {\n    function n(t, e) {\n      this.clientId = t, this.onlineState = e;\n    }\n\n    return n.fromWebStorageEntry = function (t) {\n      var e = JSON.parse(t);\n      return \"object\" == typeof e && e.onlineState in Fm && \"string\" == typeof e.clientId ? new n(e.clientId, Fm[e.onlineState]) : (Mf(iv, \"Failed to parse online state: \" + t), null);\n    }, n;\n  }(),\n      fv = function () {\n    function t() {\n      this.activeTargetIds = ud();\n    }\n\n    return t.prototype.addQueryTarget = function (t) {\n      Uf(!this.activeTargetIds.has(t), \"Target with ID '\" + t + \"' already active.\"), this.activeTargetIds = this.activeTargetIds.add(t);\n    }, t.prototype.removeQueryTarget = function (t) {\n      this.activeTargetIds = this.activeTargetIds.delete(t);\n    }, t.prototype.toWebStorageJSON = function () {\n      var t = {\n        activeTargetIds: this.activeTargetIds.toArray(),\n        updateTimeMs: Date.now()\n      };\n      return JSON.stringify(t);\n    }, t;\n  }(),\n      pv = function () {\n    function a(t, e, n, r, i) {\n      if (this.queue = t, this.platform = e, this.persistenceKey = n, this.localClientId = r, this.syncEngine = null, this.onlineStateHandler = null, this.sequenceNumberHandler = null, this.activeClients = {}, this.storageListener = this.handleWebStorageEvent.bind(this), this.started = !1, this.earlyEvents = [], !a.isAvailable(this.platform)) throw new jf(Bf.UNIMPLEMENTED, \"LocalStorage is not available on this platform.\");\n      var o = n.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n      this.storage = this.platform.window.localStorage, this.currentUser = i, this.localClientStorageKey = this.toWebStorageClientStateKey(this.localClientId), this.sequenceNumberKey = \"firestore_sequence_number_\" + n, this.activeClients[this.localClientId] = new fv(), this.clientStateKeyRe = new RegExp(\"^\" + ov + \"_\" + o + \"_([^_]*)$\"), this.mutationBatchKeyRe = new RegExp(\"^\" + av + \"_\" + o + \"_(\\\\d+)(?:_(.*))?$\"), this.queryTargetKeyRe = new RegExp(\"^\" + sv + \"_\" + o + \"_(\\\\d+)$\"), this.onlineStateKey = \"firestore_online_state_\" + n, this.platform.window.addEventListener(\"storage\", this.storageListener);\n    }\n\n    return a.isAvailable = function (t) {\n      return !(!t.window || null == t.window.localStorage);\n    }, a.prototype.start = function () {\n      return ai(this, void 0, void 0, function () {\n        var e,\n            n,\n            r,\n            i,\n            o,\n            a,\n            s,\n            u,\n            c,\n            h,\n            l,\n            f = this;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return Uf(!this.started, \"WebStorageSharedClientState already started\"), Uf(null !== this.syncEngine, \"syncEngine property must be set before calling start()\"), Uf(null !== this.onlineStateHandler, \"onlineStateHandler property must be set before calling start()\"), [4, this.syncEngine.getActiveClients()];\n\n            case 1:\n              for (e = t.sent(), n = 0, r = e; n < r.length; n++) {\n                (i = r[n]) !== this.localClientId && (o = this.getItem(this.toWebStorageClientStateKey(i))) && (a = hv.fromWebStorageEntry(i, o)) && (this.activeClients[a.clientId] = a);\n              }\n\n              for (this.persistClientState(), (s = this.storage.getItem(this.onlineStateKey)) && (u = this.fromWebStorageOnlineState(s)) && this.handleOnlineStateEvent(u), c = 0, h = this.earlyEvents; c < h.length; c++) {\n                l = h[c], this.handleWebStorageEvent(l);\n              }\n\n              return this.earlyEvents = [], this.platform.window.addEventListener(\"unload\", function () {\n                return f.shutdown();\n              }), this.started = !0, [2];\n          }\n        });\n      });\n    }, a.prototype.writeSequenceNumber = function (t) {\n      this.setItem(this.sequenceNumberKey, JSON.stringify(t));\n    }, a.prototype.getAllActiveQueryTargets = function () {\n      var n = ud();\n      return Gf(this.activeClients, function (t, e) {\n        n = n.unionWith(e.activeTargetIds);\n      }), n;\n    }, a.prototype.isActiveQueryTarget = function (t) {\n      for (var e in this.activeClients) {\n        if (this.activeClients.hasOwnProperty(e) && this.activeClients[e].activeTargetIds.has(t)) return !0;\n      }\n\n      return !1;\n    }, a.prototype.addPendingMutation = function (t) {\n      this.persistMutationState(t, \"pending\");\n    }, a.prototype.updateMutationState = function (t, e, n) {\n      this.persistMutationState(t, e, n), this.removeMutationState(t);\n    }, a.prototype.addLocalQueryTarget = function (t) {\n      var e = \"not-current\";\n\n      if (this.isActiveQueryTarget(t)) {\n        var n = this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(t));\n\n        if (n) {\n          var r = cv.fromWebStorageEntry(t, n);\n          r && (e = r.state);\n        }\n      }\n\n      return this.localClientState.addQueryTarget(t), this.persistClientState(), e;\n    }, a.prototype.removeLocalQueryTarget = function (t) {\n      this.localClientState.removeQueryTarget(t), this.persistClientState();\n    }, a.prototype.isLocalQueryTarget = function (t) {\n      return this.localClientState.activeTargetIds.has(t);\n    }, a.prototype.clearQueryState = function (t) {\n      this.removeItem(this.toWebStorageQueryTargetMetadataKey(t));\n    }, a.prototype.updateQueryState = function (t, e, n) {\n      this.persistQueryTargetState(t, e, n);\n    }, a.prototype.handleUserChange = function (t, e, n) {\n      var r = this;\n      e.forEach(function (t) {\n        r.removeMutationState(t);\n      }), this.currentUser = t, n.forEach(function (t) {\n        r.addPendingMutation(t);\n      });\n    }, a.prototype.setOnlineState = function (t) {\n      this.persistOnlineState(t);\n    }, a.prototype.shutdown = function () {\n      this.started && (this.platform.window.removeEventListener(\"storage\", this.storageListener), this.removeItem(this.localClientStorageKey), this.started = !1);\n    }, a.prototype.getItem = function (t) {\n      var e = this.storage.getItem(t);\n      return xf(iv, \"READ\", t, e), e;\n    }, a.prototype.setItem = function (t, e) {\n      xf(iv, \"SET\", t, e), this.storage.setItem(t, e);\n    }, a.prototype.removeItem = function (t) {\n      xf(iv, \"REMOVE\", t), this.storage.removeItem(t);\n    }, a.prototype.handleWebStorageEvent = function (s) {\n      var t = this;\n\n      if (s.storageArea === this.storage) {\n        if (xf(iv, \"EVENT\", s.key, s.newValue), s.key === this.localClientStorageKey) return void Mf(\"Received WebStorage notification for local change. Another client might have garbage-collected our state\");\n        this.queue.enqueueAndForget(function () {\n          return ai(t, void 0, void 0, function () {\n            var e, n, r, i, o, a;\n            return si(this, function (t) {\n              if (!this.started) return this.earlyEvents.push(s), [2];\n              if (null === s.key) return [2];\n\n              if (this.clientStateKeyRe.test(s.key)) {\n                if (null == s.newValue) return n = this.fromWebStorageClientStateKey(s.key), [2, this.handleClientStateEvent(n, null)];\n                if (e = this.fromWebStorageClientState(s.key, s.newValue)) return [2, this.handleClientStateEvent(e.clientId, e)];\n              } else if (this.mutationBatchKeyRe.test(s.key)) {\n                if (null !== s.newValue && (r = this.fromWebStorageMutationMetadata(s.key, s.newValue))) return [2, this.handleMutationBatchEvent(r)];\n              } else if (this.queryTargetKeyRe.test(s.key)) {\n                if (null !== s.newValue && (i = this.fromWebStorageQueryTargetMetadata(s.key, s.newValue))) return [2, this.handleQueryTargetEvent(i)];\n              } else if (s.key === this.onlineStateKey) {\n                if (null !== s.newValue && (o = this.fromWebStorageOnlineState(s.newValue))) return [2, this.handleOnlineStateEvent(o)];\n              } else s.key === this.sequenceNumberKey && (Uf(!!this.sequenceNumberHandler, \"Missing sequenceNumberHandler\"), (a = function (t) {\n                var e = Cp.INVALID;\n                if (null != t) try {\n                  var n = JSON.parse(t);\n                  Uf(\"number\" == typeof n, \"Found non-numeric sequence number\"), e = n;\n                } catch (t) {\n                  Mf(iv, \"Failed to read sequence number from WebStorage\", t);\n                }\n                return e;\n              }(s.newValue)) !== Cp.INVALID && this.sequenceNumberHandler(a));\n\n              return [2];\n            });\n          });\n        });\n      }\n    }, Object.defineProperty(a.prototype, \"localClientState\", {\n      get: function get() {\n        return this.activeClients[this.localClientId];\n      },\n      enumerable: !0,\n      configurable: !0\n    }), a.prototype.persistClientState = function () {\n      this.setItem(this.localClientStorageKey, this.localClientState.toWebStorageJSON());\n    }, a.prototype.persistMutationState = function (t, e, n) {\n      var r = new uv(this.currentUser, t, e, n),\n          i = this.toWebStorageMutationBatchKey(t);\n      this.setItem(i, r.toWebStorageJSON());\n    }, a.prototype.removeMutationState = function (t) {\n      var e = this.toWebStorageMutationBatchKey(t);\n      this.removeItem(e);\n    }, a.prototype.persistOnlineState = function (t) {\n      var e = {\n        clientId: this.localClientId,\n        onlineState: Fm[t]\n      };\n      this.storage.setItem(this.onlineStateKey, JSON.stringify(e));\n    }, a.prototype.persistQueryTargetState = function (t, e, n) {\n      var r = this.toWebStorageQueryTargetMetadataKey(t),\n          i = new cv(t, e, n);\n      this.setItem(r, i.toWebStorageJSON());\n    }, a.prototype.toWebStorageClientStateKey = function (t) {\n      return Uf(-1 === t.indexOf(\"_\"), \"Client key cannot contain '_', but was '\" + t + \"'\"), ov + \"_\" + this.persistenceKey + \"_\" + t;\n    }, a.prototype.toWebStorageQueryTargetMetadataKey = function (t) {\n      return sv + \"_\" + this.persistenceKey + \"_\" + t;\n    }, a.prototype.toWebStorageMutationBatchKey = function (t) {\n      var e = av + \"_\" + this.persistenceKey + \"_\" + t;\n      return this.currentUser.isAuthenticated() && (e += \"_\" + this.currentUser.uid), e;\n    }, a.prototype.fromWebStorageClientStateKey = function (t) {\n      var e = this.clientStateKeyRe.exec(t);\n      return e ? e[1] : null;\n    }, a.prototype.fromWebStorageClientState = function (t, e) {\n      var n = this.fromWebStorageClientStateKey(t);\n      return Uf(null !== n, \"Cannot parse client state key '\" + t + \"'\"), hv.fromWebStorageEntry(n, e);\n    }, a.prototype.fromWebStorageMutationMetadata = function (t, e) {\n      var n = this.mutationBatchKeyRe.exec(t);\n      Uf(null !== n, \"Cannot parse mutation batch key '\" + t + \"'\");\n      var r = Number(n[1]),\n          i = void 0 !== n[2] ? n[2] : null;\n      return uv.fromWebStorageEntry(new rv(i), r, e);\n    }, a.prototype.fromWebStorageQueryTargetMetadata = function (t, e) {\n      var n = this.queryTargetKeyRe.exec(t);\n      Uf(null !== n, \"Cannot parse query target key '\" + t + \"'\");\n      var r = Number(n[1]);\n      return cv.fromWebStorageEntry(r, e);\n    }, a.prototype.fromWebStorageOnlineState = function (t) {\n      return lv.fromWebStorageEntry(t);\n    }, a.prototype.handleMutationBatchEvent = function (e) {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          return e.user.uid !== this.currentUser.uid ? (xf(iv, \"Ignoring mutation for non-active user \" + e.user.uid), [2]) : [2, this.syncEngine.applyBatchState(e.batchId, e.state, e.error)];\n        });\n      });\n    }, a.prototype.handleQueryTargetEvent = function (t) {\n      return this.syncEngine.applyTargetState(t.targetId, t.state, t.error);\n    }, a.prototype.handleClientStateEvent = function (t, e) {\n      var n = this,\n          r = this.getAllActiveQueryTargets();\n      e ? this.activeClients[t] = e : delete this.activeClients[t];\n      var i = this.getAllActiveQueryTargets(),\n          o = [],\n          a = [];\n      return i.forEach(function (e) {\n        return ai(n, void 0, void 0, function () {\n          return si(this, function (t) {\n            return r.has(e) || o.push(e), [2];\n          });\n        });\n      }), r.forEach(function (e) {\n        return ai(n, void 0, void 0, function () {\n          return si(this, function (t) {\n            return i.has(e) || a.push(e), [2];\n          });\n        });\n      }), this.syncEngine.applyActiveTargetsChange(o, a);\n    }, a.prototype.handleOnlineStateEvent = function (t) {\n      this.activeClients[t.clientId] && this.onlineStateHandler(t.onlineState);\n    }, a;\n  }();\n\n  var dv = function () {\n    function t() {\n      this.localState = new fv(), this.queryState = {}, this.syncEngine = null, this.onlineStateHandler = null, this.sequenceNumberHandler = null;\n    }\n\n    return t.prototype.addPendingMutation = function (t) {}, t.prototype.updateMutationState = function (t, e, n) {}, t.prototype.addLocalQueryTarget = function (t) {\n      return this.localState.addQueryTarget(t), this.queryState[t] || \"not-current\";\n    }, t.prototype.updateQueryState = function (t, e, n) {\n      this.queryState[t] = e;\n    }, t.prototype.removeLocalQueryTarget = function (t) {\n      this.localState.removeQueryTarget(t);\n    }, t.prototype.isLocalQueryTarget = function (t) {\n      return this.localState.activeTargetIds.has(t);\n    }, t.prototype.clearQueryState = function (t) {\n      delete this.queryState[t];\n    }, t.prototype.getAllActiveQueryTargets = function () {\n      return this.localState.activeTargetIds;\n    }, t.prototype.isActiveQueryTarget = function (t) {\n      return this.localState.activeTargetIds.has(t);\n    }, t.prototype.start = function () {\n      return this.localState = new fv(), Promise.resolve();\n    }, t.prototype.handleUserChange = function (t, e, n) {}, t.prototype.setOnlineState = function (t) {}, t.prototype.shutdown = function () {}, t.prototype.writeSequenceNumber = function (t) {}, t;\n  }(),\n      yv = \"FirestoreClient\",\n      mv = function () {\n    function t(t, e) {\n      this.cacheSizeBytes = t, this.synchronizeTabs = e;\n    }\n\n    return t.prototype.lruParams = function () {\n      return Iy.withCacheSize(this.cacheSizeBytes);\n    }, t;\n  }(),\n      gv = function gv() {},\n      vv = function () {\n    function t(t, e, n, r) {\n      this.platform = t, this.databaseInfo = e, this.credentials = n, this.asyncQueue = r, this.clientId = pp.newId(), this._clientShutdown = !1;\n    }\n\n    return t.prototype.start = function (t) {\n      var n = this;\n      this.verifyNotShutdown();\n      var r = new Pp(),\n          i = new Pp(),\n          o = !1;\n      return this.credentials.setChangeListener(function (e) {\n        o ? n.asyncQueue.enqueueAndForget(function () {\n          return n.handleCredentialChange(e);\n        }) : (o = !0, n.initializePersistence(t, i, e).then(function (t) {\n          return n.initializeRest(e, t);\n        }).then(r.resolve, r.reject));\n      }), this.asyncQueue.enqueueAndForget(function () {\n        return r.promise;\n      }), i.promise;\n    }, t.prototype.enableNetwork = function () {\n      var t = this;\n      return this.verifyNotShutdown(), this.asyncQueue.enqueue(function () {\n        return t.syncEngine.enableNetwork();\n      });\n    }, t.prototype.initializePersistence = function (t, e, n) {\n      var r = this;\n      return t instanceof mv ? this.startIndexedDbPersistence(n, t).then(function (t) {\n        return e.resolve(), t;\n      }).catch(function (t) {\n        if (e.reject(t), !r.canFallback(t)) throw t;\n        return console.warn(\"Error enabling offline persistence. Falling back to persistence disabled: \" + t), r.startMemoryPersistence();\n      }) : (e.resolve(), this.startMemoryPersistence());\n    }, t.prototype.canFallback = function (t) {\n      return t instanceof jf ? t.code === Bf.FAILED_PRECONDITION || t.code === Bf.UNIMPLEMENTED : !(\"undefined\" != typeof DOMException && t instanceof DOMException) || 22 === t.code || 20 === t.code || 11 === t.code;\n    }, t.prototype.verifyNotShutdown = function () {\n      if (this._clientShutdown) throw new jf(Bf.FAILED_PRECONDITION, \"The client has already been shutdown.\");\n    }, t.prototype.startIndexedDbPersistence = function (r, i) {\n      var t = this,\n          o = Oy.buildStoragePrefix(this.databaseInfo),\n          a = new Qg(this.databaseInfo.databaseId, {\n        useProto3Json: !0\n      });\n      return Promise.resolve().then(function () {\n        return ai(t, void 0, void 0, function () {\n          var e, n;\n          return si(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (i.synchronizeTabs && !pv.isAvailable(this.platform)) throw new jf(Bf.UNIMPLEMENTED, \"IndexedDB persistence is only available on platforms that support LocalStorage.\");\n                return n = i.lruParams(), i.synchronizeTabs ? (this.sharedClientState = new pv(this.asyncQueue, this.platform, o, this.clientId, r), [4, Oy.createMultiClientIndexedDbPersistence(o, this.clientId, this.platform, this.asyncQueue, a, n, {\n                  sequenceNumberSyncer: this.sharedClientState\n                })]) : [3, 2];\n\n              case 1:\n                return e = t.sent(), [3, 4];\n\n              case 2:\n                return this.sharedClientState = new dv(), [4, Oy.createIndexedDbPersistence(o, this.clientId, this.platform, this.asyncQueue, a, n)];\n\n              case 3:\n                e = t.sent(), t.label = 4;\n\n              case 4:\n                return [2, (this.persistence = e).referenceDelegate.garbageCollector];\n            }\n          });\n        });\n      });\n    }, t.prototype.startMemoryPersistence = function () {\n      return this.persistence = Tm.createEagerPersistence(this.clientId), this.sharedClientState = new dv(), Promise.resolve(null);\n    }, t.prototype.initializeRest = function (u, c) {\n      var t = this;\n      return xf(yv, \"Initializing. user=\", u.uid), this.platform.loadConnection(this.databaseInfo).then(function (s) {\n        return ai(t, void 0, void 0, function () {\n          var e,\n              n,\n              r,\n              i,\n              o,\n              a = this;\n          return si(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.localStore = new vm(this.persistence, u), c && (this.lruScheduler = new Cy(c, this.asyncQueue, this.localStore)), e = this.platform.newConnectivityMonitor(), n = this.platform.newSerializer(this.databaseInfo.databaseId), r = new Km(this.asyncQueue, s, this.credentials, n), i = function i(t) {\n                  return a.syncEngine.applyOnlineStateChange(t, qm.RemoteStore);\n                }, o = function o(t) {\n                  return a.syncEngine.applyOnlineStateChange(t, qm.SharedClientState);\n                }, this.remoteStore = new mg(this.localStore, r, this.asyncQueue, i, e), this.syncEngine = new nv(this.localStore, this.remoteStore, this.sharedClientState, u), this.sharedClientState.onlineStateHandler = o, this.remoteStore.syncEngine = this.syncEngine, this.sharedClientState.syncEngine = this.syncEngine, this.eventMgr = new Gg(this.syncEngine), [4, this.sharedClientState.start()];\n\n              case 1:\n                return t.sent(), [4, this.remoteStore.start()];\n\n              case 2:\n                return t.sent(), [4, this.persistence.setPrimaryStateListener(function (e) {\n                  return ai(a, void 0, void 0, function () {\n                    return si(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return [4, this.syncEngine.applyPrimaryState(e)];\n\n                        case 1:\n                          return t.sent(), this.lruScheduler && (e && !this.lruScheduler.started ? this.lruScheduler.start() : e || this.lruScheduler.stop()), [2];\n                      }\n                    });\n                  });\n                })];\n\n              case 3:\n                return t.sent(), [4, this.persistence.setDatabaseDeletedListener(function () {\n                  return ai(a, void 0, void 0, function () {\n                    return si(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return [4, this.shutdown()];\n\n                        case 1:\n                          return t.sent(), [2];\n                      }\n                    });\n                  });\n                })];\n\n              case 4:\n                return t.sent(), [2];\n            }\n          });\n        });\n      });\n    }, t.prototype.handleCredentialChange = function (t) {\n      return this.asyncQueue.verifyOperationInProgress(), xf(yv, \"Credential Changed. Current user: \" + t.uid), this.syncEngine.handleCredentialChange(t);\n    }, t.prototype.disableNetwork = function () {\n      var t = this;\n      return this.verifyNotShutdown(), this.asyncQueue.enqueue(function () {\n        return t.syncEngine.disableNetwork();\n      });\n    }, t.prototype.shutdown = function () {\n      var t = this;\n      return this.asyncQueue.enqueue(function () {\n        return ai(t, void 0, void 0, function () {\n          return si(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this._clientShutdown ? [3, 4] : (this.lruScheduler && this.lruScheduler.stop(), [4, this.remoteStore.shutdown()]);\n\n              case 1:\n                return t.sent(), [4, this.sharedClientState.shutdown()];\n\n              case 2:\n                return t.sent(), [4, this.persistence.shutdown()];\n\n              case 3:\n                t.sent(), this.credentials.removeChangeListener(), this._clientShutdown = !0, t.label = 4;\n\n              case 4:\n                return [2];\n            }\n          });\n        });\n      });\n    }, t.prototype.listen = function (t, e, n) {\n      var r = this;\n      this.verifyNotShutdown();\n      var i = new zg(t, e, n);\n      return this.asyncQueue.enqueueAndForget(function () {\n        return r.eventMgr.listen(i);\n      }), i;\n    }, t.prototype.unlisten = function (t) {\n      var e = this;\n      this.verifyNotShutdown(), this.asyncQueue.enqueueAndForget(function () {\n        return e.eventMgr.unlisten(t);\n      });\n    }, t.prototype.getDocumentFromLocalCache = function (t) {\n      var e = this;\n      return this.verifyNotShutdown(), this.asyncQueue.enqueue(function () {\n        return e.localStore.readDocument(t);\n      }).then(function (t) {\n        if (t instanceof Ld) return t;\n        if (t instanceof Fd) return null;\n        throw new jf(Bf.UNAVAILABLE, \"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)\");\n      });\n    }, t.prototype.getDocumentsFromLocalCache = function (i) {\n      var t = this;\n      return this.verifyNotShutdown(), this.asyncQueue.enqueue(function () {\n        return t.localStore.executeQuery(i);\n      }).then(function (t) {\n        var e = ad(),\n            n = new $g(i, e),\n            r = n.computeDocChanges(t);\n        return n.applyChanges(r, !1).snapshot;\n      });\n    }, t.prototype.write = function (t) {\n      var e = this;\n      this.verifyNotShutdown();\n      var n = new Pp();\n      return this.asyncQueue.enqueueAndForget(function () {\n        return e.syncEngine.write(t, n);\n      }), n.promise;\n    }, t.prototype.databaseId = function () {\n      return this.databaseInfo.databaseId;\n    }, Object.defineProperty(t.prototype, \"clientShutdown\", {\n      get: function get() {\n        return this._clientShutdown;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.transaction = function (t) {\n      var e = this;\n      return this.verifyNotShutdown(), this.asyncQueue.enqueue(function () {\n        return ai(e, void 0, void 0, function () {\n          return si(this, function (t) {\n            return [2];\n          });\n        });\n      }).then(function () {\n        return e.syncEngine.runTransaction(t);\n      });\n    }, t;\n  }(),\n      bv = function () {\n    function t(t) {\n      this.observer = t, this.muted = !1;\n    }\n\n    return t.prototype.next = function (t) {\n      this.scheduleEvent(this.observer.next, t);\n    }, t.prototype.error = function (t) {\n      this.scheduleEvent(this.observer.error, t);\n    }, t.prototype.mute = function () {\n      this.muted = !0;\n    }, t.prototype.scheduleEvent = function (t, e) {\n      var n = this;\n      this.muted || setTimeout(function () {\n        n.muted || t(e);\n      }, 0);\n    }, t;\n  }(),\n      wv = function () {\n    function e() {\n      for (var t = [], e = 0; e < arguments.length; e++) {\n        t[e] = arguments[e];\n      }\n\n      !function (t, e, n, r) {\n        if (!(e instanceof Array) || e.length < r) throw new jf(Bf.INVALID_ARGUMENT, \"Function \" + t + \"() requires its \" + n + \" argument to be an array with at least \" + fp(r, \"element\") + \".\");\n      }(\"FieldPath\", t, \"fieldNames\", 1);\n\n      for (var n = 0; n < t.length; ++n) {\n        if (Zf(\"FieldPath\", \"string\", n, t[n]), 0 === t[n].length) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid field name at argument $(i + 1). Field names must not be empty.\");\n      }\n\n      this._internalPath = new Rp(t);\n    }\n\n    return e.documentId = function () {\n      return e._DOCUMENT_ID;\n    }, e.prototype.isEqual = function (t) {\n      if (!(t instanceof e)) throw hp(\"isEqual\", \"FieldPath\", 1, t);\n      return this._internalPath.isEqual(t._internalPath);\n    }, e._DOCUMENT_ID = new e(Rp.keyField().canonicalString()), e;\n  }(),\n      _v = new RegExp(\"[~\\\\*/\\\\[\\\\]]\");\n\n  var Ev = function Ev(t, e) {\n    this.user = e, this.type = \"OAuth\", this.authHeaders = {\n      Authorization: \"Bearer \" + t\n    };\n  },\n      Tv = function () {\n    function t() {\n      this.changeListener = null;\n    }\n\n    return t.prototype.getToken = function () {\n      return Promise.resolve(null);\n    }, t.prototype.invalidateToken = function () {}, t.prototype.setChangeListener = function (t) {\n      Uf(!this.changeListener, \"Can only call setChangeListener() once.\"), (this.changeListener = t)(rv.UNAUTHENTICATED);\n    }, t.prototype.removeChangeListener = function () {\n      Uf(null !== this.changeListener, \"removeChangeListener() when no listener registered\"), this.changeListener = null;\n    }, t;\n  }(),\n      Sv = function () {\n    function t(t) {\n      var e = this;\n      this.app = t, this.tokenListener = null, this.tokenCounter = 0, this.changeListener = null, this.forceRefresh = !1, this.tokenListener = function () {\n        e.tokenCounter++, e.currentUser = e.getUser(), e.changeListener && e.changeListener(e.currentUser);\n      }, this.tokenCounter = 0, this.app.INTERNAL.addAuthTokenListener(this.tokenListener);\n    }\n\n    return t.prototype.getToken = function () {\n      var e = this;\n      Uf(null != this.tokenListener, \"getToken cannot be called after listener removed.\");\n      var n = this.tokenCounter,\n          t = this.forceRefresh;\n      return this.forceRefresh = !1, this.app.INTERNAL.getToken(t).then(function (t) {\n        if (e.tokenCounter !== n) throw new jf(Bf.ABORTED, \"getToken aborted due to token change.\");\n        return t ? (Uf(\"string\" == typeof t.accessToken, \"Invalid tokenData returned from getToken():\" + t), new Ev(t.accessToken, e.currentUser)) : null;\n      });\n    }, t.prototype.invalidateToken = function () {\n      this.forceRefresh = !0;\n    }, t.prototype.setChangeListener = function (t) {\n      Uf(!this.changeListener, \"Can only call setChangeListener() once.\"), this.changeListener = t, this.currentUser && t(this.currentUser);\n    }, t.prototype.removeChangeListener = function () {\n      Uf(null != this.tokenListener, \"removeChangeListener() called twice\"), Uf(null !== this.changeListener, \"removeChangeListener() called when no listener registered\"), this.app.INTERNAL.removeAuthTokenListener(this.tokenListener), this.tokenListener = null, this.changeListener = null;\n    }, t.prototype.getUser = function () {\n      var t = this.app.INTERNAL.getUid();\n      return Uf(null === t || \"string\" == typeof t, \"Received invalid UID: \" + t), new rv(t);\n    }, t;\n  }(),\n      Iv = function () {\n    function t(t, e) {\n      this.gapi = t, this.sessionIndex = e, this.type = \"FirstParty\", this.user = rv.FIRST_PARTY;\n    }\n\n    return Object.defineProperty(t.prototype, \"authHeaders\", {\n      get: function get() {\n        var t = {\n          \"X-Goog-AuthUser\": this.sessionIndex\n        },\n            e = this.gapi.auth.getAuthHeaderValueForFirstParty([]);\n        return e && (t.Authorization = e), t;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t;\n  }(),\n      Cv = function () {\n    function t(t, e) {\n      this.gapi = t, this.sessionIndex = e;\n    }\n\n    return t.prototype.getToken = function () {\n      return Promise.resolve(new Iv(this.gapi, this.sessionIndex));\n    }, t.prototype.setChangeListener = function (t) {\n      t(rv.FIRST_PARTY);\n    }, t.prototype.removeChangeListener = function () {}, t.prototype.invalidateToken = function () {}, t;\n  }();\n\n  function Nv(t) {\n    return function (t, e) {\n      if (\"object\" != typeof t || null === t) return !1;\n\n      for (var n = t, r = 0, i = e; r < i.length; r++) {\n        var o = i[r];\n        if (o in n && \"function\" == typeof n[o]) return !0;\n      }\n\n      return !1;\n    }(t, [\"next\", \"error\", \"complete\"]);\n  }\n\n  var Av,\n      kv,\n      Dv = function () {\n    function t(t) {\n      this._methodName = t;\n    }\n\n    return t.delete = function () {\n      return Yf(\"FieldValue.delete\", arguments), Rv.instance;\n    }, t.serverTimestamp = function () {\n      return Yf(\"FieldValue.serverTimestamp\", arguments), Ov.instance;\n    }, t.arrayUnion = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) {\n        t[e] = arguments[e];\n      }\n\n      return Jf(\"FieldValue.arrayUnion\", arguments, 1), new Pv(t);\n    }, t.arrayRemove = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) {\n        t[e] = arguments[e];\n      }\n\n      return Jf(\"FieldValue.arrayRemove\", arguments, 1), new xv(t);\n    }, t.increment = function (t) {\n      return Zf(\"FieldValue.increment\", \"number\", 1, t), Xf(\"FieldValue.increment\", arguments, 1), new Mv(t);\n    }, t.prototype.isEqual = function (t) {\n      return this === t;\n    }, t;\n  }(),\n      Rv = function (t) {\n    function e() {\n      return t.call(this, \"FieldValue.delete\") || this;\n    }\n\n    return ii(e, t), e.instance = new e(), e;\n  }(Dv),\n      Ov = function (t) {\n    function e() {\n      return t.call(this, \"FieldValue.serverTimestamp\") || this;\n    }\n\n    return ii(e, t), e.instance = new e(), e;\n  }(Dv),\n      Pv = function (n) {\n    function t(t) {\n      var e = n.call(this, \"FieldValue.arrayUnion\") || this;\n      return e._elements = t, e;\n    }\n\n    return ii(t, n), t;\n  }(Dv),\n      xv = function (n) {\n    function t(t) {\n      var e = n.call(this, \"FieldValue.arrayRemove\") || this;\n      return e._elements = t, e;\n    }\n\n    return ii(t, n), t;\n  }(Dv),\n      Mv = function (n) {\n    function t(t) {\n      var e = n.call(this, \"FieldValue.increment\") || this;\n      return e._operand = t, e;\n    }\n\n    return ii(t, n), t;\n  }(Dv),\n      Lv = Wf(Dv, \"Use FieldValue.<field>() instead.\"),\n      Fv = /^__.*__$/,\n      Uv = function () {\n    function t(t, e, n) {\n      this.data = t, this.fieldMask = e, this.fieldTransforms = n;\n    }\n\n    return t.prototype.toMutations = function (t, e) {\n      var n = [];\n      return null !== this.fieldMask ? n.push(new fm(t, this.data, this.fieldMask, e)) : n.push(new lm(t, this.data, e)), 0 < this.fieldTransforms.length && n.push(new pm(t, this.fieldTransforms)), n;\n    }, t;\n  }(),\n      qv = function () {\n    function t(t, e, n) {\n      this.data = t, this.fieldMask = e, this.fieldTransforms = n;\n    }\n\n    return t.prototype.toMutations = function (t, e) {\n      var n = [new fm(t, this.data, this.fieldMask, e)];\n      return 0 < this.fieldTransforms.length && n.push(new pm(t, this.fieldTransforms)), n;\n    }, t;\n  }();\n\n  function Vv(t) {\n    switch (t) {\n      case Av.Set:\n      case Av.MergeSet:\n      case Av.Update:\n        return !0;\n\n      case Av.Argument:\n        return !1;\n\n      default:\n        throw Ff(\"Unexpected case for UserDataSource: \" + t);\n    }\n  }\n\n  (kv = Av || (Av = {}))[kv.Set = 0] = \"Set\", kv[kv.Update = 1] = \"Update\", kv[kv.MergeSet = 2] = \"MergeSet\", kv[kv.Argument = 3] = \"Argument\";\n\n  var Bv = function () {\n    function r(t, e, n, r, i, o) {\n      this.dataSource = t, this.methodName = e, this.path = n, this.arrayElement = r, void 0 === i && this.validatePath(), this.arrayElement = void 0 !== r && r, this.fieldTransforms = i || [], this.fieldMask = o || [];\n    }\n\n    return r.prototype.childContextForField = function (t) {\n      var e = null == this.path ? null : this.path.child(t),\n          n = new r(this.dataSource, this.methodName, e, !1, this.fieldTransforms, this.fieldMask);\n      return n.validatePathSegment(t), n;\n    }, r.prototype.childContextForFieldPath = function (t) {\n      var e = null == this.path ? null : this.path.child(t),\n          n = new r(this.dataSource, this.methodName, e, !1, this.fieldTransforms, this.fieldMask);\n      return n.validatePath(), n;\n    }, r.prototype.childContextForArray = function (t) {\n      return new r(this.dataSource, this.methodName, null, !0, this.fieldTransforms, this.fieldMask);\n    }, r.prototype.createError = function (t) {\n      var e = null === this.path || this.path.isEmpty() ? \"\" : \" (found in field \" + this.path.toString() + \")\";\n      return new jf(Bf.INVALID_ARGUMENT, \"Function \" + this.methodName + \"() called with invalid data. \" + t + e);\n    }, r.prototype.contains = function (e) {\n      return void 0 !== this.fieldMask.find(function (t) {\n        return e.isPrefixOf(t);\n      }) || void 0 !== this.fieldTransforms.find(function (t) {\n        return e.isPrefixOf(t.field);\n      });\n    }, r.prototype.validatePath = function () {\n      if (null !== this.path) for (var t = 0; t < this.path.length; t++) {\n        this.validatePathSegment(this.path.get(t));\n      }\n    }, r.prototype.validatePathSegment = function (t) {\n      if (Vv(this.dataSource) && Fv.test(t)) throw this.createError(\"Document fields cannot begin and end with __\");\n    }, r;\n  }(),\n      jv = function jv(t, e) {\n    this.databaseId = t, this.key = e;\n  },\n      Wv = function () {\n    function t(t) {\n      this.preConverter = t;\n    }\n\n    return t.prototype.parseSetData = function (t, e) {\n      var n = new Bv(Av.Set, t, Rp.EMPTY_PATH);\n      Qv(\"Data must be an object, but it was:\", n, e);\n      var r = this.parseData(e, n);\n      return new Uv(r, null, n.fieldTransforms);\n    }, t.prototype.parseMergeData = function (t, e, n) {\n      var r = new Bv(Av.MergeSet, t, Rp.EMPTY_PATH);\n      Qv(\"Data must be an object, but it was:\", r, e);\n      var i,\n          o,\n          a = this.parseData(e, r);\n\n      if (n) {\n        for (var s = new Xp(Rp.comparator), u = 0, c = n; u < c.length; u++) {\n          var h = c[u],\n              l = void 0;\n          if (h instanceof wv) l = h._internalPath;else {\n            if (\"string\" != typeof h) throw Ff(\"Expected stringOrFieldPath to be a string or a FieldPath\");\n            l = Gv(t, h);\n          }\n          if (!r.contains(l)) throw new jf(Bf.INVALID_ARGUMENT, \"Field '\" + l + \"' is specified in your field mask but missing from your input data.\");\n          s = s.add(l);\n        }\n\n        i = am.fromSet(s), o = r.fieldTransforms.filter(function (t) {\n          return i.covers(t.field);\n        });\n      } else i = am.fromArray(r.fieldMask), o = r.fieldTransforms;\n\n      return new Uv(a, i, o);\n    }, t.prototype.parseUpdateData = function (o, t) {\n      var a = this,\n          s = new Bv(Av.Update, o, Rp.EMPTY_PATH);\n      Qv(\"Data must be an object, but it was:\", s, t);\n      var u = new Xp(Rp.comparator),\n          c = im.EMPTY;\n      Gf(t, function (t, e) {\n        var n = Gv(o, t),\n            r = s.childContextForFieldPath(n);\n        if ((e = a.runPreConverter(e, r)) instanceof Rv) u = u.add(n);else {\n          var i = a.parseData(e, r);\n          null != i && (u = u.add(n), c = c.set(n, i));\n        }\n      });\n      var e = am.fromSet(u);\n      return new qv(c, e, s.fieldTransforms);\n    }, t.prototype.parseUpdateVarargs = function (t, e, n, r) {\n      var i = new Bv(Av.Update, t, Rp.EMPTY_PATH),\n          o = [Hv(t, e)],\n          a = [n];\n      if (r.length % 2 != 0) throw new jf(Bf.INVALID_ARGUMENT, \"Function \" + t + \"() needs to be called with an even number of arguments that alternate between field names and values.\");\n\n      for (var s = 0; s < r.length; s += 2) {\n        o.push(Hv(t, r[s])), a.push(r[s + 1]);\n      }\n\n      var u = new Xp(Rp.comparator),\n          c = im.EMPTY;\n\n      for (s = 0; s < o.length; ++s) {\n        var h = o[s],\n            l = i.childContextForFieldPath(h),\n            f = this.runPreConverter(a[s], l);\n        if (f instanceof Rv) u = u.add(h);else {\n          var p = this.parseData(f, l);\n          null != p && (u = u.add(h), c = c.set(h, p));\n        }\n      }\n\n      var d = am.fromSet(u);\n      return new qv(c, d, i.fieldTransforms);\n    }, t.prototype.parseQueryValue = function (t, e) {\n      var n = new Bv(Av.Argument, t, Rp.EMPTY_PATH),\n          r = this.parseData(e, n);\n      return Uf(null != r, \"Parsed data should not be null.\"), Uf(0 === n.fieldTransforms.length, \"Field transforms should have been disallowed.\"), r;\n    }, t.prototype.runPreConverter = function (t, e) {\n      try {\n        return this.preConverter(t);\n      } catch (t) {\n        var n = zv(t);\n        throw e.createError(n);\n      }\n    }, t.prototype.parseData = function (t, e) {\n      if (Kv(t = this.runPreConverter(t, e))) return Qv(\"Unsupported field value:\", e, t), this.parseObject(t, e);\n      if (t instanceof Dv) return this.parseSentinelFieldValue(t, e), null;\n\n      if (e.path && e.fieldMask.push(e.path), t instanceof Array) {\n        if (e.arrayElement) throw e.createError(\"Nested arrays are not supported\");\n        return this.parseArray(t, e);\n      }\n\n      return this.parseScalarValue(t, e);\n    }, t.prototype.parseObject = function (t, r) {\n      var i = this,\n          o = new Hp(dp);\n      return zf(t) ? r.path && 0 < r.path.length && r.fieldMask.push(r.path) : Gf(t, function (t, e) {\n        var n = i.parseData(e, r.childContextForField(t));\n        null != n && (o = o.insert(t, n));\n      }), new im(o);\n    }, t.prototype.parseArray = function (t, e) {\n      for (var n = [], r = 0, i = 0, o = t; i < o.length; i++) {\n        var a = o[i],\n            s = this.parseData(a, e.childContextForArray(r));\n        null == s && (s = Ky.INSTANCE), n.push(s), r++;\n      }\n\n      return new om(n);\n    }, t.prototype.parseSentinelFieldValue = function (t, e) {\n      if (!Vv(e.dataSource)) throw e.createError(t._methodName + \"() can only be used with update() and set()\");\n      if (null === e.path) throw e.createError(t._methodName + \"() is not currently supported inside arrays\");\n\n      if (t instanceof Rv) {\n        if (e.dataSource !== Av.MergeSet) throw e.dataSource === Av.Update ? (Uf(0 < e.path.length, \"FieldValue.delete() at the top level should have already been handled.\"), e.createError(\"FieldValue.delete() can only appear at the top level of your update data\")) : e.createError(\"FieldValue.delete() cannot be used with set() unless you pass {merge:true}\");\n        e.fieldMask.push(e.path);\n      } else if (t instanceof Ov) e.fieldTransforms.push(new sm(e.path, Og.instance));else if (t instanceof Pv) {\n        var n = this.parseArrayTransformElements(t._methodName, t._elements),\n            r = new Pg(n);\n        e.fieldTransforms.push(new sm(e.path, r));\n      } else if (t instanceof xv) {\n        n = this.parseArrayTransformElements(t._methodName, t._elements);\n        var i = new xg(n);\n        e.fieldTransforms.push(new sm(e.path, i));\n      } else if (t instanceof Mv) {\n        var o = this.parseQueryValue(\"FieldValue.increment\", t._operand),\n            a = new Mg(o);\n        e.fieldTransforms.push(new sm(e.path, a));\n      } else Ff(\"Unknown FieldValue type: \" + t);\n    }, t.prototype.parseScalarValue = function (t, e) {\n      if (null === t) return Ky.INSTANCE;\n      if (\"number\" == typeof t) return Om(t) ? new Xy(t) : new Jy(t);\n      if (\"boolean\" == typeof t) return Qy.of(t);\n      if (\"string\" == typeof t) return new $y(t);\n      if (t instanceof Date) return new Zy(Kp.fromDate(t));\n      if (t instanceof Kp) return new Zy(new Kp(t.seconds, 1e3 * Math.floor(t.nanoseconds / 1e3)));\n      if (t instanceof gg) return new rm(t);\n      if (t instanceof _p) return new em(t);\n      if (t instanceof jv) return new nm(t.databaseId, t.key);\n      throw e.createError(\"Unsupported field value: \" + sp(t));\n    }, t.prototype.parseArrayTransformElements = function (r, t) {\n      var i = this;\n      return t.map(function (t, e) {\n        var n = new Bv(Av.Argument, r, Rp.EMPTY_PATH);\n        return i.parseData(t, n.childContextForArray(e));\n      });\n    }, t;\n  }();\n\n  function Kv(t) {\n    return !(\"object\" != typeof t || null === t || t instanceof Array || t instanceof Date || t instanceof Kp || t instanceof gg || t instanceof _p || t instanceof jv || t instanceof Dv);\n  }\n\n  function Qv(t, e, n) {\n    if (!Kv(n) || !ap(n)) {\n      var r = sp(n);\n      throw \"an object\" === r ? e.createError(t + \" a custom object\") : e.createError(t + \" \" + r);\n    }\n  }\n\n  function Hv(t, e) {\n    if (e instanceof wv) return e._internalPath;\n    if (\"string\" == typeof e) return Gv(t, e);\n    throw new jf(Bf.INVALID_ARGUMENT, \"Function \" + t + \"() called with invalid data. Field path arguments must be of type string or FieldPath.\");\n  }\n\n  function Gv(e, t) {\n    try {\n      return function (e) {\n        if (0 <= e.search(_v)) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid field path (\" + e + \"). Paths must not contain '~', '*', '/', '[', or ']'\");\n\n        try {\n          return new (wv.bind.apply(wv, [void 0].concat(e.split(\".\"))))();\n        } catch (t) {\n          throw new jf(Bf.INVALID_ARGUMENT, \"Invalid field path (\" + e + \"). Paths must not be empty, begin with '.', end with '.', or contain '..'\");\n        }\n      }(t)._internalPath;\n    } catch (t) {\n      var n = zv(t);\n      throw new jf(Bf.INVALID_ARGUMENT, \"Function \" + e + \"() called with invalid data. \" + n);\n    }\n  }\n\n  function zv(t) {\n    return t instanceof Error ? t.message : t.toString();\n  }\n\n  var Yv = Iy.COLLECTION_DISABLED,\n      Xv = function () {\n    function t(t) {\n      if (void 0 === t.host) {\n        if (void 0 !== t.ssl) throw new jf(Bf.INVALID_ARGUMENT, \"Can't provide ssl option if host option is not set\");\n        this.host = \"firestore.googleapis.com\", this.ssl = !0;\n      } else ep(\"settings\", \"non-empty string\", \"host\", t.host), this.host = t.host, np(\"settings\", \"boolean\", \"ssl\", t.ssl), this.ssl = Qf(t.ssl, !0);\n\n      if (cp(\"settings\", t, [\"host\", \"ssl\", \"credentials\", \"timestampsInSnapshots\", \"cacheSizeBytes\", \"experimentalForceLongPolling\"]), np(\"settings\", \"object\", \"credentials\", t.credentials), this.credentials = t.credentials, np(\"settings\", \"boolean\", \"timestampsInSnapshots\", t.timestampsInSnapshots), !0 === t.timestampsInSnapshots ? Mf(\"\\n  The timestampsInSnapshots setting now defaults to true and you no\\n  longer need to explicitly set it. In a future release, the setting\\n  will be removed entirely and so it is recommended that you remove it\\n  from your firestore.settings() call now.\") : !1 === t.timestampsInSnapshots && Mf(\"\\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\\n  YOUR CODE.\\n\\n  To hide this warning, stop using the timestampsInSnapshots setting in your\\n  firestore.settings({ ... }) call.\\n\\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\\n  read back as Firebase Timestamp objects instead of as system Date objects.\\n  So you will also need to update code expecting a Date to instead expect a\\n  Timestamp. For example:\\n\\n  // Old:\\n  const date = snapshot.get('created_at');\\n  // New:\\n  const timestamp = snapshot.get('created_at'); const date =\\n  timestamp.toDate();\\n\\n  Please audit all existing usages of Date when you enable the new\\n  behavior.\"), this.timestampsInSnapshots = Qf(t.timestampsInSnapshots, !0), np(\"settings\", \"number\", \"cacheSizeBytes\", t.cacheSizeBytes), void 0 === t.cacheSizeBytes) this.cacheSizeBytes = Iy.DEFAULT_CACHE_SIZE_BYTES;else {\n        if (t.cacheSizeBytes !== Yv && t.cacheSizeBytes < Iy.MINIMUM_CACHE_SIZE_BYTES) throw new jf(Bf.INVALID_ARGUMENT, \"cacheSizeBytes must be at least \" + Iy.MINIMUM_CACHE_SIZE_BYTES);\n        this.cacheSizeBytes = t.cacheSizeBytes;\n      }\n      np(\"settings\", \"boolean\", \"experimentalForceLongPolling\", t.experimentalForceLongPolling), this.forceLongPolling = void 0 !== t.experimentalForceLongPolling && t.experimentalForceLongPolling;\n    }\n\n    return t.prototype.isEqual = function (t) {\n      return this.host === t.host && this.ssl === t.ssl && this.timestampsInSnapshots === t.timestampsInSnapshots && this.credentials === t.credentials && this.cacheSizeBytes === t.cacheSizeBytes && this.forceLongPolling === t.forceLongPolling;\n    }, t;\n  }(),\n      Jv = function Jv() {},\n      $v = function () {\n    function o(t) {\n      var e = this;\n      this._queue = new Mp(), this.INTERNAL = {\n        delete: function _delete() {\n          return ai(e, void 0, void 0, function () {\n            return si(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return this.ensureClientConfigured(), [4, this._firestoreClient.shutdown()];\n\n                case 1:\n                  return t.sent(), [2];\n              }\n            });\n          });\n        }\n      };\n      var n = new Jv();\n\n      if (\"object\" == typeof t.options) {\n        var r = t;\n        n.firebaseApp = r, n.databaseId = o.databaseIdFromApp(r), n.persistenceKey = n.firebaseApp.name, n.credentials = new Sv(r);\n      } else {\n        var i = t;\n        if (!i.projectId) throw new jf(Bf.INVALID_ARGUMENT, \"Must provide projectId\");\n        n.databaseId = new Ip(i.projectId, i.database), n.persistenceKey = \"[DEFAULT]\", n.credentials = new Tv();\n      }\n\n      n.settings = new Xv({}), this._config = n, this._databaseId = n.databaseId;\n    }\n\n    return o.prototype.settings = function (t) {\n      if (Xf(\"Firestore.settings\", arguments, 1), Zf(\"Firestore.settings\", \"object\", 1, t), Kf(t, \"persistence\")) throw new jf(Bf.INVALID_ARGUMENT, '\"persistence\" is now specified with a separate call to firestore.enablePersistence().');\n      var e = new Xv(t);\n      if (this._firestoreClient && !this._config.settings.isEqual(e)) throw new jf(Bf.FAILED_PRECONDITION, \"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.\");\n      void 0 !== (this._config.settings = e).credentials && (this._config.credentials = function (t) {\n        if (!t) return new Tv();\n\n        switch (t.type) {\n          case \"gapi\":\n            var e = t.client;\n            return Uf(!(\"object\" != typeof e || null === e || !e.auth || !e.auth.getAuthHeaderValueForFirstParty), \"unexpected gapi interface\"), new Cv(e, t.sessionIndex || \"0\");\n\n          case \"provider\":\n            return t.client;\n\n          default:\n            throw new jf(Bf.INVALID_ARGUMENT, \"makeCredentialsProvider failed due to invalid credential type\");\n        }\n      }(e.credentials));\n    }, o.prototype.enableNetwork = function () {\n      return this.ensureClientConfigured(), this._firestoreClient.enableNetwork();\n    }, o.prototype.disableNetwork = function () {\n      return this.ensureClientConfigured(), this._firestoreClient.disableNetwork();\n    }, o.prototype.enablePersistence = function (t) {\n      if (this._firestoreClient) throw new jf(Bf.FAILED_PRECONDITION, \"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.\");\n      var e = !1;\n      return t && (void 0 !== t.experimentalTabSynchronization && Mf(\"The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'.\"), e = Qf(void 0 !== t.synchronizeTabs ? t.synchronizeTabs : t.experimentalTabSynchronization, !1)), this.configureClient(new mv(this._config.settings.cacheSizeBytes, e));\n    }, o.prototype.clearPersistence = function () {\n      var t = this,\n          n = Oy.buildStoragePrefix(this.makeDatabaseInfo()),\n          r = new Pp();\n      return this._queue.enqueueAndForget(function () {\n        return ai(t, void 0, void 0, function () {\n          var e;\n          return si(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (t.trys.push([0, 2,, 3]), void 0 !== this._firestoreClient && !this._firestoreClient.clientShutdown) throw new jf(Bf.FAILED_PRECONDITION, \"Persistence cannot be cleared after this Firestore instance is initialized.\");\n                return [4, Oy.clearPersistence(n)];\n\n              case 1:\n                return t.sent(), r.resolve(), [3, 3];\n\n              case 2:\n                return e = t.sent(), r.reject(e), [3, 3];\n\n              case 3:\n                return [2];\n            }\n          });\n        });\n      }), r.promise;\n    }, o.prototype.ensureClientConfigured = function () {\n      return this._firestoreClient || this.configureClient(new gv()), this._firestoreClient;\n    }, o.prototype.makeDatabaseInfo = function () {\n      return new Tp(this._config.databaseId, this._config.persistenceKey, this._config.settings.host, this._config.settings.ssl, this._config.settings.forceLongPolling);\n    }, o.prototype.configureClient = function (t) {\n      var r = this;\n      Uf(!!this._config.settings.host, \"FirestoreSettings.host cannot be falsey\"), Uf(!this._firestoreClient, \"configureClient() called multiple times\");\n      var e = this.makeDatabaseInfo();\n      return this._dataConverter = new Wv(function (t) {\n        if (t instanceof eb) {\n          var e = r._config.databaseId,\n              n = t.firestore._config.databaseId;\n          if (!n.isEqual(e)) throw new jf(Bf.INVALID_ARGUMENT, \"Document reference is for database \" + n.projectId + \"/\" + n.database + \" but should be for database \" + e.projectId + \"/\" + e.database);\n          return new jv(r._config.databaseId, t._key);\n        }\n\n        return t;\n      }), this._firestoreClient = new vv(qf.getPlatform(), e, this._config.credentials, this._queue), this._firestoreClient.start(t);\n    }, o.databaseIdFromApp = function (t) {\n      var e = t.options;\n      if (!Kf(e, \"projectId\")) throw new jf(Bf.INVALID_ARGUMENT, '\"projectId\" not provided in firebase.initializeApp.');\n      var n = e.projectId;\n      if (!n || \"string\" != typeof n) throw new jf(Bf.INVALID_ARGUMENT, \"projectId must be a string in FirebaseApp.options\");\n      return new Ip(n);\n    }, Object.defineProperty(o.prototype, \"app\", {\n      get: function get() {\n        if (!this._config.firebaseApp) throw new jf(Bf.FAILED_PRECONDITION, \"Firestore was not initialized using the Firebase SDK. 'app' is not available\");\n        return this._config.firebaseApp;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), o.prototype.collection = function (t) {\n      return Xf(\"Firestore.collection\", arguments, 1), Zf(\"Firestore.collection\", \"non-empty string\", 1, t), this.ensureClientConfigured(), new sb(kp.fromString(t), this);\n    }, o.prototype.doc = function (t) {\n      return Xf(\"Firestore.doc\", arguments, 1), Zf(\"Firestore.doc\", \"non-empty string\", 1, t), this.ensureClientConfigured(), eb.forPath(kp.fromString(t), this);\n    }, o.prototype.collectionGroup = function (t) {\n      if (Xf(\"Firestore.collectionGroup\", arguments, 1), Zf(\"Firestore.collectionGroup\", \"non-empty string\", 1, t), 0 <= t.indexOf(\"/\")) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid collection ID '\" + t + \"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.\");\n      return this.ensureClientConfigured(), new ob(new vg(kp.EMPTY_PATH, t), this);\n    }, o.prototype.runTransaction = function (e) {\n      var n = this;\n      return Xf(\"Firestore.runTransaction\", arguments, 1), Zf(\"Firestore.runTransaction\", \"function\", 1, e), this.ensureClientConfigured().transaction(function (t) {\n        return e(new Zv(n, t));\n      });\n    }, o.prototype.batch = function () {\n      return this.ensureClientConfigured(), new tb(this);\n    }, Object.defineProperty(o, \"logLevel\", {\n      get: function get() {\n        switch (Of()) {\n          case Ef.DEBUG:\n            return \"debug\";\n\n          case Ef.ERROR:\n            return \"error\";\n\n          case Ef.SILENT:\n            return \"silent\";\n\n          default:\n            return Ff(\"Unknown log level: \" + Of());\n        }\n      },\n      enumerable: !0,\n      configurable: !0\n    }), o.setLogLevel = function (t) {\n      switch (Xf(\"Firestore.setLogLevel\", arguments, 1), Zf(\"Firestore.setLogLevel\", \"non-empty string\", 1, t), t) {\n        case \"debug\":\n          Pf(Ef.DEBUG);\n          break;\n\n        case \"error\":\n          Pf(Ef.ERROR);\n          break;\n\n        case \"silent\":\n          Pf(Ef.SILENT);\n          break;\n\n        default:\n          throw new jf(Bf.INVALID_ARGUMENT, \"Invalid log level: \" + t);\n      }\n    }, o.prototype._areTimestampsInSnapshotsEnabled = function () {\n      return this._config.settings.timestampsInSnapshots;\n    }, o;\n  }(),\n      Zv = function () {\n    function t(t, e) {\n      this._firestore = t, this._transaction = e;\n    }\n\n    return t.prototype.get = function (t) {\n      var n = this;\n      Xf(\"Transaction.get\", arguments, 1);\n      var r = lb(\"Transaction.get\", t, this._firestore);\n      return this._transaction.lookup([r._key]).then(function (t) {\n        if (!t || 1 !== t.length) return Ff(\"Mismatch in docs returned from document lookup.\");\n        var e = t[0];\n        if (e instanceof Fd) return new rb(n._firestore, r._key, null, !1, !1);\n        if (e instanceof Ld) return new rb(n._firestore, r._key, e, !1, !1);\n        throw Ff(\"BatchGetDocumentsRequest returned unexpected document type: \" + e.constructor.name);\n      });\n    }, t.prototype.set = function (t, e, n) {\n      $f(\"Transaction.set\", arguments, 2, 3);\n      var r = lb(\"Transaction.set\", t, this._firestore),\n          i = (n = ub(\"Transaction.set\", n)).merge || n.mergeFields ? this._firestore._dataConverter.parseMergeData(\"Transaction.set\", e, n.mergeFields) : this._firestore._dataConverter.parseSetData(\"Transaction.set\", e);\n      return this._transaction.set(r._key, i), this;\n    }, t.prototype.update = function (t, e, n) {\n      for (var r, i, o = [], a = 3; a < arguments.length; a++) {\n        o[a - 3] = arguments[a];\n      }\n\n      return i = \"string\" == typeof e || e instanceof wv ? (Jf(\"Transaction.update\", arguments, 3), r = lb(\"Transaction.update\", t, this._firestore), this._firestore._dataConverter.parseUpdateVarargs(\"Transaction.update\", e, n, o)) : (Xf(\"Transaction.update\", arguments, 2), r = lb(\"Transaction.update\", t, this._firestore), this._firestore._dataConverter.parseUpdateData(\"Transaction.update\", e)), this._transaction.update(r._key, i), this;\n    }, t.prototype.delete = function (t) {\n      Xf(\"Transaction.delete\", arguments, 1);\n      var e = lb(\"Transaction.delete\", t, this._firestore);\n      return this._transaction.delete(e._key), this;\n    }, t;\n  }(),\n      tb = function () {\n    function t(t) {\n      this._firestore = t, this._mutations = [], this._committed = !1;\n    }\n\n    return t.prototype.set = function (t, e, n) {\n      $f(\"WriteBatch.set\", arguments, 2, 3), this.verifyNotCommitted();\n      var r = lb(\"WriteBatch.set\", t, this._firestore),\n          i = (n = ub(\"WriteBatch.set\", n)).merge || n.mergeFields ? this._firestore._dataConverter.parseMergeData(\"WriteBatch.set\", e, n.mergeFields) : this._firestore._dataConverter.parseSetData(\"WriteBatch.set\", e);\n      return this._mutations = this._mutations.concat(i.toMutations(r._key, cm.NONE)), this;\n    }, t.prototype.update = function (t, e, n) {\n      for (var r, i, o = [], a = 3; a < arguments.length; a++) {\n        o[a - 3] = arguments[a];\n      }\n\n      return this.verifyNotCommitted(), i = \"string\" == typeof e || e instanceof wv ? (Jf(\"WriteBatch.update\", arguments, 3), r = lb(\"WriteBatch.update\", t, this._firestore), this._firestore._dataConverter.parseUpdateVarargs(\"WriteBatch.update\", e, n, o)) : (Xf(\"WriteBatch.update\", arguments, 2), r = lb(\"WriteBatch.update\", t, this._firestore), this._firestore._dataConverter.parseUpdateData(\"WriteBatch.update\", e)), this._mutations = this._mutations.concat(i.toMutations(r._key, cm.exists(!0))), this;\n    }, t.prototype.delete = function (t) {\n      Xf(\"WriteBatch.delete\", arguments, 1), this.verifyNotCommitted();\n      var e = lb(\"WriteBatch.delete\", t, this._firestore);\n      return this._mutations = this._mutations.concat(new dm(e._key, cm.NONE)), this;\n    }, t.prototype.commit = function () {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          return this.verifyNotCommitted(), this._committed = !0, 0 < this._mutations.length ? [2, this._firestore.ensureClientConfigured().write(this._mutations)] : [2];\n        });\n      });\n    }, t.prototype.verifyNotCommitted = function () {\n      if (this._committed) throw new jf(Bf.FAILED_PRECONDITION, \"A write batch can no longer be used after commit() has been called.\");\n    }, t;\n  }(),\n      eb = function () {\n    function n(t, e) {\n      this._key = t, this.firestore = e, this._firestoreClient = this.firestore.ensureClientConfigured();\n    }\n\n    return n.forPath = function (t, e) {\n      if (t.length % 2 != 0) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid document reference. Document references must have an even number of segments, but \" + t.canonicalString() + \" has \" + t.length);\n      return new n(new Op(t), e);\n    }, Object.defineProperty(n.prototype, \"id\", {\n      get: function get() {\n        return this._key.path.lastSegment();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(n.prototype, \"parent\", {\n      get: function get() {\n        return new sb(this._key.path.popLast(), this.firestore);\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(n.prototype, \"path\", {\n      get: function get() {\n        return this._key.path.canonicalString();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), n.prototype.collection = function (t) {\n      if (Xf(\"DocumentReference.collection\", arguments, 1), Zf(\"DocumentReference.collection\", \"non-empty string\", 1, t), !t) throw new jf(Bf.INVALID_ARGUMENT, \"Must provide a non-empty collection name to collection()\");\n      var e = kp.fromString(t);\n      return new sb(this._key.path.child(e), this.firestore);\n    }, n.prototype.isEqual = function (t) {\n      if (!(t instanceof n)) throw hp(\"isEqual\", \"DocumentReference\", 1, t);\n      return this.firestore === t.firestore && this._key.isEqual(t._key);\n    }, n.prototype.set = function (t, e) {\n      $f(\"DocumentReference.set\", arguments, 1, 2);\n      var n = (e = ub(\"DocumentReference.set\", e)).merge || e.mergeFields ? this.firestore._dataConverter.parseMergeData(\"DocumentReference.set\", t, e.mergeFields) : this.firestore._dataConverter.parseSetData(\"DocumentReference.set\", t);\n      return this._firestoreClient.write(n.toMutations(this._key, cm.NONE));\n    }, n.prototype.update = function (t, e) {\n      for (var n, r = [], i = 2; i < arguments.length; i++) {\n        r[i - 2] = arguments[i];\n      }\n\n      return n = \"string\" == typeof t || t instanceof wv ? (Jf(\"DocumentReference.update\", arguments, 2), this.firestore._dataConverter.parseUpdateVarargs(\"DocumentReference.update\", t, e, r)) : (Xf(\"DocumentReference.update\", arguments, 1), this.firestore._dataConverter.parseUpdateData(\"DocumentReference.update\", t)), this._firestoreClient.write(n.toMutations(this._key, cm.exists(!0)));\n    }, n.prototype.delete = function () {\n      return Xf(\"DocumentReference.delete\", arguments, 0), this._firestoreClient.write([new dm(this._key, cm.NONE)]);\n    }, n.prototype.onSnapshot = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) {\n        t[e] = arguments[e];\n      }\n\n      $f(\"DocumentReference.onSnapshot\", arguments, 1, 4);\n      var n,\n          r = {\n        includeMetadataChanges: !1\n      },\n          i = 0;\n      \"object\" != typeof t[i] || Nv(t[i]) || (cp(\"DocumentReference.onSnapshot\", r = t[i], [\"includeMetadataChanges\"]), np(\"DocumentReference.onSnapshot\", \"boolean\", \"includeMetadataChanges\", r.includeMetadataChanges), i++);\n      var o = {\n        includeMetadataChanges: r.includeMetadataChanges\n      };\n      return n = Nv(t[i]) ? t[i] : (Zf(\"DocumentReference.onSnapshot\", \"function\", i, t[i]), tp(\"DocumentReference.onSnapshot\", \"function\", i + 1, t[i + 1]), tp(\"DocumentReference.onSnapshot\", \"function\", i + 2, t[i + 2]), {\n        next: t[i],\n        error: t[i + 1],\n        complete: t[i + 2]\n      }), this.onSnapshotInternal(o, n);\n    }, n.prototype.onSnapshotInternal = function (t, n) {\n      var r = this,\n          e = function e(t) {\n        console.error(\"Uncaught Error in onSnapshot:\", t);\n      };\n\n      n.error && (e = n.error.bind(n));\n\n      var i = new bv({\n        next: function next(t) {\n          if (n.next) {\n            Uf(t.docs.size <= 1, \"Too many documents returned on a document query\");\n            var e = t.docs.get(r._key);\n            n.next(new rb(r.firestore, r._key, e, t.fromCache, t.hasPendingWrites));\n          }\n        },\n        error: e\n      }),\n          o = this._firestoreClient.listen(vg.atPath(this._key.path), i, t);\n\n      return function () {\n        i.mute(), r._firestoreClient.unlisten(o);\n      };\n    }, n.prototype.get = function (n) {\n      var r = this;\n      return $f(\"DocumentReference.get\", arguments, 0, 1), hb(\"DocumentReference.get\", n), new Promise(function (e, t) {\n        n && \"cache\" === n.source ? r.firestore.ensureClientConfigured().getDocumentFromLocalCache(r._key).then(function (t) {\n          e(new rb(r.firestore, r._key, t, !0, t instanceof Ld && t.hasLocalMutations));\n        }, t) : r.getViaSnapshotListener(e, t, n);\n      });\n    }, n.prototype.getViaSnapshotListener = function (e, n, r) {\n      var i = this.onSnapshotInternal({\n        includeMetadataChanges: !0,\n        waitForSyncWhenOnline: !0\n      }, {\n        next: function next(t) {\n          i(), !t.exists && t.metadata.fromCache ? n(new jf(Bf.UNAVAILABLE, \"Failed to get document because the client is offline.\")) : t.exists && t.metadata.fromCache && r && \"server\" === r.source ? n(new jf(Bf.UNAVAILABLE, 'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to \"server\" to retrieve the cached document.)')) : e(t);\n        },\n        error: n\n      });\n    }, n;\n  }(),\n      nb = function () {\n    function t(t, e) {\n      this.hasPendingWrites = t, this.fromCache = e;\n    }\n\n    return t.prototype.isEqual = function (t) {\n      return this.hasPendingWrites === t.hasPendingWrites && this.fromCache === t.fromCache;\n    }, t;\n  }(),\n      rb = function () {\n    function e(t, e, n, r, i) {\n      this._firestore = t, this._key = e, this._document = n, this._fromCache = r, this._hasPendingWrites = i;\n    }\n\n    return e.prototype.data = function (t) {\n      return $f(\"DocumentSnapshot.data\", arguments, 0, 1), t = cb(\"DocumentSnapshot.data\", t), this._document ? this.convertObject(this._document.data, jy.fromSnapshotOptions(t, this._firestore._areTimestampsInSnapshotsEnabled())) : void 0;\n    }, e.prototype.get = function (t, e) {\n      if ($f(\"DocumentSnapshot.get\", arguments, 1, 2), e = cb(\"DocumentSnapshot.get\", e), this._document) {\n        var n = this._document.data.field(Hv(\"DocumentSnapshot.get\", t));\n\n        if (null !== n) return this.convertValue(n, jy.fromSnapshotOptions(e, this._firestore._areTimestampsInSnapshotsEnabled()));\n      }\n    }, Object.defineProperty(e.prototype, \"id\", {\n      get: function get() {\n        return this._key.path.lastSegment();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"ref\", {\n      get: function get() {\n        return new eb(this._key, this._firestore);\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"exists\", {\n      get: function get() {\n        return null !== this._document;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"metadata\", {\n      get: function get() {\n        return new nb(this._hasPendingWrites, this._fromCache);\n      },\n      enumerable: !0,\n      configurable: !0\n    }), e.prototype.isEqual = function (t) {\n      if (!(t instanceof e)) throw hp(\"isEqual\", \"DocumentSnapshot\", 1, t);\n      return this._firestore === t._firestore && this._fromCache === t._fromCache && this._key.isEqual(t._key) && (null === this._document ? null === t._document : this._document.isEqual(t._document));\n    }, e.prototype.convertObject = function (t, n) {\n      var r = this,\n          i = {};\n      return t.forEach(function (t, e) {\n        i[t] = r.convertValue(e, n);\n      }), i;\n    }, e.prototype.convertValue = function (t, e) {\n      if (t instanceof im) return this.convertObject(t, e);\n      if (t instanceof om) return this.convertArray(t, e);\n\n      if (t instanceof nm) {\n        var n = t.value(e),\n            r = this._firestore.ensureClientConfigured().databaseId();\n\n        return t.databaseId.isEqual(r) || Mf(\"Document \" + this._key.path + \" contains a document reference within a different database (\" + t.databaseId.projectId + \"/\" + t.databaseId.database + \") which is not supported. It will be treated as a reference in the current database (\" + r.projectId + \"/\" + r.database + \") instead.\"), new eb(n, this._firestore);\n      }\n\n      return t.value(e);\n    }, e.prototype.convertArray = function (t, e) {\n      var n = this;\n      return t.internalValue.map(function (t) {\n        return n.convertValue(t, e);\n      });\n    }, e;\n  }(),\n      ib = function (n) {\n    function t() {\n      return null !== n && n.apply(this, arguments) || this;\n    }\n\n    return ii(t, n), t.prototype.data = function (t) {\n      var e = n.prototype.data.call(this, t);\n      return Uf(\"object\" == typeof e, \"Document in a QueryDocumentSnapshot should exist\"), e;\n    }, t;\n  }(rb),\n      ob = function () {\n    function l(t, e) {\n      this._query = t, this.firestore = e;\n    }\n\n    return l.prototype.where = function (t, e, n) {\n      if (Xf(\"Query.where\", arguments, 3), up(\"Query.where\", 3, n), \"in\" !== e && \"array-contains-any\" !== e) {\n        !function (t, e, n, r) {\n          if (!e.some(function (t) {\n            return t === r;\n          })) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid value \" + sp(r) + \" provided to function \" + t + \"() for its \" + lp(n) + \" argument. Acceptable values: \" + e.join(\", \"));\n        }(\"Query.where\", [\"<\", \"<=\", \"==\", \">=\", \">\", \"array-contains\"], 2, e);\n      }\n\n      var r,\n          i = Hv(\"Query.where\", t),\n          o = wg.fromString(e);\n\n      if (i.isKeyField()) {\n        if (o === wg.ARRAY_CONTAINS || o === wg.ARRAY_CONTAINS_ANY) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid Query. You can't perform '\" + o.toString() + \"' queries on FieldPath.documentId().\");\n\n        if (o === wg.IN) {\n          this.validateDisjunctiveFilterElements(n, o);\n\n          for (var a = [], s = 0, u = n; s < u.length; s++) {\n            var c = u[s];\n            a.push(this.parseDocumentIdValue(c));\n          }\n\n          r = new om(a);\n        } else r = this.parseDocumentIdValue(n);\n      } else o !== wg.IN && o !== wg.ARRAY_CONTAINS_ANY || this.validateDisjunctiveFilterElements(n, o), r = this.firestore._dataConverter.parseQueryValue(\"Query.where\", n);\n\n      var h = _g.create(i, o, r);\n\n      return this.validateNewFilter(h), new l(this._query.addFilter(h), this.firestore);\n    }, l.prototype.orderBy = function (t, e) {\n      var n;\n      if ($f(\"Query.orderBy\", arguments, 1, 2), tp(\"Query.orderBy\", \"non-empty string\", 2, e), void 0 === e || \"asc\" === e) n = Ng.ASCENDING;else {\n        if (\"desc\" !== e) throw new jf(Bf.INVALID_ARGUMENT, \"Function Query.orderBy() has unknown direction '\" + e + \"', expected 'asc' or 'desc'.\");\n        n = Ng.DESCENDING;\n      }\n      if (null !== this._query.startAt) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().\");\n      if (null !== this._query.endAt) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().\");\n      var r = Hv(\"Query.orderBy\", t),\n          i = new kg(r, n);\n      return this.validateNewOrderBy(i), new l(this._query.addOrderBy(i), this.firestore);\n    }, l.prototype.limit = function (t) {\n      if (Xf(\"Query.limit\", arguments, 1), Zf(\"Query.limit\", \"number\", 1, t), t <= 0) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid Query. Query limit (\" + t + \") is invalid. Limit must be positive.\");\n      return new l(this._query.withLimit(t), this.firestore);\n    }, l.prototype.startAt = function (t) {\n      for (var e = [], n = 1; n < arguments.length; n++) {\n        e[n - 1] = arguments[n];\n      }\n\n      Jf(\"Query.startAt\", arguments, 1);\n      var r = this.boundFromDocOrFields(\"Query.startAt\", t, e, !0);\n      return new l(this._query.withStartAt(r), this.firestore);\n    }, l.prototype.startAfter = function (t) {\n      for (var e = [], n = 1; n < arguments.length; n++) {\n        e[n - 1] = arguments[n];\n      }\n\n      Jf(\"Query.startAfter\", arguments, 1);\n      var r = this.boundFromDocOrFields(\"Query.startAfter\", t, e, !1);\n      return new l(this._query.withStartAt(r), this.firestore);\n    }, l.prototype.endBefore = function (t) {\n      for (var e = [], n = 1; n < arguments.length; n++) {\n        e[n - 1] = arguments[n];\n      }\n\n      Jf(\"Query.endBefore\", arguments, 1);\n      var r = this.boundFromDocOrFields(\"Query.endBefore\", t, e, !0);\n      return new l(this._query.withEndAt(r), this.firestore);\n    }, l.prototype.endAt = function (t) {\n      for (var e = [], n = 1; n < arguments.length; n++) {\n        e[n - 1] = arguments[n];\n      }\n\n      Jf(\"Query.endAt\", arguments, 1);\n      var r = this.boundFromDocOrFields(\"Query.endAt\", t, e, !1);\n      return new l(this._query.withEndAt(r), this.firestore);\n    }, l.prototype.isEqual = function (t) {\n      if (!(t instanceof l)) throw hp(\"isEqual\", \"Query\", 1, t);\n      return this.firestore === t.firestore && this._query.isEqual(t._query);\n    }, l.prototype.boundFromDocOrFields = function (t, e, n, r) {\n      if (up(t, 1, e), e instanceof rb) {\n        if (0 < n.length) throw new jf(Bf.INVALID_ARGUMENT, \"Too many arguments provided to \" + t + \"().\");\n        var i = e;\n        if (!i.exists) throw new jf(Bf.NOT_FOUND, \"Can't use a DocumentSnapshot that doesn't exist for \" + t + \"().\");\n        return this.boundFromDocument(t, i._document, r);\n      }\n\n      var o = [e].concat(n);\n      return this.boundFromFields(t, o, r);\n    }, l.prototype.boundFromDocument = function (t, e, n) {\n      for (var r = [], i = 0, o = this._query.orderBy; i < o.length; i++) {\n        var a = o[i];\n        if (a.field.isKeyField()) r.push(new nm(this.firestore._databaseId, e.key));else {\n          var s = e.field(a.field);\n          if (s instanceof tm) throw new jf(Bf.INVALID_ARGUMENT, 'Invalid query. You are trying to start or end a query using a document for which the field \"' + a.field + '\" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');\n\n          if (null === s) {\n            var u = a.field.canonicalString();\n            throw new jf(Bf.INVALID_ARGUMENT, \"Invalid query. You are trying to start or end a query using a document for which the field '\" + u + \"' (used as the orderBy) does not exist.\");\n          }\n\n          r.push(s);\n        }\n      }\n\n      return new Ag(r, n);\n    }, l.prototype.boundFromFields = function (t, e, n) {\n      var r = this._query.explicitOrderBy;\n      if (e.length > r.length) throw new jf(Bf.INVALID_ARGUMENT, \"Too many arguments provided to \" + t + \"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses\");\n\n      for (var i = [], o = 0; o < e.length; o++) {\n        var a = e[o];\n\n        if (r[o].field.isKeyField()) {\n          if (\"string\" != typeof a) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid query. Expected a string for document ID in \" + t + \"(), but got a \" + typeof a);\n          if (!this._query.isCollectionGroupQuery() && -1 !== a.indexOf(\"/\")) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to \" + t + \"() must be a plain document ID, but '\" + a + \"' contains a slash.\");\n\n          var s = this._query.path.child(kp.fromString(a));\n\n          if (!Op.isDocumentKey(s)) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to \" + t + \"() must result in a valid document path, but '\" + s + \"' is not because it contains an odd number of segments.\");\n          var u = new Op(s);\n          i.push(new nm(this.firestore._databaseId, u));\n        } else {\n          var c = this.firestore._dataConverter.parseQueryValue(t, a);\n\n          i.push(c);\n        }\n      }\n\n      return new Ag(i, n);\n    }, l.prototype.onSnapshot = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) {\n        t[e] = arguments[e];\n      }\n\n      $f(\"Query.onSnapshot\", arguments, 1, 4);\n      var n,\n          r = {},\n          i = 0;\n      return \"object\" != typeof t[i] || Nv(t[i]) || (cp(\"Query.onSnapshot\", r = t[i], [\"includeMetadataChanges\"]), np(\"Query.onSnapshot\", \"boolean\", \"includeMetadataChanges\", r.includeMetadataChanges), i++), n = Nv(t[i]) ? t[i] : (Zf(\"Query.onSnapshot\", \"function\", i, t[i]), tp(\"Query.onSnapshot\", \"function\", i + 1, t[i + 1]), tp(\"Query.onSnapshot\", \"function\", i + 2, t[i + 2]), {\n        next: t[i],\n        error: t[i + 1],\n        complete: t[i + 2]\n      }), this.onSnapshotInternal(r, n);\n    }, l.prototype.onSnapshotInternal = function (t, e) {\n      var n = this,\n          r = function r(t) {\n        console.error(\"Uncaught Error in onSnapshot:\", t);\n      };\n\n      e.error && (r = e.error.bind(e));\n      var i = new bv({\n        next: function next(t) {\n          e.next && e.next(new ab(n.firestore, n._query, t));\n        },\n        error: r\n      }),\n          o = this.firestore.ensureClientConfigured(),\n          a = o.listen(this._query, i, t);\n      return function () {\n        i.mute(), o.unlisten(a);\n      };\n    }, l.prototype.get = function (n) {\n      var r = this;\n      return $f(\"Query.get\", arguments, 0, 1), hb(\"Query.get\", n), new Promise(function (e, t) {\n        n && \"cache\" === n.source ? r.firestore.ensureClientConfigured().getDocumentsFromLocalCache(r._query).then(function (t) {\n          e(new ab(r.firestore, r._query, t));\n        }, t) : r.getViaSnapshotListener(e, t, n);\n      });\n    }, l.prototype.getViaSnapshotListener = function (e, n, r) {\n      var i = this.onSnapshotInternal({\n        includeMetadataChanges: !0,\n        waitForSyncWhenOnline: !0\n      }, {\n        next: function next(t) {\n          i(), t.metadata.fromCache && r && \"server\" === r.source ? n(new jf(Bf.UNAVAILABLE, 'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to \"server\" to retrieve the cached documents.)')) : e(t);\n        },\n        error: n\n      });\n    }, l.prototype.parseDocumentIdValue = function (t) {\n      if (\"string\" == typeof t) {\n        if (\"\" === t) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.\");\n        if (!this._query.isCollectionGroupQuery() && -1 !== t.indexOf(\"/\")) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '\" + t + \"' contains a '/' character.\");\n\n        var e = this._query.path.child(kp.fromString(t));\n\n        if (!Op.isDocumentKey(e)) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '\" + e + \"' is not because it has an odd number of segments (\" + e.length + \").\");\n        return new nm(this.firestore._databaseId, new Op(e));\n      }\n\n      if (t instanceof eb) {\n        var n = t;\n        return new nm(this.firestore._databaseId, n._key);\n      }\n\n      throw new jf(Bf.INVALID_ARGUMENT, \"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: \" + sp(t) + \".\");\n    }, l.prototype.validateDisjunctiveFilterElements = function (t, e) {\n      if (!Array.isArray(t) || 0 === t.length) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid Query. A non-empty array is required for '\" + e.toString() + \"' filters.\");\n      if (10 < t.length) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid Query. '\" + e.toString() + \"' filters support a maximum of 10 elements in the value array.\");\n      if (0 <= t.indexOf(null)) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid Query. '\" + e.toString() + \"' filters cannot contain 'null' in the value array.\");\n      if (0 < t.filter(function (t) {\n        return Number.isNaN(t);\n      }).length) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid Query. '\" + e.toString() + \"' filters cannot contain 'NaN' in the value array.\");\n    }, l.prototype.validateNewFilter = function (t) {\n      if (t instanceof _g) {\n        var e = [wg.ARRAY_CONTAINS, wg.ARRAY_CONTAINS_ANY],\n            n = [wg.IN, wg.ARRAY_CONTAINS_ANY],\n            r = 0 <= e.indexOf(t.op),\n            i = 0 <= n.indexOf(t.op);\n\n        if (t.isInequality()) {\n          var o = this._query.getInequalityFilterField();\n\n          if (null !== o && !o.isEqual(t.field)) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '\" + o.toString() + \"' and '\" + t.field.toString() + \"'\");\n\n          var a = this._query.getFirstOrderByField();\n\n          null !== a && this.validateOrderByAndInequalityMatch(t.field, a);\n        } else if (i || r) {\n          var s = null;\n          if (i && (s = this._query.findFilterOperator(n)), null === s && r && (s = this._query.findFilterOperator(e)), null != s) throw s === t.op ? new jf(Bf.INVALID_ARGUMENT, \"Invalid query. You cannot use more than one '\" + t.op.toString() + \"' filter.\") : new jf(Bf.INVALID_ARGUMENT, \"Invalid query. You cannot use '\" + t.op.toString() + \"' filters with '\" + s.toString() + \"' filters.\");\n        }\n      }\n    }, l.prototype.validateNewOrderBy = function (t) {\n      if (null === this._query.getFirstOrderByField()) {\n        var e = this._query.getInequalityFilterField();\n\n        null !== e && this.validateOrderByAndInequalityMatch(e, t.field);\n      }\n    }, l.prototype.validateOrderByAndInequalityMatch = function (t, e) {\n      if (!e.isEqual(t)) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '\" + t.toString() + \"' and so you must also use '\" + t.toString() + \"' as your first Query.orderBy(), but your first Query.orderBy() is on field '\" + e.toString() + \"' instead.\");\n    }, l;\n  }(),\n      ab = function () {\n    function e(t, e, n) {\n      this._firestore = t, this._originalQuery = e, this._snapshot = n, this._cachedChanges = null, this._cachedChangesIncludeMetadataChanges = null, this.metadata = new nb(n.hasPendingWrites, n.fromCache);\n    }\n\n    return Object.defineProperty(e.prototype, \"docs\", {\n      get: function get() {\n        var e = [];\n        return this.forEach(function (t) {\n          return e.push(t);\n        }), e;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"empty\", {\n      get: function get() {\n        return this._snapshot.docs.isEmpty();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"size\", {\n      get: function get() {\n        return this._snapshot.docs.size;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), e.prototype.forEach = function (e, n) {\n      var r = this;\n      $f(\"QuerySnapshot.forEach\", arguments, 1, 2), Zf(\"QuerySnapshot.forEach\", \"function\", 1, e), this._snapshot.docs.forEach(function (t) {\n        e.call(n, r.convertToDocumentImpl(t));\n      });\n    }, Object.defineProperty(e.prototype, \"query\", {\n      get: function get() {\n        return new ob(this._originalQuery, this._firestore);\n      },\n      enumerable: !0,\n      configurable: !0\n    }), e.prototype.docChanges = function (t) {\n      t && (cp(\"QuerySnapshot.docChanges\", t, [\"includeMetadataChanges\"]), np(\"QuerySnapshot.docChanges\", \"boolean\", \"includeMetadataChanges\", t.includeMetadataChanges));\n      var e = !(!t || !t.includeMetadataChanges);\n      if (e && this._snapshot.excludesMetadataChanges) throw new jf(Bf.INVALID_ARGUMENT, \"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().\");\n      return this._cachedChanges && this._cachedChangesIncludeMetadataChanges === e || (this._cachedChanges = function (i, e, o) {\n        {\n          if (o.oldDocs.isEmpty()) {\n            var n,\n                r = 0;\n            return o.docChanges.map(function (t) {\n              var e = new ib(i, t.doc.key, t.doc, o.fromCache, o.mutatedKeys.has(t.doc.key));\n              return Uf(t.type === Jm.Added, \"Invalid event type for first snapshot\"), Uf(!n || o.query.docComparator(n, t.doc) < 0, \"Got added events in wrong order\"), n = t.doc, {\n                type: \"added\",\n                doc: e,\n                oldIndex: -1,\n                newIndex: r++\n              };\n            });\n          }\n\n          var a = o.oldDocs;\n          return o.docChanges.filter(function (t) {\n            return e || t.type !== Jm.Metadata;\n          }).map(function (t) {\n            var e = new ib(i, t.doc.key, t.doc, o.fromCache, o.mutatedKeys.has(t.doc.key)),\n                n = -1,\n                r = -1;\n            return t.type !== Jm.Added && (Uf(0 <= (n = a.indexOf(t.doc.key)), \"Index for document not found\"), a = a.delete(t.doc.key)), t.type !== Jm.Removed && (a = a.add(t.doc), r = a.indexOf(t.doc.key)), {\n              type: function (t) {\n                switch (t) {\n                  case Jm.Added:\n                    return \"added\";\n\n                  case Jm.Modified:\n                  case Jm.Metadata:\n                    return \"modified\";\n\n                  case Jm.Removed:\n                    return \"removed\";\n\n                  default:\n                    return Ff(\"Unknown change type: \" + t);\n                }\n              }(t.type),\n              doc: e,\n              oldIndex: n,\n              newIndex: r\n            };\n          });\n        }\n      }(this._firestore, e, this._snapshot), this._cachedChangesIncludeMetadataChanges = e), this._cachedChanges;\n    }, e.prototype.isEqual = function (t) {\n      if (!(t instanceof e)) throw hp(\"isEqual\", \"QuerySnapshot\", 1, t);\n      return this._firestore === t._firestore && this._originalQuery.isEqual(t._originalQuery) && this._snapshot.isEqual(t._snapshot);\n    }, e.prototype.convertToDocumentImpl = function (t) {\n      return new ib(this._firestore, t.key, t, this.metadata.fromCache, this._snapshot.mutatedKeys.has(t.key));\n    }, e;\n  }();\n\n  [\"length\", \"forEach\", \"map\"].concat(\"undefined\" != typeof Symbol ? [Symbol.iterator] : []).forEach(function (t) {\n    try {\n      Object.defineProperty(ab.prototype.docChanges, t, {\n        get: function get() {\n          return function () {\n            throw new jf(Bf.INVALID_ARGUMENT, 'QuerySnapshot.docChanges has been changed from a property into a method, so usages like \"querySnapshot.docChanges\" should become \"querySnapshot.docChanges()\"');\n          }();\n        }\n      });\n    } catch (t) {}\n  });\n\n  var sb = function (r) {\n    function t(t, e) {\n      var n = r.call(this, vg.atPath(t), e) || this;\n      if (t.length % 2 != 1) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid collection reference. Collection references must have an odd number of segments, but \" + t.canonicalString() + \" has \" + t.length);\n      return n;\n    }\n\n    return ii(t, r), Object.defineProperty(t.prototype, \"id\", {\n      get: function get() {\n        return this._query.path.lastSegment();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"parent\", {\n      get: function get() {\n        var t = this._query.path.popLast();\n\n        return t.isEmpty() ? null : new eb(new Op(t), this.firestore);\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"path\", {\n      get: function get() {\n        return this._query.path.canonicalString();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.doc = function (t) {\n      if ($f(\"CollectionReference.doc\", arguments, 0, 1), 0 === arguments.length && (t = pp.newId()), Zf(\"CollectionReference.doc\", \"non-empty string\", 1, t), \"\" === t) throw new jf(Bf.INVALID_ARGUMENT, \"Document path must be a non-empty string\");\n      var e = kp.fromString(t);\n      return eb.forPath(this._query.path.child(e), this.firestore);\n    }, t.prototype.add = function (t) {\n      Xf(\"CollectionReference.add\", arguments, 1), Zf(\"CollectionReference.add\", \"object\", 1, t);\n      var e = this.doc();\n      return e.set(t).then(function () {\n        return e;\n      });\n    }, t;\n  }(ob);\n\n  function ub(t, e) {\n    if (void 0 === e) return {\n      merge: !1\n    };\n    if (cp(t, e, [\"merge\", \"mergeFields\"]), np(t, \"boolean\", \"merge\", e.merge), rp(t, \"mergeFields\", \"a string or a FieldPath\", e.mergeFields, function (t) {\n      return \"string\" == typeof t || t instanceof wv;\n    }), void 0 !== e.mergeFields && void 0 !== e.merge) throw new jf(Bf.INVALID_ARGUMENT, \"Invalid options passed to function \" + t + '(): You cannot specify both \"merge\" and \"mergeFields\".');\n    return e;\n  }\n\n  function cb(t, e) {\n    return void 0 === e ? {} : (cp(t, e, [\"serverTimestamps\"]), ip(t, 0, \"serverTimestamps\", e.serverTimestamps, [\"estimate\", \"previous\", \"none\"]), e);\n  }\n\n  function hb(t, e) {\n    tp(t, \"object\", 1, e), e && (cp(t, e, [\"source\"]), ip(t, 0, \"source\", e.source, [\"default\", \"server\", \"cache\"]));\n  }\n\n  function lb(t, e, n) {\n    if (e instanceof eb) {\n      if (e.firestore !== n) throw new jf(Bf.INVALID_ARGUMENT, \"Provided document reference is from a different Firestore instance.\");\n      return e;\n    }\n\n    throw hp(t, \"DocumentReference\", 1, e);\n  }\n\n  var fb = Wf($v, \"Use firebase.firestore() instead.\"),\n      pb = Wf(Zv, \"Use firebase.firestore().runTransaction() instead.\"),\n      db = Wf(tb, \"Use firebase.firestore().batch() instead.\"),\n      yb = Wf(eb, \"Use firebase.firestore().doc() instead.\"),\n      mb = Wf(rb),\n      gb = Wf(ib),\n      vb = Wf(ob),\n      bb = Wf(ab),\n      wb = Wf(sb, \"Use firebase.firestore().collection() instead.\"),\n      _b = {\n    Firestore: fb,\n    GeoPoint: gg,\n    Timestamp: Kp,\n    Blob: Ep,\n    Transaction: pb,\n    WriteBatch: db,\n    DocumentReference: yb,\n    DocumentSnapshot: mb,\n    Query: vb,\n    QueryDocumentSnapshot: gb,\n    QuerySnapshot: bb,\n    CollectionReference: wb,\n    FieldPath: wv,\n    FieldValue: Lv,\n    setLogLevel: $v.setLogLevel,\n    CACHE_SIZE_UNLIMITED: Yv\n  };\n\n  function Eb(t) {\n    t.INTERNAL.registerService(\"firestore\", function (t) {\n      return new $v(t);\n    }, function (t) {\n      Uf(t && \"object\" == typeof t, \"shallowCopy() expects object parameter.\");\n      var e = {};\n\n      for (var n in t) {\n        Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);\n      }\n\n      return e;\n    }(_b));\n  }\n\n  var Tb = function () {\n    function t() {}\n\n    return t.prototype.addCallback = function (t) {}, t.prototype.shutdown = function () {}, t;\n  }(),\n      Sb = \"ConnectivityMonitor\",\n      Ib = function () {\n    function t() {\n      var t = this;\n      this.networkAvailableListener = function () {\n        return t.onNetworkAvailable();\n      }, this.networkUnavailableListener = function () {\n        return t.onNetworkUnavailable();\n      }, this.callbacks = [], this.configureNetworkMonitoring();\n    }\n\n    return t.prototype.addCallback = function (t) {\n      this.callbacks.push(t);\n    }, t.prototype.shutdown = function () {\n      window.removeEventListener(\"online\", this.networkAvailableListener), window.removeEventListener(\"offline\", this.networkUnavailableListener);\n    }, t.prototype.configureNetworkMonitoring = function () {\n      window.addEventListener(\"online\", this.networkAvailableListener), window.addEventListener(\"offline\", this.networkUnavailableListener);\n    }, t.prototype.onNetworkAvailable = function () {\n      xf(Sb, \"Network connectivity changed: AVAILABLE\");\n\n      for (var t = 0, e = this.callbacks; t < e.length; t++) {\n        (0, e[t])(0);\n      }\n    }, t.prototype.onNetworkUnavailable = function () {\n      xf(Sb, \"Network connectivity changed: UNAVAILABLE\");\n\n      for (var t = 0, e = this.callbacks; t < e.length; t++) {\n        (0, e[t])(1);\n      }\n    }, t.isAvailable = function () {\n      return \"undefined\" != typeof window && void 0 !== window.addEventListener && void 0 !== window.removeEventListener;\n    }, t;\n  }(),\n      Cb = function () {\n    function t(t) {\n      this.sendFn = t.sendFn, this.closeFn = t.closeFn;\n    }\n\n    return t.prototype.onOpen = function (t) {\n      Uf(!this.wrappedOnOpen, \"Called onOpen on stream twice!\"), this.wrappedOnOpen = t;\n    }, t.prototype.onClose = function (t) {\n      Uf(!this.wrappedOnClose, \"Called onClose on stream twice!\"), this.wrappedOnClose = t;\n    }, t.prototype.onMessage = function (t) {\n      Uf(!this.wrappedOnMessage, \"Called onMessage on stream twice!\"), this.wrappedOnMessage = t;\n    }, t.prototype.close = function () {\n      this.closeFn();\n    }, t.prototype.send = function (t) {\n      this.sendFn(t);\n    }, t.prototype.callOnOpen = function () {\n      Uf(void 0 !== this.wrappedOnOpen, \"Cannot call onOpen because no callback was set\"), this.wrappedOnOpen();\n    }, t.prototype.callOnClose = function (t) {\n      Uf(void 0 !== this.wrappedOnClose, \"Cannot call onClose because no callback was set\"), this.wrappedOnClose(t);\n    }, t.prototype.callOnMessage = function (t) {\n      Uf(void 0 !== this.wrappedOnMessage, \"Cannot call onMessage because no callback was set\"), this.wrappedOnMessage(t);\n    }, t;\n  }(),\n      Nb = \"Connection\",\n      Ab = {\n    BatchGetDocuments: \"batchGet\",\n    Commit: \"commit\"\n  },\n      kb = \"gl-js/ fire/\" + Df,\n      Db = function () {\n    function t(t) {\n      this.databaseId = t.databaseId;\n      var e = t.ssl ? \"https\" : \"http\";\n      this.baseUrl = e + \"://\" + t.host, this.forceLongPolling = t.forceLongPolling;\n    }\n\n    return t.prototype.modifyHeadersForRequest = function (t, e) {\n      if (e) for (var n in e.authHeaders) {\n        e.authHeaders.hasOwnProperty(n) && (t[n] = e.authHeaders[n]);\n      }\n      t[\"X-Goog-Api-Client\"] = kb;\n    }, t.prototype.invokeRPC = function (c, n, r) {\n      var i = this,\n          o = this.makeUrl(c);\n      return new Promise(function (a, s) {\n        var u = new kf();\n        u.listenOnce(Nf.COMPLETE, function () {\n          try {\n            switch (u.getLastErrorCode()) {\n              case Cf.NO_ERROR:\n                var t = u.getResponseJson();\n                xf(Nb, \"XHR received:\", JSON.stringify(t)), a(t);\n                break;\n\n              case Cf.TIMEOUT:\n                xf(Nb, 'RPC \"' + c + '\" timed out'), s(new jf(Bf.DEADLINE_EXCEEDED, \"Request time out\"));\n                break;\n\n              case Cf.HTTP_ERROR:\n                var e = u.getStatus();\n\n                if (xf(Nb, 'RPC \"' + c + '\" failed with status:', e, \"response text:\", u.getResponseText()), 0 < e) {\n                  var n = u.getResponseJson().error;\n\n                  if (n && n.status && n.message) {\n                    var r = (i = n.status, o = i.toLowerCase().replace(\"_\", \"-\"), 0 <= Object.values(Bf).indexOf(o) ? o : Bf.UNKNOWN);\n                    s(new jf(r, n.message));\n                  } else s(new jf(Bf.UNKNOWN, \"Server responded with status \" + u.getStatus()));\n                } else xf(Nb, 'RPC \"' + c + '\" failed'), s(new jf(Bf.UNAVAILABLE, \"Connection failed.\"));\n\n                break;\n\n              default:\n                Ff('RPC \"' + c + '\" failed with unanticipated webchannel error ' + u.getLastErrorCode() + \": \" + u.getLastError() + \", giving up.\");\n            }\n          } finally {\n            xf(Nb, 'RPC \"' + c + '\" completed.');\n          }\n\n          var i, o;\n        });\n        var t = JSON.stringify(n);\n        xf(Nb, \"XHR sending: \", o + \" \" + t);\n        var e = {\n          \"Content-Type\": \"text/plain\"\n        };\n        i.modifyHeadersForRequest(e, r), u.send(o, \"POST\", t, e, 15);\n      });\n    }, t.prototype.invokeStreamingRPC = function (t, e, n) {\n      return this.invokeRPC(t, e, n);\n    }, t.prototype.openStream = function (t, e) {\n      var n = [this.baseUrl, \"/\", \"google.firestore.v1.Firestore\", \"/\", t, \"/channel\"],\n          r = If(),\n          i = {\n        backgroundChannelTest: !0,\n        httpSessionIdParam: \"gsessionid\",\n        initMessageHeaders: {},\n        messageUrlParams: {\n          database: \"projects/\" + this.databaseId.projectId + \"/databases/\" + this.databaseId.database\n        },\n        sendRawJson: !0,\n        supportsCrossDomainXhr: !0,\n        internalChannelParams: {\n          forwardChannelRequestTimeoutMs: 6e5\n        },\n        forceLongPolling: this.forceLongPolling\n      };\n      this.modifyHeadersForRequest(i.initMessageHeaders, e), Ei() || (i.httpHeadersOverwriteParam = \"$httpHeaders\");\n      var o = n.join(\"\");\n      xf(Nb, \"Creating WebChannel: \" + o + \" \" + i);\n\n      var s = r.createWebChannel(o, i),\n          a = !1,\n          u = !1,\n          c = new Cb({\n        sendFn: function sendFn(t) {\n          u ? xf(Nb, \"Not sending because WebChannel is closed:\", t) : (a || (xf(Nb, \"Opening WebChannel transport.\"), s.open(), a = !0), xf(Nb, \"WebChannel sending:\", t), s.send(t));\n        },\n        closeFn: function closeFn() {\n          return s.close();\n        }\n      }),\n          h = function h(t, e) {\n        s.listen(t, function (t) {\n          try {\n            e(t);\n          } catch (t) {\n            setTimeout(function () {\n              throw t;\n            }, 0);\n          }\n        });\n      };\n\n      return h(Af.EventType.OPEN, function () {\n        u || xf(Nb, \"WebChannel transport opened.\");\n      }), h(Af.EventType.CLOSE, function () {\n        u || (u = !0, xf(Nb, \"WebChannel transport closed\"), c.callOnClose());\n      }), h(Af.EventType.ERROR, function (t) {\n        u || (u = !0, xf(Nb, \"WebChannel transport errored:\", t), c.callOnClose(new jf(Bf.UNAVAILABLE, \"The operation could not be completed\")));\n      }), h(Af.EventType.MESSAGE, function (t) {\n        if (!u) {\n          var e = t.data[0];\n          Uf(!!e, \"Got a webchannel message without data.\");\n          var n = e,\n              r = n.error || n[0] && n[0].error;\n\n          if (r) {\n            xf(Nb, \"WebChannel received error:\", r);\n\n            var i = r.status,\n                o = function (t) {\n              var e = Hm[t];\n              if (void 0 !== e) return Xm(e);\n            }(i),\n                a = r.message;\n\n            void 0 === o && (o = Bf.INTERNAL, a = \"Unknown error status: \" + i + \" with message \" + r.message), u = !0, c.callOnClose(new jf(o, a)), s.close();\n          } else xf(Nb, \"WebChannel received:\", e), c.callOnMessage(e);\n        }\n      }), setTimeout(function () {\n        c.callOnOpen();\n      }, 0), c;\n    }, t.prototype.makeUrl = function (t) {\n      var e = Ab[t];\n      Uf(void 0 !== e, \"Unknown REST mapping for: \" + t);\n      var n = [this.baseUrl, \"/\", \"v1\"];\n      return n.push(\"/projects/\"), n.push(this.databaseId.projectId), n.push(\"/databases/\"), n.push(this.databaseId.database), n.push(\"/documents\"), n.push(\":\"), n.push(e), n.join(\"\");\n    }, t;\n  }(),\n      Rb = function () {\n    function t() {\n      this.emptyByteString = \"\", this.base64Available = \"undefined\" != typeof atob;\n    }\n\n    return Object.defineProperty(t.prototype, \"document\", {\n      get: function get() {\n        return \"undefined\" != typeof document ? document : null;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"window\", {\n      get: function get() {\n        return \"undefined\" != typeof window ? window : null;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.loadConnection = function (t) {\n      return Promise.resolve(new Db(t));\n    }, t.prototype.newConnectivityMonitor = function () {\n      return Ib.isAvailable() ? new Ib() : new Tb();\n    }, t.prototype.newSerializer = function (t) {\n      return new Qg(t, {\n        useProto3Json: !0\n      });\n    }, t.prototype.formatJSON = function (t) {\n      return JSON.stringify(t);\n    }, t.prototype.atob = function (t) {\n      return atob(t);\n    }, t.prototype.btoa = function (t) {\n      return btoa(t);\n    }, t;\n  }();\n\n  qf.setPlatform(new Rb()), Eb(Jh);\n\n  var Ob = {\n    OK: \"ok\",\n    CANCELLED: \"cancelled\",\n    UNKNOWN: \"unknown\",\n    INVALID_ARGUMENT: \"invalid-argument\",\n    DEADLINE_EXCEEDED: \"deadline-exceeded\",\n    NOT_FOUND: \"not-found\",\n    ALREADY_EXISTS: \"already-exists\",\n    PERMISSION_DENIED: \"permission-denied\",\n    UNAUTHENTICATED: \"unauthenticated\",\n    RESOURCE_EXHAUSTED: \"resource-exhausted\",\n    FAILED_PRECONDITION: \"failed-precondition\",\n    ABORTED: \"aborted\",\n    OUT_OF_RANGE: \"out-of-range\",\n    UNIMPLEMENTED: \"unimplemented\",\n    INTERNAL: \"internal\",\n    UNAVAILABLE: \"unavailable\",\n    DATA_LOSS: \"data-loss\"\n  },\n      Pb = function (i) {\n    function o(t, e, n) {\n      var r = i.call(this, e) || this;\n      return Object.setPrototypeOf(r, o.prototype), r.code = t, r.details = n, r;\n    }\n\n    return ii(o, i), o;\n  }(Error);\n\n  var xb = function () {\n    function t(t) {\n      this.app = t;\n    }\n\n    return t.prototype.getAuthToken = function () {\n      return ai(this, void 0, void 0, function () {\n        var e;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return t.trys.push([0, 2,, 3]), [4, this.app.INTERNAL.getToken()];\n\n            case 1:\n              return (e = t.sent()) ? [2, e.accessToken] : [2, void 0];\n\n            case 2:\n              return t.sent(), [2, void 0];\n\n            case 3:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.getInstanceIdToken = function () {\n      return ai(this, void 0, void 0, function () {\n        var e;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return t.trys.push([0, 2,, 3]), this.app.messaging ? [4, this.app.messaging().getToken()] : [2, void 0];\n\n            case 1:\n              return (e = t.sent()) ? [2, e] : [2, void 0];\n\n            case 2:\n              return t.sent(), [2, void 0];\n\n            case 3:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.getContext = function () {\n      return ai(this, void 0, void 0, function () {\n        var e, n;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, this.getAuthToken()];\n\n            case 1:\n              return e = t.sent(), [4, this.getInstanceIdToken()];\n\n            case 2:\n              return n = t.sent(), [2, {\n                authToken: e,\n                instanceIdToken: n\n              }];\n          }\n        });\n      });\n    }, t;\n  }();\n\n  function Mb(t, e) {\n    var n = {};\n\n    for (var r in t) {\n      t.hasOwnProperty(r) && (n[r] = e(t[r]));\n    }\n\n    return n;\n  }\n\n  var Lb = function () {\n    function t() {}\n\n    return t.prototype.encode = function (t) {\n      var e = this;\n      if (null == t) return null;\n      if (t instanceof Number && (t = t.valueOf()), \"number\" == typeof t && isFinite(t)) return t;\n      if (!0 === t || !1 === t) return t;\n      if (\"[object String]\" === Object.prototype.toString.call(t)) return t;\n      if (Array.isArray(t)) return t.map(function (t) {\n        return e.encode(t);\n      });\n      if (\"function\" == typeof t || \"object\" == typeof t) return Mb(t, function (t) {\n        return e.encode(t);\n      });\n      throw new Error(\"Data cannot be encoded in JSON: \" + t);\n    }, t.prototype.decode = function (t) {\n      var e = this;\n      if (null == t) return t;\n      if (t[\"@type\"]) switch (t[\"@type\"]) {\n        case \"type.googleapis.com/google.protobuf.Int64Value\":\n        case \"type.googleapis.com/google.protobuf.UInt64Value\":\n          var n = Number(t.value);\n          if (isNaN(n)) throw new Error(\"Data cannot be decoded from JSON: \" + t);\n          return n;\n\n        default:\n          throw new Error(\"Data cannot be decoded from JSON: \" + t);\n      }\n      return Array.isArray(t) ? t.map(function (t) {\n        return e.decode(t);\n      }) : \"function\" == typeof t || \"object\" == typeof t ? Mb(t, function (t) {\n        return e.decode(t);\n      }) : t;\n    }, t;\n  }();\n\n  var Fb,\n      Ub,\n      qb = function () {\n    function t(t, e) {\n      var n = this;\n      void 0 === e && (e = \"us-central1\"), this.app_ = t, this.region_ = e, this.serializer = new Lb(), this.emulatorOrigin = null, this.INTERNAL = {\n        delete: function _delete() {\n          return n.deleteService();\n        }\n      }, this.contextProvider = new xb(t), this.cancelAllRequests = new Promise(function (t) {\n        n.deleteService = function () {\n          return t();\n        };\n      });\n    }\n\n    return Object.defineProperty(t.prototype, \"app\", {\n      get: function get() {\n        return this.app_;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype._url = function (t) {\n      var e = this.app_.options.projectId,\n          n = this.region_;\n      return null === this.emulatorOrigin ? \"https://\" + n + \"-\" + e + \".cloudfunctions.net/\" + t : this.emulatorOrigin + \"/\" + e + \"/\" + n + \"/\" + t;\n    }, t.prototype.useFunctionsEmulator = function (t) {\n      this.emulatorOrigin = t;\n    }, t.prototype.httpsCallable = function (e, n) {\n      var r = this;\n      return function (t) {\n        return r.call(e, t, n || {});\n      };\n    }, t.prototype.postJSON = function (r, i, o) {\n      return ai(this, void 0, void 0, function () {\n        var e, n;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              o.append(\"Content-Type\", \"application/json\"), t.label = 1;\n\n            case 1:\n              return t.trys.push([1, 3,, 4]), [4, fetch(r, {\n                method: \"POST\",\n                body: JSON.stringify(i),\n                headers: o\n              })];\n\n            case 2:\n              return e = t.sent(), [3, 4];\n\n            case 3:\n              return t.sent(), [2, {\n                status: 0,\n                json: null\n              }];\n\n            case 4:\n              n = null, t.label = 5;\n\n            case 5:\n              return t.trys.push([5, 7,, 8]), [4, e.json()];\n\n            case 6:\n              return n = t.sent(), [3, 8];\n\n            case 7:\n              return t.sent(), [3, 8];\n\n            case 8:\n              return [2, {\n                status: e.status,\n                json: n\n              }];\n          }\n        });\n      });\n    }, t.prototype.call = function (h, l, f) {\n      return ai(this, void 0, void 0, function () {\n        var e, r, i, o, a, s, u, c;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return e = this._url(h), l = this.serializer.encode(l), r = {\n                data: l\n              }, i = new Headers(), [4, this.contextProvider.getContext()];\n\n            case 1:\n              return (o = t.sent()).authToken && i.append(\"Authorization\", \"Bearer \" + o.authToken), o.instanceIdToken && i.append(\"Firebase-Instance-ID-Token\", o.instanceIdToken), a = f.timeout || 7e4, [4, Promise.race([this.postJSON(e, r, i), (n = a, new Promise(function (t, e) {\n                setTimeout(function () {\n                  e(new Pb(\"deadline-exceeded\", \"deadline-exceeded\"));\n                }, n);\n              })), this.cancelAllRequests])];\n\n            case 2:\n              if (!(s = t.sent())) throw new Pb(\"cancelled\", \"Firebase Functions instance was deleted.\");\n              if (u = function (t, e, n) {\n                var r = function (t) {\n                  if (200 <= t && t < 300) return \"ok\";\n\n                  switch (t) {\n                    case 0:\n                      return \"internal\";\n\n                    case 400:\n                      return \"invalid-argument\";\n\n                    case 401:\n                      return \"unauthenticated\";\n\n                    case 403:\n                      return \"permission-denied\";\n\n                    case 404:\n                      return \"not-found\";\n\n                    case 409:\n                      return \"aborted\";\n\n                    case 429:\n                      return \"resource-exhausted\";\n\n                    case 499:\n                      return \"cancelled\";\n\n                    case 500:\n                      return \"internal\";\n\n                    case 501:\n                      return \"unimplemented\";\n\n                    case 503:\n                      return \"unavailable\";\n\n                    case 504:\n                      return \"deadline-exceeded\";\n                  }\n\n                  return \"unknown\";\n                }(t),\n                    i = r,\n                    o = void 0;\n\n                try {\n                  var a = e && e.error;\n\n                  if (a) {\n                    var s = a.status;\n\n                    if (\"string\" == typeof s) {\n                      if (!Ob[s]) return new Pb(\"internal\", \"internal\");\n                      r = Ob[s], i = s;\n                    }\n\n                    var u = a.message;\n                    \"string\" == typeof u && (i = u), void 0 !== (o = a.details) && (o = n.decode(o));\n                  }\n                } catch (t) {}\n\n                return \"ok\" === r ? null : new Pb(r, i, o);\n              }(s.status, s.json, this.serializer)) throw u;\n              if (!s.json) throw new Pb(\"internal\", \"Response is not valid JSON object.\");\n              if (void 0 === (c = s.json.data) && (c = s.json.result), void 0 === c) throw new Pb(\"internal\", \"Response is missing data field.\");\n              return [2, {\n                data: this.serializer.decode(c)\n              }];\n          }\n\n          var n;\n        });\n      });\n    }, t;\n  }();\n\n  function Vb(t, e, n) {\n    return new qb(t, n);\n  }\n\n  Fb = {\n    Functions: qb\n  }, Jh.INTERNAL.registerService(\"functions\", Vb, Fb, void 0, !0);\n  var Bb,\n      jb,\n      Wb,\n      Kb,\n      Qb = ((Ub = {})[\"only-available-in-window\"] = \"This method is available in a Window context.\", Ub[\"only-available-in-sw\"] = \"This method is available in a service worker context.\", Ub[\"should-be-overriden\"] = \"This method should be overriden by extended classes.\", Ub[\"bad-sender-id\"] = \"Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().\", Ub[\"permission-default\"] = \"The required permissions were not granted and dismissed instead.\", Ub[\"permission-blocked\"] = \"The required permissions were not granted and blocked instead.\", Ub[\"unsupported-browser\"] = \"This browser doesn't support the API's required to use the firebase SDK.\", Ub[\"notifications-blocked\"] = \"Notifications have been blocked.\", Ub[\"failed-serviceworker-registration\"] = \"We are unable to register the default service worker. {$browserErrorMessage}\", Ub[\"sw-registration-expected\"] = \"A service worker registration was the expected input.\", Ub[\"get-subscription-failed\"] = \"There was an error when trying to get any existing Push Subscriptions.\", Ub[\"invalid-saved-token\"] = \"Unable to access details of the saved token.\", Ub[\"sw-reg-redundant\"] = \"The service worker being used for push was made redundant.\", Ub[\"token-subscribe-failed\"] = \"A problem occured while subscribing the user to FCM: {$errorInfo}\", Ub[\"token-subscribe-no-token\"] = \"FCM returned no token when subscribing the user to push.\", Ub[\"token-subscribe-no-push-set\"] = \"FCM returned an invalid response when getting an FCM token.\", Ub[\"token-unsubscribe-failed\"] = \"A problem occured while unsubscribing the user from FCM: {$errorInfo}\", Ub[\"token-update-failed\"] = \"A problem occured while updating the user from FCM: {$errorInfo}\", Ub[\"token-update-no-token\"] = \"FCM returned no token when updating the user to push.\", Ub[\"use-sw-before-get-token\"] = \"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.\", Ub[\"invalid-delete-token\"] = \"You must pass a valid token into deleteToken(), i.e. the token from getToken().\", Ub[\"delete-token-not-found\"] = \"The deletion attempt for token could not be performed as the token was not found.\", Ub[\"delete-scope-not-found\"] = \"The deletion attempt for service worker scope could not be performed as the scope was not found.\", Ub[\"bg-handler-function-expected\"] = \"The input to setBackgroundMessageHandler() must be a function.\", Ub[\"no-window-client-to-msg\"] = \"An attempt was made to message a non-existant window client.\", Ub[\"unable-to-resubscribe\"] = \"There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$errorInfo}\", Ub[\"no-fcm-token-for-resubscribe\"] = \"Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.\", Ub[\"failed-to-delete-token\"] = \"Unable to delete the currently saved token.\", Ub[\"no-sw-in-reg\"] = \"Even though the service worker registration was successful, there was a problem accessing the service worker itself.\", Ub[\"incorrect-gcm-sender-id\"] = \"Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.\", Ub[\"bad-scope\"] = \"The service worker scope must be a string with at least one character.\", Ub[\"bad-vapid-key\"] = \"The public VAPID key is not a Uint8Array with 65 bytes.\", Ub[\"bad-subscription\"] = \"The subscription must be a valid PushSubscription.\", Ub[\"bad-token\"] = \"The FCM Token used for storage / lookup was not a valid token string.\", Ub[\"bad-push-set\"] = \"The FCM push set used for storage / lookup was not not a valid push set string.\", Ub[\"failed-delete-vapid-key\"] = \"The VAPID key could not be deleted.\", Ub[\"invalid-public-vapid-key\"] = \"The public VAPID key must be a string.\", Ub[\"use-public-key-before-get-token\"] = \"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.\", Ub[\"public-vapid-key-decryption-failed\"] = \"The public VAPID key did not equal 65 bytes when decrypted.\", Ub),\n      Hb = new Ii(\"messaging\", \"Messaging\", Qb),\n      Gb = new Uint8Array([4, 51, 148, 247, 223, 161, 235, 177, 220, 3, 162, 94, 21, 113, 219, 72, 211, 46, 237, 237, 178, 52, 219, 183, 71, 58, 12, 143, 196, 204, 225, 111, 60, 140, 132, 223, 171, 182, 102, 62, 242, 12, 212, 139, 254, 227, 249, 118, 47, 20, 28, 99, 8, 106, 111, 45, 177, 26, 149, 176, 206, 55, 192, 156, 110]),\n      zb = \"https://fcm.googleapis.com\";\n\n  function Yb(t, e) {\n    if (null == t || null == e) return !1;\n    if (t === e) return !0;\n    if (t.byteLength !== e.byteLength) return !1;\n\n    for (var n = new DataView(t), r = new DataView(e), i = 0; i < t.byteLength; i++) {\n      if (n.getUint8(i) !== r.getUint8(i)) return !1;\n    }\n\n    return !0;\n  }\n\n  function Xb(t) {\n    var e;\n    return (e = new Uint8Array(t), btoa(String.fromCharCode.apply(String, hi(e)))).replace(/=/g, \"\").replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\n  }\n\n  (jb = Bb || (Bb = {})).TYPE_OF_MSG = \"firebase-messaging-msg-type\", jb.DATA = \"firebase-messaging-msg-data\", (Kb = Wb || (Wb = {})).PUSH_MSG_RECEIVED = \"push-msg-received\", Kb.NOTIFICATION_CLICKED = \"notification-clicked\";\n\n  var Jb = function () {\n    function t() {}\n\n    return t.prototype.getToken = function (h, l, f) {\n      return ai(this, void 0, void 0, function () {\n        var e, n, r, i, o, a, s, u, c;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              e = Xb(l.getKey(\"p256dh\")), n = Xb(l.getKey(\"auth\")), r = \"authorized_entity=\" + h + \"&endpoint=\" + l.endpoint + \"&encryption_key=\" + e + \"&encryption_auth=\" + n, Yb(f.buffer, Gb.buffer) || (i = Xb(f), r += \"&application_pub_key=\" + i), (o = new Headers()).append(\"Content-Type\", \"application/x-www-form-urlencoded\"), a = {\n                method: \"POST\",\n                headers: o,\n                body: r\n              }, t.label = 1;\n\n            case 1:\n              return t.trys.push([1, 4,, 5]), [4, fetch(zb + \"/fcm/connect/subscribe\", a)];\n\n            case 2:\n              return [4, t.sent().json()];\n\n            case 3:\n              return s = t.sent(), [3, 5];\n\n            case 4:\n              throw u = t.sent(), Hb.create(\"token-subscribe-failed\", {\n                errorInfo: u\n              });\n\n            case 5:\n              if (s.error) throw c = s.error.message, Hb.create(\"token-subscribe-failed\", {\n                errorInfo: c\n              });\n              if (!s.token) throw Hb.create(\"token-subscribe-no-token\");\n              if (!s.pushSet) throw Hb.create(\"token-subscribe-no-push-set\");\n              return [2, {\n                token: s.token,\n                pushSet: s.pushSet\n              }];\n          }\n        });\n      });\n    }, t.prototype.updateToken = function (h, l, f, p, d) {\n      return ai(this, void 0, void 0, function () {\n        var e, n, r, i, o, a, s, u, c;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              e = Xb(p.getKey(\"p256dh\")), n = Xb(p.getKey(\"auth\")), r = \"push_set=\" + f + \"&token=\" + l + \"&authorized_entity=\" + h + \"&endpoint=\" + p.endpoint + \"&encryption_key=\" + e + \"&encryption_auth=\" + n, Yb(d.buffer, Gb.buffer) || (i = Xb(d), r += \"&application_pub_key=\" + i), (o = new Headers()).append(\"Content-Type\", \"application/x-www-form-urlencoded\"), a = {\n                method: \"POST\",\n                headers: o,\n                body: r\n              }, t.label = 1;\n\n            case 1:\n              return t.trys.push([1, 4,, 5]), [4, fetch(zb + \"/fcm/connect/subscribe\", a)];\n\n            case 2:\n              return [4, t.sent().json()];\n\n            case 3:\n              return s = t.sent(), [3, 5];\n\n            case 4:\n              throw u = t.sent(), Hb.create(\"token-update-failed\", {\n                errorInfo: u\n              });\n\n            case 5:\n              if (s.error) throw c = s.error.message, Hb.create(\"token-update-failed\", {\n                errorInfo: c\n              });\n              if (!s.token) throw Hb.create(\"token-update-no-token\");\n              return [2, s.token];\n          }\n        });\n      });\n    }, t.prototype.deleteToken = function (s, u, c) {\n      return ai(this, void 0, void 0, function () {\n        var e, n, r, i, o, a;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              e = \"authorized_entity=\" + s + \"&token=\" + u + \"&pushSet=\" + c, (n = new Headers()).append(\"Content-Type\", \"application/x-www-form-urlencoded\"), r = {\n                method: \"POST\",\n                headers: n,\n                body: e\n              }, t.label = 1;\n\n            case 1:\n              return t.trys.push([1, 4,, 5]), [4, fetch(zb + \"/fcm/connect/unsubscribe\", r)];\n\n            case 2:\n              return [4, t.sent().json()];\n\n            case 3:\n              if ((i = t.sent()).error) throw o = i.error.message, Hb.create(\"token-unsubscribe-failed\", {\n                errorInfo: o\n              });\n              return [3, 5];\n\n            case 4:\n              throw a = t.sent(), Hb.create(\"token-unsubscribe-failed\", {\n                errorInfo: a\n              });\n\n            case 5:\n              return [2];\n          }\n        });\n      });\n    }, t;\n  }();\n\n  function $b(t) {\n    for (var e = (t + \"=\".repeat((4 - t.length % 4) % 4)).replace(/\\-/g, \"+\").replace(/_/g, \"/\"), n = atob(e), r = new Uint8Array(n.length), i = 0; i < n.length; ++i) {\n      r[i] = n.charCodeAt(i);\n    }\n\n    return r;\n  }\n\n  var Zb = \"undefined\",\n      tw = \"fcm_token_object_Store\";\n\n  function ew() {\n    var e = indexedDB.open(Zb);\n    e.onerror = function (t) {}, e.onsuccess = function (t) {\n      !function (n) {\n        if (n.objectStoreNames.contains(tw)) {\n          var t = n.transaction(tw).objectStore(tw),\n              r = new Jb(),\n              i = t.openCursor();\n          i.onerror = function (t) {\n            console.warn(\"Unable to cleanup old IDB.\", t);\n          }, i.onsuccess = function () {\n            var t = i.result;\n\n            if (t) {\n              var e = t.value;\n              r.deleteToken(e.fcmSenderId, e.fcmToken, e.fcmPushSet), t.continue();\n            } else n.close(), indexedDB.deleteDatabase(Zb);\n          };\n        }\n      }(e.result);\n    };\n  }\n\n  var nw = function () {\n    function t() {\n      this.dbPromise = null;\n    }\n\n    return t.prototype.get = function (e) {\n      return this.createTransaction(function (t) {\n        return t.get(e);\n      });\n    }, t.prototype.getIndex = function (e, n) {\n      return this.createTransaction(function (t) {\n        return t.index(e).get(n);\n      });\n    }, t.prototype.put = function (e) {\n      return this.createTransaction(function (t) {\n        return t.put(e);\n      }, \"readwrite\");\n    }, t.prototype.delete = function (e) {\n      return this.createTransaction(function (t) {\n        return t.delete(e);\n      }, \"readwrite\");\n    }, t.prototype.closeDatabase = function () {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.dbPromise ? [4, this.dbPromise] : [3, 2];\n\n            case 1:\n              t.sent().close(), this.dbPromise = null, t.label = 2;\n\n            case 2:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.createTransaction = function (a, s) {\n      return void 0 === s && (s = \"readonly\"), ai(this, void 0, void 0, function () {\n        var e, r, i, o;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, this.getDb()];\n\n            case 1:\n              return e = t.sent(), r = e.transaction(this.objectStoreName, s), i = r.objectStore(this.objectStoreName), [4, (n = a(i), new Promise(function (t, e) {\n                n.onsuccess = function () {\n                  t(n.result);\n                }, n.onerror = function () {\n                  e(n.error);\n                };\n              }))];\n\n            case 2:\n              return o = t.sent(), [2, new Promise(function (t, e) {\n                r.oncomplete = function () {\n                  t(o);\n                }, r.onerror = function () {\n                  e(r.error);\n                };\n              })];\n          }\n\n          var n;\n        });\n      });\n    }, t.prototype.getDb = function () {\n      var r = this;\n      return this.dbPromise || (this.dbPromise = new Promise(function (t, e) {\n        var n = indexedDB.open(r.dbName, r.dbVersion);\n        n.onsuccess = function () {\n          t(n.result);\n        }, n.onerror = function () {\n          r.dbPromise = null, e(n.error);\n        }, n.onupgradeneeded = function (t) {\n          return r.onDbUpgrade(n, t);\n        };\n      })), this.dbPromise;\n    }, t;\n  }();\n\n  var rw = function (e) {\n    function t() {\n      var t = null !== e && e.apply(this, arguments) || this;\n      return t.dbName = \"fcm_token_details_db\", t.dbVersion = 3, t.objectStoreName = \"fcm_token_object_Store\", t;\n    }\n\n    return ii(t, e), t.prototype.onDbUpgrade = function (t, e) {\n      var n = t.result;\n\n      switch (e.oldVersion) {\n        case 0:\n          (r = n.createObjectStore(this.objectStoreName, {\n            keyPath: \"swScope\"\n          })).createIndex(\"fcmSenderId\", \"fcmSenderId\", {\n            unique: !1\n          }), r.createIndex(\"fcmToken\", \"fcmToken\", {\n            unique: !0\n          });\n\n        case 1:\n          ew();\n\n        case 2:\n          var r,\n              i = (r = t.transaction.objectStore(this.objectStoreName)).openCursor();\n\n          i.onsuccess = function () {\n            var t = i.result;\n\n            if (t) {\n              var e = t.value,\n                  n = _oi({}, e);\n\n              e.createTime || (n.createTime = Date.now()), \"string\" == typeof e.vapidKey && (n.vapidKey = $b(e.vapidKey)), \"string\" == typeof e.auth && (n.auth = $b(e.auth).buffer), \"string\" == typeof e.auth && (n.p256dh = $b(e.p256dh).buffer), t.update(n), t.continue();\n            }\n          };\n\n      }\n    }, t.prototype.getTokenDetailsFromToken = function (e) {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          if (!e) throw Hb.create(\"bad-token\");\n          return iw({\n            fcmToken: e\n          }), [2, this.getIndex(\"fcmToken\", e)];\n        });\n      });\n    }, t.prototype.getTokenDetailsFromSWScope = function (e) {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          if (!e) throw Hb.create(\"bad-scope\");\n          return iw({\n            swScope: e\n          }), [2, this.get(e)];\n        });\n      });\n    }, t.prototype.saveTokenDetails = function (e) {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          if (!e.swScope) throw Hb.create(\"bad-scope\");\n          if (!e.vapidKey) throw Hb.create(\"bad-vapid-key\");\n          if (!e.endpoint || !e.auth || !e.p256dh) throw Hb.create(\"bad-subscription\");\n          if (!e.fcmSenderId) throw Hb.create(\"bad-sender-id\");\n          if (!e.fcmToken) throw Hb.create(\"bad-token\");\n          if (!e.fcmPushSet) throw Hb.create(\"bad-push-set\");\n          return iw(e), [2, this.put(e)];\n        });\n      });\n    }, t.prototype.deleteToken = function (n) {\n      return ai(this, void 0, void 0, function () {\n        var e;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return \"string\" != typeof n || 0 === n.length ? [2, Promise.reject(Hb.create(\"invalid-delete-token\"))] : [4, this.getTokenDetailsFromToken(n)];\n\n            case 1:\n              if (!(e = t.sent())) throw Hb.create(\"delete-token-not-found\");\n              return [4, this.delete(e.swScope)];\n\n            case 2:\n              return t.sent(), [2, e];\n          }\n        });\n      });\n    }, t;\n  }(nw);\n\n  function iw(t) {\n    if (t.fcmToken && (\"string\" != typeof t.fcmToken || 0 === t.fcmToken.length)) throw Hb.create(\"bad-token\");\n    if (t.swScope && (\"string\" != typeof t.swScope || 0 === t.swScope.length)) throw Hb.create(\"bad-scope\");\n    if (t.vapidKey && (!(t.vapidKey instanceof Uint8Array) || 65 !== t.vapidKey.length)) throw Hb.create(\"bad-vapid-key\");\n    if (t.endpoint && (\"string\" != typeof t.endpoint || 0 === t.endpoint.length)) throw Hb.create(\"bad-subscription\");\n    if (t.auth && !(t.auth instanceof ArrayBuffer)) throw Hb.create(\"bad-subscription\");\n    if (t.p256dh && !(t.p256dh instanceof ArrayBuffer)) throw Hb.create(\"bad-subscription\");\n    if (t.fcmSenderId && (\"string\" != typeof t.fcmSenderId || 0 === t.fcmSenderId.length)) throw Hb.create(\"bad-sender-id\");\n    if (t.fcmPushSet && (\"string\" != typeof t.fcmPushSet || 0 === t.fcmPushSet.length)) throw Hb.create(\"bad-push-set\");\n  }\n\n  var ow = function (e) {\n    function t() {\n      var t = null !== e && e.apply(this, arguments) || this;\n      return t.dbName = \"fcm_vapid_details_db\", t.dbVersion = 1, t.objectStoreName = \"fcm_vapid_object_Store\", t;\n    }\n\n    return ii(t, e), t.prototype.onDbUpgrade = function (t) {\n      t.result.createObjectStore(this.objectStoreName, {\n        keyPath: \"swScope\"\n      });\n    }, t.prototype.getVapidFromSWScope = function (n) {\n      return ai(this, void 0, void 0, function () {\n        var e;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              if (\"string\" != typeof n || 0 === n.length) throw Hb.create(\"bad-scope\");\n              return [4, this.get(n)];\n\n            case 1:\n              return [2, (e = t.sent()) ? e.vapidKey : void 0];\n          }\n        });\n      });\n    }, t.prototype.saveVapidDetails = function (n, r) {\n      return ai(this, void 0, void 0, function () {\n        var e;\n        return si(this, function (t) {\n          if (\"string\" != typeof n || 0 === n.length) throw Hb.create(\"bad-scope\");\n          if (null === r || 65 !== r.length) throw Hb.create(\"bad-vapid-key\");\n          return e = {\n            swScope: n,\n            vapidKey: r\n          }, [2, this.put(e)];\n        });\n      });\n    }, t.prototype.deleteVapidDetails = function (n) {\n      return ai(this, void 0, void 0, function () {\n        var e;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, this.getVapidFromSWScope(n)];\n\n            case 1:\n              if (!(e = t.sent())) throw Hb.create(\"delete-scope-not-found\");\n              return [4, this.delete(n)];\n\n            case 2:\n              return t.sent(), [2, e];\n          }\n        });\n      });\n    }, t;\n  }(nw),\n      aw = \"messagingSenderId\",\n      sw = function () {\n    function t(t) {\n      var e = this;\n      if (!t.options[aw] || \"string\" != typeof t.options[aw]) throw Hb.create(\"bad-sender-id\");\n      this.messagingSenderId = t.options[aw], this.tokenDetailsModel = new rw(), this.vapidDetailsModel = new ow(), this.iidModel = new Jb(), this.app = t, this.INTERNAL = {\n        delete: function _delete() {\n          return e.delete();\n        }\n      };\n    }\n\n    return t.prototype.getToken = function () {\n      return ai(this, void 0, void 0, function () {\n        var e, n, r, i, o;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              if (\"denied\" === (e = this.getNotificationPermission_())) throw Hb.create(\"notifications-blocked\");\n              return \"granted\" !== e ? [2, null] : [4, this.getSWRegistration_()];\n\n            case 1:\n              return n = t.sent(), [4, this.getPublicVapidKey_()];\n\n            case 2:\n              return r = t.sent(), [4, this.getPushSubscription(n, r)];\n\n            case 3:\n              return i = t.sent(), [4, this.tokenDetailsModel.getTokenDetailsFromSWScope(n.scope)];\n\n            case 4:\n              return (o = t.sent()) ? [2, this.manageExistingToken(n, i, r, o)] : [2, this.getNewToken(n, i, r)];\n          }\n        });\n      });\n    }, t.prototype.manageExistingToken = function (e, n, r, i) {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return function (t, e, n) {\n                if (!n.vapidKey || !Yb(e.buffer, n.vapidKey.buffer)) return !1;\n                var r = t.endpoint === n.endpoint,\n                    i = Yb(t.getKey(\"auth\"), n.auth),\n                    o = Yb(t.getKey(\"p256dh\"), n.p256dh);\n                return r && i && o;\n              }(n, r, i) ? Date.now() < i.createTime + 6048e5 ? [2, i.fcmToken] : [2, this.updateToken(e, n, r, i)] : [4, this.deleteTokenFromDB(i.fcmToken)];\n\n            case 1:\n              return t.sent(), [2, this.getNewToken(e, n, r)];\n          }\n        });\n      });\n    }, t.prototype.updateToken = function (i, o, a, s) {\n      return ai(this, void 0, void 0, function () {\n        var e, n, r;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return t.trys.push([0, 4,, 6]), [4, this.iidModel.updateToken(this.messagingSenderId, s.fcmToken, s.fcmPushSet, o, a)];\n\n            case 1:\n              return e = t.sent(), n = {\n                swScope: i.scope,\n                vapidKey: a,\n                fcmSenderId: this.messagingSenderId,\n                fcmToken: e,\n                fcmPushSet: s.fcmPushSet,\n                createTime: Date.now(),\n                endpoint: o.endpoint,\n                auth: o.getKey(\"auth\"),\n                p256dh: o.getKey(\"p256dh\")\n              }, [4, this.tokenDetailsModel.saveTokenDetails(n)];\n\n            case 2:\n              return t.sent(), [4, this.vapidDetailsModel.saveVapidDetails(i.scope, a)];\n\n            case 3:\n              return t.sent(), [2, e];\n\n            case 4:\n              return r = t.sent(), [4, this.deleteToken(s.fcmToken)];\n\n            case 5:\n              throw t.sent(), r;\n\n            case 6:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.getNewToken = function (r, i, o) {\n      return ai(this, void 0, void 0, function () {\n        var e, n;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, this.iidModel.getToken(this.messagingSenderId, i, o)];\n\n            case 1:\n              return e = t.sent(), n = {\n                swScope: r.scope,\n                vapidKey: o,\n                fcmSenderId: this.messagingSenderId,\n                fcmToken: e.token,\n                fcmPushSet: e.pushSet,\n                createTime: Date.now(),\n                endpoint: i.endpoint,\n                auth: i.getKey(\"auth\"),\n                p256dh: i.getKey(\"p256dh\")\n              }, [4, this.tokenDetailsModel.saveTokenDetails(n)];\n\n            case 2:\n              return t.sent(), [4, this.vapidDetailsModel.saveVapidDetails(r.scope, o)];\n\n            case 3:\n              return t.sent(), [2, e.token];\n          }\n        });\n      });\n    }, t.prototype.deleteToken = function (r) {\n      return ai(this, void 0, void 0, function () {\n        var e, n;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, this.deleteTokenFromDB(r)];\n\n            case 1:\n              return t.sent(), [4, this.getSWRegistration_()];\n\n            case 2:\n              return (e = t.sent()) ? [4, e.pushManager.getSubscription()] : [3, 4];\n\n            case 3:\n              if (n = t.sent()) return [2, n.unsubscribe()];\n              t.label = 4;\n\n            case 4:\n              return [2, !0];\n          }\n        });\n      });\n    }, t.prototype.deleteTokenFromDB = function (n) {\n      return ai(this, void 0, void 0, function () {\n        var e;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, this.tokenDetailsModel.deleteToken(n)];\n\n            case 1:\n              return e = t.sent(), [4, this.iidModel.deleteToken(e.fcmSenderId, e.fcmToken, e.fcmPushSet)];\n\n            case 2:\n              return t.sent(), [2];\n          }\n        });\n      });\n    }, t.prototype.getPushSubscription = function (e, n) {\n      return e.pushManager.getSubscription().then(function (t) {\n        return t || e.pushManager.subscribe({\n          userVisibleOnly: !0,\n          applicationServerKey: n\n        });\n      });\n    }, t.prototype.requestPermission = function () {\n      throw Hb.create(\"only-available-in-window\");\n    }, t.prototype.useServiceWorker = function (t) {\n      throw Hb.create(\"only-available-in-window\");\n    }, t.prototype.usePublicVapidKey = function (t) {\n      throw Hb.create(\"only-available-in-window\");\n    }, t.prototype.onMessage = function (t, e, n) {\n      throw Hb.create(\"only-available-in-window\");\n    }, t.prototype.onTokenRefresh = function (t, e, n) {\n      throw Hb.create(\"only-available-in-window\");\n    }, t.prototype.setBackgroundMessageHandler = function (t) {\n      throw Hb.create(\"only-available-in-sw\");\n    }, t.prototype.delete = function () {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, Promise.all([this.tokenDetailsModel.closeDatabase(), this.vapidDetailsModel.closeDatabase()])];\n\n            case 1:\n              return t.sent(), [2];\n          }\n        });\n      });\n    }, t.prototype.getNotificationPermission_ = function () {\n      return Notification.permission;\n    }, t.prototype.getTokenDetailsModel = function () {\n      return this.tokenDetailsModel;\n    }, t.prototype.getVapidDetailsModel = function () {\n      return this.vapidDetailsModel;\n    }, t.prototype.getIidModel = function () {\n      return this.iidModel;\n    }, t;\n  }();\n\n  var uw = \"FCM_MSG\",\n      cw = function (n) {\n    function t(t) {\n      var e = n.call(this, t) || this;\n      return e.bgMessageHandler = null, self.addEventListener(\"push\", function (t) {\n        e.onPush(t);\n      }), self.addEventListener(\"pushsubscriptionchange\", function (t) {\n        e.onSubChange(t);\n      }), self.addEventListener(\"notificationclick\", function (t) {\n        e.onNotificationClick(t);\n      }), e;\n    }\n\n    return ii(t, n), t.prototype.onPush = function (t) {\n      t.waitUntil(this.onPush_(t));\n    }, t.prototype.onSubChange = function (t) {\n      t.waitUntil(this.onSubChange_(t));\n    }, t.prototype.onNotificationClick = function (t) {\n      t.waitUntil(this.onNotificationClick_(t));\n    }, t.prototype.onPush_ = function (s) {\n      return ai(this, void 0, void 0, function () {\n        var e, n, r, i, o, a;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              if (!s.data) return [2];\n\n              try {\n                e = s.data.json();\n              } catch (t) {\n                return [2];\n              }\n\n              return [4, this.hasVisibleClients_()];\n\n            case 1:\n              return t.sent() ? [2, this.sendMessageToWindowClients_(e)] : (n = this.getNotificationData_(e)) ? (r = n.title || \"\", [4, this.getSWRegistration_()]) : [3, 3];\n\n            case 2:\n              return i = t.sent(), o = n.actions, a = Notification.maxActions, o && a && o.length > a && console.warn(\"This browser only supports \" + a + \" actions.The remaining actions will not be displayed.\"), [2, i.showNotification(r, n)];\n\n            case 3:\n              return this.bgMessageHandler ? [4, this.bgMessageHandler(e)] : [3, 5];\n\n            case 4:\n              return t.sent(), [2];\n\n            case 5:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.onSubChange_ = function (t) {\n      return ai(this, void 0, void 0, function () {\n        var e, n, r, i;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return t.trys.push([0, 2,, 3]), [4, this.getSWRegistration_()];\n\n            case 1:\n              return e = t.sent(), [3, 3];\n\n            case 2:\n              throw n = t.sent(), Hb.create(\"unable-to-resubscribe\", {\n                errorInfo: n\n              });\n\n            case 3:\n              return t.trys.push([3, 5,, 8]), [4, e.pushManager.getSubscription()];\n\n            case 4:\n              return t.sent(), [3, 8];\n\n            case 5:\n              return r = t.sent(), [4, this.getTokenDetailsModel().getTokenDetailsFromSWScope(e.scope)];\n\n            case 6:\n              if (!(i = t.sent())) throw r;\n              return [4, this.deleteToken(i.fcmToken)];\n\n            case 7:\n              throw t.sent(), r;\n\n            case 8:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.onNotificationClick_ = function (o) {\n      return ai(this, void 0, void 0, function () {\n        var e, n, r, i;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return o.notification && o.notification.data && o.notification.data[uw] ? o.action ? [2] : (o.stopImmediatePropagation(), o.notification.close(), (e = o.notification.data[uw]).notification && (n = e.fcmOptions && e.fcmOptions.link || e.notification.click_action) ? [4, this.getWindowClient_(n)] : [2]) : [2];\n\n            case 1:\n              return (r = t.sent()) ? [3, 3] : [4, self.clients.openWindow(n)];\n\n            case 2:\n              return r = t.sent(), [3, 5];\n\n            case 3:\n              return [4, r.focus()];\n\n            case 4:\n              r = t.sent(), t.label = 5;\n\n            case 5:\n              return r ? (delete e.notification, delete e.fcmOptions, i = lw(Wb.NOTIFICATION_CLICKED, e), [2, this.attemptToMessageClient_(r, i)]) : [2];\n          }\n        });\n      });\n    }, t.prototype.getNotificationData_ = function (t) {\n      var e;\n\n      if (t && \"object\" == typeof t.notification) {\n        var n = _oi({}, t.notification);\n\n        return n.data = _oi({}, t.notification.data, ((e = {})[uw] = t, e)), n;\n      }\n    }, t.prototype.setBackgroundMessageHandler = function (t) {\n      if (!t || \"function\" != typeof t) throw Hb.create(\"bg-handler-function-expected\");\n      this.bgMessageHandler = t;\n    }, t.prototype.getWindowClient_ = function (o) {\n      return ai(this, void 0, void 0, function () {\n        var e, n, r, i;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return e = new URL(o, self.location.href).href, [4, hw()];\n\n            case 1:\n              for (n = t.sent(), r = null, i = 0; i < n.length; i++) {\n                if (new URL(n[i].url, self.location.href).href === e) {\n                  r = n[i];\n                  break;\n                }\n              }\n\n              return [2, r];\n          }\n        });\n      });\n    }, t.prototype.attemptToMessageClient_ = function (e, n) {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          if (!e) throw Hb.create(\"no-window-client-to-msg\");\n          return e.postMessage(n), [2];\n        });\n      });\n    }, t.prototype.hasVisibleClients_ = function () {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, hw()];\n\n            case 1:\n              return [2, t.sent().some(function (t) {\n                return \"visible\" === t.visibilityState && !t.url.startsWith(\"chrome-extension://\");\n              })];\n          }\n        });\n      });\n    }, t.prototype.sendMessageToWindowClients_ = function (i) {\n      return ai(this, void 0, void 0, function () {\n        var e,\n            n,\n            r = this;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, hw()];\n\n            case 1:\n              return e = t.sent(), n = lw(Wb.PUSH_MSG_RECEIVED, i), [4, Promise.all(e.map(function (t) {\n                return r.attemptToMessageClient_(t, n);\n              }))];\n\n            case 2:\n              return t.sent(), [2];\n          }\n        });\n      });\n    }, t.prototype.getSWRegistration_ = function () {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          return [2, self.registration];\n        });\n      });\n    }, t.prototype.getPublicVapidKey_ = function () {\n      return ai(this, void 0, void 0, function () {\n        var e, n;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, this.getSWRegistration_()];\n\n            case 1:\n              if (!(e = t.sent())) throw Hb.create(\"sw-registration-expected\");\n              return [4, this.getVapidDetailsModel().getVapidFromSWScope(e.scope)];\n\n            case 2:\n              return null == (n = t.sent()) ? [2, Gb] : [2, n];\n          }\n        });\n      });\n    }, t;\n  }(sw);\n\n  function hw() {\n    return self.clients.matchAll({\n      type: \"window\",\n      includeUncontrolled: !0\n    });\n  }\n\n  function lw(t, e) {\n    var n;\n    return (n = {})[Bb.TYPE_OF_MSG] = t, n[Bb.DATA] = e, n;\n  }\n\n  var fw,\n      pw = function (n) {\n    function t(t) {\n      var e = n.call(this, t) || this;\n      return e.registrationToUse = null, e.publicVapidKeyToUse = null, e.manifestCheckPromise = null, e.messageObserver = null, e.tokenRefreshObserver = null, e.onMessageInternal = Mi(function (t) {\n        e.messageObserver = t;\n      }), e.onTokenRefreshInternal = Mi(function (t) {\n        e.tokenRefreshObserver = t;\n      }), e.setupSWMessageListener_(), e;\n    }\n\n    return ii(t, n), t.prototype.getToken = function () {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.manifestCheckPromise || (this.manifestCheckPromise = function () {\n                return ai(this, void 0, void 0, function () {\n                  var e, n;\n                  return si(this, function (t) {\n                    switch (t.label) {\n                      case 0:\n                        if (!(e = document.querySelector('link[rel=\"manifest\"]'))) return [2];\n                        t.label = 1;\n\n                      case 1:\n                        return t.trys.push([1, 4,, 5]), [4, fetch(e.href)];\n\n                      case 2:\n                        return [4, t.sent().json()];\n\n                      case 3:\n                        return n = t.sent(), [3, 5];\n\n                      case 4:\n                        return t.sent(), [2];\n\n                      case 5:\n                        if (!n || !n.gcm_sender_id) return [2];\n                        if (\"103953800507\" !== n.gcm_sender_id) throw Hb.create(\"incorrect-gcm-sender-id\");\n                        return [2];\n                    }\n                  });\n                });\n              }()), [4, this.manifestCheckPromise];\n\n            case 1:\n              return t.sent(), [2, n.prototype.getToken.call(this)];\n          }\n        });\n      });\n    }, t.prototype.requestPermission = function () {\n      return ai(this, void 0, void 0, function () {\n        var e;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return \"granted\" === this.getNotificationPermission_() ? [2] : [4, Notification.requestPermission()];\n\n            case 1:\n              if (\"granted\" === (e = t.sent())) return [2];\n              throw \"denied\" === e ? Hb.create(\"permission-blocked\") : Hb.create(\"permission-default\");\n          }\n        });\n      });\n    }, t.prototype.useServiceWorker = function (t) {\n      if (!(t instanceof ServiceWorkerRegistration)) throw Hb.create(\"sw-registration-expected\");\n      if (null != this.registrationToUse) throw Hb.create(\"use-sw-before-get-token\");\n      this.registrationToUse = t;\n    }, t.prototype.usePublicVapidKey = function (t) {\n      if (\"string\" != typeof t) throw Hb.create(\"invalid-public-vapid-key\");\n      if (null != this.publicVapidKeyToUse) throw Hb.create(\"use-public-key-before-get-token\");\n      var e = $b(t);\n      if (65 !== e.length) throw Hb.create(\"public-vapid-key-decryption-failed\");\n      this.publicVapidKeyToUse = e;\n    }, t.prototype.onMessage = function (t, e, n) {\n      return \"function\" == typeof t ? this.onMessageInternal(t, e, n) : this.onMessageInternal(t);\n    }, t.prototype.onTokenRefresh = function (t, e, n) {\n      return \"function\" == typeof t ? this.onTokenRefreshInternal(t, e, n) : this.onTokenRefreshInternal(t);\n    }, t.prototype.waitForRegistrationToActivate_ = function (r) {\n      var i = r.installing || r.waiting || r.active;\n      return new Promise(function (t, e) {\n        if (i) {\n          if (\"activated\" !== i.state) {\n            if (\"redundant\" !== i.state) {\n              var n = function n() {\n                if (\"activated\" === i.state) t(r);else {\n                  if (\"redundant\" !== i.state) return;\n                  e(Hb.create(\"sw-reg-redundant\"));\n                }\n                i.removeEventListener(\"statechange\", n);\n              };\n\n              i.addEventListener(\"statechange\", n);\n            } else e(Hb.create(\"sw-reg-redundant\"));\n          } else t(r);\n        } else e(Hb.create(\"no-sw-in-reg\"));\n      });\n    }, t.prototype.getSWRegistration_ = function () {\n      var e = this;\n      return this.registrationToUse ? this.waitForRegistrationToActivate_(this.registrationToUse) : (this.registrationToUse = null, navigator.serviceWorker.register(\"/firebase-messaging-sw.js\", {\n        scope: \"/firebase-cloud-messaging-push-scope\"\n      }).catch(function (t) {\n        throw Hb.create(\"failed-serviceworker-registration\", {\n          browserErrorMessage: t.message\n        });\n      }).then(function (t) {\n        return e.waitForRegistrationToActivate_(t).then(function () {\n          return (e.registrationToUse = t).update(), t;\n        });\n      }));\n    }, t.prototype.getPublicVapidKey_ = function () {\n      return ai(this, void 0, void 0, function () {\n        return si(this, function (t) {\n          return this.publicVapidKeyToUse ? [2, this.publicVapidKeyToUse] : [2, Gb];\n        });\n      });\n    }, t.prototype.setupSWMessageListener_ = function () {\n      var r = this;\n      navigator.serviceWorker.addEventListener(\"message\", function (t) {\n        if (t.data && t.data[Bb.TYPE_OF_MSG]) {\n          var e = t.data;\n\n          switch (e[Bb.TYPE_OF_MSG]) {\n            case Wb.PUSH_MSG_RECEIVED:\n            case Wb.NOTIFICATION_CLICKED:\n              var n = e[Bb.DATA];\n              r.messageObserver && r.messageObserver.next(n);\n          }\n        }\n      }, !1);\n    }, t;\n  }(sw);\n\n  function dw() {\n    return self && \"ServiceWorkerGlobalScope\" in self ? \"PushManager\" in self && \"Notification\" in self && ServiceWorkerRegistration.prototype.hasOwnProperty(\"showNotification\") && PushSubscription.prototype.hasOwnProperty(\"getKey\") : navigator.cookieEnabled && \"serviceWorker\" in navigator && \"PushManager\" in window && \"Notification\" in window && \"fetch\" in window && ServiceWorkerRegistration.prototype.hasOwnProperty(\"showNotification\") && PushSubscription.prototype.hasOwnProperty(\"getKey\");\n  }\n\n  fw = {\n    isSupported: dw\n  }, Jh.INTERNAL.registerService(\"messaging\", function (t) {\n    if (!dw()) throw Hb.create(\"unsupported-browser\");\n    return self && \"ServiceWorkerGlobalScope\" in self ? new cw(t) : new pw(t);\n  }, fw);\n\n  var yw = \"firebasestorage.googleapis.com\",\n      mw = \"storageBucket\",\n      gw = function () {\n    function t(t, e) {\n      this.code_ = bw(t), this.message_ = \"Firebase Storage: \" + e, this.serverResponse_ = null, this.name_ = \"FirebaseError\";\n    }\n\n    return t.prototype.codeProp = function () {\n      return this.code;\n    }, t.prototype.codeEquals = function (t) {\n      return bw(t) === this.codeProp();\n    }, t.prototype.serverResponseProp = function () {\n      return this.serverResponse_;\n    }, t.prototype.setServerResponseProp = function (t) {\n      this.serverResponse_ = t;\n    }, Object.defineProperty(t.prototype, \"name\", {\n      get: function get() {\n        return this.name_;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"code\", {\n      get: function get() {\n        return this.code_;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"message\", {\n      get: function get() {\n        return this.message_;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"serverResponse\", {\n      get: function get() {\n        return this.serverResponse_;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t;\n  }(),\n      vw = {\n    UNKNOWN: \"unknown\",\n    OBJECT_NOT_FOUND: \"object-not-found\",\n    BUCKET_NOT_FOUND: \"bucket-not-found\",\n    PROJECT_NOT_FOUND: \"project-not-found\",\n    QUOTA_EXCEEDED: \"quota-exceeded\",\n    UNAUTHENTICATED: \"unauthenticated\",\n    UNAUTHORIZED: \"unauthorized\",\n    RETRY_LIMIT_EXCEEDED: \"retry-limit-exceeded\",\n    INVALID_CHECKSUM: \"invalid-checksum\",\n    CANCELED: \"canceled\",\n    INVALID_EVENT_NAME: \"invalid-event-name\",\n    INVALID_URL: \"invalid-url\",\n    INVALID_DEFAULT_BUCKET: \"invalid-default-bucket\",\n    NO_DEFAULT_BUCKET: \"no-default-bucket\",\n    CANNOT_SLICE_BLOB: \"cannot-slice-blob\",\n    SERVER_FILE_WRONG_SIZE: \"server-file-wrong-size\",\n    NO_DOWNLOAD_URL: \"no-download-url\",\n    INVALID_ARGUMENT: \"invalid-argument\",\n    INVALID_ARGUMENT_COUNT: \"invalid-argument-count\",\n    APP_DELETED: \"app-deleted\",\n    INVALID_ROOT_OPERATION: \"invalid-root-operation\",\n    INVALID_FORMAT: \"invalid-format\",\n    INTERNAL_ERROR: \"internal-error\"\n  };\n\n  function bw(t) {\n    return \"storage/\" + t;\n  }\n\n  function ww() {\n    return new gw(vw.UNKNOWN, \"An unknown error occurred, please check the error payload for server response.\");\n  }\n\n  function _w() {\n    return new gw(vw.CANCELED, \"User canceled the upload/download.\");\n  }\n\n  function Ew() {\n    return new gw(vw.CANNOT_SLICE_BLOB, \"Cannot slice blob for upload. Please retry the upload.\");\n  }\n\n  function Tw(t, e, n) {\n    return new gw(vw.INVALID_ARGUMENT, \"Invalid argument in `\" + e + \"` at index \" + t + \": \" + n);\n  }\n\n  function Sw() {\n    return new gw(vw.APP_DELETED, \"The Firebase app was deleted.\");\n  }\n\n  function Iw(t, e) {\n    return new gw(vw.INVALID_FORMAT, \"String does not match format '\" + t + \"': \" + e);\n  }\n\n  function Cw(t) {\n    throw new gw(vw.INTERNAL_ERROR, \"Internal error: \" + t);\n  }\n\n  var Nw = {\n    RAW: \"raw\",\n    BASE64: \"base64\",\n    BASE64URL: \"base64url\",\n    DATA_URL: \"data_url\"\n  };\n\n  function Aw(t) {\n    switch (t) {\n      case Nw.RAW:\n      case Nw.BASE64:\n      case Nw.BASE64URL:\n      case Nw.DATA_URL:\n        return;\n\n      default:\n        throw \"Expected one of the event types: [\" + Nw.RAW + \", \" + Nw.BASE64 + \", \" + Nw.BASE64URL + \", \" + Nw.DATA_URL + \"].\";\n    }\n  }\n\n  var kw = function kw(t, e) {\n    this.data = t, this.contentType = e || null;\n  };\n\n  function Dw(t, e) {\n    switch (t) {\n      case Nw.RAW:\n        return new kw(Rw(e));\n\n      case Nw.BASE64:\n      case Nw.BASE64URL:\n        return new kw(Ow(t, e));\n\n      case Nw.DATA_URL:\n        return new kw((n = new Pw(e)).base64 ? Ow(Nw.BASE64, n.rest) : function (t) {\n          var e;\n\n          try {\n            e = decodeURIComponent(t);\n          } catch (t) {\n            throw Iw(Nw.DATA_URL, \"Malformed data URL.\");\n          }\n\n          return Rw(e);\n        }(n.rest), new Pw(e).contentType);\n    }\n\n    var n;\n    throw ww();\n  }\n\n  function Rw(t) {\n    for (var e = [], n = 0; n < t.length; n++) {\n      var r = t.charCodeAt(n);\n      if (r <= 127) e.push(r);else if (r <= 2047) e.push(192 | r >> 6, 128 | 63 & r);else if (55296 == (64512 & r)) {\n        if (n < t.length - 1 && 56320 == (64512 & t.charCodeAt(n + 1))) r = 65536 | (1023 & r) << 10 | 1023 & t.charCodeAt(++n), e.push(240 | r >> 18, 128 | r >> 12 & 63, 128 | r >> 6 & 63, 128 | 63 & r);else e.push(239, 191, 189);\n      } else 56320 == (64512 & r) ? e.push(239, 191, 189) : e.push(224 | r >> 12, 128 | r >> 6 & 63, 128 | 63 & r);\n    }\n\n    return new Uint8Array(e);\n  }\n\n  function Ow(e, t) {\n    switch (e) {\n      case Nw.BASE64:\n        var n = -1 !== t.indexOf(\"-\"),\n            r = -1 !== t.indexOf(\"_\");\n        if (n || r) throw Iw(e, \"Invalid character '\" + (n ? \"-\" : \"_\") + \"' found: is it base64url encoded?\");\n        break;\n\n      case Nw.BASE64URL:\n        var i = -1 !== t.indexOf(\"+\"),\n            o = -1 !== t.indexOf(\"/\");\n        if (i || o) throw Iw(e, \"Invalid character '\" + (i ? \"+\" : \"/\") + \"' found: is it base64 encoded?\");\n        t = t.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    }\n\n    var a;\n\n    try {\n      a = atob(t);\n    } catch (t) {\n      throw Iw(e, \"Invalid character found\");\n    }\n\n    for (var s = new Uint8Array(a.length), u = 0; u < a.length; u++) {\n      s[u] = a.charCodeAt(u);\n    }\n\n    return s;\n  }\n\n  var Pw = function Pw(t) {\n    this.base64 = !1, this.contentType = null;\n    var e = t.match(/^data:([^,]+)?,/);\n    if (null === e) throw Iw(Nw.DATA_URL, \"Must be formatted 'data:[<mediatype>][;base64],<data>\");\n    var n,\n        r,\n        i = e[1] || null;\n    null != i && (this.base64 = (r = \";base64\", (n = i).length >= r.length && n.substring(n.length - r.length) === r), this.contentType = this.base64 ? i.substring(0, i.length - \";base64\".length) : i), this.rest = t.substring(t.indexOf(\",\") + 1);\n  };\n\n  var xw,\n      Mw,\n      Lw = {\n    STATE_CHANGED: \"state_changed\"\n  },\n      Fw = \"running\",\n      Uw = \"pausing\",\n      qw = \"paused\",\n      Vw = \"success\",\n      Bw = \"canceling\",\n      jw = \"canceled\",\n      Ww = \"error\",\n      Kw = {\n    RUNNING: \"running\",\n    PAUSED: \"paused\",\n    SUCCESS: \"success\",\n    CANCELED: \"canceled\",\n    ERROR: \"error\"\n  };\n\n  function Qw(t) {\n    switch (t) {\n      case Fw:\n      case Uw:\n      case Bw:\n        return Kw.RUNNING;\n\n      case qw:\n        return Kw.PAUSED;\n\n      case Vw:\n        return Kw.SUCCESS;\n\n      case jw:\n        return Kw.CANCELED;\n\n      case Ww:\n      default:\n        return Kw.ERROR;\n    }\n  }\n\n  function Hw(t) {\n    return null != t;\n  }\n\n  function Gw(t) {\n    return void 0 !== t;\n  }\n\n  function zw(t) {\n    return \"function\" == typeof t;\n  }\n\n  function Yw(t) {\n    return \"object\" == typeof t;\n  }\n\n  function Xw(t) {\n    return \"string\" == typeof t || t instanceof String;\n  }\n\n  function Jw(t) {\n    return \"number\" == typeof t || t instanceof Number;\n  }\n\n  function $w(t) {\n    return Zw() && t instanceof Blob;\n  }\n\n  function Zw() {\n    return \"undefined\" != typeof Blob;\n  }\n\n  (Mw = xw || (xw = {}))[Mw.NO_ERROR = 0] = \"NO_ERROR\", Mw[Mw.NETWORK_ERROR = 1] = \"NETWORK_ERROR\", Mw[Mw.ABORT = 2] = \"ABORT\";\n\n  var t_ = function () {\n    function t() {\n      var e = this;\n      this.sent_ = !1, this.xhr_ = new XMLHttpRequest(), this.errorCode_ = xw.NO_ERROR, this.sendPromise_ = new Promise(function (t) {\n        e.xhr_.addEventListener(\"abort\", function () {\n          e.errorCode_ = xw.ABORT, t(e);\n        }), e.xhr_.addEventListener(\"error\", function () {\n          e.errorCode_ = xw.NETWORK_ERROR, t(e);\n        }), e.xhr_.addEventListener(\"load\", function () {\n          t(e);\n        });\n      });\n    }\n\n    return t.prototype.send = function (t, e, n, r) {\n      if (this.sent_) throw Cw(\"cannot .send() more than once\");\n      if (this.sent_ = !0, this.xhr_.open(e, t, !0), Hw(r)) for (var i in r) {\n        r.hasOwnProperty(i) && this.xhr_.setRequestHeader(i, r[i].toString());\n      }\n      return Hw(n) ? this.xhr_.send(n) : this.xhr_.send(), this.sendPromise_;\n    }, t.prototype.getErrorCode = function () {\n      if (!this.sent_) throw Cw(\"cannot .getErrorCode() before sending\");\n      return this.errorCode_;\n    }, t.prototype.getStatus = function () {\n      if (!this.sent_) throw Cw(\"cannot .getStatus() before sending\");\n\n      try {\n        return this.xhr_.status;\n      } catch (t) {\n        return -1;\n      }\n    }, t.prototype.getResponseText = function () {\n      if (!this.sent_) throw Cw(\"cannot .getResponseText() before sending\");\n      return this.xhr_.responseText;\n    }, t.prototype.abort = function () {\n      this.xhr_.abort();\n    }, t.prototype.getResponseHeader = function (t) {\n      return this.xhr_.getResponseHeader(t);\n    }, t.prototype.addUploadProgressListener = function (t) {\n      Hw(this.xhr_.upload) && this.xhr_.upload.addEventListener(\"progress\", t);\n    }, t.prototype.removeUploadProgressListener = function (t) {\n      Hw(this.xhr_.upload) && this.xhr_.upload.removeEventListener(\"progress\", t);\n    }, t;\n  }(),\n      e_ = function () {\n    function t() {}\n\n    return t.prototype.createXhrIo = function () {\n      return new t_();\n    }, t;\n  }();\n\n  function n_() {\n    for (var t = [], e = 0; e < arguments.length; e++) {\n      t[e] = arguments[e];\n    }\n\n    var n = \"undefined\" != typeof BlobBuilder ? BlobBuilder : \"undefined\" != typeof WebKitBlobBuilder ? WebKitBlobBuilder : void 0;\n\n    if (void 0 !== n) {\n      for (var r = new n(), i = 0; i < t.length; i++) {\n        r.append(t[i]);\n      }\n\n      return r.getBlob();\n    }\n\n    if (Zw()) return new Blob(t);\n    throw Error(\"This browser doesn't seem to support creating Blobs\");\n  }\n\n  var r_ = function () {\n    function s(t, e) {\n      var n = 0,\n          r = \"\";\n      $w(t) ? (n = (this.data_ = t).size, r = t.type) : t instanceof ArrayBuffer ? (e ? this.data_ = new Uint8Array(t) : (this.data_ = new Uint8Array(t.byteLength), this.data_.set(new Uint8Array(t))), n = this.data_.length) : t instanceof Uint8Array && (e ? this.data_ = t : (this.data_ = new Uint8Array(t.length), this.data_.set(t)), n = t.length), this.size_ = n, this.type_ = r;\n    }\n\n    return s.prototype.size = function () {\n      return this.size_;\n    }, s.prototype.type = function () {\n      return this.type_;\n    }, s.prototype.slice = function (t, e) {\n      if ($w(this.data_)) {\n        var n = this.data_,\n            r = (o = t, a = e, (i = n).webkitSlice ? i.webkitSlice(o, a) : i.mozSlice ? i.mozSlice(o, a) : i.slice ? i.slice(o, a) : null);\n        return null === r ? null : new s(r);\n      }\n\n      var i, o, a;\n      return new s(new Uint8Array(this.data_.buffer, t, e - t), !0);\n    }, s.getBlob = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) {\n        t[e] = arguments[e];\n      }\n\n      if (Zw()) {\n        var n = t.map(function (t) {\n          return t instanceof s ? t.data_ : t;\n        });\n        return new s(n_.apply(null, n));\n      }\n\n      var r = t.map(function (t) {\n        return Xw(t) ? Dw(Nw.RAW, t).data : t.data_;\n      }),\n          i = 0;\n      r.forEach(function (t) {\n        i += t.byteLength;\n      });\n      var o = new Uint8Array(i),\n          a = 0;\n      return r.forEach(function (t) {\n        for (var e = 0; e < t.length; e++) {\n          o[a++] = t[e];\n        }\n      }), new s(o, !0);\n    }, s.prototype.uploadData = function () {\n      return this.data_;\n    }, s;\n  }(),\n      i_ = function () {\n    function f(t, e) {\n      this.bucket = t, this.path_ = e;\n    }\n\n    return Object.defineProperty(f.prototype, \"path\", {\n      get: function get() {\n        return this.path_;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(f.prototype, \"isRoot\", {\n      get: function get() {\n        return 0 === this.path.length;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), f.prototype.fullServerUrl = function () {\n      var t = encodeURIComponent;\n      return \"/b/\" + t(this.bucket) + \"/o/\" + t(this.path);\n    }, f.prototype.bucketOnlyServerUrl = function () {\n      return \"/b/\" + encodeURIComponent(this.bucket) + \"/o\";\n    }, f.makeFromBucketSpec = function (e) {\n      var t, n;\n\n      try {\n        t = f.makeFromUrl(e);\n      } catch (t) {\n        return new f(e, \"\");\n      }\n\n      if (\"\" === t.path) return t;\n      throw n = e, new gw(vw.INVALID_DEFAULT_BUCKET, \"Invalid default bucket '\" + n + \"'.\");\n    }, f.makeFromUrl = function (t) {\n      var e = null,\n          n = \"([A-Za-z0-9.\\\\-_]+)\";\n      var r = new RegExp(\"^gs://\" + n + \"(/(.*))?$\", \"i\");\n\n      for (var i, o = yw.replace(/[.]/g, \"\\\\.\"), a = [{\n        regex: r,\n        indices: {\n          bucket: 1,\n          path: 3\n        },\n        postModify: function postModify(t) {\n          \"/\" === t.path.charAt(t.path.length - 1) && (t.path_ = t.path_.slice(0, -1));\n        }\n      }, {\n        regex: new RegExp(\"^https?://\" + o + \"/v[A-Za-z0-9_]+/b/\" + n + \"/o(/([^?#]*).*)?$\", \"i\"),\n        indices: {\n          bucket: 1,\n          path: 3\n        },\n        postModify: function postModify(t) {\n          t.path_ = decodeURIComponent(t.path);\n        }\n      }], s = 0; s < a.length; s++) {\n        var u = a[s],\n            c = u.regex.exec(t);\n\n        if (c) {\n          var h = c[u.indices.bucket],\n              l = c[u.indices.path];\n          l || (l = \"\"), e = new f(h, l), u.postModify(e);\n          break;\n        }\n      }\n\n      if (null == e) throw i = t, new gw(vw.INVALID_URL, \"Invalid URL '\" + i + \"'.\");\n      return e;\n    }, f;\n  }();\n\n  function o_(t) {\n    var e, n;\n\n    try {\n      e = JSON.parse(t);\n    } catch (t) {\n      return null;\n    }\n\n    return Yw(n = e) && !Array.isArray(n) ? e : null;\n  }\n\n  function a_(t) {\n    var e = t.lastIndexOf(\"/\", t.length - 2);\n    return -1 === e ? t : t.slice(e + 1);\n  }\n\n  function s_(t) {\n    return \"https://\" + yw + \"/v0\" + t;\n  }\n\n  function u_(t) {\n    var e = encodeURIComponent,\n        n = \"?\";\n\n    for (var r in t) {\n      if (t.hasOwnProperty(r)) n = n + (e(r) + \"=\" + e(t[r])) + \"&\";\n    }\n\n    return n = n.slice(0, -1);\n  }\n\n  function c_(t, e) {\n    return e;\n  }\n\n  var h_ = function h_(t, e, n, r) {\n    this.server = t, this.local = e || t, this.writable = !!n, this.xform = r || c_;\n  },\n      l_ = null;\n\n  function f_() {\n    if (l_) return l_;\n    var t = [];\n    t.push(new h_(\"bucket\")), t.push(new h_(\"generation\")), t.push(new h_(\"metageneration\")), t.push(new h_(\"name\", \"fullPath\", !0));\n    var e = new h_(\"name\");\n    e.xform = function (t, e) {\n      return !Xw(n = e) || n.length < 2 ? n : a_(n);\n      var n;\n    }, t.push(e);\n    var n = new h_(\"size\");\n    return n.xform = function (t, e) {\n      return Hw(e) ? Number(e) : e;\n    }, t.push(n), t.push(new h_(\"timeCreated\")), t.push(new h_(\"updated\")), t.push(new h_(\"md5Hash\", null, !0)), t.push(new h_(\"cacheControl\", null, !0)), t.push(new h_(\"contentDisposition\", null, !0)), t.push(new h_(\"contentEncoding\", null, !0)), t.push(new h_(\"contentLanguage\", null, !0)), t.push(new h_(\"contentType\", null, !0)), t.push(new h_(\"metadata\", \"customMetadata\", !0)), l_ = t;\n  }\n\n  function p_(t, e, n) {\n    for (var r, i, o = {\n      type: \"file\"\n    }, a = n.length, s = 0; s < a; s++) {\n      var u = n[s];\n      o[u.local] = u.xform(o, e[u.server]);\n    }\n\n    return r = o, i = t, Object.defineProperty(r, \"ref\", {\n      get: function get() {\n        var t = r.bucket,\n            e = r.fullPath,\n            n = new i_(t, e);\n        return i.makeStorageReference(n);\n      }\n    }), o;\n  }\n\n  function d_(t, e, n) {\n    var r = o_(e);\n    return null === r ? null : p_(t, r, n);\n  }\n\n  function y_(t, e) {\n    for (var n = {}, r = e.length, i = 0; i < r; i++) {\n      var o = e[i];\n      o.writable && (n[o.server] = t[o.local]);\n    }\n\n    return JSON.stringify(n);\n  }\n\n  function m_(t) {\n    if (!Yw(t) || !t) throw \"Expected Metadata object.\";\n\n    for (var e in t) {\n      if (t.hasOwnProperty(e)) {\n        var n = t[e];\n\n        if (\"customMetadata\" === e) {\n          if (!Yw(n)) throw \"Expected object for 'customMetadata' mapping.\";\n        } else if (Yw(r = n) && null !== r) throw \"Mapping for '\" + e + \"' cannot be an object.\";\n      }\n    }\n\n    var r;\n  }\n\n  var g_ = \"maxResults\",\n      v_ = 1e3,\n      b_ = \"pageToken\",\n      w_ = \"prefixes\",\n      __ = \"items\";\n\n  function E_(t, e) {\n    var n = {\n      prefixes: [],\n      items: [],\n      nextPageToken: e.nextPageToken\n    },\n        r = t.bucket();\n    if (null === r) throw new gw(vw.NO_DEFAULT_BUCKET, \"No default bucket found. Did you set the '\" + mw + \"' property when initializing the app?\");\n    if (e[w_]) for (var i = 0, o = e[w_]; i < o.length; i++) {\n      var a = o[i].replace(/\\/$/, \"\"),\n          s = t.makeStorageReference(new i_(r, a));\n      n.prefixes.push(s);\n    }\n    if (e[__]) for (var u = 0, c = e[__]; u < c.length; u++) {\n      var h = c[u];\n      s = t.makeStorageReference(new i_(r, h.name));\n      n.items.push(s);\n    }\n    return n;\n  }\n\n  function T_(t) {\n    if (!Yw(t) || !t) throw \"Expected ListOptions object.\";\n\n    for (var e in t) {\n      if (e === g_) {\n        if (!Jw(n = t[g_]) || !Number.isInteger(n) || t[g_] <= 0) throw \"Expected maxResults to be a positive number.\";\n        if (1e3 < t[g_]) throw \"Expected maxResults to be less than or equal to \" + v_ + \".\";\n      } else {\n        if (e !== b_) throw \"Unknown option: \" + e;\n        if (t[b_] && !Xw(t[b_])) throw \"Expected pageToken to be string.\";\n      }\n    }\n\n    var n;\n  }\n\n  var S_ = function S_(t, e, n, r) {\n    this.url = t, this.method = e, this.handler = n, this.timeout = r, this.urlParams = {}, this.headers = {}, this.body = null, this.errorHandler = null, this.progressCallback = null, this.successCodes = [200], this.additionalRetryCodes = [];\n  };\n\n  function I_(t) {\n    if (!t) throw ww();\n  }\n\n  function C_(r, i) {\n    return function (t, e) {\n      var n = d_(r, e, i);\n      return I_(null !== n), n;\n    };\n  }\n\n  function N_(o) {\n    return function (t, e) {\n      var n,\n          r,\n          i = (n = o, null === (r = o_(e)) ? null : E_(n, r));\n      return I_(null !== i), i;\n    };\n  }\n\n  function A_(r, i) {\n    return function (t, e) {\n      var n = d_(r, e, i);\n      return I_(null !== n), function (r, t) {\n        var e = o_(t);\n        if (null === e) return null;\n        if (!Xw(e.downloadTokens)) return null;\n        var n = e.downloadTokens;\n        if (0 === n.length) return null;\n        var i = encodeURIComponent;\n        return n.split(\",\").map(function (t) {\n          var e = r.bucket,\n              n = r.fullPath;\n          return s_(\"/b/\" + i(e) + \"/o/\" + i(n)) + u_({\n            alt: \"media\",\n            token: t\n          });\n        })[0];\n      }(n, e);\n    };\n  }\n\n  function k_(o) {\n    return function (t, e) {\n      var n, r, i;\n      return (n = 401 === t.getStatus() ? new gw(vw.UNAUTHENTICATED, \"User is not authenticated, please authenticate using Firebase Authentication and try again.\") : 402 === t.getStatus() ? (i = o.bucket, new gw(vw.QUOTA_EXCEEDED, \"Quota for bucket '\" + i + \"' exceeded, please view quota on https://firebase.google.com/pricing/.\")) : 403 === t.getStatus() ? (r = o.path, new gw(vw.UNAUTHORIZED, \"User does not have permission to access '\" + r + \"'.\")) : e).setServerResponseProp(e.serverResponseProp()), n;\n    };\n  }\n\n  function D_(i) {\n    var o = k_(i);\n    return function (t, e) {\n      var n,\n          r = o(t, e);\n      return 404 === t.getStatus() && (n = i.path, r = new gw(vw.OBJECT_NOT_FOUND, \"Object '\" + n + \"' does not exist.\")), r.setServerResponseProp(e.serverResponseProp()), r;\n    };\n  }\n\n  function R_(t, e, n) {\n    var r = s_(e.fullServerUrl()),\n        i = t.maxOperationRetryTime(),\n        o = new S_(r, \"GET\", C_(t, n), i);\n    return o.errorHandler = D_(e), o;\n  }\n\n  function O_(t, e, n) {\n    var r,\n        i,\n        o = Object.assign({}, n);\n    return o.fullPath = t.path, o.size = e.size(), o.contentType || (o.contentType = (i = e, (r = null) && r.contentType || i && i.type() || \"application/octet-stream\")), o;\n  }\n\n  var P_ = function P_(t, e, n, r) {\n    this.current = t, this.total = e, this.finalized = !!n, this.metadata = r || null;\n  };\n\n  function x_(t, e) {\n    var n = null;\n\n    try {\n      n = t.getResponseHeader(\"X-Goog-Upload-Status\");\n    } catch (t) {\n      I_(!1);\n    }\n\n    return I_(!!n && -1 !== (e || [\"active\"]).indexOf(n)), n;\n  }\n\n  function M_(t, a, e, s, n, u, r, i) {\n    var c = new P_(0, 0);\n    if (c.total = r ? (c.current = r.current, r.total) : (c.current = 0, s.size()), s.size() !== c.total) throw new gw(vw.SERVER_FILE_WRONG_SIZE, \"Server recorded incorrect upload file size, please retry the upload.\");\n    var o = c.total - c.current,\n        h = o;\n    0 < n && (h = Math.min(h, n));\n    var l = c.current,\n        f = l + h,\n        p = {\n      \"X-Goog-Upload-Command\": h === o ? \"upload, finalize\" : \"upload\",\n      \"X-Goog-Upload-Offset\": c.current\n    },\n        d = s.slice(l, f);\n    if (null === d) throw Ew();\n    var y = a.maxUploadRetryTime(),\n        m = new S_(e, \"POST\", function (t, e) {\n      var n,\n          r = x_(t, [\"active\", \"final\"]),\n          i = c.current + h,\n          o = s.size();\n      return n = \"final\" === r ? C_(a, u)(t, e) : null, new P_(i, o, \"final\" === r, n);\n    }, y);\n    return m.headers = p, m.body = d.uploadData(), m.progressCallback = i || null, m.errorHandler = k_(t), m;\n  }\n\n  var L_ = function L_(t, e, n) {\n    if (zw(t) || Hw(e) || Hw(n)) this.next = t, this.error = e || null, this.complete = n || null;else {\n      var r = t;\n      this.next = r.next || null, this.error = r.error || null, this.complete = r.complete || null;\n    }\n  },\n      F_ = function F_(t, e, n, r, i, o) {\n    this.bytesTransferred = t, this.totalBytes = e, this.state = n, this.metadata = r, this.task = i, this.ref = o;\n  };\n\n  function U_(e, t, n) {\n    for (var r = t.length, i = t.length, o = 0; o < t.length; o++) {\n      if (t[o].optional) {\n        r = o;\n        break;\n      }\n    }\n\n    var a, s, u, c, h, l;\n    if (!(r <= n.length && n.length <= i)) throw a = r, s = i, u = e, c = n.length, l = a === s ? 1 === (h = a) ? \"argument\" : \"arguments\" : (h = \"between \" + a + \" and \" + s, \"arguments\"), new gw(vw.INVALID_ARGUMENT_COUNT, \"Invalid argument count in `\" + u + \"`: Expected \" + h + \" \" + l + \", received \" + c + \".\");\n\n    for (o = 0; o < n.length; o++) {\n      try {\n        t[o].validator(n[o]);\n      } catch (t) {\n        throw t instanceof Error ? Tw(o, e, t.message) : Tw(o, e, t);\n      }\n    }\n  }\n\n  var q_ = function q_(e, t) {\n    var n = this;\n    this.validator = function (t) {\n      n.optional && !Gw(t) || e(t);\n    }, this.optional = !!t;\n  };\n\n  function V_(t, e) {\n    function n(t) {\n      if (!Xw(t)) throw \"Expected string.\";\n    }\n\n    var r, i, o;\n    return r = t ? (i = n, o = t, function (t) {\n      i(t), o(t);\n    }) : n, new q_(r, e);\n  }\n\n  function B_(t) {\n    return new q_(m_, t);\n  }\n\n  function j_() {\n    return new q_(function (t) {\n      if (!(Jw(t) && 0 <= t)) throw \"Expected a number 0 or greater.\";\n    });\n  }\n\n  function W_(e, t) {\n    return new q_(function (t) {\n      if (!(null === t || Hw(t) && t instanceof Object)) throw \"Expected an Object.\";\n      null != e && e(t);\n    }, t);\n  }\n\n  function K_(t) {\n    return new q_(function (t) {\n      if (null !== t && !zw(t)) throw \"Expected a Function.\";\n    }, t);\n  }\n\n  function Q_(n) {\n    return function () {\n      for (var t = [], e = 0; e < arguments.length; e++) {\n        t[e] = arguments[e];\n      }\n\n      Promise.resolve().then(function () {\n        return n.apply(void 0, t);\n      });\n    };\n  }\n\n  var H_ = function () {\n    function t(t, e, n, r, i, o) {\n      var a = this;\n      void 0 === o && (o = null), this.transferred_ = 0, this.needToFetchStatus_ = !1, this.needToFetchMetadata_ = !1, this.observers_ = [], this.error_ = null, this.uploadUrl_ = null, this.request_ = null, this.chunkMultiplier_ = 1, this.resolve_ = null, this.reject_ = null, this.ref_ = t, this.authWrapper_ = e, this.location_ = n, this.blob_ = i, this.metadata_ = o, this.mappings_ = r, this.resumable_ = this.shouldDoResumable_(this.blob_), this.state_ = Fw, this.errorHandler_ = function (t) {\n        a.request_ = null, a.chunkMultiplier_ = 1, t.codeEquals(vw.CANCELED) ? (a.needToFetchStatus_ = !0, a.completeTransitions_()) : (a.error_ = t, a.transition_(Ww));\n      }, this.metadataErrorHandler_ = function (t) {\n        a.request_ = null, t.codeEquals(vw.CANCELED) ? a.completeTransitions_() : (a.error_ = t, a.transition_(Ww));\n      }, this.promise_ = new Promise(function (t, e) {\n        a.resolve_ = t, a.reject_ = e, a.start_();\n      }), this.promise_.then(null, function () {});\n    }\n\n    return t.prototype.makeProgressCallback_ = function () {\n      var e = this,\n          n = this.transferred_;\n      return function (t) {\n        return e.updateProgress_(n + t);\n      };\n    }, t.prototype.shouldDoResumable_ = function (t) {\n      return 262144 < t.size();\n    }, t.prototype.start_ = function () {\n      this.state_ === Fw && null === this.request_ && (this.resumable_ ? null === this.uploadUrl_ ? this.createResumable_() : this.needToFetchStatus_ ? this.fetchStatus_() : this.needToFetchMetadata_ ? this.fetchMetadata_() : this.continueUpload_() : this.oneShotUpload_());\n    }, t.prototype.resolveToken_ = function (e) {\n      var n = this;\n      this.authWrapper_.getAuthToken().then(function (t) {\n        switch (n.state_) {\n          case Fw:\n            e(t);\n            break;\n\n          case Bw:\n            n.transition_(jw);\n            break;\n\n          case Uw:\n            n.transition_(qw);\n        }\n      });\n    }, t.prototype.createResumable_ = function () {\n      var m = this;\n      this.resolveToken_(function (t) {\n        var e,\n            n,\n            r,\n            i,\n            o,\n            a,\n            s,\n            u,\n            c,\n            h,\n            l,\n            f,\n            p,\n            d = (e = m.authWrapper_, n = m.location_, r = m.mappings_, i = m.blob_, o = m.metadata_, a = n.bucketOnlyServerUrl(), s = O_(n, i, o), u = {\n          name: s.fullPath\n        }, c = s_(a), h = {\n          \"X-Goog-Upload-Protocol\": \"resumable\",\n          \"X-Goog-Upload-Command\": \"start\",\n          \"X-Goog-Upload-Header-Content-Length\": i.size(),\n          \"X-Goog-Upload-Header-Content-Type\": s.contentType,\n          \"Content-Type\": \"application/json; charset=utf-8\"\n        }, l = y_(s, r), f = e.maxUploadRetryTime(), (p = new S_(c, \"POST\", function (t) {\n          var e;\n          x_(t);\n\n          try {\n            e = t.getResponseHeader(\"X-Goog-Upload-URL\");\n          } catch (t) {\n            I_(!1);\n          }\n\n          return I_(Xw(e)), e;\n        }, f)).urlParams = u, p.headers = h, p.body = l, p.errorHandler = k_(n), p),\n            y = m.authWrapper_.makeRequest(d, t);\n        (m.request_ = y).getPromise().then(function (t) {\n          m.request_ = null, m.uploadUrl_ = t, m.needToFetchStatus_ = !1, m.completeTransitions_();\n        }, m.errorHandler_);\n      });\n    }, t.prototype.fetchStatus_ = function () {\n      var c = this,\n          h = this.uploadUrl_;\n      this.resolveToken_(function (t) {\n        var e,\n            n,\n            r,\n            i,\n            o,\n            a,\n            s = (e = c.authWrapper_, n = c.location_, r = h, i = c.blob_, o = e.maxUploadRetryTime(), (a = new S_(r, \"POST\", function (t) {\n          var e = x_(t, [\"active\", \"final\"]),\n              n = null;\n\n          try {\n            n = t.getResponseHeader(\"X-Goog-Upload-Size-Received\");\n          } catch (t) {\n            I_(!1);\n          }\n\n          n || I_(!1);\n          var r = Number(n);\n          return I_(!isNaN(r)), new P_(r, i.size(), \"final\" === e);\n        }, o)).headers = {\n          \"X-Goog-Upload-Command\": \"query\"\n        }, a.errorHandler = k_(n), a),\n            u = c.authWrapper_.makeRequest(s, t);\n        (c.request_ = u).getPromise().then(function (t) {\n          t = t, c.request_ = null, c.updateProgress_(t.current), c.needToFetchStatus_ = !1, t.finalized && (c.needToFetchMetadata_ = !0), c.completeTransitions_();\n        }, c.errorHandler_);\n      });\n    }, t.prototype.continueUpload_ = function () {\n      var r = this,\n          i = 262144 * this.chunkMultiplier_,\n          o = new P_(this.transferred_, this.blob_.size()),\n          a = this.uploadUrl_;\n      this.resolveToken_(function (t) {\n        var e;\n\n        try {\n          e = M_(r.location_, r.authWrapper_, a, r.blob_, i, r.mappings_, o, r.makeProgressCallback_());\n        } catch (t) {\n          return r.error_ = t, void r.transition_(Ww);\n        }\n\n        var n = r.authWrapper_.makeRequest(e, t);\n        (r.request_ = n).getPromise().then(function (t) {\n          r.increaseMultiplier_(), r.request_ = null, r.updateProgress_(t.current), t.finalized ? (r.metadata_ = t.metadata, r.transition_(Vw)) : r.completeTransitions_();\n        }, r.errorHandler_);\n      });\n    }, t.prototype.increaseMultiplier_ = function () {\n      262144 * this.chunkMultiplier_ < 33554432 && (this.chunkMultiplier_ *= 2);\n    }, t.prototype.fetchMetadata_ = function () {\n      var r = this;\n      this.resolveToken_(function (t) {\n        var e = R_(r.authWrapper_, r.location_, r.mappings_),\n            n = r.authWrapper_.makeRequest(e, t);\n        (r.request_ = n).getPromise().then(function (t) {\n          r.request_ = null, r.metadata_ = t, r.transition_(Vw);\n        }, r.metadataErrorHandler_);\n      });\n    }, t.prototype.oneShotUpload_ = function () {\n      var r = this;\n      this.resolveToken_(function (t) {\n        var e = function (t, e, n, r, i) {\n          var o = e.bucketOnlyServerUrl(),\n              a = {\n            \"X-Goog-Upload-Protocol\": \"multipart\"\n          },\n              s = function () {\n            for (var t = \"\", e = 0; e < 2; e++) {\n              t += Math.random().toString().slice(2);\n            }\n\n            return t;\n          }();\n\n          a[\"Content-Type\"] = \"multipart/related; boundary=\" + s;\n          var u = O_(e, r, i),\n              c = \"--\" + s + \"\\r\\nContent-Type: application/json; charset=utf-8\\r\\n\\r\\n\" + y_(u, n) + \"\\r\\n--\" + s + \"\\r\\nContent-Type: \" + u.contentType + \"\\r\\n\\r\\n\",\n              h = \"\\r\\n--\" + s + \"--\",\n              l = r_.getBlob(c, r, h);\n          if (null === l) throw Ew();\n          var f = {\n            name: u.fullPath\n          },\n              p = s_(o),\n              d = t.maxUploadRetryTime(),\n              y = new S_(p, \"POST\", C_(t, n), d);\n          return y.urlParams = f, y.headers = a, y.body = l.uploadData(), y.errorHandler = k_(e), y;\n        }(r.authWrapper_, r.location_, r.mappings_, r.blob_, r.metadata_),\n            n = r.authWrapper_.makeRequest(e, t);\n\n        (r.request_ = n).getPromise().then(function (t) {\n          r.request_ = null, r.metadata_ = t, r.updateProgress_(r.blob_.size()), r.transition_(Vw);\n        }, r.errorHandler_);\n      });\n    }, t.prototype.updateProgress_ = function (t) {\n      var e = this.transferred_;\n      this.transferred_ = t, this.transferred_ !== e && this.notifyObservers_();\n    }, t.prototype.transition_ = function (t) {\n      if (this.state_ !== t) switch (t) {\n        case Bw:\n        case Uw:\n          this.state_ = t, null !== this.request_ && this.request_.cancel();\n          break;\n\n        case Fw:\n          var e = this.state_ === qw;\n          this.state_ = t, e && (this.notifyObservers_(), this.start_());\n          break;\n\n        case qw:\n          this.state_ = t, this.notifyObservers_();\n          break;\n\n        case jw:\n          this.error_ = _w(), this.state_ = t, this.notifyObservers_();\n          break;\n\n        case Ww:\n        case Vw:\n          this.state_ = t, this.notifyObservers_();\n      }\n    }, t.prototype.completeTransitions_ = function () {\n      switch (this.state_) {\n        case Uw:\n          this.transition_(qw);\n          break;\n\n        case Bw:\n          this.transition_(jw);\n          break;\n\n        case Fw:\n          this.start_();\n      }\n    }, Object.defineProperty(t.prototype, \"snapshot\", {\n      get: function get() {\n        var t = Qw(this.state_);\n        return new F_(this.transferred_, this.blob_.size(), t, this.metadata_, this, this.ref_);\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.on = function (t, e, n, o) {\n      var r = \"Expected a function or an Object with one of `next`, `error`, `complete` properties.\",\n          i = K_(!0).validator,\n          a = W_(null, !0).validator;\n\n      function s(t) {\n        try {\n          return void i(t);\n        } catch (t) {}\n\n        try {\n          if (a(t), !(Gw(t.next) || Gw(t.error) || Gw(t.complete))) throw \"\";\n          return;\n        } catch (t) {\n          throw r;\n        }\n      }\n\n      U_(\"on\", [V_(function () {\n        if (t !== Lw.STATE_CHANGED) throw \"Expected one of the event types: [\" + Lw.STATE_CHANGED + \"].\";\n      }), W_(s, !0), K_(!0), K_(!0)], arguments);\n      var u = this;\n\n      function c(i) {\n        return function (t, e, n) {\n          null !== i && U_(\"on\", i, arguments);\n          var r = new L_(t, e, o);\n          return u.addObserver_(r), function () {\n            u.removeObserver_(r);\n          };\n        };\n      }\n\n      var h = [W_(function (t) {\n        if (null === t) throw r;\n        s(t);\n      }), K_(!0), K_(!0)];\n      return !(Gw(e) || Gw(n) || Gw(o)) ? c(h) : c(null)(e, n, o);\n    }, t.prototype.then = function (t, e) {\n      return this.promise_.then(t, e);\n    }, t.prototype.catch = function (t) {\n      return this.then(null, t);\n    }, t.prototype.addObserver_ = function (t) {\n      this.observers_.push(t), this.notifyObserver_(t);\n    }, t.prototype.removeObserver_ = function (t) {\n      var e = this.observers_.indexOf(t);\n      -1 !== e && this.observers_.splice(e, 1);\n    }, t.prototype.notifyObservers_ = function () {\n      var e = this;\n      this.finishPromise_(), this.observers_.slice().forEach(function (t) {\n        e.notifyObserver_(t);\n      });\n    }, t.prototype.finishPromise_ = function () {\n      if (null !== this.resolve_) {\n        var t = !0;\n\n        switch (Qw(this.state_)) {\n          case Kw.SUCCESS:\n            Q_(this.resolve_.bind(null, this.snapshot))();\n            break;\n\n          case Kw.CANCELED:\n          case Kw.ERROR:\n            Q_(this.reject_.bind(null, this.error_))();\n            break;\n\n          default:\n            t = !1;\n        }\n\n        t && (this.resolve_ = null, this.reject_ = null);\n      }\n    }, t.prototype.notifyObserver_ = function (t) {\n      switch (Qw(this.state_)) {\n        case Kw.RUNNING:\n        case Kw.PAUSED:\n          t.next && Q_(t.next.bind(t, this.snapshot))();\n          break;\n\n        case Kw.SUCCESS:\n          t.complete && Q_(t.complete.bind(t))();\n          break;\n\n        case Kw.CANCELED:\n        case Kw.ERROR:\n          t.error && Q_(t.error.bind(t, this.error_))();\n          break;\n\n        default:\n          t.error && Q_(t.error.bind(t, this.error_))();\n      }\n    }, t.prototype.resume = function () {\n      U_(\"resume\", [], arguments);\n      var t = this.state_ === qw || this.state_ === Uw;\n      return t && this.transition_(Fw), t;\n    }, t.prototype.pause = function () {\n      U_(\"pause\", [], arguments);\n      var t = this.state_ === Fw;\n      return t && this.transition_(Uw), t;\n    }, t.prototype.cancel = function () {\n      U_(\"cancel\", [], arguments);\n      var t = this.state_ === Fw || this.state_ === Uw;\n      return t && this.transition_(Bw), t;\n    }, t;\n  }(),\n      G_ = function () {\n    function n(t, e) {\n      this.authWrapper = t, this.location = e instanceof i_ ? e : i_.makeFromUrl(e);\n    }\n\n    return n.prototype.toString = function () {\n      return U_(\"toString\", [], arguments), \"gs://\" + this.location.bucket + \"/\" + this.location.path;\n    }, n.prototype.newRef = function (t, e) {\n      return new n(t, e);\n    }, n.prototype.mappings = function () {\n      return f_();\n    }, n.prototype.child = function (t) {\n      U_(\"child\", [V_()], arguments);\n      var e,\n          n,\n          r = (e = this.location.path, n = t.split(\"/\").filter(function (t) {\n        return 0 < t.length;\n      }).join(\"/\"), 0 === e.length ? n : e + \"/\" + n),\n          i = new i_(this.location.bucket, r);\n      return this.newRef(this.authWrapper, i);\n    }, Object.defineProperty(n.prototype, \"parent\", {\n      get: function get() {\n        var t = function (t) {\n          if (0 === t.length) return null;\n          var e = t.lastIndexOf(\"/\");\n          return -1 === e ? \"\" : t.slice(0, e);\n        }(this.location.path);\n\n        if (null === t) return null;\n        var e = new i_(this.location.bucket, t);\n        return this.newRef(this.authWrapper, e);\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(n.prototype, \"root\", {\n      get: function get() {\n        var t = new i_(this.location.bucket, \"\");\n        return this.newRef(this.authWrapper, t);\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(n.prototype, \"bucket\", {\n      get: function get() {\n        return this.location.bucket;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(n.prototype, \"fullPath\", {\n      get: function get() {\n        return this.location.path;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(n.prototype, \"name\", {\n      get: function get() {\n        return a_(this.location.path);\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(n.prototype, \"storage\", {\n      get: function get() {\n        return this.authWrapper.service();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), n.prototype.put = function (t, e) {\n      return void 0 === e && (e = null), U_(\"put\", [new q_(function (t) {\n        if (!(t instanceof Uint8Array || t instanceof ArrayBuffer || Zw() && t instanceof Blob)) throw \"Expected Blob or File.\";\n      }), B_(!0)], arguments), this.throwIfRoot_(\"put\"), new H_(this, this.authWrapper, this.location, this.mappings(), new r_(t), e);\n    }, n.prototype.putString = function (t, e, n) {\n      void 0 === e && (e = Nw.RAW), U_(\"putString\", [V_(), V_(Aw, !0), B_(!0)], arguments), this.throwIfRoot_(\"putString\");\n      var r = Dw(e, t),\n          i = Object.assign({}, n);\n      return !Hw(i.contentType) && Hw(r.contentType) && (i.contentType = r.contentType), new H_(this, this.authWrapper, this.location, this.mappings(), new r_(r.data, !0), i);\n    }, n.prototype.delete = function () {\n      var s = this;\n      return U_(\"delete\", [], arguments), this.throwIfRoot_(\"delete\"), this.authWrapper.getAuthToken().then(function (t) {\n        var e,\n            n,\n            r,\n            i,\n            o,\n            a = (e = s.authWrapper, n = s.location, r = s_(n.fullServerUrl()), i = e.maxOperationRetryTime(), (o = new S_(r, \"DELETE\", function (t, e) {}, i)).successCodes = [200, 204], o.errorHandler = D_(n), o);\n        return s.authWrapper.makeRequest(a, t).getPromise();\n      });\n    }, n.prototype.listAll = function () {\n      U_(\"listAll\", [], arguments);\n      var t = {\n        prefixes: [],\n        items: []\n      };\n      return this.listAllHelper(t).then(function () {\n        return t;\n      });\n    }, n.prototype.listAllHelper = function (o, a) {\n      return ai(this, void 0, void 0, function () {\n        var e, n, r, i;\n        return si(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return e = {\n                pageToken: a\n              }, [4, this.list(e)];\n\n            case 1:\n              return n = t.sent(), (r = o.prefixes).push.apply(r, n.prefixes), (i = o.items).push.apply(i, n.items), null == n.nextPageToken ? [3, 3] : [4, this.listAllHelper(o, n.nextPageToken)];\n\n            case 2:\n              t.sent(), t.label = 3;\n\n            case 3:\n              return [2];\n          }\n        });\n      });\n    }, n.prototype.list = function (r) {\n      var t;\n      U_(\"list\", [(t = !0, new q_(T_, t))], arguments);\n      var i = this;\n      return this.authWrapper.getAuthToken().then(function (t) {\n        var e = r || {},\n            n = function (t, e, n, r, i) {\n          var o = {};\n          e.isRoot ? o.prefix = \"\" : o.prefix = e.path + \"/\", n && 0 < n.length && (o.delimiter = n), r && (o.pageToken = r), i && (o.maxResults = i);\n          var a = s_(e.bucketOnlyServerUrl()),\n              s = t.maxOperationRetryTime(),\n              u = new S_(a, \"GET\", N_(t), s);\n          return u.urlParams = o, u.errorHandler = k_(e), u;\n        }(i.authWrapper, i.location, \"/\", e.pageToken, e.maxResults);\n\n        return i.authWrapper.makeRequest(n, t).getPromise();\n      });\n    }, n.prototype.getMetadata = function () {\n      var n = this;\n      return U_(\"getMetadata\", [], arguments), this.throwIfRoot_(\"getMetadata\"), this.authWrapper.getAuthToken().then(function (t) {\n        var e = R_(n.authWrapper, n.location, n.mappings());\n        return n.authWrapper.makeRequest(e, t).getPromise();\n      });\n    }, n.prototype.updateMetadata = function (h) {\n      var l = this;\n      return U_(\"updateMetadata\", [B_()], arguments), this.throwIfRoot_(\"updateMetadata\"), this.authWrapper.getAuthToken().then(function (t) {\n        var e,\n            n,\n            r,\n            i,\n            o,\n            a,\n            s,\n            u,\n            c = (e = l.authWrapper, n = l.location, r = h, i = l.mappings(), o = s_(n.fullServerUrl()), a = y_(r, i), s = e.maxOperationRetryTime(), (u = new S_(o, \"PATCH\", C_(e, i), s)).headers = {\n          \"Content-Type\": \"application/json; charset=utf-8\"\n        }, u.body = a, u.errorHandler = D_(n), u);\n        return l.authWrapper.makeRequest(c, t).getPromise();\n      });\n    }, n.prototype.getDownloadURL = function () {\n      var u = this;\n      return U_(\"getDownloadURL\", [], arguments), this.throwIfRoot_(\"getDownloadURL\"), this.authWrapper.getAuthToken().then(function (t) {\n        var e,\n            n,\n            r,\n            i,\n            o,\n            a,\n            s = (e = u.authWrapper, n = u.location, r = u.mappings(), i = s_(n.fullServerUrl()), o = e.maxOperationRetryTime(), (a = new S_(i, \"GET\", A_(e, r), o)).errorHandler = D_(n), a);\n        return u.authWrapper.makeRequest(s, t).getPromise().then(function (t) {\n          if (null === t) throw new gw(vw.NO_DOWNLOAD_URL, \"The given file does not have any download URLs.\");\n          return t;\n        });\n      });\n    }, n.prototype.throwIfRoot_ = function (t) {\n      if (\"\" === this.location.path) throw e = t, new gw(vw.INVALID_ROOT_OPERATION, \"The operation '\" + e + \"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').\");\n      var e;\n    }, n;\n  }(),\n      z_ = function () {\n    function t(t) {\n      this.promise_ = Promise.reject(t);\n    }\n\n    return t.prototype.getPromise = function () {\n      return this.promise_;\n    }, t.prototype.cancel = function (t) {}, t;\n  }(),\n      Y_ = function () {\n    function t() {\n      this.map = new Map(), this.id = -9007199254740991;\n    }\n\n    return t.prototype.addRequest = function (t) {\n      var e = this,\n          n = this.id;\n      this.id++, this.map.set(n, t), t.getPromise().then(function () {\n        return e.map.delete(n);\n      }, function () {\n        return e.map.delete(n);\n      });\n    }, t.prototype.clear = function () {\n      this.map.forEach(function (t) {\n        t && t.cancel(!0);\n      }), this.map.clear();\n    }, t;\n  }(),\n      X_ = function () {\n    function a(t, e, n, r, i) {\n      if (this.bucket_ = null, this.deleted_ = !1, this.app_ = t, null !== this.app_) {\n        var o = this.app_.options;\n        Hw(o) && (this.bucket_ = a.extractBucket_(o));\n      }\n\n      this.storageRefMaker_ = e, this.requestMaker_ = n, this.pool_ = i, this.service_ = r, this.maxOperationRetryTime_ = 12e4, this.maxUploadRetryTime_ = 6e4, this.requestMap_ = new Y_();\n    }\n\n    return a.extractBucket_ = function (t) {\n      var e = t[mw] || null;\n      return null == e ? null : i_.makeFromBucketSpec(e).bucket;\n    }, a.prototype.getAuthToken = function () {\n      return null !== this.app_ && Hw(this.app_.INTERNAL) && Hw(this.app_.INTERNAL.getToken) ? this.app_.INTERNAL.getToken().then(function (t) {\n        return null !== t ? t.accessToken : null;\n      }, function () {\n        return null;\n      }) : Promise.resolve(null);\n    }, a.prototype.bucket = function () {\n      if (this.deleted_) throw Sw();\n      return this.bucket_;\n    }, a.prototype.service = function () {\n      return this.service_;\n    }, a.prototype.makeStorageReference = function (t) {\n      return this.storageRefMaker_(this, t);\n    }, a.prototype.makeRequest = function (t, e) {\n      if (this.deleted_) return new z_(Sw());\n      var n = this.requestMaker_(t, e, this.pool_);\n      return this.requestMap_.addRequest(n), n;\n    }, a.prototype.deleteApp = function () {\n      this.deleted_ = !0, this.app_ = null, this.requestMap_.clear();\n    }, a.prototype.maxUploadRetryTime = function () {\n      return this.maxUploadRetryTime_;\n    }, a.prototype.setMaxUploadRetryTime = function (t) {\n      this.maxUploadRetryTime_ = t;\n    }, a.prototype.maxOperationRetryTime = function () {\n      return this.maxOperationRetryTime_;\n    }, a.prototype.setMaxOperationRetryTime = function (t) {\n      this.maxOperationRetryTime_ = t;\n    }, a;\n  }();\n\n  var J_ = function () {\n    function t(t, e, n, r, i, o, a, s, u, c, h) {\n      var l = this;\n      this.pendingXhr_ = null, this.backoffId_ = null, this.resolve_ = null, this.reject_ = null, this.canceled_ = !1, this.appDelete_ = !1, this.url_ = t, this.method_ = e, this.headers_ = n, this.body_ = r, this.successCodes_ = i.slice(), this.additionalRetryCodes_ = o.slice(), this.callback_ = a, this.errorCallback_ = s, this.progressCallback_ = c, this.timeout_ = u, this.pool_ = h, this.promise_ = new Promise(function (t, e) {\n        l.resolve_ = t, l.reject_ = e, l.start_();\n      });\n    }\n\n    return t.prototype.start_ = function () {\n      var s = this;\n\n      function t(t, e) {\n        var n,\n            r = s.resolve_,\n            i = s.reject_,\n            o = e.xhr;\n        if (e.wasSuccessCode) try {\n          var a = s.callback_(o, o.getResponseText());\n          Gw(a) ? r(a) : r();\n        } catch (t) {\n          i(t);\n        } else null !== o ? ((n = ww()).setServerResponseProp(o.getResponseText()), s.errorCallback_ ? i(s.errorCallback_(o, n)) : i(n)) : e.canceled ? i(n = s.appDelete_ ? Sw() : _w()) : i(n = new gw(vw.RETRY_LIMIT_EXCEEDED, \"Max retry time for operation exceeded, please try again.\"));\n      }\n\n      this.canceled_ ? t(0, new $_(!1, null, !0)) : this.backoffId_ = function (e, n, t) {\n        var r = 1,\n            i = null,\n            o = !1,\n            a = 0;\n\n        function s() {\n          return 2 === a;\n        }\n\n        var u = !1;\n\n        function c() {\n          for (var t = [], e = 0; e < arguments.length; e++) {\n            t[e] = arguments[e];\n          }\n\n          u || (u = !0, n.apply(null, t));\n        }\n\n        function h(t) {\n          i = setTimeout(function () {\n            i = null, e(l, s());\n          }, t);\n        }\n\n        function l(t) {\n          for (var e = [], n = 1; n < arguments.length; n++) {\n            e[n - 1] = arguments[n];\n          }\n\n          u || (t ? c.call.apply(c, [null, t].concat(e)) : s() || o ? c.call.apply(c, [null, t].concat(e)) : (r < 64 && (r *= 2), h(1 === a ? (a = 2, 0) : 1e3 * (r + Math.random()))));\n        }\n\n        var f = !1;\n\n        function p(t) {\n          f || (f = !0, u || (null !== i ? (t || (a = 2), clearTimeout(i), h(0)) : t || (a = 1)));\n        }\n\n        return h(0), setTimeout(function () {\n          p(o = !0);\n        }, t), p;\n      }(function (o, t) {\n        if (t) o(!1, new $_(!1, null, !0));else {\n          var e = s.pool_.createXhrIo();\n          s.pendingXhr_ = e, null !== s.progressCallback_ && e.addUploadProgressListener(a), e.send(s.url_, s.method_, s.body_, s.headers_).then(function (t) {\n            null !== s.progressCallback_ && t.removeUploadProgressListener(a), s.pendingXhr_ = null;\n            var e = (t = t).getErrorCode() === xw.NO_ERROR,\n                n = t.getStatus();\n\n            if (e && !s.isRetryStatusCode_(n)) {\n              var r = -1 !== s.successCodes_.indexOf(n);\n              o(!0, new $_(r, t));\n            } else {\n              var i = t.getErrorCode() === xw.ABORT;\n              o(!1, new $_(!1, null, i));\n            }\n          });\n        }\n\n        function a(t) {\n          var e = t.loaded,\n              n = t.lengthComputable ? t.total : -1;\n          null !== s.progressCallback_ && s.progressCallback_(e, n);\n        }\n      }, t, this.timeout_);\n    }, t.prototype.getPromise = function () {\n      return this.promise_;\n    }, t.prototype.cancel = function (t) {\n      this.canceled_ = !0, this.appDelete_ = t || !1, null !== this.backoffId_ && (0, this.backoffId_)(!1), null !== this.pendingXhr_ && this.pendingXhr_.abort();\n    }, t.prototype.isRetryStatusCode_ = function (t) {\n      var e = 500 <= t && t < 600,\n          n = -1 !== [408, 429].indexOf(t),\n          r = -1 !== this.additionalRetryCodes_.indexOf(t);\n      return e || n || r;\n    }, t;\n  }(),\n      $_ = function $_(t, e, n) {\n    this.wasSuccessCode = t, this.xhr = e, this.canceled = !!n;\n  };\n\n  function Z_(t, e, n) {\n    var r,\n        i,\n        o,\n        a,\n        s = u_(t.urlParams),\n        u = t.url + s,\n        c = Object.assign({}, t.headers);\n    return r = c, null !== (i = e) && 0 < i.length && (r.Authorization = \"Firebase \" + i), o = c, a = void 0 !== Jh ? Jh.SDK_VERSION : \"AppManager\", o[\"X-Firebase-Storage-Version\"] = \"webjs/\" + a, new J_(u, t.method, c, t.body, t.successCodes, t.additionalRetryCodes, t.handler, t.errorHandler, t.timeout, t.progressCallback, n);\n  }\n\n  var tE,\n      eE = function () {\n    function t(t, e, n) {\n      if (this.bucket_ = null, this.authWrapper_ = new X_(t, function (t, e) {\n        return new G_(t, e);\n      }, Z_, this, e), this.app_ = t, null != n) this.bucket_ = i_.makeFromBucketSpec(n);else {\n        var r = this.authWrapper_.bucket();\n        null != r && (this.bucket_ = new i_(r, \"\"));\n      }\n      this.internals_ = new nE(this);\n    }\n\n    return t.prototype.ref = function (t) {\n      if (U_(\"ref\", [V_(function (t) {\n        if (\"string\" != typeof t) throw \"Path is not a string.\";\n        if (/^[A-Za-z]+:\\/\\//.test(t)) throw \"Expected child path but got a URL, use refFromURL instead.\";\n      }, !0)], arguments), null == this.bucket_) throw new Error(\"No Storage Bucket defined in Firebase Options.\");\n      var e = new G_(this.authWrapper_, this.bucket_);\n      return null != t ? e.child(t) : e;\n    }, t.prototype.refFromURL = function (t) {\n      return U_(\"refFromURL\", [V_(function (t) {\n        if (\"string\" != typeof t) throw \"Path is not a string.\";\n        if (!/^[A-Za-z]+:\\/\\//.test(t)) throw \"Expected full URL but got a child path, use ref instead.\";\n\n        try {\n          i_.makeFromUrl(t);\n        } catch (t) {\n          throw \"Expected valid full URL but got an invalid one.\";\n        }\n      }, !1)], arguments), new G_(this.authWrapper_, t);\n    }, Object.defineProperty(t.prototype, \"maxUploadRetryTime\", {\n      get: function get() {\n        return this.authWrapper_.maxUploadRetryTime();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.setMaxUploadRetryTime = function (t) {\n      U_(\"setMaxUploadRetryTime\", [j_()], arguments), this.authWrapper_.setMaxUploadRetryTime(t);\n    }, t.prototype.setMaxOperationRetryTime = function (t) {\n      U_(\"setMaxOperationRetryTime\", [j_()], arguments), this.authWrapper_.setMaxOperationRetryTime(t);\n    }, Object.defineProperty(t.prototype, \"app\", {\n      get: function get() {\n        return this.app_;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"INTERNAL\", {\n      get: function get() {\n        return this.internals_;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t;\n  }(),\n      nE = function () {\n    function t(t) {\n      this.service_ = t;\n    }\n\n    return t.prototype.delete = function () {\n      return this.service_.authWrapper_.deleteApp(), Promise.resolve();\n    }, t;\n  }();\n\n  function rE(t, e, n) {\n    return new eE(t, new e_(), n);\n  }\n\n  function iE(n) {\n    return new Promise(function (t, e) {\n      n.onsuccess = function () {\n        t(n.result);\n      }, n.onerror = function () {\n        e(n.error);\n      };\n    });\n  }\n\n  function oE(n, r, i) {\n    var o,\n        t = new Promise(function (t, e) {\n      iE(o = n[r].apply(n, i)).then(t, e);\n    });\n    return t.request = o, t;\n  }\n\n  function aE(t, n, e) {\n    e.forEach(function (e) {\n      Object.defineProperty(t.prototype, e, {\n        get: function get() {\n          return this[n][e];\n        },\n        set: function set(t) {\n          this[n][e] = t;\n        }\n      });\n    });\n  }\n\n  function sE(e, n, r, t) {\n    t.forEach(function (t) {\n      t in r.prototype && (e.prototype[t] = function () {\n        return oE(this[n], t, arguments);\n      });\n    });\n  }\n\n  function uE(e, n, r, t) {\n    t.forEach(function (t) {\n      t in r.prototype && (e.prototype[t] = function () {\n        return this[n][t].apply(this[n], arguments);\n      });\n    });\n  }\n\n  function cE(t, r, e, n) {\n    n.forEach(function (n) {\n      n in e.prototype && (t.prototype[n] = function () {\n        return t = this[r], (e = oE(t, n, arguments)).then(function (t) {\n          if (t) return new lE(t, e.request);\n        });\n        var t, e;\n      });\n    });\n  }\n\n  function hE(t) {\n    this._index = t;\n  }\n\n  function lE(t, e) {\n    this._cursor = t, this._request = e;\n  }\n\n  function fE(t) {\n    this._store = t;\n  }\n\n  function pE(n) {\n    this._tx = n, this.complete = new Promise(function (t, e) {\n      n.oncomplete = function () {\n        t();\n      }, n.onerror = function () {\n        e(n.error);\n      }, n.onabort = function () {\n        e(n.error);\n      };\n    });\n  }\n\n  function dE(t, e, n) {\n    this._db = t, this.oldVersion = e, this.transaction = new pE(n);\n  }\n\n  function yE(t) {\n    this._db = t;\n  }\n\n  tE = {\n    TaskState: Kw,\n    TaskEvent: Lw,\n    StringFormat: Nw,\n    Storage: eE,\n    Reference: G_\n  }, Jh.INTERNAL.registerService(\"storage\", rE, tE, void 0, !0), aE(hE, \"_index\", [\"name\", \"keyPath\", \"multiEntry\", \"unique\"]), sE(hE, \"_index\", IDBIndex, [\"get\", \"getKey\", \"getAll\", \"getAllKeys\", \"count\"]), cE(hE, \"_index\", IDBIndex, [\"openCursor\", \"openKeyCursor\"]), aE(lE, \"_cursor\", [\"direction\", \"key\", \"primaryKey\", \"value\"]), sE(lE, \"_cursor\", IDBCursor, [\"update\", \"delete\"]), [\"advance\", \"continue\", \"continuePrimaryKey\"].forEach(function (n) {\n    n in IDBCursor.prototype && (lE.prototype[n] = function () {\n      var e = this,\n          t = arguments;\n      return Promise.resolve().then(function () {\n        return e._cursor[n].apply(e._cursor, t), iE(e._request).then(function (t) {\n          if (t) return new lE(t, e._request);\n        });\n      });\n    });\n  }), fE.prototype.createIndex = function () {\n    return new hE(this._store.createIndex.apply(this._store, arguments));\n  }, fE.prototype.index = function () {\n    return new hE(this._store.index.apply(this._store, arguments));\n  }, aE(fE, \"_store\", [\"name\", \"keyPath\", \"indexNames\", \"autoIncrement\"]), sE(fE, \"_store\", IDBObjectStore, [\"put\", \"add\", \"delete\", \"clear\", \"get\", \"getAll\", \"getKey\", \"getAllKeys\", \"count\"]), cE(fE, \"_store\", IDBObjectStore, [\"openCursor\", \"openKeyCursor\"]), uE(fE, \"_store\", IDBObjectStore, [\"deleteIndex\"]), pE.prototype.objectStore = function () {\n    return new fE(this._tx.objectStore.apply(this._tx, arguments));\n  }, aE(pE, \"_tx\", [\"objectStoreNames\", \"mode\"]), uE(pE, \"_tx\", IDBTransaction, [\"abort\"]), dE.prototype.createObjectStore = function () {\n    return new fE(this._db.createObjectStore.apply(this._db, arguments));\n  }, aE(dE, \"_db\", [\"name\", \"version\", \"objectStoreNames\"]), uE(dE, \"_db\", IDBDatabase, [\"deleteObjectStore\", \"close\"]), yE.prototype.transaction = function () {\n    return new pE(this._db.transaction.apply(this._db, arguments));\n  }, aE(yE, \"_db\", [\"name\", \"version\", \"objectStoreNames\"]), uE(yE, \"_db\", IDBDatabase, [\"close\"]), [\"openCursor\", \"openKeyCursor\"].forEach(function (o) {\n    [fE, hE].forEach(function (t) {\n      o in t.prototype && (t.prototype[o.replace(\"open\", \"iterate\")] = function () {\n        var t,\n            e = (t = arguments, Array.prototype.slice.call(t)),\n            n = e[e.length - 1],\n            r = this._store || this._index,\n            i = r[o].apply(r, e.slice(0, -1));\n\n        i.onsuccess = function () {\n          n(i.result);\n        };\n      });\n    });\n  }), [hE, fE].forEach(function (t) {\n    t.prototype.getAll || (t.prototype.getAll = function (t, n) {\n      var r = this,\n          i = [];\n      return new Promise(function (e) {\n        r.iterateCursor(t, function (t) {\n          t ? (i.push(t.value), void 0 === n || i.length != n ? t.continue() : e(i)) : e(i);\n        });\n      });\n    });\n  });\n  var mE,\n      gE = 1e4,\n      vE = \"w:0.2.2\",\n      bE = \"FIS_v2\",\n      wE = \"https://firebaseinstallations.googleapis.com/v1\",\n      _E = 36e5,\n      EE = ((mE = {})[\"missing-app-config-values\"] = \"Missing App configuration values.\", mE[\"create-installation-failed\"] = \"Could not register Firebase Installation.\", mE[\"generate-token-failed\"] = \"Could not generate Auth Token.\", mE[\"not-registered\"] = \"Firebase Installation is not registered.\", mE[\"installation-not-found\"] = \"Firebase Installation not found.\", mE[\"request-failed\"] = '{$requestName} request failed with error \"{$serverCode} {$serverStatus}: {$serverMessage}\"', mE[\"app-offline\"] = \"Could not process request. Application offline.\", mE[\"delete-pending-registration\"] = \"Can't delete installation while there is a pending registration request.\", mE),\n      TE = new Ii(\"installations\", \"Installations\", EE);\n\n  function SE(t) {\n    return t instanceof Si && t.code.includes(\"request-failed\");\n  }\n\n  function IE(t) {\n    if (!t || !t.options) throw TE.create(\"missing-app-config-values\");\n    var e = t.name,\n        n = t.options,\n        r = n.projectId,\n        i = n.apiKey,\n        o = n.appId;\n    if (!(e && r && i && o)) throw TE.create(\"missing-app-config-values\");\n    return {\n      appName: e,\n      projectId: r,\n      apiKey: i,\n      appId: o\n    };\n  }\n\n  function CE(t) {\n    var e = t.projectId;\n    return wE + \"/projects/\" + e + \"/installations\";\n  }\n\n  function NE(t) {\n    return {\n      token: t.token,\n      requestStatus: 2,\n      expiresIn: (e = t.expiresIn, Number(e.replace(\"s\", \"000\"))),\n      creationTime: Date.now()\n    };\n    var e;\n  }\n\n  function AE(r, i) {\n    return ai(this, void 0, void 0, function () {\n      var e, n;\n      return si(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return [4, i.json()];\n\n          case 1:\n            return e = t.sent(), n = e.error, [2, TE.create(\"request-failed\", {\n              requestName: r,\n              serverCode: n.code,\n              serverMessage: n.message,\n              serverStatus: n.status\n            })];\n        }\n      });\n    });\n  }\n\n  function kE(t) {\n    var e = t.apiKey;\n    return new Headers({\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\",\n      \"x-goog-api-key\": e\n    });\n  }\n\n  function DE(t, e) {\n    var n = e.refreshToken,\n        r = kE(t);\n    return r.append(\"Authorization\", bE + \" \" + n), r;\n  }\n\n  function RE(n) {\n    return ai(this, void 0, void 0, function () {\n      var e;\n      return si(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return [4, n()];\n\n          case 1:\n            return 500 <= (e = t.sent()).status && e.status < 600 ? [2, n()] : [2, e];\n        }\n      });\n    });\n  }\n\n  function OE(e) {\n    return new Promise(function (t) {\n      setTimeout(t, e);\n    });\n  }\n\n  var PE = /^[cdef][\\w-]{21}$/,\n      xE = \"\";\n\n  function ME() {\n    try {\n      var t = new Uint8Array(17);\n      (self.crypto || self.msCrypto).getRandomValues(t), t[0] = 112 + t[0] % 16;\n      var e = (n = t, btoa(String.fromCharCode.apply(String, hi(n))).replace(/\\+/g, \"-\").replace(/\\//g, \"_\")).substr(0, 22);\n      return PE.test(e) ? e : xE;\n    } catch (t) {\n      return xE;\n    }\n\n    var n;\n  }\n\n  var LE = \"firebase-installations-database\",\n      FE = 1,\n      UE = \"firebase-installations-store\",\n      qE = null;\n\n  function VE() {\n    var e, t, n;\n    return qE || (e = function e(t) {\n      switch (t.oldVersion) {\n        case 0:\n          t.createObjectStore(UE);\n      }\n    }, t = oE(indexedDB, \"open\", [LE, FE]), (n = t.request) && (n.onupgradeneeded = function (t) {\n      e && e(new dE(n.result, t.oldVersion, n.transaction));\n    }), qE = t.then(function (t) {\n      return new yE(t);\n    })), qE;\n  }\n\n  function BE(i, o) {\n    return ai(this, void 0, void 0, function () {\n      var e, n, r;\n      return si(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return e = KE(i), [4, VE()];\n\n          case 1:\n            return n = t.sent(), [4, (r = n.transaction(UE, \"readwrite\")).objectStore(UE).put(o, e)];\n\n          case 2:\n            return t.sent(), [4, r.complete];\n\n          case 3:\n            return t.sent(), [2, o];\n        }\n      });\n    });\n  }\n\n  function jE(i) {\n    return ai(this, void 0, void 0, function () {\n      var e, n, r;\n      return si(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return e = KE(i), [4, VE()];\n\n          case 1:\n            return n = t.sent(), [4, (r = n.transaction(UE, \"readwrite\")).objectStore(UE).delete(e)];\n\n          case 2:\n            return t.sent(), [4, r.complete];\n\n          case 3:\n            return t.sent(), [2];\n        }\n      });\n    });\n  }\n\n  function WE(s, u) {\n    return ai(this, void 0, void 0, function () {\n      var e, n, r, i, o, a;\n      return si(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return e = KE(s), [4, VE()];\n\n          case 1:\n            return n = t.sent(), r = n.transaction(UE, \"readwrite\"), [4, (i = r.objectStore(UE)).get(e)];\n\n          case 2:\n            return o = t.sent(), (a = u(o)) === o ? [2, a] : void 0 !== a ? [3, 4] : [4, i.delete(e)];\n\n          case 3:\n            return t.sent(), [3, 6];\n\n          case 4:\n            return [4, i.put(a, e)];\n\n          case 5:\n            t.sent(), t.label = 6;\n\n          case 6:\n            return [4, r.complete];\n\n          case 7:\n            return t.sent(), [2, a];\n        }\n      });\n    });\n  }\n\n  function KE(t) {\n    return t.appName + \"!\" + t.appId;\n  }\n\n  function QE(i) {\n    return ai(this, void 0, void 0, function () {\n      var r, e, n;\n      return si(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return [4, WE(i, function (t) {\n              var e = function (t) {\n                var e = t || {\n                  fid: ME(),\n                  registrationStatus: 0\n                };\n                if (GE(e)) return {\n                  fid: e.fid,\n                  registrationStatus: 0\n                };\n                return e;\n              }(t),\n                  n = function (t, e) {\n                {\n                  if (0 !== e.registrationStatus) return 1 === e.registrationStatus ? {\n                    installationEntry: e,\n                    registrationPromise: function (n) {\n                      return ai(this, void 0, void 0, function () {\n                        var e;\n                        return si(this, function (t) {\n                          switch (t.label) {\n                            case 0:\n                              return [4, HE(n)];\n\n                            case 1:\n                              e = t.sent(), t.label = 2;\n\n                            case 2:\n                              return 1 !== e.registrationStatus ? [3, 5] : [4, OE(100)];\n\n                            case 3:\n                              return t.sent(), [4, HE(n)];\n\n                            case 4:\n                              return e = t.sent(), [3, 2];\n\n                            case 5:\n                              if (0 === e.registrationStatus) throw TE.create(\"create-installation-failed\");\n                              return [2, e];\n                          }\n                        });\n                      });\n                    }(t)\n                  } : {\n                    installationEntry: e\n                  };\n\n                  if (!navigator.onLine) {\n                    var n = Promise.reject(TE.create(\"app-offline\"));\n                    return {\n                      installationEntry: e,\n                      registrationPromise: n\n                    };\n                  }\n\n                  var r = {\n                    fid: e.fid,\n                    registrationStatus: 1,\n                    registrationTime: Date.now()\n                  },\n                      i = function (r, i) {\n                    return ai(this, void 0, void 0, function () {\n                      var e, n;\n                      return si(this, function (t) {\n                        switch (t.label) {\n                          case 0:\n                            return t.trys.push([0, 2,, 7]), [4, function (s, t) {\n                              var u = t.fid;\n                              return ai(this, void 0, void 0, function () {\n                                var e, n, r, i, o, a;\n                                return si(this, function (t) {\n                                  switch (t.label) {\n                                    case 0:\n                                      return e = CE(s), n = kE(s), r = {\n                                        fid: u,\n                                        authVersion: bE,\n                                        appId: s.appId,\n                                        sdkVersion: vE\n                                      }, i = {\n                                        method: \"POST\",\n                                        headers: n,\n                                        body: JSON.stringify(r)\n                                      }, [4, RE(function () {\n                                        return fetch(e, i);\n                                      })];\n\n                                    case 1:\n                                      return (o = t.sent()).ok ? [4, o.json()] : [3, 3];\n\n                                    case 2:\n                                      return [2, {\n                                        fid: (a = t.sent()).fid || u,\n                                        registrationStatus: 2,\n                                        refreshToken: a.refreshToken,\n                                        authToken: NE(a.authToken)\n                                      }];\n\n                                    case 3:\n                                      return [4, AE(\"Create Installation\", o)];\n\n                                    case 4:\n                                      throw t.sent();\n                                  }\n                                });\n                              });\n                            }(r, i)];\n\n                          case 1:\n                            return e = t.sent(), [2, BE(r, e)];\n\n                          case 2:\n                            return SE(n = t.sent()) && 409 === n.serverCode ? [4, jE(r)] : [3, 4];\n\n                          case 3:\n                            return t.sent(), [3, 6];\n\n                          case 4:\n                            return [4, BE(r, {\n                              fid: i.fid,\n                              registrationStatus: 0\n                            })];\n\n                          case 5:\n                            t.sent(), t.label = 6;\n\n                          case 6:\n                            throw n;\n\n                          case 7:\n                            return [2];\n                        }\n                      });\n                    });\n                  }(t, r);\n\n                  return {\n                    installationEntry: r,\n                    registrationPromise: i\n                  };\n                }\n              }(i, e);\n\n              return r = n.registrationPromise, n.installationEntry;\n            })];\n\n          case 1:\n            return (e = t.sent()).fid !== xE ? [3, 3] : (n = {}, [4, r]);\n\n          case 2:\n            return [2, (n.installationEntry = t.sent(), n)];\n\n          case 3:\n            return [2, {\n              installationEntry: e,\n              registrationPromise: r\n            }];\n        }\n      });\n    });\n  }\n\n  function HE(t) {\n    return WE(t, function (t) {\n      if (!t) throw TE.create(\"installation-not-found\");\n      return GE(t) ? {\n        fid: t.fid,\n        registrationStatus: 0\n      } : t;\n    });\n  }\n\n  function GE(t) {\n    return 1 === t.registrationStatus && t.registrationTime + gE < Date.now();\n  }\n\n  function zE(c, h) {\n    return ai(this, void 0, void 0, function () {\n      var r, i, o, a, s, u;\n      return si(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return e = c, n = h.fid, r = CE(e) + \"/\" + n + \"/authTokens:generate\", i = DE(c, h), o = {\n              installation: {\n                sdkVersion: vE\n              }\n            }, a = {\n              method: \"POST\",\n              headers: i,\n              body: JSON.stringify(o)\n            }, [4, RE(function () {\n              return fetch(r, a);\n            })];\n\n          case 1:\n            return (s = t.sent()).ok ? [4, s.json()] : [3, 3];\n\n          case 2:\n            return u = t.sent(), [2, NE(u)];\n\n          case 3:\n            return [4, AE(\"Generate Auth Token\", s)];\n\n          case 4:\n            throw t.sent();\n        }\n\n        var e, n;\n      });\n    });\n  }\n\n  function YE(c) {\n    return ai(this, void 0, void 0, function () {\n      var u, e, n;\n      return si(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return [4, WE(c, function (t) {\n              if (!JE(t)) throw TE.create(\"not-registered\");\n              var e,\n                  n,\n                  r,\n                  i,\n                  o,\n                  a = t.authToken;\n\n              if (2 !== (r = a).requestStatus || (i = r, (o = Date.now()) < i.creationTime || i.creationTime + i.expiresIn < o + _E)) {\n                if (1 === a.requestStatus) return u = function (r) {\n                  return ai(this, void 0, void 0, function () {\n                    var e, n;\n                    return si(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return [4, XE(r)];\n\n                        case 1:\n                          e = t.sent(), t.label = 2;\n\n                        case 2:\n                          return 1 !== e.authToken.requestStatus ? [3, 5] : [4, OE(100)];\n\n                        case 3:\n                          return t.sent(), [4, XE(r)];\n\n                        case 4:\n                          return e = t.sent(), [3, 2];\n\n                        case 5:\n                          if (0 === (n = e.authToken).requestStatus) throw TE.create(\"generate-token-failed\");\n                          return [2, n];\n                      }\n                    });\n                  });\n                }(c), t;\n                if (!navigator.onLine) throw TE.create(\"app-offline\");\n                var s = (e = t, n = {\n                  requestStatus: 1,\n                  requestTime: Date.now()\n                }, _oi({}, e, {\n                  authToken: n\n                }));\n                return u = function (i, o) {\n                  return ai(this, void 0, void 0, function () {\n                    var e, n, r;\n                    return si(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return t.trys.push([0, 3,, 8]), [4, zE(i, o)];\n\n                        case 1:\n                          return e = t.sent(), r = _oi({}, o, {\n                            authToken: e\n                          }), [4, BE(i, r)];\n\n                        case 2:\n                          return t.sent(), [2, e];\n\n                        case 3:\n                          return !SE(n = t.sent()) || 401 !== n.serverCode && 404 !== n.serverCode ? [3, 5] : [4, jE(i)];\n\n                        case 4:\n                          return t.sent(), [3, 7];\n\n                        case 5:\n                          return r = _oi({}, o, {\n                            authToken: {\n                              requestStatus: 0\n                            }\n                          }), [4, BE(i, r)];\n\n                        case 6:\n                          t.sent(), t.label = 7;\n\n                        case 7:\n                          throw n;\n\n                        case 8:\n                          return [2];\n                      }\n                    });\n                  });\n                }(c, s), s;\n              }\n\n              return t;\n            })];\n\n          case 1:\n            return e = t.sent(), u ? [4, u] : [3, 3];\n\n          case 2:\n            return n = t.sent(), [3, 4];\n\n          case 3:\n            n = e.authToken, t.label = 4;\n\n          case 4:\n            return [2, n.token];\n        }\n      });\n    });\n  }\n\n  function XE(t) {\n    return WE(t, function (t) {\n      if (!JE(t)) throw TE.create(\"not-registered\");\n      var e,\n          n = t.authToken;\n      return 1 === (e = n).requestStatus && e.requestTime + gE < Date.now() ? _oi({}, t, {\n        authToken: {\n          requestStatus: 0\n        }\n      }) : t;\n    });\n  }\n\n  function JE(t) {\n    return void 0 !== t && 2 === t.registrationStatus;\n  }\n\n  function $E(n) {\n    return ai(this, void 0, void 0, function () {\n      var e;\n      return si(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return [4, function (i) {\n              return ai(this, void 0, void 0, function () {\n                var e, n, r;\n                return si(this, function (t) {\n                  switch (t.label) {\n                    case 0:\n                      return [4, QE(i)];\n\n                    case 1:\n                      return e = t.sent(), n = e.installationEntry, (r = e.registrationPromise) ? [4, r] : [3, 3];\n\n                    case 2:\n                      return t.sent(), [3, 4];\n\n                    case 3:\n                      if (2 !== n.registrationStatus) throw TE.create(\"create-installation-failed\");\n                      t.label = 4;\n\n                    case 4:\n                      return [2];\n                  }\n                });\n              });\n            }(e = IE(n))];\n\n          case 1:\n            return t.sent(), [2, YE(e)];\n        }\n      });\n    });\n  }\n\n  function ZE(s, u) {\n    return ai(this, void 0, void 0, function () {\n      var r, i, o, a;\n      return si(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return e = s, n = u.fid, r = CE(e) + \"/\" + n, i = DE(s, u), o = {\n              method: \"DELETE\",\n              headers: i\n            }, [4, RE(function () {\n              return fetch(r, o);\n            })];\n\n          case 1:\n            return (a = t.sent()).ok ? [3, 3] : [4, AE(\"Delete Installation\", a)];\n\n          case 2:\n            throw t.sent();\n\n          case 3:\n            return [2];\n        }\n\n        var e, n;\n      });\n    });\n  }\n\n  Jh.INTERNAL.registerService(\"installations\", function (t) {\n    return IE(t), {\n      app: t,\n      getId: function getId() {\n        return function (o) {\n          return ai(this, void 0, void 0, function () {\n            var e, n, r, i;\n            return si(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return [4, QE(e = IE(o))];\n\n                case 1:\n                  return n = t.sent(), r = n.installationEntry, (i = n.registrationPromise) && i.catch(function () {}), 2 === r.registrationStatus && YE(e).catch(function () {}), [2, r.fid];\n              }\n            });\n          });\n        }(t);\n      },\n      getToken: function getToken() {\n        return $E(t);\n      },\n      delete: function _delete() {\n        return function (r) {\n          return ai(this, void 0, void 0, function () {\n            var e, n;\n            return si(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return [4, WE(e = IE(r), function (t) {\n                    if (!t || 0 !== t.registrationStatus) return t;\n                  })];\n\n                case 1:\n                  if (!(n = t.sent())) return [3, 6];\n                  if (1 !== n.registrationStatus) return [3, 2];\n                  throw TE.create(\"delete-pending-registration\");\n\n                case 2:\n                  if (2 !== n.registrationStatus) return [3, 6];\n                  if (navigator.onLine) return [3, 3];\n                  throw TE.create(\"app-offline\");\n\n                case 3:\n                  return [4, ZE(e, n)];\n\n                case 4:\n                  return t.sent(), [4, jE(e)];\n\n                case 5:\n                  t.sent(), t.label = 6;\n\n                case 6:\n                  return [2];\n              }\n            });\n          });\n        }(t);\n      }\n    };\n  });\n\n  var tT,\n      eT,\n      nT,\n      rT,\n      iT = \"0.2.13\",\n      oT = \"FB-PERF-TRACE-MEASURE\",\n      aT = \"@firebase/performance/config\",\n      sT = \"@firebase/performance/configexpire\",\n      uT = \"Performance\",\n      cT = ((tT = {})[\"trace started\"] = \"Trace {$traceName} was started before.\", tT[\"trace stopped\"] = \"Trace {$traceName} is not running.\", tT[\"no window\"] = \"Window is not available.\", tT[\"no app id\"] = \"App id is not available.\", tT[\"no project id\"] = \"Project id is not available.\", tT[\"no api key\"] = \"Api key is not available.\", tT[\"invalid cc log\"] = \"Attempted to queue invalid cc event\", tT[\"FB not default\"] = \"Performance can only start when Firebase app instance is the default one.\", tT[\"RC response not ok\"] = \"RC response is not ok\", tT),\n      hT = new Ii(\"performance\", uT, cT),\n      lT = function () {\n    function t(t) {\n      if (!t) throw hT.create(\"no window\");\n      this.performance = t.performance, this.PerformanceObserver = t.PerformanceObserver, this.windowLocation = t.location, this.navigator = t.navigator, this.document = t.document, this.navigator && this.navigator.cookieEnabled && (this.localStorage = t.localStorage), t.perfMetrics && t.perfMetrics.onFirstInputDelay && (this.onFirstInputDelay = t.perfMetrics.onFirstInputDelay);\n    }\n\n    return t.prototype.getUrl = function () {\n      return this.windowLocation.href.split(\"?\")[0];\n    }, t.prototype.mark = function (t) {\n      this.performance && this.performance.mark && this.performance.mark(t);\n    }, t.prototype.measure = function (t, e, n) {\n      this.performance && this.performance.measure && this.performance.measure(t, e, n);\n    }, t.prototype.getEntriesByType = function (t) {\n      return this.performance && this.performance.getEntriesByType ? this.performance.getEntriesByType(t) : [];\n    }, t.prototype.getEntriesByName = function (t) {\n      return this.performance && this.performance.getEntriesByName ? this.performance.getEntriesByName(t) : [];\n    }, t.prototype.getTimeOrigin = function () {\n      return this.performance && (this.performance.timeOrigin || this.performance.timing.navigationStart);\n    }, t.prototype.requiredApisAvailable = function () {\n      return !!(fetch && Promise && this.navigator && this.navigator.cookieEnabled);\n    }, t.prototype.setupObserver = function (t, i) {\n      this.PerformanceObserver && new this.PerformanceObserver(function (t) {\n        for (var e = 0, n = t.getEntries(); e < n.length; e++) {\n          var r = n[e];\n          i(r);\n        }\n      }).observe({\n        entryTypes: [t]\n      });\n    }, t.getInstance = function () {\n      return void 0 === eT && (eT = new t(nT)), eT;\n    }, t;\n  }();\n\n  var fT,\n      pT,\n      dT,\n      yT = function () {\n    function t() {\n      this.instrumentationEnabled = !0, this.dataCollectionEnabled = !0, this.loggingEnabled = !1, this.tracesSamplingRate = 1, this.networkRequestsSamplingRate = 1, this.logEndPointUrl = \"https://firebaselogging.googleapis.com/v0cc/log?format=json_proto\", this.logSource = 462, this.logTraceAfterSampling = !1, this.logNetworkAfterSampling = !1, this.configTimeToLive = 12;\n    }\n\n    return t.prototype.getAppId = function () {\n      var t = this.firebaseAppInstance && this.firebaseAppInstance.options && this.firebaseAppInstance.options.appId;\n      if (!t) throw hT.create(\"no app id\");\n      return t;\n    }, t.prototype.getProjectId = function () {\n      var t = this.firebaseAppInstance && this.firebaseAppInstance.options && this.firebaseAppInstance.options.projectId;\n      if (!t) throw hT.create(\"no project id\");\n      return t;\n    }, t.prototype.getApiKey = function () {\n      var t = this.firebaseAppInstance && this.firebaseAppInstance.options && this.firebaseAppInstance.options.apiKey;\n      if (!t) throw hT.create(\"no api key\");\n      return t;\n    }, t.getInstance = function () {\n      return void 0 === rT && (rT = new t()), rT;\n    }, t;\n  }();\n\n  function mT() {\n    return fT;\n  }\n\n  function gT() {\n    switch (lT.getInstance().document.visibilityState) {\n      case \"visible\":\n        return pT.VISIBLE;\n\n      case \"hidden\":\n        return pT.HIDDEN;\n\n      case \"prerender\":\n        return pT.PRERENDER;\n\n      default:\n        return pT.UNKNOWN;\n    }\n  }\n\n  (dT = pT || (pT = {}))[dT.UNKNOWN = 0] = \"UNKNOWN\", dT[dT.VISIBLE = 1] = \"VISIBLE\", dT[dT.HIDDEN = 2] = \"HIDDEN\", dT[dT.PRERENDER = 3] = \"PRERENDER\", dT[dT.UNLOADED = 4] = \"UNLOADED\";\n  var vT = new zi(uT);\n  vT.logLevel = ji.INFO;\n  var bT = \"0.0.1\",\n      wT = {\n    loggingEnabled: !0\n  },\n      _T = \"FIREBASE_INSTALLATIONS_AUTH\";\n\n  function ET(t) {\n    var i,\n        e,\n        n = function () {\n      var t = lT.getInstance().localStorage,\n          e = t.getItem(sT);\n      if (!(e && (n = e, Number(n) > Date.now()))) return;\n      var n;\n      var r = t.getItem(aT);\n      if (!r) return;\n\n      try {\n        var i = JSON.parse(r);\n        return i;\n      } catch (t) {\n        return;\n      }\n    }();\n\n    return n ? (ST(n), Promise.resolve()) : (i = t, (e = yT.getInstance().firebaseAppInstance.installations().getToken(), e.then(function (t) {}), e).then(function (t) {\n      var e = yT.getInstance().getProjectId(),\n          n = \"https://firebaseremoteconfig.googleapis.com/v1/projects/\" + e + \"/namespaces/fireperf:fetch?key=\" + yT.getInstance().getApiKey(),\n          r = new Request(n, {\n        method: \"POST\",\n        headers: {\n          Authorization: _T + \" \" + t\n        },\n        body: JSON.stringify({\n          app_instance_id: i,\n          app_instance_id_token: t,\n          app_id: yT.getInstance().getAppId(),\n          app_version: iT,\n          sdk_version: bT\n        })\n      });\n      return fetch(r).then(function (t) {\n        if (t.ok) return t.json();\n        throw hT.create(\"RC response not ok\");\n      });\n    }).catch(function () {\n      vT.info(TT);\n    })).then(function (t) {\n      return ST(t);\n    }).then(function (t) {\n      return function (t) {\n        if (!t) return;\n        var e = lT.getInstance().localStorage;\n        e.setItem(aT, JSON.stringify(t)), e.setItem(sT, String(Date.now() + 60 * yT.getInstance().configTimeToLive * 60 * 1e3));\n      }(t);\n    }, function () {});\n  }\n\n  var TT = \"Could not fetch config, will use default configs\";\n\n  function ST(t) {\n    if (!t) return t;\n    var e = yT.getInstance(),\n        n = t.entries || {};\n    return void 0 !== n.fpr_enabled ? e.loggingEnabled = \"true\" === String(n.fpr_enabled) : e.loggingEnabled = wT.loggingEnabled, n.fpr_log_source && (e.logSource = Number(n.fpr_log_source)), n.fpr_log_endpoint_url && (e.logEndPointUrl = n.fpr_log_endpoint_url), void 0 !== n.fpr_vc_network_request_sampling_rate && (e.networkRequestsSamplingRate = Number(n.fpr_vc_network_request_sampling_rate)), void 0 !== n.fpr_vc_trace_sampling_rate && (e.tracesSamplingRate = Number(n.fpr_vc_trace_sampling_rate)), e.logTraceAfterSampling = IT(e.tracesSamplingRate), e.logNetworkAfterSampling = IT(e.networkRequestsSamplingRate), t;\n  }\n\n  function IT(t) {\n    return Math.random() <= t;\n  }\n\n  var CT,\n      NT = 1;\n\n  function AT() {\n    var n;\n    return NT = 2, CT = CT || (n = lT.getInstance().document, new Promise(function (t) {\n      if (n && \"complete\" !== n.readyState) {\n        var e = function e() {\n          \"complete\" === n.readyState && (n.removeEventListener(\"readystatechange\", e), t());\n        };\n\n        n.addEventListener(\"readystatechange\", e);\n      } else t();\n    })).then(function () {\n      return (t = yT.getInstance().firebaseAppInstance.installations().getId()).then(function (t) {\n        fT = t;\n      }), t;\n      var t;\n    }).then(function (t) {\n      return ET(t);\n    }).then(function () {\n      return kT();\n    }, function () {\n      return kT();\n    });\n  }\n\n  function kT() {\n    NT = 3;\n  }\n\n  var DT,\n      RT = 1e4,\n      OT = 3,\n      PT = OT,\n      xT = [];\n\n  function MT(i) {\n    return function (t, e) {\n      for (var n = [], r = 2; r < arguments.length; r++) {\n        n[r - 2] = arguments[r];\n      }\n\n      !function (t) {\n        if (!t.eventTime || !t.message) throw hT.create(\"invalid cc log\");\n        xT = xT.concat([t]);\n      }({\n        message: i.apply(void 0, n),\n        eventTime: Date.now()\n      });\n    };\n  }\n\n  function LT() {\n    if (DT) return DT;\n    var t = MT(qT);\n    return (DT = new zi(\"@firebase/performance/cc\")).logHandler = t, DT;\n  }\n\n  function FT(t) {\n    var e = yT.getInstance();\n    !e.instrumentationEnabled && t.isAuto || (e.dataCollectionEnabled || t.isAuto) && lT.getInstance().requiredApisAvailable() && (t.isAuto && gT() !== pT.VISIBLE || e.loggingEnabled && e.logTraceAfterSampling && (3 === NT ? UT(t) : AT().then(function () {\n      return UT(t);\n    }, function () {\n      return UT(t);\n    })));\n  }\n\n  function UT(t) {\n    mT() && setTimeout(function () {\n      return LT().log(t, 1);\n    }, 0);\n  }\n\n  function qT(t, e) {\n    return 0 === e ? (r = {\n      url: (n = t).url,\n      http_method: n.httpMethod || 0,\n      http_response_code: 200,\n      response_payload_bytes: n.responsePayloadBytes,\n      client_start_time_us: n.startTimeUs,\n      time_to_response_initiated_us: n.timeToResponseInitiatedUs,\n      time_to_response_completed_us: n.timeToResponseCompletedUs\n    }, i = {\n      application_info: VT(),\n      network_request_metric: r\n    }, JSON.stringify(i)) : function (t) {\n      var e = {\n        name: t.name,\n        is_auto: t.isAuto,\n        client_start_time_us: t.startTimeUs,\n        duration_us: t.durationUs\n      };\n      0 !== Object.keys(t.counters).length && (e.counters = BT(t.counters));\n      var n = t.getAttributes();\n      0 !== Object.keys(n).length && (e.custom_attributes = BT(n));\n      var r = {\n        application_info: VT(),\n        trace_metric: e\n      };\n      return JSON.stringify(r);\n    }(t);\n    var n, r, i;\n  }\n\n  function VT() {\n    return {\n      google_app_id: yT.getInstance().getAppId(),\n      app_instance_id: mT(),\n      web_app_info: {\n        sdk_version: iT,\n        page_url: lT.getInstance().getUrl(),\n        service_worker_status: (t = lT.getInstance().navigator, \"serviceWorker\" in t ? t.serviceWorker.controller ? 2 : 3 : 1),\n        visibility_state: gT(),\n        effective_connection_type: function () {\n          var t = lT.getInstance().navigator.connection;\n\n          switch (t && t.effectiveType) {\n            case \"slow-2g\":\n              return 1;\n\n            case \"2g\":\n              return 2;\n\n            case \"3g\":\n              return 3;\n\n            case \"4g\":\n              return 4;\n\n            default:\n              return 0;\n          }\n        }()\n      },\n      application_process_state: 0\n    };\n    var t;\n  }\n\n  function BT(e) {\n    return Object.keys(e).map(function (t) {\n      return {\n        key: t,\n        value: e[t]\n      };\n    });\n  }\n\n  !function r(t) {\n    setTimeout(function () {\n      if (0 !== PT) {\n        if (!xT.length) return r(RT);\n        var t = xT.slice();\n        xT = [];\n        var e = t.map(function (t) {\n          return {\n            source_extension_json: t.message,\n            event_time_ms: String(t.eventTime)\n          };\n        }),\n            n = {\n          request_time_ms: String(Date.now()),\n          client_info: {\n            client_type: 1,\n            js_client_info: {}\n          },\n          log_source: yT.getInstance().logSource,\n          log_event: e\n        };\n        fetch(yT.getInstance().logEndPointUrl, {\n          method: \"POST\",\n          body: JSON.stringify(n)\n        }).then(function (t) {\n          return t.ok || vT.info(\"Call to Firebase backend failed.\"), t.json();\n        }).then(function (t) {\n          var e = Number(t.next_request_wait_millis),\n              n = isNaN(e) ? RT : Math.max(RT, e);\n          PT = OT, r(n);\n        }).catch(function () {\n          xT = t.concat(xT), PT--, vT.info(\"Tries left: \" + PT + \".\"), r(RT);\n        });\n      }\n    }, t);\n  }(5500);\n\n  var jT = function () {\n    function u(t, e, n) {\n      void 0 === e && (e = !1), this.name = t, this.isAuto = e, this.state = 1, this.customAttributes = {}, this.counters = {}, this.api = lT.getInstance(), this.randomId = Math.floor(1e6 * Math.random()), this.isAuto || (this.traceStartMark = \"FB-PERF-TRACE-START-\" + this.randomId + \"-\" + this.name, this.traceStopMark = \"FB-PERF-TRACE-STOP-\" + this.randomId + \"-\" + this.name, this.traceMeasure = n || oT + \"-\" + this.randomId + \"-\" + this.name, n && this.calculateTraceMetrics());\n    }\n\n    return u.prototype.start = function () {\n      if (1 !== this.state) throw hT.create(\"trace started\", {\n        traceName: this.name\n      });\n      this.api.mark(this.traceStartMark), this.state = 2;\n    }, u.prototype.stop = function () {\n      if (2 !== this.state) throw hT.create(\"trace stopped\", {\n        traceName: this.name\n      });\n      this.state = 3, this.api.mark(this.traceStopMark), this.api.measure(this.traceMeasure, this.traceStartMark, this.traceStopMark), this.calculateTraceMetrics(), FT(this);\n    }, u.prototype.record = function (t, e, n) {\n      if (this.durationUs = Math.floor(1e3 * e), this.startTimeUs = Math.floor(1e3 * t), n && n.attributes && (this.customAttributes = _oi({}, n.attributes)), n && n.metrics) for (var r = 0, i = Object.keys(n.metrics); r < i.length; r++) {\n        var o = i[r];\n        isNaN(Number(n.metrics[o])) || (this.counters[o] = Number(Math.floor(n.metrics[o])));\n      }\n      FT(this);\n    }, u.prototype.incrementMetric = function (t, e) {\n      void 0 === e && (e = 1), void 0 === this.counters[t] && (this.counters[t] = 0), this.counters[t] += e;\n    }, u.prototype.putMetric = function (t, e) {\n      this.counters[t] = e;\n    }, u.prototype.getMetric = function (t) {\n      return this.counters[t] || 0;\n    }, u.prototype.putAttribute = function (t, e) {\n      this.customAttributes[t] = e;\n    }, u.prototype.getAttribute = function (t) {\n      return this.customAttributes[t];\n    }, u.prototype.removeAttribute = function (t) {\n      void 0 !== this.customAttributes[t] && delete this.customAttributes[t];\n    }, u.prototype.getAttributes = function () {\n      return _oi({}, this.customAttributes);\n    }, u.prototype.setStartTime = function (t) {\n      this.startTimeUs = t;\n    }, u.prototype.setDuration = function (t) {\n      this.durationUs = t;\n    }, u.prototype.calculateTraceMetrics = function () {\n      var t = this.api.getEntriesByName(this.traceMeasure),\n          e = t && t[0];\n      e && (this.durationUs = Math.floor(1e3 * e.duration), this.startTimeUs = Math.floor(1e3 * (e.startTime + this.api.getTimeOrigin())));\n    }, u.createOobTrace = function (t, e, n) {\n      var r = lT.getInstance().getUrl();\n\n      if (r) {\n        var i = new u(\"_wt_\" + r, !0),\n            o = Math.floor(1e3 * lT.getInstance().getTimeOrigin());\n        i.setStartTime(o), t && t[0] && (i.setDuration(Math.floor(1e3 * t[0].duration)), i.incrementMetric(\"domInteractive\", Math.floor(1e3 * t[0].domInteractive)), i.incrementMetric(\"domContentLoadedEventEnd\", Math.floor(1e3 * t[0].domContentLoadedEventEnd)), i.incrementMetric(\"loadEventEnd\", Math.floor(1e3 * t[0].loadEventEnd)));\n\n        if (e) {\n          var a = e.find(function (t) {\n            return \"first-paint\" === t.name;\n          });\n          a && a.startTime && i.incrementMetric(\"_fp\", Math.floor(1e3 * a.startTime));\n          var s = e.find(function (t) {\n            return \"first-contentful-paint\" === t.name;\n          });\n          s && s.startTime && i.incrementMetric(\"_fcp\", Math.floor(1e3 * s.startTime)), n && i.incrementMetric(\"_fid\", Math.floor(1e3 * n));\n        }\n\n        FT(i);\n      }\n    }, u.createUserTimingTrace = function (t) {\n      FT(new u(t, !1, t));\n    }, u;\n  }();\n\n  function WT(t) {\n    var e = t;\n\n    if (e && void 0 !== e.responseStart) {\n      var n,\n          r,\n          i = lT.getInstance().getTimeOrigin(),\n          o = Math.floor(1e3 * (e.startTime + i)),\n          a = e.responseStart ? Math.floor(1e3 * (e.responseStart - e.startTime)) : void 0,\n          s = Math.floor(1e3 * (e.responseEnd - e.startTime)),\n          u = {\n        url: e.name && e.name.split(\"?\")[0],\n        responsePayloadBytes: e.transferSize,\n        startTimeUs: o,\n        timeToResponseInitiatedUs: a,\n        timeToResponseCompletedUs: s\n      };\n      n = u, (r = yT.getInstance()).instrumentationEnabled && n.url !== r.logEndPointUrl.split(\"?\")[0] && r.loggingEnabled && r.logNetworkAfterSampling && setTimeout(function () {\n        return LT().log(n, 0);\n      }, 0);\n    }\n  }\n\n  var KT = 5e3;\n\n  function QT() {\n    mT() && (setTimeout(function () {\n      return function () {\n        var t = lT.getInstance(),\n            e = t.getEntriesByType(\"navigation\"),\n            n = t.getEntriesByType(\"paint\");\n\n        if (t.onFirstInputDelay) {\n          var r = setTimeout(function () {\n            jT.createOobTrace(e, n), r = void 0;\n          }, KT);\n          t.onFirstInputDelay(function (t) {\n            r && (clearTimeout(r), jT.createOobTrace(e, n, t));\n          });\n        } else jT.createOobTrace(e, n);\n      }();\n    }, 0), setTimeout(function () {\n      return function () {\n        for (var t = lT.getInstance(), e = t.getEntriesByType(\"resource\"), n = 0, r = e; n < r.length; n++) {\n          var i = r[n];\n          WT(i);\n        }\n\n        t.setupObserver(\"resource\", WT);\n      }();\n    }, 0), setTimeout(function () {\n      return function () {\n        for (var t = lT.getInstance(), e = t.getEntriesByType(\"measure\"), n = 0, r = e; n < r.length; n++) {\n          var i = r[n];\n          HT(i);\n        }\n\n        t.setupObserver(\"measure\", HT);\n      }();\n    }, 0));\n  }\n\n  function HT(t) {\n    var e = t.name;\n    e.substring(0, oT.length) !== oT && jT.createUserTimingTrace(e);\n  }\n\n  var GT = function () {\n    function t(t) {\n      this.app = t, lT.getInstance().requiredApisAvailable() ? AT().then(QT, QT) : vT.info(\"Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.\");\n    }\n\n    return t.prototype.trace = function (t) {\n      return new jT(t);\n    }, Object.defineProperty(t.prototype, \"instrumentationEnabled\", {\n      get: function get() {\n        return yT.getInstance().instrumentationEnabled;\n      },\n      set: function set(t) {\n        yT.getInstance().instrumentationEnabled = t;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"dataCollectionEnabled\", {\n      get: function get() {\n        return yT.getInstance().dataCollectionEnabled;\n      },\n      set: function set(t) {\n        yT.getInstance().dataCollectionEnabled = t;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t;\n  }();\n\n  return Jh.INTERNAL.registerService(\"performance\", function (t) {\n    if (\"[DEFAULT]\" !== t.name) throw hT.create(\"FB not default\");\n    if (\"undefined\" == typeof window) throw hT.create(\"no window\");\n    var e;\n    return e = window, nT = e, yT.getInstance().firebaseAppInstance = t, new GT(t);\n  }, {}), console.warn(\"\\nIt looks like you're using the development build of the Firebase JS SDK.\\nWhen deploying Firebase apps to production, it is advisable to only import\\nthe individual SDK components you intend to use.\\n\\nFor the CDN builds, these are available in the following manner\\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\\n\\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\\n\"), Jh;\n});","map":null,"metadata":{},"sourceType":"script"}