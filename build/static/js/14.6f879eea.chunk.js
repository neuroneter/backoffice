(window.webpackJsonp=window.webpackJsonp||[]).push([[14],[function(e,t,n){e.exports=n(279)()},function(e,t,n){"use strict";e.exports=n(275)},function(e,t,n){"use strict";var r=n(1),i=n.n(r),o=n(0),a=n.n(o),s=n(3),u=n.n(s),c=n(134),l=n.n(c),h=n(129),f=n.n(h),p=n(21),d=n.n(p),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var g=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r._setTargetNode=function(e){r._targetNode=e},r._getTargetNode=function(){return r._targetNode},y(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),m(t,[{key:"getChildContext",value:function(){return{popperManager:{setTargetNode:this._setTargetNode,getTargetNode:this._getTargetNode}}}},{key:"render",value:function(){var e=this.props,t=e.tag,n=e.children,i=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["tag","children"]);return!1!==t?Object(r.createElement)(t,i,n):n}}]),t}();g.childContextTypes={popperManager:a.a.object.isRequired},g.propTypes={tag:a.a.oneOfType([a.a.string,a.a.bool]),children:a.a.oneOfType([a.a.node,a.a.func])},g.defaultProps={tag:"div"};var v=g,b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var w=function(e,t){var n=e.component,i=void 0===n?"div":n,o=e.innerRef,a=e.children,s=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["component","innerRef","children"]),u=t.popperManager,c=function(e){u.setTargetNode(e),"function"===typeof o&&o(e)};if("function"===typeof a)return a({targetProps:{ref:c},restProps:s});var l=b({},s);return"string"===typeof i?l.ref=c:l.innerRef=c,Object(r.createElement)(i,l,a)};w.contextTypes={popperManager:a.a.object.isRequired},w.propTypes={component:a.a.oneOfType([a.a.node,a.a.func]),innerRef:a.a.func,children:a.a.oneOfType([a.a.node,a.a.func])};var _=w,E=n(130),T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var k=E.a.placements,I=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=C(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={},r._setArrowNode=function(e){r._arrowNode=e},r._getTargetNode=function(){if(r.props.target)return r.props.target;if(!r.context.popperManager||!r.context.popperManager.getTargetNode())throw new Error("Target missing. Popper must be given a target from the Popper Manager, or as a prop.");return r.context.popperManager.getTargetNode()},r._getOffsets=function(e){return Object.keys(e.offsets).map(function(t){return e.offsets[t]})},r._isDataDirty=function(e){return!r.state.data||JSON.stringify(r._getOffsets(r.state.data))!==JSON.stringify(r._getOffsets(e))},r._updateStateModifier={enabled:!0,order:900,fn:function(e){return r._isDataDirty(e)&&r.setState({data:e}),e}},r._getPopperStyle=function(){var e=r.state.data;return r._popper&&e?T({position:e.offsets.popper.position},e.styles):{position:"absolute",pointerEvents:"none",opacity:0}},r._getPopperPlacement=function(){return r.state.data?r.state.data.placement:void 0},r._getPopperHide=function(){return r.state.data&&r.state.data.hide?"":void 0},r._getArrowStyle=function(){if(r.state.data&&r.state.data.offsets.arrow){var e=r.state.data.offsets.arrow;return{top:e.top,left:e.left}}return{}},r._handlePopperRef=function(e){r._popperNode=e,e?r._createPopper():r._destroyPopper(),r.props.innerRef&&r.props.innerRef(e)},r._scheduleUpdate=function(){r._popper&&r._popper.scheduleUpdate()},C(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),S(t,[{key:"getChildContext",value:function(){return{popper:{setArrowNode:this._setArrowNode,getArrowStyle:this._getArrowStyle}}}},{key:"componentDidUpdate",value:function(e){e.placement===this.props.placement&&e.eventsEnabled===this.props.eventsEnabled&&e.target===this.props.target||(this._destroyPopper(),this._createPopper()),e.children!==this.props.children&&this._scheduleUpdate()}},{key:"componentWillUnmount",value:function(){this._destroyPopper()}},{key:"_createPopper",value:function(){var e=this,t=this.props,n=t.placement,r=t.eventsEnabled,i=t.positionFixed,o=T({},this.props.modifiers,{applyStyle:{enabled:!1},updateState:this._updateStateModifier});this._arrowNode&&(o.arrow=T({},this.props.modifiers.arrow||{},{element:this._arrowNode})),this._popper=new E.a(this._getTargetNode(),this._popperNode,{placement:n,positionFixed:i,eventsEnabled:r,modifiers:o}),setTimeout(function(){return e._scheduleUpdate()})}},{key:"_destroyPopper",value:function(){this._popper&&this._popper.destroy()}},{key:"render",value:function(){var e=this.props,t=e.component,n=(e.innerRef,e.placement,e.eventsEnabled,e.positionFixed,e.modifiers,e.children),i=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["component","innerRef","placement","eventsEnabled","positionFixed","modifiers","children"]),o=this._getPopperStyle(),a=this._getPopperPlacement(),s=this._getPopperHide();if("function"===typeof n)return n({popperProps:{ref:this._handlePopperRef,style:o,"data-placement":a,"data-x-out-of-boundaries":s},restProps:i,scheduleUpdate:this._scheduleUpdate});var u=T({},i,{style:T({},i.style,o),"data-placement":a,"data-x-out-of-boundaries":s});return"string"===typeof t?u.ref=this._handlePopperRef:u.innerRef=this._handlePopperRef,Object(r.createElement)(t,u,n)}}]),t}();I.contextTypes={popperManager:a.a.object},I.childContextTypes={popper:a.a.object.isRequired},I.propTypes={component:a.a.oneOfType([a.a.node,a.a.func]),innerRef:a.a.func,placement:a.a.oneOf(k),eventsEnabled:a.a.bool,positionFixed:a.a.bool,modifiers:a.a.object,children:a.a.oneOfType([a.a.node,a.a.func]),target:a.a.oneOfType([a.a.instanceOf("undefined"!==typeof Element?Element:Object),a.a.shape({getBoundingClientRect:a.a.func.isRequired,clientWidth:a.a.number.isRequired,clientHeight:a.a.number.isRequired})])},I.defaultProps={component:"div",placement:"bottom",eventsEnabled:!0,positionFixed:!1,modifiers:{}};var x=I,N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var A=function(e,t){var n=e.component,i=void 0===n?"span":n,o=e.innerRef,a=e.children,s=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["component","innerRef","children"]),u=t.popper,c=function(e){u.setArrowNode(e),"function"===typeof o&&o(e)},l=u.getArrowStyle();if("function"===typeof a)return a({arrowProps:{ref:c,style:l},restProps:s});var h=N({},s,{style:N({},l,s.style)});return"string"===typeof i?h.ref=c:h.innerRef=c,Object(r.createElement)(i,h,a)};A.contextTypes={popper:a.a.object.isRequired},A.propTypes={component:a.a.oneOfType([a.a.node,a.a.func]),innerRef:a.a.func,children:a.a.oneOfType([a.a.node,a.a.func])};var O=A,D=n(131),R=n.n(D),P=n(132);n.d(t,"a",function(){return Tr}),n.d(t,"w",function(){return ge}),n.d(t,"ib",function(){return be}),n.d(t,"u",function(){return Ce}),n.d(t,"Y",function(){return xe}),n.d(t,"Z",function(){return Ae}),n.d(t,"ab",function(){return De}),n.d(t,"V",function(){return Pe}),n.d(t,"W",function(){return Le}),n.d(t,"X",function(){return Be}),n.d(t,"c",function(){return We}),n.d(t,"d",function(){return He}),n.d(t,"e",function(){return Qe}),n.d(t,"f",function(){return Ye}),n.d(t,"g",function(){return $e}),n.d(t,"h",function(){return Ze}),n.d(t,"y",function(){return je}),n.d(t,"z",function(){return nt}),n.d(t,"A",function(){return st}),n.d(t,"B",function(){return lt}),n.d(t,"C",function(){return yt}),n.d(t,"b",function(){return vt}),n.d(t,"i",function(){return wt}),n.d(t,"m",function(){return Et}),n.d(t,"k",function(){return kt}),n.d(t,"j",function(){return xt}),n.d(t,"l",function(){return Dt}),n.d(t,"n",function(){return Pt}),n.d(t,"p",function(){return qt}),n.d(t,"r",function(){return Bt}),n.d(t,"t",function(){return jt}),n.d(t,"s",function(){return Vt}),n.d(t,"q",function(){return Wt}),n.d(t,"o",function(){return $t}),n.d(t,"eb",function(){return un}),n.d(t,"fb",function(){return fn}),n.d(t,"gb",function(){return ln}),n.d(t,"hb",function(){return dn}),n.d(t,"R",function(){return En}),n.d(t,"U",function(){return Sn}),n.d(t,"S",function(){return kn}),n.d(t,"T",function(){return xn}),n.d(t,"mb",function(){return Dn}),n.d(t,"lb",function(){return Pn}),n.d(t,"N",function(){return Ln}),n.d(t,"D",function(){return Un}),n.d(t,"E",function(){return Bn}),n.d(t,"F",function(){return Wn}),n.d(t,"G",function(){return Hn}),n.d(t,"H",function(){return Qn}),n.d(t,"I",function(){return Yn}),n.d(t,"J",function(){return Zn}),n.d(t,"K",function(){return $n}),n.d(t,"M",function(){return or}),n.d(t,"x",function(){return Zt}),n.d(t,"bb",function(){return sr}),n.d(t,"cb",function(){return cr}),n.d(t,"db",function(){return hr}),n.d(t,"jb",function(){return dr}),n.d(t,"kb",function(){return gr}),n.d(t,"L",function(){return br}),n.d(t,"v",function(){return xr}),n.d(t,"O",function(){return Or}),n.d(t,"Q",function(){return Mr}),n.d(t,"P",function(){return Rr}),n.d(t,"nb",function(){return jr}),n.d(t,"ob",function(){return qr});var M="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},F=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),U=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},B=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},V=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t};function W(){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}function z(e){document.body.style.paddingRight=e>0?e+"px":null}function H(){return document.body.clientWidth<window.innerWidth}function K(){var e=window.getComputedStyle(document.body,null);return parseInt(e&&e.getPropertyValue("padding-right")||0,10)}function Q(){var e=W(),t=document.querySelectorAll(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top")[0],n=t?parseInt(t.style.paddingRight||0,10):0;H()&&z(n+e)}var G=void 0;function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G;return t?e.split(" ").map(function(e){return t[e]||e}).join(" "):e}function X(e,t){var n={};return Object.keys(e).forEach(function(r){-1===t.indexOf(r)&&(n[r]=e[r])}),n}function $(e,t){for(var n=Array.isArray(t)?t:[t],r=n.length,i=void 0,o={};r>0;)o[i=n[r-=1]]=e[i];return o}var J={};function Z(e){J[e]||("undefined"!==typeof console&&console.error(e),J[e]=!0)}function ee(e,t){return function(n,r,i){null!==n[r]&&"undefined"!==typeof n[r]&&Z('"'+r+'" property of "'+i+'" has been deprecated.\n'+t);for(var o=arguments.length,a=Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return e.apply(void 0,[n,r,i].concat(a))}}function te(e,t,n){if(!(e[t]instanceof Element))return new Error("Invalid prop `"+t+"` supplied to `"+n+"`. Expected prop to be an instance of Element. Validation failed.")}var ne=a.a.oneOfType([a.a.string,a.a.func,te,a.a.shape({current:a.a.any})]),re={Fade:150,Collapse:350,Modal:300,Carousel:600},ie=["in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],oe={ENTERING:"entering",ENTERED:"entered",EXITING:"exiting",EXITED:"exited"},ae={esc:27,space:32,enter:13,tab:9,up:38,down:40},se=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],ue=!("undefined"===typeof window||!window.document||!window.document.createElement);function ce(e){return!(!e||"object"!==("undefined"===typeof e?"undefined":M(e)))&&"current"in e}function le(e){if(ce(e))return e.current;if(l()(e))return e();if("string"===typeof e&&ue){var t=document.querySelectorAll(e);if(t.length||(t=document.querySelectorAll("#"+e)),!t.length)throw new Error("The target '"+e+"' could not be identified in the dom, tip: check spelling");return t}return e}function he(e){return null!==e&&(Array.isArray(e)||ue&&"number"===typeof e.length)}function fe(e){var t=le(e);return he(t)?t[0]:t}var pe=["touchstart","click"];function de(e,t,n){var r=e;he(r)||(r=[r]);var i=n;if("string"===typeof i&&(i=i.split(/\s+/)),!he(r)||"function"!==typeof t||!Array.isArray(i))throw new Error("\n      The first argument of this function must be DOM node or an array on DOM nodes or NodeList.\n      The second must be a function.\n      The third is a string or an array of strings that represents DOM events\n    ");return i.forEach(function(e){r.forEach(function(n){n.addEventListener(e,t)})}),function(){i.forEach(function(e){r.forEach(function(n){n.removeEventListener(e,t)})})}}var me=["a[href]","area[href]","input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","object","embed","[tabindex]:not(.modal)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],ye=(Object.freeze({getScrollbarWidth:W,setScrollbarWidth:z,isBodyOverflowing:H,getOriginalBodyPadding:K,conditionallyUpdateScrollbar:Q,setGlobalCssModule:function(e){G=e},mapToCssModules:Y,omit:X,pick:$,warnOnce:Z,deprecated:ee,DOMElement:te,targetPropType:ne,TransitionTimeouts:re,TransitionPropTypeKeys:ie,TransitionStatuses:oe,keyCodes:ae,PopperPlacements:se,canUseDOM:ue,isReactRefObj:ce,findDOMElements:le,isArrayOrNodeList:he,getTarget:fe,defaultToggleEvents:pe,addMultipleEventListeners:de,focusableElements:me}),{tag:a.a.oneOfType([a.a.func,a.a.string]),fluid:a.a.bool,className:a.a.string,cssModule:a.a.object}),ge=function(e){var t=e.className,n=e.cssModule,r=e.fluid,o=e.tag,a=B(e,["className","cssModule","fluid","tag"]),s=Y(u()(t,r?"container-fluid":"container"),n);return i.a.createElement(o,j({},a,{className:s}))};ge.propTypes=ye,ge.defaultProps={tag:"div"};var ve={tag:a.a.oneOfType([a.a.func,a.a.string]),noGutters:a.a.bool,className:a.a.string,cssModule:a.a.object,form:a.a.bool},be=function(e){var t=e.className,n=e.cssModule,r=e.noGutters,o=e.tag,a=e.form,s=B(e,["className","cssModule","noGutters","tag","form"]),c=Y(u()(t,r?"no-gutters":null,a?"form-row":"row"),n);return i.a.createElement(o,j({},s,{className:c}))};be.propTypes=ve,be.defaultProps={tag:"div"};var we=a.a.oneOfType([a.a.number,a.a.string]),_e=a.a.oneOfType([a.a.bool,a.a.number,a.a.string,a.a.shape({size:a.a.oneOfType([a.a.bool,a.a.number,a.a.string]),push:ee(we,'Please use the prop "order"'),pull:ee(we,'Please use the prop "order"'),order:we,offset:we})]),Ee={tag:a.a.oneOfType([a.a.func,a.a.string]),xs:_e,sm:_e,md:_e,lg:_e,xl:_e,className:a.a.string,cssModule:a.a.object,widths:a.a.array},Te={tag:"div",widths:["xs","sm","md","lg","xl"]},Se=function(e,t,n){return!0===n||""===n?e?"col":"col-"+t:"auto"===n?e?"col-auto":"col-"+t+"-auto":e?"col-"+n:"col-"+t+"-"+n},Ce=function(e){var t=e.className,n=e.cssModule,r=e.widths,o=e.tag,a=B(e,["className","cssModule","widths","tag"]),s=[];r.forEach(function(t,r){var i=e[t];if(delete a[t],i||""===i){var o=!r;if(f()(i)){var c,l=o?"-":"-"+t+"-",h=Se(o,t,i.size);s.push(Y(u()((U(c={},h,i.size||""===i.size),U(c,"order"+l+i.order,i.order||0===i.order),U(c,"offset"+l+i.offset,i.offset||0===i.offset),c)),n))}else{var p=Se(o,t,i);s.push(p)}}}),s.length||s.push("col");var c=Y(u()(t,s),n);return i.a.createElement(o,j({},a,{className:c}))};Ce.propTypes=Ee,Ce.defaultProps=Te;var ke={light:a.a.bool,dark:a.a.bool,inverse:ee(a.a.bool,'Please use the prop "dark"'),full:a.a.bool,fixed:a.a.string,sticky:a.a.string,color:a.a.string,role:a.a.string,tag:a.a.oneOfType([a.a.func,a.a.string]),className:a.a.string,cssModule:a.a.object,toggleable:ee(a.a.oneOfType([a.a.bool,a.a.string]),'Please use the prop "expand"'),expand:a.a.oneOfType([a.a.bool,a.a.string])},Ie={xs:"sm",sm:"md",md:"lg",lg:"xl"},xe=function(e){var t,n=e.toggleable,r=e.expand,o=e.className,a=e.cssModule,s=e.light,c=e.dark,l=e.inverse,h=e.fixed,f=e.sticky,p=e.color,d=e.tag,m=B(e,["toggleable","expand","className","cssModule","light","dark","inverse","fixed","sticky","color","tag"]),y=Y(u()(o,"navbar",function(e){return!1!==e&&(!0===e||"xs"===e?"navbar-expand":"navbar-expand-"+e)}(r)||function(e){return void 0!==e&&"xl"!==e&&(!1===e?"navbar-expand":"navbar-expand-"+(!0===e?"sm":Ie[e]||e))}(n),(U(t={"navbar-light":s,"navbar-dark":l||c},"bg-"+p,p),U(t,"fixed-"+h,h),U(t,"sticky-"+f,f),t)),a);return i.a.createElement(d,j({},m,{className:y}))};xe.propTypes=ke,xe.defaultProps={tag:"nav",expand:!1};var Ne={tag:a.a.oneOfType([a.a.func,a.a.string]),className:a.a.string,cssModule:a.a.object},Ae=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=B(e,["className","cssModule","tag"]),a=Y(u()(t,"navbar-brand"),n);return i.a.createElement(r,j({},o,{className:a}))};Ae.propTypes=Ne,Ae.defaultProps={tag:"a"};var Oe={tag:a.a.oneOfType([a.a.func,a.a.string]),type:a.a.string,className:a.a.string,cssModule:a.a.object,children:a.a.node},De=function(e){var t=e.className,n=e.cssModule,r=e.children,o=e.tag,a=B(e,["className","cssModule","children","tag"]),s=Y(u()(t,"navbar-toggler"),n);return i.a.createElement(o,j({},a,{className:s}),r||i.a.createElement("span",{className:Y("navbar-toggler-icon",n)}))};De.propTypes=Oe,De.defaultProps={tag:"button",type:"button"};var Re={tabs:a.a.bool,pills:a.a.bool,vertical:a.a.oneOfType([a.a.bool,a.a.string]),horizontal:a.a.string,justified:a.a.bool,fill:a.a.bool,navbar:a.a.bool,card:a.a.bool,tag:a.a.oneOfType([a.a.func,a.a.string]),className:a.a.string,cssModule:a.a.object},Pe=function(e){var t=e.className,n=e.cssModule,r=e.tabs,o=e.pills,a=e.vertical,s=e.horizontal,c=e.justified,l=e.fill,h=e.navbar,f=e.card,p=e.tag,d=B(e,["className","cssModule","tabs","pills","vertical","horizontal","justified","fill","navbar","card","tag"]),m=Y(u()(t,h?"navbar-nav":"nav",!!s&&"justify-content-"+s,function(e){return!1!==e&&(!0===e||"xs"===e?"flex-column":"flex-"+e+"-column")}(a),{"nav-tabs":r,"card-header-tabs":f&&r,"nav-pills":o,"card-header-pills":f&&o,"nav-justified":c,"nav-fill":l}),n);return i.a.createElement(p,j({},d,{className:m}))};Pe.propTypes=Re,Pe.defaultProps={tag:"ul",vertical:!1};var Me={tag:a.a.oneOfType([a.a.func,a.a.string]),active:a.a.bool,className:a.a.string,cssModule:a.a.object},Le=function(e){var t=e.className,n=e.cssModule,r=e.active,o=e.tag,a=B(e,["className","cssModule","active","tag"]),s=Y(u()(t,"nav-item",!!r&&"active"),n);return i.a.createElement(o,j({},a,{className:s}))};Le.propTypes=Me,Le.defaultProps={tag:"li"};var Fe={disabled:a.a.bool,dropup:ee(a.a.bool,'Please use the prop "direction" with the value "up".'),direction:a.a.oneOf(["up","down","left","right"]),group:a.a.bool,isOpen:a.a.bool,nav:a.a.bool,active:a.a.bool,addonType:a.a.oneOfType([a.a.bool,a.a.oneOf(["prepend","append"])]),size:a.a.string,tag:a.a.string,toggle:a.a.func,children:a.a.node,className:a.a.string,cssModule:a.a.object,inNavbar:a.a.bool,setActiveFromChild:a.a.bool},Ue={toggle:a.a.func.isRequired,isOpen:a.a.bool.isRequired,direction:a.a.oneOf(["up","down","left","right"]).isRequired,inNavbar:a.a.bool.isRequired},je=function(e){function t(e){L(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.addEvents=n.addEvents.bind(n),n.handleDocumentClick=n.handleDocumentClick.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n.removeEvents=n.removeEvents.bind(n),n.toggle=n.toggle.bind(n),n}return q(t,e),F(t,[{key:"getChildContext",value:function(){return{toggle:this.props.toggle,isOpen:this.props.isOpen,direction:"down"===this.props.direction&&this.props.dropup?"up":this.props.direction,inNavbar:this.props.inNavbar}}},{key:"componentDidMount",value:function(){this.handleProps()}},{key:"componentDidUpdate",value:function(e){this.props.isOpen!==e.isOpen&&this.handleProps()}},{key:"componentWillUnmount",value:function(){this.removeEvents()}},{key:"getContainer",value:function(){return d.a.findDOMNode(this)}},{key:"addEvents",value:function(){var e=this;["click","touchstart","keyup"].forEach(function(t){return document.addEventListener(t,e.handleDocumentClick,!0)})}},{key:"removeEvents",value:function(){var e=this;["click","touchstart","keyup"].forEach(function(t){return document.removeEventListener(t,e.handleDocumentClick,!0)})}},{key:"handleDocumentClick",value:function(e){if(!e||3!==e.which&&("keyup"!==e.type||e.which===ae.tab)){var t=this.getContainer();(!t.contains(e.target)||t===e.target||"keyup"===e.type&&e.which!==ae.tab)&&this.toggle(e)}}},{key:"handleKeyDown",value:function(e){if(!(ae.tab===e.which||/button/i.test(e.target.tagName)&&e.which===ae.space||/input|textarea/i.test(e.target.tagName))&&(e.preventDefault(),!this.props.disabled)){var t=this.getContainer();if(e.which===ae.space&&ae.enter&&this.props.isOpen&&t!==e.target&&e.target.click(),e.which===ae.esc||!this.props.isOpen)return this.toggle(e),void t.querySelector("[aria-expanded]").focus();var n=Y("dropdown-menu",this.props.cssModule),r=Y("dropdown-item",this.props.cssModule),i=Y("disabled",this.props.cssModule),o=t.querySelectorAll("."+n+" ."+r+":not(."+i+")");if(o.length){for(var a=-1,s=String.fromCharCode(e.which).toLowerCase(),u=0;u<o.length;u+=1){if((o[u].textContent&&o[u].textContent[0].toLowerCase())===s||o[u]===e.target){a=u;break}}e.which===ae.up&&a>0&&(a-=1),e.which===ae.down&&a<o.length-1&&(a+=1),a<0&&(a=0),o[a].focus()}}}},{key:"handleProps",value:function(){this.props.isOpen?this.addEvents():this.removeEvents()}},{key:"toggle",value:function(e){return this.props.disabled?e&&e.preventDefault():this.props.toggle(e)}},{key:"render",value:function(){var e,t=X(this.props,["toggle","disabled","inNavbar","direction"]),n=t.className,r=t.cssModule,o=t.dropup,a=t.isOpen,s=t.group,c=t.size,l=t.nav,h=t.setActiveFromChild,f=t.active,p=t.addonType,d=B(t,["className","cssModule","dropup","isOpen","group","size","nav","setActiveFromChild","active","addonType"]),m="down"===this.props.direction&&o?"up":this.props.direction;d.tag=d.tag||(l?"li":"div");var y=!1;h&&i.a.Children.map(this.props.children[1].props.children,function(e){e.props.active&&(y=!0)});var g=Y(u()(n,"down"!==m&&"drop"+m,!(!l||!f)&&"active",!(!h||!y)&&"active",(U(e={},"input-group-"+p,p),U(e,"btn-group",s),U(e,"btn-group-"+c,!!c),U(e,"dropdown",!s&&!p),U(e,"show",a),U(e,"nav-item",l),e)),r);return i.a.createElement(v,j({},d,{className:g,onKeyDown:this.handleKeyDown}))}}]),t}(i.a.Component);je.propTypes=Fe,je.defaultProps={isOpen:!1,direction:"down",nav:!1,active:!1,addonType:!1,inNavbar:!1,setActiveFromChild:!1},je.childContextTypes=Ue;var qe={tag:a.a.oneOfType([a.a.func,a.a.string]),innerRef:a.a.oneOfType([a.a.object,a.a.func,a.a.string]),disabled:a.a.bool,active:a.a.bool,className:a.a.string,cssModule:a.a.object,onClick:a.a.func,href:a.a.any},Be=function(e){function t(e){L(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return q(t,e),F(t,[{key:"onClick",value:function(e){this.props.disabled?e.preventDefault():("#"===this.props.href&&e.preventDefault(),this.props.onClick&&this.props.onClick(e))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.cssModule,r=e.active,o=e.tag,a=e.innerRef,s=B(e,["className","cssModule","active","tag","innerRef"]),c=Y(u()(t,"nav-link",{disabled:s.disabled,active:r}),n);return i.a.createElement(o,j({},s,{ref:a,onClick:this.onClick,className:c}))}}]),t}(i.a.Component);Be.propTypes=qe,Be.defaultProps={tag:"a"};var Ve={tag:a.a.oneOfType([a.a.func,a.a.string]),listTag:a.a.oneOfType([a.a.func,a.a.string]),className:a.a.string,listClassName:a.a.string,cssModule:a.a.object,children:a.a.node,"aria-label":a.a.string},We=function(e){var t=e.className,n=e.listClassName,r=e.cssModule,o=e.children,a=e.tag,s=e.listTag,c=e["aria-label"],l=B(e,["className","listClassName","cssModule","children","tag","listTag","aria-label"]),h=Y(u()(t),r),f=Y(u()("breadcrumb",n),r);return i.a.createElement(a,j({},l,{className:h,"aria-label":c}),i.a.createElement(s,{className:f},o))};We.propTypes=Ve,We.defaultProps={tag:"nav",listTag:"ol","aria-label":"breadcrumb"};var ze={tag:a.a.oneOfType([a.a.func,a.a.string]),active:a.a.bool,className:a.a.string,cssModule:a.a.object},He=function(e){var t=e.className,n=e.cssModule,r=e.active,o=e.tag,a=B(e,["className","cssModule","active","tag"]),s=Y(u()(t,!!r&&"active","breadcrumb-item"),n);return i.a.createElement(o,j({},a,{className:s,"aria-current":r?"page":void 0}))};He.propTypes=ze,He.defaultProps={tag:"li"};var Ke={active:a.a.bool,"aria-label":a.a.string,block:a.a.bool,color:a.a.string,disabled:a.a.bool,outline:a.a.bool,tag:a.a.oneOfType([a.a.func,a.a.string]),innerRef:a.a.oneOfType([a.a.object,a.a.func,a.a.string]),onClick:a.a.func,size:a.a.string,children:a.a.node,className:a.a.string,cssModule:a.a.object,close:a.a.bool},Qe=function(e){function t(e){L(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return q(t,e),F(t,[{key:"onClick",value:function(e){this.props.disabled?e.preventDefault():this.props.onClick&&this.props.onClick(e)}},{key:"render",value:function(){var e=this.props,t=e.active,n=e["aria-label"],r=e.block,o=e.className,a=e.close,s=e.cssModule,c=e.color,l=e.outline,h=e.size,f=e.tag,p=e.innerRef,d=B(e,["active","aria-label","block","className","close","cssModule","color","outline","size","tag","innerRef"]);a&&"undefined"===typeof d.children&&(d.children=i.a.createElement("span",{"aria-hidden":!0},"\xd7"));var m="btn"+(l?"-outline":"")+"-"+c,y=Y(u()(o,{close:a},a||"btn",a||m,!!h&&"btn-"+h,!!r&&"btn-block",{active:t,disabled:this.props.disabled}),s);d.href&&"button"===f&&(f="a");var g=a?"Close":null;return i.a.createElement(f,j({type:"button"===f&&d.onClick?"button":void 0},d,{className:y,ref:p,onClick:this.onClick,"aria-label":n||g}))}}]),t}(i.a.Component);Qe.propTypes=Ke,Qe.defaultProps={color:"secondary",tag:"button"};var Ge={children:a.a.node},Ye=function(e){return i.a.createElement(je,j({group:!0},e))};Ye.propTypes=Ge;var Xe={tag:a.a.oneOfType([a.a.func,a.a.string]),"aria-label":a.a.string,className:a.a.string,cssModule:a.a.object,role:a.a.string,size:a.a.string,vertical:a.a.bool},$e=function(e){var t=e.className,n=e.cssModule,r=e.size,o=e.vertical,a=e.tag,s=B(e,["className","cssModule","size","vertical","tag"]),c=Y(u()(t,!!r&&"btn-group-"+r,o?"btn-group-vertical":"btn-group"),n);return i.a.createElement(a,j({},s,{className:c}))};$e.propTypes=Xe,$e.defaultProps={tag:"div",role:"group"};var Je={tag:a.a.oneOfType([a.a.func,a.a.string]),"aria-label":a.a.string,className:a.a.string,cssModule:a.a.object,role:a.a.string},Ze=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=B(e,["className","cssModule","tag"]),a=Y(u()(t,"btn-toolbar"),n);return i.a.createElement(r,j({},o,{className:a}))};Ze.propTypes=Je,Ze.defaultProps={tag:"div",role:"toolbar"};var et={children:a.a.node,active:a.a.bool,disabled:a.a.bool,divider:a.a.bool,tag:a.a.oneOfType([a.a.func,a.a.string]),header:a.a.bool,onClick:a.a.func,className:a.a.string,cssModule:a.a.object,toggle:a.a.bool},tt={toggle:a.a.func},nt=function(e){function t(e){L(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.getTabIndex=n.getTabIndex.bind(n),n}return q(t,e),F(t,[{key:"onClick",value:function(e){this.props.disabled||this.props.header||this.props.divider?e.preventDefault():(this.props.onClick&&this.props.onClick(e),this.props.toggle&&this.context.toggle(e))}},{key:"getTabIndex",value:function(){return this.props.disabled||this.props.header||this.props.divider?"-1":"0"}},{key:"render",value:function(){var e=this.getTabIndex(),t=X(this.props,["toggle"]),n=t.className,r=t.cssModule,o=t.divider,a=t.tag,s=t.header,c=t.active,l=B(t,["className","cssModule","divider","tag","header","active"]),h=Y(u()(n,{disabled:l.disabled,"dropdown-item":!o&&!s,active:c,"dropdown-header":s,"dropdown-divider":o}),r);return"button"===a&&(s?a="h6":o?a="div":l.href&&(a="a")),i.a.createElement(a,j({type:"button"===a&&(l.onClick||this.props.toggle)?"button":void 0},l,{tabIndex:e,className:h,onClick:this.onClick}))}}]),t}(i.a.Component);nt.propTypes=et,nt.defaultProps={tag:"button",toggle:!0},nt.contextTypes=tt;var rt={tag:a.a.string,children:a.a.node.isRequired,right:a.a.bool,flip:a.a.bool,modifiers:a.a.object,className:a.a.string,cssModule:a.a.object,persist:a.a.bool},it={isOpen:a.a.bool.isRequired,direction:a.a.oneOf(["up","down","left","right"]).isRequired,inNavbar:a.a.bool.isRequired},ot={flip:{enabled:!1}},at={up:"top",left:"left",right:"right",down:"bottom"},st=function(e,t){var n=e.className,r=e.cssModule,o=e.right,a=e.tag,s=e.flip,c=e.modifiers,l=e.persist,h=B(e,["className","cssModule","right","tag","flip","modifiers","persist"]),f=Y(u()(n,"dropdown-menu",{"dropdown-menu-right":o,show:t.isOpen}),r),p=a;if(l||t.isOpen&&!t.inNavbar){p=x;var d=at[t.direction]||"bottom",m=o?"end":"start";h.placement=d+"-"+m,h.component=a,h.modifiers=s?c:j({},c,ot)}return i.a.createElement(p,j({tabIndex:"-1",role:"menu"},h,{"aria-hidden":!t.isOpen,className:f,"x-placement":h.placement}))};st.propTypes=rt,st.defaultProps={tag:"div",flip:!0},st.contextTypes=it;var ut={caret:a.a.bool,color:a.a.string,children:a.a.node,className:a.a.string,cssModule:a.a.object,disabled:a.a.bool,onClick:a.a.func,"aria-haspopup":a.a.bool,split:a.a.bool,tag:a.a.oneOfType([a.a.func,a.a.string]),nav:a.a.bool},ct={isOpen:a.a.bool.isRequired,toggle:a.a.func.isRequired,inNavbar:a.a.bool.isRequired},lt=function(e){function t(e){L(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return q(t,e),F(t,[{key:"onClick",value:function(e){this.props.disabled?e.preventDefault():(this.props.nav&&!this.props.tag&&e.preventDefault(),this.props.onClick&&this.props.onClick(e),this.context.toggle(e))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.color,r=e.cssModule,o=e.caret,a=e.split,s=e.nav,c=e.tag,l=B(e,["className","color","cssModule","caret","split","nav","tag"]),h=l["aria-label"]||"Toggle Dropdown",f=Y(u()(t,{"dropdown-toggle":o||a,"dropdown-toggle-split":a,"nav-link":s}),r),p=l.children||i.a.createElement("span",{className:"sr-only"},h),d=void 0;return s&&!c?(d="a",l.href="#"):c?d=c:(d=Qe,l.color=n,l.cssModule=r),this.context.inNavbar?i.a.createElement(d,j({},l,{className:f,onClick:this.onClick,"aria-expanded":this.context.isOpen,children:p})):i.a.createElement(_,j({},l,{className:f,component:d,onClick:this.onClick,"aria-expanded":this.context.isOpen,children:p}))}}]),t}(i.a.Component);function ht(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ft(e,t){return e(t={exports:{}},t.exports),t.exports}lt.propTypes=ut,lt.defaultProps={"aria-haspopup":!0,color:"secondary"},lt.contextTypes=ct,ht(ft(function(e,t){t.__esModule=!0,t.classNamesShape=t.timeoutsShape=void 0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!==typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}};var n,r=(n=a.a)&&n.__esModule?n:{default:n};t.timeoutsShape=r.default.oneOfType([r.default.number,r.default.shape({enter:r.default.number,exit:r.default.number}).isRequired]),t.classNamesShape=r.default.oneOfType([r.default.string,r.default.shape({enter:r.default.string,exit:r.default.string,active:r.default.string}),r.default.shape({enter:r.default.string,enterDone:r.default.string,enterActive:r.default.string,exit:r.default.string,exitDone:r.default.string,exitActive:r.default.string})])}));var pt=ht(ft(function(e,t){t.__esModule=!0,t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a.a),r=s(i.a),o=s(d.a);function s(e){return e&&e.__esModule?e:{default:e}}var u=t.UNMOUNTED="unmounted",c=t.EXITED="exited",l=t.ENTERING="entering",h=t.ENTERED="entered",f=t.EXITING="exiting",p=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":M(t))&&"function"!==typeof t?e:t}(this,e.call(this,n,r)),o=r.transitionGroup,a=o&&!o.isMounting?n.enter:n.appear,s=void 0;return i.nextStatus=null,n.in?a?(s=c,i.nextStatus=l):s=h:s=n.unmountOnExit||n.mountOnEnter?u:c,i.state={status:s},i.nextCallback=null,i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":M(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{transitionGroup:null}},t.prototype.componentDidMount=function(){this.updateStatus(!0)},t.prototype.componentWillReceiveProps=function(e){var t=(this.pendingState||this.state).status;e.in?(t===u&&this.setState({status:c}),t!==l&&t!==h&&(this.nextStatus=l)):t!==l&&t!==h||(this.nextStatus=f)},t.prototype.componentDidUpdate=function(){this.updateStatus()},t.prototype.componentWillUnmount=function(){this.cancelNextCallback()},t.prototype.getTimeouts=function(){var e=this.props.timeout,t=void 0,n=void 0,r=void 0;return t=n=r=e,null!=e&&"number"!==typeof e&&(t=e.exit,n=e.enter,r=e.appear),{exit:t,enter:n,appear:r}},t.prototype.updateStatus=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.nextStatus;if(null!==t){this.nextStatus=null,this.cancelNextCallback();var n=o.default.findDOMNode(this);t===l?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===c&&this.setState({status:u})},t.prototype.performEnter=function(e,t){var n=this,r=this.props.enter,i=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,o=this.getTimeouts();t||r?(this.props.onEnter(e,i),this.safeSetState({status:l},function(){n.props.onEntering(e,i),n.onTransitionEnd(e,o.enter,function(){n.safeSetState({status:h},function(){n.props.onEntered(e,i)})})})):this.safeSetState({status:h},function(){n.props.onEntered(e)})},t.prototype.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n?(this.props.onExit(e),this.safeSetState({status:f},function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,function(){t.safeSetState({status:c},function(){t.props.onExited(e)})})})):this.safeSetState({status:c},function(){t.props.onExited(e)})},t.prototype.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},t.prototype.safeSetState=function(e,t){var n=this;this.pendingState=e,t=this.setNextCallback(t),this.setState(e,function(){n.pendingState=null,t()})},t.prototype.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},t.prototype.onTransitionEnd=function(e,t,n){this.setNextCallback(n),e?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},t.prototype.render=function(){var e=this.state.status;if(e===u)return null;var t=this.props,n=t.children,i=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["children"]);if(delete i.in,delete i.mountOnEnter,delete i.unmountOnExit,delete i.appear,delete i.enter,delete i.exit,delete i.timeout,delete i.addEndListener,delete i.onEnter,delete i.onEntering,delete i.onEntered,delete i.onExit,delete i.onExiting,delete i.onExited,"function"===typeof n)return n(e,i);var o=r.default.Children.only(n);return r.default.cloneElement(o,i)},t}(r.default.Component);function m(){}p.contextTypes={transitionGroup:n.object},p.childContextTypes={transitionGroup:function(){}},p.propTypes={},p.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:m,onEntering:m,onEntered:m,onExit:m,onExiting:m,onExited:m},p.UNMOUNTED=0,p.EXITED=1,p.ENTERING=2,p.ENTERED=3,p.EXITING=4,t.default=p})),dt=j({},pt.propTypes,{children:a.a.oneOfType([a.a.arrayOf(a.a.node),a.a.node]),tag:a.a.oneOfType([a.a.string,a.a.func]),baseClass:a.a.string,baseClassActive:a.a.string,className:a.a.string,cssModule:a.a.object,innerRef:a.a.oneOfType([a.a.object,a.a.string,a.a.func])}),mt=j({},pt.defaultProps,{tag:"div",baseClass:"fade",baseClassActive:"show",timeout:re.Fade,appear:!0,enter:!0,exit:!0,in:!0});function yt(e){var t=e.tag,n=e.baseClass,r=e.baseClassActive,o=e.className,a=e.cssModule,s=e.children,c=e.innerRef,l=B(e,["tag","baseClass","baseClassActive","className","cssModule","children","innerRef"]),h=$(l,ie),f=X(l,ie);return i.a.createElement(pt,h,function(e){var l="entered"===e,h=Y(u()(o,n,l&&r),a);return i.a.createElement(t,j({className:h},f,{ref:c}),s)})}yt.propTypes=dt,yt.defaultProps=mt;var gt={color:a.a.string,pill:a.a.bool,tag:a.a.oneOfType([a.a.func,a.a.string]),children:a.a.node,className:a.a.string,cssModule:a.a.object},vt=function(e){var t=e.className,n=e.cssModule,r=e.color,o=e.pill,a=e.tag,s=B(e,["className","cssModule","color","pill","tag"]),c=Y(u()(t,"badge","badge-"+r,!!o&&"badge-pill"),n);return s.href&&"span"===a&&(a="a"),i.a.createElement(a,j({},s,{className:c}))};vt.propTypes=gt,vt.defaultProps={color:"secondary",pill:!1,tag:"span"};var bt={tag:a.a.oneOfType([a.a.func,a.a.string]),inverse:a.a.bool,color:a.a.string,block:ee(a.a.bool,'Please use the props "body"'),body:a.a.bool,outline:a.a.bool,className:a.a.string,cssModule:a.a.object,innerRef:a.a.oneOfType([a.a.object,a.a.string,a.a.func])},wt=function(e){var t=e.className,n=e.cssModule,r=e.color,o=e.block,a=e.body,s=e.inverse,c=e.outline,l=e.tag,h=e.innerRef,f=B(e,["className","cssModule","color","block","body","inverse","outline","tag","innerRef"]),p=Y(u()(t,"card",!!s&&"text-white",!(!o&&!a)&&"card-body",!!r&&(c?"border":"bg")+"-"+r),n);return i.a.createElement(l,j({},f,{className:p,ref:h}))};wt.propTypes=bt,wt.defaultProps={tag:"div"};var _t={tag:a.a.oneOfType([a.a.func,a.a.string]),className:a.a.string,cssModule:a.a.object},Et=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=B(e,["className","cssModule","tag"]),a=Y(u()(t,"card-group"),n);return i.a.createElement(r,j({},o,{className:a}))};Et.propTypes=_t,Et.defaultProps={tag:"div"};var Tt={tag:a.a.oneOfType([a.a.func,a.a.string]),className:a.a.string,cssModule:a.a.object},St=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=B(e,["className","cssModule","tag"]),a=Y(u()(t,"card-deck"),n);return i.a.createElement(r,j({},o,{className:a}))};St.propTypes=Tt,St.defaultProps={tag:"div"};var Ct={tag:a.a.oneOfType([a.a.func,a.a.string]),className:a.a.string,cssModule:a.a.object},kt=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=B(e,["className","cssModule","tag"]),a=Y(u()(t,"card-columns"),n);return i.a.createElement(r,j({},o,{className:a}))};kt.propTypes=Ct,kt.defaultProps={tag:"div"};var It={tag:a.a.oneOfType([a.a.func,a.a.string]),className:a.a.string,cssModule:a.a.object},xt=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=B(e,["className","cssModule","tag"]),a=Y(u()(t,"card-body"),n);return i.a.createElement(r,j({},o,{className:a}))};xt.propTypes=It,xt.defaultProps={tag:"div"};var Nt={tag:a.a.oneOfType([a.a.func,a.a.string]),innerRef:a.a.oneOfType([a.a.object,a.a.func,a.a.string]),className:a.a.string,cssModule:a.a.object},At=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=e.innerRef,a=B(e,["className","cssModule","tag","innerRef"]),s=Y(u()(t,"card-link"),n);return i.a.createElement(r,j({},a,{ref:o,className:s}))};At.propTypes=Nt,At.defaultProps={tag:"a"};var Ot={tag:a.a.oneOfType([a.a.func,a.a.string]),className:a.a.string,cssModule:a.a.object},Dt=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=B(e,["className","cssModule","tag"]),a=Y(u()(t,"card-footer"),n);return i.a.createElement(r,j({},o,{className:a}))};Dt.propTypes=Ot,Dt.defaultProps={tag:"div"};var Rt={tag:a.a.oneOfType([a.a.func,a.a.string]),className:a.a.string,cssModule:a.a.object},Pt=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=B(e,["className","cssModule","tag"]),a=Y(u()(t,"card-header"),n);return i.a.createElement(r,j({},o,{className:a}))};Pt.propTypes=Rt,Pt.defaultProps={tag:"div"};var Mt={tag:a.a.oneOfType([a.a.func,a.a.string]),top:a.a.bool,bottom:a.a.bool,className:a.a.string,cssModule:a.a.object},Lt=function(e){var t=e.className,n=e.cssModule,r=e.top,o=e.bottom,a=e.tag,s=B(e,["className","cssModule","top","bottom","tag"]),c="card-img";r&&(c="card-img-top"),o&&(c="card-img-bottom");var l=Y(u()(t,c),n);return i.a.createElement(a,j({},s,{className:l}))};Lt.propTypes=Mt,Lt.defaultProps={tag:"img"};var Ft={tag:a.a.oneOfType([a.a.func,a.a.string]),className:a.a.string,cssModule:a.a.object},Ut=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=B(e,["className","cssModule","tag"]),a=Y(u()(t,"card-img-overlay"),n);return i.a.createElement(r,j({},o,{className:a}))};Ut.propTypes=Ft,Ut.defaultProps={tag:"div"};var jt=function(e){function t(e){L(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={startAnimation:!1},n.onEnter=n.onEnter.bind(n),n.onEntering=n.onEntering.bind(n),n.onExit=n.onExit.bind(n),n.onExiting=n.onExiting.bind(n),n.onExited=n.onExited.bind(n),n}return q(t,e),F(t,[{key:"onEnter",value:function(e,t){this.setState({startAnimation:!1}),this.props.onEnter(e,t)}},{key:"onEntering",value:function(e,t){var n=e.offsetHeight;return this.setState({startAnimation:!0}),this.props.onEntering(e,t),n}},{key:"onExit",value:function(e){this.setState({startAnimation:!1}),this.props.onExit(e)}},{key:"onExiting",value:function(e){this.setState({startAnimation:!0}),e.dispatchEvent(new CustomEvent("slide.bs.carousel")),this.props.onExiting(e)}},{key:"onExited",value:function(e){e.dispatchEvent(new CustomEvent("slid.bs.carousel")),this.props.onExited(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.in,r=t.children,o=t.cssModule,a=t.slide,s=t.tag,c=t.className,l=B(t,["in","children","cssModule","slide","tag","className"]);return i.a.createElement(pt,j({},l,{enter:a,exit:a,in:n,onEnter:this.onEnter,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}),function(t){var n=e.context.direction,a=t===oe.ENTERED||t===oe.EXITING,l=(t===oe.ENTERING||t===oe.EXITING)&&e.state.startAnimation&&("right"===n?"carousel-item-left":"carousel-item-right"),h=t===oe.ENTERING&&("right"===n?"carousel-item-next":"carousel-item-prev"),f=Y(u()(c,"carousel-item",a&&"active",l,h),o);return i.a.createElement(s,{className:f},r)})}}]),t}(i.a.Component);jt.propTypes=j({},pt.propTypes,{tag:a.a.oneOfType([a.a.func,a.a.string]),in:a.a.bool,cssModule:a.a.object,children:a.a.node,slide:a.a.bool,className:a.a.string}),jt.defaultProps=j({},pt.defaultProps,{tag:"div",timeout:re.Carousel,slide:!0}),jt.contextTypes={direction:a.a.string};var qt=function(e){function t(e){L(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleKeyPress=n.handleKeyPress.bind(n),n.renderItems=n.renderItems.bind(n),n.hoverStart=n.hoverStart.bind(n),n.hoverEnd=n.hoverEnd.bind(n),n.state={direction:"right",indicatorClicked:!1},n}return q(t,e),F(t,[{key:"getChildContext",value:function(){return{direction:this.state.direction}}},{key:"componentDidMount",value:function(){"carousel"===this.props.ride&&this.setInterval(),document.addEventListener("keyup",this.handleKeyPress)}},{key:"componentWillReceiveProps",value:function(e){this.setInterval(e),this.props.activeIndex+1===e.activeIndex?this.setState({direction:"right"}):this.props.activeIndex-1===e.activeIndex?this.setState({direction:"left"}):this.props.activeIndex>e.activeIndex?this.setState({direction:this.state.indicatorClicked?"left":"right"}):this.props.activeIndex!==e.activeIndex&&this.setState({direction:this.state.indicatorClicked?"right":"left"}),this.setState({indicatorClicked:!1})}},{key:"componentWillUnmount",value:function(){this.clearInterval(),document.removeEventListener("keyup",this.handleKeyPress)}},{key:"setInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.clearInterval(),e.interval&&(this.cycleInterval=setInterval(function(){e.next()},parseInt(e.interval,10)))})},{key:"clearInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){clearInterval(this.cycleInterval)})},{key:"hoverStart",value:function(){var e;("hover"===this.props.pause&&this.clearInterval(),this.props.mouseEnter)&&(e=this.props).mouseEnter.apply(e,arguments)}},{key:"hoverEnd",value:function(){var e;("hover"===this.props.pause&&this.setInterval(),this.props.mouseLeave)&&(e=this.props).mouseLeave.apply(e,arguments)}},{key:"handleKeyPress",value:function(e){this.props.keyboard&&(37===e.keyCode?this.props.previous():39===e.keyCode&&this.props.next())}},{key:"renderItems",value:function(e,t){var n=this,r=this.props.slide;return i.a.createElement("div",{role:"listbox",className:t},e.map(function(e,t){var o=t===n.props.activeIndex;return i.a.cloneElement(e,{in:o,slide:r})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.cssModule,r=t.slide,o=t.className,a=Y(u()(o,"carousel",r&&"slide"),n),s=Y(u()("carousel-inner"),n),c=this.props.children.filter(function(e){return null!==e&&void 0!==e&&"boolean"!==typeof e});if(c.every(function(e){return e.type===jt}))return i.a.createElement("div",{className:a,onMouseEnter:this.hoverStart,onMouseLeave:this.hoverEnd},this.renderItems(c,s));if(c[0]instanceof Array){var l=c[0],h=c[1],f=c[2];return i.a.createElement("div",{className:a,onMouseEnter:this.hoverStart,onMouseLeave:this.hoverEnd},this.renderItems(l,s),h,f)}var p=c[0],d=i.a.cloneElement(p,{onClickHandler:function(t){"function"===typeof p.props.onClickHandler&&e.setState({indicatorClicked:!0},function(){return p.props.onClickHandler(t)})}}),m=c[1],y=c[2],g=c[3];return i.a.createElement("div",{className:a,onMouseEnter:this.hoverStart,onMouseLeave:this.hoverEnd},d,this.renderItems(m,s),y,g)}}]),t}(i.a.Component);qt.propTypes={activeIndex:a.a.number,next:a.a.func.isRequired,previous:a.a.func.isRequired,keyboard:a.a.bool,pause:a.a.oneOf(["hover",!1]),ride:a.a.oneOf(["carousel"]),interval:a.a.oneOfType([a.a.number,a.a.string,a.a.bool]),children:a.a.array,mouseEnter:a.a.func,mouseLeave:a.a.func,slide:a.a.bool,cssModule:a.a.object,className:a.a.string},qt.defaultProps={interval:5e3,pause:"hover",keyboard:!0,slide:!0},qt.childContextTypes={direction:a.a.string};var Bt=function(e){var t=e.direction,n=e.onClickHandler,r=e.cssModule,o=e.directionText,a=e.className,s=Y(u()(a,"carousel-control-"+t),r),c=Y(u()("carousel-control-"+t+"-icon"),r),l=Y(u()("sr-only"),r);return i.a.createElement("a",{className:s,role:"button",tabIndex:"0",onClick:function(e){e.preventDefault(),n()}},i.a.createElement("span",{className:c,"aria-hidden":"true"}),i.a.createElement("span",{className:l},o||t))};Bt.propTypes={direction:a.a.oneOf(["prev","next"]).isRequired,onClickHandler:a.a.func.isRequired,cssModule:a.a.object,directionText:a.a.string,className:a.a.string};var Vt=function(e){var t=e.items,n=e.activeIndex,r=e.cssModule,o=e.onClickHandler,a=e.className,s=Y(u()(a,"carousel-indicators"),r),c=t.map(function(e,t){var a=Y(u()({active:n===t}),r);return i.a.createElement("li",{key:""+(e.key||e.src)+e.caption+e.altText,onClick:function(e){e.preventDefault(),o(t)},className:a})});return i.a.createElement("ol",{className:s},c)};Vt.propTypes={items:a.a.array.isRequired,activeIndex:a.a.number.isRequired,cssModule:a.a.object,onClickHandler:a.a.func.isRequired,className:a.a.string};var Wt=function(e){var t=e.captionHeader,n=e.captionText,r=e.cssModule,o=e.className,a=Y(u()(o,"carousel-caption","d-none","d-md-block"),r);return i.a.createElement("div",{className:a},i.a.createElement("h3",null,t),i.a.createElement("p",null,n))};Wt.propTypes={captionHeader:a.a.string,captionText:a.a.string.isRequired,cssModule:a.a.object,className:a.a.string};var zt={items:a.a.array.isRequired,indicators:a.a.bool,controls:a.a.bool,autoPlay:a.a.bool,activeIndex:a.a.number,next:a.a.func,previous:a.a.func,goToIndex:a.a.func},Ht=function(e){function t(e){L(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.animating=!1,n.state={activeIndex:0},n.next=n.next.bind(n),n.previous=n.previous.bind(n),n.goToIndex=n.goToIndex.bind(n),n.onExiting=n.onExiting.bind(n),n.onExited=n.onExited.bind(n),n}return q(t,e),F(t,[{key:"onExiting",value:function(){this.animating=!0}},{key:"onExited",value:function(){this.animating=!1}},{key:"next",value:function(){if(!this.animating){var e=this.state.activeIndex===this.props.items.length-1?0:this.state.activeIndex+1;this.setState({activeIndex:e})}}},{key:"previous",value:function(){if(!this.animating){var e=0===this.state.activeIndex?this.props.items.length-1:this.state.activeIndex-1;this.setState({activeIndex:e})}}},{key:"goToIndex",value:function(e){this.animating||this.setState({activeIndex:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.autoPlay,r=t.indicators,o=t.controls,a=t.items,s=t.goToIndex,u=B(t,["autoPlay","indicators","controls","items","goToIndex"]),c=this.state.activeIndex,l=a.map(function(t){return i.a.createElement(jt,{onExiting:e.onExiting,onExited:e.onExited,key:t.src},i.a.createElement("img",{className:"d-block w-100",src:t.src,alt:t.altText}),i.a.createElement(Wt,{captionText:t.caption,captionHeader:t.header||t.caption}))});return i.a.createElement(qt,j({activeIndex:c,next:this.next,previous:this.previous,ride:n?"carousel":void 0},u),r&&i.a.createElement(Vt,{items:a,activeIndex:u.activeIndex||c,onClickHandler:s||this.goToIndex}),l,o&&i.a.createElement(Bt,{direction:"prev",directionText:"Previous",onClickHandler:u.previous||this.previous}),o&&i.a.createElement(Bt,{direction:"next",directionText:"Next",onClickHandler:u.next||this.next}))}}]),t}(r.Component);Ht.propTypes=zt,Ht.defaultProps={controls:!0,indicators:!0,autoPlay:!0};var Kt={tag:a.a.oneOfType([a.a.func,a.a.string]),className:a.a.string,cssModule:a.a.object},Qt=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=B(e,["className","cssModule","tag"]),a=Y(u()(t,"card-subtitle"),n);return i.a.createElement(r,j({},o,{className:a}))};Qt.propTypes=Kt,Qt.defaultProps={tag:"h6"};var Gt={tag:a.a.oneOfType([a.a.func,a.a.string]),className:a.a.string,cssModule:a.a.object},Yt=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=B(e,["className","cssModule","tag"]),a=Y(u()(t,"card-text"),n);return i.a.createElement(r,j({},o,{className:a}))};Yt.propTypes=Gt,Yt.defaultProps={tag:"p"};var Xt={tag:a.a.oneOfType([a.a.func,a.a.string]),className:a.a.string,cssModule:a.a.object},$t=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=B(e,["className","cssModule","tag"]),a=Y(u()(t,"card-title"),n);return i.a.createElement(r,j({},o,{className:a}))};$t.propTypes=Xt,$t.defaultProps={tag:"h5"};var Jt={className:a.a.string,id:a.a.oneOfType([a.a.string,a.a.number]).isRequired,type:a.a.string.isRequired,label:a.a.node,inline:a.a.bool,valid:a.a.bool,invalid:a.a.bool,bsSize:a.a.string,cssModule:a.a.object,children:a.a.oneOfType([a.a.node,a.a.array,a.a.func]),innerRef:a.a.oneOfType([a.a.object,a.a.string,a.a.func])};function Zt(e){var t=e.className,n=e.label,r=e.inline,o=e.valid,a=e.invalid,s=e.cssModule,c=e.children,l=e.bsSize,h=e.innerRef,f=B(e,["className","label","inline","valid","invalid","cssModule","children","bsSize","innerRef"]),p=f.type,d=Y(u()(t,"custom-"+p,!!l&&"custom-"+p+"-"+l),s),m=Y(u()(a&&"is-invalid",o&&"is-valid"),s);if("select"===p)return i.a.createElement("select",j({},f,{ref:h,className:u()(m,d)}),c);if("file"===p)return i.a.createElement("div",{className:d},i.a.createElement("input",j({},f,{ref:h,className:u()(m,Y("custom-file-input",s))})),i.a.createElement("label",{className:Y("custom-file-label",s),htmlFor:f.id},n||"Choose file"));if("checkbox"!==p&&"radio"!==p)return i.a.createElement("input",j({},f,{ref:h,className:u()(m,d)}));var y=u()(d,Y(u()("custom-control",{"custom-control-inline":r}),s));return i.a.createElement("div",{className:y},i.a.createElement("input",j({},f,{ref:h,className:u()(m,Y("custom-control-input",s))})),i.a.createElement("label",{className:Y("custom-control-label",s),htmlFor:f.id},n),c)}Zt.propTypes=Jt;var en={children:a.a.node.isRequired,className:a.a.string,placement:a.a.string,placementPrefix:a.a.string,arrowClassName:a.a.string,hideArrow:a.a.bool,tag:a.a.string,isOpen:a.a.bool.isRequired,cssModule:a.a.object,offset:a.a.oneOfType([a.a.string,a.a.number]),fallbackPlacement:a.a.oneOfType([a.a.string,a.a.array]),flip:a.a.bool,container:ne,target:ne.isRequired,modifiers:a.a.object,boundariesElement:a.a.oneOfType([a.a.string,te])},tn={popperManager:a.a.object.isRequired},nn=function(e){function t(e){L(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handlePlacementChange=n.handlePlacementChange.bind(n),n.setTargetNode=n.setTargetNode.bind(n),n.getTargetNode=n.getTargetNode.bind(n),n.state={},n}return q(t,e),F(t,[{key:"getChildContext",value:function(){return{popperManager:{setTargetNode:this.setTargetNode,getTargetNode:this.getTargetNode}}}},{key:"componentDidMount",value:function(){this.handleProps()}},{key:"componentDidUpdate",value:function(e){this.props.isOpen!==e.isOpen?this.handleProps():this._element&&this.renderIntoSubtree()}},{key:"componentWillUnmount",value:function(){this.hide()}},{key:"setTargetNode",value:function(e){this.targetNode=e}},{key:"getTargetNode",value:function(){return this.targetNode}},{key:"getContainerNode",value:function(){return fe(this.props.container)}},{key:"handlePlacementChange",value:function(e){return this.state.placement!==e.placement&&this.setState({placement:e.placement}),e}},{key:"handleProps",value:function(){"inline"!==this.props.container&&(this.props.isOpen?this.show():this.hide())}},{key:"hide",value:function(){this._element&&(this.getContainerNode().removeChild(this._element),d.a.unmountComponentAtNode(this._element),this._element=null)}},{key:"show",value:function(){this._element=document.createElement("div"),this.getContainerNode().appendChild(this._element),this.renderIntoSubtree(),this._element.childNodes&&this._element.childNodes[0]&&this._element.childNodes[0].focus&&this._element.childNodes[0].focus()}},{key:"renderIntoSubtree",value:function(){d.a.unstable_renderSubtreeIntoContainer(this,this.renderChildren(),this._element)}},{key:"renderChildren",value:function(){var e=this.props,t=e.cssModule,n=e.children,r=(e.isOpen,e.flip),o=(e.target,e.offset),a=e.fallbackPlacement,s=e.placementPrefix,c=e.arrowClassName,l=e.hideArrow,h=e.className,f=e.tag,p=(e.container,e.modifiers),d=e.boundariesElement,m=B(e,["cssModule","children","isOpen","flip","target","offset","fallbackPlacement","placementPrefix","arrowClassName","hideArrow","className","tag","container","modifiers","boundariesElement"]),y=Y(u()("arrow",c),t),g=(this.state.placement||m.placement).split("-")[0],v=Y(u()(h,s?s+"-"+g:g),this.props.cssModule),b=j({offset:{offset:o},flip:{enabled:r,behavior:a},preventOverflow:{boundariesElement:d},update:{enabled:!0,order:950,fn:this.handlePlacementChange}},p);return i.a.createElement(x,j({modifiers:b},m,{component:f,className:v,"x-placement":this.state.placement||m.placement}),n,!l&&i.a.createElement(O,{className:y}))}},{key:"render",value:function(){return this.setTargetNode(fe(this.props.target)),"inline"===this.props.container&&this.props.isOpen?this.renderChildren():null}}]),t}(i.a.Component);nn.propTypes=en,nn.defaultProps={boundariesElement:"scrollParent",placement:"auto",hideArrow:!1,isOpen:!1,offset:0,fallbackPlacement:"flip",flip:!0,container:"body",modifiers:{}},nn.childContextTypes=tn;var rn=function(e,t){return t.popperManager.setTargetNode(fe(e.target)),null};rn.contextTypes={popperManager:a.a.object.isRequired},rn.propTypes={target:ne.isRequired};var on={placement:a.a.oneOf(se),target:ne.isRequired,container:ne,boundariesElement:a.a.oneOfType([a.a.string,te]),isOpen:a.a.bool,disabled:a.a.bool,hideArrow:a.a.bool,className:a.a.string,innerClassName:a.a.string,placementPrefix:a.a.string,cssModule:a.a.object,toggle:a.a.func,delay:a.a.oneOfType([a.a.shape({show:a.a.number,hide:a.a.number}),a.a.number]),modifiers:a.a.object,offset:a.a.oneOfType([a.a.string,a.a.number])},an={show:0,hide:0},sn={isOpen:!1,hideArrow:!1,placement:"right",placementPrefix:"bs-popover",delay:an,toggle:function(){}},un=function(e){function t(e){L(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.addTargetEvents=n.addTargetEvents.bind(n),n.handleDocumentClick=n.handleDocumentClick.bind(n),n.removeTargetEvents=n.removeTargetEvents.bind(n),n.getRef=n.getRef.bind(n),n.toggle=n.toggle.bind(n),n.show=n.show.bind(n),n.hide=n.hide.bind(n),n._target=null,n}return q(t,e),F(t,[{key:"componentDidMount",value:function(){this._target=fe(this.props.target),this.handleProps()}},{key:"componentDidUpdate",value:function(){this.handleProps()}},{key:"componentWillUnmount",value:function(){this.clearShowTimeout(),this.clearHideTimeout(),this.removeTargetEvents()}},{key:"getRef",value:function(e){this._popover=e}},{key:"getDelay",value:function(e){var t=this.props.delay;return"object"===("undefined"===typeof t?"undefined":M(t))?isNaN(t[e])?an[e]:t[e]:t}},{key:"handleProps",value:function(){this.props.isOpen?this.show():this.hide()}},{key:"show",value:function(){this.clearHideTimeout(),this.addTargetEvents(),this.props.isOpen||(this.clearShowTimeout(),this._showTimeout=setTimeout(this.toggle,this.getDelay("show")))}},{key:"hide",value:function(){this.clearShowTimeout(),this.removeTargetEvents(),this.props.isOpen&&(this.clearHideTimeout(),this._hideTimeout=setTimeout(this.toggle,this.getDelay("hide")))}},{key:"clearShowTimeout",value:function(){clearTimeout(this._showTimeout),this._showTimeout=void 0}},{key:"clearHideTimeout",value:function(){clearTimeout(this._hideTimeout),this._hideTimeout=void 0}},{key:"handleDocumentClick",value:function(e){this._target&&(e.target===this._target||this._target.contains(e.target)||e.target===this._popover||this._popover&&this._popover.contains(e.target)||(this._hideTimeout&&this.clearHideTimeout(),this.props.isOpen&&this.toggle(e)))}},{key:"addTargetEvents",value:function(){var e=this;["click","touchstart"].forEach(function(t){return document.addEventListener(t,e.handleDocumentClick,!0)})}},{key:"removeTargetEvents",value:function(){var e=this;["click","touchstart"].forEach(function(t){return document.removeEventListener(t,e.handleDocumentClick,!0)})}},{key:"toggle",value:function(e){return this.props.disabled?e&&e.preventDefault():this.props.toggle(e)}},{key:"render",value:function(){if(!this.props.isOpen)return null;var e=X(this.props,Object.keys(on)),t=Y(u()("popover-inner",this.props.innerClassName),this.props.cssModule),n=Y(u()("popover","show",this.props.className),this.props.cssModule);return i.a.createElement(nn,{className:n,target:this.props.target,isOpen:this.props.isOpen,hideArrow:this.props.hideArrow,placement:this.props.placement,placementPrefix:this.props.placementPrefix,container:this.props.container,modifiers:this.props.modifiers,offset:this.props.offset,boundariesElement:this.props.boundariesElement},i.a.createElement("div",j({},e,{className:t,ref:this.getRef})))}}]),t}(i.a.Component);un.propTypes=on,un.defaultProps=sn;var cn={tag:a.a.oneOfType([a.a.func,a.a.string]),className:a.a.string,cssModule:a.a.object},ln=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=B(e,["className","cssModule","tag"]),a=Y(u()(t,"popover-header"),n);return i.a.createElement(r,j({},o,{className:a}))};ln.propTypes=cn,ln.defaultProps={tag:"h3"};var hn={tag:a.a.oneOfType([a.a.func,a.a.string]),className:a.a.string,cssModule:a.a.object},fn=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=B(e,["className","cssModule","tag"]),a=Y(u()(t,"popover-body"),n);return i.a.createElement(r,j({},o,{className:a}))};fn.propTypes=hn,fn.defaultProps={tag:"div"};var pn={children:a.a.node,bar:a.a.bool,multi:a.a.bool,tag:a.a.string,value:a.a.oneOfType([a.a.string,a.a.number]),max:a.a.oneOfType([a.a.string,a.a.number]),animated:a.a.bool,striped:a.a.bool,color:a.a.string,className:a.a.string,barClassName:a.a.string,cssModule:a.a.object},dn=function(e){var t=e.children,n=e.className,r=e.barClassName,o=e.cssModule,a=e.value,s=e.max,c=e.animated,l=e.striped,h=e.color,f=e.bar,p=e.multi,d=e.tag,m=B(e,["children","className","barClassName","cssModule","value","max","animated","striped","color","bar","multi","tag"]),y=R()(a)/R()(s)*100,g=Y(u()(n,"progress"),o),v=Y(u()("progress-bar",f&&n||r,c?"progress-bar-animated":null,h?"bg-"+h:null,l||c?"progress-bar-striped":null),o),b=p?t:i.a.createElement("div",{className:v,style:{width:y+"%"},role:"progressbar","aria-valuenow":a,"aria-valuemin":"0","aria-valuemax":s,children:t});return f?b:i.a.createElement(d,j({},m,{className:g,children:b}))};dn.propTypes=pn,dn.defaultProps={tag:"div",value:0,max:100};var mn={children:a.a.node.isRequired,node:a.a.any},yn=function(e){function t(){return L(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return q(t,e),F(t,[{key:"componentWillUnmount",value:function(){this.defaultNode&&document.body.removeChild(this.defaultNode),this.defaultNode=null}},{key:"render",value:function(){return ue?(this.props.node||this.defaultNode||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode)),d.a.createPortal(this.props.children,this.props.node||this.defaultNode)):null}}]),t}(i.a.Component);function gn(){}yn.propTypes=mn;var vn=a.a.shape(yt.propTypes),bn={isOpen:a.a.bool,autoFocus:a.a.bool,centered:a.a.bool,size:a.a.string,toggle:a.a.func,keyboard:a.a.bool,role:a.a.string,labelledBy:a.a.string,backdrop:a.a.oneOfType([a.a.bool,a.a.oneOf(["static"])]),onEnter:a.a.func,onExit:a.a.func,onOpened:a.a.func,onClosed:a.a.func,children:a.a.node,className:a.a.string,wrapClassName:a.a.string,modalClassName:a.a.string,backdropClassName:a.a.string,contentClassName:a.a.string,external:a.a.node,fade:a.a.bool,cssModule:a.a.object,zIndex:a.a.oneOfType([a.a.number,a.a.string]),backdropTransition:vn,modalTransition:vn,innerRef:a.a.oneOfType([a.a.object,a.a.string,a.a.func])},wn=Object.keys(bn),_n={isOpen:!1,autoFocus:!0,centered:!1,role:"dialog",backdrop:!0,keyboard:!0,zIndex:1050,fade:!0,onOpened:gn,onClosed:gn,modalTransition:{timeout:re.Modal},backdropTransition:{mountOnEnter:!0,timeout:re.Fade}},En=function(e){function t(e){L(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._element=null,n._originalBodyPadding=null,n.getFocusableChildren=n.getFocusableChildren.bind(n),n.handleBackdropClick=n.handleBackdropClick.bind(n),n.handleBackdropMouseDown=n.handleBackdropMouseDown.bind(n),n.handleEscape=n.handleEscape.bind(n),n.handleTab=n.handleTab.bind(n),n.onOpened=n.onOpened.bind(n),n.onClosed=n.onClosed.bind(n),n.state={isOpen:e.isOpen},e.isOpen&&n.init(),n}return q(t,e),F(t,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter(),this.state.isOpen&&this.props.autoFocus&&this.setFocus(),this._isMounted=!0}},{key:"componentWillReceiveProps",value:function(e){e.isOpen&&!this.props.isOpen&&this.setState({isOpen:e.isOpen})}},{key:"componentWillUpdate",value:function(e,t){t.isOpen&&!this.state.isOpen&&this.init()}},{key:"componentDidUpdate",value:function(e,t){this.props.autoFocus&&this.state.isOpen&&!t.isOpen&&this.setFocus(),this._element&&e.zIndex!==this.props.zIndex&&(this._element.style.zIndex=this.props.zIndex)}},{key:"componentWillUnmount",value:function(){this.props.onExit&&this.props.onExit(),this.state.isOpen&&this.destroy(),this._isMounted=!1}},{key:"onOpened",value:function(e,t){this.props.onOpened(),(this.props.modalTransition.onEntered||gn)(e,t)}},{key:"onClosed",value:function(e){this.props.onClosed(),(this.props.modalTransition.onExited||gn)(e),this.destroy(),this._isMounted&&this.setState({isOpen:!1})}},{key:"setFocus",value:function(){this._dialog&&this._dialog.parentNode&&"function"===typeof this._dialog.parentNode.focus&&this._dialog.parentNode.focus()}},{key:"getFocusableChildren",value:function(){return this._element.querySelectorAll(me.join(", "))}},{key:"getFocusedChild",value:function(){var e=void 0,t=this.getFocusableChildren();try{e=document.activeElement}catch(n){e=t[0]}return e}},{key:"handleBackdropClick",value:function(e){if(e.target===this._mouseDownElement){if(e.stopPropagation(),!this.props.isOpen||!0!==this.props.backdrop)return;var t=this._dialog;e.target&&!t.contains(e.target)&&this.props.toggle&&this.props.toggle(e)}}},{key:"handleTab",value:function(e){if(9===e.which){for(var t=this.getFocusableChildren(),n=t.length,r=this.getFocusedChild(),i=0,o=0;o<n;o+=1)if(t[o]===r){i=o;break}e.shiftKey&&0===i?(e.preventDefault(),t[n-1].focus()):e.shiftKey||i!==n-1||(e.preventDefault(),t[0].focus())}}},{key:"handleBackdropMouseDown",value:function(e){this._mouseDownElement=e.target}},{key:"handleEscape",value:function(e){this.props.isOpen&&this.props.keyboard&&27===e.keyCode&&this.props.toggle&&this.props.toggle(e)}},{key:"init",value:function(){try{this._triggeringElement=document.activeElement}catch(e){this._triggeringElement=null}this._element=document.createElement("div"),this._element.setAttribute("tabindex","-1"),this._element.style.position="relative",this._element.style.zIndex=this.props.zIndex,this._originalBodyPadding=K(),Q(),document.body.appendChild(this._element),0===t.openCount&&(document.body.className=u()(document.body.className,Y("modal-open",this.props.cssModule))),t.openCount+=1}},{key:"destroy",value:function(){if(this._element&&(document.body.removeChild(this._element),this._element=null),this._triggeringElement&&(this._triggeringElement.focus&&this._triggeringElement.focus(),this._triggeringElement=null),t.openCount<=1){var e=Y("modal-open",this.props.cssModule),n=new RegExp("(^| )"+e+"( |$)");document.body.className=document.body.className.replace(n," ").trim()}t.openCount-=1,z(this._originalBodyPadding)}},{key:"renderModalDialog",value:function(){var e,t=this,n=X(this.props,wn);return i.a.createElement("div",j({},n,{className:Y(u()("modal-dialog",this.props.className,(e={},U(e,"modal-"+this.props.size,this.props.size),U(e,"modal-dialog-centered",this.props.centered),e)),this.props.cssModule),role:"document",ref:function(e){t._dialog=e}}),i.a.createElement("div",{className:Y(u()("modal-content",this.props.contentClassName),this.props.cssModule)},this.props.children))}},{key:"render",value:function(){if(this.state.isOpen){var e=this.props,t=e.wrapClassName,n=e.modalClassName,r=e.backdropClassName,o=e.cssModule,a=e.isOpen,s=e.backdrop,c=e.role,l=e.labelledBy,h=e.external,f=e.innerRef,p={onClick:this.handleBackdropClick,onMouseDown:this.handleBackdropMouseDown,onKeyUp:this.handleEscape,onKeyDown:this.handleTab,style:{display:"block"},"aria-labelledby":l,role:c,tabIndex:"-1"},d=this.props.fade,m=j({},yt.defaultProps,this.props.modalTransition,{baseClass:d?this.props.modalTransition.baseClass:"",timeout:d?this.props.modalTransition.timeout:0}),y=j({},yt.defaultProps,this.props.backdropTransition,{baseClass:d?this.props.backdropTransition.baseClass:"",timeout:d?this.props.backdropTransition.timeout:0}),g=d?i.a.createElement(yt,j({},y,{in:a&&!!s,cssModule:o,className:Y(u()("modal-backdrop",r),o)})):i.a.createElement("div",{className:Y(u()("modal-backdrop","show",r),o)});return i.a.createElement(yn,{node:this._element},i.a.createElement("div",{className:Y(t)},i.a.createElement(yt,j({},p,m,{in:a,onEntered:this.onOpened,onExited:this.onClosed,cssModule:o,className:Y(u()("modal",n),o),innerRef:f}),h,this.renderModalDialog()),g))}return null}}]),t}(i.a.Component);En.propTypes=bn,En.defaultProps=_n,En.openCount=0;var Tn={tag:a.a.oneOfType([a.a.func,a.a.string]),wrapTag:a.a.oneOfType([a.a.func,a.a.string]),toggle:a.a.func,className:a.a.string,cssModule:a.a.object,children:a.a.node,closeAriaLabel:a.a.string,charCode:a.a.oneOfType([a.a.string,a.a.number]),close:a.a.object},Sn=function(e){var t=void 0,n=e.className,r=e.cssModule,o=e.children,a=e.toggle,s=e.tag,c=e.wrapTag,l=e.closeAriaLabel,h=e.charCode,f=e.close,p=B(e,["className","cssModule","children","toggle","tag","wrapTag","closeAriaLabel","charCode","close"]),d=Y(u()(n,"modal-header"),r);if(!f&&a){var m="number"===typeof h?String.fromCharCode(h):h;t=i.a.createElement("button",{type:"button",onClick:a,className:Y("close",r),"aria-label":l},i.a.createElement("span",{"aria-hidden":"true"},m))}return i.a.createElement(c,j({},p,{className:d}),i.a.createElement(s,{className:Y("modal-title",r)},o),f||t)};Sn.propTypes=Tn,Sn.defaultProps={tag:"h5",wrapTag:"div",closeAriaLabel:"Close",charCode:215};var Cn={tag:a.a.oneOfType([a.a.func,a.a.string]),className:a.a.string,cssModule:a.a.object},kn=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=B(e,["className","cssModule","tag"]),a=Y(u()(t,"modal-body"),n);return i.a.createElement(r,j({},o,{className:a}))};kn.propTypes=Cn,kn.defaultProps={tag:"div"};var In={tag:a.a.oneOfType([a.a.func,a.a.string]),className:a.a.string,cssModule:a.a.object},xn=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=B(e,["className","cssModule","tag"]),a=Y(u()(t,"modal-footer"),n);return i.a.createElement(r,j({},o,{className:a}))};xn.propTypes=In,xn.defaultProps={tag:"div"};var Nn={placement:a.a.oneOf(se),target:ne.isRequired,container:ne,isOpen:a.a.bool,disabled:a.a.bool,hideArrow:a.a.bool,boundariesElement:a.a.oneOfType([a.a.string,te]),className:a.a.string,innerClassName:a.a.string,arrowClassName:a.a.string,cssModule:a.a.object,toggle:a.a.func,autohide:a.a.bool,placementPrefix:a.a.string,delay:a.a.oneOfType([a.a.shape({show:a.a.number,hide:a.a.number}),a.a.number]),modifiers:a.a.object,offset:a.a.oneOfType([a.a.string,a.a.number]),innerRef:a.a.oneOfType([a.a.func,a.a.string,a.a.object]),trigger:a.a.string},An={show:0,hide:250},On={isOpen:!1,hideArrow:!1,placement:"top",placementPrefix:"bs-tooltip",delay:An,autohide:!0,toggle:function(){}},Dn=function(e){function t(e){L(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._target=null,n.addTargetEvents=n.addTargetEvents.bind(n),n.handleDocumentClick=n.handleDocumentClick.bind(n),n.removeTargetEvents=n.removeTargetEvents.bind(n),n.toggle=n.toggle.bind(n),n.onMouseOverTooltip=n.onMouseOverTooltip.bind(n),n.onMouseLeaveTooltip=n.onMouseLeaveTooltip.bind(n),n.onMouseOverTooltipContent=n.onMouseOverTooltipContent.bind(n),n.onMouseLeaveTooltipContent=n.onMouseLeaveTooltipContent.bind(n),n.show=n.show.bind(n),n.hide=n.hide.bind(n),n.onEscKeyDown=n.onEscKeyDown.bind(n),n}return q(t,e),F(t,[{key:"componentDidMount",value:function(){this._target=fe(this.props.target),this.addTargetEvents()}},{key:"componentWillUnmount",value:function(){this.clearHideTimeout(),this.clearShowTimeout(),this.removeTargetEvents()}},{key:"onMouseOverTooltip",value:function(e){this._hideTimeout&&this.clearHideTimeout(),this._showTimeout=setTimeout(this.show.bind(this,e),this.getDelay("show"))}},{key:"onMouseLeaveTooltip",value:function(e){this._showTimeout&&this.clearShowTimeout(),this._hideTimeout=setTimeout(this.hide.bind(this,e),this.getDelay("hide"))}},{key:"onMouseOverTooltipContent",value:function(){this.props.autohide||this._hideTimeout&&this.clearHideTimeout()}},{key:"onMouseLeaveTooltipContent",value:function(e){this.props.autohide||(this._showTimeout&&this.clearShowTimeout(),e.persist(),this._hideTimeout=setTimeout(this.hide.bind(this,e),this.getDelay("hide")))}},{key:"onEscKeyDown",value:function(e){"Escape"===e.key&&this.hide(e)}},{key:"getDelay",value:function(e){var t=this.props.delay;return"object"===("undefined"===typeof t?"undefined":M(t))?isNaN(t[e])?An[e]:t[e]:t}},{key:"show",value:function(e){this.props.isOpen||(this.clearShowTimeout(),this.toggle(e))}},{key:"hide",value:function(e){this.props.isOpen&&(this.clearHideTimeout(),this.toggle(e))}},{key:"clearShowTimeout",value:function(){clearTimeout(this._showTimeout),this._showTimeout=void 0}},{key:"clearHideTimeout",value:function(){clearTimeout(this._hideTimeout),this._hideTimeout=void 0}},{key:"handleDocumentClick",value:function(e){null===this._target||e.target!==this._target&&!this._target.contains(e.target)?this.props.isOpen&&"tooltip"!==e.target.getAttribute("role")&&(this._showTimeout&&this.clearShowTimeout(),this._hideTimeout=setTimeout(this.hide.bind(this,e),this.getDelay("hide"))):(this._hideTimeout&&this.clearHideTimeout(),this.props.isOpen||this.toggle(e))}},{key:"addTargetEvents",value:function(){var e=this;if(this.props.trigger){var t=this.props.trigger.split(" ");-1===t.indexOf("manual")&&(t.indexOf("click")>-1&&["click","touchstart"].forEach(function(t){return document.addEventListener(t,e.handleDocumentClick,!0)}),null!==this._target&&(t.indexOf("hover")>-1&&(this._target.addEventListener("mouseover",this.onMouseOverTooltip,!0),this._target.addEventListener("mouseout",this.onMouseLeaveTooltip,!0)),t.indexOf("focus")>-1&&(this._target.addEventListener("focusin",this.show,!0),this._target.addEventListener("focusout",this.hide,!0)),this._target.addEventListener("keydown",this.onEscKeyDown,!0)))}else null!==this._target&&(this._target.addEventListener("mouseover",this.onMouseOverTooltip,!0),this._target.addEventListener("mouseout",this.onMouseLeaveTooltip,!0),this._target.addEventListener("keydown",this.onEscKeyDown,!0),this._target.addEventListener("focusin",this.show,!0),this._target.addEventListener("focusout",this.hide,!0)),["click","touchstart"].forEach(function(t){return document.addEventListener(t,e.handleDocumentClick,!0)})}},{key:"removeTargetEvents",value:function(){var e=this;null!==this._target&&(this._target.removeEventListener("mouseover",this.onMouseOverTooltip,!0),this._target.removeEventListener("mouseout",this.onMouseLeaveTooltip,!0),this._target.addEventListener("keydown",this.onEscKeyDown,!0),this._target.addEventListener("focusin",this.show,!0),this._target.addEventListener("focusout",this.hide,!0)),["click","touchstart"].forEach(function(t){return document.removeEventListener(t,e.handleDocumentClick,!0)})}},{key:"toggle",value:function(e){return this.props.disabled?e&&e.preventDefault():this.props.toggle(e)}},{key:"render",value:function(){if(!this.props.isOpen)return null;var e=X(this.props,Object.keys(Nn)),t=Y(u()("tooltip-inner",this.props.innerClassName),this.props.cssModule),n=Y(u()("tooltip","show",this.props.className),this.props.cssModule);return i.a.createElement(nn,{className:n,target:this.props.target,isOpen:this.props.isOpen,hideArrow:this.props.hideArrow,boundariesElement:this.props.boundariesElement,placement:this.props.placement,placementPrefix:this.props.placementPrefix,arrowClassName:this.props.arrowClassName,container:this.props.container,modifiers:this.props.modifiers,offset:this.props.offset,cssModule:this.props.cssModule},i.a.createElement("div",j({},e,{ref:this.props.innerRef,className:t,role:"tooltip","aria-hidden":this.props.isOpen,onMouseOver:this.onMouseOverTooltipContent,onMouseLeave:this.onMouseLeaveTooltipContent,onKeyDown:this.onEscKeyDown})))}}]),t}(i.a.Component);Dn.propTypes=Nn,Dn.defaultProps=On;var Rn={className:a.a.string,cssModule:a.a.object,size:a.a.string,bordered:a.a.bool,borderless:a.a.bool,striped:a.a.bool,inverse:ee(a.a.bool,'Please use the prop "dark"'),dark:a.a.bool,hover:a.a.bool,responsive:a.a.oneOfType([a.a.bool,a.a.string]),tag:a.a.oneOfType([a.a.func,a.a.string]),responsiveTag:a.a.oneOfType([a.a.func,a.a.string])},Pn=function(e){var t=e.className,n=e.cssModule,r=e.size,o=e.bordered,a=e.borderless,s=e.striped,c=e.inverse,l=e.dark,h=e.hover,f=e.responsive,p=e.tag,d=e.responsiveTag,m=B(e,["className","cssModule","size","bordered","borderless","striped","inverse","dark","hover","responsive","tag","responsiveTag"]),y=Y(u()(t,"table",!!r&&"table-"+r,!!o&&"table-bordered",!!a&&"table-borderless",!!s&&"table-striped",!(!l&&!c)&&"table-dark",!!h&&"table-hover"),n),g=i.a.createElement(p,j({},m,{className:y}));if(f){var v=!0===f?"table-responsive":"table-responsive-"+f;return i.a.createElement(d,{className:v},g)}return g};Pn.propTypes=Rn,Pn.defaultProps={tag:"table",responsiveTag:"div"};var Mn={tag:a.a.oneOfType([a.a.func,a.a.string]),flush:a.a.bool,className:a.a.string,cssModule:a.a.object},Ln=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=e.flush,a=B(e,["className","cssModule","tag","flush"]),s=Y(u()(t,"list-group",!!o&&"list-group-flush"),n);return i.a.createElement(r,j({},a,{className:s}))};Ln.propTypes=Mn,Ln.defaultProps={tag:"ul"};var Fn={children:a.a.node,inline:a.a.bool,tag:a.a.oneOfType([a.a.func,a.a.string]),innerRef:a.a.oneOfType([a.a.object,a.a.func,a.a.string]),className:a.a.string,cssModule:a.a.object},Un=function(e){function t(e){L(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getRef=n.getRef.bind(n),n.submit=n.submit.bind(n),n}return q(t,e),F(t,[{key:"getRef",value:function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e}},{key:"submit",value:function(){this.ref&&this.ref.submit()}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.cssModule,r=e.inline,o=e.tag,a=e.innerRef,s=B(e,["className","cssModule","inline","tag","innerRef"]),c=Y(u()(t,!!r&&"form-inline"),n);return i.a.createElement(o,j({},s,{ref:a,className:c}))}}]),t}(r.Component);Un.propTypes=Fn,Un.defaultProps={tag:"form"};var jn={children:a.a.node,tag:a.a.string,className:a.a.string,cssModule:a.a.object,valid:a.a.bool,tooltip:a.a.bool},qn={tag:"div",valid:void 0},Bn=function(e){var t=e.className,n=e.cssModule,r=e.valid,o=e.tooltip,a=e.tag,s=B(e,["className","cssModule","valid","tooltip","tag"]),c=o?"tooltip":"feedback",l=Y(u()(t,r?"valid-"+c:"invalid-"+c),n);return i.a.createElement(a,j({},s,{className:l}))};Bn.propTypes=jn,Bn.defaultProps=qn;var Vn={children:a.a.node,row:a.a.bool,check:a.a.bool,inline:a.a.bool,disabled:a.a.bool,tag:a.a.string,className:a.a.string,cssModule:a.a.object},Wn=function(e){var t=e.className,n=e.cssModule,r=e.row,o=e.disabled,a=e.check,s=e.inline,c=e.tag,l=B(e,["className","cssModule","row","disabled","check","inline","tag"]),h=Y(u()(t,"position-relative",!!r&&"row",a?"form-check":"form-group",!(!a||!s)&&"form-check-inline",!(!a||!o)&&"disabled"),n);return i.a.createElement(c,j({},l,{className:h}))};Wn.propTypes=Vn,Wn.defaultProps={tag:"div"};var zn={children:a.a.node,inline:a.a.bool,tag:a.a.oneOfType([a.a.func,a.a.string]),color:a.a.string,className:a.a.string,cssModule:a.a.object},Hn=function(e){var t=e.className,n=e.cssModule,r=e.inline,o=e.color,a=e.tag,s=B(e,["className","cssModule","inline","color","tag"]),c=Y(u()(t,!r&&"form-text",!!o&&"text-"+o),n);return i.a.createElement(a,j({},s,{className:c}))};Hn.propTypes=zn,Hn.defaultProps={tag:"small",color:"muted"};var Kn={children:a.a.node,type:a.a.string,size:a.a.string,bsSize:a.a.string,state:ee(a.a.string,'Please use the props "valid" and "invalid" to indicate the state.'),valid:a.a.bool,invalid:a.a.bool,tag:a.a.oneOfType([a.a.func,a.a.string]),innerRef:a.a.oneOfType([a.a.object,a.a.func,a.a.string]),static:ee(a.a.bool,'Please use the prop "plaintext"'),plaintext:a.a.bool,addon:a.a.bool,className:a.a.string,cssModule:a.a.object},Qn=function(e){function t(e){L(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getRef=n.getRef.bind(n),n.focus=n.focus.bind(n),n}return q(t,e),F(t,[{key:"getRef",value:function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e}},{key:"focus",value:function(){this.ref&&this.ref.focus()}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.cssModule,r=e.type,o=e.bsSize,a=e.state,s=e.valid,c=e.invalid,l=e.tag,h=e.addon,f=e.static,p=e.plaintext,d=e.innerRef,m=B(e,["className","cssModule","type","bsSize","state","valid","invalid","tag","addon","static","plaintext","innerRef"]),y=["radio","checkbox"].indexOf(r)>-1,g=new RegExp("\\D","g"),v=l||("select"===r||"textarea"===r?r:"input"),b="form-control";p||f?(b+="-plaintext",v=l||"p"):"file"===r?b+="-file":y&&(b=h?null:"form-check-input"),a&&"undefined"===typeof s&&"undefined"===typeof c&&("danger"===a?c=!0:"success"===a&&(s=!0)),m.size&&g.test(m.size)&&(Z('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),o=m.size,delete m.size);var w=Y(u()(t,c&&"is-invalid",s&&"is-valid",!!o&&"form-control-"+o,b),n);return("input"===v||l&&"function"===typeof l)&&(m.type=r),!m.children||p||f||"select"===r||"string"!==typeof v||"select"===v||(Z('Input with a type of "'+r+'" cannot have children. Please use "value"/"defaultValue" instead.'),delete m.children),i.a.createElement(v,j({},m,{ref:d,className:w}))}}]),t}(i.a.Component);Qn.propTypes=Kn,Qn.defaultProps={type:"text"};var Gn={tag:a.a.oneOfType([a.a.func,a.a.string]),size:a.a.string,className:a.a.string,cssModule:a.a.object},Yn=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=e.size,a=B(e,["className","cssModule","tag","size"]),s=Y(u()(t,"input-group",o?"input-group-"+o:null),n);return i.a.createElement(r,j({},a,{className:s}))};Yn.propTypes=Gn,Yn.defaultProps={tag:"div"};var Xn={tag:a.a.oneOfType([a.a.func,a.a.string]),className:a.a.string,cssModule:a.a.object},$n=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=B(e,["className","cssModule","tag"]),a=Y(u()(t,"input-group-text"),n);return i.a.createElement(r,j({},o,{className:a}))};$n.propTypes=Xn,$n.defaultProps={tag:"span"};var Jn={tag:a.a.oneOfType([a.a.func,a.a.string]),addonType:a.a.oneOf(["prepend","append"]).isRequired,children:a.a.node,className:a.a.string,cssModule:a.a.object},Zn=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=e.addonType,a=e.children,s=B(e,["className","cssModule","tag","addonType","children"]),c=Y(u()(t,"input-group-"+o),n);return"string"===typeof a?i.a.createElement(r,j({},s,{className:c}),i.a.createElement($n,{children:a})):i.a.createElement(r,j({},s,{className:c,children:a}))};Zn.propTypes=Jn,Zn.defaultProps={tag:"div"};a.a.oneOfType([a.a.func,a.a.string]),a.a.oneOf(["prepend","append"]).isRequired,a.a.node,a.a.string,a.a.object,a.a.string,a.a.object,a.a.oneOf(["prepend","append"]).isRequired,a.a.node;var er=a.a.oneOfType([a.a.number,a.a.string]),tr=a.a.oneOfType([a.a.string,a.a.number,a.a.shape({size:er,push:ee(er,'Please use the prop "order"'),pull:ee(er,'Please use the prop "order"'),order:er,offset:er})]),nr={children:a.a.node,hidden:a.a.bool,check:a.a.bool,size:a.a.string,for:a.a.string,tag:a.a.string,className:a.a.string,cssModule:a.a.object,xs:tr,sm:tr,md:tr,lg:tr,xl:tr,widths:a.a.array},rr={tag:"label",widths:["xs","sm","md","lg","xl"]},ir=function(e,t,n){return!0===n||""===n?e?"col":"col-"+t:"auto"===n?e?"col-auto":"col-"+t+"-auto":e?"col-"+n:"col-"+t+"-"+n},or=function(e){var t=e.className,n=e.cssModule,r=e.hidden,o=e.widths,a=e.tag,s=e.check,c=e.size,l=e.for,h=B(e,["className","cssModule","hidden","widths","tag","check","size","for"]),p=[];o.forEach(function(t,r){var i=e[t];if(delete h[t],i||""===i){var o=!r,a=void 0;if(f()(i)){var s,c=o?"-":"-"+t+"-";a=ir(o,t,i.size),p.push(Y(u()((U(s={},a,i.size||""===i.size),U(s,"order"+c+i.order,i.order||0===i.order),U(s,"offset"+c+i.offset,i.offset||0===i.offset),s))),n)}else a=ir(o,t,i),p.push(a)}});var d=Y(u()(t,!!r&&"sr-only",!!s&&"form-check-label",!!c&&"col-form-label-"+c,p,!!p.length&&"col-form-label"),n);return i.a.createElement(a,j({htmlFor:l},h,{className:d}))};or.propTypes=nr,or.defaultProps=rr;a.a.bool,a.a.bool,a.a.node,a.a.string,a.a.object,a.a.bool,a.a.bool,a.a.bool,a.a.bool,a.a.bool,a.a.bool,a.a.oneOfType([a.a.func,a.a.string]),a.a.bool;var ar={children:a.a.node,className:a.a.string,listClassName:a.a.string,cssModule:a.a.object,size:a.a.string,tag:a.a.oneOfType([a.a.func,a.a.string]),listTag:a.a.oneOfType([a.a.func,a.a.string]),"aria-label":a.a.string},sr=function(e){var t=e.className,n=e.listClassName,r=e.cssModule,o=e.size,a=e.tag,s=e.listTag,c=e["aria-label"],l=B(e,["className","listClassName","cssModule","size","tag","listTag","aria-label"]),h=Y(u()(t),r),f=Y(u()(n,"pagination",U({},"pagination-"+o,!!o)),r);return i.a.createElement(a,{className:h,"aria-label":c},i.a.createElement(s,j({},l,{className:f})))};sr.propTypes=ar,sr.defaultProps={tag:"nav",listTag:"ul","aria-label":"pagination"};var ur={active:a.a.bool,children:a.a.node,className:a.a.string,cssModule:a.a.object,disabled:a.a.bool,tag:a.a.oneOfType([a.a.func,a.a.string])},cr=function(e){var t=e.active,n=e.className,r=e.cssModule,o=e.disabled,a=e.tag,s=B(e,["active","className","cssModule","disabled","tag"]),c=Y(u()(n,"page-item",{active:t,disabled:o}),r);return i.a.createElement(a,j({},s,{className:c}))};cr.propTypes=ur,cr.defaultProps={tag:"li"};var lr={"aria-label":a.a.string,children:a.a.node,className:a.a.string,cssModule:a.a.object,next:a.a.bool,previous:a.a.bool,tag:a.a.oneOfType([a.a.func,a.a.string])},hr=function(e){var t=e.className,n=e.cssModule,r=e.next,o=e.previous,a=e.tag,s=B(e,["className","cssModule","next","previous","tag"]),c=Y(u()(t,"page-link"),n),l=void 0;o?l="Previous":r&&(l="Next");var h=e["aria-label"]||l,f=void 0;o?f="\xab":r&&(f="\xbb");var p=e.children;return p&&Array.isArray(p)&&0===p.length&&(p=null),s.href||"a"!==a||(a="button"),(o||r)&&(p=[i.a.createElement("span",{"aria-hidden":"true",key:"caret"},p||f),i.a.createElement("span",{className:"sr-only",key:"sr"},h)]),i.a.createElement(a,j({},s,{className:c,"aria-label":h}),p)};hr.propTypes=lr,hr.defaultProps={tag:"a"};var fr={tag:a.a.oneOfType([a.a.func,a.a.string]),activeTab:a.a.any,className:a.a.string,cssModule:a.a.object},pr={activeTabId:a.a.any},dr=function(e){function t(e){L(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={activeTab:n.props.activeTab},n}return q(t,e),F(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){return t.activeTab!==e.activeTab?{activeTab:e.activeTab}:null}}]),F(t,[{key:"getChildContext",value:function(){return{activeTabId:this.state.activeTab}}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.cssModule,r=e.tag,o=X(this.props,Object.keys(fr)),a=Y(u()("tab-content",t),n);return i.a.createElement(r,j({},o,{className:a}))}}]),t}(r.Component);Object(P.polyfill)(dr),dr.propTypes=fr,dr.defaultProps={tag:"div"},dr.childContextTypes=pr;var mr={tag:a.a.oneOfType([a.a.func,a.a.string]),className:a.a.string,cssModule:a.a.object,tabId:a.a.any},yr={activeTabId:a.a.any};function gr(e,t){var n=e.className,r=e.cssModule,o=e.tabId,a=e.tag,s=B(e,["className","cssModule","tabId","tag"]),c=Y(u()("tab-pane",n,{active:o===t.activeTabId}),r);return i.a.createElement(a,j({},s,{className:c}))}gr.propTypes=mr,gr.defaultProps={tag:"div"},gr.contextTypes=yr;var vr={tag:a.a.oneOfType([a.a.func,a.a.string]),fluid:a.a.bool,className:a.a.string,cssModule:a.a.object},br=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=e.fluid,a=B(e,["className","cssModule","tag","fluid"]),s=Y(u()(t,"jumbotron",!!o&&"jumbotron-fluid"),n);return i.a.createElement(r,j({},a,{className:s}))};br.propTypes=vr,br.defaultProps={tag:"div"};var wr,_r={children:a.a.node,className:a.a.string,closeClassName:a.a.string,closeAriaLabel:a.a.string,cssModule:a.a.object,color:a.a.string,fade:a.a.bool,isOpen:a.a.bool,toggle:a.a.func,tag:a.a.oneOfType([a.a.func,a.a.string]),transition:a.a.shape(yt.propTypes),innerRef:a.a.oneOfType([a.a.object,a.a.string,a.a.func])},Er={color:"success",isOpen:!0,tag:"div",closeAriaLabel:"Close",fade:!0,transition:j({},yt.defaultProps,{unmountOnExit:!0})};function Tr(e){var t=e.className,n=e.closeClassName,r=e.closeAriaLabel,o=e.cssModule,a=e.tag,s=e.color,c=e.isOpen,l=e.toggle,h=e.children,f=e.transition,p=e.fade,d=e.innerRef,m=B(e,["className","closeClassName","closeAriaLabel","cssModule","tag","color","isOpen","toggle","children","transition","fade","innerRef"]),y=Y(u()(t,"alert","alert-"+s,{"alert-dismissible":l}),o),g=Y(u()("close",n),o),v=j({},yt.defaultProps,f,{baseClass:p?f.baseClass:"",timeout:p?f.timeout:0});return i.a.createElement(yt,j({},m,v,{tag:a,className:y,in:c,role:"alert",innerRef:d}),l?i.a.createElement("button",{type:"button",className:g,"aria-label":r,onClick:l},i.a.createElement("span",{"aria-hidden":"true"},"\xd7")):null,h)}Tr.propTypes=_r,Tr.defaultProps=Er;var Sr=j({},pt.propTypes,{isOpen:a.a.bool,children:a.a.oneOfType([a.a.arrayOf(a.a.node),a.a.node]),tag:a.a.oneOfType([a.a.func,a.a.string]),className:a.a.node,navbar:a.a.bool,cssModule:a.a.object,innerRef:a.a.oneOfType([a.a.func,a.a.string,a.a.object])}),Cr=j({},pt.defaultProps,{isOpen:!1,appear:!1,enter:!0,exit:!0,tag:"div",timeout:re.Collapse}),kr=(U(wr={},oe.ENTERING,"collapsing"),U(wr,oe.ENTERED,"collapse show"),U(wr,oe.EXITING,"collapsing"),U(wr,oe.EXITED,"collapse"),wr);function Ir(e){return e.scrollHeight}var xr=function(e){function t(e){L(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={height:null},["onEntering","onEntered","onExit","onExiting","onExited"].forEach(function(e){n[e]=n[e].bind(n)}),n}return q(t,e),F(t,[{key:"onEntering",value:function(e,t){this.setState({height:Ir(e)}),this.props.onEntering(e,t)}},{key:"onEntered",value:function(e,t){this.setState({height:null}),this.props.onEntered(e,t)}},{key:"onExit",value:function(e){this.setState({height:Ir(e)}),this.props.onExit(e)}},{key:"onExiting",value:function(e){e.offsetHeight;this.setState({height:0}),this.props.onExiting(e)}},{key:"onExited",value:function(e){this.setState({height:null}),this.props.onExited(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.tag,r=t.isOpen,o=t.className,a=t.navbar,s=t.cssModule,c=t.children,l=(t.innerRef,B(t,["tag","isOpen","className","navbar","cssModule","children","innerRef"])),h=this.state.height,f=$(l,ie),p=X(l,ie);return i.a.createElement(pt,j({},f,{in:r,onEntering:this.onEntering,onEntered:this.onEntered,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}),function(t){var r=function(e){return kr[e]||"collapse"}(t),l=Y(u()(o,r,a&&"navbar-collapse"),s),f=null===h?null:{height:h};return i.a.createElement(n,j({},p,{style:j({},p.style,f),className:l,ref:e.props.innerRef}),c)})}}]),t}(r.Component);xr.propTypes=Sr,xr.defaultProps=Cr;var Nr={tag:a.a.oneOfType([a.a.func,a.a.string]),active:a.a.bool,disabled:a.a.bool,color:a.a.string,action:a.a.bool,className:a.a.any,cssModule:a.a.object},Ar=function(e){e.preventDefault()},Or=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=e.active,a=e.disabled,s=e.action,c=e.color,l=B(e,["className","cssModule","tag","active","disabled","action","color"]),h=Y(u()(t,!!o&&"active",!!a&&"disabled",!!s&&"list-group-item-action",!!c&&"list-group-item-"+c,"list-group-item"),n);return a&&(l.onClick=Ar),i.a.createElement(r,j({},l,{className:h}))};Or.propTypes=Nr,Or.defaultProps={tag:"li"};var Dr={tag:a.a.oneOfType([a.a.func,a.a.string]),className:a.a.any,cssModule:a.a.object},Rr=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=B(e,["className","cssModule","tag"]),a=Y(u()(t,"list-group-item-heading"),n);return i.a.createElement(r,j({},o,{className:a}))};Rr.propTypes=Dr,Rr.defaultProps={tag:"h5"};var Pr={tag:a.a.oneOfType([a.a.func,a.a.string]),className:a.a.any,cssModule:a.a.object},Mr=function(e){var t=e.className,n=e.cssModule,r=e.tag,o=B(e,["className","cssModule","tag"]),a=Y(u()(t,"list-group-item-text"),n);return i.a.createElement(r,j({},o,{className:a}))};Mr.propTypes=Pr,Mr.defaultProps={tag:"p"};(function(e){function t(e){L(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isOpen:!0},n.toggle=n.toggle.bind(n),n}q(t,e),F(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return i.a.createElement(Tr,j({isOpen:this.state.isOpen,toggle:this.toggle},this.props))}}])})(r.Component),function(e){function t(e){L(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isOpen:!1},n.toggle=n.toggle.bind(n),n}q(t,e),F(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return i.a.createElement(Ye,j({isOpen:this.state.isOpen,toggle:this.toggle},this.props))}}])}(r.Component);var Lr={toggler:a.a.string.isRequired,toggleEvents:a.a.arrayOf(a.a.string)},Fr={toggleEvents:pe},Ur=function(e){function t(e){L(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.togglers=null,n.removeEventListeners=null,n.toggle=n.toggle.bind(n),n.state={isOpen:!1},n}return q(t,e),F(t,[{key:"componentDidMount",value:function(){this.togglers=le(this.props.toggler),this.togglers.length&&(this.removeEventListeners=de(this.togglers,this.toggle,this.props.toggleEvents))}},{key:"componentWillUnmount",value:function(){this.togglers.length&&this.removeEventListeners&&this.removeEventListeners()}},{key:"toggle",value:function(e){this.setState(function(e){return{isOpen:!e.isOpen}}),e.preventDefault()}},{key:"render",value:function(){var e=this.props,t=(e.toggleEvents,B(e,["toggleEvents"]));return i.a.createElement(xr,j({isOpen:this.state.isOpen},t))}}]),t}(r.Component);Ur.propTypes=Lr,Ur.defaultProps=Fr;var jr=function(e){function t(e){L(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isOpen:!1},n.toggle=n.toggle.bind(n),n}return q(t,e),F(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return i.a.createElement(je,j({isOpen:this.state.isOpen,toggle:this.toggle},this.props))}}]),t}(r.Component),qr=function(e){function t(e){L(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isOpen:!1},n.toggle=n.toggle.bind(n),n}return q(t,e),F(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return i.a.createElement(Dn,j({isOpen:this.state.isOpen,toggle:this.toggle},this.props))}}]),t}(r.Component)},function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var a=i.apply(null,r);a&&e.push(a)}else if("object"===o)for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(1),u=n(0),c=[],l=[];function h(e){var t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then(function(e){return n.loading=!1,n.loaded=e,e}).catch(function(e){throw n.loading=!1,n.error=e,e}),n}function f(e){var t={loading:!1,loaded:{},error:null},n=[];try{Object.keys(e).forEach(function(r){var i=h(e[r]);i.loading?t.loading=!0:(t.loaded[r]=i.loaded,t.error=i.error),n.push(i.promise),i.promise.then(function(e){t.loaded[r]=e}).catch(function(e){t.error=e})})}catch(r){t.error=r}return t.promise=Promise.all(n).then(function(e){return t.loading=!1,e}).catch(function(e){throw t.loading=!1,e}),t}function p(e,t){return s.createElement((n=e)&&n.__esModule?n.default:n,t);var n}function d(e,t){var h,f;if(!t.loading)throw new Error("react-loadable requires a `loading` component");var d=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:p,webpack:null,modules:null},t),m=null;function y(){return m||(m=e(d.loader)),m.promise}return c.push(y),"function"===typeof d.webpack&&l.push(function(){if(e=d.webpack,"object"===r(n.m)&&e().every(function(e){return"undefined"!==typeof e&&"undefined"!==typeof n.m[e]}))return y();var e}),f=h=function(t){function n(r){i(this,n);var a=o(this,t.call(this,r));return a.retry=function(){a.setState({error:null,loading:!0,timedOut:!1}),m=e(d.loader),a._loadModule()},y(),a.state={error:m.error,pastDelay:!1,timedOut:!1,loading:m.loading,loaded:m.loaded},a}return a(n,t),n.preload=function(){return y()},n.prototype.componentWillMount=function(){this._mounted=!0,this._loadModule()},n.prototype._loadModule=function(){var e=this;if(this.context.loadable&&Array.isArray(d.modules)&&d.modules.forEach(function(t){e.context.loadable.report(t)}),m.loading){"number"===typeof d.delay&&(0===d.delay?this.setState({pastDelay:!0}):this._delay=setTimeout(function(){e.setState({pastDelay:!0})},d.delay)),"number"===typeof d.timeout&&(this._timeout=setTimeout(function(){e.setState({timedOut:!0})},d.timeout));var t=function(){e._mounted&&(e.setState({error:m.error,loaded:m.loaded,loading:m.loading}),e._clearTimeouts())};m.promise.then(function(){t()}).catch(function(e){t()})}},n.prototype.componentWillUnmount=function(){this._mounted=!1,this._clearTimeouts()},n.prototype._clearTimeouts=function(){clearTimeout(this._delay),clearTimeout(this._timeout)},n.prototype.render=function(){return this.state.loading||this.state.error?s.createElement(d.loading,{isLoading:this.state.loading,pastDelay:this.state.pastDelay,timedOut:this.state.timedOut,error:this.state.error,retry:this.retry}):this.state.loaded?d.render(this.state.loaded,this.props):null},n}(s.Component),h.contextTypes={loadable:u.shape({report:u.func.isRequired})},f}function m(e){return d(h,e)}m.Map=function(e){if("function"!==typeof e.render)throw new Error("LoadableMap requires a `render(loaded, props)` function");return d(f,e)};var y=function(e){function t(){return i(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.getChildContext=function(){return{loadable:{report:this.props.report}}},t.prototype.render=function(){return s.Children.only(this.props.children)},t}(s.Component);function g(e){for(var t=[];e.length;){var n=e.pop();t.push(n())}return Promise.all(t).then(function(){if(e.length)return g(e)})}y.propTypes={report:u.func.isRequired},y.childContextTypes={loadable:u.shape({report:u.func.isRequired}).isRequired},m.Capture=y,m.preloadAll=function(){return new Promise(function(e,t){g(c).then(e,t)})},m.preloadReady=function(){return new Promise(function(e,t){g(l).then(e,e)})},e.exports=m},function(e,t,n){"use strict";var r=n(1),i=n.n(r),o=n(0),a=n.n(o),s=n(3),u=n.n(s),c=["sidebar-show","sidebar-sm-show","sidebar-md-show","sidebar-lg-show","sidebar-xl-show"],l=["aside-menu-show","aside-menu-sm-show","aside-menu-md-show","aside-menu-lg-show","aside-menu-xl-show"],h=["sm","md","lg","xl"];function f(e,t){return t.indexOf(e)>-1}function p(e,t,n){var r=t.indexOf(e);return t.slice(0,r).map(function(e){return document.body.classList.remove(e)}),!0===n?document.body.classList.add(e):!1===n?document.body.classList.remove(e):document.body.classList.toggle(e),document.body.classList.contains(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var y=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).isFixed=n.isFixed.bind(m(n)),n.isOffCanvas=n.isOffCanvas.bind(m(n)),n.displayBreakpoint=n.displayBreakpoint.bind(m(n)),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){this.isFixed(this.props.fixed),this.isOffCanvas(this.props.offCanvas),this.displayBreakpoint(this.props.display)},o.isFixed=function(e){e&&document.body.classList.add("aside-menu-fixed")},o.isOffCanvas=function(e){e&&document.body.classList.add("aside-menu-off-canvas")},o.displayBreakpoint=function(e){e&&f(e,h)&&p("aside-menu-"+e+"-show",l,!0)},o.render=function(){var e=this.props,t=e.className,n=e.children,r=e.tag,o=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["className","children","tag"]);delete o.display,delete o.fixed,delete o.offCanvas,delete o.isOpen;var a=u()(t,"aside-menu");return i.a.createElement(r,d({},o,{className:a}),n)},r}(r.Component);y.propTypes={},y.defaultProps={tag:"aside",display:"",fixed:!1,isOpen:!1,offCanvas:!0};var g=y;function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var b=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).asideToggle=n.asideToggle.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n.state={},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){this.toggle(this.props.defaultOpen)},o.toggle=function(e){var t=[this.props.display,this.props.mobile],n=t[0],r=l[0];!t[1]&&n&&f(n,h)&&(r="aside-menu-"+n+"-show"),p(r,l,e)},o.asideToggle=function(e){e.preventDefault(),this.toggle()},o.render=function(){var e=this,t=this.props,n=t.className,r=t.children,o=t.type,a=t.tag,s=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["className","children","type","tag"]);delete s.defaultOpen,delete s.display,delete s.mobile;var c=u()(n,"navbar-toggler");return i.a.createElement(a,v({type:o,className:c},s,{onClick:function(t){return e.asideToggle(t)}}),r||i.a.createElement("span",{className:"navbar-toggler-icon"}))},r}(r.Component);b.propTypes={},b.defaultProps={defaultOpen:!1,display:"lg",mobile:!1,tag:"button",type:"button"};var w=n(54).a,_=n(23),E=n.n(_),T=n(30),S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var k=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},I=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=C(this,e.call.apply(e,[this].concat(o))),r.handleClick=function(e){if(r.props.onClick&&r.props.onClick(e),!e.defaultPrevented&&0===e.button&&!r.props.target&&!k(e)){e.preventDefault();var t=r.context.router.history,n=r.props,i=n.replace,o=n.to;i?t.replace(o):t.push(o)}},C(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["replace","to","innerRef"]);E()(this.context.router,"You should not use <Link> outside a <Router>"),E()(void 0!==t,'You must specify the "to" property');var o=this.context.router.history,a="string"===typeof t?Object(T.c)(t,null,null,o.location):t,s=o.createHref(a);return i.a.createElement("a",S({},r,{onClick:this.handleClick,href:s,ref:n}))},t}(i.a.Component);I.propTypes={onClick:a.a.func,target:a.a.string,replace:a.a.bool,to:a.a.oneOfType([a.a.string,a.a.object]).isRequired,innerRef:a.a.oneOfType([a.a.string,a.a.func])},I.defaultProps={replace:!1},I.contextTypes={router:a.a.shape({history:a.a.shape({push:a.a.func.isRequired,replace:a.a.func.isRequired,createHref:a.a.func.isRequired}).isRequired}).isRequired};var x,N=I,A=n(187),O=n(2);function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var R=function(e){var t=e.match,n=function(e){var t=x.find(function(t){return w(e,{path:t.path,exact:t.exact})});return t&&t.name?t.name:null}(t.url);return n?t.isExact?i.a.createElement(O.d,{active:!0},n):i.a.createElement(O.d,null,i.a.createElement(N,{to:t.url||""},n)):null};R.propTypes={};var P=function(e){var t=function(e){var t=["/"];return"/"===e?t:(e.split("/").reduce(function(e,n){var r=e+"/"+n;return t.push(r),r}),t)}(e.location.pathname).map(function(e,t){return i.a.createElement(A.a,{key:t.toString(),path:e,component:R})});return i.a.createElement(O.c,null,t)},M=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).state={routes:t.appRoutes},x=n.state.routes,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.className,n=e.tag,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["className","tag"]);delete r.children,delete r.appRoutes;var o=u()(t);return i.a.createElement(n,{className:o},i.a.createElement(A.a,D({path:"/:path",component:P},r)))},r}(r.Component);M.propTypes={},M.defaultProps={tag:"div",className:"",appRoutes:[{path:"/",exact:!0,name:"Home",component:null}]};var L,F,U=M;function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var q=function(e){var t=e.match,n=function(e){var t=F.matchPath,n=L.find(function(n){return t(e,{path:n.path,exact:n.exact})});return n&&n.name?n.name:null}(t.url),r=F.Link;return n?t.isExact?i.a.createElement(O.d,{active:!0},n):i.a.createElement(O.d,null,i.a.createElement(r,{to:t.url||""},n)):null};q.propTypes={};var B=function(e){var t=F.Route,n=function(e){var t=["/"];return"/"===e?t:(e.split("/").reduce(function(e,n){var r=e+"/"+n;return t.push(r),r}),t)}(e.location.pathname).map(function(e,n){return i.a.createElement(t,{key:n.toString(),path:e,component:q})});return i.a.createElement(O.c,null,n)},V=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).state={routes:t.appRoutes},L=n.state.routes,F=t.router,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.className,n=e.tag,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["className","tag"]);delete r.children,delete r.appRoutes,delete r.router;var o=u()(t),a=F.Route;return i.a.createElement(n,{className:o},i.a.createElement(a,j({path:"/:path",component:B},r)))},r}(r.Component);V.propTypes={},V.defaultProps={tag:"div",className:"",appRoutes:[{path:"/",exact:!0,name:"Home",component:null}]};function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var z=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).isFixed=n.isFixed.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){this.isFixed(this.props.fixed)},o.isFixed=function(e){e&&document.body.classList.add("footer-fixed")},o.render=function(){var e=this.props,t=e.className,n=e.children,r=e.tag,o=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["className","children","tag"]);delete o.fixed;var a=u()(t,"app-footer");return i.a.createElement(r,W({className:a},o),n)},r}(r.Component);z.propTypes={},z.defaultProps={tag:"footer",fixed:!1};var H=z;function K(){return(K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Q=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){this.isFixed(this.props.fixed)},o.isFixed=function(e){e&&document.body.classList.add("header-fixed")},o.render=function(){var e=this.props,t=e.className,n=e.children,r=e.tag,o=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["className","children","tag"]);delete o.fixed;var a=u()(t,"app-header","navbar");return i.a.createElement(r,K({className:a},o),n)},r}(r.Component);Q.propTypes={},Q.defaultProps={tag:"header",fixed:!1};var G=Q;function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var X=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).toggle=n.toggle.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n.state={dropdownOpen:!1},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.toggle=function(){this.setState({dropdownOpen:!this.state.dropdownOpen})},o.render=function(){var e=this.props,t=e.children,n=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["children"]);return i.a.createElement(O.y,Y({nav:!0,isOpen:this.state.dropdownOpen,toggle:this.toggle},n),t)},r}(r.Component);X.propTypes={},X.defaultProps={direction:"down"};function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var J=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.imgSrc=function(e){return e.src?e.src:""},o.imgWidth=function(e){return e.width?e.width:"auto"},o.imgHeight=function(e){return e.height?e.height:"auto"},o.imgAlt=function(e){return e.alt?e.alt:""},o.navbarBrandImg=function(e,t,n){return i.a.createElement("img",{src:this.imgSrc(e),width:this.imgWidth(e),height:this.imgHeight(e),alt:this.imgAlt(e),className:t,key:n.toString()})},o.render=function(){var e=this.props,t=e.className,n=e.children,r=e.tag,o=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["className","children","tag"]),a=u()(t,"navbar-brand"),s=[];if(this.props.brand){var c=this.props.brand;s.push(this.navbarBrandImg(c,"navbar-brand",s.length+1))}if(this.props.full){var l=this.props.full;s.push(this.navbarBrandImg(l,"navbar-brand-full",s.length+1))}if(this.props.minimized){var h=this.props.minimized;s.push(this.navbarBrandImg(h,"navbar-brand-minimized",s.length+1))}return i.a.createElement(r,$({},o,{className:a}),n||s)},r}(r.Component);J.propTypes={},J.defaultProps={tag:"a"};var Z=J,ee=n(184),te=n.n(ee);n(295);var ne,re,ie,oe=function(){function e(){}return e.sidebarToggle=function(e){var t=arguments.length?e:!this.elClassList.contains("sidebar-minimized");this.sidebarMinimize(t),this.brandMinimize(t),this.sidebarPSToggle(!t)},e.sidebarMinimize=function(e){return this.toggleClass("sidebar-minimized",e)},e.brandMinimize=function(e){this.toggleClass("brand-minimized",e)},e.sidebarPSToggle=function(e){this.isOnMobile()?e=!0:e=!(document.body.classList.contains("sidebar-minimized")||!1);var t={y:{rail:{},thumb:{}}},n="rtl"===getComputedStyle(document.documentElement).direction,r=document.querySelector(".sidebar-nav");t.y.rail.on=document.querySelector(".sidebar-nav .ps__rail-y"),t.y.rail.off=document.querySelector(".sidebar-nav .ps__rail-y-off"),t.y.thumb.on=document.querySelector(".sidebar-nav .ps__thumb-y"),t.y.thumb.off=document.querySelector(".sidebar-nav .ps__thumb-y-off"),r&&(e?(r.classList.add("ps"),r.classList.add("ps-container"),r.classList.add("ps--active-y"),t.y.rail.off&&(t.y.rail.off.classList.add("ps__rail-y"),t.y.rail.off.removeAttribute("style"),t.y.rail.off.style.left=n?"0px":"unset",t.y.rail.off.style.right=n?"unset":"0px",t.y.rail.off.classList.remove("ps__rail-y-off")),t.y.thumb.off&&(t.y.thumb.off.removeAttribute("style"),t.y.thumb.off.classList.add("ps__thumb-y"),t.y.thumb.off.classList.remove("ps__thumb-y-off"))):(t.y.rail.on&&(t.y.rail.on.classList.add("ps__rail-y-off"),t.y.rail.on.removeAttribute("style"),t.y.rail.on.classList.remove("ps__rail-y")),t.y.thumb.on&&(t.y.thumb.on.classList.add("ps__thumb-y-off"),t.y.thumb.on.removeAttribute("style"),t.y.thumb.on.classList.remove("ps__thumb-y")),r.classList.remove("ps"),r.classList.remove("ps-container"),r.classList.remove("ps--active-y")))},e.toggleClass=function(e,t){return!0===t?this.elClassList.add(e):!1===t?this.elClassList.remove(e):this.elClassList.toggle(e),this.elClassList.contains(e)},e.isOnMobile=function(){var e=!1;try{var t=document.querySelector(".sidebar-minimizer");if(t)e="none"===getComputedStyle(t).getPropertyValue("display");else{var n=document.querySelector(".sidebar .sidebar-nav");n&&(e="auto"===getComputedStyle(n).getPropertyValue("overflow-y"))}}catch(r){console.warn("CoreUI isOnMobile failed to getComputedStyle",r)}return e},e}();ne=oe,re="elClassList",ie=document.body.classList,re in ne?Object.defineProperty(ne,re,{value:ie,enumerable:!0,configurable:!0,writable:!0}):ne[re]=ie;var ae=oe;function se(){return(se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ce=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).isCompact=n.isCompact.bind(ue(n)),n.isFixed=n.isFixed.bind(ue(n)),n.isMinimized=n.isMinimized.bind(ue(n)),n.isOffCanvas=n.isOffCanvas.bind(ue(n)),n.displayBreakpoint=n.displayBreakpoint.bind(ue(n)),n.hideMobile=n.hideMobile.bind(ue(n)),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){this.displayBreakpoint(this.props.display),this.isCompact(this.props.compact),this.isFixed(this.props.fixed),this.isMinimized(this.props.minimized),this.isOffCanvas(this.props.offCanvas)},o.isCompact=function(e){e&&document.body.classList.add("sidebar-compact")},o.isFixed=function(e){e&&document.body.classList.add("sidebar-fixed")},o.isMinimized=function(e){ae.sidebarToggle(e)},o.isOffCanvas=function(e){e&&document.body.classList.add("sidebar-off-canvas")},o.displayBreakpoint=function(e){var t="sidebar-"+e+"-show",n=c[0][0];e&&c.indexOf(t)>-1&&(n=t),document.body.classList.add(n)},o.hideMobile=function(){document.body.classList.contains("sidebar-show")&&document.body.classList.remove("sidebar-show")},o.onClickOut=function(e){"undefined"!==typeof window&&document.body.classList.contains("sidebar-show")&&(e.target.closest("[data-sidebar-toggler]")||this.hideMobile())},o.render=function(){var e=this,t=this.props,n=t.className,r=t.children,o=t.tag,a=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["className","children","tag"]);delete a.compact,delete a.display,delete a.fixed,delete a.minimized,delete a.offCanvas,delete a.isOpen,delete a.staticContext;var s=u()(n,"sidebar");return i.a.createElement(te.a,{onClickOut:function(t){e.onClickOut(t)}},i.a.createElement(o,se({className:s},a),r))},r}(r.Component);ce.propTypes={},ce.defaultProps={tag:"div",compact:!1,display:"",fixed:!1,minimized:!1,isOpen:!1,offCanvas:!1};var le=ce;function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var fe=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.className,n=e.children,r=e.tag,o=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["className","children","tag"]),a=u()(t,"sidebar-footer");return n?i.a.createElement(r,he({className:a},o),n):null},r}(r.Component);fe.propTypes={},fe.defaultProps={tag:"div"};var pe=fe;function de(){return(de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var me=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.className,n=e.children,r=e.tag,o=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["className","children","tag"]),a=u()(t,"sidebar-form");return n?i.a.createElement(r,de({className:a},o),n):null},r}(r.Component);me.propTypes={},me.defaultProps={tag:"div"};var ye=me;function ge(){return(ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ve=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.className,n=e.children,r=e.tag,o=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["className","children","tag"]),a=u()(t,"sidebar-header");return n?i.a.createElement(r,ge({className:a},o),n):null},r}(r.Component);ve.propTypes={},ve.defaultProps={tag:"div"};var be=ve;function we(){return(we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var _e=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).handleClick=n.handleClick.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){var e=document.body.classList.contains("sidebar-minimized");ae.sidebarPSToggle(!e)},o.handleClick=function(){ae.sidebarToggle()},o.render=function(){var e=this,t=this.props,n=t.className,r=t.children,o=t.tag,a=t.type,s=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["className","children","tag","type"]),c=u()(n,"sidebar-minimizer","mt-auto");return i.a.createElement(o,we({className:c,type:a},s,{onClick:function(t){return e.handleClick(t)}}),r)},r}(r.Component);_e.propTypes={},_e.defaultProps={tag:"button",type:"button"};var Ee=_e,Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var Ce=function(e){var t=e.to,n=e.exact,r=e.strict,o=e.location,a=e.activeClassName,s=e.className,u=e.activeStyle,c=e.style,l=e.isActive,h=e["aria-current"],f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","aria-current"]),p="object"===("undefined"===typeof t?"undefined":Se(t))?t.pathname:t,d=p&&p.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1");return i.a.createElement(A.a,{path:d,exact:n,strict:r,location:o,children:function(e){var n=e.location,r=e.match,o=!!(l?l(r,n):r);return i.a.createElement(N,Te({to:t,className:o?[s,a].filter(function(e){return e}).join(" "):s,style:o?Te({},c,u):c,"aria-current":o&&h||null},f))}})};Ce.propTypes={to:N.propTypes.to,exact:a.a.bool,strict:a.a.bool,location:a.a.object,activeClassName:a.a.string,className:a.a.string,activeStyle:a.a.object,style:a.a.object,isActive:a.a.func,"aria-current":a.a.oneOf(["page","step","location","date","time","true"])},Ce.defaultProps={activeClassName:"active","aria-current":"page"};var ke=Ce,Ie=n(87),xe=n.n(Ie);n(178);function Ne(){return(Ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Oe=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).handleClick=n.handleClick.bind(Ae(n)),n.activeRoute=n.activeRoute.bind(Ae(n)),n.hideMobile=n.hideMobile.bind(Ae(n)),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.handleClick=function(e){e.preventDefault(),e.currentTarget.parentElement.classList.toggle("open")},o.activeRoute=function(e,t){return t.location.pathname.indexOf(e)>-1?"nav-item nav-dropdown open":"nav-item nav-dropdown"},o.hideMobile=function(){document.body.classList.contains("sidebar-show")&&document.body.classList.toggle("sidebar-show")},o.navList=function(e){var t=this;return e.map(function(e,n){return t.navType(e,n)})},o.navType=function(e,t){return e.title?this.navTitle(e,t):e.divider?this.navDivider(e,t):e.label?this.navLabel(e,t):e.children?this.navDropdown(e,t):this.navItem(e,t)},o.navTitle=function(e,t){var n=u()("nav-title",e.class);return i.a.createElement("li",{key:t,className:n},this.navWrapper(e)," ")},o.navWrapper=function(e){return e.wrapper&&e.wrapper.element?i.a.createElement(e.wrapper.element,e.wrapper.attributes,e.name):e.name},o.navDivider=function(e,t){var n=u()("divider",e.class);return i.a.createElement("li",{key:t,className:n})},o.navLabel=function(e,t){var n={item:u()("hidden-cn",e.class),link:u()("nav-label",e.class?e.class:""),icon:u()("nav-icon",e.icon?e.icon:"fa fa-circle",e.label.variant?"text-"+e.label.variant:"",e.label.class?e.label.class:"")};return this.navLink(e,t,n)},o.navDropdown=function(e,t){var n=u()("nav-icon",e.icon),r=JSON.parse(JSON.stringify(e.attributes||{})),o=u()("nav-link","nav-dropdown-toggle",e.class,r.class);return delete r.class,i.a.createElement("li",{key:t,className:this.activeRoute(e.url,this.props)},i.a.createElement("a",Ne({className:o,href:"#",onClick:this.handleClick},r),i.a.createElement("i",{className:n}),e.name,this.navBadge(e.badge)),i.a.createElement("ul",{className:"nav-dropdown-items"},this.navList(e.children)))},o.navItem=function(e,t){var n={item:u()(e.class),link:u()("nav-link",e.variant?"nav-link-"+e.variant:""),icon:u()("nav-icon",e.icon)};return this.navLink(e,t,n)},o.navLink=function(e,t,n){var r=e.url||"",o=i.a.createElement("i",{className:n.icon}),a=this.navBadge(e.badge),s=e.attributes||{};return i.a.createElement(O.W,{key:t,className:n.item},s.disabled?i.a.createElement(O.X,Ne({href:"",className:n.link},s),o,e.name,a):this.isExternal(r)?i.a.createElement(O.X,Ne({href:r,className:n.link,active:!0},s),o,e.name,a):i.a.createElement(ke,Ne({to:r,className:n.link,activeClassName:"active",onClick:this.hideMobile},s),o,e.name,a))},o.navBadge=function(e){if(e){var t=u()(e.class);return i.a.createElement(O.b,{className:t,color:e.variant},e.text)}return null},o.isExternal=function(e){return"http"===(e?e.substring(0,4):"")},o.render=function(){var e=this.props,t=e.className,n=e.children,r=e.navConfig,o=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["className","children","navConfig"]);delete o.isOpen,delete o.staticContext,delete o.Tag;var a=u()(t,"sidebar-nav"),s="rtl"===getComputedStyle(document.documentElement).direction;return i.a.createElement(xe.a,Ne({className:a},o,{options:{suppressScrollX:!s}}),i.a.createElement(O.V,null,n||this.navList(r.items)))},r}(r.Component);Oe.propTypes={},Oe.defaultProps={tag:"nav",navConfig:{items:[{name:"Dashboard",url:"/dashboard",icon:"icon-speedometer",badge:{variant:"info",text:"NEW"}}]},isOpen:!1};var De=Oe;n(298);function Re(){return(Re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Me={tag:"nav",navConfig:{items:[{name:"Dashboard",url:"/dashboard",icon:"icon-speedometer",badge:{variant:"info",text:"NEW"}}]},isOpen:!1,router:{RsNavLink:O.X}},Le=function(e){var t,n;function r(t){var n,r,i,o;return n=e.call(this,t)||this,r=Pe(n),o=null,(i="_scrollBarRef")in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,n.handleClick=n.handleClick.bind(Pe(n)),n.activeRoute=n.activeRoute.bind(Pe(n)),n.hideMobile=n.hideMobile.bind(Pe(n)),n.changes=null,n.state={sidebarMinimized:!1},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.handleClick=function(e,t){t.attributes&&"function"===typeof t.attributes.onClick&&!this.isActiveRoute(t.url,this.props)?t.attributes.onClick(e,t):e.preventDefault(),e.currentTarget.parentElement.classList.toggle("open")},o.isActiveRoute=function(e,t){return t.location.pathname.indexOf(e)>-1},o.activeRoute=function(e,t){return this.isActiveRoute(e,t)?"nav-item nav-dropdown open":"nav-item nav-dropdown"},o.hideMobile=function(){document.body.classList.contains("sidebar-show")&&document.body.classList.toggle("sidebar-show")},o.getAttribs=function(e){return Re({},e)},o.navList=function(e){var t=this;return e.map(function(e,n){return t.navType(e,n)})},o.navType=function(e,t){return e.title?this.navTitle(e,t):e.divider?this.navDivider(e,t):e.label?this.navLabel(e,t):e.children?this.navDropdown(e,t):this.navItem(e,t)},o.navTitle=function(e,t){var n=u()("nav-title",e.class,e.className);return i.a.createElement("li",{key:t,className:n},this.navWrapper(e)," ")},o.navWrapper=function(e){return e.wrapper&&e.wrapper.element?i.a.createElement(e.wrapper.element,e.wrapper.attributes,e.name):e.name},o.navDivider=function(e,t){var n=u()("divider",e.class,e.className);return i.a.createElement("li",{key:t,className:n})},o.navLabel=function(e,t){var n={item:u()("hidden-cn",e.class),link:u()("nav-label",e.class?e.class:""),icon:u()("nav-icon",e.icon?e.icon:"fa fa-circle",e.label.variant?"text-"+e.label.variant:"",e.label.class?e.label.class:"")};return this.navLink(e,t,n)},o.navDropdown=function(e,t){var n=this,r=this.navIcon(e),o=this.getAttribs(e.attributes),a=u()("nav-link","nav-dropdown-toggle",e.class,o.class,o.className);delete o.class,delete o.className;var s=this.getAttribs(e.itemAttr),c=u()("nav-item","nav-dropdown",s.class,s.className);delete s.class,delete s.className;var l=this.props.router.NavLink||O.X;return i.a.createElement("li",Re({key:t,className:u()(c,{open:this.isActiveRoute(e.url,this.props)})},s),i.a.createElement(l,Re({activeClassName:"open",className:a,to:e.url||""},o,{onClick:function(t){return n.handleClick(t,e)}}),r,e.name,this.navBadge(e.badge)),i.a.createElement("ul",{className:"nav-dropdown-items"},this.navList(e.children)))},o.navItem=function(e,t){var n={item:u()(e.class),link:u()("nav-link",e.variant?"nav-link-"+e.variant:""),icon:u()("nav-icon",e.icon)};return this.navLink(e,t,n)},o.navIcon=function(e){var t=e.icon,n="object"===typeof t&&null!==t?Re({iconClass:t.class,iconClassName:t.className},t):{iconClass:t},r=n.iconClass,o=n.iconClassName,a=n.innerText,s=n.img,c=Re({},n.attributes);delete c.class,delete c.className,delete c.img;var l=s&&s.src?s:null,h=a||null,f=u()("nav-icon",r,o);return l?i.a.createElement("img",Re({},c,{className:f,src:l.src})):i.a.createElement("i",Re({},c,{className:f}),h)},o.navLink=function(e,t,n){var r=this,o=i.a.createRef(),a=e.url||"",s=this.navIcon(e),c=this.navBadge(e.badge),l=this.getAttribs(e.attributes);n.link=u()(n.link,l.class,l.className),delete l.class,delete l.className;var h=this.getAttribs(e.itemAttr);n.item=u()(n.item,h.class,h.className),delete h.class,delete h.className;var f=this.props.router.NavLink||O.X;return i.a.createElement(O.W,Re({key:t,className:n.item},h),l.disabled?i.a.createElement(O.X,Re({href:"",className:n.link},l),s,e.name,c):this.isExternal(a,this.props)||f===O.X?i.a.createElement(O.X,Re({href:a,className:n.link,active:!0},l),s,e.name,c):i.a.createElement(f,Re({to:a,className:n.link,activeClassName:"active",onClick:function(){return r.hideMobile(o)},ref:o},l),s,e.name,c))},o.navBadge=function(e){if(e){var t=u()(e.class,e.className);return i.a.createElement(O.b,{className:t,color:e.variant},e.text)}return null},o.isExternal=function(e,t){var n=typeof e;return"http"===("string"===n?e:"object"===n&&e.pathname?e.pathname:"function"===n&&"string"===typeof e(t.location)?e(t.location):"function"===n&&"object"===typeof e(t.location)?e(t.location).pathname:"").substring(0,4)},o.observeDomMutations=function(){var e=this;if(window.MutationObserver){this.changes=new MutationObserver(function(t){var n=document.body.classList.contains("sidebar-minimized")||!1;e.setState({sidebarMinimized:n}),ae.sidebarPSToggle(!n)});var t=document.body;this.changes.observe(t,{attributes:!0,attributeFilter:["class"]})}window.addEventListener("resize",this.onResize)},o.onResize=function(){ae.sidebarPSToggle(!0)},o.componentDidMount=function(){this.observeDomMutations()},o.componentWillUnmount=function(){try{this.changes.disconnect(),window.removeEventListener("resize",this.onResize)}catch(e){console.warn("CoreUI SidebarNav failed to disconnect from MutationObserver",e)}},o.render=function(){var e=this,t=this.props,n=t.className,r=t.children,o=t.navConfig,a=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["className","children","navConfig"]);delete a.isOpen,delete a.staticContext,delete a.Tag,delete a.router;var s=u()(n,"sidebar-nav"),c=Object.assign({},{suppressScrollX:!0,suppressScrollY:this.state.sidebarMinimized});return i.a.createElement(xe.a,Re({className:s},a,{options:c,ref:function(t){e._scrollBarRef=t}}),i.a.createElement(O.V,null,r||this.navList(o.items)))},r}(r.Component);Le.propTypes={},Le.defaultProps=Me;function Fe(){return(Fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Ue=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).sidebarToggle=n.sidebarToggle.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.sidebarToggle=function(e){e.preventDefault(),this.toggle()},o.toggle=function(e){var t=[this.props.display,this.props.mobile],n=t[0],r=t[1],i=c[0];!r&&n&&f(n,h)&&(i="sidebar-"+n+"-show"),p(i,c,e)},o.render=function(){var e=this,t=this.props,n=t.className,r=t.children,o=t.tag,a=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["className","children","tag"]);delete a.mobile,delete a.display;var s=u()(n,"navbar-toggler");return i.a.createElement(o,Fe({type:"button",className:s},a,{onClick:function(t){return e.sidebarToggle(t)},"data-sidebar-toggler":!0}),r||i.a.createElement("span",{className:"navbar-toggler-icon"}))},r}(r.Component);Ue.propTypes={},Ue.defaultProps={display:"lg",mobile:!1,tag:"button",type:"button"};var je=Ue;function qe(){return(qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Ve={color:"secondary",label:!1,outline:!1,size:"",checked:!1,defaultChecked:void 0,disabled:void 0,required:void 0,type:"checkbox",variant:"",dataOn:"On",dataOff:"Off"},We=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).handleChange=n.handleChange.bind(Be(n)),n.handleKeyDown=n.handleKeyDown.bind(Be(n)),n.handleKeyUp=n.handleKeyUp.bind(Be(n)),n.state={uncontrolled:!!n.props.defaultChecked,checked:n.props.defaultChecked||n.props.checked,selected:[]},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.toggleState=function(e){this.setState({checked:e})},o.handleChange=function(e){var t=e.target;this.toggleState(t.checked),this.props.onChange&&this.props.onChange(e)},o.handleKeyDown=function(e){" "===e.key&&e.preventDefault()},o.handleKeyUp=function(e){"Enter"!==e.key&&" "!==e.key||this.toggleState(!this.state.checked)},o.componentDidUpdate=function(e,t){this.state.uncontrolled||this.props.checked===t.checked||this.toggleState(this.props.checked)},o.render=function(){var e=this.props,t=e.className,n=e.disabled,r=e.color,o=e.name,a=e.label,s=e.outline,c=e.size,l=e.required,h=e.type,f=e.value,p=e.dataOn,d=e.dataOff,m=e.variant,y=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["className","disabled","color","name","label","outline","size","required","type","value","dataOn","dataOff","variant"]),g=y.tabIndex;delete y.tabIndex,delete y.checked,delete y.defaultChecked,delete y.onChange;var v=u()(t,"switch",!!a&&"switch-label",!!c&&"switch-"+c,!!m&&"switch-"+m,"switch"+(s?"-outline":"")+"-"+r+("alt"===s?"-alt":""),"form-check-label"),b=u()("switch-input","form-check-input"),w=u()("switch-slider");return i.a.createElement("label",{className:v,tabIndex:g,onKeyUp:this.handleKeyUp,onKeyDown:this.handleKeyDown},i.a.createElement("input",qe({type:h,className:b,onChange:this.handleChange,checked:this.state.checked,name:o,required:l,disabled:n,value:f,"aria-checked":this.state.checked,"aria-disabled":n,"aria-readonly":n},y)),i.a.createElement("span",{className:w,"data-checked":p,"data-unchecked":d}))},r}(r.Component);We.propTypes={},We.defaultProps=Ve;var ze=We;n.d(t,"a",function(){return g}),n.d(t,"b",function(){return U}),n.d(t,"c",function(){return H}),n.d(t,"d",function(){return G}),n.d(t,"e",function(){return Z}),n.d(t,"f",function(){return le}),n.d(t,"g",function(){return pe}),n.d(t,"h",function(){return ye}),n.d(t,"i",function(){return be}),n.d(t,"j",function(){return Ee}),n.d(t,"k",function(){return De}),n.d(t,"l",function(){return je}),n.d(t,"m",function(){return ze})},function(e,t,n){var r=n(12),i=n(18),o=n(47),a=n(42),s=n(37),u=function e(t,n,u){var c,l,h,f,p=t&e.F,d=t&e.G,m=t&e.P,y=t&e.B,g=d?r:t&e.S?r[n]||(r[n]={}):(r[n]||{}).prototype,v=d?i:i[n]||(i[n]={}),b=v.prototype||(v.prototype={});for(c in d&&(u=n),u)h=((l=!p&&g&&void 0!==g[c])?g:u)[c],f=y&&l?s(h,r):m&&"function"==typeof h?s(Function.call,h):h,g&&a(g,c,h,t&e.U),v[c]!=h&&o(v,c,f),m&&b[c]!=h&&(b[c]=h)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}var o=n(36);function a(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?Object(o.a)(e):t}n.d(t,"a",function(){return a})},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(82)("wks"),i=n(66),o=n(12).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",function(){return r})},function(e,t,n){e.exports=!n(27)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(101)("wks"),i=n(63),o=n(25).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t,n){var r=n(89);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(274)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,a,s],l=0;(u=new Error(t.replace(/%s/g,function(){return c[l++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(e,t,n){var r=n(29),i=n(161),o=n(57),a=Object.defineProperty;t.f=n(15)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){"use strict";var r=n(27);e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){var r=n(73),i=n(89);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(19);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){"use strict";var r=n(14);function i(e){return"/"===e.charAt(0)}function o(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.split("/")||[],r=t&&t.split("/")||[],a=e&&i(e),s=t&&i(t),u=a||s;if(e&&i(e)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var c=void 0;if(r.length){var l=r[r.length-1];c="."===l||".."===l||""===l}else c=!1;for(var h=0,f=r.length;f>=0;f--){var p=r[f];"."===p?o(r,f):".."===p?(o(r,f),h++):h&&(o(r,f),h--)}if(!u)for(;h--;h)r.unshift("..");!u||""===r[0]||r[0]&&i(r[0])||r.unshift("");var d=r.join("/");return c&&"/"!==d.substr(-1)&&(d+="/"),d},s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var u=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every(function(t,r){return e(t,n[r])});var r="undefined"===typeof t?"undefined":s(t);if(r!==("undefined"===typeof n?"undefined":s(n)))return!1;if("object"===r){var i=t.valueOf(),o=n.valueOf();if(i!==t||o!==n)return e(i,o);var a=Object.keys(t),u=Object.keys(n);return a.length===u.length&&a.every(function(r){return e(t[r],n[r])})}return!1},c=!0,l="Invariant failed";var h=function(e,t){if(!e)throw c?new Error(l):new Error(l+": "+(t||""))};function f(e){return"/"===e.charAt(0)?e:"/"+e}function p(e){return"/"===e.charAt(0)?e.substr(1):e}function d(e,t){return function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)}(e,t)?e.substr(t.length):e}function m(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function y(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function g(e,t,n,i){var o;"string"===typeof e?(o=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(o=Object(r.a)({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return n&&(o.key=n),i?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=a(o.pathname,i.pathname)):o.pathname=i.pathname:o.pathname||(o.pathname="/"),o}function v(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&u(e.state,t.state)}function b(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"===typeof e?e(t,n):e;"string"===typeof o?"function"===typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter(function(e){return e!==r})}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach(function(e){return e.apply(void 0,n)})}}}n.d(t,"a",function(){return C}),n.d(t,"b",function(){return A}),n.d(t,"c",function(){return g}),n.d(t,"d",function(){return v});var w=!("undefined"===typeof window||!window.document||!window.document.createElement);function _(e,t){t(window.confirm(e))}var E="popstate",T="hashchange";function S(){try{return window.history.state||{}}catch(e){return{}}}function C(e){void 0===e&&(e={}),w||h(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e,a=o.forceRefresh,s=void 0!==a&&a,u=o.getUserConfirmation,c=void 0===u?_:u,l=o.keyLength,p=void 0===l?6:l,v=e.basename?m(f(e.basename)):"";function C(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return v&&(o=d(o,v)),g(o,r,n)}function k(){return Math.random().toString(36).substr(2,p)}var I=b();function x(e){Object(r.a)(q,e),q.length=t.length,I.notifyListeners(q.location,q.action)}function N(e){(function(e){void 0===e.state&&navigator.userAgent.indexOf("CriOS")})(e)||D(C(e.state))}function A(){D(C(S()))}var O=!1;function D(e){if(O)O=!1,x();else{I.confirmTransitionTo(e,"POP",c,function(t){t?x({action:"POP",location:e}):function(e){var t=q.location,n=P.indexOf(t.key);-1===n&&(n=0);var r=P.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(O=!0,L(i))}(e)})}}var R=C(S()),P=[R.key];function M(e){return v+y(e)}function L(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?(window.addEventListener(E,N),i&&window.addEventListener(T,A)):0===F&&(window.removeEventListener(E,N),i&&window.removeEventListener(T,A))}var j=!1;var q={length:t.length,action:"POP",location:R,createHref:M,push:function(e,r){var i=g(e,r,k(),q.location);I.confirmTransitionTo(i,"PUSH",c,function(e){if(e){var r=M(i),o=i.key,a=i.state;if(n)if(t.pushState({key:o,state:a},null,r),s)window.location.href=r;else{var u=P.indexOf(q.location.key),c=P.slice(0,-1===u?0:u+1);c.push(i.key),P=c,x({action:"PUSH",location:i})}else window.location.href=r}})},replace:function(e,r){var i=g(e,r,k(),q.location);I.confirmTransitionTo(i,"REPLACE",c,function(e){if(e){var r=M(i),o=i.key,a=i.state;if(n)if(t.replaceState({key:o,state:a},null,r),s)window.location.replace(r);else{var u=P.indexOf(q.location.key);-1!==u&&(P[u]=i.key),x({action:"REPLACE",location:i})}else window.location.replace(r)}})},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var t=I.setPrompt(e);return j||(U(1),j=!0),function(){return j&&(j=!1,U(-1)),t()}},listen:function(e){var t=I.appendListener(e);return U(1),function(){U(-1),t()}}};return q}var k="hashchange",I={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+p(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:p,decodePath:f},slash:{encodePath:f,decodePath:f}};function x(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function N(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,t>=0?t:0)+"#"+e)}function A(e){void 0===e&&(e={}),w||h(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),i=n.getUserConfirmation,o=void 0===i?_:i,a=n.hashType,s=void 0===a?"slash":a,u=e.basename?m(f(e.basename)):"",c=I[s],l=c.encodePath,p=c.decodePath;function E(){var e=p(x());return u&&(e=d(e,u)),g(e)}var T=b();function S(e){Object(r.a)(q,e),q.length=t.length,T.notifyListeners(q.location,q.action)}var C=!1,A=null;function O(){var e=x(),t=l(e);if(e!==t)N(t);else{var n=E(),r=q.location;if(!C&&v(r,n))return;if(A===y(n))return;A=null,function(e){if(C)C=!1,S();else{T.confirmTransitionTo(e,"POP",o,function(t){t?S({action:"POP",location:e}):function(e){var t=q.location,n=M.lastIndexOf(y(t));-1===n&&(n=0);var r=M.lastIndexOf(y(e));-1===r&&(r=0);var i=n-r;i&&(C=!0,L(i))}(e)})}}(n)}}var D=x(),R=l(D);D!==R&&N(R);var P=E(),M=[y(P)];function L(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?window.addEventListener(k,O):0===F&&window.removeEventListener(k,O)}var j=!1;var q={length:t.length,action:"POP",location:P,createHref:function(e){return"#"+l(u+y(e))},push:function(e,t){var n=g(e,void 0,void 0,q.location);T.confirmTransitionTo(n,"PUSH",o,function(e){if(e){var t=y(n),r=l(u+t);if(x()!==r){A=t,function(e){window.location.hash=e}(r);var i=M.lastIndexOf(y(q.location)),o=M.slice(0,-1===i?0:i+1);o.push(t),M=o,S({action:"PUSH",location:n})}else S()}})},replace:function(e,t){var n=g(e,void 0,void 0,q.location);T.confirmTransitionTo(n,"REPLACE",o,function(e){if(e){var t=y(n),r=l(u+t);x()!==r&&(A=t,N(r));var i=M.indexOf(y(q.location));-1!==i&&(M[i]=t),S({action:"REPLACE",location:n})}})},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var t=T.setPrompt(e);return j||(U(1),j=!0),function(){return j&&(j=!1,U(-1)),t()}},listen:function(e){var t=T.appendListener(e);return U(1),function(){U(-1),t()}}};return q}},,function(e,t){var n=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(45),i=n(140),o=n(99),a=Object.defineProperty;t.f=n(39)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t,n){var r=n(72),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",function(){return r})},function(e,t,n){var r=n(38);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){e.exports=!n(61)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";var r=n(1),i=n.n(r),o=(n(0),i.a.createContext(null));var a=function(e){e()},s=function(){return a},u={notify:function(){}};var c=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=u,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=function(){var e=s(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e(function(){for(var e=t;e;)e.callback(),e=e.next})},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=u)},e}();var l=function(e){var t=e.store,n=e.context,a=e.children,s=Object(r.useMemo)(function(){var e=new c(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}},[t]),u=Object(r.useMemo)(function(){return t.getState()},[t]);Object(r.useEffect)(function(){var e=s.subscription;return e.trySubscribe(),u!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}},[s,u]);var l=n||o;return i.a.createElement(l.Provider,{value:s},a)},h=n(14);function f(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var p=n(97),d=n.n(p),m=n(180),y="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect,g=[],v=[null,null];function b(e,t){var n=e[1];return[t.payload,n+1]}function w(e,t,n){y(function(){return e.apply(void 0,t)},n)}function _(e,t,n,r,i,o,a){e.current=r,t.current=i,n.current=!1,o.current&&(o.current=null,a())}function E(e,t,n,r,i,o,a,s,u,c){if(e){var l=!1,h=null,f=function(){if(!l){var e,n,f=t.getState();try{e=r(f,i.current)}catch(p){n=p,h=p}n||(h=null),e===o.current?a.current||u():(o.current=e,s.current=e,a.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=f,n.trySubscribe(),f();return function(){if(l=!0,n.tryUnsubscribe(),n.onStateChange=null,h)throw h}}}var T=function(){return[null,0]};function S(e,t){void 0===t&&(t={});var n=t,a=n.getDisplayName,s=void 0===a?function(e){return"ConnectAdvanced("+e+")"}:a,u=n.methodName,l=void 0===u?"connectAdvanced":u,p=n.renderCountProp,y=void 0===p?void 0:p,S=n.shouldHandleStateChanges,C=void 0===S||S,k=n.storeKey,I=void 0===k?"store":k,x=(n.withRef,n.forwardRef),N=void 0!==x&&x,A=n.context,O=void 0===A?o:A,D=f(n,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]),R=O;return function(t){var n=t.displayName||t.name||"Component",o=s(n),a=Object(h.a)({},D,{getDisplayName:s,methodName:l,renderCountProp:y,shouldHandleStateChanges:C,storeKey:I,displayName:o,wrappedComponentName:n,WrappedComponent:t}),u=D.pure;var p=u?r.useMemo:function(e){return e()};function S(n){var o=Object(r.useMemo)(function(){var e=n.forwardedRef,t=f(n,["forwardedRef"]);return[n.context,e,t]},[n]),s=o[0],u=o[1],l=o[2],d=Object(r.useMemo)(function(){return s&&s.Consumer&&Object(m.isContextConsumer)(i.a.createElement(s.Consumer,null))?s:R},[s,R]),y=Object(r.useContext)(d),S=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(y)&&Boolean(y.store);var k=S?n.store:y.store,I=Object(r.useMemo)(function(){return function(t){return e(t.dispatch,a)}(k)},[k]),x=Object(r.useMemo)(function(){if(!C)return v;var e=new c(k,S?null:y.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[k,S,y]),N=x[0],A=x[1],O=Object(r.useMemo)(function(){return S?y:Object(h.a)({},y,{subscription:N})},[S,y,N]),D=Object(r.useReducer)(b,g,T),P=D[0][0],M=D[1];if(P&&P.error)throw P.error;var L=Object(r.useRef)(),F=Object(r.useRef)(l),U=Object(r.useRef)(),j=Object(r.useRef)(!1),q=p(function(){return U.current&&l===F.current?U.current:I(k.getState(),l)},[k,P,l]);w(_,[F,L,j,l,q,U,A]),w(E,[C,k,N,I,F,L,j,U,A,M],[k,N,I]);var B=Object(r.useMemo)(function(){return i.a.createElement(t,Object(h.a)({},q,{ref:u}))},[u,t,q]);return Object(r.useMemo)(function(){return C?i.a.createElement(d.Provider,{value:O},B):B},[d,B,O])}var k=u?i.a.memo(S):S;if(k.WrappedComponent=t,k.displayName=o,N){var x=i.a.forwardRef(function(e,t){return i.a.createElement(k,Object(h.a)({},e,{forwardedRef:t}))});return x.displayName=o,x.WrappedComponent=t,d()(x,t)}return d()(k,t)}}function C(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function k(e,t){if(C(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!C(e[n[i]],t[n[i]]))return!1;return!0}var I=n(55);function x(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function N(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function A(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=N(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=N(i),i=r(t,n)),i},r}}var O=[function(e){return"function"===typeof e?A(e):void 0},function(e){return e?void 0:x(function(e){return{dispatch:e}})},function(e){return e&&"object"===typeof e?x(function(t){return Object(I.b)(e,t)}):void 0}];var D=[function(e){return"function"===typeof e?A(e):void 0},function(e){return e?void 0:x(function(){return{}})}];function R(e,t,n){return Object(h.a)({},n,{},e,{},t)}var P=[function(e){return"function"===typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,o=n.areMergedPropsEqual,a=!1;return function(t,n,s){var u=e(t,n,s);return a?i&&o(u,r)||(r=u):(a=!0,r=u),r}}}(e):void 0},function(e){return e?void 0:function(){return R}}];function M(e,t,n,r){return function(i,o){return n(e(i,o),t(r,o),o)}}function L(e,t,n,r,i){var o,a,s,u,c,l=i.areStatesEqual,h=i.areOwnPropsEqual,f=i.areStatePropsEqual,p=!1;function d(i,p){var d=!h(p,a),m=!l(i,o);return o=i,a=p,d&&m?(s=e(o,a),t.dependsOnOwnProps&&(u=t(r,a)),c=n(s,u,a)):d?(e.dependsOnOwnProps&&(s=e(o,a)),t.dependsOnOwnProps&&(u=t(r,a)),c=n(s,u,a)):m?function(){var t=e(o,a),r=!f(t,s);return s=t,r&&(c=n(s,u,a)),c}():c}return function(i,l){return p?d(i,l):(s=e(o=i,a=l),u=t(r,a),c=n(s,u,a),p=!0,c)}}function F(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,o=f(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(e,o),s=r(e,o),u=i(e,o);return(o.pure?L:M)(a,s,u,e,o)}function U(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function j(e,t){return e===t}function q(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?S:n,i=t.mapStateToPropsFactories,o=void 0===i?D:i,a=t.mapDispatchToPropsFactories,s=void 0===a?O:a,u=t.mergePropsFactories,c=void 0===u?P:u,l=t.selectorFactory,p=void 0===l?F:l;return function(e,t,n,i){void 0===i&&(i={});var a=i,u=a.pure,l=void 0===u||u,d=a.areStatesEqual,m=void 0===d?j:d,y=a.areOwnPropsEqual,g=void 0===y?k:y,v=a.areStatePropsEqual,b=void 0===v?k:v,w=a.areMergedPropsEqual,_=void 0===w?k:w,E=f(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),T=U(e,o,"mapStateToProps"),S=U(t,s,"mapDispatchToProps"),C=U(n,c,"mergeProps");return r(p,Object(h.a)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:T,initMapDispatchToProps:S,initMergeProps:C,pure:l,areStatesEqual:m,areOwnPropsEqual:g,areStatePropsEqual:b,areMergedPropsEqual:_},E))}}var B=q();var V,W=n(21);n.d(t,"a",function(){return l}),n.d(t,"b",function(){return B}),V=W.unstable_batchedUpdates,a=V},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(12),i=n(47),o=n(41),a=n(66)("src"),s=n(226),u=(""+s).split("toString");n(18).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(c&&(o(n,a)||i(n,a,e[t]?""+e[t]:u.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(33),i=n(62);e.exports=n(39)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(34);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var r=n(25),i=n(44),o=n(43),a=n(63)("src"),s=Function.toString,u=(""+s).split("toString");n(32).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(c&&(o(n,a)||i(n,a,e[t]?""+e[t]:u.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(e,t,n){var r=n(24),i=n(59);e.exports=n(15)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(37),i=n(73),o=n(20),a=n(35),s=n(235);e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,h=6==e,f=5==e||h,p=t||s;return function(t,s,d){for(var m,y,g=o(t),v=i(g),b=r(s,d,3),w=a(v.length),_=0,E=n?p(t,w):u?p(t,0):void 0;w>_;_++)if((f||_ in v)&&(y=b(m=v[_],_,g),e))if(n)E[_]=y;else if(y)switch(e){case 3:return!0;case 5:return m;case 6:return _;case 2:E.push(m)}else if(l)return!1;return h?-1:c||l?l:E}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,"a",function(){return r})},function(e,t,n){var r=n(200),i=n(103);e.exports=function(e){return r(i(e))}},function(e,t){e.exports=!1},function(e,t,n){e.exports=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,n=/gecko\/\d/i.test(e),r=/MSIE \d/.test(e),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),o=/Edge\/(\d+)/.exec(e),a=r||i||o,s=a&&(r?document.documentMode||6:+(o||i)[1]),u=!o&&/WebKit\//.test(e),c=u&&/Qt\/\d+\.\d+/.test(e),l=!o&&/Chrome\//.test(e),h=/Opera\//.test(e),f=/Apple Computer/.test(navigator.vendor),p=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),d=/PhantomJS/.test(e),m=!o&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),y=/Android/.test(e),g=m||y||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),v=m||/Mac/.test(t),b=/\bCrOS\b/.test(e),w=/win/i.test(t),_=h&&e.match(/Version\/(\d*\.\d*)/);_&&(_=Number(_[1])),_&&_>=15&&(h=!1,u=!0);var E=v&&(c||h&&(null==_||_<12.11)),T=n||a&&s>=9;function S(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var C,k=function(e,t){var n=e.className,r=S(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function I(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function x(e,t){return I(e).appendChild(t)}function N(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function A(e,t,n,r){var i=N(e,t,n,r);return i.setAttribute("role","presentation"),i}function O(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function D(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function R(e,t){var n=e.className;S(t).test(n)||(e.className+=(n?" ":"")+t)}function P(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!S(n[r]).test(t)&&(t+=" "+n[r]);return t}C=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(i){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var M=function(e){e.select()};function L(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function F(e,t,n){for(var r in t||(t={}),e)!e.hasOwnProperty(r)||!1===n&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function U(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=r||0,a=i||0;;){var s=e.indexOf("\t",o);if(s<0||s>=t)return a+(t-o);a+=s-o,a+=n-a%n,o=s+1}}m?M=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:a&&(M=function(e){try{e.select()}catch(t){}});var j=function(){this.id=null,this.f=null,this.time=0,this.handler=L(this.onTimeout,this)};function q(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}j.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},j.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var B=50,V={toString:function(){return"CodeMirror.Pass"}},W={scroll:!1},z={origin:"*mouse"},H={origin:"+move"};function K(e,t,n){for(var r=0,i=0;;){var o=e.indexOf("\t",r);-1==o&&(o=e.length);var a=o-r;if(o==e.length||i+a>=t)return r+Math.min(a,t-i);if(i+=o-r,r=o+1,(i+=n-i%n)>=t)return r}}var Q=[""];function G(e){for(;Q.length<=e;)Q.push(Y(Q)+" ");return Q[e]}function Y(e){return e[e.length-1]}function X(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function $(){}function J(e,t){var n;return Object.create?n=Object.create(e):($.prototype=e,n=new $),t&&F(t,n),n}var Z=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ee(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||Z.test(e))}function te(e,t){return t?!!(t.source.indexOf("\\w")>-1&&ee(e))||t.test(e):ee(e)}function ne(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var re=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ie(e){return e.charCodeAt(0)>=768&&re.test(e)}function oe(e,t,n){for(;(n<0?t>0:t<e.length)&&ie(e.charAt(t));)t+=n;return t}function ae(e,t,n){for(var r=t>n?-1:1;;){if(t==n)return t;var i=(t+n)/2,o=r<0?Math.ceil(i):Math.floor(i);if(o==t)return e(o)?t:n;e(o)?n=o:t=o+r}}var se=null;function ue(e,t,n){var r;se=null;for(var i=0;i<e.length;++i){var o=e[i];if(o.from<t&&o.to>t)return i;o.to==t&&(o.from!=o.to&&"before"==n?r=i:se=i),o.from==t&&(o.from!=o.to&&"before"!=n?r=i:se=i)}return null!=r?r:se}var ce=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";var n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,r=/[stwN]/,i=/[LRr]/,o=/[Lb1n]/,a=/[1n]/;function s(e,t,n){this.level=e,this.from=t,this.to=n}return function(u,c){var l,h="ltr"==c?"L":"R";if(0==u.length||"ltr"==c&&!n.test(u))return!1;for(var f=u.length,p=[],d=0;d<f;++d)p.push((l=u.charCodeAt(d))<=247?e.charAt(l):1424<=l&&l<=1524?"R":1536<=l&&l<=1785?t.charAt(l-1536):1774<=l&&l<=2220?"r":8192<=l&&l<=8203?"w":8204==l?"b":"L");for(var m=0,y=h;m<f;++m){var g=p[m];"m"==g?p[m]=y:y=g}for(var v=0,b=h;v<f;++v){var w=p[v];"1"==w&&"r"==b?p[v]="n":i.test(w)&&(b=w,"r"==w&&(p[v]="R"))}for(var _=1,E=p[0];_<f-1;++_){var T=p[_];"+"==T&&"1"==E&&"1"==p[_+1]?p[_]="1":","!=T||E!=p[_+1]||"1"!=E&&"n"!=E||(p[_]=E),E=T}for(var S=0;S<f;++S){var C=p[S];if(","==C)p[S]="N";else if("%"==C){var k=void 0;for(k=S+1;k<f&&"%"==p[k];++k);for(var I=S&&"!"==p[S-1]||k<f&&"1"==p[k]?"1":"N",x=S;x<k;++x)p[x]=I;S=k-1}}for(var N=0,A=h;N<f;++N){var O=p[N];"L"==A&&"1"==O?p[N]="L":i.test(O)&&(A=O)}for(var D=0;D<f;++D)if(r.test(p[D])){var R=void 0;for(R=D+1;R<f&&r.test(p[R]);++R);for(var P="L"==(D?p[D-1]:h),M="L"==(R<f?p[R]:h),L=P==M?P?"L":"R":h,F=D;F<R;++F)p[F]=L;D=R-1}for(var U,j=[],q=0;q<f;)if(o.test(p[q])){var B=q;for(++q;q<f&&o.test(p[q]);++q);j.push(new s(0,B,q))}else{var V=q,W=j.length,z="rtl"==c?1:0;for(++q;q<f&&"L"!=p[q];++q);for(var H=V;H<q;)if(a.test(p[H])){V<H&&(j.splice(W,0,new s(1,V,H)),W+=z);var K=H;for(++H;H<q&&a.test(p[H]);++H);j.splice(W,0,new s(2,K,H)),W+=z,V=H}else++H;V<q&&j.splice(W,0,new s(1,V,q))}return"ltr"==c&&(1==j[0].level&&(U=u.match(/^\s+/))&&(j[0].from=U[0].length,j.unshift(new s(0,0,U[0].length))),1==Y(j).level&&(U=u.match(/\s+$/))&&(Y(j).to-=U[0].length,j.push(new s(0,f-U[0].length,f)))),"rtl"==c?j.reverse():j}}();function le(e,t){var n=e.order;return null==n&&(n=e.order=ce(e.text,t)),n}var he=[],fe=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||he).concat(n)}};function pe(e,t){return e._handlers&&e._handlers[t]||he}function de(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var o=q(i,n);o>-1&&(r[t]=i.slice(0,o).concat(i.slice(o+1)))}}}function me(e,t){var n=pe(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function ye(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),me(e,n||t.type,e,t),Ee(t)||t.codemirrorIgnore}function ge(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==q(n,t[r])&&n.push(t[r])}function ve(e,t){return pe(e,t).length>0}function be(e){e.prototype.on=function(e,t){fe(this,e,t)},e.prototype.off=function(e,t){de(this,e,t)}}function we(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function _e(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Ee(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Te(e){we(e),_e(e)}function Se(e){return e.target||e.srcElement}function Ce(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),v&&e.ctrlKey&&1==t&&(t=3),t}var ke,Ie,xe=function(){if(a&&s<9)return!1;var e=N("div");return"draggable"in e||"dragDrop"in e}();function Ne(e){if(null==ke){var t=N("span","\u200b");x(e,N("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(ke=t.offsetWidth<=1&&t.offsetHeight>2&&!(a&&s<8))}var n=ke?N("span","\u200b"):N("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Ae(e){if(null!=Ie)return Ie;var t=x(e,document.createTextNode("A\u062eA")),n=C(t,0,1).getBoundingClientRect(),r=C(t,1,2).getBoundingClientRect();return I(e),!(!n||n.left==n.right)&&(Ie=r.right-n.right<3)}var Oe=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),t+=a+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},De=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(n){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Re=function(){var e=N("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),Pe=null,Me={},Le={};function Fe(e){if("string"==typeof e&&Le.hasOwnProperty(e))e=Le[e];else if(e&&"string"==typeof e.name&&Le.hasOwnProperty(e.name)){var t=Le[e.name];"string"==typeof t&&(t={name:t}),(e=J(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Fe("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Fe("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Ue(e,t){t=Fe(t);var n=Me[t.name];if(!n)return Ue(e,"text/plain");var r=n(e,t);if(je.hasOwnProperty(t.name)){var i=je[t.name];for(var o in i)i.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=i[o])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var a in t.modeProps)r[a]=t.modeProps[a];return r}var je={};function qe(e,t){var n=je.hasOwnProperty(e)?je[e]:je[e]={};F(t,n)}function Be(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function Ve(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function We(e,t,n){return!e.startState||e.startState(t,n)}var ze=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function He(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(t<o){n=i;break}t-=o}return n.lines[t]}function Ke(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var o=e.text;i==n.line&&(o=o.slice(0,n.ch)),i==t.line&&(o=o.slice(t.ch)),r.push(o),++i}),r}function Qe(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function Ge(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function Ye(e){if(null==e.parent)return null;for(var t=e.parent,n=q(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function Xe(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],o=i.height;if(t<o){e=i;continue e}t-=o,n+=i.chunkSize()}return n}while(!e.lines);for(var a=0;a<e.lines.length;++a){var s=e.lines[a],u=s.height;if(t<u)break;t-=u}return n+a}function $e(e,t){return t>=e.first&&t<e.first+e.size}function Je(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function Ze(e,t,n){if(void 0===n&&(n=null),!(this instanceof Ze))return new Ze(e,t,n);this.line=e,this.ch=t,this.sticky=n}function et(e,t){return e.line-t.line||e.ch-t.ch}function tt(e,t){return e.sticky==t.sticky&&0==et(e,t)}function nt(e){return Ze(e.line,e.ch)}function rt(e,t){return et(e,t)<0?t:e}function it(e,t){return et(e,t)<0?e:t}function ot(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function at(e,t){if(t.line<e.first)return Ze(e.first,0);var n=e.first+e.size-1;return t.line>n?Ze(n,He(e,n).text.length):function(e,t){var n=e.ch;return null==n||n>t?Ze(e.line,t):n<0?Ze(e.line,0):e}(t,He(e,t.line).text.length)}function st(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=at(e,t[r]);return n}ze.prototype.eol=function(){return this.pos>=this.string.length},ze.prototype.sol=function(){return this.pos==this.lineStart},ze.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ze.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ze.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},ze.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},ze.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},ze.prototype.skipToEnd=function(){this.pos=this.string.length},ze.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},ze.prototype.backUp=function(e){this.pos-=e},ze.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=U(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?U(this.string,this.lineStart,this.tabSize):0)},ze.prototype.indentation=function(){return U(this.string,null,this.tabSize)-(this.lineStart?U(this.string,this.lineStart,this.tabSize):0)},ze.prototype.match=function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e},o=this.string.substr(this.pos,e.length);if(i(o)==i(e))return!1!==t&&(this.pos+=e.length),!0},ze.prototype.current=function(){return this.string.slice(this.start,this.pos)},ze.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},ze.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},ze.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var ut=function(e,t){this.state=e,this.lookAhead=t},ct=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function lt(e,t,n,r){var i=[e.state.modeGen],o={};bt(e,t.text,e.doc.mode,n,function(e,t){return i.push(e,t)},o,r);for(var a=n.state,s=function(r){n.baseTokens=i;var s=e.state.overlays[r],u=1,c=0;n.state=!0,bt(e,t.text,s.mode,n,function(e,t){for(var n=u;c<e;){var r=i[u];r>e&&i.splice(u,1,e,i[u+1],r),u+=2,c=Math.min(e,r)}if(t)if(s.opaque)i.splice(n,u-n,e,"overlay "+t),u=n+2;else for(;n<u;n+=2){var o=i[n+1];i[n+1]=(o?o+" ":"")+"overlay "+t}},o),n.state=a,n.baseTokens=null,n.baseTokenPos=1},u=0;u<e.state.overlays.length;++u)s(u);return{styles:i,classes:o.bgClass||o.textClass?o:null}}function ht(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=ft(e,Ye(t)),i=t.text.length>e.options.maxHighlightLength&&Be(e.doc.mode,r.state),o=lt(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function ft(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return new ct(r,!0,t);var o=function(e,t,n){for(var r,i,o=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>a;--s){if(s<=o.first)return o.first;var u=He(o,s-1),c=u.stateAfter;if(c&&(!n||s+(c instanceof ut?c.lookAhead:0)<=o.modeFrontier))return s;var l=U(u.text,null,e.options.tabSize);(null==i||r>l)&&(i=s-1,r=l)}return i}(e,t,n),a=o>r.first&&He(r,o-1).stateAfter,s=a?ct.fromSaved(r,a,o):new ct(r,We(r.mode),o);return r.iter(o,t,function(n){pt(e,n.text,s);var r=s.line;n.stateAfter=r==t-1||r%5==0||r>=i.viewFrom&&r<i.viewTo?s.save():null,s.nextLine()}),n&&(r.modeFrontier=s.line),s}function pt(e,t,n,r){var i=e.doc.mode,o=new ze(t,e.options.tabSize,n);for(o.start=o.pos=r||0,""==t&&dt(i,n.state);!o.eol();)mt(i,o,n.state),o.start=o.pos}function dt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=Ve(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function mt(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=Ve(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}ct.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},ct.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},ct.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ct.fromSaved=function(e,t,n){return t instanceof ut?new ct(e,Be(e.mode,t.state),n,t.lookAhead):new ct(e,Be(e.mode,t),n)},ct.prototype.save=function(e){var t=!1!==e?Be(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ut(t,this.maxLookAhead):t};var yt=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function gt(e,t,n,r){var i,o=e.doc,a=o.mode;t=at(o,t);var s,u=He(o,t.line),c=ft(e,t.line,n),l=new ze(u.text,e.options.tabSize,c);for(r&&(s=[]);(r||l.pos<t.ch)&&!l.eol();)l.start=l.pos,i=mt(a,l,c.state),r&&s.push(new yt(l,i,Be(o.mode,c.state)));return r?s:new yt(l,i,c.state)}function vt(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[r])||(t[r]+=" "+n[2])}return e}function bt(e,t,n,r,i,o,a){var s=n.flattenSpans;null==s&&(s=e.options.flattenSpans);var u,c=0,l=null,h=new ze(t,e.options.tabSize,r),f=e.options.addModeClass&&[null];for(""==t&&vt(dt(n,r.state),o);!h.eol();){if(h.pos>e.options.maxHighlightLength?(s=!1,a&&pt(e,t,r,h.pos),h.pos=t.length,u=null):u=vt(mt(n,h,r.state,f),o),f){var p=f[0].name;p&&(u="m-"+(u?p+" "+u:p))}if(!s||l!=u){for(;c<h.start;)c=Math.min(h.start,c+5e3),i(c,l);l=u}h.start=h.pos}for(;c<h.pos;){var d=Math.min(h.pos,c+5e3);i(d,l),c=d}}var wt=!1,_t=!1;function Et(e,t,n){this.marker=e,this.from=t,this.to=n}function Tt(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function St(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Ct(e,t){if(t.full)return null;var n=$e(e,t.from.line)&&He(e,t.from.line).markedSpans,r=$e(e,t.to.line)&&He(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,a=0==et(t.from,t.to),s=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],a=o.marker,s=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);if(s||o.from==t&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var u=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push(new Et(a,o.from,u?null:o.to))}}return r}(n,i,a),u=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],a=o.marker,s=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);if(s||o.from==t&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var u=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(r||(r=[])).push(new Et(a,u?null:o.from-t,null==o.to?null:o.to-t))}}return r}(r,o,a),c=1==t.text.length,l=Y(t.text).length+(c?i:0);if(s)for(var h=0;h<s.length;++h){var f=s[h];if(null==f.to){var p=Tt(u,f.marker);p?c&&(f.to=null==p.to?null:p.to+l):f.to=i}}if(u)for(var d=0;d<u.length;++d){var m=u[d];if(null!=m.to&&(m.to+=l),null==m.from){var y=Tt(s,m.marker);y||(m.from=l,c&&(s||(s=[])).push(m))}else m.from+=l,c&&(s||(s=[])).push(m)}s&&(s=kt(s)),u&&u!=s&&(u=kt(u));var g=[s];if(!c){var v,b=t.text.length-2;if(b>0&&s)for(var w=0;w<s.length;++w)null==s[w].to&&(v||(v=[])).push(new Et(s[w].marker,null,null));for(var _=0;_<b;++_)g.push(v);g.push(u)}return g}function kt(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function It(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function xt(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Nt(e){return e.inclusiveLeft?-1:0}function At(e){return e.inclusiveRight?1:0}function Ot(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),o=et(r.from,i.from)||Nt(e)-Nt(t);if(o)return-o;var a=et(r.to,i.to)||At(e)-At(t);return a||t.id-e.id}function Dt(e,t){var n,r=_t&&e.markedSpans;if(r)for(var i=void 0,o=0;o<r.length;++o)(i=r[o]).marker.collapsed&&null==(t?i.from:i.to)&&(!n||Ot(n,i.marker)<0)&&(n=i.marker);return n}function Rt(e){return Dt(e,!0)}function Pt(e){return Dt(e,!1)}function Mt(e,t){var n,r=_t&&e.markedSpans;if(r)for(var i=0;i<r.length;++i){var o=r[i];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!n||Ot(n,o.marker)<0)&&(n=o.marker)}return n}function Lt(e,t,n,r,i){var o=He(e,t),a=_t&&o.markedSpans;if(a)for(var s=0;s<a.length;++s){var u=a[s];if(u.marker.collapsed){var c=u.marker.find(0),l=et(c.from,n)||Nt(u.marker)-Nt(i),h=et(c.to,r)||At(u.marker)-At(i);if(!(l>=0&&h<=0||l<=0&&h>=0)&&(l<=0&&(u.marker.inclusiveRight&&i.inclusiveLeft?et(c.to,n)>=0:et(c.to,n)>0)||l>=0&&(u.marker.inclusiveRight&&i.inclusiveLeft?et(c.from,r)<=0:et(c.from,r)<0)))return!0}}}function Ft(e){for(var t;t=Rt(e);)e=t.find(-1,!0).line;return e}function Ut(e,t){var n=He(e,t),r=Ft(n);return n==r?t:Ye(r)}function jt(e,t){if(t>e.lastLine())return t;var n,r=He(e,t);if(!qt(e,r))return t;for(;n=Pt(r);)r=n.find(1,!0).line;return Ye(r)+1}function qt(e,t){var n=_t&&t.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&Bt(e,t,r))return!0}}function Bt(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return Bt(e,r.line,Tt(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,o=0;o<t.markedSpans.length;++o)if((i=t.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&Bt(e,t,i))return!0}function Vt(e){e=Ft(e);for(var t=0,n=e.parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var o=n.parent;o;o=(n=o).parent)for(var a=0;a<o.children.length;++a){var s=o.children[a];if(s==n)break;t+=s.height}return t}function Wt(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=Rt(r);){var i=t.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=e;t=Pt(r);){var o=t.find(0,!0);n-=r.text.length-o.from.ch,r=o.to.line,n+=r.text.length-o.to.ch}return n}function zt(e){var t=e.display,n=e.doc;t.maxLine=He(n,n.first),t.maxLineLength=Wt(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=Wt(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}var Ht=function(e,t,n){this.text=e,xt(this,t),this.height=n?n(this):1};function Kt(e){e.parent=null,It(e)}Ht.prototype.lineNo=function(){return Ye(this)},be(Ht);var Qt={},Gt={};function Yt(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Gt:Qt;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Xt(e,t){var n=A("span",null,null,u?"padding-right: .1px":null),r={pre:A("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o=i?t.rest[i-1]:t.line,a=void 0;r.pos=0,r.addToken=Jt,Ae(e.display.measure)&&(a=le(o,e.doc.direction))&&(r.addToken=Zt(r.addToken,a)),r.map=[];var s=t!=e.display.externalMeasured&&Ye(o);tn(o,r,ht(e,o,s)),o.styleClasses&&(o.styleClasses.bgClass&&(r.bgClass=P(o.styleClasses.bgClass,r.bgClass||"")),o.styleClasses.textClass&&(r.textClass=P(o.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(Ne(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(u){var c=r.content.lastChild;(/\bcm-tab\b/.test(c.className)||c.querySelector&&c.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return me(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=P(r.pre.className,r.textClass||"")),r}function $t(e){var t=N("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Jt(e,t,n,r,i,o,u){if(t){var c,l=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var o=e.charAt(i);" "!=o||!n||i!=e.length-1&&32!=e.charCodeAt(i+1)||(o="\xa0"),r+=o,n=" "==o}return r}(t,e.trailingSpace):t,h=e.cm.state.specialChars,f=!1;if(h.test(t)){c=document.createDocumentFragment();for(var p=0;;){h.lastIndex=p;var d=h.exec(t),m=d?d.index-p:t.length-p;if(m){var y=document.createTextNode(l.slice(p,p+m));a&&s<9?c.appendChild(N("span",[y])):c.appendChild(y),e.map.push(e.pos,e.pos+m,y),e.col+=m,e.pos+=m}if(!d)break;p+=m+1;var g=void 0;if("\t"==d[0]){var v=e.cm.options.tabSize,b=v-e.col%v;(g=c.appendChild(N("span",G(b),"cm-tab"))).setAttribute("role","presentation"),g.setAttribute("cm-text","\t"),e.col+=b}else"\r"==d[0]||"\n"==d[0]?((g=c.appendChild(N("span","\r"==d[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",d[0]),e.col+=1):((g=e.cm.options.specialCharPlaceholder(d[0])).setAttribute("cm-text",d[0]),a&&s<9?c.appendChild(N("span",[g])):c.appendChild(g),e.col+=1);e.map.push(e.pos,e.pos+1,g),e.pos++}}else e.col+=t.length,c=document.createTextNode(l),e.map.push(e.pos,e.pos+t.length,c),a&&s<9&&(f=!0),e.pos+=t.length;if(e.trailingSpace=32==l.charCodeAt(t.length-1),n||r||i||f||o){var w=n||"";r&&(w+=r),i&&(w+=i);var _=N("span",[c],w,o);if(u)for(var E in u)u.hasOwnProperty(E)&&"style"!=E&&"class"!=E&&_.setAttribute(E,u[E]);return e.content.appendChild(_)}e.content.appendChild(c)}}function Zt(e,t){return function(n,r,i,o,a,s,u){i=i?i+" cm-force-border":"cm-force-border";for(var c=n.pos,l=c+r.length;;){for(var h=void 0,f=0;f<t.length&&!((h=t[f]).to>c&&h.from<=c);f++);if(h.to>=l)return e(n,r,i,o,a,s,u);e(n,r.slice(0,h.to-c),i,o,null,s,u),o=null,r=r.slice(h.to-c),c=h.to}}}function en(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function tn(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(r)for(var a,s,u,c,l,h,f,p=i.length,d=0,m=1,y="",g=0;;){if(g==d){u=c=l=s="",f=null,h=null,g=1/0;for(var v=[],b=void 0,w=0;w<r.length;++w){var _=r[w],E=_.marker;if("bookmark"==E.type&&_.from==d&&E.widgetNode)v.push(E);else if(_.from<=d&&(null==_.to||_.to>d||E.collapsed&&_.to==d&&_.from==d)){if(null!=_.to&&_.to!=d&&g>_.to&&(g=_.to,c=""),E.className&&(u+=" "+E.className),E.css&&(s=(s?s+";":"")+E.css),E.startStyle&&_.from==d&&(l+=" "+E.startStyle),E.endStyle&&_.to==g&&(b||(b=[])).push(E.endStyle,_.to),E.title&&((f||(f={})).title=E.title),E.attributes)for(var T in E.attributes)(f||(f={}))[T]=E.attributes[T];E.collapsed&&(!h||Ot(h.marker,E)<0)&&(h=_)}else _.from>d&&g>_.from&&(g=_.from)}if(b)for(var S=0;S<b.length;S+=2)b[S+1]==g&&(c+=" "+b[S]);if(!h||h.from==d)for(var C=0;C<v.length;++C)en(t,0,v[C]);if(h&&(h.from||0)==d){if(en(t,(null==h.to?p+1:h.to)-d,h.marker,null==h.from),null==h.to)return;h.to==d&&(h=!1)}}if(d>=p)break;for(var k=Math.min(p,g);;){if(y){var I=d+y.length;if(!h){var x=I>k?y.slice(0,k-d):y;t.addToken(t,x,a?a+u:u,l,d+x.length==g?c:"",s,f)}if(I>=k){y=y.slice(k-d),d=k;break}d=I,l=""}y=i.slice(o,o=n[m++]),a=Yt(n[m++],t.cm.options)}}else for(var N=1;N<n.length;N+=2)t.addToken(t,i.slice(o,o=n[N]),Yt(n[N+1],t.cm.options))}function nn(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=Pt(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?Ye(Y(this.rest))-n+1:1,this.node=this.text=null,this.hidden=qt(e,t)}function rn(e,t,n){for(var r,i=[],o=t;o<n;o=r){var a=new nn(e.doc,He(e.doc,o),o);r=o+a.size,i.push(a)}return i}var on=null,an=null;function sn(e,t){var n=pe(e,t);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);on?r=on.delayedCallbacks:an?r=an:(r=an=[],setTimeout(un,0));for(var o=function(e){r.push(function(){return n[e].apply(null,i)})},a=0;a<n.length;++a)o(a)}}function un(){var e=an;an=null;for(var t=0;t<e.length;++t)e[t]()}function cn(e,t,n,r){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?fn(e,t):"gutter"==o?dn(e,t,n,r):"class"==o?pn(e,t):"widget"==o&&mn(e,t,r)}t.changes=null}function ln(e){return e.node==e.text&&(e.node=N("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),a&&s<8&&(e.node.style.zIndex=2)),e.node}function hn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Xt(e,t)}function fn(e,t){var n=t.text.className,r=hn(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,pn(e,t)):n&&(t.text.className=n)}function pn(e,t){!function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=ln(t);t.background=r.insertBefore(N("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?ln(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function dn(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=ln(t);t.gutterBackground=N("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var a=ln(t),s=t.gutter=N("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(e.display.input.setUneditable(s),a.insertBefore(s,t.text),t.line.gutterClass&&(s.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=s.appendChild(N("div",Je(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var u=0;u<e.display.gutterSpecs.length;++u){var c=e.display.gutterSpecs[u].className,l=o.hasOwnProperty(c)&&o[c];l&&s.appendChild(N("div",[l],"CodeMirror-gutter-elt","left: "+r.gutterLeft[c]+"px; width: "+r.gutterWidth[c]+"px"))}}}function mn(e,t,n){t.alignable&&(t.alignable=null);for(var r=S("CodeMirror-linewidget"),i=t.node.firstChild,o=void 0;i;i=o)o=i.nextSibling,r.test(i.className)&&t.node.removeChild(i);gn(e,t,n)}function yn(e,t,n,r){var i=hn(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),pn(e,t),dn(e,t,n,r),gn(e,t,r),t.node}function gn(e,t,n){if(vn(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)vn(e,t.rest[r],t,n,!1)}function vn(e,t,n,r,i){if(t.widgets)for(var o=ln(n),a=0,s=t.widgets;a<s.length;++a){var u=s[a],c=N("div",[u.node],"CodeMirror-linewidget"+(u.className?" "+u.className:""));u.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),bn(u,c,n,r),e.display.input.setUneditable(c),i&&u.above?o.insertBefore(c,n.gutter||n.text):o.appendChild(c),sn(u,"redraw")}}function bn(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function wn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!O(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),x(t.display.measure,N("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function _n(e,t){for(var n=Se(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function En(e){return e.lineSpace.offsetTop}function Tn(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Sn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=x(e.measure,N("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function Cn(e){return B-e.display.nativeBarWidth}function kn(e){return e.display.scroller.clientWidth-Cn(e)-e.display.barWidth}function In(e){return e.display.scroller.clientHeight-Cn(e)-e.display.barHeight}function xn(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(Ye(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function Nn(e,t,n,r){return Dn(e,On(e,t),n,r)}function An(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[sr(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function On(e,t){var n=Ye(t),r=An(e,n);r&&!r.text?r=null:r&&r.changes&&(cn(e,r,n,nr(e)),e.curOp.forceUpdate=!0),r||(r=function(e,t){var n=Ye(t=Ft(t)),r=e.display.externalMeasured=new nn(e.doc,t,n);r.lineN=n;var i=r.built=Xt(e,r);return r.text=i.pre,x(e.display.lineMeasure,i.pre),r}(e,t));var i=xn(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Dn(e,t,n,r,i){t.before&&(n=-1);var o,u=n+(r||"");return t.cache.hasOwnProperty(u)?o=t.cache[u]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,n){var r=e.options.lineWrapping,i=r&&kn(e);if(!t.measure.heights||r&&t.measure.width!=i){var o=t.measure.heights=[];if(r){t.measure.width=i;for(var a=t.text.firstChild.getClientRects(),s=0;s<a.length-1;s++){var u=a[s],c=a[s+1];Math.abs(u.bottom-c.bottom)>2&&o.push((u.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(o=function(e,t,n,r){var i,o=Mn(t.map,n,r),u=o.node,c=o.start,l=o.end,h=o.collapse;if(3==u.nodeType){for(var f=0;f<4;f++){for(;c&&ie(t.line.text.charAt(o.coverStart+c));)--c;for(;o.coverStart+l<o.coverEnd&&ie(t.line.text.charAt(o.coverStart+l));)++l;if((i=a&&s<9&&0==c&&l==o.coverEnd-o.coverStart?u.parentNode.getBoundingClientRect():Ln(C(u,c,l).getClientRects(),r)).left||i.right||0==c)break;l=c,c-=1,h="right"}a&&s<11&&(i=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Pe)return Pe;var t=x(e,N("span","x")),n=t.getBoundingClientRect(),r=C(t,0,1).getBoundingClientRect();return Pe=Math.abs(n.left-r.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}(e.display.measure,i))}else{var p;c>0&&(h=r="right"),i=e.options.lineWrapping&&(p=u.getClientRects()).length>1?p["right"==r?p.length-1:0]:u.getBoundingClientRect()}if(a&&s<9&&!c&&(!i||!i.left&&!i.right)){var d=u.parentNode.getClientRects()[0];i=d?{left:d.left,right:d.left+tr(e.display),top:d.top,bottom:d.bottom}:Pn}for(var m=i.top-t.rect.top,y=i.bottom-t.rect.top,g=(m+y)/2,v=t.view.measure.heights,b=0;b<v.length-1&&!(g<v[b]);b++);var w=b?v[b-1]:0,_=v[b],E={left:("right"==h?i.right:i.left)-t.rect.left,right:("left"==h?i.left:i.right)-t.rect.left,top:w,bottom:_};return i.left||i.right||(E.bogus=!0),e.options.singleCursorHeightPerLine||(E.rtop=m,E.rbottom=y),E}(e,t,n,r)).bogus||(t.cache[u]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}var Rn,Pn={left:0,right:0,top:0,bottom:0};function Mn(e,t,n){for(var r,i,o,a,s,u,c=0;c<e.length;c+=3)if(s=e[c],u=e[c+1],t<s?(i=0,o=1,a="left"):t<u?o=1+(i=t-s):(c==e.length-3||t==u&&e[c+3]>t)&&(i=(o=u-s)-1,t>=u&&(a="right")),null!=i){if(r=e[c+2],s==u&&n==(r.insertLeft?"left":"right")&&(a=n),"left"==n&&0==i)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)r=e[2+(c-=3)],a="left";if("right"==n&&i==u-s)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)r=e[(c+=3)+2],a="right";break}return{node:r,start:i,end:o,collapse:a,coverStart:s,coverEnd:u}}function Ln(e,t){var n=Pn;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;i>=0&&(n=e[i]).left==n.right;i--);return n}function Fn(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Un(e){e.display.externalMeasure=null,I(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Fn(e.display.view[t])}function jn(e){Un(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function qn(){return l&&y?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Bn(){return l&&y?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Vn(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=wn(e.widgets[n]));return t}function Wn(e,t,n,r,i){if(!i){var o=Vn(t);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var a=Vt(t);if("local"==r?a+=En(e.display):a-=e.display.viewOffset,"page"==r||"window"==r){var s=e.display.lineSpace.getBoundingClientRect();a+=s.top+("window"==r?0:Bn());var u=s.left+("window"==r?0:qn());n.left+=u,n.right+=u}return n.top+=a,n.bottom+=a,n}function zn(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=qn(),i-=Bn();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:i-a.top}}function Hn(e,t,n,r,i){return r||(r=He(e.doc,t.line)),Wn(e,r,Nn(e,r,t.ch,i),n)}function Kn(e,t,n,r,i,o){function a(t,a){var s=Dn(e,i,t,a?"right":"left",o);return a?s.left=s.right:s.right=s.left,Wn(e,r,s,n)}r=r||He(e.doc,t.line),i||(i=On(e,r));var s=le(r,e.doc.direction),u=t.ch,c=t.sticky;if(u>=r.text.length?(u=r.text.length,c="before"):u<=0&&(u=0,c="after"),!s)return a("before"==c?u-1:u,"before"==c);function l(e,t,n){var r=s[t],i=1==r.level;return a(n?e-1:e,i!=n)}var h=ue(s,u,c),f=se,p=l(u,h,"before"==c);return null!=f&&(p.other=l(u,f,"before"!=c)),p}function Qn(e,t){var n=0;t=at(e.doc,t),e.options.lineWrapping||(n=tr(e.display)*t.ch);var r=He(e.doc,t.line),i=Vt(r)+En(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Gn(e,t,n,r,i){var o=Ze(e,t,n);return o.xRel=i,r&&(o.outside=r),o}function Yn(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return Gn(r.first,0,null,-1,-1);var i=Xe(r,n),o=r.first+r.size-1;if(i>o)return Gn(r.first+r.size-1,He(r,o).text.length,null,1,1);t<0&&(t=0);for(var a=He(r,i);;){var s=Zn(e,a,i,t,n),u=Mt(a,s.ch+(s.xRel>0||s.outside>0?1:0));if(!u)return s;var c=u.find(1);if(c.line==i)return c;a=He(r,i=c.line)}}function Xn(e,t,n,r){r-=Vn(t);var i=t.text.length,o=ae(function(t){return Dn(e,n,t-1).bottom<=r},i,0);return i=ae(function(t){return Dn(e,n,t).top>r},o,i),{begin:o,end:i}}function $n(e,t,n,r){n||(n=On(e,t));var i=Wn(e,t,Dn(e,n,r),"line").top;return Xn(e,t,n,i)}function Jn(e,t,n,r){return!(e.bottom<=n)&&(e.top>n||(r?e.left:e.right)>t)}function Zn(e,t,n,r,i){i-=Vt(t);var o=On(e,t),a=Vn(t),s=0,u=t.text.length,c=!0,l=le(t,e.doc.direction);if(l){var h=(e.options.lineWrapping?function(e,t,n,r,i,o,a){var s=Xn(e,t,r,a),u=s.begin,c=s.end;/\s/.test(t.text.charAt(c-1))&&c--;for(var l=null,h=null,f=0;f<i.length;f++){var p=i[f];if(!(p.from>=c||p.to<=u)){var d=1!=p.level,m=Dn(e,r,d?Math.min(c,p.to)-1:Math.max(u,p.from)).right,y=m<o?o-m+1e9:m-o;(!l||h>y)&&(l=p,h=y)}}return l||(l=i[i.length-1]),l.from<u&&(l={from:u,to:l.to,level:l.level}),l.to>c&&(l={from:l.from,to:c,level:l.level}),l}:function(e,t,n,r,i,o,a){var s=ae(function(s){var u=i[s],c=1!=u.level;return Jn(Kn(e,Ze(n,c?u.to:u.from,c?"before":"after"),"line",t,r),o,a,!0)},0,i.length-1),u=i[s];if(s>0){var c=1!=u.level,l=Kn(e,Ze(n,c?u.from:u.to,c?"after":"before"),"line",t,r);Jn(l,o,a,!0)&&l.top>a&&(u=i[s-1])}return u})(e,t,n,o,l,r,i);c=1!=h.level,s=c?h.from:h.to-1,u=c?h.to:h.from-1}var f,p,d=null,m=null,y=ae(function(t){var n=Dn(e,o,t);return n.top+=a,n.bottom+=a,!!Jn(n,r,i,!1)&&(n.top<=i&&n.left<=r&&(d=t,m=n),!0)},s,u),g=!1;if(m){var v=r-m.left<m.right-r,b=v==c;y=d+(b?0:1),p=b?"after":"before",f=v?m.left:m.right}else{c||y!=u&&y!=s||y++,p=0==y?"after":y==t.text.length?"before":Dn(e,o,y-(c?1:0)).bottom+a<=i==c?"after":"before";var w=Kn(e,Ze(n,y,p),"line",t,o);f=w.left,g=i<w.top?-1:i>=w.bottom?1:0}return y=oe(t.text,y,1),Gn(n,y,p,g,r-f)}function er(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Rn){Rn=N("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)Rn.appendChild(document.createTextNode("x")),Rn.appendChild(N("br"));Rn.appendChild(document.createTextNode("x"))}x(e.measure,Rn);var n=Rn.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),I(e.measure),n||1}function tr(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=N("span","xxxxxxxxxx"),n=N("pre",[t],"CodeMirror-line-like");x(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function nr(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,o=t.gutters.firstChild,a=0;o;o=o.nextSibling,++a){var s=e.display.gutterSpecs[a].className;n[s]=o.offsetLeft+o.clientLeft+i,r[s]=o.clientWidth}return{fixedPos:rr(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function rr(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function ir(e){var t=er(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/tr(e.display)-3);return function(i){if(qt(e.doc,i))return 0;var o=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(o+=i.widgets[a].height);return n?o+(Math.ceil(i.text.length/r)||1)*t:o+t}}function or(e){var t=e.doc,n=ir(e);t.iter(function(e){var t=n(e);t!=e.height&&Ge(e,t)})}function ar(e,t,n,r){var i=e.display;if(!n&&"true"==Se(t).getAttribute("cm-not-content"))return null;var o,a,s=i.lineSpace.getBoundingClientRect();try{o=t.clientX-s.left,a=t.clientY-s.top}catch(t){return null}var u,c=Yn(e,o,a);if(r&&c.xRel>0&&(u=He(e.doc,c.line).text).length==c.ch){var l=U(u,u.length,e.options.tabSize)-u.length;c=Ze(c.line,Math.max(0,Math.round((o-Sn(e.display).left)/tr(e.display))-l))}return c}function sr(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function ur(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)_t&&Ut(e.doc,t)<i.viewTo&&lr(e);else if(n<=i.viewFrom)_t&&jt(e.doc,n+r)>i.viewFrom?lr(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)lr(e);else if(t<=i.viewFrom){var o=hr(e,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):lr(e)}else if(n>=i.viewTo){var a=hr(e,t,t,-1);a?(i.view=i.view.slice(0,a.index),i.viewTo=a.lineN):lr(e)}else{var s=hr(e,t,t,-1),u=hr(e,n,n+r,1);s&&u?(i.view=i.view.slice(0,s.index).concat(rn(e,s.lineN,u.lineN)).concat(i.view.slice(u.index)),i.viewTo+=r):lr(e)}var c=i.externalMeasured;c&&(n<c.lineN?c.lineN+=r:t<c.lineN+c.size&&(i.externalMeasured=null))}function cr(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var o=r.view[sr(e,t)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==q(a,n)&&a.push(n)}}}function lr(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function hr(e,t,n,r){var i,o=sr(e,t),a=e.display.view;if(!_t||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var s=e.display.viewFrom,u=0;u<o;u++)s+=a[u].size;if(s!=t){if(r>0){if(o==a.length-1)return null;i=s+a[o].size-t,o++}else i=s-t;t+=i,n+=i}for(;Ut(e.doc,n)!=n;){if(o==(r<0?0:a.length-1))return null;n+=r*a[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:n}}function fr(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function pr(e){e.display.input.showSelection(e.display.input.prepareSelection())}function dr(e,t){void 0===t&&(t=!0);for(var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++)if(t||a!=n.sel.primIndex){var s=n.sel.ranges[a];if(!(s.from().line>=e.display.viewTo||s.to().line<e.display.viewFrom)){var u=s.empty();(u||e.options.showCursorWhenSelecting)&&mr(e,s.head,i),u||gr(e,s,o)}}return r}function mr(e,t,n){var r=Kn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(N("div","\xa0","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var o=n.appendChild(N("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function yr(e,t){return e.top-t.top||e.left-t.left}function gr(e,t,n){var r=e.display,i=e.doc,o=document.createDocumentFragment(),a=Sn(e.display),s=a.left,u=Math.max(r.sizerWidth,kn(e)-r.sizer.offsetLeft)-a.right,c="ltr"==i.direction;function l(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),o.appendChild(N("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?u-e:n)+"px;\n                             height: "+(r-t)+"px"))}function h(t,n,r){var o,a,h=He(i,t),f=h.text.length;function p(n,r){return Hn(e,Ze(t,n),"div",h,r)}function d(t,n,r){var i=$n(e,h,null,t),o="ltr"==n==("after"==r)?"left":"right",a="after"==r?i.begin:i.end-(/\s/.test(h.text.charAt(i.end-1))?2:1);return p(a,o)[o]}var m=le(h,i.direction);return function(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var i=!1,o=0;o<e.length;++o){var a=e[o];(a.from<n&&a.to>t||t==n&&a.to==t)&&(r(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr",o),i=!0)}i||r(t,n,"ltr")}(m,n||0,null==r?f:r,function(e,t,i,h){var y="ltr"==i,g=p(e,y?"left":"right"),v=p(t-1,y?"right":"left"),b=null==n&&0==e,w=null==r&&t==f,_=0==h,E=!m||h==m.length-1;if(v.top-g.top<=3){var T=(c?b:w)&&_,S=(c?w:b)&&E,C=T?s:(y?g:v).left,k=S?u:(y?v:g).right;l(C,g.top,k-C,g.bottom)}else{var I,x,N,A;y?(I=c&&b&&_?s:g.left,x=c?u:d(e,i,"before"),N=c?s:d(t,i,"after"),A=c&&w&&E?u:v.right):(I=c?d(e,i,"before"):s,x=!c&&b&&_?u:g.right,N=!c&&w&&E?s:v.left,A=c?d(t,i,"after"):u),l(I,g.top,x-I,g.bottom),g.bottom<v.top&&l(s,g.bottom,null,v.top),l(N,v.top,A-N,v.bottom)}(!o||yr(g,o)<0)&&(o=g),yr(v,o)<0&&(o=v),(!a||yr(g,a)<0)&&(a=g),yr(v,a)<0&&(a=v)}),{start:o,end:a}}var f=t.from(),p=t.to();if(f.line==p.line)h(f.line,f.ch,p.ch);else{var d=He(i,f.line),m=He(i,p.line),y=Ft(d)==Ft(m),g=h(f.line,f.ch,y?d.text.length+1:null).end,v=h(p.line,y?0:null,p.ch).start;y&&(g.top<v.top-2?(l(g.right,g.top,null,g.bottom),l(s,v.top,v.left,v.bottom)):l(g.right,g.top,v.left-g.right,g.bottom)),g.bottom<v.top&&l(s,g.bottom,null,v.top)}n.appendChild(o)}function vr(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function br(e){e.state.focused||(e.display.input.focus(),_r(e))}function wr(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,Er(e))},100)}function _r(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(me(e,"focus",e,t),e.state.focused=!0,R(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),u&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),vr(e))}function Er(e,t){e.state.delayingBlurEvent||(e.state.focused&&(me(e,"blur",e,t),e.state.focused=!1,k(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Tr(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i=t.view[r],o=e.options.lineWrapping,u=void 0,c=0;if(!i.hidden){if(a&&s<8){var l=i.node.offsetTop+i.node.offsetHeight;u=l-n,n=l}else{var h=i.node.getBoundingClientRect();u=h.bottom-h.top,!o&&i.text.firstChild&&(c=i.text.firstChild.getBoundingClientRect().right-h.left-1)}var f=i.line.height-u;if((f>.005||f<-.005)&&(Ge(i.line,u),Sr(i.line),i.rest))for(var p=0;p<i.rest.length;p++)Sr(i.rest[p]);if(c>e.display.sizerWidth){var d=Math.ceil(c/tr(e.display));d>e.display.maxLineLength&&(e.display.maxLineLength=d,e.display.maxLine=i.line,e.display.maxLineChanged=!0)}}}}function Sr(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function Cr(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-En(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,o=Xe(t,r),a=Xe(t,i);if(n&&n.ensure){var s=n.ensure.from.line,u=n.ensure.to.line;s<o?(o=s,a=Xe(t,Vt(He(t,s))+e.wrapper.clientHeight)):Math.min(u,t.lastLine())>=a&&(o=Xe(t,Vt(He(t,u))-e.wrapper.clientHeight),a=u)}return{from:o,to:Math.max(a,o+1)}}function kr(e,t){var n=e.display,r=er(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,o=In(e),a={};t.bottom-t.top>o&&(t.bottom=t.top+o);var s=e.doc.height+Tn(n),u=t.top<r,c=t.bottom>s-r;if(t.top<i)a.scrollTop=u?0:t.top;else if(t.bottom>i+o){var l=Math.min(t.top,(c?s:t.bottom)-o);l!=i&&(a.scrollTop=l)}var h=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft,f=kn(e)-(e.options.fixedGutter?n.gutters.offsetWidth:0),p=t.right-t.left>f;return p&&(t.right=t.left+f),t.left<10?a.scrollLeft=0:t.left<h?a.scrollLeft=Math.max(0,t.left-(p?0:10)):t.right>f+h-3&&(a.scrollLeft=t.right+(p?0:10)-f),a}function Ir(e,t){null!=t&&(Ar(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function xr(e){Ar(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Nr(e,t,n){null==t&&null==n||Ar(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Ar(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=Qn(e,t.from),r=Qn(e,t.to);Or(e,n,r,t.margin)}}function Or(e,t,n,r){var i=kr(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});Nr(e,i.scrollLeft,i.scrollTop)}function Dr(e,t){Math.abs(e.doc.scrollTop-t)<2||(n||ii(e,{top:t}),Rr(e,t,!0),n&&ii(e),Zr(e,100))}function Rr(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Pr(e,t,n,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r||(e.doc.scrollLeft=t,si(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Mr(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+Tn(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Cn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Lr=function(e,t,n){this.cm=n;var r=this.vert=N("div",[N("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=N("div",[N("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,e(r),e(i),fe(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),fe(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,a&&s<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Lr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var i=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},Lr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Lr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Lr.prototype.zeroWidthHack=function(){var e=v&&!p?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new j,this.disableVert=new j},Lr.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,function r(){var i=e.getBoundingClientRect(),o="vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1);o!=e?e.style.pointerEvents="none":t.set(1e3,r)})},Lr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Fr=function(){};function Ur(e,t){t||(t=Mr(e));var n=e.display.barWidth,r=e.display.barHeight;jr(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&Tr(e),jr(e,Mr(e)),n=e.display.barWidth,r=e.display.barHeight}function jr(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}Fr.prototype.update=function(){return{bottom:0,right:0}},Fr.prototype.setScrollLeft=function(){},Fr.prototype.setScrollTop=function(){},Fr.prototype.clear=function(){};var qr={native:Lr,null:Fr};function Br(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&k(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new qr[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),fe(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){"horizontal"==n?Pr(e,t):Dr(e,t)},e),e.display.scrollbars.addClass&&R(e.display.wrapper,e.display.scrollbars.addClass)}var Vr=0;function Wr(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Vr},t=e.curOp,on?on.ops.push(t):t.ownsGroup=on={ops:[t],delayedCallbacks:[]}}function zr(e){var t=e.curOp;t&&function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}(n)}finally{on=null,t(n)}}(t,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)Hr(t[n]);for(var r=0;r<t.length;r++)(i=t[r]).updatedDisplay=i.mustUpdate&&ni(i.cm,i.update);for(var i,o=0;o<t.length;o++)Kr(t[o]);for(var a=0;a<t.length;a++)Qr(t[a]);for(var s=0;s<t.length;s++)Gr(t[s])}(e)})}function Hr(e){var t=e.cm,n=t.display;!function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Cn(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Cn(e)+"px",t.scrollbarsClipped=!0)}(t),e.updateMaxLine&&zt(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new ti(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Kr(e){var t=e.cm,n=t.display;e.updatedDisplay&&Tr(t),e.barMeasure=Mr(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Nn(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Cn(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-kn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function Qr(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Pr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==D();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Ur(t,e.barMeasure),e.updatedDisplay&&ai(t,e.barMeasure),e.selectionChanged&&vr(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&br(e.cm)}function Gr(e){var t=e.cm,n=t.display,r=t.doc;if(e.updatedDisplay&&ri(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Rr(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Pr(t,e.scrollLeft,!0,!0),e.scrollToPos){var i=function(e,t,n,r){var i;null==r&&(r=0),e.options.lineWrapping||t!=n||(t=t.ch?Ze(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t,n="before"==t.sticky?Ze(t.line,t.ch+1,"before"):t);for(var o=0;o<5;o++){var a=!1,s=Kn(e,t),u=n&&n!=t?Kn(e,n):s;i={left:Math.min(s.left,u.left),top:Math.min(s.top,u.top)-r,right:Math.max(s.left,u.left),bottom:Math.max(s.bottom,u.bottom)+r};var c=kr(e,i),l=e.doc.scrollTop,h=e.doc.scrollLeft;if(null!=c.scrollTop&&(Dr(e,c.scrollTop),Math.abs(e.doc.scrollTop-l)>1&&(a=!0)),null!=c.scrollLeft&&(Pr(e,c.scrollLeft),Math.abs(e.doc.scrollLeft-h)>1&&(a=!0)),!a)break}return i}(t,at(r,e.scrollToPos.from),at(r,e.scrollToPos.to),e.scrollToPos.margin);!function(e,t){if(!ye(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!d){var o=N("div","\u200b",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-En(e.display))+"px;\n                         height: "+(t.bottom-t.top+Cn(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}}(t,i)}var o=e.maybeHiddenMarkers,a=e.maybeUnhiddenMarkers;if(o)for(var s=0;s<o.length;++s)o[s].lines.length||me(o[s],"hide");if(a)for(var u=0;u<a.length;++u)a[u].lines.length&&me(a[u],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&me(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Yr(e,t){if(e.curOp)return t();Wr(e);try{return t()}finally{zr(e)}}function Xr(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Wr(e);try{return t.apply(e,arguments)}finally{zr(e)}}}function $r(e){return function(){if(this.curOp)return e.apply(this,arguments);Wr(this);try{return e.apply(this,arguments)}finally{zr(this)}}}function Jr(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Wr(t);try{return e.apply(this,arguments)}finally{zr(t)}}}function Zr(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,L(ei,e))}function ei(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=ft(e,t.highlightFrontier),i=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(r.line>=e.display.viewFrom){var a=o.styles,s=o.text.length>e.options.maxHighlightLength?Be(t.mode,r.state):null,u=lt(e,o,r,!0);s&&(r.state=s),o.styles=u.styles;var c=o.styleClasses,l=u.classes;l?o.styleClasses=l:c&&(o.styleClasses=null);for(var h=!a||a.length!=o.styles.length||c!=l&&(!c||!l||c.bgClass!=l.bgClass||c.textClass!=l.textClass),f=0;!h&&f<a.length;++f)h=a[f]!=o.styles[f];h&&i.push(r.line),o.stateAfter=r.save(),r.nextLine()}else o.text.length<=e.options.maxHighlightLength&&pt(e,o.text,r),o.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return Zr(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),i.length&&Yr(e,function(){for(var t=0;t<i.length;t++)cr(e,i[t],"text")})}}var ti=function(e,t,n){var r=e.display;this.viewport=t,this.visible=Cr(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=kn(e),this.force=n,this.dims=nr(e),this.events=[]};function ni(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return lr(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==fr(e))return!1;ui(e)&&(lr(e),t.dims=nr(e));var i=r.first+r.size,o=Math.max(t.visible.from-e.options.viewportMargin,r.first),a=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(r.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(i,n.viewTo)),_t&&(o=Ut(e.doc,o),a=jt(e.doc,a));var s=o!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;!function(e,t,n){var r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=rn(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=rn(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(sr(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(rn(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,sr(e,n)))),r.viewTo=n}(e,o,a),n.viewOffset=Vt(He(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var c=fr(e);if(!s&&0==c&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var l=function(e){if(e.hasFocus())return null;var t=D();if(!t||!O(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&O(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(e);return c>4&&(n.lineDiv.style.display="none"),function(e,t,n){var r=e.display,i=e.options.lineNumbers,o=r.lineDiv,a=o.firstChild;function s(t){var n=t.nextSibling;return u&&v&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var c=r.view,l=r.viewFrom,h=0;h<c.length;h++){var f=c[h];if(f.hidden);else if(f.node&&f.node.parentNode==o){for(;a!=f.node;)a=s(a);var p=i&&null!=t&&t<=l&&f.lineNumber;f.changes&&(q(f.changes,"gutter")>-1&&(p=!1),cn(e,f,l,n)),p&&(I(f.lineNumber),f.lineNumber.appendChild(document.createTextNode(Je(e.options,l)))),a=f.node.nextSibling}else{var d=yn(e,f,l,n);o.insertBefore(d,a)}l+=f.size}for(;a;)a=s(a)}(e,n.updateLineNumbers,t.dims),c>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(e&&e.activeElt&&e.activeElt!=D()&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&O(document.body,e.anchorNode)&&O(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(l),I(n.cursorDiv),I(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,s&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,Zr(e,400)),n.updateLineNumbers=null,!0}function ri(e,t){for(var n=t.viewport,r=!0;;r=!1){if(r&&e.options.lineWrapping&&t.oldDisplayWidth!=kn(e))r&&(t.visible=Cr(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+Tn(e.display)-In(e),n.top)}),t.visible=Cr(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!ni(e,t))break;Tr(e);var i=Mr(e);pr(e),Ur(e,i),ai(e,i),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function ii(e,t){var n=new ti(e,t);if(ni(e,n)){Tr(e),ri(e,n);var r=Mr(e);pr(e),Ur(e,r),ai(e,r),n.finish()}}function oi(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px"}function ai(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Cn(e)+"px"}function si(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=rr(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=r+"px",a=0;a<n.length;a++)if(!n[a].hidden){e.options.fixedGutter&&(n[a].gutter&&(n[a].gutter.style.left=o),n[a].gutterBackground&&(n[a].gutterBackground.style.left=o));var s=n[a].alignable;if(s)for(var u=0;u<s.length;u++)s[u].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function ui(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=Je(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(N("div",[N("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,a=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-a)+1,r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",oi(e.display),!0}return!1}function ci(e,t){for(var n=[],r=!1,i=0;i<e.length;i++){var o=e[i],a=null;if("string"!=typeof o&&(a=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!t)continue;r=!0}n.push({className:o,style:a})}return t&&!r&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function li(e){var t=e.gutters,n=e.gutterSpecs;I(t),e.lineGutter=null;for(var r=0;r<n.length;++r){var i=n[r],o=i.className,a=i.style,s=t.appendChild(N("div",null,"CodeMirror-gutter "+o));a&&(s.style.cssText=a),"CodeMirror-linenumbers"==o&&(e.lineGutter=s,s.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",oi(e)}function hi(e){li(e.display),ur(e),si(e)}function fi(e,t,r,i){var o=this;this.input=r,o.scrollbarFiller=N("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=N("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=A("div",null,"CodeMirror-code"),o.selectionDiv=N("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=N("div",null,"CodeMirror-cursors"),o.measure=N("div",null,"CodeMirror-measure"),o.lineMeasure=N("div",null,"CodeMirror-measure"),o.lineSpace=A("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var c=A("div",[o.lineSpace],"CodeMirror-lines");o.mover=N("div",[c],null,"position: relative"),o.sizer=N("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=N("div",null,null,"position: absolute; height: "+B+"px; width: 1px;"),o.gutters=N("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=N("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=N("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),a&&s<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),u||n&&g||(o.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(o.wrapper):e(o.wrapper)),o.viewFrom=o.viewTo=t.first,o.reportedViewFrom=o.reportedViewTo=t.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=ci(i.gutters,i.lineNumbers),li(o),r.init(o)}ti.prototype.signal=function(e,t){ve(e,t)&&this.events.push(arguments)},ti.prototype.finish=function(){for(var e=0;e<this.events.length;e++)me.apply(null,this.events[e])};var pi=0,di=null;function mi(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function yi(e){var t=mi(e);return t.x*=di,t.y*=di,t}function gi(e,t){var r=mi(t),i=r.x,o=r.y,a=e.display,s=a.scroller,c=s.scrollWidth>s.clientWidth,l=s.scrollHeight>s.clientHeight;if(i&&c||o&&l){if(o&&v&&u)e:for(var f=t.target,p=a.view;f!=s;f=f.parentNode)for(var d=0;d<p.length;d++)if(p[d].node==f){e.display.currentWheelTarget=f;break e}if(i&&!n&&!h&&null!=di)return o&&l&&Dr(e,Math.max(0,s.scrollTop+o*di)),Pr(e,Math.max(0,s.scrollLeft+i*di)),(!o||o&&l)&&we(t),void(a.wheelStartX=null);if(o&&null!=di){var m=o*di,y=e.doc.scrollTop,g=y+a.wrapper.clientHeight;m<0?y=Math.max(0,y+m-50):g=Math.min(e.doc.height,g+m+50),ii(e,{top:y,bottom:g})}pi<20&&(null==a.wheelStartX?(a.wheelStartX=s.scrollLeft,a.wheelStartY=s.scrollTop,a.wheelDX=i,a.wheelDY=o,setTimeout(function(){if(null!=a.wheelStartX){var e=s.scrollLeft-a.wheelStartX,t=s.scrollTop-a.wheelStartY,n=t&&a.wheelDY&&t/a.wheelDY||e&&a.wheelDX&&e/a.wheelDX;a.wheelStartX=a.wheelStartY=null,n&&(di=(di*pi+n)/(pi+1),++pi)}},200)):(a.wheelDX+=i,a.wheelDY+=o))}}a?di=-.53:n?di=15:l?di=-.7:f&&(di=-1/3);var vi=function(e,t){this.ranges=e,this.primIndex=t};vi.prototype.primary=function(){return this.ranges[this.primIndex]},vi.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!tt(n.anchor,r.anchor)||!tt(n.head,r.head))return!1}return!0},vi.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new bi(nt(this.ranges[t].anchor),nt(this.ranges[t].head));return new vi(e,this.primIndex)},vi.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},vi.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(et(t,r.from())>=0&&et(e,r.to())<=0)return n}return-1};var bi=function(e,t){this.anchor=e,this.head=t};function wi(e,t,n){var r=e&&e.options.selectionsMayTouch,i=t[n];t.sort(function(e,t){return et(e.from(),t.from())}),n=q(t,i);for(var o=1;o<t.length;o++){var a=t[o],s=t[o-1],u=et(s.to(),a.from());if(r&&!a.empty()?u>0:u>=0){var c=it(s.from(),a.from()),l=rt(s.to(),a.to()),h=s.empty()?a.from()==a.head:s.from()==s.head;o<=n&&--n,t.splice(--o,2,new bi(h?l:c,h?c:l))}}return new vi(t,n)}function _i(e,t){return new vi([new bi(e,t||e)],0)}function Ei(e){return e.text?Ze(e.from.line+e.text.length-1,Y(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Ti(e,t){if(et(e,t.from)<0)return e;if(et(e,t.to)<=0)return Ei(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=Ei(t).ch-t.to.ch),Ze(n,r)}function Si(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new bi(Ti(i.anchor,t),Ti(i.head,t)))}return wi(e.cm,n,e.sel.primIndex)}function Ci(e,t,n){return e.line==t.line?Ze(n.line,e.ch-t.ch+n.ch):Ze(n.line+(e.line-t.line),e.ch)}function ki(e){e.doc.mode=Ue(e.options,e.doc.modeOption),Ii(e)}function Ii(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Zr(e,100),e.state.modeGen++,e.curOp&&ur(e)}function xi(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Y(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Ni(e,t,n,r){function i(e){return n?n[e]:null}function o(e,n,i){!function(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),It(e),xt(e,n);var i=r?r(e):1;i!=e.height&&Ge(e,i)}(e,n,i,r),sn(e,"change",e,t)}function a(e,t){for(var n=[],o=e;o<t;++o)n.push(new Ht(c[o],i(o),r));return n}var s=t.from,u=t.to,c=t.text,l=He(e,s.line),h=He(e,u.line),f=Y(c),p=i(c.length-1),d=u.line-s.line;if(t.full)e.insert(0,a(0,c.length)),e.remove(c.length,e.size-c.length);else if(xi(e,t)){var m=a(0,c.length-1);o(h,h.text,p),d&&e.remove(s.line,d),m.length&&e.insert(s.line,m)}else if(l==h)if(1==c.length)o(l,l.text.slice(0,s.ch)+f+l.text.slice(u.ch),p);else{var y=a(1,c.length-1);y.push(new Ht(f+l.text.slice(u.ch),p,r)),o(l,l.text.slice(0,s.ch)+c[0],i(0)),e.insert(s.line+1,y)}else if(1==c.length)o(l,l.text.slice(0,s.ch)+c[0]+h.text.slice(u.ch),i(0)),e.remove(s.line+1,d);else{o(l,l.text.slice(0,s.ch)+c[0],i(0)),o(h,f+h.text.slice(u.ch),p);var g=a(1,c.length-1);d>1&&e.remove(s.line+1,d-1),e.insert(s.line+1,g)}sn(e,"change",e,t)}function Ai(e,t,n){!function e(r,i,o){if(r.linked)for(var a=0;a<r.linked.length;++a){var s=r.linked[a];if(s.doc!=i){var u=o&&s.sharedHist;n&&!u||(t(s.doc,u),e(s.doc,r,u))}}}(e,null,!0)}function Oi(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,or(e),ki(e),Di(e),e.options.lineWrapping||zt(e),e.options.mode=t.modeOption,ur(e)}function Di(e){("rtl"==e.doc.direction?R:k)(e.display.lineDiv,"CodeMirror-rtl")}function Ri(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Pi(e,t){var n={from:nt(t.from),to:Ei(t),text:Ke(e,t.from,t.to)};return ji(e,n,t.from.line,t.to.line+1),Ai(e,function(e){return ji(e,n,t.from.line,t.to.line+1)},!0),n}function Mi(e){for(;e.length;){var t=Y(e);if(!t.ranges)break;e.pop()}}function Li(e,t,n,r){var i=e.history;i.undone.length=0;var o,a,s=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>s-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=function(e,t){return t?(Mi(e.done),Y(e.done)):e.done.length&&!Y(e.done).ranges?Y(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),Y(e.done)):void 0}(i,i.lastOp==r)))a=Y(o.changes),0==et(t.from,t.to)&&0==et(t.from,a.to)?a.to=Ei(t):o.changes.push(Pi(e,t));else{var u=Y(i.done);for(u&&u.ranges||Ui(e.sel,i.done),o={changes:[Pi(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=s,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,a||me(e,"historyAdded")}function Fi(e,t,n,r){var i=e.history,o=r&&r.origin;n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||function(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,o,Y(i.done),t))?i.done[i.done.length-1]=t:Ui(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=n,r&&!1!==r.clearRedo&&Mi(i.undone)}function Ui(e,t){var n=Y(t);n&&n.ranges&&n.equals(e)||t.push(e)}function ji(e,t,n,r){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=n.markedSpans),++o})}function qi(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Bi(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(qi(n[i]));return r}(e,t),r=Ct(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],a=r[i];if(o&&a)e:for(var s=0;s<a.length;++s){for(var u=a[s],c=0;c<o.length;++c)if(o[c].marker==u.marker)continue e;o.push(u)}else a&&(n[i]=a)}return n}function Vi(e,t,n){for(var r=[],i=0;i<e.length;++i){var o=e[i];if(o.ranges)r.push(n?vi.prototype.deepCopy.call(o):o);else{var a=o.changes,s=[];r.push({changes:s});for(var u=0;u<a.length;++u){var c=a[u],l=void 0;if(s.push({from:c.from,to:c.to,text:c.text}),t)for(var h in c)(l=h.match(/^spans_(\d+)$/))&&q(t,Number(l[1]))>-1&&(Y(s)[h]=c[h],delete c[h])}}}return r}function Wi(e,t,n,r){if(r){var i=e.anchor;if(n){var o=et(t,i)<0;o!=et(n,i)<0?(i=t,t=n):o!=et(t,n)<0&&(t=n)}return new bi(i,t)}return new bi(n||t,t)}function zi(e,t,n,r,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),Yi(e,new vi([Wi(e.sel.primary(),t,n,i)],0),r)}function Hi(e,t,n){for(var r=[],i=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)r[o]=Wi(e.sel.ranges[o],t[o],null,i);var a=wi(e.cm,r,e.sel.primIndex);Yi(e,a,n)}function Ki(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,Yi(e,wi(e.cm,i,e.sel.primIndex),r)}function Qi(e,t,n,r){Yi(e,_i(t,n),r)}function Gi(e,t,n){var r=e.history.done,i=Y(r);i&&i.ranges?(r[r.length-1]=t,Xi(e,t,n)):Yi(e,t,n)}function Yi(e,t,n){Xi(e,t,n),Fi(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Xi(e,t,n){(ve(e,"beforeSelectionChange")||e.cm&&ve(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){var r={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new bi(at(e,t[n].anchor),at(e,t[n].head))},origin:n&&n.origin};return me(e,"beforeSelectionChange",e,r),e.cm&&me(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?wi(e.cm,r.ranges,r.ranges.length-1):t}(e,t,n));var r=n&&n.bias||(et(t.primary().head,e.sel.primary().head)<0?-1:1);$i(e,Zi(e,t,r,!0)),n&&!1===n.scroll||!e.cm||xr(e.cm)}function $i(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,ge(e.cm)),sn(e,"cursorActivity",e))}function Ji(e){$i(e,Zi(e,e.sel,null,!1))}function Zi(e,t,n,r){for(var i,o=0;o<t.ranges.length;o++){var a=t.ranges[o],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],u=to(e,a.anchor,s&&s.anchor,n,r),c=to(e,a.head,s&&s.head,n,r);(i||u!=a.anchor||c!=a.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new bi(u,c))}return i?wi(e.cm,i,t.primIndex):t}function eo(e,t,n,r,i){var o=He(e,t.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var s=o.markedSpans[a],u=s.marker,c="selectLeft"in u?!u.selectLeft:u.inclusiveLeft,l="selectRight"in u?!u.selectRight:u.inclusiveRight;if((null==s.from||(c?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(l?s.to>=t.ch:s.to>t.ch))){if(i&&(me(u,"beforeCursorEnter"),u.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!u.atomic)continue;if(n){var h=u.find(r<0?1:-1),f=void 0;if((r<0?l:c)&&(h=no(e,h,-r,h&&h.line==t.line?o:null)),h&&h.line==t.line&&(f=et(h,n))&&(r<0?f<0:f>0))return eo(e,h,t,r,i)}var p=u.find(r<0?-1:1);return(r<0?c:l)&&(p=no(e,p,r,p.line==t.line?o:null)),p?eo(e,p,t,r,i):null}}return t}function to(e,t,n,r,i){var o=r||1,a=eo(e,t,n,o,i)||!i&&eo(e,t,n,o,!0)||eo(e,t,n,-o,i)||!i&&eo(e,t,n,-o,!0);return a||(e.cantEdit=!0,Ze(e.first,0))}function no(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?at(e,Ze(t.line-1)):null:n>0&&t.ch==(r||He(e,t.line)).text.length?t.line<e.first+e.size-1?Ze(t.line+1,0):null:new Ze(t.line,t.ch+n)}function ro(e){e.setSelection(Ze(e.firstLine(),0),Ze(e.lastLine()),W)}function io(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(t,n,i,o){t&&(r.from=at(e,t)),n&&(r.to=at(e,n)),i&&(r.text=i),void 0!==o&&(r.origin=o)}),me(e,"beforeChange",e,r),e.cm&&me(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function oo(e,t,n){if(e.cm){if(!e.cm.curOp)return Xr(e.cm,oo)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(ve(e,"beforeChange")||e.cm&&ve(e.cm,"beforeChange"))||(t=io(e,t,!0))){var r=wt&&!n&&function(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=q(r,n)||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var a=r[o],s=a.find(0),u=0;u<i.length;++u){var c=i[u];if(!(et(c.to,s.from)<0||et(c.from,s.to)>0)){var l=[u,1],h=et(c.from,s.from),f=et(c.to,s.to);(h<0||!a.inclusiveLeft&&!h)&&l.push({from:c.from,to:s.from}),(f>0||!a.inclusiveRight&&!f)&&l.push({from:s.to,to:c.to}),i.splice.apply(i,l),u+=l.length-3}}return i}(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)ao(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text,origin:t.origin});else ao(e,t)}}function ao(e,t){if(1!=t.text.length||""!=t.text[0]||0!=et(t.from,t.to)){var n=Si(e,t);Li(e,t,n,e.cm?e.cm.curOp.id:NaN),co(e,t,n,Ct(e,t));var r=[];Ai(e,function(e,n){n||-1!=q(r,e.history)||(po(e.history,t),r.push(e.history)),co(e,t,null,Ct(e,t))})}}function so(e,t,n){var r=e.cm&&e.cm.state.suppressEdits;if(!r||n){for(var i,o=e.history,a=e.sel,s="undo"==t?o.done:o.undone,u="undo"==t?o.undone:o.done,c=0;c<s.length&&(i=s[c],n?!i.ranges||i.equals(e.sel):i.ranges);c++);if(c!=s.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(i=s.pop()).ranges){if(r)return void s.push(i);break}if(Ui(i,u),n&&!i.equals(e.sel))return void Yi(e,i,{clearRedo:!1});a=i}var l=[];Ui(a,u),u.push({changes:l,generation:o.generation}),o.generation=i.generation||++o.maxGeneration;for(var h=ve(e,"beforeChange")||e.cm&&ve(e.cm,"beforeChange"),f=function(n){var r=i.changes[n];if(r.origin=t,h&&!io(e,r,!1))return s.length=0,{};l.push(Pi(e,r));var o=n?Si(e,r):Y(s);co(e,r,o,Bi(e,r)),!n&&e.cm&&e.cm.scrollIntoView({from:r.from,to:Ei(r)});var a=[];Ai(e,function(e,t){t||-1!=q(a,e.history)||(po(e.history,r),a.push(e.history)),co(e,r,null,Bi(e,r))})},p=i.changes.length-1;p>=0;--p){var d=f(p);if(d)return d.v}}}}function uo(e,t){if(0!=t&&(e.first+=t,e.sel=new vi(X(e.sel.ranges,function(e){return new bi(Ze(e.anchor.line+t,e.anchor.ch),Ze(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){ur(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)cr(e.cm,r,"gutter")}}function co(e,t,n,r){if(e.cm&&!e.cm.curOp)return Xr(e.cm,co)(e,t,n,r);if(t.to.line<e.first)uo(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);uo(e,i),t={from:Ze(e.first,0),to:Ze(t.to.line+i,t.to.ch),text:[Y(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:Ze(o,He(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Ke(e,t.from,t.to),n||(n=Si(e,t)),e.cm?function(e,t,n){var r=e.doc,i=e.display,o=t.from,a=t.to,s=!1,u=o.line;e.options.lineWrapping||(u=Ye(Ft(He(r,o.line))),r.iter(u,a.line+1,function(e){if(e==i.maxLine)return s=!0,!0})),r.sel.contains(t.from,t.to)>-1&&ge(e),Ni(r,t,n,ir(e)),e.options.lineWrapping||(r.iter(u,o.line+t.text.length,function(e){var t=Wt(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;r>n;r--){var i=He(e,r).stateAfter;if(i&&(!(i instanceof ut)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(r,o.line),Zr(e,400);var c=t.text.length-(a.line-o.line)-1;t.full?ur(e):o.line!=a.line||1!=t.text.length||xi(e.doc,t)?ur(e,o.line,a.line+1,c):cr(e,o.line,"text");var l=ve(e,"changes"),h=ve(e,"change");if(h||l){var f={from:o,to:a,text:t.text,removed:t.removed,origin:t.origin};h&&sn(e,"change",e,f),l&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(f)}e.display.selForContextMenu=null}(e.cm,t,r):Ni(e,t,r),Xi(e,n,W),e.cantEdit&&to(e,Ze(e.firstLine(),0))&&(e.cantEdit=!1)}}function lo(e,t,n,r,i){var o;r||(r=n),et(r,n)<0&&(n=(o=[r,n])[0],r=o[1]),"string"==typeof t&&(t=e.splitLines(t)),oo(e,{from:n,to:r,text:t,origin:i})}function ho(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function fo(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i],a=!0;if(o.ranges){o.copied||((o=e[i]=o.deepCopy()).copied=!0);for(var s=0;s<o.ranges.length;s++)ho(o.ranges[s].anchor,t,n,r),ho(o.ranges[s].head,t,n,r)}else{for(var u=0;u<o.changes.length;++u){var c=o.changes[u];if(n<c.from.line)c.from=Ze(c.from.line+r,c.from.ch),c.to=Ze(c.to.line+r,c.to.ch);else if(t<=c.to.line){a=!1;break}}a||(e.splice(0,i+1),i=0)}}}function po(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;fo(e.done,n,r,i),fo(e.undone,n,r,i)}function mo(e,t,n,r){var i=t,o=t;return"number"==typeof t?o=He(e,ot(e,t)):i=Ye(t),null==i?null:(r(o,i)&&e.cm&&cr(e.cm,i,n),o)}function yo(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function go(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}bi.prototype.from=function(){return it(this.anchor,this.head)},bi.prototype.to=function(){return rt(this.anchor,this.head)},bi.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},yo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,Kt(i),sn(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},go.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var o=Math.min(t,i-e),a=r.height;if(r.removeInner(e,o),this.height-=a-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof yo))){var s=[];this.collapse(s),this.children=[new yo(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<=o){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var a=i.lines.length%25+25,s=a;s<i.lines.length;){var u=new yo(i.lines.slice(s,s+=25));i.height-=u.height,this.children.splice(++r,0,u),u.parent=this}i.lines=i.lines.slice(0,a),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new go(t);if(e.parent){e.size-=n.size,e.height-=n.height;var r=q(e.parent.children,e);e.parent.children.splice(r+1,0,n)}else{var i=new go(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<o){var a=Math.min(t,o-e);if(i.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=o}}};var vo=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};function bo(e,t,n){Vt(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Ir(e,n)}vo.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=Ye(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var o=wn(this);Ge(n,Math.max(0,n.height-o)),e&&(Yr(e,function(){bo(e,n,-o),cr(e,r,"widget")}),sn(e,"lineWidgetCleared",e,this,r))}},vo.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=wn(this)-t;i&&(qt(this.doc,r)||Ge(r,r.height+i),n&&Yr(n,function(){n.curOp.forceUpdate=!0,bo(n,r,i),sn(n,"lineWidgetChanged",n,e,Ye(r))}))},be(vo);var wo=0,_o=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++wo};function Eo(e,t,n,r,i){if(r&&r.shared)return function(e,t,n,r,i){(r=F(r)).shared=!1;var o=[Eo(e,t,n,r,i)],a=o[0],s=r.widgetNode;return Ai(e,function(e){s&&(r.widgetNode=s.cloneNode(!0)),o.push(Eo(e,at(e,t),at(e,n),r,i));for(var u=0;u<e.linked.length;++u)if(e.linked[u].isParent)return;a=Y(o)}),new To(o,a)}(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Xr(e.cm,Eo)(e,t,n,r,i);var o=new _o(e,i),a=et(t,n);if(r&&F(r,o,!1),a>0||0==a&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=A("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Lt(e,t.line,t,n,o)||t.line!=n.line&&Lt(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");_t=!0}o.addToHistory&&Li(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var s,u=t.line,c=e.cm;if(e.iter(u,n.line+1,function(e){c&&o.collapsed&&!c.options.lineWrapping&&Ft(e)==c.display.maxLine&&(s=!0),o.collapsed&&u!=t.line&&Ge(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new Et(o,u==t.line?t.ch:null,u==n.line?n.ch:null)),++u}),o.collapsed&&e.iter(t.line,n.line+1,function(t){qt(e,t)&&Ge(t,0)}),o.clearOnEnter&&fe(o,"beforeCursorEnter",function(){return o.clear()}),o.readOnly&&(wt=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++wo,o.atomic=!0),c){if(s&&(c.curOp.updateMaxLine=!0),o.collapsed)ur(c,t.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var l=t.line;l<=n.line;l++)cr(c,l,"text");o.atomic&&Ji(c.doc),sn(c,"markerAdded",c,o)}return o}_o.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Wr(e),ve(this,"clear")){var n=this.find();n&&sn(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var a=this.lines[o],s=Tt(a.markedSpans,this);e&&!this.collapsed?cr(e,Ye(a),"text"):e&&(null!=s.to&&(i=Ye(a)),null!=s.from&&(r=Ye(a))),a.markedSpans=St(a.markedSpans,s),null==s.from&&this.collapsed&&!qt(this.doc,a)&&e&&Ge(a,er(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var u=0;u<this.lines.length;++u){var c=Ft(this.lines[u]),l=Wt(c);l>e.display.maxLineLength&&(e.display.maxLine=c,e.display.maxLineLength=l,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&ur(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Ji(e.doc)),e&&sn(e,"markerCleared",e,this,r,i),t&&zr(e),this.parent&&this.parent.clear()}},_o.prototype.find=function(e,t){var n,r;null==e&&"bookmark"==this.type&&(e=1);for(var i=0;i<this.lines.length;++i){var o=this.lines[i],a=Tt(o.markedSpans,this);if(null!=a.from&&(n=Ze(t?o:Ye(o),a.from),-1==e))return n;if(null!=a.to&&(r=Ze(t?o:Ye(o),a.to),1==e))return r}return n&&{from:n,to:r}},_o.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,r=this.doc.cm;t&&r&&Yr(r,function(){var i=t.line,o=Ye(t.line),a=An(r,o);if(a&&(Fn(a),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!qt(n.doc,i)&&null!=n.height){var s=n.height;n.height=null;var u=wn(n)-s;u&&Ge(i,i.height+u)}sn(r,"markerChanged",r,e)})},_o.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=q(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},_o.prototype.detachLine=function(e){if(this.lines.splice(q(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},be(_o);var To=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function So(e){return e.findMarks(Ze(e.first,0),e.clipPos(Ze(e.lastLine())),function(e){return e.parent})}function Co(e){for(var t=function(t){var n=e[t],r=[n.primary.doc];Ai(n.primary.doc,function(e){return r.push(e)});for(var i=0;i<n.markers.length;i++){var o=n.markers[i];-1==q(r,o.doc)&&(o.parent=null,n.markers.splice(i--,1))}},n=0;n<e.length;n++)t(n)}To.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();sn(this,"clear")}},To.prototype.find=function(e,t){return this.primary.find(e,t)},be(To);var ko=0,Io=function e(t,n,r,i,o){if(!(this instanceof e))return new e(t,n,r,i,o);null==r&&(r=0),go.call(this,[new yo([new Ht("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=r;var a=Ze(r,0);this.sel=_i(a),this.history=new Ri(null),this.id=++ko,this.modeOption=n,this.lineSep=i,this.direction="rtl"==o?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),Ni(this,{from:a,to:a,text:t}),Yi(this,_i(a),W)};Io.prototype=J(go.prototype,{constructor:Io,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Qe(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Jr(function(e){var t=Ze(this.first,0),n=this.first+this.size-1;oo(this,{from:t,to:Ze(n,He(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Nr(this.cm,0,0),Yi(this,_i(t),W)}),replaceRange:function(e,t,n,r){t=at(this,t),n=n?at(this,n):t,lo(this,e,t,n,r)},getRange:function(e,t,n){var r=Ke(this,at(this,e),at(this,t));return!1===n?r:r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if($e(this,e))return He(this,e)},getLineNumber:function(e){return Ye(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=He(this,e)),Ft(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return at(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Jr(function(e,t,n){Qi(this,at(this,"number"==typeof e?Ze(e,t||0):e),null,n)}),setSelection:Jr(function(e,t,n){Qi(this,at(this,e),at(this,t||e),n)}),extendSelection:Jr(function(e,t,n){zi(this,at(this,e),t&&at(this,t),n)}),extendSelections:Jr(function(e,t){Hi(this,st(this,e),t)}),extendSelectionsBy:Jr(function(e,t){var n=X(this.sel.ranges,e);Hi(this,st(this,n),t)}),setSelections:Jr(function(e,t,n){if(e.length){for(var r=[],i=0;i<e.length;i++)r[i]=new bi(at(this,e[i].anchor),at(this,e[i].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Yi(this,wi(this.cm,r,t),n)}}),addSelection:Jr(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new bi(at(this,e),at(this,t||e))),Yi(this,wi(this.cm,r,r.length-1),n)}),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var i=Ke(this,n[r].from(),n[r].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=Ke(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:Jr(function(e,t,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var a=i.ranges[o];r[o]={from:a.from(),to:a.to(),text:this.splitLines(e[o]),origin:n}}for(var s=t&&"end"!=t&&function(e,t,n){for(var r=[],i=Ze(e.first,0),o=i,a=0;a<t.length;a++){var s=t[a],u=Ci(s.from,i,o),c=Ci(Ei(s),i,o);if(i=s.to,o=c,"around"==n){var l=e.sel.ranges[a],h=et(l.head,l.anchor)<0;r[a]=new bi(h?c:u,h?u:c)}else r[a]=new bi(u,u)}return new vi(r,e.sel.primIndex)}(this,r,t),u=r.length-1;u>=0;u--)oo(this,r[u]);s?Gi(this,s):this.cm&&xr(this.cm)}),undo:Jr(function(){so(this,"undo")}),redo:Jr(function(){so(this,"redo")}),undoSelection:Jr(function(){so(this,"undo",!0)}),redoSelection:Jr(function(){so(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new Ri(this.history.maxGeneration),Ai(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Vi(this.history.done),undone:Vi(this.history.undone)}},setHistory:function(e){var t=this.history=new Ri(this.history.maxGeneration);t.done=Vi(e.done.slice(0),null,!0),t.undone=Vi(e.undone.slice(0),null,!0)},setGutterMarker:Jr(function(e,t,n){return mo(this,e,"gutter",function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&ne(r)&&(e.gutterMarkers=null),!0})}),clearGutter:Jr(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&mo(t,n,"gutter",function(){return n.gutterMarkers[e]=null,ne(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!$e(this,e))return null;if(t=e,!(e=He(this,e)))return null}else if(null==(t=Ye(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Jr(function(e,t,n){return mo(this,e,"gutter"==t?"gutter":"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[r]){if(S(n).test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0})}),removeLineClass:Jr(function(e,t,n){return mo(this,e,"gutter"==t?"gutter":"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{var o=i.match(S(n));if(!o)return!1;var a=o.index+o[0].length;e[r]=i.slice(0,o.index)+(o.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0})}),addLineWidget:Jr(function(e,t,n){return function(e,t,n,r){var i=new vo(e,n,r),o=e.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),mo(e,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,o&&!qt(e,t)){var r=Vt(t)<e.scrollTop;Ge(t,t.height+wn(i)),r&&Ir(o,i.height),o.curOp.forceUpdate=!0}return!0}),o&&sn(o,"lineWidgetAdded",o,i,"number"==typeof t?t:Ye(t)),i}(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Eo(this,at(this,e),at(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return Eo(this,e=at(this,e),e,n,"bookmark")},findMarksAt:function(e){e=at(this,e);var t=[],n=He(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=at(this,e),t=at(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var a=o.markedSpans;if(a)for(var s=0;s<a.length;s++){var u=a[s];null!=u.to&&i==e.line&&e.ch>=u.to||null==u.from&&i!=e.line||null!=u.from&&i==t.line&&u.from>=t.ch||n&&!n(u.marker)||r.push(u.marker.parent||u.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter(function(i){var o=i.text.length+r;if(o>e)return t=e,!0;e-=o,++n}),at(this,Ze(n,t))},indexFromPos:function(e){var t=(e=at(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+n}),t},copy:function(e){var t=new Io(Qe(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new Io(Qe(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),o=e.clipPos(i.from),a=e.clipPos(i.to);if(et(o,a)){var s=Eo(e,o,a,r.primary,r.primary.type);r.markers.push(s),s.parent=r}}}(r,So(this)),r},unlinkDoc:function(e){if(e instanceof Ta&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){var n=this.linked[t];if(n.doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Co(So(this));break}}if(e.history==this.history){var r=[e.id];Ai(e,function(e){return r.push(e.id)},!0),e.history=new Ri(null),e.history.done=Vi(this.history.done,r),e.history.undone=Vi(this.history.undone,r)}},iterLinkedDocs:function(e){Ai(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Oe(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Jr(function(e){var t;"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&Yr(t=this.cm,function(){Di(t),ur(t)}))})}),Io.prototype.eachLine=Io.prototype.iter;var xo=0;function No(e){var t=this;if(Ao(t),!ye(t,e)&&!_n(t.display,e)){we(e),a&&(xo=+new Date);var n=ar(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),s=0,u=function(){++s==i&&Xr(t,function(){var e={from:n=at(t.doc,n),to:n,text:t.doc.splitLines(o.filter(function(e){return null!=e}).join(t.doc.lineSeparator())),origin:"paste"};oo(t.doc,e),Gi(t.doc,_i(at(t.doc,n),at(t.doc,Ei(e))))})()},c=function(e,n){if(t.options.allowDropFileTypes&&-1==q(t.options.allowDropFileTypes,e.type))u();else{var r=new FileReader;r.onerror=function(){return u()},r.onload=function(){var e=r.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)?u():(o[n]=e,u())},r.readAsText(e)}},l=0;l<r.length;l++)c(r[l],l);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var h=e.dataTransfer.getData("Text");if(h){var f;if(t.state.draggingText&&!t.state.draggingText.copy&&(f=t.listSelections()),Xi(t.doc,_i(n,n)),f)for(var p=0;p<f.length;++p)lo(t.doc,"",f[p].anchor,f[p].head,"drag");t.replaceSelection(h,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Ao(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Oo(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],r=0;r<t.length;r++){var i=t[r].CodeMirror;i&&n.push(i)}n.length&&n[0].operation(function(){for(var t=0;t<n.length;t++)e(n[t])})}}var Do=!1;function Ro(){Do||(function(){var e;fe(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Oo(Po)},100))}),fe(window,"blur",function(){return Oo(Er)})}(),Do=!0)}function Po(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Mo={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Lo=0;Lo<10;Lo++)Mo[Lo+48]=Mo[Lo+96]=String(Lo);for(var Fo=65;Fo<=90;Fo++)Mo[Fo]=String.fromCharCode(Fo);for(var Uo=1;Uo<=12;Uo++)Mo[Uo+111]=Mo[Uo+63235]="F"+Uo;var jo={};function qo(e){var t,n,r,i,o=e.split(/-(?!$)/);e=o[o.length-1];for(var a=0;a<o.length-1;a++){var s=o[a];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error("Unrecognized modifier name: "+s);r=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function Bo(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=X(n.split(" "),qo),o=0;o<i.length;o++){var a=void 0,s=void 0;o==i.length-1?(s=i.join(" "),a=r):(s=i.slice(0,o+1).join(" "),a="...");var u=t[s];if(u){if(u!=a)throw new Error("Inconsistent bindings for "+s)}else t[s]=a}delete e[n]}for(var c in t)e[c]=t[c];return e}function Vo(e,t,n,r){var i=(t=Ko(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Vo(e,t.fallthrough,n,r);for(var o=0;o<t.fallthrough.length;o++){var a=Vo(e,t.fallthrough[o],n,r);if(a)return a}}}function Wo(e){var t="string"==typeof e?e:Mo[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function zo(e,t,n){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(E?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(E?t.ctrlKey:t.metaKey)&&"Cmd"!=r&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function Ho(e,t){if(h&&34==e.keyCode&&e.char)return!1;var n=Mo[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),zo(n,e,t))}function Ko(e){return"string"==typeof e?jo[e]:e}function Qo(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=t(n[i]);r.length&&et(o.from,Y(r).to)<=0;){var a=r.pop();if(et(a.from,o.from)<0){o.from=a.from;break}}r.push(o)}Yr(e,function(){for(var t=r.length-1;t>=0;t--)lo(e.doc,"",r[t].from,r[t].to,"+delete");xr(e)})}function Go(e,t,n){var r=oe(e.text,t+n,n);return r<0||r>e.text.length?null:r}function Yo(e,t,n){var r=Go(e,t.ch,n);return null==r?null:new Ze(t.line,r,n<0?"after":"before")}function Xo(e,t,n,r,i){if(e){"rtl"==t.doc.direction&&(i=-i);var o=le(n,t.doc.direction);if(o){var a,s=i<0?Y(o):o[0],u=i<0==(1==s.level),c=u?"after":"before";if(s.level>0||"rtl"==t.doc.direction){var l=On(t,n);a=i<0?n.text.length-1:0;var h=Dn(t,l,a).top;a=ae(function(e){return Dn(t,l,e).top==h},i<0==(1==s.level)?s.from:s.to-1,a),"before"==c&&(a=Go(n,a,1))}else a=i<0?s.to:s.from;return new Ze(r,a,c)}}return new Ze(r,i<0?n.text.length:0,i<0?"before":"after")}jo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},jo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},jo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},jo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},jo.default=v?jo.macDefault:jo.pcDefault;var $o={selectAll:ro,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),W)},killLine:function(e){return Qo(e,function(t){if(t.empty()){var n=He(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:Ze(t.head.line+1,0)}:{from:t.head,to:Ze(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Qo(e,function(t){return{from:Ze(t.from().line,0),to:at(e.doc,Ze(t.to().line+1,0))}})},delLineLeft:function(e){return Qo(e,function(e){return{from:Ze(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return Qo(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return{from:r,to:t.from()}})},delWrappedLineRight:function(e){return Qo(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(Ze(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(Ze(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return Jo(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return Zo(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function(e,t){var n=He(e.doc,t),r=function(e){for(var t;t=Pt(e);)e=t.find(1,!0).line;return e}(n);return r!=n&&(t=Ye(r)),Xo(!0,e,n,t,-1)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},H)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},H)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?Zo(e,t.head):r},H)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),a=U(e.getLine(o.line),o.ch,r);t.push(G(r-a%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Yr(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var i=t[r].head,o=He(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new Ze(i.line,i.ch-1)),i.ch>0)i=new Ze(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),Ze(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var a=He(e.doc,i.line-1).text;a&&(i=new Ze(i.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+a.charAt(a.length-1),Ze(i.line-1,a.length-1),i,"+transpose"))}n.push(new bi(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){return Yr(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);xr(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Jo(e,t){var n=He(e.doc,t),r=Ft(n);return r!=n&&(t=Ye(r)),Xo(!0,e,r,t,1)}function Zo(e,t){var n=Jo(e,t.line),r=He(e.doc,n.line),i=le(r,e.doc.direction);if(!i||0==i[0].level){var o=Math.max(n.ch,r.text.search(/\S/)),a=t.line==n.line&&t.ch<=o&&t.ch;return Ze(n.line,a?0:o,n.sticky)}return n}function ea(e,t,n){if("string"==typeof t&&!(t=$o[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=V}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}var ta=new j;function na(e,t,n,r){var i=e.state.keySeq;if(i){if(Wo(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:ta.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),ra(e,i+" "+t,n,r))return!0}return ra(e,t,n,r)}function ra(e,t,n,r){var i=function(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=Vo(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&Vo(t,e.options.extraKeys,n,e)||Vo(t,e.options.keyMap,n,e)}(e,t,r);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&sn(e,"keyHandled",e,t,n),"handled"!=i&&"multi"!=i||(we(n),vr(e)),!!i}function ia(e,t){var n=Ho(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?na(e,"Shift-"+n,t,function(t){return ea(e,t,!0)})||na(e,n,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return ea(e,t)}):na(e,n,t,function(t){return ea(e,t)}))}var oa=null;function aa(e){var t=this;if((!e.target||e.target==t.display.input.getField())&&(t.curOp.focus=D(),!ye(t,e))){a&&s<11&&27==e.keyCode&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=16==r||e.shiftKey;var i=ia(t,e);h&&(oa=i?r:null,!i&&88==r&&!Re&&(v?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),n&&!v&&!i&&46==r&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=r||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(k(t,"CodeMirror-crosshair"),de(document,"keyup",n),de(document,"mouseover",n))}R(t,"CodeMirror-crosshair"),fe(document,"keyup",n),fe(document,"mouseover",n)}(t)}}function sa(e){16==e.keyCode&&(this.doc.sel.shift=!1),ye(this,e)}function ua(e){var t=this;if((!e.target||e.target==t.display.input.getField())&&!(_n(t.display,e)||ye(t,e)||e.ctrlKey&&!e.altKey||v&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(h&&n==oa)return oa=null,void we(e);if(!h||e.which&&!(e.which<10)||!ia(t,e)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(function(e,t,n){return na(e,"'"+n+"'",t,function(t){return ea(e,t,!0)})}(t,e,i)||t.display.input.onKeyPress(e))}}}var ca,la,ha=function(e,t,n){this.time=e,this.pos=t,this.button=n};function fa(e){var t=this,n=t.display;if(!(ye(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,_n(n,e))u||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100));else if(!ma(t,e)){var r=ar(t,e),i=Ce(e),o=r?function(e,t){var n=+new Date;return la&&la.compare(n,e,t)?(ca=la=null,"triple"):ca&&ca.compare(n,e,t)?(la=new ha(n,e,t),ca=null,"double"):(ca=new ha(n,e,t),la=null,"single")}(r,i):"single";window.focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),r&&function(e,t,n,r,i){var o="Click";return"double"==r?o="Double"+o:"triple"==r&&(o="Triple"+o),na(e,zo(o=(1==t?"Left":2==t?"Middle":"Right")+o,i),i,function(t){if("string"==typeof t&&(t=$o[t]),!t)return!1;var r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r=t(e,n)!=V}finally{e.state.suppressEdits=!1}return r})}(t,i,r,o,e)||(1==i?r?function(e,t,n,r){a?setTimeout(L(br,e),0):e.curOp.focus=D();var i,o=function(e,t,n){var r=e.getOption("configureMouse"),i=r?r(e,t,n):{};if(null==i.unit){var o=b?n.shiftKey&&n.metaKey:n.altKey;i.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey),null==i.addNew&&(i.addNew=v?n.metaKey:n.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(v?n.altKey:n.ctrlKey)),i}(e,n,r),c=e.doc.sel;e.options.dragDrop&&xe&&!e.isReadOnly()&&"single"==n&&(i=c.contains(t))>-1&&(et((i=c.ranges[i]).from(),t)<0||t.xRel>0)&&(et(i.to(),t)>0||t.xRel<0)?function(e,t,n,r){var i=e.display,o=!1,c=Xr(e,function(t){u&&(i.scroller.draggable=!1),e.state.draggingText=!1,de(i.wrapper.ownerDocument,"mouseup",c),de(i.wrapper.ownerDocument,"mousemove",l),de(i.scroller,"dragstart",h),de(i.scroller,"drop",c),o||(we(t),r.addNew||zi(e.doc,n,null,null,r.extend),u&&!f||a&&9==s?setTimeout(function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()},20):i.input.focus())}),l=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},h=function(){return o=!0};u&&(i.scroller.draggable=!0),e.state.draggingText=c,c.copy=!r.moveOnDrag,i.scroller.dragDrop&&i.scroller.dragDrop(),fe(i.wrapper.ownerDocument,"mouseup",c),fe(i.wrapper.ownerDocument,"mousemove",l),fe(i.scroller,"dragstart",h),fe(i.scroller,"drop",c),wr(e),setTimeout(function(){return i.input.focus()},20)}(e,r,t,o):function(e,t,n,r){var i=e.display,o=e.doc;we(t);var a,s,u=o.sel,c=u.ranges;if(r.addNew&&!r.extend?(s=o.sel.contains(n),a=s>-1?c[s]:new bi(n,n)):(a=o.sel.primary(),s=o.sel.primIndex),"rectangle"==r.unit)r.addNew||(a=new bi(n,n)),n=ar(e,t,!0,!0),s=-1;else{var l=pa(e,n,r.unit);a=r.extend?Wi(a,l.anchor,l.head,r.extend):l}r.addNew?-1==s?(s=c.length,Yi(o,wi(e,c.concat([a]),s),{scroll:!1,origin:"*mouse"})):c.length>1&&c[s].empty()&&"char"==r.unit&&!r.extend?(Yi(o,wi(e,c.slice(0,s).concat(c.slice(s+1)),0),{scroll:!1,origin:"*mouse"}),u=o.sel):Ki(o,s,a,z):(s=0,Yi(o,new vi([a],0),z),u=o.sel);var h=n;function f(t){if(0!=et(h,t))if(h=t,"rectangle"==r.unit){for(var i=[],c=e.options.tabSize,l=U(He(o,n.line).text,n.ch,c),f=U(He(o,t.line).text,t.ch,c),p=Math.min(l,f),d=Math.max(l,f),m=Math.min(n.line,t.line),y=Math.min(e.lastLine(),Math.max(n.line,t.line));m<=y;m++){var g=He(o,m).text,v=K(g,p,c);p==d?i.push(new bi(Ze(m,v),Ze(m,v))):g.length>v&&i.push(new bi(Ze(m,v),Ze(m,K(g,d,c))))}i.length||i.push(new bi(n,n)),Yi(o,wi(e,u.ranges.slice(0,s).concat(i),s),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b,w=a,_=pa(e,t,r.unit),E=w.anchor;et(_.anchor,E)>0?(b=_.head,E=it(w.from(),_.anchor)):(b=_.anchor,E=rt(w.to(),_.head));var T=u.ranges.slice(0);T[s]=function(e,t){var n=t.anchor,r=t.head,i=He(e.doc,n.line);if(0==et(n,r)&&n.sticky==r.sticky)return t;var o=le(i);if(!o)return t;var a=ue(o,n.ch,n.sticky),s=o[a];if(s.from!=n.ch&&s.to!=n.ch)return t;var u,c=a+(s.from==n.ch==(1!=s.level)?0:1);if(0==c||c==o.length)return t;if(r.line!=n.line)u=(r.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var l=ue(o,r.ch,r.sticky),h=l-a||(r.ch-n.ch)*(1==s.level?-1:1);u=l==c-1||l==c?h<0:h>0}var f=o[c+(u?-1:0)],p=u==(1==f.level),d=p?f.from:f.to,m=p?"after":"before";return n.ch==d&&n.sticky==m?t:new bi(new Ze(n.line,d,m),r)}(e,new bi(at(o,E),b)),Yi(o,wi(e,T,s),z)}}var p=i.wrapper.getBoundingClientRect(),d=0;function m(t){e.state.selectingText=!1,d=1/0,t&&(we(t),i.input.focus()),de(i.wrapper.ownerDocument,"mousemove",y),de(i.wrapper.ownerDocument,"mouseup",g),o.history.lastSelOrigin=null}var y=Xr(e,function(t){0!==t.buttons&&Ce(t)?function t(n){var a=++d,s=ar(e,n,!0,"rectangle"==r.unit);if(s)if(0!=et(s,h)){e.curOp.focus=D(),f(s);var u=Cr(i,o);(s.line>=u.to||s.line<u.from)&&setTimeout(Xr(e,function(){d==a&&t(n)}),150)}else{var c=n.clientY<p.top?-20:n.clientY>p.bottom?20:0;c&&setTimeout(Xr(e,function(){d==a&&(i.scroller.scrollTop+=c,t(n))}),50)}}(t):m(t)}),g=Xr(e,m);e.state.selectingText=g,fe(i.wrapper.ownerDocument,"mousemove",y),fe(i.wrapper.ownerDocument,"mouseup",g)}(e,r,t,o)}(t,r,o,e):Se(e)==n.scroller&&we(e):2==i?(r&&zi(t.doc,r),setTimeout(function(){return n.input.focus()},20)):3==i&&(T?t.display.input.onContextMenu(e):wr(t)))}}function pa(e,t,n){if("char"==n)return new bi(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new bi(Ze(t.line,0),at(e.doc,Ze(t.line+1,0)));var r=n(e,t);return new bi(r.from,r.to)}function da(e,t,n,r){var i,o;if(t.touches)i=t.touches[0].clientX,o=t.touches[0].clientY;else try{i=t.clientX,o=t.clientY}catch(t){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&we(t);var a=e.display,s=a.lineDiv.getBoundingClientRect();if(o>s.bottom||!ve(e,n))return Ee(t);o-=s.top-a.viewOffset;for(var u=0;u<e.display.gutterSpecs.length;++u){var c=a.gutters.childNodes[u];if(c&&c.getBoundingClientRect().right>=i){var l=Xe(e.doc,o),h=e.display.gutterSpecs[u];return me(e,n,e,l,h.className,t),Ee(t)}}}function ma(e,t){return da(e,t,"gutterClick",!0)}function ya(e,t){_n(e.display,t)||function(e,t){return!!ve(e,"gutterContextMenu")&&da(e,t,"gutterContextMenu",!1)}(e,t)||ye(e,t,"contextmenu")||T||e.display.input.onContextMenu(t)}function ga(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),jn(e)}ha.prototype.compare=function(e,t,n){return this.time+400>e&&0==et(t,this.pos)&&n==this.button};var va={toString:function(){return"CodeMirror.Init"}},ba={},wa={};function _a(e,t,n){var r=n&&n!=va;if(!t!=!r){var i=e.display.dragFunctions,o=t?fe:de;o(e.display.scroller,"dragstart",i.start),o(e.display.scroller,"dragenter",i.enter),o(e.display.scroller,"dragover",i.over),o(e.display.scroller,"dragleave",i.leave),o(e.display.scroller,"drop",i.drop)}}function Ea(e){e.options.lineWrapping?(R(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(k(e.display.wrapper,"CodeMirror-wrap"),zt(e)),or(e),ur(e),jn(e),setTimeout(function(){return Ur(e)},100)}function Ta(e,t){var n=this;if(!(this instanceof Ta))return new Ta(e,t);this.options=t=t?F(t):{},F(ba,t,!1);var r=t.value;"string"==typeof r?r=new Io(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var i=new Ta.inputStyles[t.inputStyle](this),o=this.display=new fi(e,r,i,t);for(var c in o.wrapper.CodeMirror=this,ga(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Br(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new j,keySeq:null,specialChars:null},t.autofocus&&!g&&o.input.focus(),a&&s<11&&setTimeout(function(){return n.display.input.reset(!0)},20),function(e){var t=e.display;fe(t.scroller,"mousedown",Xr(e,fa)),fe(t.scroller,"dblclick",a&&s<11?Xr(e,function(t){if(!ye(e,t)){var n=ar(e,t);if(n&&!ma(e,t)&&!_n(e.display,t)){we(t);var r=e.findWordAt(n);zi(e.doc,r.anchor,r.head)}}}):function(t){return ye(e,t)||we(t)}),fe(t.scroller,"contextmenu",function(t){return ya(e,t)}),fe(t.input.getField(),"contextmenu",function(n){t.scroller.contains(n.target)||ya(e,n)});var n,r={end:0};function i(){t.activeTouch&&(n=setTimeout(function(){return t.activeTouch=null},1e3),(r=t.activeTouch).end=+new Date)}function o(e,t){if(null==t.left)return!0;var n=t.left-e.left,r=t.top-e.top;return n*n+r*r>400}fe(t.scroller,"touchstart",function(i){if(!ye(e,i)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(i)&&!ma(e,i)){t.input.ensurePolled(),clearTimeout(n);var o=+new Date;t.activeTouch={start:o,moved:!1,prev:o-r.end<=300?r:null},1==i.touches.length&&(t.activeTouch.left=i.touches[0].pageX,t.activeTouch.top=i.touches[0].pageY)}}),fe(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),fe(t.scroller,"touchend",function(n){var r=t.activeTouch;if(r&&!_n(t,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var a,s=e.coordsChar(t.activeTouch,"page");a=!r.prev||o(r,r.prev)?new bi(s,s):!r.prev.prev||o(r,r.prev.prev)?e.findWordAt(s):new bi(Ze(s.line,0),at(e.doc,Ze(s.line+1,0))),e.setSelection(a.anchor,a.head),e.focus(),we(n)}i()}),fe(t.scroller,"touchcancel",i),fe(t.scroller,"scroll",function(){t.scroller.clientHeight&&(Dr(e,t.scroller.scrollTop),Pr(e,t.scroller.scrollLeft,!0),me(e,"scroll",e))}),fe(t.scroller,"mousewheel",function(t){return gi(e,t)}),fe(t.scroller,"DOMMouseScroll",function(t){return gi(e,t)}),fe(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(t){ye(e,t)||Te(t)},over:function(t){ye(e,t)||(function(e,t){var n=ar(e,t);if(n){var r=document.createDocumentFragment();mr(e,n,r),e.display.dragCursor||(e.display.dragCursor=N("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),x(e.display.dragCursor,r)}}(e,t),Te(t))},start:function(t){return function(e,t){if(a&&(!e.state.draggingText||+new Date-xo<100))Te(t);else if(!ye(e,t)&&!_n(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!f)){var n=N("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",h&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),h&&n.parentNode.removeChild(n)}}(e,t)},drop:Xr(e,No),leave:function(t){ye(e,t)||Ao(e)}};var u=t.input.getField();fe(u,"keyup",function(t){return sa.call(e,t)}),fe(u,"keydown",Xr(e,aa)),fe(u,"keypress",Xr(e,ua)),fe(u,"focus",function(t){return _r(e,t)}),fe(u,"blur",function(t){return Er(e,t)})}(this),Ro(),Wr(this),this.curOp.forceUpdate=!0,Oi(this,r),t.autofocus&&!g||this.hasFocus()?setTimeout(L(_r,this),20):Er(this),wa)wa.hasOwnProperty(c)&&wa[c](this,t[c],va);ui(this),t.finishInit&&t.finishInit(this);for(var l=0;l<Sa.length;++l)Sa[l](this);zr(this),u&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}Ta.defaults=ba,Ta.optionHandlers=wa;var Sa=[];function Ca(e,t,n,r){var i,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?i=ft(e,t).state:n="prev");var a=e.options.tabSize,s=He(o,t),u=U(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var c,l=s.text.match(/^\s*/)[0];if(r||/\S/.test(s.text)){if("smart"==n&&((c=o.mode.indent(i,s.text.slice(l.length),s.text))==V||c>150)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>o.first?U(He(o,t-1).text,null,a):0:"add"==n?c=u+e.options.indentUnit:"subtract"==n?c=u-e.options.indentUnit:"number"==typeof n&&(c=u+n),c=Math.max(0,c);var h="",f=0;if(e.options.indentWithTabs)for(var p=Math.floor(c/a);p;--p)f+=a,h+="\t";if(f<c&&(h+=G(c-f)),h!=l)return lo(o,h,Ze(t,0),Ze(t,l.length),"+input"),s.stateAfter=null,!0;for(var d=0;d<o.sel.ranges.length;d++){var m=o.sel.ranges[d];if(m.head.line==t&&m.head.ch<l.length){var y=Ze(t,l.length);Ki(o,d,new bi(y,y));break}}}Ta.defineInitHook=function(e){return Sa.push(e)};var ka=null;function Ia(e){ka=e}function xa(e,t,n,r,i){var o=e.doc;e.display.shift=!1,r||(r=o.sel);var a=+new Date-200,s="paste"==i||e.state.pasteIncoming>a,u=Oe(t),c=null;if(s&&r.ranges.length>1)if(ka&&ka.text.join("\n")==t){if(r.ranges.length%ka.text.length==0){c=[];for(var l=0;l<ka.text.length;l++)c.push(o.splitLines(ka.text[l]))}}else u.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(c=X(u,function(e){return[e]}));for(var h=e.curOp.updateInput,f=r.ranges.length-1;f>=0;f--){var p=r.ranges[f],d=p.from(),m=p.to();p.empty()&&(n&&n>0?d=Ze(d.line,d.ch-n):e.state.overwrite&&!s?m=Ze(m.line,Math.min(He(o,m.line).text.length,m.ch+Y(u).length)):s&&ka&&ka.lineWise&&ka.text.join("\n")==t&&(d=m=Ze(d.line,0)));var y={from:d,to:m,text:c?c[f%c.length]:u,origin:i||(s?"paste":e.state.cutIncoming>a?"cut":"+input")};oo(e.doc,y),sn(e,"inputRead",e,y)}t&&!s&&Aa(e,t),xr(e),e.curOp.updateInput<2&&(e.curOp.updateInput=h),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Na(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Yr(t,function(){return xa(t,n,0,null,"paste")}),!0}function Aa(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var o=e.getModeAt(i.head),a=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(t.indexOf(o.electricChars.charAt(s))>-1){a=Ca(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(He(e.doc,i.head.line).text.slice(0,i.head.ch))&&(a=Ca(e,i.head.line,"smart"));a&&sn(e,"electricInput",e,i.head.line)}}}function Oa(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,o={anchor:Ze(i,0),head:Ze(i+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Da(e,t,n,r){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",r?"":"off"),e.setAttribute("spellcheck",!!t)}function Ra(){var e=N("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=N("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return u?e.style.width="1000px":e.setAttribute("wrap","off"),m&&(e.style.border="1px solid black"),Da(e),t}function Pa(e,t,n,r,i){var o=t,a=n,s=He(e,t.line),u=i&&"rtl"==e.direction?-n:n;function c(r){var o;if(null==(o=i?function(e,t,n,r){var i=le(t,e.doc.direction);if(!i)return Yo(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=ue(i,n.ch,n.sticky),a=i[o];if("ltr"==e.doc.direction&&a.level%2==0&&(r>0?a.to>n.ch:a.from<n.ch))return Yo(t,n,r);var s,u=function(e,n){return Go(t,e instanceof Ze?e.ch:e,n)},c=function(n){return e.options.lineWrapping?(s=s||On(e,t),$n(e,t,s,n)):{begin:0,end:t.text.length}},l=c("before"==n.sticky?u(n,-1):n.ch);if("rtl"==e.doc.direction||1==a.level){var h=1==a.level==r<0,f=u(n,h?1:-1);if(null!=f&&(h?f<=a.to&&f<=l.end:f>=a.from&&f>=l.begin)){var p=h?"before":"after";return new Ze(n.line,f,p)}}var d=function(e,t,r){for(var o=function(e,t){return t?new Ze(n.line,u(e,1),"before"):new Ze(n.line,e,"after")};e>=0&&e<i.length;e+=t){var a=i[e],s=t>0==(1!=a.level),c=s?r.begin:u(r.end,-1);if(a.from<=c&&c<a.to)return o(c,s);if(c=s?a.from:u(a.to,-1),r.begin<=c&&c<r.end)return o(c,s)}},m=d(o+r,r,l);if(m)return m;var y=r>0?l.end:u(l.begin,-1);return null==y||r>0&&y==t.text.length||!(m=d(r>0?0:i.length-1,r,c(y)))?null:m}(e.cm,s,t,n):Yo(s,t,n))){if(r||!function(){var n=t.line+u;return!(n<e.first||n>=e.first+e.size)&&(t=new Ze(n,t.ch,t.sticky),s=He(e,n))}())return!1;t=Xo(i,e.cm,s,t.line,u)}else t=o;return!0}if("char"==r)c();else if("column"==r)c(!0);else if("word"==r||"group"==r)for(var l=null,h="group"==r,f=e.cm&&e.cm.getHelper(t,"wordChars"),p=!0;!(n<0)||c(!p);p=!1){var d=s.text.charAt(t.ch)||"\n",m=te(d,f)?"w":h&&"\n"==d?"n":!h||/\s/.test(d)?null:"p";if(!h||p||m||(m="s"),l&&l!=m){n<0&&(n=1,c(),t.sticky="after");break}if(m&&(l=m),n>0&&!c(!p))break}var y=to(e,t,o,a,!0);return tt(o,y)&&(y.hitSide=!0),y}function Ma(e,t,n,r){var i,o,a=e.doc,s=t.left;if("page"==r){var u=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),c=Math.max(u-.5*er(e.display),3);i=(n>0?t.bottom:t.top)+n*c}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;(o=Yn(e,s,i)).outside;){if(n<0?i<=0:i>=a.height){o.hitSide=!0;break}i+=5*n}return o}var La=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new j,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Fa(e,t){var n=An(e,t.line);if(!n||n.hidden)return null;var r=He(e.doc,t.line),i=xn(n,r,t.line),o=le(r,e.doc.direction),a="left";if(o){var s=ue(o,t.ch);a=s%2?"right":"left"}var u=Mn(i.map,t.ch,a);return u.offset="right"==u.collapse?u.end:u.start,u}function Ua(e,t){return t&&(e.bad=!0),e}function ja(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return Ua(e.clipPos(Ze(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==r)return qa(o,t,n)}}function qa(e,t,n){var r=e.text.firstChild,i=!1;if(!t||!O(r,t))return Ua(Ze(Ye(e.line),0),!0);if(t==r&&(i=!0,t=r.childNodes[n],n=0,!t)){var o=e.rest?Y(e.rest):e.line;return Ua(Ze(Ye(o),o.text.length),i)}var a=3==t.nodeType?t:null,s=t;for(a||1!=t.childNodes.length||3!=t.firstChild.nodeType||(a=t.firstChild,n&&(n=a.nodeValue.length));s.parentNode!=r;)s=s.parentNode;var u=e.measure,c=u.maps;function l(t,n,r){for(var i=-1;i<(c?c.length:0);i++)for(var o=i<0?u.map:c[i],a=0;a<o.length;a+=3){var s=o[a+2];if(s==t||s==n){var l=Ye(i<0?e.line:e.rest[i]),h=o[a]+r;return(r<0||s!=t)&&(h=o[a+(r?1:0)]),Ze(l,h)}}}var h=l(a,s,n);if(h)return Ua(h,i);for(var f=s.nextSibling,p=a?a.nodeValue.length-n:0;f;f=f.nextSibling){if(h=l(f,f.firstChild,0))return Ua(Ze(h.line,h.ch-p),i);p+=f.textContent.length}for(var d=s.previousSibling,m=n;d;d=d.previousSibling){if(h=l(d,d.firstChild,-1))return Ua(Ze(h.line,h.ch+m),i);m+=d.textContent.length}}La.prototype.init=function(e){var t=this,n=this,r=n.cm,i=n.div=e.lineDiv;function o(e){for(var t=e.target;t;t=t.parentNode){if(t==i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}return!1}function a(e){if(o(e)&&!ye(r,e)){if(r.somethingSelected())Ia({lineWise:!1,text:r.getSelections()}),"cut"==e.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var t=Oa(r);Ia({lineWise:!0,text:t.text}),"cut"==e.type&&r.operation(function(){r.setSelections(t.ranges,0,W),r.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var a=ka.text.join("\n");if(e.clipboardData.setData("Text",a),e.clipboardData.getData("Text")==a)return void e.preventDefault()}var s=Ra(),u=s.firstChild;r.display.lineSpace.insertBefore(s,r.display.lineSpace.firstChild),u.value=ka.text.join("\n");var c=document.activeElement;M(u),setTimeout(function(){r.display.lineSpace.removeChild(s),c.focus(),c==i&&n.showPrimarySelection()},50)}}Da(i,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize),fe(i,"paste",function(e){!o(e)||ye(r,e)||Na(e,r)||s<=11&&setTimeout(Xr(r,function(){return t.updateFromDOM()}),20)}),fe(i,"compositionstart",function(e){t.composing={data:e.data,done:!1}}),fe(i,"compositionupdate",function(e){t.composing||(t.composing={data:e.data,done:!1})}),fe(i,"compositionend",function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),fe(i,"touchstart",function(){return n.forceCompositionEnd()}),fe(i,"input",function(){t.composing||t.readFromDOMSoon()}),fe(i,"copy",a),fe(i,"cut",a)},La.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},La.prototype.prepareSelection=function(){var e=dr(this.cm,!1);return e.focus=document.activeElement==this.div,e},La.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},La.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},La.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,r=t.doc.sel.primary(),i=r.from(),o=r.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||o.line<t.display.viewFrom)e.removeAllRanges();else{var a=ja(t,e.anchorNode,e.anchorOffset),s=ja(t,e.focusNode,e.focusOffset);if(!a||a.bad||!s||s.bad||0!=et(it(a,s),i)||0!=et(rt(a,s),o)){var u=t.display.view,c=i.line>=t.display.viewFrom&&Fa(t,i)||{node:u[0].measure.map[2],offset:0},l=o.line<t.display.viewTo&&Fa(t,o);if(!l){var h=u[u.length-1].measure,f=h.maps?h.maps[h.maps.length-1]:h.map;l={node:f[f.length-1],offset:f[f.length-2]-f[f.length-3]}}if(c&&l){var p,d=e.rangeCount&&e.getRangeAt(0);try{p=C(c.node,c.offset,l.offset,l.node)}catch(m){}p&&(!n&&t.state.focused?(e.collapse(c.node,c.offset),p.collapsed||(e.removeAllRanges(),e.addRange(p))):(e.removeAllRanges(),e.addRange(p)),d&&null==e.anchorNode?e.addRange(d):n&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},La.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},La.prototype.showMultipleSelections=function(e){x(this.cm.display.cursorDiv,e.cursors),x(this.cm.display.selectionDiv,e.selection)},La.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},La.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return O(this.div,t)},La.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&document.activeElement==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},La.prototype.blur=function(){this.div.blur()},La.prototype.getField=function(){return this.div},La.prototype.supportsTouch=function(){return!0},La.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():Yr(this.cm,function(){return e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))})},La.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},La.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(y&&l&&this.cm.display.gutterSpecs.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=ja(t,e.anchorNode,e.anchorOffset),r=ja(t,e.focusNode,e.focusOffset);n&&r&&Yr(t,function(){Yi(t.doc,_i(n,r),W),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},La.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,r=this.cm,i=r.display,o=r.doc.sel.primary(),a=o.from(),s=o.to();if(0==a.ch&&a.line>r.firstLine()&&(a=Ze(a.line-1,He(r.doc,a.line-1).length)),s.ch==He(r.doc,s.line).text.length&&s.line<r.lastLine()&&(s=Ze(s.line+1,0)),a.line<i.viewFrom||s.line>i.viewTo-1)return!1;a.line==i.viewFrom||0==(e=sr(r,a.line))?(t=Ye(i.view[0].line),n=i.view[0].node):(t=Ye(i.view[e].line),n=i.view[e-1].node.nextSibling);var u,c,l=sr(r,s.line);if(l==i.view.length-1?(u=i.viewTo-1,c=i.lineDiv.lastChild):(u=Ye(i.view[l+1].line)-1,c=i.view[l+1].node.previousSibling),!n)return!1;for(var h=r.doc.splitLines(function(e,t,n,r,i){var o="",a=!1,s=e.doc.lineSeparator(),u=!1;function c(){a&&(o+=s,u&&(o+=s),a=u=!1)}function l(e){e&&(c(),o+=e)}function h(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(n)return void l(n);var o,f=t.getAttribute("cm-marker");if(f){var p=e.findMarks(Ze(r,0),Ze(i+1,0),(y=+f,function(e){return e.id==y}));return void(p.length&&(o=p[0].find(0))&&l(Ke(e.doc,o.from,o.to).join(s)))}if("false"==t.getAttribute("contenteditable"))return;var d=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;d&&c();for(var m=0;m<t.childNodes.length;m++)h(t.childNodes[m]);/^(pre|p)$/i.test(t.nodeName)&&(u=!0),d&&(a=!0)}else 3==t.nodeType&&l(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var y}for(;h(t),t!=n;)t=t.nextSibling,u=!1;return o}(r,n,c,t,u)),f=Ke(r.doc,Ze(t,0),Ze(u,He(r.doc,u).text.length));h.length>1&&f.length>1;)if(Y(h)==Y(f))h.pop(),f.pop(),u--;else{if(h[0]!=f[0])break;h.shift(),f.shift(),t++}for(var p=0,d=0,m=h[0],y=f[0],g=Math.min(m.length,y.length);p<g&&m.charCodeAt(p)==y.charCodeAt(p);)++p;for(var v=Y(h),b=Y(f),w=Math.min(v.length-(1==h.length?p:0),b.length-(1==f.length?p:0));d<w&&v.charCodeAt(v.length-d-1)==b.charCodeAt(b.length-d-1);)++d;if(1==h.length&&1==f.length&&t==a.line)for(;p&&p>a.ch&&v.charCodeAt(v.length-d-1)==b.charCodeAt(b.length-d-1);)p--,d++;h[h.length-1]=v.slice(0,v.length-d).replace(/^\u200b+/,""),h[0]=h[0].slice(p).replace(/\u200b+$/,"");var _=Ze(t,p),E=Ze(u,f.length?Y(f).length-d:0);return h.length>1||h[0]||et(_,E)?(lo(r.doc,h,_,E,"+input"),!0):void 0},La.prototype.ensurePolled=function(){this.forceCompositionEnd()},La.prototype.reset=function(){this.forceCompositionEnd()},La.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},La.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},La.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Yr(this.cm,function(){return ur(e.cm)})},La.prototype.setUneditable=function(e){e.contentEditable="false"},La.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Xr(this.cm,xa)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},La.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},La.prototype.onContextMenu=function(){},La.prototype.resetPosition=function(){},La.prototype.needsContentAttribute=!0;var Ba=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new j,this.hasSelection=!1,this.composing=null};Ba.prototype.init=function(e){var t=this,n=this,r=this.cm;this.createField(e);var i=this.textarea;function o(e){if(!ye(r,e)){if(r.somethingSelected())Ia({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var t=Oa(r);Ia({lineWise:!0,text:t.text}),"cut"==e.type?r.setSelections(t.ranges,null,W):(n.prevInput="",i.value=t.text.join("\n"),M(i))}"cut"==e.type&&(r.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),m&&(i.style.width="0px"),fe(i,"input",function(){a&&s>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()}),fe(i,"paste",function(e){ye(r,e)||Na(e,r)||(r.state.pasteIncoming=+new Date,n.fastPoll())}),fe(i,"cut",o),fe(i,"copy",o),fe(e.scroller,"paste",function(t){if(!_n(e,t)&&!ye(r,t)){if(!i.dispatchEvent)return r.state.pasteIncoming=+new Date,void n.focus();var o=new Event("paste");o.clipboardData=t.clipboardData,i.dispatchEvent(o)}}),fe(e.lineSpace,"selectstart",function(t){_n(e,t)||we(t)}),fe(i,"compositionstart",function(){var e=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}}),fe(i,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},Ba.prototype.createField=function(e){this.wrapper=Ra(),this.textarea=this.wrapper.firstChild},Ba.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Ba.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=dr(e);if(e.options.moveInputWithCursor){var i=Kn(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+a.top-o.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+a.left-o.left))}return r},Ba.prototype.showSelection=function(e){var t=this.cm,n=t.display;x(n.cursorDiv,e.cursors),x(n.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Ba.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&M(this.textarea),a&&s>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",a&&s>=9&&(this.hasSelection=null))}},Ba.prototype.getField=function(){return this.textarea},Ba.prototype.supportsTouch=function(){return!1},Ba.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!g||D()!=this.textarea))try{this.textarea.focus()}catch(e){}},Ba.prototype.blur=function(){this.textarea.blur()},Ba.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ba.prototype.receivedFocus=function(){this.slowPoll()},Ba.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Ba.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function n(){var r=t.poll();r||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))})},Ba.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||De(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(a&&s>=9&&this.hasSelection===i||v&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||r||(r="\u200b"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var u=0,c=Math.min(r.length,i.length);u<c&&r.charCodeAt(u)==i.charCodeAt(u);)++u;return Yr(t,function(){xa(t,i.slice(u),r.length-u,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ba.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ba.prototype.onKeyPress=function(){a&&s>=9&&(this.hasSelection=null),this.fastPoll()},Ba.prototype.onContextMenu=function(e){var t=this,n=t.cm,r=n.display,i=t.textarea;t.contextMenuPending&&t.contextMenuPending();var o=ar(n,e),c=r.scroller.scrollTop;if(o&&!h){var l=n.options.resetSelectionOnContextMenu;l&&-1==n.doc.sel.contains(o)&&Xr(n,Yi)(n.doc,_i(o),W);var f,p=i.style.cssText,d=t.wrapper.style.cssText,m=t.wrapper.offsetParent.getBoundingClientRect();t.wrapper.style.cssText="position: static",i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-m.top-5)+"px; left: "+(e.clientX-m.left-5)+"px;\n      z-index: 1000; background: "+(a?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",u&&(f=window.scrollY),r.input.focus(),u&&window.scrollTo(null,f),r.input.reset(),n.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=g,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),a&&s>=9&&y(),T?(Te(e),fe(window,"mouseup",function e(){de(window,"mouseup",e),setTimeout(g,20)})):setTimeout(g,50)}function y(){if(null!=i.selectionStart){var e=n.somethingSelected(),o="\u200b"+(e?i.value:"");i.value="\u21da",i.value=o,t.prevInput=e?"":"\u200b",i.selectionStart=1,i.selectionEnd=o.length,r.selForContextMenu=n.doc.sel}}function g(){if(t.contextMenuPending==g&&(t.contextMenuPending=!1,t.wrapper.style.cssText=d,i.style.cssText=p,a&&s<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=c),null!=i.selectionStart)){(!a||a&&s<9)&&y();var e=0;r.detectingSelectAll=setTimeout(function o(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"\u200b"==t.prevInput?Xr(n,ro)(n):e++<10?r.detectingSelectAll=setTimeout(o,500):(r.selForContextMenu=null,r.input.reset())},200)}}},Ba.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},Ba.prototype.setUneditable=function(){},Ba.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function n(n,r,i,o){e.defaults[n]=r,i&&(t[n]=o?function(e,t,n){n!=va&&i(e,t,n)}:i)}e.defineOption=n,e.Init=va,n("value","",function(e,t){return e.setValue(t)},!0),n("mode",null,function(e,t){e.doc.modeOption=t,ki(e)},!0),n("indentUnit",2,ki,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,function(e){Ii(e),jn(e),ur(e)},!0),n("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var n=[],r=e.doc.first;e.doc.iter(function(e){for(var i=0;;){var o=e.text.indexOf(t,i);if(-1==o)break;i=o+t.length,n.push(Ze(r,o))}r++});for(var i=n.length-1;i>=0;i--)lo(e.doc,t,n[i],Ze(n[i].line,n[i].ch+t.length))}}),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=va&&e.refresh()}),n("specialCharPlaceholder",$t,function(e){return e.refresh()},!0),n("electricChars",!0),n("inputStyle",g?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),n("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),n("autocorrect",!1,function(e,t){return e.getInputField().autocorrect=t},!0),n("autocapitalize",!1,function(e,t){return e.getInputField().autocapitalize=t},!0),n("rtlMoveVisually",!w),n("wholeLineUpdateBefore",!0),n("theme","default",function(e){ga(e),hi(e)},!0),n("keyMap","default",function(e,t,n){var r=Ko(t),i=n!=va&&Ko(n);i&&i.detach&&i.detach(e,r),r.attach&&r.attach(e,i||null)}),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,Ea,!0),n("gutters",[],function(e,t){e.display.gutterSpecs=ci(t,e.options.lineNumbers),hi(e)},!0),n("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?rr(e.display)+"px":"0",e.refresh()},!0),n("coverGutterNextToScrollbar",!1,function(e){return Ur(e)},!0),n("scrollbarStyle","native",function(e){Br(e),Ur(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),n("lineNumbers",!1,function(e,t){e.display.gutterSpecs=ci(e.options.gutters,t),hi(e)},!0),n("firstLineNumber",1,hi,!0),n("lineNumberFormatter",function(e){return e},hi,!0),n("showCursorWhenSelecting",!1,pr,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,function(e,t){"nocursor"==t&&(Er(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),n("screenReaderLabel",null,function(e,t){t=""===t?null:t,e.display.input.screenReaderLabelChanged(t)}),n("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),n("dragDrop",!0,_a),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,pr,!0),n("singleCursorHeightPerLine",!0,pr,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Ii,!0),n("addModeClass",!1,Ii,!0),n("pollInterval",100),n("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),n("historyEventDelay",1250),n("viewportMargin",10,function(e){return e.refresh()},!0),n("maxHighlightLength",1e4,Ii,!0),n("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),n("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),n("autofocus",null),n("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0),n("phrases",null)}(Ta),function(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var r=this.options,i=r[e];r[e]==n&&"mode"!=e||(r[e]=n,t.hasOwnProperty(e)&&Xr(this,t[e])(this,n,i),me(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Ko(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:$r(function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");!function(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)}(this.state.overlays,{mode:r,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},function(e){return e.priority}),this.state.modeGen++,ur(this)}),removeOverlay:$r(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void ur(this)}}),indentLine:$r(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),$e(this.doc,e)&&Ca(this,e,t,n)}),indentSelection:$r(function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(Ca(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&xr(this));else{var o=i.from(),a=i.to(),s=Math.max(n,o.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var u=s;u<n;++u)Ca(this,u,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&c[r].from().ch>0&&Ki(this.doc,r,new bi(o,c[r].to()),W)}}}),getTokenAt:function(e,t){return gt(this,e,t)},getLineTokens:function(e,t){return gt(this,Ze(e),t,!0)},getTokenTypeAt:function(e){e=at(this.doc,e);var t,n=ht(this,He(this.doc,e.line)),r=0,i=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var a=r+i>>1;if((a?n[2*a-1]:0)>=o)i=a;else{if(!(n[2*a+1]<o)){t=n[2*a+2];break}r=a+1}}var s=t?t.indexOf("overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!n.hasOwnProperty(t))return r;var i=n[t],o=this.getModeAt(e);if("string"==typeof o[t])i[o[t]]&&r.push(i[o[t]]);else if(o[t])for(var a=0;a<o[t].length;a++){var s=i[o[t][a]];s&&r.push(s)}else o.helperType&&i[o.helperType]?r.push(i[o.helperType]):i[o.name]&&r.push(i[o.name]);for(var u=0;u<i._global.length;u++){var c=i._global[u];c.pred(o,this)&&-1==q(r,c.val)&&r.push(c.val)}return r},getStateAfter:function(e,t){var n=this.doc;return ft(this,(e=ot(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return Kn(this,null==e?n.head:"object"==typeof e?at(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return Hn(this,at(this.doc,e),t||"page")},coordsChar:function(e,t){return Yn(this,(e=zn(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=zn(this,{top:e,left:0},t||"page").top,Xe(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var r,i=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,i=!0),r=He(this.doc,e)}else r=e;return Wn(this,r,{top:0,left:0},t||"page",n||i).top+(i?this.doc.height-Vt(r):0)},defaultTextHeight:function(){return er(this.display)},defaultCharWidth:function(){return tr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var o=this.display,a=(e=Kn(this,at(this.doc,e))).bottom,s=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),o.sizer.appendChild(t),"over"==r)a=e.top;else if("above"==r||"near"==r){var u=Math.max(o.wrapper.clientHeight,this.doc.height),c=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>u)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=u&&(a=e.bottom),s+t.offsetWidth>c&&(s=c-t.offsetWidth)}t.style.top=a+"px",t.style.left=t.style.right="","right"==i?(s=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),n&&function(e,t){var n=kr(e,t);null!=n.scrollTop&&Dr(e,n.scrollTop),null!=n.scrollLeft&&Pr(e,n.scrollLeft)}(this,{left:s,top:a,right:s+t.offsetWidth,bottom:a+t.offsetHeight})},triggerOnKeyDown:$r(aa),triggerOnKeyPress:$r(ua),triggerOnKeyUp:sa,triggerOnMouseDown:$r(fa),execCommand:function(e){if($o.hasOwnProperty(e))return $o[e].call(null,this)},triggerElectric:$r(function(e){Aa(this,e)}),findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var o=at(this.doc,e),a=0;a<t&&!(o=Pa(this.doc,o,i,n,r)).hitSide;++a);return o},moveH:$r(function(e,t){var n=this;this.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?Pa(n.doc,r.head,e,t,n.options.rtlMoveVisually):e<0?r.from():r.to()},H)}),deleteH:$r(function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):Qo(this,function(n){var i=Pa(r,n.head,e,t,!1);return e<0?{from:i,to:n.head}:{from:n.head,to:i}})}),findPosV:function(e,t,n,r){var i=1,o=r;t<0&&(i=-1,t=-t);for(var a=at(this.doc,e),s=0;s<t;++s){var u=Kn(this,a,"div");if(null==o?o=u.left:u.left=o,(a=Ma(this,u,i,n)).hitSide)break}return a},moveV:$r(function(e,t){var n=this,r=this.doc,i=[],o=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(a){if(o)return e<0?a.from():a.to();var s=Kn(n,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn),i.push(s.left);var u=Ma(n,s,e,t);return"page"==t&&a==r.sel.primary()&&Ir(n,Hn(n,u,"div").top-s.top),u},H),i.length)for(var a=0;a<r.sel.ranges.length;a++)r.sel.ranges[a].goalColumn=i[a]}),findWordAt:function(e){var t=this.doc,n=He(t,e.line).text,r=e.ch,i=e.ch;if(n){var o=this.getHelper(e,"wordChars");"before"!=e.sticky&&i!=n.length||!r?++i:--r;for(var a=n.charAt(r),s=te(a,o)?function(e){return te(e,o)}:/\s/.test(a)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!te(e)};r>0&&s(n.charAt(r-1));)--r;for(;i<n.length&&s(n.charAt(i));)++i}return new bi(Ze(e.line,r),Ze(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?R(this.display.cursorDiv,"CodeMirror-overwrite"):k(this.display.cursorDiv,"CodeMirror-overwrite"),me(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==D()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:$r(function(e,t){Nr(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Cn(this)-this.display.barHeight,width:e.scrollWidth-Cn(this)-this.display.barWidth,clientHeight:In(this),clientWidth:kn(this)}},scrollIntoView:$r(function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:Ze(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){Ar(e),e.curOp.scrollToPos=t}(this,e):Or(this,e.from,e.to,e.margin)}),setSize:$r(function(e,t){var n=this,r=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&Un(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){cr(n,i,"widget");break}++i}),this.curOp.forceUpdate=!0,me(this,"refresh",this)}),operation:function(e){return Yr(this,e)},startOperation:function(){return Wr(this)},endOperation:function(){return zr(this)},refresh:$r(function(){var e=this.display.cachedTextHeight;ur(this),this.curOp.forceUpdate=!0,jn(this),Nr(this,this.doc.scrollLeft,this.doc.scrollTop),oi(this.display),(null==e||Math.abs(e-er(this.display))>.5||this.options.lineWrapping)&&or(this),me(this,"refresh",this)}),swapDoc:$r(function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),Oi(this,e),jn(this),this.display.input.reset(),Nr(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,sn(this,"swapDoc",this,t),t}),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},be(e),e.registerHelper=function(t,r,i){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][r]=i},e.registerGlobalHelper=function(t,r,i,o){e.registerHelper(t,r,o),n[t]._global.push({pred:i,val:o})}}(Ta);var Va="iter insert remove copy getEditor constructor".split(" ");for(var Wa in Io.prototype)Io.prototype.hasOwnProperty(Wa)&&q(Va,Wa)<0&&(Ta.prototype[Wa]=function(e){return function(){return e.apply(this.doc,arguments)}}(Io.prototype[Wa]));return be(Io),Ta.inputStyles={textarea:Ba,contenteditable:La},Ta.defineMode=function(e){Ta.defaults.mode||"null"==e||(Ta.defaults.mode=e),function(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Me[e]=t}.apply(this,arguments)},Ta.defineMIME=function(e,t){Le[e]=t},Ta.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Ta.defineMIME("text/plain","null"),Ta.defineExtension=function(e,t){Ta.prototype[e]=t},Ta.defineDocExtension=function(e,t){Io.prototype[e]=t},Ta.fromTextArea=function(e,t){if((t=t?F(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=D();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function r(){e.value=s.getValue()}var i;if(e.form&&(fe(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var o=e.form;i=o.submit;try{var a=o.submit=function(){r(),o.submit=i,o.submit(),o.submit=a}}catch(u){}}t.finishInit=function(n){n.save=r,n.getTextArea=function(){return e},n.toTextArea=function(){n.toTextArea=isNaN,r(),e.parentNode.removeChild(n.getWrapperElement()),e.style.display="",e.form&&(de(e.form,"submit",r),t.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=i))}},e.style.display="none";var s=Ta(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return s},function(e){e.off=de,e.on=fe,e.wheelEventPixels=yi,e.Doc=Io,e.splitLines=Oe,e.countColumn=U,e.findColumn=K,e.isWordChar=ee,e.Pass=V,e.signal=me,e.Line=Ht,e.changeEnd=Ei,e.scrollbarModel=qr,e.Pos=Ze,e.cmpPos=et,e.modes=Me,e.mimeModes=Le,e.resolveMode=Fe,e.getMode=Ue,e.modeExtensions=je,e.extendMode=qe,e.copyState=Be,e.startState=We,e.innerMode=Ve,e.commands=$o,e.keyMap=jo,e.keyName=Ho,e.isModifierKey=Wo,e.lookupKey=Vo,e.normalizeKeyMap=Bo,e.StringStream=ze,e.SharedTextMarker=To,e.TextMarker=_o,e.LineWidget=vo,e.e_preventDefault=we,e.e_stopPropagation=_e,e.e_stop=Te,e.addClass=R,e.contains=O,e.rmClass=k,e.keyNames=Mo}(Ta),Ta.version="5.54.0",Ta}()},function(e,t,n){"use strict";var r=n(86),i=n.n(r),o={},a=0;t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"string"===typeof t&&(t={path:t});var r=t,s=r.path,u=r.exact,c=void 0!==u&&u,l=r.strict,h=void 0!==l&&l,f=r.sensitive;if(null==s)return n;var p=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=o[n]||(o[n]={});if(r[e])return r[e];var s=[],u={re:i()(e,s,t),keys:s};return a<1e4&&(r[e]=u,a++),u}(s,{end:c,strict:h,sensitive:void 0!==f&&f}),d=p.re,m=p.keys,y=d.exec(e);if(!y)return null;var g=y[0],v=y.slice(1),b=e===g;return c&&!b?null:{path:s,url:"/"===s&&""===g?"/":g,isExact:b,params:m.reduce(function(e,t,n){return e[t.name]=v[n],e},{})}}},function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return h}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return s});var r=n(128),i=function(){return Math.random().toString(36).substring(7).split("").join(".")},o={INIT:"@@redux/INIT"+i(),REPLACE:"@@redux/REPLACE"+i(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+i()}};function a(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function s(e,t,n){var i;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error("Expected the enhancer to be a function.");return n(s)(e,t)}if("function"!==typeof e)throw new Error("Expected the reducer to be a function.");var u=e,c=t,l=[],h=l,f=!1;function p(){h===l&&(h=l.slice())}function d(){if(f)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return c}function m(e){if("function"!==typeof e)throw new Error("Expected the listener to be a function.");if(f)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return p(),h.push(e),function(){if(t){if(f)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,p();var n=h.indexOf(e);h.splice(n,1),l=null}}}function y(e){if(!a(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"===typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(f)throw new Error("Reducers may not dispatch actions.");try{f=!0,c=u(c,e)}finally{f=!1}for(var t=l=h,n=0;n<t.length;n++){(0,t[n])()}return e}return y({type:o.INIT}),(i={dispatch:y,subscribe:m,getState:d,replaceReducer:function(e){if("function"!==typeof e)throw new Error("Expected the nextReducer to be a function.");u=e,y({type:o.REPLACE})}})[r.a]=function(){var e,t=m;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(d())}return n(),{unsubscribe:t(n)}}})[r.a]=function(){return this},e},i}function u(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function c(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,s=Object.keys(n);try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:o.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if("undefined"===typeof n(void 0,{type:o.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+o.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(n)}catch(c){a=c}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},o=0;o<s.length;o++){var c=s[o],l=n[c],h=e[c],f=l(h,t);if("undefined"===typeof f){var p=u(c,t);throw new Error(p)}i[c]=f,r=r||f!==h}return(r=r||s.length!==Object.keys(e).length)?i:e}}function l(e,t){return function(){return t(e.apply(this,arguments))}}function h(e,t){if("function"===typeof e)return l(e,t);if("object"!==typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var r in e){var i=e[r];"function"===typeof i&&(n[r]=l(i,t))}return n}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map(function(e){return e(i)});return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach(function(t){f(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n,{dispatch:r=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}.apply(void 0,o)(n.dispatch)})}}}},function(e,t,n){var r=n(162),i=n(116);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(19);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(74),i=n(59),o=n(28),a=n(57),s=n(41),u=n(161),c=Object.getOwnPropertyDescriptor;t.f=n(15)?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(n){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports={}},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(197);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports={}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(24).f,i=n(41),o=n(13)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(13)("unscopables"),i=Array.prototype;void 0==i[r]&&n(47)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t,n){(function(t,n,r){e.exports=function(){"use strict";!function(e){if(!e.fetch){var t="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,r="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in e,o="ArrayBuffer"in e;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(e){return e&&DataView.prototype.isPrototypeOf(e)},u=ArrayBuffer.isView||function(e){return e&&-1<a.indexOf(Object.prototype.toString.call(e))};d.prototype.append=function(e,t){e=h(e),t=f(t);var n=this.map[e];this.map[e]=n?n+","+t:t},d.prototype.delete=function(e){delete this.map[h(e)]},d.prototype.get=function(e){return e=h(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(h(e))},d.prototype.set=function(e,t){this.map[h(e)]=f(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),p(e)},d.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),p(e)},d.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),p(e)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},b.call(w.prototype),b.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},E.error=function(){var e=new E(null,{status:0,statusText:""});return e.type="error",e};var l=[301,302,303,307,308];E.redirect=function(e,t){if(-1===l.indexOf(t))throw new RangeError("Invalid status code");return new E(null,{status:t,headers:{location:e}})},e.Headers=d,e.Request=w,e.Response=E,e.fetch=function(e,t){return new Promise(function(n,i){var o=new w(e,t),a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:function(e){var t=new d;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;n(new E(t,e))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&r&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}function h(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function f(e){return"string"!=typeof e&&(e=String(e)),e}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function m(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function y(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function g(e){var t=new FileReader,n=y(t);return t.readAsArrayBuffer(e),n}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e)if("string"==typeof e)this._bodyText=e;else if(r&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(i&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(o&&r&&s(e))this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!o||!ArrayBuffer.prototype.isPrototypeOf(e)&&!u(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=v(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=y(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}function w(e,t){var n=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=function(e){var t=e.toUpperCase();return-1<c.indexOf(t)?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function _(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function E(e,t){t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:void 0);var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};function i(e,t){return e(t={exports:{}},t.exports),t.exports}function o(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})}var a=setTimeout;function s(e){return Boolean(e&&void 0!==e.length)}function u(){}function c(e){if(!(this instanceof c))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],m(e,this)}function l(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,c._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(n){return void f(t.promise,n)}h(t.promise,r)}else(1===e._state?h:f)(t.promise,e._value)})):e._deferreds.push(t)}function h(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof c)return e._state=3,e._value=t,void p(e);if("function"==typeof n)return void m(function(e,t){return function(){e.apply(t,arguments)}}(n,t),e)}e._state=1,e._value=t,p(e)}catch(t){f(e,t)}}function f(e,t){e._state=2,e._value=t,p(e)}function p(e){2===e._state&&0===e._deferreds.length&&c._immediateFn(function(){e._handled||c._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)l(e,e._deferreds[t]);e._deferreds=null}function d(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function m(e,t){var n=!1;try{e(function(e){n||(n=!0,h(t,e))},function(e){n||(n=!0,f(t,e))})}catch(e){if(n)return;n=!0,f(t,e)}}c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){var n=new this.constructor(u);return l(this,new d(e,t,n)),n},c.prototype.finally=o,c.all=function(e){return new c(function(t,n){if(!s(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function o(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(t){o(e,t)},n)}r[e]=a,0==--i&&t(r)}catch(a){n(a)}}for(var a=0;a<r.length;a++)o(a,r[a])})},c.resolve=function(e){return e&&"object"==typeof e&&e.constructor===c?e:new c(function(t){t(e)})},c.reject=function(e){return new c(function(t,n){n(e)})},c.race=function(e){return new c(function(t,n){if(!s(e))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=e.length;r<i;r++)c.resolve(e[r]).then(t,n)})},c._immediateFn="function"==typeof n&&function(e){n(e)}||function(e){a(e,0)},c._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var y=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")}();function g(e){return e&&e.Math==Math&&e}function v(e){try{return!!e()}catch(e){return!0}}function b(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}function w(e){return q.call(e).slice(8,-1)}function _(e){if(null==e)throw TypeError("Can't call method on "+e);return e}function E(e){return V(_(e))}function T(e){return"object"==typeof e?null!==e:"function"==typeof e}function S(e,t){if(!T(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!T(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!T(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!T(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}function C(e,t){return W.call(e,t)}function k(e){return H?z.createElement(e):{}}function I(e){if(!T(e))throw TypeError(String(e)+" is not an object");return e}function x(t,n){try{$(M,t,n)}catch(e){M[t]=n}return n}function N(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++re+ie).toString(36)}function A(e){return oe[e]||(oe[e]=N(e))}"Promise"in y?y.Promise.prototype.finally||(y.Promise.prototype.finally=o):y.Promise=c;var O,D,R,P="object",M=g(typeof globalThis==P&&globalThis)||g(typeof window==P&&window)||g(typeof self==P&&self)||g(typeof e==P&&e)||Function("return this")(),L=!v(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),F={}.propertyIsEnumerable,U=Object.getOwnPropertyDescriptor,j={f:U&&!F.call({1:2},1)?function(e){var t=U(this,e);return!!t&&t.enumerable}:F},q={}.toString,B="".split,V=v(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==w(e)?B.call(e,""):Object(e)}:Object,W={}.hasOwnProperty,z=M.document,H=T(z)&&T(z.createElement),K=!L&&!v(function(){return 7!=Object.defineProperty(k("div"),"a",{get:function(){return 7}}).a}),Q=Object.getOwnPropertyDescriptor,G={f:L?Q:function(e,t){if(e=E(e),t=S(t,!0),K)try{return Q(e,t)}catch(e){}if(C(e,t))return b(!j.f.call(e,t),e[t])}},Y=Object.defineProperty,X={f:L?Y:function(e,t,n){if(I(e),t=S(t,!0),I(n),K)try{return Y(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},$=L?function(e,t,n){return X.f(e,t,b(1,n))}:function(e,t,n){return e[t]=n,e},J=!1,Z=i(function(e){var t="__core-js_shared__",n=M[t]||x(t,{});(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.2.1",mode:"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})}),ee=Z("native-function-to-string",Function.toString),te=M.WeakMap,ne="function"==typeof te&&/native code/.test(ee.call(te)),re=0,ie=Math.random(),oe=Z("keys"),ae={},se=M.WeakMap;if(ne){var ue=new se,ce=ue.get,le=ue.has,he=ue.set;O=function(e,t){return he.call(ue,e,t),t},D=function(e){return ce.call(ue,e)||{}},R=function(e){return le.call(ue,e)}}else{var fe=A("state");ae[fe]=!0,O=function(e,t){return $(e,fe,t),t},D=function(e){return C(e,fe)?e[fe]:{}},R=function(e){return C(e,fe)}}function pe(e){return"function"==typeof e?e:void 0}function de(e,t){return arguments.length<2?pe(Oe[e])||pe(M[e]):Oe[e]&&Oe[e][t]||M[e]&&M[e][t]}function me(e){return isNaN(e=+e)?0:(0<e?Re:De)(e)}function ye(e){return 0<e?Pe(me(e),9007199254740991):0}function ge(e){return function(t,n,r){var i,o=E(t),a=ye(o.length),s=function(e,t){var n=me(e);return n<0?Me(n+t,0):Le(n,t)}(r,a);if(e&&n!=n){for(;s<a;)if((i=o[s++])!=i)return!0}else for(;s<a;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}}function ve(e,t){var n,r=E(e),i=0,o=[];for(n in r)!C(ae,n)&&C(r,n)&&o.push(n);for(;t.length>i;)C(r,n=t[i++])&&(~Fe(o,n)||o.push(n));return o}function be(e,t){for(var n=Ve(t),r=X.f,i=G.f,o=0;o<n.length;o++){var a=n[o];C(e,a)||r(e,a,i(t,a))}}function we(e,t){var n=He[ze(e)];return n==Qe||n!=Ke&&("function"==typeof t?v(t):!!t)}function _e(e,t){var n,r,i,o,a,s=e.target,u=e.global,c=e.stat;if(n=u?M:c?M[s]||x(s,{}):(M[s]||{}).prototype)for(r in t){if(o=t[r],i=e.noTargetGet?(a=Ye(n,r))&&a.value:n[r],!Ge(u?r:s+(c?".":"#")+r,e.forced)&&void 0!==i){if(typeof o==typeof i)continue;be(o,i)}(e.sham||i&&i.sham)&&$(o,"sham",!0),Ae(n,r,o,e)}}function Ee(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}function Te(e,t,n){if(Ee(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}function Se(e){return Object(_(e))}function Ce(e){return Ze[e]||(Ze[e]=$e&&Je[e]||($e?Je:N)("Symbol."+e))}function ke(e,t){var n;return Xe(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!Xe(n.prototype)?T(n)&&null===(n=n[et])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}function Ie(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,a=5==e||o;return function(s,u,c,l){for(var h,f,p=Se(s),d=V(p),m=Te(u,c,3),y=ye(d.length),g=0,v=l||ke,b=t?v(s,y):n?v(s,0):void 0;g<y;g++)if((a||g in d)&&(f=m(h=d[g],g,p),e))if(t)b[g]=f;else if(f)switch(e){case 3:return!0;case 5:return h;case 6:return g;case 2:tt.call(b,h)}else if(i)return!1;return o?-1:r||i?i:b}}function xe(){}var Ne={set:O,get:D,has:R,enforce:function(e){return R(e)?D(e):O(e,{})},getterFor:function(e){return function(t){var n;if(!T(t)||(n=D(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},Ae=i(function(e){var t=Ne.get,n=Ne.enforce,r=String(ee).split("toString");Z("inspectSource",function(e){return ee.call(e)}),(e.exports=function(e,t,i,o){var a=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable,u=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof t||C(i,"name")||$(i,"name",t),n(i).source=r.join("string"==typeof t?t:"")),e!==M?(a?!u&&e[t]&&(s=!0):delete e[t],s?e[t]=i:$(e,t,i)):s?e[t]=i:x(t,i)})(Function.prototype,"toString",function(){return"function"==typeof this&&t(this).source||ee.call(this)})}),Oe=M,De=Math.ceil,Re=Math.floor,Pe=Math.min,Me=Math.max,Le=Math.min,Fe=(ge(!0),ge(!1)),Ue=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],je=Ue.concat("length","prototype"),qe={f:Object.getOwnPropertyNames||function(e){return ve(e,je)}},Be={f:Object.getOwnPropertySymbols},Ve=de("Reflect","ownKeys")||function(e){var t=qe.f(I(e)),n=Be.f;return n?t.concat(n(e)):t},We=/#|\.prototype\./,ze=we.normalize=function(e){return String(e).replace(We,".").toLowerCase()},He=we.data={},Ke=we.NATIVE="N",Qe=we.POLYFILL="P",Ge=we,Ye=G.f,Xe=Array.isArray||function(e){return"Array"==w(e)},$e=!!Object.getOwnPropertySymbols&&!v(function(){return!String(Symbol())}),Je=M.Symbol,Ze=Z("wks"),et=Ce("species"),tt=[].push,nt={forEach:Ie(0),map:Ie(1),filter:Ie(2),some:Ie(3),every:Ie(4),find:Ie(5),findIndex:Ie(6)},rt=Object.keys||function(e){return ve(e,Ue)},it=L?Object.defineProperties:function(e,t){I(e);for(var n,r=rt(t),i=r.length,o=0;o<i;)X.f(e,n=r[o++],t[n]);return e},ot=de("document","documentElement"),at=A("IE_PROTO"),st="prototype",ut=function(){var e,t=k("iframe"),n=Ue.length;for(t.style.display="none",ot.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),ut=e.F;n--;)delete ut[st][Ue[n]];return ut()},ct=Object.create||function(e,t){var n;return null!==e?(xe[st]=I(e),n=new xe,xe[st]=null,n[at]=e):n=ut(),void 0===t?n:it(n,t)};ae[at]=!0;var lt=Ce("unscopables"),ht=Array.prototype;function ft(e){ht[lt][e]=!0}null==ht[lt]&&$(ht,lt,ct(null));var pt=nt.find,dt="find",mt=!0;function yt(e,t,n){return Te(gt,M[e].prototype[t],n)}dt in[]&&Array(1)[dt](function(){mt=!1}),_e({target:"Array",proto:!0,forced:mt},{find:function(e,t){return pt(this,e,1<arguments.length?t:void 0)}}),ft(dt);var gt=Function.call,vt=(yt("Array","find"),nt.findIndex),bt="findIndex",wt=!0;function _t(e){return function(t,n){var r,i,o=String(_(t)),a=me(n),s=o.length;return a<0||s<=a?e?"":void 0:(r=o.charCodeAt(a))<55296||56319<r||a+1===s||(i=o.charCodeAt(a+1))<56320||57343<i?e?o.charAt(a):r:e?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}}bt in[]&&Array(1)[bt](function(){wt=!1}),_e({target:"Array",proto:!0,forced:wt},{findIndex:function(e,t){return vt(this,e,1<arguments.length?t:void 0)}}),ft(bt),yt("Array","findIndex");var Et,Tt,St,Ct={codeAt:_t(!1),charAt:_t(!0)},kt=!v(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),It=A("IE_PROTO"),xt=Object.prototype,Nt=kt?Object.getPrototypeOf:function(e){return C(e=Se(e),It)?e[It]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?xt:null},At=Ce("iterator"),Ot=!1;function Dt(e,t,n){e&&!C(e=n?e:e.prototype,Ut)&&Ft(e,Ut,{configurable:!0,value:t})}function Rt(){return this}function Pt(){return this}function Mt(e,t,n,r,i,o,a){function s(e){if(e===i&&m)return m;if(!Wt&&e in p)return p[e];switch(e){case"keys":case Ht:case Kt:return function(){return new n(this,e)}}return function(){return new n(this)}}!function(e,t,n){var r=t+" Iterator";e.prototype=ct(qt,{next:b(1,n)}),Dt(e,r,!1),jt[r]=Rt}(n,t,r);var u,c,l,h=t+" Iterator",f=!1,p=e.prototype,d=p[zt]||p["@@iterator"]||i&&p[i],m=!Wt&&d||s(i),y="Array"==t&&p.entries||d;if(y&&(u=Nt(y.call(new e)),Vt!==Object.prototype&&u.next&&(Nt(u)!==Vt&&(Bt?Bt(u,Vt):"function"!=typeof u[zt]&&$(u,zt,Pt)),Dt(u,h,!0))),i==Ht&&d&&d.name!==Ht&&(f=!0,m=function(){return d.call(this)}),p[zt]!==m&&$(p,zt,m),jt[t]=m,i)if(c={values:s(Ht),keys:o?m:s("keys"),entries:s(Kt)},a)for(l in c)!Wt&&!f&&l in p||Ae(p,l,c[l]);else _e({target:t,proto:!0,forced:Wt||f},c);return c}[].keys&&("next"in(St=[].keys())?(Tt=Nt(Nt(St)))!==Object.prototype&&(Et=Tt):Ot=!0),null==Et&&(Et={}),C(Et,At)||$(Et,At,function(){return this});var Lt={IteratorPrototype:Et,BUGGY_SAFARI_ITERATORS:Ot},Ft=X.f,Ut=Ce("toStringTag"),jt={},qt=Lt.IteratorPrototype,Bt=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(n){}return function(n,r){return I(n),function(e){if(!T(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(r),t?e.call(n,r):n.__proto__=r,n}}():void 0),Vt=Lt.IteratorPrototype,Wt=Lt.BUGGY_SAFARI_ITERATORS,zt=Ce("iterator"),Ht="values",Kt="entries",Qt=Ct.charAt,Gt="String Iterator",Yt=Ne.set,Xt=Ne.getterFor(Gt);function $t(e,t,n,r){try{return r?t(I(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&I(i.call(e)),t}}function Jt(e){return void 0!==e&&(jt.Array===e||rn[nn]===e)}function Zt(e,t,n){var r=S(t);r in e?X.f(e,r,b(0,n)):e[r]=n}function en(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),on))?n:an?w(t):"Object"==(r=w(t))&&"function"==typeof t.callee?"Arguments":r}function tn(e){if(null!=e)return e[sn]||e["@@iterator"]||jt[en(e)]}Mt(String,"String",function(e){Yt(this,{type:Gt,string:String(e),index:0})},function(){var e,t=Xt(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=Qt(n,r),t.index+=e.length,{value:e,done:!1})});var nn=Ce("iterator"),rn=Array.prototype,on=Ce("toStringTag"),an="Arguments"==w(function(){return arguments}()),sn=Ce("iterator"),un=Ce("iterator"),cn=!1;try{var ln=0,hn={next:function(){return{done:!!ln++}},return:function(){cn=!0}};hn[un]=function(){return this},Array.from(hn,function(){throw 2})}catch(Jo){}function fn(e,t){if(!t&&!cn)return!1;var n=!1;try{var r={};r[un]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n}_e({target:"Array",stat:!0,forced:!fn(function(e){Array.from(e)})},{from:function(e,t,n){var r,i,o,a,s=Se(e),u="function"==typeof this?this:Array,c=arguments.length,l=1<c?t:void 0,h=void 0!==l,f=0,p=tn(s);if(h&&(l=Te(l,2<c?n:void 0,2)),null==p||u==Array&&Jt(p))for(i=new u(r=ye(s.length));f<r;f++)Zt(i,f,h?l(s[f],f):s[f]);else for(a=p.call(s),i=new u;!(o=a.next()).done;f++)Zt(i,f,h?$t(a,l,[o.value,f],!0):o.value);return i.length=f,i}}),Oe.Array.from;var pn,dn=nt.some;_e({target:"Array",proto:!0,forced:(pn=[].some,!pn||!v(function(){pn.call(null,function(){throw 1},1)}))},{some:function(e,t){return dn(this,e,1<arguments.length?t:void 0)}}),yt("Array","some");var mn,yn=X.f,gn=M.DataView,vn=gn&&gn.prototype,bn=M.Int8Array,wn=bn&&bn.prototype,_n=M.Uint8ClampedArray,En=_n&&_n.prototype,Tn=bn&&Nt(bn),Sn=wn&&Nt(wn),Cn=Object.prototype,kn=(Cn.isPrototypeOf,Ce("toStringTag")),In=N("TYPED_ARRAY_TAG"),xn=!(!M.ArrayBuffer||!gn),Nn=xn&&!!Bt&&"Opera"!==en(M.opera),An={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(mn in An)M[mn]||(Nn=!1);if((!Nn||"function"!=typeof Tn||Tn===Function.prototype)&&(Tn=function(){throw TypeError("Incorrect invocation")},Nn))for(mn in An)M[mn]&&Bt(M[mn],Tn);if((!Nn||!Sn||Sn===Cn)&&(Sn=Tn.prototype,Nn))for(mn in An)M[mn]&&Bt(M[mn].prototype,Sn);if(Nn&&Nt(En)!==Sn&&Bt(En,Sn),L&&!C(Sn,kn))for(mn in yn(Sn,kn,{get:function(){return T(this)?this[In]:void 0}}),An)M[mn]&&$(M[mn],In,mn);xn&&Bt&&Nt(vn)!==Cn&&Bt(vn,Cn);var On="Array Iterator",Dn=Ne.set,Rn=Ne.getterFor(On),Pn=Mt(Array,"Array",function(e,t){Dn(this,{type:On,target:E(e),index:0,kind:t})},function(){var e=Rn(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?{value:e.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}},"values");function Mn(){return Un.call(Bn(this))}jt.Arguments=jt.Array,ft("keys"),ft("values"),ft("entries");var Ln=Ce("iterator"),Fn=M.Uint8Array,Un=Pn.values,jn=Pn.keys,qn=Pn.entries,Bn=function(e){if(function(e){return T(e)&&C(An,en(e))}(e))return e;throw TypeError("Target is not a typed array")},Vn=function(e,t,n){if(L){if(n)for(var r in An){var i=M[r];i&&C(i.prototype,e)&&delete i.prototype[e]}Sn[e]&&!n||Ae(Sn,e,n?t:Nn&&wn[e]||t)}},Wn=Fn&&Fn.prototype[Ln],zn=!!Wn&&("values"==Wn.name||null==Wn.name);Vn("entries",function(){return qn.call(Bn(this))}),Vn("keys",function(){return jn.call(Bn(this))}),Vn("values",Mn,!zn),Vn(Ln,Mn,!zn);var Hn=Object.assign,Kn=!Hn||v(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=Hn({},e)[n]||rt(Hn({},t)).join("")!=r})?function(e,t){for(var n=Se(e),r=arguments.length,i=1,o=Be.f,a=j.f;i<r;)for(var s,u=V(arguments[i++]),c=o?rt(u).concat(o(u)):rt(u),l=c.length,h=0;h<l;)s=c[h++],L&&!a.call(u,s)||(n[s]=u[s]);return n}:Hn;function Qn(e){return function(t){for(var n,r=E(t),i=rt(r),o=i.length,a=0,s=[];a<o;)n=i[a++],L&&!Gn.call(r,n)||s.push(e?[n,r[n]]:r[n]);return s}}_e({target:"Object",stat:!0,forced:Object.assign!==Kn},{assign:Kn}),Oe.Object.assign;var Gn=j.f,Yn={entries:Qn(!0),values:Qn(!1)},Xn=Yn.entries;_e({target:"Object",stat:!0},{entries:function(e){return Xn(e)}}),Oe.Object.entries;var $n=Yn.values;_e({target:"Object",stat:!0},{values:function(e){return $n(e)}}),Oe.Object.values;var Jn=Ce("match"),Zn=Ce("match"),er="".startsWith,tr=Math.min;function nr(e){if(!T(e))return!1;var t=e[ir];return void 0!==t?!!t:Xe(e)}_e({target:"String",proto:!0,forced:!function(t){var n=/./;try{"/./"[t](n)}catch(e){try{return n[Zn]=!1,"/./"[t](n)}catch(e){}}return!1}("startsWith")},{startsWith:function(e,t){var n=String(_(this));!function(e){if(function(e){var t;return T(e)&&(void 0!==(t=e[Jn])?!!t:"RegExp"==w(e))}(e))throw TypeError("The method doesn't accept regular expressions")}(e);var r=ye(tr(1<arguments.length?t:void 0,n.length)),i=String(e);return er?er.call(n,i,r):n.slice(r,r+i.length)===i}}),yt("String","startsWith"),_e({target:"String",proto:!0},{repeat:"".repeat||function(e){var t=String(_(this)),n="",r=me(e);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n}}),yt("String","repeat");var rr=Ce("species"),ir=Ce("isConcatSpreadable"),or=9007199254740991,ar="Maximum allowed index exceeded",sr=!v(function(){var e=[];return e[ir]=!1,e.concat()[0]!==e}),ur=!v(function(){var e=[];return(e.constructor={})[rr]=function(){return{foo:1}},1!==e.concat(Boolean).foo});_e({target:"Array",proto:!0,forced:!sr||!ur},{concat:function(e){var t,n,r,i,o,a=Se(this),s=ke(a,0),u=0;for(t=-1,r=arguments.length;t<r;t++)if(nr(o=-1===t?a:arguments[t])){if(i=ye(o.length),or<u+i)throw TypeError(ar);for(n=0;n<i;n++,u++)n in o&&Zt(s,u,o[n])}else{if(or<=u)throw TypeError(ar);Zt(s,u++,o)}return s.length=u,s}});var cr={};cr[Ce("toStringTag")]="z";var lr="[object z]"!==String(cr)?function(){return"[object "+en(this)+"]"}:cr.toString,hr=Object.prototype;function fr(e){var t=Oe.Symbol||(Oe.Symbol={});C(t,e)||Er(t,e,{value:_r.f(e)})}function pr(e,t){var n=Ur[e]=ct(Or[kr]);return xr(n,{type:Cr,tag:e,description:t}),L||(n.description=t),n}function dr(e,t){I(e);var n=E(t),r=rt(n).concat(Yr(n));return Tr(r,function(t){L&&!Gr.call(n,t)||Qr(e,t,n[t])}),e}function mr(e,t){var n=E(e),r=S(t,!0);if(n!==Ar||!C(Ur,r)||C(jr,r)){var i=Pr(n,r);return!i||!C(Ur,r)||C(n,Sr)&&n[Sr][r]||(i.enumerable=!0),i}}function yr(e){var t=Lr(E(e)),n=[];return Tr(t,function(e){C(Ur,e)||C(ae,e)||n.push(e)}),n}lr!==hr.toString&&Ae(hr,"toString",lr,{unsafe:!0});var gr=qe.f,vr={}.toString,br="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],wr={f:function(e){return br&&"[object Window]"==vr.call(e)?function(e){try{return gr(e)}catch(e){return br.slice()}}(e):gr(E(e))}},_r={f:Ce},Er=X.f,Tr=nt.forEach,Sr=A("hidden"),Cr="Symbol",kr="prototype",Ir=Ce("toPrimitive"),xr=Ne.set,Nr=Ne.getterFor(Cr),Ar=Object[kr],Or=M.Symbol,Dr=M.JSON,Rr=Dr&&Dr.stringify,Pr=G.f,Mr=X.f,Lr=wr.f,Fr=j.f,Ur=Z("symbols"),jr=Z("op-symbols"),qr=Z("string-to-symbol-registry"),Br=Z("symbol-to-string-registry"),Vr=Z("wks"),Wr=M.QObject,zr=!Wr||!Wr[kr]||!Wr[kr].findChild,Hr=L&&v(function(){return 7!=ct(Mr({},"a",{get:function(){return Mr(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=Pr(Ar,t);r&&delete Ar[t],Mr(e,t,n),r&&e!==Ar&&Mr(Ar,t,r)}:Mr,Kr=$e&&"symbol"==typeof Or.iterator?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof Or},Qr=function e(t,n,r){t===Ar&&e(jr,n,r),I(t);var i=S(n,!0);return I(r),C(Ur,i)?(r.enumerable?(C(t,Sr)&&t[Sr][i]&&(t[Sr][i]=!1),r=ct(r,{enumerable:b(0,!1)})):(C(t,Sr)||Mr(t,Sr,b(1,{})),t[Sr][i]=!0),Hr(t,i,r)):Mr(t,i,r)},Gr=function(e){var t=S(e,!0),n=Fr.call(this,t);return!(this===Ar&&C(Ur,t)&&!C(jr,t))&&(!(n||!C(this,t)||!C(Ur,t)||C(this,Sr)&&this[Sr][t])||n)},Yr=function(e){var t=e===Ar,n=Lr(t?jr:E(e)),r=[];return Tr(n,function(e){!C(Ur,e)||t&&!C(Ar,e)||r.push(Ur[e])}),r};$e||(Ae((Or=function(e){if(this instanceof Or)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==e?String(e):void 0,n=N(t);return L&&zr&&Hr(Ar,n,{configurable:!0,set:function e(t){this===Ar&&e.call(jr,t),C(this,Sr)&&C(this[Sr],n)&&(this[Sr][n]=!1),Hr(this,n,b(1,t))}}),pr(n,t)})[kr],"toString",function(){return Nr(this).tag}),j.f=Gr,X.f=Qr,G.f=mr,qe.f=wr.f=yr,Be.f=Yr,L&&(Mr(Or[kr],"description",{configurable:!0,get:function(){return Nr(this).description}}),Ae(Ar,"propertyIsEnumerable",Gr,{unsafe:!0})),_r.f=function(e){return pr(Ce(e),e)}),_e({global:!0,wrap:!0,forced:!$e,sham:!$e},{Symbol:Or}),Tr(rt(Vr),function(e){fr(e)}),_e({target:Cr,stat:!0,forced:!$e},{for:function(e){var t=String(e);if(C(qr,t))return qr[t];var n=Or(t);return qr[t]=n,Br[n]=t,n},keyFor:function(e){if(!Kr(e))throw TypeError(e+" is not a symbol");if(C(Br,e))return Br[e]},useSetter:function(){zr=!0},useSimple:function(){zr=!1}}),_e({target:"Object",stat:!0,forced:!$e,sham:!L},{create:function(e,t){return void 0===t?ct(e):dr(ct(e),t)},defineProperty:Qr,defineProperties:dr,getOwnPropertyDescriptor:mr}),_e({target:"Object",stat:!0,forced:!$e},{getOwnPropertyNames:yr,getOwnPropertySymbols:Yr}),_e({target:"Object",stat:!0,forced:v(function(){Be.f(1)})},{getOwnPropertySymbols:function(e){return Be.f(Se(e))}}),Dr&&_e({target:"JSON",stat:!0,forced:!$e||v(function(){var e=Or();return"[null]"!=Rr([e])||"{}"!=Rr({a:e})||"{}"!=Rr(Object(e))})},{stringify:function(e){for(var t,n,r=[e],i=1;i<arguments.length;)r.push(arguments[i++]);if(n=t=r[1],(T(t)||void 0!==e)&&!Kr(e))return Xe(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Kr(t))return t}),r[1]=t,Rr.apply(Dr,r)}}),Or[kr][Ir]||$(Or[kr],Ir,Or[kr].valueOf),Dt(Or,Cr),ae[Sr]=!0,fr("asyncIterator");var Xr=X.f,$r=M.Symbol;if(L&&"function"==typeof $r&&!("description"in $r.prototype&&void 0===$r().description)){var Jr={},Zr=function e(t){var n=arguments.length<1||void 0===t?void 0:String(t),r=this instanceof e?new $r(n):void 0===n?$r():$r(n);return""===n&&(Jr[r]=!0),r};be(Zr,$r);var ei=Zr.prototype=$r.prototype;ei.constructor=Zr;var ti=ei.toString,ni="Symbol(test)"==String($r("test")),ri=/^Symbol\((.*)\)[^)]+$/;Xr(ei,"description",{configurable:!0,get:function(){var e=T(this)?this.valueOf():this,t=ti.call(e);if(C(Jr,e))return"";var n=ni?t.slice(7,-1):t.replace(ri,"$1");return""===n?void 0:n}}),_e({global:!0,forced:!0},{Symbol:Zr})}fr("hasInstance"),fr("isConcatSpreadable"),fr("iterator"),fr("match"),fr("matchAll"),fr("replace"),fr("search"),fr("species"),fr("split"),fr("toPrimitive"),fr("toStringTag"),fr("unscopables"),Dt(Math,"Math",!0),Dt(M.JSON,"JSON",!0),Oe.Symbol,fr("asyncDispose"),fr("dispose"),fr("observable"),fr("patternMatch"),fr("replaceAll");var ii={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},oi=Ce("iterator"),ai=Ce("toStringTag"),si=Pn.values;for(var ui in ii){var ci=M[ui],li=ci&&ci.prototype;if(li){if(li[oi]!==si)try{$(li,oi,si)}catch(Jo){li[oi]=si}if(li[ai]||$(li,ai,ui),ii[ui])for(var hi in Pn)if(li[hi]!==Pn[hi])try{$(li,hi,Pn[hi])}catch(Jo){li[hi]=Pn[hi]}}}function fi(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}function pi(e,t,n,r,i){function o(e){var t=s[e];Ae(s,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!T(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return i&&!T(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!T(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})}var a=M[e],s=a&&a.prototype,u=a,c=r?"set":"add",l={};if(Ge(e,"function"!=typeof a||!(i||s.forEach&&!v(function(){(new a).entries().next()}))))u=n.getConstructor(t,e,r,c),gi.REQUIRED=!0;else if(Ge(e,!0)){var h=new u,f=h[c](i?{}:-0,1)!=h,p=v(function(){h.has(1)}),d=fn(function(e){new a(e)}),m=!i&&v(function(){for(var e=new a,t=5;t--;)e[c](t,t);return!e.has(-0)});d||(((u=t(function(t,n){fi(t,u,e);var i=function(e,t,n){var r,i;return Bt&&"function"==typeof(r=t.constructor)&&r!==n&&T(i=r.prototype)&&i!==n.prototype&&Bt(e,i),e}(new a,t,u);return null!=n&&vi(n,i[c],i,r),i})).prototype=s).constructor=u),(p||m)&&(o("delete"),o("has"),r&&o("get")),(m||f)&&o(c),i&&s.clear&&delete s.clear}return l[e]=u,_e({global:!0,forced:u!=a},l),Dt(u,e),i||n.setStrong(u,e,r),u}function di(e,t,n){for(var r in t)Ae(e,r,t[r],n);return e}function mi(e,t,n){var r,i,o,a,s=arguments.length,u=1<s?t:void 0;return Ee(this),(r=void 0!==u)&&Ee(u),null==e?new this:(i=[],r?(o=0,a=Te(u,2<s?n:void 0,2),vi(e,function(e){i.push(a(e,o++))})):vi(e,i.push,i),new this(i))}_r.f("iterator");var yi=!v(function(){return Object.isExtensible(Object.preventExtensions({}))}),gi=i(function(e){function t(e){n(e,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var n=X.f,r=N("meta"),i=0,o=Object.isExtensible||function(){return!0},a=e.exports={REQUIRED:!1,fastKey:function(e,n){if(!T(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!C(e,r)){if(!o(e))return"F";if(!n)return"E";t(e)}return e[r].objectID},getWeakData:function(e,n){if(!C(e,r)){if(!o(e))return!0;if(!n)return!1;t(e)}return e[r].weakData},onFreeze:function(e){return yi&&a.REQUIRED&&o(e)&&!C(e,r)&&t(e),e}};ae[r]=!0}),vi=(gi.REQUIRED,gi.fastKey,gi.getWeakData,gi.onFreeze,i(function(e){function t(e,t){this.stopped=e,this.result=t}(e.exports=function(e,n,r,i,o){var a,s,u,c,l,h,f=Te(n,r,i?2:1);if(o)a=e;else{if("function"!=typeof(s=tn(e)))throw TypeError("Target is not iterable");if(Jt(s)){for(u=0,c=ye(e.length);u<c;u++)if((l=i?f(I(h=e[u])[0],h[1]):f(e[u]))&&l instanceof t)return l;return new t(!1)}a=s.call(e)}for(;!(h=a.next()).done;)if((l=$t(a,f,h.value,i))&&l instanceof t)return l;return new t(!1)}).stop=function(e){return new t(!0,e)}})),bi=Ce("species"),wi=X.f,_i=gi.fastKey,Ei=Ne.set,Ti=Ne.getterFor,Si={getConstructor:function(e,t,n,r){function i(e,t,n){var r,i,o=a(e),u=s(e,t);return u?u.value=n:(o.last=u={index:i=_i(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=u),r&&(r.next=u),L?o.size++:e.size++,"F"!==i&&(o.index[i]=u)),e}var o=e(function(e,i){fi(e,o,t),Ei(e,{type:t,index:ct(null),first:void 0,last:void 0,size:0}),L||(e.size=0),null!=i&&vi(i,e[r],e,n)}),a=Ti(t),s=function(e,t){var n,r=a(e),i=_i(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return di(o.prototype,{clear:function(){for(var e=a(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,L?e.size=0:this.size=0},delete:function(e){var t=a(this),n=s(this,e);if(n){var r=n.next,i=n.previous;delete t.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),t.first==n&&(t.first=r),t.last==n&&(t.last=i),L?t.size--:this.size--}return!!n},forEach:function(e,t){for(var n,r=a(this),i=Te(e,1<arguments.length?t:void 0,3);n=n?n.next:r.first;)for(i(n.value,n.key,this);n&&n.removed;)n=n.previous},has:function(e){return!!s(this,e)}}),di(o.prototype,n?{get:function(e){var t=s(this,e);return t&&t.value},set:function(e,t){return i(this,0===e?0:e,t)}}:{add:function(e){return i(this,e=0===e?0:e,e)}}),L&&wi(o.prototype,"size",{get:function(){return a(this).size}}),o},setStrong:function(e,t,n){var r=t+" Iterator",i=Ti(t),o=Ti(r);Mt(e,t,function(e,t){Ei(this,{type:r,target:e,state:i(e),kind:t,last:void 0})},function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:e.target=void 0,done:!0}},n?"entries":"values",!n,!0),function(e){var t=de(e),n=X.f;L&&t&&!t[bi]&&n(t,bi,{configurable:!0,get:function(){return this}})}(t)}};function Ci(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}function ki(){for(var e,t=I(this),n=Ee(t.delete),r=!0,i=0,o=arguments.length;i<o;i++)e=n.call(t,arguments[i]),r=r&&e;return!!r}function Ii(e){return Map.prototype.entries.call(e)}function xi(e,t){var n,r=I(e).constructor;return void 0===r||null==(n=I(r)[Ni])?t:Ee(n)}pi("Map",function(e){return function(t){return e(this,arguments.length?t:void 0)}},Si,!0),Oe.Map,_e({target:"Map",stat:!0},{from:mi}),_e({target:"Map",stat:!0},{of:Ci}),_e({target:"Map",proto:!0,real:!0,forced:J},{deleteAll:function(){return ki.apply(this,arguments)}}),_e({target:"Map",proto:!0,real:!0,forced:J},{every:function(e,t){var n=I(this),r=Ii(n),i=Te(e,1<arguments.length?t:void 0,3);return!vi(r,function(e,t){if(!i(t,e,n))return vi.stop()},void 0,!0,!0).stopped}});var Ni=Ce("species");function Ai(e){return Set.prototype.values.call(e)}_e({target:"Map",proto:!0,real:!0,forced:J},{filter:function(e,t){var n=I(this),r=Ii(n),i=Te(e,1<arguments.length?t:void 0,3),o=new(xi(n,de("Map"))),a=Ee(o.set);return vi(r,function(e,t){i(t,e,n)&&a.call(o,e,t)},void 0,!0,!0),o}}),_e({target:"Map",proto:!0,real:!0,forced:J},{find:function(e,t){var n=I(this),r=Ii(n),i=Te(e,1<arguments.length?t:void 0,3);return vi(r,function(e,t){if(i(t,e,n))return vi.stop(t)},void 0,!0,!0).result}}),_e({target:"Map",proto:!0,real:!0,forced:J},{findKey:function(e,t){var n=I(this),r=Ii(n),i=Te(e,1<arguments.length?t:void 0,3);return vi(r,function(e,t){if(i(t,e,n))return vi.stop(e)},void 0,!0,!0).result}}),_e({target:"Map",stat:!0},{groupBy:function(e,t){var n=new this;Ee(t);var r=Ee(n.has),i=Ee(n.get),o=Ee(n.set);return vi(e,function(e){var a=t(e);r.call(n,a)?i.call(n,a).push(e):o.call(n,a,[e])}),n}}),_e({target:"Map",proto:!0,real:!0,forced:J},{includes:function(e){return vi(Ii(I(this)),function(t,n){if(function(e,t){return e===t||e!=e&&!1}(n,e))return vi.stop()},void 0,!0,!0).stopped}}),_e({target:"Map",stat:!0},{keyBy:function(e,t){var n=new this;Ee(t);var r=Ee(n.set);return vi(e,function(e){r.call(n,t(e),e)}),n}}),_e({target:"Map",proto:!0,real:!0,forced:J},{keyOf:function(e){return vi(Ii(I(this)),function(t,n){if(n===e)return vi.stop(t)},void 0,!0,!0).result}}),_e({target:"Map",proto:!0,real:!0,forced:J},{mapKeys:function(e,t){var n=I(this),r=Ii(n),i=Te(e,1<arguments.length?t:void 0,3),o=new(xi(n,de("Map"))),a=Ee(o.set);return vi(r,function(e,t){a.call(o,i(t,e,n),t)},void 0,!0,!0),o}}),_e({target:"Map",proto:!0,real:!0,forced:J},{mapValues:function(e,t){var n=I(this),r=Ii(n),i=Te(e,1<arguments.length?t:void 0,3),o=new(xi(n,de("Map"))),a=Ee(o.set);return vi(r,function(e,t){a.call(o,e,i(t,e,n))},void 0,!0,!0),o}}),_e({target:"Map",proto:!0,real:!0,forced:J},{merge:function(e){for(var t=I(this),n=Ee(t.set),r=0;r<arguments.length;)vi(arguments[r++],n,t,!0);return t}}),_e({target:"Map",proto:!0,real:!0,forced:J},{reduce:function(e,t){var n,r,i=I(this),o=Ii(i);if(Ee(e),1<arguments.length)n=t;else{if((r=o.next()).done)throw TypeError("Reduce of empty map with no initial value");n=r.value[1]}return vi(o,function(t,r){n=e(n,r,t,i)},void 0,!0,!0),n}}),_e({target:"Map",proto:!0,real:!0,forced:J},{some:function(e,t){var n=I(this),r=Ii(n),i=Te(e,1<arguments.length?t:void 0,3);return vi(r,function(e,t){if(i(t,e,n))return vi.stop()},void 0,!0,!0).stopped}}),_e({target:"Map",proto:!0,real:!0,forced:J},{update:function(e,t,n){var r=I(this),i=arguments.length;Ee(t);var o=r.has(e);if(!o&&i<3)throw TypeError("Updating absent value");var a=o?r.get(e):Ee(2<i?n:void 0)(e,r);return r.set(e,t(a,e,r)),r}}),_e({target:"Map",proto:!0,real:!0,forced:J},{updateOrInsert:function(e,t,n){var r=I(this);Ee(t),Ee(n);var i=r.has(e)?t(r.get(e)):n();return r.set(e,i),i}}),pi("Set",function(e){return function(t){return e(this,arguments.length?t:void 0)}},Si),Oe.Set,_e({target:"Set",stat:!0},{from:mi}),_e({target:"Set",stat:!0},{of:Ci}),_e({target:"Set",proto:!0,real:!0,forced:J},{addAll:function(){return function(){for(var e=I(this),t=Ee(e.add),n=0,r=arguments.length;n<r;n++)t.call(e,arguments[n]);return e}.apply(this,arguments)}}),_e({target:"Set",proto:!0,real:!0,forced:J},{deleteAll:function(){return ki.apply(this,arguments)}}),_e({target:"Set",proto:!0,real:!0,forced:J},{every:function(e,t){var n=I(this),r=Ai(n),i=Te(e,1<arguments.length?t:void 0,3);return!vi(r,function(e){if(!i(e,e,n))return vi.stop()},void 0,!1,!0).stopped}}),_e({target:"Set",proto:!0,real:!0,forced:J},{difference:function(e){var t=I(this),n=new(xi(t,de("Set")))(t),r=Ee(n.delete);return vi(e,function(e){r.call(n,e)}),n}}),_e({target:"Set",proto:!0,real:!0,forced:J},{filter:function(e,t){var n=I(this),r=Ai(n),i=Te(e,1<arguments.length?t:void 0,3),o=new(xi(n,de("Set"))),a=Ee(o.add);return vi(r,function(e){i(e,e,n)&&a.call(o,e)},void 0,!1,!0),o}}),_e({target:"Set",proto:!0,real:!0,forced:J},{find:function(e,t){var n=I(this),r=Ai(n),i=Te(e,1<arguments.length?t:void 0,3);return vi(r,function(e){if(i(e,e,n))return vi.stop(e)},void 0,!1,!0).result}}),_e({target:"Set",proto:!0,real:!0,forced:J},{intersection:function(e){var t=I(this),n=new(xi(t,de("Set"))),r=Ee(t.has),i=Ee(n.add);return vi(e,function(e){r.call(t,e)&&i.call(n,e)}),n}}),_e({target:"Set",proto:!0,real:!0,forced:J},{isDisjointFrom:function(e){var t=I(this),n=Ee(t.has);return!vi(e,function(e){if(!0===n.call(t,e))return vi.stop()}).stopped}}),_e({target:"Set",proto:!0,real:!0,forced:J},{isSubsetOf:function(e){var t=function(e){var t=tn(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return I(t.call(e))}(this),n=I(e),r=n.has;return"function"!=typeof r&&(n=new(de("Set"))(e),r=Ee(n.has)),!vi(t,function(e){if(!1===r.call(n,e))return vi.stop()},void 0,!1,!0).stopped}}),_e({target:"Set",proto:!0,real:!0,forced:J},{isSupersetOf:function(e){var t=I(this),n=Ee(t.has);return!vi(e,function(e){if(!1===n.call(t,e))return vi.stop()}).stopped}}),_e({target:"Set",proto:!0,real:!0,forced:J},{join:function(e){var t=I(this),n=Ai(t),r=void 0===e?",":String(e),i=[];return vi(n,i.push,i,!1,!0),i.join(r)}}),_e({target:"Set",proto:!0,real:!0,forced:J},{map:function(e,t){var n=I(this),r=Ai(n),i=Te(e,1<arguments.length?t:void 0,3),o=new(xi(n,de("Set"))),a=Ee(o.add);return vi(r,function(e){a.call(o,i(e,e,n))},void 0,!1,!0),o}}),_e({target:"Set",proto:!0,real:!0,forced:J},{reduce:function(e,t){var n,r,i=I(this),o=Ai(i);if(Ee(e),1<arguments.length)n=t;else{if((r=o.next()).done)throw TypeError("Reduce of empty set with no initial value");n=r.value}return vi(o,function(t){n=e(n,t,t,i)},void 0,!1,!0),n}}),_e({target:"Set",proto:!0,real:!0,forced:J},{some:function(e,t){var n=I(this),r=Ai(n),i=Te(e,1<arguments.length?t:void 0,3);return vi(r,function(e){if(i(e,e,n))return vi.stop()},void 0,!1,!0).stopped}}),_e({target:"Set",proto:!0,real:!0,forced:J},{symmetricDifference:function(e){var t=I(this),n=new(xi(t,de("Set")))(t),r=Ee(n.delete),i=Ee(n.add);return vi(e,function(e){r.call(n,e)||i.call(n,e)}),n}}),_e({target:"Set",proto:!0,real:!0,forced:J},{union:function(e){var t=I(this),n=new(xi(t,de("Set")))(t);return vi(e,Ee(n.add),n),n}});var Oi=Math.floor;_e({target:"Number",stat:!0},{isInteger:function(e){return!T(e)&&isFinite(e)&&Oi(e)===e}}),Oe.Number.isInteger;var Di=function(e,t){return(Di=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Ri(e,t){function n(){this.constructor=e}Di(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Pi=function(){return(Pi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Mi(e,t,n,r){return new(n=n||Promise)(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function Li(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Fi(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function Ui(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function ji(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ui(arguments[t]));return e}function qi(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128):t[n++]=i>>12|224,t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t}function Bi(e){try{return Hi.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}var Vi={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Wi=function(e,t){if(!e)throw zi(t)},zi=function(e){return new Error("Firebase Database ("+Vi.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},Hi={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(qi(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(191<i&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};function Ki(e){return Qi(void 0,e)}function Qi(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=Qi(e[n],t[n]));return e}var Gi=(Yi.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}},Yi);function Yi(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}function Xi(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function $i(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xi())}function Ji(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Zi(){return!0===Vi.NODE_ADMIN}var eo,to=(Ri(no,eo=Error),no);function no(e,t){var n=eo.call(this,t)||this;return n.code=e,n.name="FirebaseError",Object.setPrototypeOf(n,no.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,ro.prototype.create),n}var ro=(io.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?function(e,t){return e.replace(oo,function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"})}(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new to(i,s),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},io);function io(e,t,n){this.service=e,this.serviceName=t,this.errors=n}var oo=/\{\$([^}]+)}/g;function ao(e){return JSON.parse(e)}function so(e){return JSON.stringify(e)}function uo(e){var t={},n={},r={},i="";try{var o=e.split(".");t=ao(Bi(o[0])||""),n=ao(Bi(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}}function co(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function lo(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ho(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function fo(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}var po=(mo.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},mo.prototype.compress_=function(e,t){t=t||0;var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)a=r<40?r<20?(o=l^u&(c^l),1518500249):(o=u^c^l,1859775393):r<60?(o=u&c|l&(u|c),2400959708):(o=u^c^l,3395469782),i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295,h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},mo.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},mo.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},mo);function mo(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}function yo(e,t){var n=new bo(e,t);return n.subscribe.bind(n)}var go,vo,bo=(wo.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},wo.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},wo.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},wo.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=_o),void 0===r.error&&(r.error=_o),void 0===r.complete&&(r.complete=_o);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),o},wo.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},wo.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},wo.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})},wo.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},wo);function wo(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}function _o(){}function Eo(e,t,n,r){var i;if(r<t?i="at least "+t:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function To(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument "}function So(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(To(e,t,r)+"must be a valid function.")}function Co(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(To(e,t,r)+"must be a valid context object.")}function ko(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:55296<=r&&r<=56319?(t+=4,n++):t+=3}return t}function Io(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString();switch(t){case go.DEBUG:case go.VERBOSE:console.log.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;case go.INFO:console.info.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;case go.WARN:console.warn.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;case go.ERROR:console.error.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}}(vo=go=go||{})[vo.DEBUG=0]="DEBUG",vo[vo.VERBOSE=1]="VERBOSE",vo[vo.INFO=2]="INFO",vo[vo.WARN=3]="WARN",vo[vo.ERROR=4]="ERROR",vo[vo.SILENT=5]="SILENT";var xo,No=go.INFO,Ao=(Object.defineProperty(Oo.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in go))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(Oo.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),Oo.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,go.DEBUG].concat(e))},Oo.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,go.VERBOSE].concat(e))},Oo.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,go.INFO].concat(e))},Oo.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,go.WARN].concat(e))},Oo.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,go.ERROR].concat(e))},Oo);function Oo(e){this.name=e,this._logLevel=No,this._logHandler=Io}var Do=((xo={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",xo["bad-app-name"]="Illegal App name: '{$appName}",xo["duplicate-app"]="Firebase App named '{$appName}' already exists",xo["app-deleted"]="Firebase App named '{$appName}' already deleted",xo["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",xo),Ro=new ro("app","Firebase",Do),Po="[DEFAULT]",Mo=[],Lo=(Object.defineProperty(Fo.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(Fo.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(Fo.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),Fo.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){e.firebase_.INTERNAL.removeApp(e.name_);for(var t=[],n=0,r=Object.keys(e.services_);n<r.length;n++)for(var i=r[n],o=0,a=Object.keys(e.services_[i]);o<a.length;o++){var s=a[o];t.push(e.services_[i][s])}return Promise.all(t.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))}).then(function(){e.isDeleted_=!0,e.services_={}})},Fo.prototype._getService=function(e,t){if(void 0===t&&(t=Po),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==Po?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=r}return this.services_[e][t]},Fo.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=Po),this.services_[e]&&this.services_[e][t]&&delete this.services_[e][t]},Fo.prototype.extendApp=function(e){var t=this;Qi(this,e),e.INTERNAL&&e.INTERNAL.addAuthTokenListener&&(Mo.forEach(function(e){t.INTERNAL.addAuthTokenListener(e)}),Mo=[])},Fo.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Ro.create("app-deleted",{appName:this.name_})},Fo);function Fo(e,t,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=Ki(e),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){Mo.push(e),setTimeout(function(){return e(null)},0)},removeAuthTokenListener:function(e){Mo=Mo.filter(function(t){return t!==e})}}}Lo.prototype.name&&Lo.prototype.options||Lo.prototype.delete||console.log("dc");var Uo=new Ao("@firebase/app");if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Uo.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var jo=self.firebase.SDK_VERSION;jo&&0<=jo.indexOf("LITE")&&Uo.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var qo=function e(){var t=function(e){var t={},n={},r={},i={__esModule:!0,initializeApp:function(n,r){void 0===r&&(r={}),"object"==typeof r&&null!==r||(r={name:r});var o=r;void 0===o.name&&(o.name=Po);var a=o.name;if("string"!=typeof a||!a)throw Ro.create("bad-app-name",{appName:String(a)});if(co(t,a))throw Ro.create("duplicate-app",{appName:a});var u=new e(n,o,i);return s(t[a]=u,"create"),u},app:o,apps:null,SDK_VERSION:"6.6.2",INTERNAL:{registerService:function(t,s,u,c,l){if(void 0===l&&(l=!1),n[t])return Uo.debug("There were multiple attempts to register service "+t+"."),i[t];function h(e){if(void 0===e&&(e=o()),"function"!=typeof e[t])throw Ro.create("invalid-app-argument",{appName:t});return e[t]()}return n[t]=s,c&&(r[t]=c,a().forEach(function(e){c("create",e)})),void 0!==u&&Qi(h,u),i[t]=h,e.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,t).apply(this,l?e:[])},h},removeApp:function(e){s(t[e],"delete"),delete t[e]},factories:n,useAsService:u}};function o(e){if(!co(t,e=e||Po))throw Ro.create("no-app",{appName:e});return t[e]}function a(){return Object.keys(t).map(function(e){return t[e]})}function s(e,t){for(var i=0,o=Object.keys(n);i<o.length;i++){var a=u(0,o[i]);if(null===a)return;r[a]&&r[a](t,e)}}function u(e,t){return"serverAuth"===t?null:t}return i.default=i,Object.defineProperty(i,"apps",{get:a}),o.App=e,i}(Lo);return t.INTERNAL=Pi({},t.INTERNAL,{createFirebaseNamespace:e,extendNamespace:function(e){Qi(t,e)},createSubscribe:yo,ErrorFactory:ro,deepExtend:Qi}),t}(),Bo=qo.initializeApp;qo.initializeApp=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return function(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(e){return!1}}()&&Uo.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),Bo.apply(void 0,e)};var Vo=qo;(function(){var e,n="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},r="undefined"!=typeof window&&window===this?this:"undefined"!=typeof t&&null!=t?t:this;function i(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}(e)}}!function(e,t){if(t){var i=r;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];a in i||(i[a]={}),i=i[a]}(t=t(o=i[e=e[e.length-1]]))!=o&&null!=t&&n(i,e,{configurable:!0,writable:!0,value:t})}}("Promise",function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.a=null}function o(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c(function(){t.g()})}this.a.push(e)};var a=r.setTimeout;n.prototype.c=function(e){a(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.f(e)}}}this.a=null},n.prototype.f=function(e){this.c(function(){throw e})},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.o(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.u(e):this.h(e)}},t.prototype.u=function(e){var t=void 0;try{t=e.then}catch(e){return void this.g(e)}"function"==typeof t?this.v(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)s.b(this.a[e]);this.a=null}};var s=new n;return t.prototype.o=function(e){var t=this.f();e.Ja(t.resolve,t.reject)},t.prototype.v=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(t){o(t)}}:t}var i,o,a=new t(function(e,t){i=e,o=t});return this.Ja(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Ja=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},t.resolve=o,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var r=i(e),a=r.next();!a.done;a=r.next())o(a.value).Ja(t,n)})},t.all=function(e){var n=i(e),r=n.next();return r.done?o([]):new t(function(e,t){function i(t){return function(n){a[t]=n,0==--s&&e(a)}}for(var a=[],s=0;a.push(void 0),s++,o(r.value).Ja(i(a.length-1),t),!(r=n.next()).done;);})},t});var o=o||{},a=this||self;function s(e){return"string"==typeof e}function u(e){return"boolean"==typeof e}var c=/^[\w+\/_-]+[=]{0,2}$/,l=null;function h(){}function f(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function p(e){return null===e}function d(e){return"array"==f(e)}function m(e){var t=f(e);return"array"==t||"object"==t&&"number"==typeof e.length}function y(e){return"function"==f(e)}function g(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var v="closure_uid_"+(1e9*Math.random()>>>0),b=0;function w(e,t,n){return e.call.apply(e.bind,arguments)}function _(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function E(e,t,n){return(E=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:_).apply(null,arguments)}function T(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var S=Date.now||function(){return+new Date};function C(e,t){function n(){}n.prototype=t.prototype,e.qb=t.prototype,e.prototype=new n,(e.prototype.constructor=e).fd=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function k(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(e){return!1}}function I(e){if(Error.captureStackTrace)Error.captureStackTrace(this,I);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function x(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");I.call(this,n+e[r])}function N(e,t){throw new x("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function A(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function O(e,t){e.f(t),e.b<100&&(e.b++,t.next=e.a,e.a=t)}function D(){this.b=this.a=null}C(I,Error),I.prototype.name="CustomError",C(x,I),x.prototype.name="AssertionError",A.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var R=new A(function(){return new P},function(e){e.reset()});function P(){this.next=this.b=this.a=null}function M(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break e}}catch(e){}i=null}if(i&&void 0!==i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(g(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(e){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;N("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}D.prototype.add=function(e,t){var n=R.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},P.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},P.prototype.reset=function(){this.next=this.b=this.a=null};var L=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(s(e))return s(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},F=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=s(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)},U=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i=s(e)?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},j=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=s(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function q(e,t){return 0<=L(e,t)}function B(e,t){var n;return(n=0<=(t=L(e,t)))&&Array.prototype.splice.call(e,t,1),n}function V(e,t){!function(e,t){for(var n=s(e)?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,function(n,r){t.call(void 0,n,r,e)&&Array.prototype.splice.call(e,r,1).length})}function W(e){return Array.prototype.concat.apply([],arguments)}function z(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function H(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function K(e){for(var t in e)return!1;return!0}function Q(e){var t,n={};for(t in e)n[t]=e[t];return n}var G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<G.length;o++)n=G[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function X(e,t){this.a=e===Z&&t||"",this.b=J}function $(e){return e instanceof X&&e.constructor===X&&e.b===J?e.a:(N("expected object of type Const, got '"+e+"'"),"type_error:Const")}X.prototype.qa=!0,X.prototype.pa=function(){return this.a},X.prototype.toString=function(){return"Const{"+this.a+"}"};var J={},Z={},ee=new X(Z,"");function te(){this.a="",this.b=ae}function ne(e){return e instanceof te&&e.constructor===te&&e.b===ae?e.a:(N("expected object of type TrustedResourceUrl, got '"+e+"' of type "+f(e)),"type_error:TrustedResourceUrl")}function re(e,t){var n=$(e);if(!oe.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return se(e=n.replace(ie,function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof X?$(e):encodeURIComponent(String(e))}))}te.prototype.qa=!0,te.prototype.pa=function(){return this.a.toString()},te.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var ie=/%{(\w+)}/g,oe=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^\/\\]|[^:\/\\%]+\/|[^:\/\\%]*[?#]|about:blank#)/i,ae={};function se(e){var t=new te;return t.a=e,t}var ue=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},ce=/&/g,le=/</g,he=/>/g,fe=/"/g,pe=/'/g,de=/\x00/g,me=/[\x00&<>"']/;function ye(e,t){return-1!=e.indexOf(t)}function ge(e,t){return e<t?-1:t<e?1:0}function ve(){this.a="",this.b=Te}function be(e){return e instanceof ve&&e.constructor===ve&&e.b===Te?e.a:(N("expected object of type SafeUrl, got '"+e+"' of type "+f(e)),"type_error:SafeUrl")}ve.prototype.qa=!0,ve.prototype.pa=function(){return this.a.toString()},ve.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var we=/^(?:(?:https?|mailto|ftp):|[^:\/?#]*(?:[\/?#]|$))/i;function _e(e){return e instanceof ve?e:(e="object"==typeof e&&e.qa?e.pa():String(e),we.test(e)||(e="about:invalid#zClosurez"),Se(e))}var Ee,Te={};function Se(e){var t=new ve;return t.a=e,t}Se("about:blank");e:{var Ce=a.navigator;if(Ce){var ke=Ce.userAgent;if(ke){Ee=ke;break e}}Ee=""}function Ie(e){return ye(Ee,e)}function xe(){this.a="",this.b=Ae}function Ne(e){return e instanceof xe&&e.constructor===xe&&e.b===Ae?e.a:(N("expected object of type SafeHtml, got '"+e+"' of type "+f(e)),"type_error:SafeHtml")}xe.prototype.qa=!0,xe.prototype.pa=function(){return this.a.toString()},xe.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ae={};function Oe(e){var t=new xe;return t.a=e,t}Oe("<!DOCTYPE html>");var De,Re,Pe=Oe("");function Me(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Le(e){return me.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(ce,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(le,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(he,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(fe,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(pe,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(de,"&#0;"))),e}function Fe(e){a.setTimeout(function(){throw e},0)}function Ue(e,t){Re||function(){if(a.Promise&&a.Promise.resolve){var e=a.Promise.resolve(void 0);Re=function(){e.then(Be)}}else Re=function(){var e=Be;!y(a.setImmediate)||a.Window&&a.Window.prototype&&!Ie("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(De=De||function(){var e=a.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Ie("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",function(e){var t=se($(ee));M(e,"HTMLIFrameElement"),e.src=ne(t).toString()}(e),document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(Ne(Pe)),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=E(function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()},this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),void 0===e||Ie("Trident")||Ie("MSIE"))return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){a.setTimeout(e,0)};var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).yb;n.yb=null,e()}},function(e){r.next={yb:e},r=r.next,t.port2.postMessage(0)}}())(e):a.setImmediate(e)}}(),je||(Re(),je=!0),qe.add(e,t)}Oe("<br>");var je=!1,qe=new D;function Be(){for(var e;n=t=void 0,n=null,(t=qe).a&&(n=t.a,t.a=t.a.next,t.a||(t.b=null),n.next=null),e=n;){try{e.a.call(e.b)}catch(e){Fe(e)}O(R,e)}var t,n;je=!1}function Ve(e,t){if(this.a=We,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=h)try{var n=this;e.call(t,function(e){tt(n,ze,e)},function(e){if(!(e instanceof ut))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}tt(n,He,e)})}catch(e){tt(this,He,e)}}var We=0,ze=2,He=3;function Ke(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ke.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Qe=new A(function(){return new Ke},function(e){e.reset()});function Ge(e,t,n){var r=Qe.get();return r.g=e,r.b=t,r.f=n,r}function Ye(e){if(e instanceof Ve)return e;var t=new Ve(h);return tt(t,ze,e),t}function Xe(e){return new Ve(function(t,n){n(e)})}function $e(e,t,n){nt(e,t,n,null)||Ue(T(t,e))}function Je(e){return new Ve(function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Gb:!0,value:o}:{Gb:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)$e(e[o],T(i,o,!0),T(i,o,!1));else t(r)})}function Ze(e,t){e.b||e.a!=ze&&e.a!=He||rt(e),e.f?e.f.next=t:e.b=t,e.f=t}function et(e,t,n,r){var i=Ge(null,null,null);return i.a=new Ve(function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(n){o(n)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof ut?o(t):e(i)}catch(t){o(t)}}:o}),Ze(i.a.c=e,i),i.a}function tt(e,t,n){e.a==We&&(e===n&&(t=He,n=new TypeError("Promise cannot resolve to itself")),e.a=1,nt(n,e.Oc,e.Pc,e)||(e.i=n,e.a=t,e.c=null,rt(e),t!=He||n instanceof ut||function(e,t){e.g=!0,Ue(function(){e.g&&st.call(null,t)})}(e,n)))}function nt(e,t,n,r){if(e instanceof Ve)return Ze(e,Ge(t||h,n||null,r)),!0;if(k(e))return e.then(t,n,r),!0;if(g(e))try{var i=e.then;if(y(i))return function(e,t,n,r,i){function o(e){a||(a=!0,r.call(i,e))}var a=!1;try{t.call(e,function(e){a||(a=!0,n.call(i,e))},o)}catch(e){o(e)}}(e,i,t,n,r),!0}catch(e){return n.call(r,e),!0}return!1}function rt(e){e.h||(e.h=!0,Ue(e.Zb,e))}function it(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function ot(e,t,n,r){if(n==He&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,at(t,n,r);else try{t.c?t.g.call(t.f):at(t,n,r)}catch(e){st.call(null,e)}O(Qe,t)}function at(e,t,n){t==ze?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}Ve.prototype.then=function(e,t,n){return et(this,y(e)?e:null,y(t)?t:null,n)},Ve.prototype.$goog_Thenable=!0,(e=Ve.prototype).ka=function(e,t){return(e=Ge(e,e,t)).c=!0,Ze(this,e),this},e.s=function(e,t){return et(this,null,e,t)},e.cancel=function(e){this.a==We&&Ue(function(){!function e(t,n){if(t.a==We)if(t.c){var r=t.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==t&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==We&&1==i?e(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):it(r),ot(r,o,He,n)))}t.c=null}else tt(t,He,n)}(this,new ut(e))},this)},e.Oc=function(e){this.a=We,tt(this,ze,e)},e.Pc=function(e){this.a=We,tt(this,He,e)},e.Zb=function(){for(var e;e=it(this);)ot(this,e,this.a,this.i);this.h=!1};var st=Fe;function ut(e){I.call(this,e)}function ct(){this.ta=this.ta,this.la=this.la}C(ut,I);var lt=0;function ht(e){e.ta||(e.ta=!0,e.xa(),0==lt)||e[v]||(e[v]=++b)}function ft(e){return ft[" "](e),e}ct.prototype.ta=!(ut.prototype.name="cancel"),ct.prototype.xa=function(){if(this.la)for(;this.la.length;)this.la.shift()()},ft[" "]=h;var pt,dt,mt=Ie("Opera"),yt=Ie("Trident")||Ie("MSIE"),gt=Ie("Edge"),vt=gt||yt,bt=Ie("Gecko")&&!(ye(Ee.toLowerCase(),"webkit")&&!Ie("Edge"))&&!(Ie("Trident")||Ie("MSIE"))&&!Ie("Edge"),wt=ye(Ee.toLowerCase(),"webkit")&&!Ie("Edge");function _t(){var e=a.document;return e?e.documentMode:void 0}e:{var Et="",Tt=(dt=Ee,bt?/rv:([^\);]+)(\)|;)/.exec(dt):gt?/Edge\/([\d\.]+)/.exec(dt):yt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(dt):wt?/WebKit\/(\S+)/.exec(dt):mt?/(?:Version)[ \/]?(\S+)/.exec(dt):void 0);if(Tt&&(Et=Tt?Tt[1]:""),yt){var St=_t();if(null!=St&&St>parseFloat(Et)){pt=String(St);break e}}pt=Et}var Ct,kt={};function It(e){return function(t,n){var r=kt;return Object.prototype.hasOwnProperty.call(r,t)?r[t]:r[t]=function(){for(var t=0,n=ue(String(pt)).split("."),r=ue(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=ge(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ge(0==a[2].length,0==s[2].length)||ge(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}()}(e)}Ct=a.document&&yt?_t():void 0;var xt=Object.freeze||function(e){return e},Nt=!yt||9<=Number(Ct),At=yt&&!It("9"),Ot=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{a.addEventListener("test",h,t),a.removeEventListener("test",h,t)}catch(e){}return e}();function Dt(e,t){this.type=e,this.b=this.target=t,this.Mb=!0}function Rt(e,t){if(Dt.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(bt){e:{try{ft(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=s(e.pointerType)?e.pointerType:Pt[e.pointerType]||"",(this.a=e).defaultPrevented&&this.preventDefault()}}Dt.prototype.preventDefault=function(){this.Mb=!1},C(Rt,Dt);var Pt=xt({2:"touch",3:"pen",4:"mouse"});Rt.prototype.preventDefault=function(){Rt.qb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,At)try{(e.ctrlKey||112<=e.keyCode&&e.keyCode<=123)&&(e.keyCode=-1)}catch(e){}},Rt.prototype.f=function(){return this.a};var Mt="closure_listenable_"+(1e6*Math.random()|0),Lt=0;function Ft(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Na=i,this.key=++Lt,this.ra=this.Ia=!1}function Ut(e){e.ra=!0,e.listener=null,e.proxy=null,e.src=null,e.Na=null}function jt(e){this.src=e,this.a={},this.b=0}function qt(e,t){var n=t.type;n in e.a&&B(e.a[n],t)&&(Ut(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function Bt(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ra&&o.listener==t&&o.capture==!!n&&o.Na==r)return i}return-1}jt.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=Bt(e,t,r,i);return-1<a?(t=e[a],n||(t.Ia=!1)):((t=new Ft(t,this.src,o,!!r,i)).Ia=n,e.push(t)),t};var Vt="closure_lm_"+(1e6*Math.random()|0),Wt={};function zt(e,t,n,r,i){if(r&&r.once)Kt(e,t,n,r,i);else if(d(t))for(var o=0;o<t.length;o++)zt(e,t[o],n,r,i);else n=tn(n),e&&e[Mt]?rn(e,t,n,g(r)?!!r.capture:!!r,i):Ht(e,t,n,!1,r,i)}function Ht(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=g(i)?!!i.capture:!!i,s=Zt(e);if(s||(e[Vt]=s=new jt(e)),!(n=s.add(t,n,r,a,o)).proxy)if(r=function(){var e=Jt,t=Nt?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),(n.proxy=r).src=e,r.listener=n,e.addEventListener)Ot||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Yt(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}}function Kt(e,t,n,r,i){if(d(t))for(var o=0;o<t.length;o++)Kt(e,t[o],n,r,i);else n=tn(n),e&&e[Mt]?on(e,t,n,g(r)?!!r.capture:!!r,i):Ht(e,t,n,!0,r,i)}function Qt(e,t,n,r,i){if(d(t))for(var o=0;o<t.length;o++)Qt(e,t[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=tn(n),e&&e[Mt]?(e=e.u,(t=String(t).toString())in e.a&&-1<(n=Bt(o=e.a[t],n,r,i))&&(Ut(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--))):(e=e&&Zt(e))&&(t=e.a[t.toString()],e=-1,t&&(e=Bt(t,n,r,i)),(n=-1<e?t[e]:null)&&Gt(n))}function Gt(e){if("number"!=typeof e&&e&&!e.ra){var t=e.src;if(t&&t[Mt])qt(t.u,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Yt(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Zt(t))?(qt(n,e),0==n.b&&(n.src=null,t[Vt]=null)):Ut(e)}}}function Yt(e){return e in Wt?Wt[e]:Wt[e]="on"+e}function Xt(e,t,n,r){var i=!0;if((e=Zt(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.ra&&(o=$t(o,r),i=i&&!1!==o)}return i}function $t(e,t){var n=e.listener,r=e.Na||e.src;return e.Ia&&Gt(e),n.call(r,t)}function Jt(e,t){if(e.ra)return!0;if(Nt)return $t(e,new Rt(t,this));if(!t)e:{t=["window","event"];for(var n=a,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Rt(r=t,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(e){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=Xt(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=Xt(r[i],e,!1,t),n=n&&o}return n}function Zt(e){return(e=e[Vt])instanceof jt?e:null}var en="__closure_events_fn_"+(1e9*Math.random()>>>0);function tn(e){return y(e)?e:(e[en]||(e[en]=function(t){return e.handleEvent(t)}),e[en])}function nn(){ct.call(this),this.u=new jt(this),(this.Sb=this).Wa=null}function rn(e,t,n,r,i){e.u.add(String(t),n,!1,r,i)}function on(e,t,n,r,i){e.u.add(String(t),n,!0,r,i)}function an(e,t,n,r){if(!(t=e.u.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ra&&a.capture==n){var s=a.listener,u=a.Na||a.src;a.Ia&&qt(e.u,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Mb}function sn(e,t,n){if(y(e))n&&(e=E(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=E(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function un(e){var t=null;return new Ve(function(n,r){-1==(t=sn(function(){n(void 0)},e))&&r(Error("Failed to schedule timer."))}).s(function(e){throw a.clearTimeout(t),e})}function cn(e){if(e.U&&"function"==typeof e.U)return e.U();if(s(e))return e.split("");if(m(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function ln(e){if(e.X&&"function"==typeof e.X)return e.X();if(!e.U||"function"!=typeof e.U){if(m(e)||s(e)){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function hn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof hn)for(n=e.X(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function fn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];pn(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)pn(i,r=e.a[t])||(i[e.a[n++]=r]=1),t++;e.a.length=n}}function pn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}C(nn,ct),nn.prototype[Mt]=!0,nn.prototype.addEventListener=function(e,t,n,r){zt(this,e,t,n,r)},nn.prototype.removeEventListener=function(e,t,n,r){Qt(this,e,t,n,r)},nn.prototype.dispatchEvent=function(e){var t,n=this.Wa;if(n)for(t=[];n;n=n.Wa)t.push(n);n=this.Sb;var r=e.type||e;if(s(e))e=new Dt(e,n);else if(e instanceof Dt)e.target=e.target||n;else{var i=e;Y(e=new Dt(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.b=t[o];i=an(a,r,!0,e)&&i}if(i=an(a=e.b=n,r,!0,e)&&i,i=an(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=an(a=e.b=t[o],r,!1,e)&&i;return i},nn.prototype.xa=function(){if(nn.qb.xa.call(this),this.u){var e,t=this.u;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)Ut(n[r]);delete t.a[e],t.b--}}this.Wa=null},(e=hn.prototype).U=function(){fn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},e.X=function(){return fn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(e,t){return pn(this.b,e)?this.b[e]:t},e.set=function(e,t){pn(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},e.forEach=function(e,t){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var dn=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function mn(e,t){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,e instanceof mn?(this.h=void 0!==t?t:e.h,yn(this,e.f),this.i=e.i,this.b=e.b,gn(this,e.l),this.c=e.c,vn(this,Fn(e.a)),this.g=e.g):e&&(n=String(e).match(dn))?(this.h=!!t,yn(this,n[1]||"",!0),this.i=Tn(n[2]||""),this.b=Tn(n[3]||"",!0),gn(this,n[4]),this.c=Tn(n[5]||"",!0),vn(this,n[6]||"",!0),this.g=Tn(n[7]||"")):(this.h=!!t,this.a=new On(null,this.h))}function yn(e,t,n){e.f=n?Tn(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function gn(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.l=t}else e.l=null}function vn(e,t,n){t instanceof On?(e.a=t,function(e,t){t&&!e.f&&(Dn(e),e.c=null,e.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Pn(this,t),Ln(this,n,e))},e)),e.f=t}(e.a,e.h)):(n||(t=Sn(t,Nn)),e.a=new On(t,e.h))}function bn(e,t,n){e.a.set(t,n)}function wn(e,t){return e.a.get(t)}function _n(e){return e instanceof mn?new mn(e):new mn(e,void 0)}function En(e,t){var n=new mn(null,void 0);return yn(n,"https"),e&&(n.b=e),t&&(n.c=t),n}function Tn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Sn(e,t,n){return s(e)?(e=encodeURI(e).replace(t,Cn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Cn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}mn.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Sn(t,kn,!0),":");var n=this.b;return!n&&"file"!=t||(e.push("//"),(t=this.i)&&e.push(Sn(t,kn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&e.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(Sn(n,"/"==n.charAt(0)?xn:In,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.g)&&e.push("#",Sn(n,An)),e.join("")},mn.prototype.resolve=function(e){var t=new mn(this),n=!!e.f;n?yn(t,e.f):n=!!e.i,n?t.i=e.i:n=!!e.b,n?t.b=e.b:n=null!=e.l;var r=e.c;if(n)gn(t,e.l);else if(n=!!e.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=t.c.lastIndexOf("/");-1!=i&&(r=t.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ye(i,"./")||ye(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.c=r:n=""!==e.a.toString(),n?vn(t,Fn(e.a)):n=!!e.g,n&&(t.g=e.g),t};var kn=/[#\/\?@]/g,In=/[#\?:]/g,xn=/[#\?]/g,Nn=/[#\?@]/g,An=/#/g;function On(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Dn(e){e.a||(e.a=new hn,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Rn(e){var t=ln(e);if(void 0===t)throw Error("Keys are undefined");var n=new On(null,void 0);e=cn(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];d(o)?Ln(n,i,o):n.add(i,o)}return n}function Pn(e,t){Dn(e),t=Un(e,t),pn(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,pn((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&fn(e)))}function Mn(e,t){return Dn(e),t=Un(e,t),pn(e.a.b,t)}function Ln(e,t,n){Pn(e,t),0<n.length&&(e.c=null,e.a.set(Un(e,t),z(n)),e.b+=n.length)}function Fn(e){var t=new On;return t.c=e.c,e.a&&(t.a=new hn(e.a),t.b=e.b),t}function Un(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}(e=On.prototype).add=function(e,t){Dn(this),this.c=null,e=Un(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(e,t){Dn(this),this.a.forEach(function(n,r){F(n,function(n){e.call(t,n,r,this)},this)},this)},e.X=function(){Dn(this);for(var e=this.a.U(),t=this.a.X(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},e.U=function(e){Dn(this);var t=[];if(s(e))Mn(this,e)&&(t=W(t,this.a.get(Un(this,e))));else{e=this.a.U();for(var n=0;n<e.length;n++)t=W(t,e[n])}return t},e.set=function(e,t){return Dn(this),this.c=null,Mn(this,e=Un(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},e.get=function(e,t){return e&&0<(e=this.U(e)).length?String(e[0]):t},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.X(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.U(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var jn=!yt||9<=Number(Ct);function qn(e){var t=document;return s(e)?t.getElementById(e):e}function Bn(e,t){H(t,function(t,n){t&&"object"==typeof t&&t.qa&&(t=t.pa()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:Vn.hasOwnProperty(n)?e.setAttribute(Vn[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t})}var Vn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Wn(e){if(e&&"number"==typeof e.length){if(g(e))return"function"==typeof e.item||"string"==typeof e.item;if(y(e))return"function"==typeof e.item}return!1}function zn(e){var t=[];return function e(t,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(d(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),e(t,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(r.push(o),Gn(i,r),r.push(":"),e(t,a,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Gn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Hn,e,t),t.join("")}function Hn(){}var Kn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Qn=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Gn(e,t){t.push('"',e.replace(Qn,function(e){var t=Kn[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),Kn[e]=t),t}),'"')}function Yn(){var e=dr();return yt&&!!Ct&&11==Ct||/Edge\/\d+/.test(e)}function Xn(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function $n(e,t){t=t||a.window;var n="about:blank";e&&(n=be(_e(e)).toString()),t.location.href=n}function Jn(e){return!!((e=(e||dr()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function Zn(e){e=e||a.window;try{e.close()}catch(e){}}function er(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(a in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=dr().toLowerCase(),r&&(t.target=r,ye(n,"crios/")&&(t.target="_blank")),hr(dr())==cr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof ve?n:_e(void 0!==n.href?n.href:String(n)),n=e.target||n.target,i=[],e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((Ie("iPhone")&&!Ie("iPod")&&!Ie("iPad")||Ie("iPad")||Ie("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(M(a=r.document.createElement("A"),"HTMLAnchorElement"),t instanceof ve||t instanceof ve||(t="object"==typeof t&&t.qa?t.pa():String(t),we.test(t)||(t="about:invalid#zClosurez"),t=Se(t)),a.href=be(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=r.open("",n,a),e=be(t).toString(),a&&(vt&&ye(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e=Oe('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Le(e)+'">'),a.document.write(Ne(e)),a.document.close())):(a=r.open(be(t).toString(),n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(e){}return a}var tr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nr=/^[^@]+@[^@]+$/;function rr(){var e=null;return new Ve(function(t){"complete"==a.document.readyState?t():(e=function(){t()},Kt(window,"load",e))}).s(function(t){throw Qt(window,"load",e),t})}function ir(e){return e=e||dr(),!("file:"!==br()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function or(){var e=a.window;try{return!(!e||e==e.top)}catch(e){return!1}}function ar(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function sr(){return Vo.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Vo.INTERNAL.hasOwnProperty("node")?"Node":ar()?"Worker":"Browser"}function ur(){var e=sr();return"ReactNative"===e||"Node"===e}var cr="Firefox",lr="Chrome";function hr(e){var t=e.toLowerCase();return ye(t,"opera/")||ye(t,"opr/")||ye(t,"opios/")?"Opera":ye(t,"iemobile")?"IEMobile":ye(t,"msie")||ye(t,"trident/")?"IE":ye(t,"edge/")?"Edge":ye(t,"firefox/")?cr:ye(t,"silk/")?"Silk":ye(t,"blackberry")?"Blackberry":ye(t,"webos")?"Webos":!ye(t,"safari/")||ye(t,"chrome/")||ye(t,"crios/")||ye(t,"android")?!ye(t,"chrome/")&&!ye(t,"crios/")||ye(t,"edge/")?ye(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":lr:"Safari"}var fr={Vc:"FirebaseCore-web",Xc:"FirebaseUI-web"};function pr(e,t){t=t||[];var n,r=[],i={};for(n in fr)i[fr[n]]=!0;for(n=0;n<t.length;n++)void 0!==i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=sr())?r=hr(i=dr()):"Worker"===r&&(r=hr(i=dr())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function dr(){return a.navigator&&a.navigator.userAgent||""}function mr(e,t){e=e.split("."),t=t||a;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function yr(){try{var e=a.localStorage,t=Sr();if(e)return e.setItem(t,"1"),e.removeItem(t),!Yn()||!!a.indexedDB}catch(e){return ar()&&!!a.indexedDB}return!1}function gr(){return(vr()||"chrome-extension:"===br()||ir())&&!ur()&&yr()&&!ar()}function vr(){return"http:"===br()||"https:"===br()}function br(){return a.location&&a.location.protocol||null}function wr(e){return!Jn(e=e||dr())&&hr(e)!=cr}function _r(e){return void 0===e?null:zn(e)}function Er(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function Tr(e){if(null!==e)return JSON.parse(e)}function Sr(e){return e||Math.floor(1e9*Math.random()).toString()}function Cr(e){return"Safari"!=hr(e=e||dr())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function kr(){var e=a.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function Ir(e,t){if(t<e)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=dr(),t=sr(),this.b=Jn(e)||"ReactNative"===t}function xr(){var e=a.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function Nr(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(e){}return null}function Ar(){return!(!mr("fireauth.oauthhelper",a)&&!mr("fireauth.iframe",a))}Ir.prototype.get=function(){var e=a.navigator;return!e||"boolean"!=typeof e.onLine||!vr()&&"chrome-extension:"!==br()&&void 0===e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Or,Dr={};function Rr(e){Dr[e]||(Dr[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}try{var Pr={};Object.defineProperty(Pr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Pr,"abcd",{configurable:!0,enumerable:!0,value:2}),Or=2==Pr.abcd}catch(e){Or=!1}function Mr(e,t,n){Or?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Lr(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Mr(e,n,t[n])}function Fr(e){var t={};return Lr(t,e),t}function Ur(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Mr(t,n,Ur(e[n]));return t}function jr(e){var t={},n=e[Br],r=e[Vr];if(!(e=e[Wr])||e!=qr&&!n)throw Error("Invalid provider user info!");t[Hr]=r||null,t[zr]=n||null,Mr(this,Qr,e),Mr(this,Kr,Ur(t))}var qr="EMAIL_SIGNIN",Br="email",Vr="newEmail",Wr="requestType",zr="email",Hr="fromEmail",Kr="data",Qr="operation";function Gr(e,t){this.code=Xr+e,this.message=t||$r[e]||""}function Yr(e){var t=e&&e.code;return t?new Gr(t.substring(Xr.length),e.message):null}C(Gr,Error),Gr.prototype.A=function(){return{code:this.code,message:this.message}},Gr.prototype.toJSON=function(){return this.A()};var Xr="auth/",$r={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The OIDC ID token requires a valid unhashed nonce.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function Jr(e){var t=wn(e=_n(e),Zr)||null,n=wn(e,ei)||null,r=wn(e,ri)||null;if(r=r&&oi[r]||null,!t||!n||!r)throw new Gr("argument-error",Zr+", "+ei+"and "+ri+" are required in a valid action code URL.");Lr(this,{apiKey:t,operation:r,code:n,continueUrl:wn(e,ti)||null,languageCode:wn(e,ni)||null,tenantId:wn(e,ii)||null})}var Zr="apiKey",ei="oobCode",ti="continueUrl",ni="languageCode",ri="mode",ii="tenantId",oi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",signIn:qr,verifyEmail:"VERIFY_EMAIL"};function ai(e){try{return new Jr(e)}catch(e){return null}}function si(e){var t=e[fi];if(void 0===t)throw new Gr("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new Gr("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[ui];if(n&&"object"==typeof n){t=n[mi];var r=n[pi];if(n=n[di],"string"==typeof t&&t.length){if(this.a=t,void 0!==r&&"boolean"!=typeof r)throw new Gr("argument-error",pi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Gr("argument-error",di+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==t)throw new Gr("argument-error",mi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Gr("missing-android-pkg-name")}}else if(void 0!==n)throw new Gr("argument-error",ui+" property must be a non null object when specified.");if(this.f=null,(t=e[hi])&&"object"==typeof t){if("string"==typeof(t=t[yi])&&t.length)this.f=t;else if(void 0!==t)throw new Gr("argument-error",yi+" property must be a non empty string when specified.")}else if(void 0!==t)throw new Gr("argument-error",hi+" property must be a non null object when specified.");if(void 0!==(t=e[li])&&"boolean"!=typeof t)throw new Gr("argument-error",li+" property must be a boolean when specified.");if(this.c=!!t,void 0!==(e=e[ci])&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new Gr("argument-error",ci+" property must be a non empty string when specified.");this.i=e||null}var ui="android",ci="dynamicLinkDomain",li="handleCodeInApp",hi="iOS",fi="url",pi="installApp",di="minimumVersion",mi="packageName",yi="bundleId";function gi(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var vi=null,bi=null;function wi(e){this.f=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.c=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function _i(e){return(e=Ei(e))&&e.sub&&e.iss&&e.aud&&e.exp?new wi(e):null}function Ei(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{return JSON.parse(function(e){var t="";return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=bi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!vi){vi={},bi={};for(var e=0;e<65;e++)vi[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),62<=(bi[vi[e]]=e)&&(bi["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)]=e)}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(e,function(e){t+=String.fromCharCode(e)}),t}(e))}catch(e){}return null}wi.prototype.R=function(){return this.c},wi.prototype.g=function(){return this.b};var Ti,Si={ad:{bb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},cd:{bb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},dd:{bb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Ci(e){for(var t in Si)if(Si[t].id===e)return{firebaseEndpoint:(e=Si[t]).bb,secureTokenEndpoint:e.ib};return null}Ti=Ci("__EID__")?"__EID__":void 0;var ki="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ii=["client_id","response_type","scope","redirect_uri","state"],xi={Wc:{Oa:"locale",Da:500,Ca:600,Pa:"facebook.com",hb:Ii},Yc:{Oa:null,Da:500,Ca:620,Pa:"github.com",hb:Ii},Zc:{Oa:"hl",Da:515,Ca:680,Pa:"google.com",hb:Ii},ed:{Oa:"lang",Da:485,Ca:705,Pa:"twitter.com",hb:ki}};function Ni(e){for(var t in xi)if(xi[t].Pa==e)return xi[t];return null}function Ai(e){var t={};t["facebook.com"]=Mi,t["google.com"]=Fi,t["github.com"]=Li,t["twitter.com"]=Ui;var n=e&&e[Di];try{if(n)return t[n]?new t[n](e):new Pi(e);if(void 0!==e[Oi])return new Ri(e)}catch(e){}return null}var Oi="idToken",Di="providerId";function Ri(e){var t=e[Di];if(!t&&e[Oi]){var n=_i(e[Oi]);n&&n.a&&(t=n.a)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,void 0!==e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Mr(this,"providerId",t),Mr(this,"isNewUser",n)}function Pi(e){Ri.call(this,e),Mr(this,"profile",Ur((e=Tr(e.rawUserInfo||"{}"))||{}))}function Mi(e){if(Pi.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Li(e){if(Pi.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Mr(this,"username",this.profile&&this.profile.login||null)}function Fi(e){if(Pi.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ui(e){if(Pi.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Mr(this,"username",e.screenName||null)}function ji(e){var t=_n(e),n=wn(t,"link"),r=wn(_n(n),"link");return wn(_n(t=wn(t,"deep_link_id")),"link")||t||r||n||e}function qi(){}function Bi(e,t){return e.then(function(e){if(e[Aa]){var n=_i(e[Aa]);if(!n||t!=n.f)throw new Gr("user-mismatch");return e}throw new Gr("user-mismatch")}).s(function(e){throw e&&e.code&&e.code==Xr+"user-not-found"?new Gr("user-mismatch"):e})}function Vi(e,t){if(!t)throw new Gr("internal-error","failed to construct a credential");this.a=t,Mr(this,"providerId",e),Mr(this,"signInMethod",e)}function Wi(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function zi(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new Vi(e.providerId,e.pendingToken)}catch(e){}return null}function Hi(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Mr(this,"idToken",t.idToken),t.accessToken&&Mr(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Mr(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new Gr("internal-error","failed to construct a credential");Mr(this,"accessToken",t.oauthToken),Mr(this,"secret",t.oauthTokenSecret)}Mr(this,"providerId",e),Mr(this,"signInMethod",n)}function Ki(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:Rn(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function Qi(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new Hi(e.providerId,t,e.signInMethod)}catch(e){}}return null}function Gi(e,t){this.Fc=t||[],Lr(this,{providerId:e,isOAuthProvider:!0}),this.zb={},this.cb=(Ni(e)||{}).Oa||null,this.ab=null}function Yi(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new Gr("argument-error",'SAML provider IDs must be prefixed with "saml."');Gi.call(this,e,[])}function Xi(e){Gi.call(this,e,Ii),this.a=[]}function $i(){Xi.call(this,"facebook.com")}function Ji(e){if(!e)throw new Gr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return g(e)&&(t=e.accessToken),(new $i).credential({accessToken:t})}function Zi(){Xi.call(this,"github.com")}function eo(e){if(!e)throw new Gr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return g(e)&&(t=e.accessToken),(new Zi).credential({accessToken:t})}function to(){Xi.call(this,"google.com"),this.wa("profile")}function no(e,t){var n=e;return g(e)&&(n=e.idToken,t=e.accessToken),(new to).credential({idToken:n,accessToken:t})}function ro(){Gi.call(this,"twitter.com",ki)}function io(e,t){var n=e;if(g(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new Gr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Hi("twitter.com",n,"twitter.com")}function oo(e,t,n){this.a=e,this.c=t,Mr(this,"providerId","password"),Mr(this,"signInMethod",n===so.EMAIL_LINK_SIGN_IN_METHOD?so.EMAIL_LINK_SIGN_IN_METHOD:so.EMAIL_PASSWORD_SIGN_IN_METHOD)}function ao(e){return e&&e.email&&e.password?new oo(e.email,e.password,e.signInMethod):null}function so(){Lr(this,{providerId:"password",isOAuthProvider:!1})}function uo(e,t){if(!(t=co(t)))throw new Gr("argument-error","Invalid email link!");return new oo(e,t.code,so.EMAIL_LINK_SIGN_IN_METHOD)}function co(e){return(e=ai(e=ji(e)))&&e.operation===qr?e:null}function lo(e){if(!(e.Ua&&e.Ta||e.Fa&&e.ba))throw new Gr("internal-error");this.a=e,Mr(this,"providerId","phone"),Mr(this,"signInMethod","phone")}function ho(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return F(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){e[n]&&(t[n]=e[n])}),new lo(t)}return null}function fo(e){return e.a.Fa&&e.a.ba?{temporaryProof:e.a.Fa,phoneNumber:e.a.ba}:{sessionInfo:e.a.Ua,code:e.a.Ta}}function po(e){try{this.a=e||Vo.auth()}catch(e){throw new Gr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Lr(this,{providerId:"phone",isOAuthProvider:!1})}function mo(e,t){if(!e)throw new Gr("missing-verification-id");if(!t)throw new Gr("missing-verification-code");return new lo({Ua:e,Ta:t})}function yo(e){if(e.temporaryProof&&e.phoneNumber)return new lo({Fa:e.temporaryProof,ba:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return no(o,n);case"facebook.com":return Ji(n);case"github.com":return eo(n);case"twitter.com":return io(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new Vi(t,a):new Hi(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new Xi(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(e){return null}}function go(e){if(!e.isOAuthProvider)throw new Gr("invalid-oauth-provider")}function vo(e,t,n,r,i,o,a){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new Gr("invalid-auth-event");if(this.g&&this.a)throw new Gr("invalid-auth-event");if(this.g&&!this.f)throw new Gr("invalid-auth-event")}function bo(e){return(e=e||{}).type?new vo(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&Yr(e.error),e.postBody,e.tenantId):null}function wo(){this.b=null,this.a=[]}C(Pi,Ri),C(Mi,Pi),C(Li,Pi),C(Fi,Pi),C(Ui,Pi),Vi.prototype.na=function(e){return Ga(e,Wi(this))},Vi.prototype.b=function(e,t){var n=Wi(this);return n.idToken=t,Ya(e,n)},Vi.prototype.f=function(e,t){return Bi(Xa(e,Wi(this)),t)},Vi.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Hi.prototype.na=function(e){return Ga(e,Ki(this))},Hi.prototype.b=function(e,t){var n=Ki(this);return n.idToken=t,Ya(e,n)},Hi.prototype.f=function(e,t){return Bi(Xa(e,Ki(this)),t)},Hi.prototype.A=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},Gi.prototype.Ea=function(e){return this.zb=Q(e),this},C(Yi,Gi),C(Xi,Gi),Xi.prototype.wa=function(e){return q(this.a,e)||this.a.push(e),this},Xi.prototype.Hb=function(){return z(this.a)},Xi.prototype.credential=function(e,t){var n;if(!(n=g(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new Gr("argument-error","credential failed: must provide the ID token and/or the access token.");return new Hi(this.providerId,n,this.providerId)},C($i,Xi),Mr($i,"PROVIDER_ID","facebook.com"),Mr($i,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),C(Zi,Xi),Mr(Zi,"PROVIDER_ID","github.com"),Mr(Zi,"GITHUB_SIGN_IN_METHOD","github.com"),C(to,Xi),Mr(to,"PROVIDER_ID","google.com"),Mr(to,"GOOGLE_SIGN_IN_METHOD","google.com"),C(ro,Gi),Mr(ro,"PROVIDER_ID","twitter.com"),Mr(ro,"TWITTER_SIGN_IN_METHOD","twitter.com"),oo.prototype.na=function(e){return this.signInMethod==so.EMAIL_LINK_SIGN_IN_METHOD?Cs(e,is,{email:this.a,oobCode:this.c}):Cs(e,_s,{email:this.a,password:this.c})},oo.prototype.b=function(e,t){return this.signInMethod==so.EMAIL_LINK_SIGN_IN_METHOD?Cs(e,os,{idToken:t,email:this.a,oobCode:this.c}):Cs(e,ms,{idToken:t,email:this.a,password:this.c})},oo.prototype.f=function(e,t){return Bi(this.na(e),t)},oo.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Lr(so,{PROVIDER_ID:"password"}),Lr(so,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Lr(so,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),lo.prototype.na=function(e){return e.Va(fo(this))},lo.prototype.b=function(e,t){var n=fo(this);return n.idToken=t,Cs(e,Ts,n)},lo.prototype.f=function(e,t){var n=fo(this);return n.operation="REAUTH",Bi(e=Cs(e,Ss,n),t)},lo.prototype.A=function(){var e={providerId:"phone"};return this.a.Ua&&(e.verificationId=this.a.Ua),this.a.Ta&&(e.verificationCode=this.a.Ta),this.a.Fa&&(e.temporaryProof=this.a.Fa),this.a.ba&&(e.phoneNumber=this.a.ba),e},po.prototype.Va=function(e,t){var n=this.a.b;return Ye(t.verify()).then(function(r){if(!s(r))throw new Gr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":return function(e,t){return Cs(e,ps,t)}(n,{phoneNumber:e,recaptchaToken:r}).then(function(e){return"function"==typeof t.reset&&t.reset(),e},function(e){throw"function"==typeof t.reset&&t.reset(),e});default:throw new Gr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Lr(po,{PROVIDER_ID:"phone"}),Lr(po,{PHONE_SIGN_IN_METHOD:"phone"}),vo.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},vo.prototype.R=function(){return this.h},vo.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.A()}};var _o,Eo=null;function To(e){var t="unauthorized-domain",n=void 0,r=_n(e);e=r.b,"chrome-extension"==(r=r.f)?n=Me("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=Me("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",Gr.call(this,t,n)}function So(e,t,n){Gr.call(this,e,n),(e=t||{}).Ab&&Mr(this,"email",e.Ab),e.ba&&Mr(this,"phoneNumber",e.ba),e.credential&&Mr(this,"credential",e.credential),e.Qb&&Mr(this,"tenantId",e.Qb)}function Co(e){if(e.code){var t=e.code||"";0==t.indexOf(Xr)&&(t=t.substring(Xr.length));var n={credential:yo(e),Qb:e.tenantId};if(e.email)n.Ab=e.email;else if(e.phoneNumber)n.ba=e.phoneNumber;else if(!n.credential)return new Gr(t,e.message||void 0);return new So(t,n,e.message)}return null}function ko(){}function Io(e){return e.c||(e.c=e.b())}function xo(){}function No(e){if(e.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return e.f;for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Ao(){}function Oo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=E(this.fc,this),this.a.onerror=E(this.Ib,this),this.a.onprogress=E(this.gc,this),this.a.ontimeout=E(this.kc,this)}function Do(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function Ro(e,t,n){this.reset(e,t,n,void 0,void 0)}function Po(e){this.f=e,this.b=this.c=this.a=null}function Mo(e,t){this.name=e,this.value=t}C(To,Gr),C(So,Gr),So.prototype.A=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.A();return t&&Y(e,t),e},So.prototype.toJSON=function(){return this.A()},ko.prototype.c=null,C(xo,ko),xo.prototype.a=function(){var e=No(this);return e?new ActiveXObject(e):new XMLHttpRequest},xo.prototype.b=function(){var e={};return No(this)&&(e[0]=!0,e[1]=!0),e},_o=new xo,C(Ao,ko),Ao.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Oo;throw Error("Unsupported browser")},Ao.prototype.b=function(){return{}},(e=Oo.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},e.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Do(this,4)},e.Ib=function(){this.status=500,this.response=this.responseText="",Do(this,4)},e.kc=function(){this.Ib()},e.gc=function(){this.status=200,Do(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Ro.prototype.a=null,Ro.prototype.reset=function(e,t,n,r,i){delete this.a},Mo.prototype.toString=function(){return this.name};var Lo=new Mo("SEVERE",1e3),Fo=new Mo("WARNING",900),Uo=new Mo("CONFIG",700),jo=new Mo("FINE",500);Po.prototype.log=function(e,t,n){if(e.value>=function e(t){return t.c?t.c:t.a?e(t.a):(N("Root logger has no level set."),null)}(this).value)for(y(t)&&(t=t()),e=new Ro(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var qo,Bo={},Wo=null;function zo(e){var t;if(Wo||(Wo=new Po(""),(Bo[""]=Wo).c=Uo),!(t=Bo[e])){t=new Po(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=zo(e.substr(0,n))).b||(n.b={}),(n.b[r]=t).a=n,Bo[e]=t}return t}function Ho(e,t){e&&e.log(jo,t,void 0)}function Ko(e){this.f=e}function Qo(e){nn.call(this),this.o=e,this.readyState=Go,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=zo("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}C(Ko,ko),Ko.prototype.a=function(){return new Qo(this.f)},Ko.prototype.b=(qo={},function(){return qo}),C(Qo,nn);var Go=0;function Yo(e){e.c.read().then(e.ec.bind(e)).catch(e.Ma.bind(e))}function Xo(e,t){t&&e.f&&(e.status=e.f.status,e.statusText=e.f.statusText),e.readyState=4,e.f=null,e.c=null,e.l=null,$o(e)}function $o(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Jo(e){nn.call(this),this.headers=new hn,this.B=e||null,this.c=!1,this.w=this.a=null,this.h=this.O=this.l="",this.f=this.J=this.i=this.I=!1,this.g=0,this.o=null,this.m=Zo,this.v=this.P=!1}(e=Qo.prototype).open=function(e,t){if(this.readyState!=Go)throw this.abort(),Error("Error reopening a connection");this.m=e,this.g=t,this.readyState=1,$o(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.i,method:this.m,credentials:void 0,cache:void 0};e&&(t.body=e),this.o.fetch(new Request(this.g,t)).then(this.jc.bind(this),this.Ma.bind(this))},e.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Xo(this,!1)),this.readyState=Go},e.jc=function(e){this.a&&(this.f=e,this.b||(this.b=e.headers,this.readyState=2,$o(this)),this.a&&(this.readyState=3,$o(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.hc.bind(this),this.Ma.bind(this)):void 0!==a.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.l=new TextDecoder,Yo(this)):e.text().then(this.ic.bind(this),this.Ma.bind(this)))))},e.ec=function(e){if(this.a){var t=this.l.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?Xo(this,!0):$o(this),3==this.readyState&&Yo(this)}},e.ic=function(e){this.a&&(this.response=this.responseText=e,Xo(this,!0))},e.hc=function(e){this.a&&(this.response=e,Xo(this,!0))},e.Ma=function(e){var t=this.h;t&&t.log(Fo,"Failed to fetch url "+this.g,e instanceof Error?e:Error(e)),this.a&&Xo(this,!0)},e.setRequestHeader=function(e,t){this.i.append(e,t)},e.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.h)&&e.log(Fo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var e=this.h;return e&&e.log(Fo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},C(Jo,nn);var Zo="";Jo.prototype.b=zo("goog.net.XhrIo");var ea=/^https?$/i,ta=["POST","PUT"];function na(e){return"content-type"==e.toLowerCase()}function ra(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,ia(e),aa(e)}function ia(e){e.I||(e.I=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function oa(e){if(e.c&&void 0!==o)if(e.w[1]&&4==ua(e)&&2==ca(e))Ho(e.b,la(e,"Local request error detected and ignored"));else if(e.i&&4==ua(e))sn(e.Lb,0,e);else if(e.dispatchEvent("readystatechange"),4==ua(e)){Ho(e.b,la(e,"Request complete")),e.c=!1;try{var t,n=ca(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var s=String(e.l).match(dn)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!ea.test(s?s.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var c=2<ua(e)?e.a.statusText:""}catch(t){Ho(e.b,"Can not get status: "+t.message),c=""}e.h=c+" ["+ca(e)+"]",ia(e)}}finally{aa(e)}}}function aa(e,t){if(e.a){sa(e);var n=e.a,r=e.w[0]?h:null;e.a=null,e.w=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(Lo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function sa(e){e.a&&e.v&&(e.a.ontimeout=null),e.o&&(a.clearTimeout(e.o),e.o=null)}function ua(e){return e.a?e.a.readyState:0}function ca(e){try{return 2<ua(e)?e.a.status:-1}catch(e){return-1}}function la(e,t){return t+" ["+e.O+" "+e.l+" "+ca(e)+"]"}function ha(e){var t=Ea;this.g=[],this.v=t,this.o=e||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function fa(e,t,n){e.a=!0,e.c=n,e.f=!t,ya(e)}function pa(e){if(e.a){if(!e.u)throw new ga(e);e.u=!1}}function da(e,t,n,r){e.g.push([t,n,r]),e.a&&ya(e)}function ma(e){return j(e.g,function(e){return y(e[1])})}function ya(e){if(e.h&&e.a&&ma(e)){var t=e.h,n=wa[t];n&&(a.clearTimeout(n.a),delete wa[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],s=i[1];if(i=i[2],o=e.f?s:o)try{var u=o.call(i||e.o,t);void 0!==u&&(e.f=e.f&&(u==t||u instanceof Error),e.c=t=u),(k(t)||"function"==typeof a.Promise&&t instanceof a.Promise)&&(r=!0,e.i=!0)}catch(r){t=r,e.f=!0,ma(e)||(n=!0)}}e.c=t,r&&(u=E(e.m,e,!0),r=E(e.m,e,!1),t instanceof ha?(da(t,u,r),t.w=!0):t.then(u,r)),n&&(t=new ba(t),wa[t.a]=t,e.h=t.a)}function ga(){I.call(this)}function va(){I.call(this)}function ba(e){this.a=a.setTimeout(E(this.c,this),0),this.b=e}(e=Jo.prototype).Ga=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Ho(this.b,la(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(Ho(this.b,la(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),aa(this))},e.xa=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),aa(this,!0)),Jo.qb.xa.call(this)},e.Lb=function(){this.ta||(this.J||this.i||this.f?oa(this):this.yc())},e.yc=function(){oa(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Zo:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(Lo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return Ho(this.b,"Can not get response: "+e.message),null}},ha.prototype.cancel=function(e){if(this.a)this.c instanceof ha&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,t.l<=0&&t.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(e=new va(this),pa(this),fa(this,!1,e))}},ha.prototype.m=function(e,t){this.i=!1,fa(this,e,t)},ha.prototype.then=function(e,t,n){var r,i,o=new Ve(function(e,t){r=e,i=t});return da(this,r,function(e){e instanceof va?o.cancel():i(e)}),o.then(e,t,n)},ha.prototype.$goog_Thenable=!0,C(ga,I),ga.prototype.message="Deferred has already fired",ga.prototype.name="AlreadyCalledError",C(va,I),va.prototype.message="Deferred was canceled",va.prototype.name="CanceledError",ba.prototype.c=function(){throw delete wa[this.a],this.b};var wa={};function _a(e){var t,n=document,r=ne(e).toString(),i=document.createElement("SCRIPT"),o={Nb:i,Ga:void 0},s=new ha(o);return t=window.setTimeout(function(){Ta(i,!0);var e=new ka(Ca,"Timeout reached for loading script "+r);pa(s),fa(s,!1,e)},5e3),o.Ga=t,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ta(i,!1,t),pa(s),fa(s,!0,null))},i.onerror=function(){Ta(i,!0,t);var e=new ka(Sa,"Error while loading script "+r);pa(s),fa(s,!1,e)},Y(o={},{type:"text/javascript",charset:"UTF-8"}),Bn(i,o),function(e,t){M(e,"HTMLScriptElement"),e.src=ne(t),null===l&&(l=(t=(t=a.document).querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&c.test(t)?t:""),(t=l)&&e.setAttribute("nonce",t)}(i,e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),s}function Ea(){if(this&&this.Nb){var e=this.Nb;e&&"SCRIPT"==e.tagName&&Ta(e,!0,this.Ga)}}function Ta(e,t,n){null!=n&&a.clearTimeout(n),e.onload=h,e.onerror=h,e.onreadystatechange=h,t&&window.setTimeout(function(){e&&e.parentNode&&e.parentNode.removeChild(e)},0)}var Sa=0,Ca=1;function ka(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),I.call(this,n),this.code=e}function Ia(e){this.f=e}function xa(e,t,n){if(this.c=e,e=t||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.u=e.secureTokenTimeout||Oa,this.g=Q(e.secureTokenHeaders||Da),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.firebaseTimeout||Ra,this.a=Q(e.firebaseHeaders||Pa),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==sr(),!(n=a.XMLHttpRequest||n&&Vo.INTERNAL.node&&Vo.INTERNAL.node.XMLHttpRequest)&&!ar())throw new Gr("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,ar()?this.f=new Ko(self):ur()?this.f=new Ia(n):this.f=new Ao,this.b=null}C(ka,I),C(Ia,ko),Ia.prototype.a=function(){return new this.f},Ia.prototype.b=function(){return{}};var Na,Aa="idToken",Oa=new Ir(3e4,6e4),Da={"Content-Type":"application/x-www-form-urlencoded"},Ra=new Ir(3e4,6e4),Pa={"Content-Type":"application/json"};function Ma(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function La(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function Fa(e,t,n,r,i,o,s){(e=function(){var e=dr();return!((e=hr(e)!=lr?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&e<30)&&(!yt||!Ct||9<Ct)}()||ar()?E(e.o,e):(Na=Na||new Ve(function(e,t){!function(e,t){((window.gapi||{}).client||{}).request?e():(a[ja]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){da(e,null,t,void 0)}(_a(re(Ua,{onload:ja})),function(){t(Error("CORS_UNSUPPORTED"))}))}(e,t)}),E(e.m,e)))(t,n,r,i,o,s)}xa.prototype.R=function(){return this.b},xa.prototype.o=function(e,t,n,r,i,o){if(ar()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new Gr("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var u=new Jo(this.f);if(o){u.g=Math.max(0,o);var c=setTimeout(function(){u.dispatchEvent("timeout")},o)}rn(u,"complete",function(){c&&clearTimeout(c);var n=null;try{n=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return Ho(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){n=null}t&&t(n)}),on(u,"ready",function(){c&&clearTimeout(c),ht(this)}),on(u,"timeout",function(){c&&clearTimeout(c),ht(this),t&&t(null)}),function(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.O=n,e.I=!1,e.c=!0,e.a=e.B?e.B.a():_o.a(),e.w=e.B?Io(e.B):Io(_o),e.a.onreadystatechange=E(e.Lb,e);try{Ho(e.b,la(e,"Opening Xhr")),e.J=!0,e.a.open(n,String(t),!0),e.J=!1}catch(t){return Ho(e.b,la(e,"Error opening Xhr: "+t.message)),void ra(e,t)}t=r||"";var o=new hn(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(m(e)||s(e))F(e,t,void 0);else for(var n=ln(e),r=cn(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,function(e,t){o.set(t,e)}),i=function(e){e:{for(var t=na,n=e.length,r=s(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return t<0?null:s(e)?e.charAt(t):e[t]}(o.X()),r=a.FormData&&t instanceof a.FormData,!q(ta,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(e,t){this.a.setRequestHeader(t,e)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.P&&(e.a.withCredentials=e.P);try{sa(e),0<e.g&&(e.v=function(e){return yt&&It(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(e.a),Ho(e.b,la(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.v)),e.v?(e.a.timeout=e.g,e.a.ontimeout=E(e.Ga,e)):e.o=sn(e.Ga,e.g,e)),Ho(e.b,la(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){Ho(e.b,la(e,"Send error: "+t.message)),ra(e,t)}}(u,e,n,r,i)};var Ua=new X(Z,"https://apis.google.com/js/client.js?onload=%{onload}"),ja="__fcb"+Math.floor(1e6*Math.random()).toString();function qa(e){if(!s(e=e.email)||!nr.test(e))throw new Gr("invalid-email")}function Ba(e){"email"in e&&qa(e)}function Va(e){if(!e[Aa])throw new Gr("internal-error")}function Wa(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new Gr("internal-error")}else{if(!e.sessionInfo)throw new Gr("missing-verification-id");if(!e.code)throw new Gr("missing-verification-code")}}xa.prototype.m=function(e,t,n,r,i){var o=this;Na.then(function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})}).s(function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})})},xa.prototype.ob=function(){return Cs(this,ys,{})},xa.prototype.rb=function(e,t){return Cs(this,ds,{idToken:e,email:t})},xa.prototype.sb=function(e,t){return Cs(this,ms,{idToken:e,password:t})};var za={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Ha(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new Gr("internal-error")}function Ka(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&Mn(e=new On(e.postBody),"nonce")&&(t.nonce=e.get("nonce"))),t}function Qa(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Co(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Co(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Co(e)):e.errorMessage&&(t=ks(e.errorMessage)),t)throw t;if(!e[Aa])throw new Gr("internal-error")}function Ga(e,t){return t.returnIdpCredential=!0,Cs(e,gs,t)}function Ya(e,t){return t.returnIdpCredential=!0,Cs(e,bs,t)}function Xa(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,Cs(e,vs,t)}function $a(e){if(!e.oobCode)throw new Gr("invalid-action-code")}(e=xa.prototype).tb=function(e,t){var n={idToken:e},r=[];return H(za,function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),Cs(this,ds,n)},e.kb=function(e,t){return Y(e={requestType:"PASSWORD_RESET",email:e},t),Cs(this,cs,e)},e.lb=function(e,t){return Y(e={requestType:"EMAIL_SIGNIN",email:e},t),Cs(this,ss,e)},e.jb=function(e,t){return Y(e={requestType:"VERIFY_EMAIL",idToken:e},t),Cs(this,us,e)},e.Va=function(e){return Cs(this,Es,e)},e.$a=function(e,t){return Cs(this,fs,{oobCode:e,newPassword:t})},e.Ka=function(e){return Cs(this,Za,{oobCode:e})},e.Xa=function(e){return Cs(this,Ja,{oobCode:e})};var Ja={endpoint:"setAccountInfo",D:$a,fa:"email",F:!0},Za={endpoint:"resetPassword",D:$a,K:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t)throw new Gr("internal-error")},F:!0},es={endpoint:"signupNewUser",D:function(e){if(qa(e),!e.password)throw new Gr("weak-password")},K:Va,T:!0,F:!0},ts={endpoint:"createAuthUri",F:!0},ns={endpoint:"deleteAccount",V:["idToken"]},rs={endpoint:"setAccountInfo",V:["idToken","deleteProvider"],D:function(e){if(!d(e.deleteProvider))throw new Gr("internal-error")}},is={endpoint:"emailLinkSignin",V:["email","oobCode"],D:qa,K:Va,T:!0,F:!0},os={endpoint:"emailLinkSignin",V:["idToken","email","oobCode"],D:qa,K:Va,T:!0},as={endpoint:"getAccountInfo"},ss={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new Gr("internal-error");qa(e)},fa:"email",F:!0},us={endpoint:"getOobConfirmationCode",V:["idToken","requestType"],D:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new Gr("internal-error")},fa:"email",F:!0},cs={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(e){if("PASSWORD_RESET"!=e.requestType)throw new Gr("internal-error");qa(e)},fa:"email",F:!0},ls={wb:!0,endpoint:"getProjectConfig",Kb:"GET"},hs={wb:!0,endpoint:"getRecaptchaParam",Kb:"GET",K:function(e){if(!e.recaptchaSiteKey)throw new Gr("internal-error")}},fs={endpoint:"resetPassword",D:$a,fa:"email",F:!0},ps={endpoint:"sendVerificationCode",V:["phoneNumber","recaptchaToken"],fa:"sessionInfo",F:!0},ds={endpoint:"setAccountInfo",V:["idToken"],D:Ba,T:!0},ms={endpoint:"setAccountInfo",V:["idToken"],D:function(e){if(Ba(e),!e.password)throw new Gr("weak-password")},K:Va,T:!0},ys={endpoint:"signupNewUser",K:Va,T:!0,F:!0},gs={endpoint:"verifyAssertion",D:Ha,Qa:Ka,K:Qa,T:!0,F:!0},vs={endpoint:"verifyAssertion",D:Ha,Qa:Ka,K:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new Gr("user-not-found");if(e.errorMessage)throw ks(e.errorMessage);if(!e[Aa])throw new Gr("internal-error")},T:!0,F:!0},bs={endpoint:"verifyAssertion",D:function(e){if(Ha(e),!e.idToken)throw new Gr("internal-error")},Qa:Ka,K:Qa,T:!0},ws={endpoint:"verifyCustomToken",D:function(e){if(!e.token)throw new Gr("invalid-custom-token")},K:Va,T:!0,F:!0},_s={endpoint:"verifyPassword",D:function(e){if(qa(e),!e.password)throw new Gr("wrong-password")},K:Va,T:!0,F:!0},Es={endpoint:"verifyPhoneNumber",D:Wa,K:Va,F:!0},Ts={endpoint:"verifyPhoneNumber",D:function(e){if(!e.idToken)throw new Gr("internal-error");Wa(e)},K:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Co(e);Va(e)}},Ss={Yb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:Wa,K:Va,F:!0};function Cs(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(null==r||""===r)return!1}return!0}(n,t.V))return Xe(new Gr("internal-error"));var r,i=t.Kb||"POST";return Ye(n).then(t.D).then(function(){return t.T&&(n.returnSecureToken=!0),t.F&&e.b&&void 0===n.tenantId&&(n.tenantId=e.b),function(e,t,n,r,i,o){var a=_n(e.h+t);bn(a,"key",e.c),o&&bn(a,"cb",S().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&bn(a,u,r[u]);return new Ve(function(t,o){Fa(e,a.toString(),function(e){e?e.error?o(Is(e,i||{})):t(e):o(new Gr("network-request-failed"))},n,s?void 0:zn(Er(r)),e.a,e.i.get())})}(e,t.endpoint,i,n,t.Yb,t.wb||!1)}).then(function(e){return r=e,t.Qa?t.Qa(n,r):r}).then(t.K).then(function(){if(!t.fa)return r;if(!(t.fa in r))throw new Gr("internal-error");return r[t.fa]})}function ks(e){return Is({error:{errors:[{message:e}],code:400,message:e}})}function Is(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Gr(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",Y(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new Gr(r[i],t);return!t&&e&&(t=_r(e)),new Gr("internal-error",t)}function xs(e){var t;this.b=e,this.a=null,this.fb=(t=this,(Ds=Ds||new Ve(function(e,t){function n(){kr(),mr("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){kr(),t(Error("Network Error"))},timeout:As.get()})}if(mr("gapi.iframes.Iframe"))e();else if(mr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){mr("gapi.load")?n():t(Error("Network Error"))},Ye(_a(r=re(Ns,{onload:r}))).s(function(){t(Error("Network Error"))})}}).s(function(e){throw Ds=null,e})).then(function(){return new Ve(function(e,n){mr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:mr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},Os.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})}))}var Ns=new X(Z,"https://apis.google.com/js/api.js?onload=%{onload}"),As=new Ir(3e4,6e4),Os=new Ir(5e3,15e3),Ds=null;function Rs(e,t,n){this.i=e,this.g=t,this.h=n,this.f=null,this.a=En(this.i,"/__/auth/iframe"),bn(this.a,"apiKey",this.g),bn(this.a,"appName",this.h),this.b=null,this.c=[]}function Ps(e,t,n,r,i){this.o=e,this.m=t,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function Ms(e){try{return Vo.app(e).auth().Aa()}catch(e){return[]}}function Ls(e,t,n,r,i){this.u=e,this.f=t,this.b=n,this.c=r||null,this.h=i||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function Fs(e){var t=Xn();return function(e){return Cs(e,ls,{}).then(function(e){return e.authorizedDomains||[]})}(e).then(function(e){e:{var n=_n(t),r=n.f;n=n.b;for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r;if(a=0==o.indexOf("chrome-extension://")?_n(o).b==a&&"chrome-extension"==s:("http"==s||"https"==s)&&(tr.test(o)?a==o:(o=o.split(".").join("\\."),new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)))){e=!0;break e}}e=!1}if(!e)throw new To(Xn())})}function Us(e){return e.l||(e.l=rr().then(function(){if(!e.o){var t=e.c,n=e.h,r=Ms(e.b),i=new Rs(e.u,e.f,e.b);i.f=t,i.b=n,i.c=z(r||[]),e.o=i.toString()}e.i=new xs(e.o),function(e){if(!e.i)throw Error("IfcHandler must be initialized!");var t,n;t=e.i,n=function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=bo(t.authEvent),n=0;n<e.g.length;n++)r=e.g[n](t)||r;return(n={}).status=r?"ACK":"ERROR",Ye(n)}return n.status="ERROR",Ye(n)},t.fb.then(function(){t.a.register("authEvent",n,mr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(e)})),e.l}function js(e){return e.m||(e.v=e.c?pr(e.c,Ms(e.b)):null,e.m=new xa(e.f,Ci(e.h),e.v)),e.m}function qs(e,t,n,r,i,o,a,s,u,c,l){return(e=new Ps(e,t,n,r,i)).l=o,e.g=a,e.i=s,e.b=Q(u||null),e.f=c,e.nb(l).toString()}function Bs(e){if(this.a=e||Vo.INTERNAL.reactNative&&Vo.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Gr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Vs(e){this.b=e,this.a={},this.f=E(this.c,this)}Rs.prototype.toString=function(){return this.f?bn(this.a,"v",this.f):Pn(this.a.a,"v"),this.b?bn(this.a,"eid",this.b):Pn(this.a.a,"eid"),this.c.length?bn(this.a,"fw",this.c.join(",")):Pn(this.a.a,"fw"),this.a.toString()},Ps.prototype.nb=function(e){return this.h=e,this},Ps.prototype.toString=function(){var e=En(this.o,"/__/auth/handler");if(bn(e,"apiKey",this.m),bn(e,"appName",this.c),bn(e,"authType",this.u),this.a.isOAuthProvider){var t=this.a;try{var n=Vo.app(this.c).auth().ha()}catch(e){n=null}for(var r in t.ab=n,bn(e,"providerId",this.a.providerId),n=Er((t=this.a).zb))n[r]=n[r].toString();r=t.Fc,n=Q(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}t.cb&&t.ab&&!n[t.cb]&&(n[t.cb]=t.ab),K(n)||bn(e,"customParameters",_r(n))}if("function"==typeof this.a.Hb&&(t=this.a.Hb()).length&&bn(e,"scopes",t.join(",")),this.l?bn(e,"redirectUrl",this.l):Pn(e.a,"redirectUrl"),this.g?bn(e,"eventId",this.g):Pn(e.a,"eventId"),this.i?bn(e,"v",this.i):Pn(e.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!wn(e,a)&&bn(e,a,this.b[a]);return this.h?bn(e,"tid",this.h):Pn(e.a,"tid"),this.f?bn(e,"eid",this.f):Pn(e.a,"eid"),(a=Ms(this.c)).length&&bn(e,"fw",a.join(",")),e.toString()},(e=Ls.prototype).Fb=function(e,t,n){var r=new Gr("popup-closed-by-user"),i=new Gr("web-storage-unsupported"),o=this,a=!1;return this.ia().then(function(){(function(e){var t={type:"webStorageSupport"};return Us(e).then(function(){return function(e,t){return e.fb.then(function(){return new Ve(function(n){e.a.send(t.type,t,n,mr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(e.i,t)}).then(function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(e&&Zn(e),t(i),a=!0)})}).s(function(){}).then(function(){if(!a)return t=e,new Ve(function(e){return function n(){un(2e3).then(function(){if(t&&!t.closed)return n();e()})}()});var t}).then(function(){if(!a)return un(n).then(function(){t(r)})})},e.Ob=function(){var e=dr();return!wr(e)&&!Cr(e)},e.Jb=function(){return!1},e.Db=function(e,t,n,r,i,o,a,s){if(!e)return Xe(new Gr("popup-blocked"));if(a&&!wr())return this.ia().s(function(t){Zn(e),i(t)}),r(),Ye();this.a||(this.a=Fs(js(this)));var u=this;return this.a.then(function(){var t=u.ia().s(function(t){throw Zn(e),i(t),t});return r(),t}).then(function(){go(n),a||$n(qs(u.u,u.f,u.b,t,n,null,o,u.c,void 0,u.h,s),e)}).s(function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e})},e.Eb=function(e,t,n,r){this.a||(this.a=Fs(js(this)));var i=this;return this.a.then(function(){go(t),$n(qs(i.u,i.f,i.b,e,t,Xn(),n,i.c,void 0,i.h,r))}).s(function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e})},e.ia=function(){var e=this;return Us(this).then(function(){return e.i.fb}).s(function(){throw e.a=null,new Gr("network-request-failed")})},e.Rb=function(){return!0},e.ya=function(e){this.g.push(e)},e.La=function(e){V(this.g,function(t){return t==e})},(e=Bs.prototype).get=function(e){return Ye(this.a.getItem(e)).then(function(e){return e&&Tr(e)})},e.set=function(e,t){return Ye(this.a.setItem(e,_r(t)))},e.S=function(e){return Ye(this.a.removeItem(e))},e.$=function(){},e.ea=function(){};var Ws,zs=[];function Hs(e,t,n){K(e.a)&&e.b.addEventListener("message",e.f),void 0===e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function Ks(e){this.a=e}function Qs(e){this.c=e,this.b=!1,this.a=[]}function Gs(e,t,n,r){var i,o,a,s,u=n||{},c=null;if(e.b)return Xe(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Ve(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout(function(){r(Error("unsupported_event"))},l),c={messageChannel:h,onMessage:o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===e.data.status?(clearTimeout(s),void 0!==e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},e.a.push(c),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))}).then(function(t){return Ys(e,c),t}).s(function(t){throw Ys(e,c),t})}function Ys(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),V(e.a,function(e){return e==t})}}function Xs(){if(!Js())throw new Gr("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=a.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var e=this;ar()&&self?(this.l=function(){var e=ar()?self:null;if(F(zs,function(n){n.b==e&&(t=n)}),!t){var t=new Vs(e);zs.push(t)}return t}(),Hs(this.l,"keyChanged",function(t,n){return ru(e).then(function(t){return 0<t.length&&F(e.a,function(e){e(t)}),{keyProcessed:q(t,n.key)}})}),Hs(this.l,"ping",function(){return Ye(["keyChanged"])})):function(){var e=a.navigator;return e&&e.serviceWorker?Ye().then(function(){return e.serviceWorker.ready}).then(function(e){return e.active||null}).s(function(){return null}):Ye(null)}().then(function(t){(e.h=t)&&(e.g=new Qs(new Ks(t)),Gs(e.g,"ping",null,!0).then(function(t){t[0].fulfilled&&q(t[0].value,"keyChanged")&&(e.o=!0)}).s(function(){}))})}function $s(e){return e.m||(e.m=function e(t){return new Ve(function(n,r){var i=t.u.open("firebaseLocalStorageDb",1);i.onerror=function(e){try{e.preventDefault()}catch(e){}r(Error(e.target.error))},i.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){r(e)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):function(e){return new Ve(function(t,n){var r=e.u.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}})}(t).then(function(){return e(t)}).then(function(e){n(e)}).s(function(e){r(e)})}})}(e)),e.m}function Js(){try{return!!a.indexedDB}catch(e){return!1}}function Zs(e){return e.objectStore("firebaseLocalStorage")}function eu(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function tu(e){return new Ve(function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}})}function nu(e,t){return e.g&&e.h&&function(){var e=a.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}()===e.h?Gs(e.g,"keyChanged",{key:t},e.o).then(function(){}).s(function(){}):Ye()}function ru(e){return $s(e).then(function(e){var t=Zs(eu(e,!1));return t.getAll?tu(t.getAll()):new Ve(function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}})}).then(function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=function e(t,n){var r,i=[];for(r in t)r in n?typeof t[r]!=typeof n[r]?i.push(r):"object"==typeof t[r]&&null!=t[r]&&null!=n[r]?0<e(t[r],n[r]).length&&i.push(r):t[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in t||i.push(r);return i}(e.c,n),e.c=n}return r})}function iu(e){e.i&&e.i.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function ou(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=Ye().then(function(){if(Js()){var e=Sr(),r="__sak"+e;return Ws=Ws||new Xs,(n=Ws).set(r,e).then(function(){return n.get(r)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return n.S(r)}).then(function(){return n}).s(function(){return t.c})}return t.c}).then(function(e){return t.type=e.type,e.$(function(e){F(t.a,function(t){t(e)})}),e})}function au(){this.a={},this.type="inMemory"}function su(){if(!function(){var e="Node"==sr();if(!(e=uu()||e&&Vo.INTERNAL.node&&Vo.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==sr())throw new Gr("internal-error","The LocalStorage compatibility library was not found.");throw new Gr("web-storage-unsupported")}this.a=uu()||Vo.INTERNAL.node.localStorage,this.type="localStorage"}function uu(){try{var e=a.localStorage,t=Sr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function cu(){this.type="nullStorage"}function lu(){if(!function(){var e="Node"==sr();if(!(e=hu()||e&&Vo.INTERNAL.node&&Vo.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==sr())throw new Gr("internal-error","The SessionStorage compatibility library was not found.");throw new Gr("web-storage-unsupported")}this.a=hu()||Vo.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function hu(){try{var e=a.sessionStorage,t=Sr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function fu(){var e={};e.Browser=mu,e.Node=yu,e.ReactNative=gu,e.Worker=vu,this.a=e[sr()]}Vs.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];F(r,function(t){i.push(Ye().then(function(){return t(e.origin,e.data.data)}))}),Je(i).then(function(r){var i=[];F(r,function(e){i.push({fulfilled:e.Gb,value:e.value,reason:e.reason?e.reason.message:void 0})}),F(i,function(e){for(var t in e)void 0===e[t]&&delete e[t]}),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})})}},Ks.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Qs.prototype.close=function(){for(;0<this.a.length;)Ys(this,this.a[0]);this.b=!0},(e=Xs.prototype).set=function(e,t){var n,r=!1,i=this;return $s(this).then(function(t){return tu((t=Zs(eu(n=t,!0))).get(e))}).then(function(o){var a=Zs(eu(n,!0));return o?(o.value=t,tu(a.put(o))):(i.b++,r=!0,(o={}).fbase_key=e,o.value=t,tu(a.add(o)))}).then(function(){return i.c[e]=t,nu(i,e)}).ka(function(){r&&i.b--})},e.get=function(e){return $s(this).then(function(t){return tu(Zs(eu(t,!1)).get(e))}).then(function(e){return e&&e.value})},e.S=function(e){var t=!1,n=this;return $s(this).then(function(r){return t=!0,n.b++,tu(Zs(eu(r,!0)).delete(e))}).then(function(){return delete n.c[e],nu(n,e)}).ka(function(){t&&n.b--})},e.$=function(e){0==this.a.length&&function(e){iu(e),function t(){e.f=setTimeout(function(){e.i=ru(e).then(function(t){0<t.length&&F(e.a,function(e){e(t)})}).then(function(){t()}).s(function(e){"STOP_EVENT"!=e.message&&t()})},800)}()}(this),this.a.push(e)},e.ea=function(e){V(this.a,function(t){return t==e}),0==this.a.length&&iu(this)},(e=ou.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},e.set=function(e,t){return this.b.then(function(n){return n.set(e,t)})},e.S=function(e){return this.b.then(function(t){return t.S(e)})},e.$=function(e){this.a.push(e)},e.ea=function(e){V(this.a,function(t){return t==e})},(e=au.prototype).get=function(e){return Ye(this.a[e])},e.set=function(e,t){return this.a[e]=t,Ye()},e.S=function(e){return delete this.a[e],Ye()},e.$=function(){},e.ea=function(){},(e=su.prototype).get=function(e){var t=this;return Ye().then(function(){return Tr(t.a.getItem(e))})},e.set=function(e,t){var n=this;return Ye().then(function(){var r=_r(t);null===r?n.S(e):n.a.setItem(e,r)})},e.S=function(e){var t=this;return Ye().then(function(){t.a.removeItem(e)})},e.$=function(e){a.window&&zt(a.window,"storage",e)},e.ea=function(e){a.window&&Qt(a.window,"storage",e)},(e=cu.prototype).get=function(){return Ye(null)},e.set=function(){return Ye()},e.S=function(){return Ye()},e.$=function(){},e.ea=function(){},(e=lu.prototype).get=function(e){var t=this;return Ye().then(function(){return Tr(t.a.getItem(e))})},e.set=function(e,t){var n=this;return Ye().then(function(){var r=_r(t);null===r?n.S(e):n.a.setItem(e,r)})},e.S=function(e){var t=this;return Ye().then(function(){t.a.removeItem(e)})},e.$=function(){},e.ea=function(){};var pu,du,mu={C:su,Sa:lu},yu={C:su,Sa:lu},gu={C:Bs,Sa:cu},vu={C:su,Sa:cu},bu={$c:"local",NONE:"none",bd:"session"};function wu(){var e=!(Cr(dr())||!or()),t=wr(),n=yr();this.m=e,this.h=t,this.l=n,this.a={},e=pu=pu||new fu;try{this.g=!Yn()&&Ar()||!a.indexedDB?new e.a.C:new ou(ar()?new au:new e.a.C)}catch(e){this.g=new au,this.h=!0}try{this.i=new e.a.Sa}catch(e){this.i=new au}this.u=new au,this.f=E(this.Pb,this),this.b={}}function _u(){return du=du||new wu}function Eu(e,t){switch(t){case"session":return e.i;case"none":return e.u;default:return e.g}}function Tu(e,t){return"firebase:"+e.name+(t?":"+t:"")}function Su(e,t,n){return n=Tu(t,n),"local"==t.C&&(e.b[n]=null),Eu(e,t.C).S(n)}function Cu(e){e.c&&(clearInterval(e.c),e.c=null)}function ku(e){this.a=e,this.b=_u()}(e=wu.prototype).get=function(e,t){return Eu(this,e.C).get(Tu(e,t))},e.set=function(e,t,n){var r=Tu(e,n),i=this,o=Eu(this,e.C);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.C&&(i.b[r]=t)})},e.addListener=function(e,t,n){var r;e=Tu(e,t),this.l&&(this.b[e]=a.localStorage.getItem(e)),K(this.a)&&(Eu(this,"local").$(this.f),this.h||(Yn()||!Ar())&&a.indexedDB||!this.l||(Cu(r=this),r.c=setInterval(function(){for(var e in r.a){var t=a.localStorage.getItem(e),n=r.b[e];t!=n&&(r.b[e]=t,t=new Rt({type:"storage",key:e,target:window,oldValue:n,newValue:t,a:!0}),r.Pb(t))}},1e3))),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},e.removeListener=function(e,t,n){e=Tu(e,t),this.a[e]&&(V(this.a[e],function(e){return e==n}),0==this.a[e].length&&delete this.a[e]),K(this.a)&&(Eu(this,"local").ea(this.f),Cu(this))},e.Pb=function(e){if(e&&e.f){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.Za(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if(void 0!==e.a.a?Eu(this,"local").ea(this.f):Cu(this),this.m)if(n=a.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?a.localStorage.setItem(t,r):a.localStorage.removeItem(t);else if(this.b[t]===r&&void 0===e.a.a)return;var o=this;n=function(){void 0===e.a.a&&o.b[t]===a.localStorage.getItem(t)||(o.b[t]=a.localStorage.getItem(t),o.Za(t))},yt&&Ct&&10==Ct&&a.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else F(e,E(this.Za,this))},e.Za=function(e){this.a[e]&&F(this.a[e],function(e){e()})};var Iu,xu={name:"authEvent",C:"local"};function Nu(){this.a=_u()}function Au(e,t){this.b=Ou,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0!==Iu||(Iu=a.Int32Array?new Int32Array(Uu):Uu),this.reset()}C(Au,function(){this.b=-1});for(var Ou=64,Du=Ou-1,Ru=[],Pu=0;Pu<Du;Pu++)Ru[Pu]=0;var Mu=W(128,Ru);function Lu(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;t<64;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;t<64;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|Iu[t])|0)+(0|n[t])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function Fu(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if(s(t))for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(Lu(e),i=0);else{if(!m(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(Lu(e),i=0)}}e.c=i,e.g+=n}Au.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):z(this.h)};var Uu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ju(){Au.call(this,8,qu)}C(ju,Au);var qu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Bu(e,t,n,r,i){this.u=e,this.i=t,this.l=n,this.m=r||null,this.o=i||null,this.h=t+":"+n,this.v=new Nu,this.g=new ku(this.h),this.f=null,this.b=[],this.a=this.c=null}function Vu(e){return new Gr("invalid-cordova-configuration",e)}function Wu(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(e){}}function zu(e){return e.f||(e.f=e.ia().then(function(){return new Ve(function(t){e.ya(function n(r){return t(r),e.La(n),!1}),function(e){function t(t){r=!0,i&&i.cancel(),Hu(e).then(function(r){var i=n;if(r&&t&&t.url){var o=null;-1!=(i=ji(t.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Tr(wn(o=_n(i),"firebaseError")||null))?Yr(o):null)?new vo(r.c,r.b,null,null,o,null,r.R()):new vo(r.c,r.b,i,r.f,null,null,r.R())),i=o||n}Wu(e,i)})}var n=new vo("unknown",null,null,null,new Gr("no-auth-event")),r=!1,i=un(500).then(function(){return Hu(e).then(function(){r||Wu(e,n)})}),o=a.handleOpenURL;a.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(mr("BuildInfo.packageName",a).toLowerCase()+"://")&&t({url:e}),"function"==typeof o)try{o(e)}catch(e){console.error(e)}},Eo=Eo||new wo,function(e){var t=Eo;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"==typeof(e=mr("universalLinks.subscribe",a))&&e(null,t.b))}(t)}(e)})})),e.f}function Hu(e){var t,n=null;return(t=e.g,t.b.get(xu,t.a).then(function(e){return bo(e)})).then(function(t){return n=t,Su((t=e.g).b,xu,t.a)}).then(function(){return n})}function Ku(e){this.a=e,this.b=_u()}(e=Bu.prototype).ia=function(){return this.Ba?this.Ba:this.Ba=(ir(void 0)?rr().then(function(){return new Ve(function(e,t){var n=a.document,r=setTimeout(function(){t(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),e()},!1)})}):Xe(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof mr("universalLinks.subscribe",a))throw Vu("cordova-universal-links-plugin-fix is not installed");if(void 0===mr("BuildInfo.packageName",a))throw Vu("cordova-plugin-buildinfo is not installed");if("function"!=typeof mr("cordova.plugins.browsertab.openUrl",a))throw Vu("cordova-plugin-browsertab is not installed");if("function"!=typeof mr("cordova.InAppBrowser.open",a))throw Vu("cordova-plugin-inappbrowser is not installed")},function(){throw new Gr("cordova-not-ready")})},e.Fb=function(e,t){return t(new Gr("operation-not-supported-in-this-environment")),Ye()},e.Db=function(){return Xe(new Gr("operation-not-supported-in-this-environment"))},e.Rb=function(){return!1},e.Ob=function(){return!0},e.Jb=function(){return!0},e.Eb=function(e,t,n,r){if(this.c)return Xe(new Gr("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,l=null;return this.c=Ye().then(function(){return go(t),zu(i)}).then(function(){return function(e,t,n,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),s=new vo(t,r,null,o,new Gr("no-auth-event"),null,i),u=mr("BuildInfo.packageName",a);if("string"!=typeof u)throw new Gr("invalid-cordova-configuration");var c=mr("BuildInfo.displayName",a),l={};if(dr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!dr().toLowerCase().match(/android/))return Xe(new Gr("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(e){var t=new ju;Fu(t,e),e=[];var n=8*t.g;t.c<56?Fu(t,Mu,56-t.c):Fu(t,Mu,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(Lu(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return function(e){return U(e,function(e){return 1<(e=e.toString(16)).length?e:"0"+e}).join("")}(e)}(o),l.sessionId=o;var h=qs(e.u,e.i,e.l,t,n,null,r,e.m,l,e.o,i);return e.ia().then(function(){var t=e.h;return e.v.a.set(xu,s.A(),t)}).then(function(){var t=mr("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof t)throw new Gr("invalid-cordova-configuration");var n=null;t(function(t){if(t){if("function"!=typeof(n=mr("cordova.plugins.browsertab.openUrl",a)))throw new Gr("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=mr("cordova.InAppBrowser.open",a)))throw new Gr("invalid-cordova-configuration");t=dr(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,e,t,n,r)}).then(function(){return new Ve(function(e,t){u=function(){var t=mr("cordova.plugins.browsertab.close",a);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.ya(u),c=function(){s=s||un(2e3).then(function(){t(new Gr("redirect-cancelled-by-user"))})},l=function(){xr()&&c()},o.addEventListener("resume",c,!1),dr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)}).s(function(e){return Hu(i).then(function(){throw e})})}).ka(function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),u&&i.La(u),i.c=null})},e.ya=function(e){this.b.push(e),zu(this).s(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new vo("unknown",null,null,null,new Gr("no-auth-event")),e(t))})},e.La=function(e){V(this.b,function(t){return t==e})};var Qu={name:"pendingRedirect",C:"session"};function Gu(e){return Su(e.b,Qu,e.a)}function Yu(e,t,n){this.i={},this.v=0,this.B=e,this.u=t,this.m=n,this.h=[],this.f=!1,this.l=E(this.o,this),this.b=new cc,this.w=new dc,this.g=new Ku(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=Xu(this.B,this.u,this.m,Ti)}function Xu(e,t,n,r){var i=Vo.SDK_VERSION||null;return ir()?new Bu(e,t,n,i,r):new Ls(e,t,n,i,r)}function $u(e){e.f||(e.f=!0,e.a.ya(e.l));var t=e.a;return e.a.ia().s(function(n){throw e.a==t&&e.reset(),n})}function Ju(e){e.a.Ob()&&$u(e).s(function(t){var n=new vo("unknown",null,null,null,new Gr("operation-not-supported-in-this-environment"));ic(t)&&e.o(n)}),e.a.Jb()||lc(e.b)}function Zu(e,t){q(e.h,t)||e.h.push(t),e.f||function(e){return e.b.get(Qu,e.a).then(function(e){return"pending"==e})}(e.g).then(function(t){t?Gu(e.g).then(function(){$u(e).s(function(t){var n=new vo("unknown",null,null,null,new Gr("operation-not-supported-in-this-environment"));ic(t)&&e.o(n)})}):Ju(e)}).s(function(){Ju(e)})}function ec(e,t){V(e.h,function(e){return e==t})}Yu.prototype.reset=function(){this.f=!1,this.a.La(this.l),this.a=Xu(this.B,this.u,this.m),this.i={}},Yu.prototype.o=function(e){if(!e)throw new Gr("invalid-auth-event");if(6e5<=S()-this.v&&(this.i={},this.v=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.xb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.v=S())),t=!0;break}}return lc(this.b),t};var tc=new Ir(2e3,1e4),nc=new Ir(3e4,6e4);function rc(e,t,n,r,i,o,a){return e.a.Db(t,n,r,function(){e.f||(e.f=!0,e.a.ya(e.l))},function(){e.reset()},i,o,a)}function ic(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function oc(e,t,n,r,i){var o;return function(e){return e.b.set(Qu,"pending",e.a)}(e.g).then(function(){return e.a.Eb(t,n,r,i).s(function(t){if(ic(t))throw new Gr("operation-not-supported-in-this-environment");return o=t,Gu(e.g).then(function(){throw o})}).then(function(){return e.a.Rb()?new Ve(function(){}):Gu(e.g).then(function(){return e.oa()}).then(function(){}).s(function(){})})})}function ac(e,t,n,r,i){return e.a.Fb(r,function(e){t.ja(n,null,e,i)},tc.get())}Yu.prototype.oa=function(){return this.b.oa()};var sc={};function uc(e,t,n){var r=t+":"+n;return sc[r]||(sc[r]=new Yu(e,t,n)),sc[r]}function cc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function lc(e){e.g||(e.g=!0,pc(e,!1,null,null))}function hc(e){e.g&&!e.i&&pc(e,!1,null,null)}function fc(e,t){if(e.b=function(){return Ye(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function pc(e,t,n,r){t?r?function(e,t){if(e.b=function(){return Xe(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):fc(e,n):fc(e,{user:null}),e.f=[],e.c=[]}function dc(){}function mc(){this.vb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.vb},set:function(e){this.vb=e},enumerable:!1})}function yc(e,t){this.a=t,Mr(this,"verificationId",e)}function gc(e,t,n,r){return new po(e).Va(t,n).then(function(e){return new yc(e,r)})}function vc(e){var t=Ei(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new Gr("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Lr(this,{token:e,expirationTime:Nr(1e3*t.exp),authTime:Nr(1e3*t.auth_time),issuedAtTime:Nr(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,claims:t})}function bc(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function wc(e){this.f=e,this.b=this.a=null,this.c=0}function _c(e,t){var n=t[Aa],r=t.refreshToken;t=Ec(t.expiresIn),e.b=n,e.c=t,e.a=r}function Ec(e){return S()+1e3*parseInt(e,10)}function Tc(e,t){this.a=e||null,this.b=t||null,Lr(this,{lastSignInTime:Nr(t||null),creationTime:Nr(e||null)})}function Sc(e,t,n,r,i,o){Lr(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function Cc(e,t){for(var n in Dt.call(this,e),t)this[n]=t[n]}function kc(e,t,n){this.I=[],this.l=e.apiKey,this.m=e.appName,this.o=e.authDomain||null,e=Vo.SDK_VERSION?pr(Vo.SDK_VERSION):null,this.a=new xa(this.l,Ci(Ti),e),this.b=new wc(this.a),Rc(this,t[Aa]),_c(this.b,t),Mr(this,"refreshToken",this.b.a),Lc(this,n||{}),nn.call(this),this.J=!1,this.o&&gr()&&(this.i=uc(this.o,this.l,this.m)),this.O=[],this.h=null,this.w=function(e){return new bc(function(){return e.G(!0)},function(e){return!(!e||"auth/network-request-failed"!=e.code)},function(){var t=e.b.c-S()-3e5;return 0<t?t:0})}(this),this.W=E(this.Ha,this);var r=this;this.ga=null,this.va=function(e){r.sa(e.g)},this.Z=null,this.P=[],this.ua=function(e){xc(r,e.c)},this.Y=null}function Ic(e,t){e.Z&&Qt(e.Z,"languageCodeChanged",e.va),(e.Z=t)&&zt(t,"languageCodeChanged",e.va)}function xc(e,t){e.P=t,La(e.a,Vo.SDK_VERSION?pr(Vo.SDK_VERSION,e.P):null)}function Nc(e,t){e.Y&&Qt(e.Y,"frameworkChanged",e.ua),(e.Y=t)&&zt(t,"frameworkChanged",e.ua)}function Ac(t){try{return Vo.app(t.m).auth()}catch(e){throw new Gr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Oc(e){e.B||e.w.b||(e.w.start(),Qt(e,"tokenChanged",e.W),zt(e,"tokenChanged",e.W))}function Dc(e){Qt(e,"tokenChanged",e.W),e.w.stop()}function Rc(e,t){e.ma=t,Mr(e,"_lat",t)}function Pc(e){for(var t=[],n=0;n<e.O.length;n++)t.push(e.O[n](e));return Je(t).then(function(){return e})}function Mc(e){e.i&&!e.J&&(e.J=!0,Zu(e.i,e))}function Lc(e,t){Lr(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new Tc(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function Fc(){}function Uc(e){return Ye().then(function(){if(e.B)throw new Gr("app-deleted")})}function jc(e){return U(e.providerData,function(e){return e.providerId})}function qc(e,t){t&&(Bc(e,t.providerId),e.providerData.push(t))}function Bc(e,t){V(e.providerData,function(e){return e.providerId==t})}function Vc(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Mr(e,t,n)}function Wc(e,t){e!=t&&(Lr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Mr(e,"metadata",function(e){return new Tc(e.a,e.b)}(t.metadata)):Mr(e,"metadata",new Tc),F(t.providerData,function(t){qc(e,t)}),function(e,t){e.b=t.b,e.a=t.a,e.c=t.c}(e.b,t.b),Mr(e,"refreshToken",e.b.a))}function zc(e){return e.G().then(function(t){var n=e.isAnonymous;return function(e,t){return Cs(e.a,as,{idToken:t}).then(E(e.zc,e))}(e,t).then(function(){return n||Vc(e,"isAnonymous",!1),t})})}function Hc(e,t){t[Aa]&&e.ma!=t[Aa]&&(_c(e.b,t),e.dispatchEvent(new Cc("tokenChanged")),Rc(e,t[Aa]),Vc(e,"refreshToken",e.b.a))}function Kc(e,t){return zc(e).then(function(){if(q(jc(e),t))return Pc(e).then(function(){throw new Gr("provider-already-linked")})})}function Qc(e,t,n){return Fr({user:e,credential:yo(t),additionalUserInfo:t=Ai(t),operationType:n})}function Gc(e,t){return Hc(e,t),e.reload().then(function(){return e})}function Yc(e,t,n,r,i){if(!gr())return Xe(new Gr("operation-not-supported-in-this-environment"));if(e.h&&!i)return Xe(e.h);var o=Ni(n.providerId),a=Sr(e.uid+":::"),s=null;(!wr()||or())&&e.o&&n.isOAuthProvider&&(s=qs(e.o,e.l,e.m,t,n,null,a,Vo.SDK_VERSION||null,null,null,e.tenantId));var u=er(s,o&&o.Da,o&&o.Ca);return r=r().then(function(){if($c(e),!i)return e.G().then(function(){})}).then(function(){return rc(e.i,u,t,n,a,!!s,e.tenantId)}).then(function(){return new Ve(function(n,r){e.ja(t,null,new Gr("cancelled-popup-request"),e.g||null),e.f=n,e.v=r,e.g=a,e.c=ac(e.i,e,t,u,a)})}).then(function(e){return u&&Zn(u),e?Fr(e):null}).s(function(e){throw u&&Zn(u),e}),Jc(e,r,i)}function Xc(e,t,n,r,i){if(!gr())return Xe(new Gr("operation-not-supported-in-this-environment"));if(e.h&&!i)return Xe(e.h);var o=null,a=Sr(e.uid+":::");return r=r().then(function(){if($c(e),!i)return e.G().then(function(){})}).then(function(){return e.ca=a,Pc(e)}).then(function(t){return e.da&&(t=(t=e.da).b.set(tl,e.A(),t.a)),t}).then(function(){return oc(e.i,t,n,a,e.tenantId)}).s(function(t){if(o=t,e.da)return nl(e.da);throw o}).then(function(){if(o)throw o}),Jc(e,r,i)}function $c(e){if(!e.i||!e.J){if(e.i&&!e.J)throw new Gr("internal-error");throw new Gr("auth-domain-config-required")}}function Jc(e,t,n){var r=function(e,t,n){return e.h&&!n?(t.cancel(),Xe(e.h)):t.s(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.h||e.dispatchEvent(new Cc("userInvalidated")),e.h=t),t})}(e,t,n);return e.I.push(r),r.ka(function(){B(e.I,r)}),r}function Zc(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={};if(!(e.stsTokenManager&&e.stsTokenManager.accessToken&&e.stsTokenManager.expirationTime))return null;n[Aa]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null,n.expiresIn=(e.stsTokenManager.expirationTime-S())/1e3;var r=new kc(t,n,e);return e.providerData&&F(e.providerData,function(e){e&&qc(r,Fr(e))}),e.redirectEventId&&(r.ca=e.redirectEventId),r}function el(e){this.a=e,this.b=_u()}cc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},cc.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(pc(this,!0,null,e.a),Ye()):t.za(n,r)?function(e,t,n){n=n.za(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.R(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then(function(t){pc(e,s,t,null)}).s(function(t){pc(e,s,null,t)})}(this,e,t):Xe(new Gr("invalid-auth-event")):(pc(this,!1,null,null),Ye())}else Xe(new Gr("invalid-auth-event"))},cc.prototype.oa=function(){var e=this;return new Ve(function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),function(e){var t=new Gr("timeout");e.a&&e.a.cancel(),e.a=un(nc.get()).then(function(){e.b||(e.g=!0,pc(e,!0,null,t))})}(e))})},dc.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.ja(e.c,null,e.a,e.b),Ye()):t.za(n,r)?function(e,t){var n=e.b,r=e.c;t.za(r,n)(e.g,e.f,e.R(),e.i).then(function(e){t.ja(r,e,null,n)}).s(function(e){t.ja(r,null,e,n)})}(e,t):Xe(new Gr("invalid-auth-event"))}else Xe(new Gr("invalid-auth-event"))},yc.prototype.confirm=function(e){return e=mo(this.verificationId,e),this.a(e)},bc.prototype.start=function(){this.a=this.c,function e(t,n){t.stop(),t.b=un(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(t,n)).then(function(){return e=a.document,t=null,xr()||!e?Ye():new Ve(function(n){t=function(){xr()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)}).s(function(n){throw e.removeEventListener("visibilitychange",t,!1),n});var e,t}).then(function(){return t.h()}).then(function(){e(t,!0)}).s(function(n){t.i(n)&&e(t,!1)})}(this,!0)},bc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},wc.prototype.A=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},wc.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Xe(new Gr("user-token-expired")):e||!this.b||S()>this.c-3e4?this.a?function(e,t){return function(e,t){return new Ve(function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?Fa(e,e.l+"?key="+encodeURIComponent(e.c),function(e){e?e.error?r(Is(e)):e.access_token&&e.refresh_token?n(e):r(new Gr("internal-error")):r(new Gr("network-request-failed"))},"POST",Rn(t).toString(),e.g,e.u.get()):r(new Gr("internal-error"))})}(e.f,t).then(function(t){return e.b=t.access_token,e.c=Ec(t.expires_in),e.a=t.refresh_token,{accessToken:e.b,expirationTime:e.c,refreshToken:e.a}}).s(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t})}(this,{grant_type:"refresh_token",refresh_token:this.a}):Ye(null):Ye({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Tc.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},C(Cc,Dt),C(kc,nn),kc.prototype.sa=function(e){this.ga=e,Ma(this.a,e)},kc.prototype.ha=function(){return this.ga},kc.prototype.Aa=function(){return z(this.P)},kc.prototype.Ha=function(){this.w.b&&(this.w.stop(),this.w.start())},Mr(kc.prototype,"providerId","firebase"),(e=kc.prototype).reload=function(){var e=this;return Jc(this,Uc(this).then(function(){return zc(e).then(function(){return Pc(e)}).then(Fc)}))},e.dc=function(e){return this.G(e).then(function(e){return new vc(e)})},e.G=function(e){var t=this;return Jc(this,Uc(this).then(function(){return t.b.getToken(e)}).then(function(e){if(!e)throw new Gr("internal-error");return e.accessToken!=t.ma&&(Rc(t,e.accessToken),t.dispatchEvent(new Cc("tokenChanged"))),Vc(t,"refreshToken",e.refreshToken),e.accessToken}))},e.zc=function(e){if(!(e=e.users)||!e.length)throw new Gr("internal-error");Lc(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?U(e,function(e){return new Sc(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)}):[]}(e),n=0;n<t.length;n++)qc(this,t[n]);Vc(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length))},e.Ac=function(e){return Rr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.gb(e)},e.gb=function(e){var t=this,n=null;return Jc(this,e.f(this.a,this.uid).then(function(e){return Hc(t,e),n=Qc(t,e,"reauthenticate"),t.h=null,t.reload()}).then(function(){return n}),!0)},e.rc=function(e){return Rr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.eb(e)},e.eb=function(e){var t=this,n=null;return Jc(this,Kc(this,e.providerId).then(function(){return t.G()}).then(function(n){return e.b(t.a,n)}).then(function(e){return n=Qc(t,e,"link"),Gc(t,e)}).then(function(){return n}))},e.sc=function(e,t){var n=this;return Jc(this,Kc(this,"phone").then(function(){return gc(Ac(n),e,t,E(n.eb,n))}))},e.Bc=function(e,t){var n=this;return Jc(this,Ye().then(function(){return gc(Ac(n),e,t,E(n.gb,n))}),!0)},e.rb=function(e){var t=this;return Jc(this,this.G().then(function(n){return t.a.rb(n,e)}).then(function(e){return Hc(t,e),t.reload()}))},e.Sc=function(e){var t=this;return Jc(this,this.G().then(function(n){return e.b(t.a,n)}).then(function(e){return Hc(t,e),t.reload()}))},e.sb=function(e){var t=this;return Jc(this,this.G().then(function(n){return t.a.sb(n,e)}).then(function(e){return Hc(t,e),t.reload()}))},e.tb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Uc(this);var t=this;return Jc(this,this.G().then(function(n){return t.a.tb(n,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(e){return Hc(t,e),Vc(t,"displayName",e.displayName||null),Vc(t,"photoURL",e.photoUrl||null),F(t.providerData,function(e){"password"===e.providerId&&(Mr(e,"displayName",t.displayName),Mr(e,"photoURL",t.photoURL))}),Pc(t)}).then(Fc))},e.Qc=function(e){var t=this;return Jc(this,zc(this).then(function(n){return q(jc(t),e)?function(e,t,n){return Cs(e,rs,{idToken:t,deleteProvider:n})}(t.a,n,[e]).then(function(e){var n={};return F(e.providerUserInfo||[],function(e){n[e.providerId]=!0}),F(jc(t),function(e){n[e]||Bc(t,e)}),n[po.PROVIDER_ID]||Mr(t,"phoneNumber",null),Pc(t)}):Pc(t).then(function(){throw new Gr("no-such-provider")})}))},e.delete=function(){var e=this;return Jc(this,this.G().then(function(t){return Cs(e.a,ns,{idToken:t})}).then(function(){e.dispatchEvent(new Cc("userDeleted"))})).then(function(){for(var t=0;t<e.I.length;t++)e.I[t].cancel("app-deleted");Ic(e,null),Nc(e,null),e.I=[],e.B=!0,Dc(e),Mr(e,"refreshToken",null),e.i&&ec(e.i,e)})},e.xb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ca||null)==t||"reauthViaRedirect"==e&&(this.ca||null)==t)},e.ja=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},e.za=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?E(this.Bb,this):"reauthViaPopup"==e&&t==(this.g||null)?E(this.Cb,this):"linkViaRedirect"==e&&(this.ca||null)==t?E(this.Bb,this):"reauthViaRedirect"==e&&(this.ca||null)==t?E(this.Cb,this):null},e.tc=function(e){var t=this;return Yc(this,"linkViaPopup",e,function(){return Kc(t,e.providerId).then(function(){return Pc(t)})},!1)},e.Cc=function(e){return Yc(this,"reauthViaPopup",e,function(){return Ye()},!0)},e.uc=function(e){var t=this;return Xc(this,"linkViaRedirect",e,function(){return Kc(t,e.providerId)},!1)},e.Dc=function(e){return Xc(this,"reauthViaRedirect",e,function(){return Ye()},!0)},e.Bb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Jc(this,this.G().then(function(n){return Ya(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})}).then(function(e){return o=Qc(i,e,"link"),Gc(i,e)}).then(function(){return o}))},e.Cb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Jc(this,Ye().then(function(){return Bi(Xa(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)}).then(function(e){return o=Qc(i,e,"reauthenticate"),Hc(i,e),i.h=null,i.reload()}).then(function(){return o}),!0)},e.jb=function(e){var t=this,n=null;return Jc(this,this.G().then(function(t){return n=t,void 0===e||K(e)?{}:gi(new si(e))}).then(function(e){return t.a.jb(n,e)}).then(function(e){if(t.email!=e)return t.reload()}).then(function(){}))},e.toJSON=function(){return this.A()},e.A=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.A(),redirectEventId:this.ca||null};return this.metadata&&Y(e,this.metadata.A()),F(this.providerData,function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))}),e};var tl={name:"redirectUser",C:"session"};function nl(e){return Su(e.b,tl,e.a)}function rl(e){this.a=e,this.b=_u(),this.c=null,this.f=function(e){var t=al("local"),n=al("session"),r=al("none");return function(e,t,n){var r=Tu(t,n),i=Eu(e,t.C);return e.get(t,n).then(function(o){var s=null;try{s=Tr(a.localStorage.getItem(r))}catch(o){}if(s&&!o)return a.localStorage.removeItem(r),e.set(t,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)})}(e.b,t,e.a).then(function(){return e.b.get(n,e.a)}).then(function(i){return i?n:e.b.get(r,e.a).then(function(n){return n?r:e.b.get(t,e.a).then(function(n){return n?t:e.b.get(ol,e.a).then(function(e){return e?al(e):t})})})}).then(function(t){return e.c=t,il(e,t.C)}).s(function(){e.c||(e.c=t)})}(this),this.b.addListener(al("local"),this.a,E(this.g,this))}function il(e,t){var n,r,i=[];for(n in bu)bu[n]!==t&&i.push(Su(e.b,al(bu[n]),e.a));return i.push(Su(e.b,ol,e.a)),r=i,new Ve(function(e,t){var n=r.length,i=[];if(n)for(var o=function(t,r){n--,i[t]=r,0==n&&e(i)},a=function(e){t(e)},s=0;s<r.length;s++)$e(r[s],T(o,s),a);else e(i)})}rl.prototype.g=function(){var e=this,t=al("local");ll(this,function(){return Ye().then(function(){return e.c&&"local"!=e.c.C?e.b.get(t,e.a):null}).then(function(n){if(n)return il(e,"local").then(function(){e.c=t})})})};var ol={name:"persistence",C:"session"};function al(e){return{name:"authUser",C:e}}function sl(e,t){return ll(e,function(){return e.b.set(e.c,t.A(),e.a)})}function ul(e){return ll(e,function(){return Su(e.b,e.c,e.a)})}function cl(e,t){return ll(e,function(){return e.b.get(e.c,e.a).then(function(e){return e&&t&&(e.authDomain=t),Zc(e||{})})})}function ll(e,t){return e.f=e.f.then(t,t),e.f}function hl(e){if(this.l=!1,Mr(this,"settings",new mc),Mr(this,"app",e),!bl(this).options||!bl(this).options.apiKey)throw new Gr("invalid-api-key");var t;e=Vo.SDK_VERSION?pr(Vo.SDK_VERSION):null,this.b=new xa(bl(this).options&&bl(this).options.apiKey,Ci(Ti),e),this.O=[],this.m=[],this.J=[],this.Ub=Vo.INTERNAL.createSubscribe(E(this.oc,this)),this.W=void 0,this.Vb=Vo.INTERNAL.createSubscribe(E(this.pc,this)),gl(this,null),this.h=new rl(bl(this).options.apiKey+":"+bl(this).name),this.w=new el(bl(this).options.apiKey+":"+bl(this).name),this.Y=Tl(this,function(e){var t=bl(e).options.authDomain,n=function(e){var t=function(e,t){return e.b.get(tl,e.a).then(function(e){return e&&t&&(e.authDomain=t),Zc(e||{})})}(e.w,bl(e).options.authDomain).then(function(t){return(e.B=t)&&(t.da=e.w),nl(e.w)});return Tl(e,t)}(e).then(function(){return cl(e.h,t)}).then(function(t){return t?(t.da=e.w,e.B&&(e.B.ca||null)==(t.ca||null)?t:t.reload().then(function(){return sl(e.h,t).then(function(){return t})}).s(function(n){return"auth/network-request-failed"==n.code?t:ul(e.h)})):null}).then(function(t){gl(e,t||null)});return Tl(e,n)}(this)),this.i=Tl(this,(t=this).Y.then(function(){return ml(t)}).s(function(){}).then(function(){if(!t.l)return t.ma()}).s(function(){}).then(function(){if(!t.l){t.ga=!0;var e=t.h;e.b.addListener(al("local"),e.a,t.ma)}})),this.ga=!1,this.ma=E(this.Nc,this),this.ub=E(this.aa,this),this.ua=E(this.bc,this),this.va=E(this.mc,this),this.Ha=E(this.nc,this),this.a=null,function(e){var t=bl(e).options.authDomain,n=bl(e).options.apiKey;t&&gr()&&(e.Tb=e.Y.then(function(){if(!e.l){if(e.a=uc(t,n,bl(e).name),Zu(e.a,e),wl(e)&&Mc(wl(e)),e.B){Mc(e.B);var r=e.B;r.sa(e.ha()),Ic(r,e),xc(r=e.B,e.I),Nc(r,e),e.B=null}return e.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=E(this.delete,this),this.INTERNAL.logFramework=E(this.vc,this),this.o=0,nn.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.ha()},set:function(e){this.sa(e)},enumerable:!1}),e.Z=null,Object.defineProperty(e,"ti",{get:function(){return this.R()},set:function(e){this.nb(e)},enumerable:!1}),e.P=null}(this),this.I=[]}function fl(e){Dt.call(this,"languageCodeChanged"),this.g=e}function pl(e){Dt.call(this,"frameworkChanged"),this.c=e}function dl(e){return e.Tb||Xe(new Gr("auth-domain-config-required"))}function ml(e){if(!gr())return Xe(new Gr("operation-not-supported-in-this-environment"));var t=dl(e).then(function(){return e.a.oa()}).then(function(e){return e?Fr(e):null});return Tl(e,t)}function yl(e,t){var n={};return n.apiKey=bl(e).options.apiKey,n.authDomain=bl(e).options.authDomain,n.appName=bl(e).name,e.Y.then(function(){return function(e,t,n,r){var i=new kc(e,t);return n&&(i.da=n),r&&xc(i,r),i.reload().then(function(){return i})}(n,t,e.w,e.Aa())}).then(function(t){return wl(e)&&t.uid==wl(e).uid?Wc(wl(e),t):(gl(e,t),Mc(t)),e.aa(t)}).then(function(){El(e)})}function gl(e,t){wl(e)&&(function(e,t){V(e.O,function(e){return e==t})}(wl(e),e.ub),Qt(wl(e),"tokenChanged",e.ua),Qt(wl(e),"userDeleted",e.va),Qt(wl(e),"userInvalidated",e.Ha),Dc(wl(e))),t&&(t.O.push(e.ub),zt(t,"tokenChanged",e.ua),zt(t,"userDeleted",e.va),zt(t,"userInvalidated",e.Ha),0<e.o&&Oc(t)),Mr(e,"currentUser",t),t&&(t.sa(e.ha()),Ic(t,e),xc(t,e.I),Nc(t,e))}function vl(e,t){var n=null,r=null;return Tl(e,t.then(function(t){return n=yo(t),r=Ai(t),yl(e,t)}).then(function(){return Fr({user:wl(e),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function bl(e){return e.app}function wl(e){return e.currentUser}function _l(e){return wl(e)&&wl(e)._lat||null}function El(e){if(e.ga){for(var t=0;t<e.m.length;t++)e.m[t]&&e.m[t](_l(e));if(e.W!==e.getUid()&&e.J.length)for(e.W=e.getUid(),t=0;t<e.J.length;t++)e.J[t]&&e.J[t](_l(e))}}function Tl(e,t){return e.O.push(t),t.ka(function(){B(e.O,t)}),t}function Sl(){}function Cl(){this.a={},this.b=1e12}rl.prototype.mb=function(e){var t=null,n=this;return function(e){var t=new Gr("invalid-persistence-type"),n=new Gr("unsupported-persistence-type");e:{for(r in bu)if(bu[r]==e){var r=!0;break e}r=!1}if(!r||"string"!=typeof e)throw t;switch(sr()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;default:if(!yr()&&"none"!==e)throw n}}(e),ll(this,function(){return e!=n.c.C?n.b.get(n.c,n.a).then(function(r){return t=r,il(n,e)}).then(function(){if(n.c=al(e),t)return n.b.set(n.c,t,n.a)}):Ye()})},C(hl,nn),C(fl,Dt),C(pl,Dt),(e=hl.prototype).mb=function(e){return Tl(this,e=this.h.mb(e))},e.sa=function(e){this.Z===e||this.l||(this.Z=e,Ma(this.b,this.Z),this.dispatchEvent(new fl(this.ha())))},e.ha=function(){return this.Z},e.Tc=function(){var e=a.navigator;this.sa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},e.vc=function(e){this.I.push(e),La(this.b,Vo.SDK_VERSION?pr(Vo.SDK_VERSION,this.I):null),this.dispatchEvent(new pl(this.I))},e.Aa=function(){return z(this.I)},e.nb=function(e){this.P===e||this.l||(this.P=e,this.b.b=this.P)},e.R=function(){return this.P},e.toJSON=function(){return{apiKey:bl(this).options.apiKey,authDomain:bl(this).options.authDomain,appName:bl(this).name,currentUser:wl(this)&&wl(this).A()}},e.xb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},e.ja=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},e.za=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?E(this.ac,this):null},e.ac=function(e,t,n,r){var i=this;e={requestUri:e,postBody:r,sessionId:t,tenantId:n},this.c&&(this.c.cancel(),this.c=null);var o=null,a=null,s=Ga(i.b,e).then(function(e){return o=yo(e),a=Ai(e),e});return Tl(this,e=i.Y.then(function(){return s}).then(function(e){return yl(i,e)}).then(function(){return Fr({user:wl(i),credential:o,additionalUserInfo:a,operationType:"signIn"})}))},e.Lc=function(e){if(!gr())return Xe(new Gr("operation-not-supported-in-this-environment"));var t=this,n=Ni(e.providerId),r=Sr(),i=null;(!wr()||or())&&bl(this).options.authDomain&&e.isOAuthProvider&&(i=qs(bl(this).options.authDomain,bl(this).options.apiKey,bl(this).name,"signInViaPopup",e,null,r,Vo.SDK_VERSION||null,null,null,this.R()));var o=er(i,n&&n.Da,n&&n.Ca);return Tl(this,n=dl(this).then(function(n){return rc(n,o,"signInViaPopup",e,r,!!i,t.R())}).then(function(){return new Ve(function(e,n){t.ja("signInViaPopup",null,new Gr("cancelled-popup-request"),t.g),t.f=e,t.v=n,t.g=r,t.c=ac(t.a,t,"signInViaPopup",o,r)})}).then(function(e){return o&&Zn(o),e?Fr(e):null}).s(function(e){throw o&&Zn(o),e}))},e.Mc=function(e){if(!gr())return Xe(new Gr("operation-not-supported-in-this-environment"));var t=this;return Tl(this,dl(this).then(function(){return ll(e=t.h,function(){return e.b.set(ol,e.c.C,e.a)});var e}).then(function(){return oc(t.a,"signInViaRedirect",e,void 0,t.R())}))},e.oa=function(){var e=this;return ml(this).then(function(t){return e.a&&hc(e.a.b),t}).s(function(t){throw e.a&&hc(e.a.b),t})},e.Rc=function(e){if(!e)return Xe(new Gr("null-user"));if(this.P!=e.tenantId)return Xe(new Gr("tenant-id-mismatch"));var t=this,n={};n.apiKey=bl(this).options.apiKey,n.authDomain=bl(this).options.authDomain,n.appName=bl(this).name;var r=function(e,t,n,r){t=t||{apiKey:e.l,authDomain:e.o,appName:e.m};var i=e.b,o={};return o[Aa]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-S())/1e3,t=new kc(t,o),n&&(t.da=n),r&&xc(t,r),Wc(t,e),t}(e,n,t.w,t.Aa());return Tl(this,this.i.then(function(){if(bl(t).options.apiKey!=e.l)return r.reload()}).then(function(){return wl(t)&&e.uid==wl(t).uid?(Wc(wl(t),e),t.aa(e)):(gl(t,r),Mc(r),t.aa(r))}).then(function(){El(t)}))},e.pb=function(){var e=this,t=this.i.then(function(){return e.a&&hc(e.a.b),wl(e)?(gl(e,null),ul(e.h).then(function(){El(e)})):Ye()});return Tl(this,t)},e.Nc=function(){var e=this;return cl(this.h,bl(this).options.authDomain).then(function(t){if(!e.l){var n;if(n=wl(e)&&t){n=wl(e).uid;var r=t.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Wc(wl(e),t),wl(e).G();(wl(e)||t)&&(gl(e,t),t&&(Mc(t),t.da=e.w),e.a&&Zu(e.a,e),El(e))}})},e.aa=function(e){return sl(this.h,e)},e.bc=function(){El(this),this.aa(wl(this))},e.mc=function(){this.pb()},e.nc=function(){this.pb()},e.oc=function(e){var t=this;this.addAuthTokenListener(function(){e.next(wl(t))})},e.pc=function(e){var t=this;!function(e,t){e.J.push(t),Tl(e,e.i.then(function(){!e.l&&q(e.J,t)&&e.W!==e.getUid()&&(e.W=e.getUid(),t(_l(e)))}))}(this,function(){e.next(wl(t))})},e.xc=function(e,t,n){var r=this;return this.ga&&Promise.resolve().then(function(){y(e)?e(wl(r)):y(e.next)&&e.next(wl(r))}),this.Ub(e,t,n)},e.wc=function(e,t,n){var r=this;return this.ga&&Promise.resolve().then(function(){r.W=r.getUid(),y(e)?e(wl(r)):y(e.next)&&e.next(wl(r))}),this.Vb(e,t,n)},e.cc=function(e){var t=this,n=this.i.then(function(){return wl(t)?wl(t).G(e).then(function(e){return{accessToken:e}}):null});return Tl(this,n)},e.Hc=function(e){var t=this;return this.i.then(function(){return vl(t,Cs(t.b,ws,{token:e}))}).then(function(e){var n=e.user;return Vc(n,"isAnonymous",!1),t.aa(n),e})},e.Ic=function(e,t){var n=this;return this.i.then(function(){return vl(n,Cs(n.b,_s,{email:e,password:t}))})},e.Xb=function(e,t){var n=this;return this.i.then(function(){return vl(n,Cs(n.b,es,{email:e,password:t}))})},e.Ra=function(e){var t=this;return this.i.then(function(){return vl(t,e.na(t.b))})},e.Gc=function(e){return Rr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ra(e)},e.ob=function(){var e=this;return this.i.then(function(){var t=wl(e);return t&&t.isAnonymous?Fr({user:t,credential:null,additionalUserInfo:Fr({providerId:null,isNewUser:!1}),operationType:"signIn"}):vl(e,e.b.ob()).then(function(t){var n=t.user;return Vc(n,"isAnonymous",!0),e.aa(n),t})})},e.getUid=function(){return wl(this)&&wl(this).uid||null},e.Wb=function(e){this.addAuthTokenListener(e),this.o++,0<this.o&&wl(this)&&Oc(wl(this))},e.Ec=function(e){var t=this;F(this.m,function(n){n==e&&t.o--}),this.o<0&&(this.o=0),0==this.o&&wl(this)&&Dc(wl(this)),this.removeAuthTokenListener(e)},e.addAuthTokenListener=function(e){var t=this;this.m.push(e),Tl(this,this.i.then(function(){t.l||q(t.m,e)&&e(_l(t))}))},e.removeAuthTokenListener=function(e){V(this.m,function(t){return t==e})},e.delete=function(){this.l=!0;for(var e=0;e<this.O.length;e++)this.O[e].cancel("app-deleted");return this.O=[],this.h&&(e=this.h).b.removeListener(al("local"),e.a,this.ma),this.a&&(ec(this.a,this),hc(this.a.b)),Promise.resolve()},e.$b=function(e){return Tl(this,function(e,t){return Cs(e,ts,{identifier:t,continueUri:vr()?Xn():"http://localhost"}).then(function(e){return e.signinMethods||[]})}(this.b,e))},e.qc=function(e){return!!co(e)},e.lb=function(e,t){var n=this;return Tl(this,Ye().then(function(){var e=new si(t);if(!e.c)throw new Gr("argument-error",li+" must be true when sending sign in link to email");return gi(e)}).then(function(t){return n.b.lb(e,t)}).then(function(){}))},e.Uc=function(e){return this.Ka(e).then(function(e){return e.data.email})},e.$a=function(e,t){return Tl(this,this.b.$a(e,t).then(function(){}))},e.Ka=function(e){return Tl(this,this.b.Ka(e).then(function(e){return new jr(e)}))},e.Xa=function(e){return Tl(this,this.b.Xa(e).then(function(){}))},e.kb=function(e,t){var n=this;return Tl(this,Ye().then(function(){return void 0===t||K(t)?{}:gi(new si(t))}).then(function(t){return n.b.kb(e,t)}).then(function(){}))},e.Kc=function(e,t){return Tl(this,gc(this,e,t,E(this.Ra,this)))},e.Jc=function(e,t){var n=this;return Tl(this,Ye().then(function(){var r=t||Xn(),i=uo(e,r);if(!(r=co(r)))throw new Gr("argument-error","Invalid email link!");if(r.tenantId!==n.R())throw new Gr("tenant-id-mismatch");return n.Ra(i)}))},Sl.prototype.render=function(){},Sl.prototype.reset=function(){},Sl.prototype.getResponse=function(){},Sl.prototype.execute=function(){};var kl=null;function Il(e,t){return(t=xl(t))&&e.a[t]||null}function xl(e){return(e=void 0===e?1e12:e)?e.toString():null}function Nl(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=qn(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():zt(this.f,"click",this.i)}function Al(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function Ol(){}Cl.prototype.render=function(e,t){return this.a[this.b.toString()]=new Nl(e,t),this.b++},Cl.prototype.reset=function(e){var t=Il(this,e);e=xl(e),t&&e&&(t.delete(),delete this.a[e])},Cl.prototype.getResponse=function(e){return(e=Il(this,e))?e.getResponse():null},Cl.prototype.execute=function(e){(e=Il(this,e))&&e.execute()},Nl.prototype.getResponse=function(){return Al(this),this.b},Nl.prototype.execute=function(){Al(this);var e=this;this.a||(this.a=setTimeout(function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(t){}e.a=setTimeout(function(){if(e.a=null,e.b=null,n)try{n()}catch(t){}e.h&&e.execute()},6e4)},500))},Nl.prototype.delete=function(){Al(this),this.g=!0,clearTimeout(this.a),this.a=null,Qt(this.f,"click",this.i)},Ol.prototype.g=function(){return Ye(kl=kl||new Cl)},Ol.prototype.c=function(){};var Dl=null;function Rl(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Pl=new X(Z,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ml=new Ir(3e4,6e4);Rl.prototype.g=function(e){var t=this;return new Ve(function(n,r){var i=setTimeout(function(){r(new Gr("network-request-failed"))},Ml.get());!a.grecaptcha||e!==t.f&&!t.b?(a[t.a]=function(){if(a.grecaptcha){t.f=e;var o=a.grecaptcha.render;a.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new Gr("internal-error"));delete a[t.a]},Ye(_a(re(Pl,{onload:t.a,hl:e||""}))).s(function(){clearTimeout(i),r(new Gr("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(i),n(a.grecaptcha))})},Rl.prototype.c=function(){this.b--};var Ll=null;function Fl(e,t,n,r,i,o,s){if(Mr(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.u=t,this.g=null,s=s?Dl=Dl||new Ol:Ll=Ll||new Rl,this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[ql])throw new Gr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Bl],!a.document)throw new Gr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!qn(t)||!this.i&&qn(t).hasChildNodes())throw new Gr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new xa(e,o||null,i||null),this.v=r||function(){return null};var u=this;this.l=[];var c=this.a[Ul];this.a[Ul]=function(e){if(Vl(u,e),"function"==typeof c)c(e);else if("string"==typeof c){var t=mr(c,a);"function"==typeof t&&t(e)}};var l=this.a[jl];this.a[jl]=function(){if(Vl(u,null),"function"==typeof l)l();else if("string"==typeof l){var e=mr(l,a);"function"==typeof e&&e()}}}var Ul="callback",jl="expired-callback",ql="sitekey",Bl="size";function Vl(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(e){}}function Wl(e,t){return e.h.push(t),t.ka(function(){B(e.h,t)}),t}function zl(e){if(e.B)throw new Gr("internal-error","RecaptchaVerifier instance has been destroyed.")}function Hl(e,t,n){var r=!1;try{this.b=n||Vo.app()}catch(e){throw new Gr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Gr("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Aa()}catch(e){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(e){}o=Vo.SDK_VERSION?pr(Vo.SDK_VERSION,o):null,Fl.call(this,n,e,t,function(){try{var t=i.b.auth().ha()}catch(e){t=null}return t},o,Ci(Ti),r)}function Kl(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new Gr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].N(n[i])&&!o){if(t=t[i],i<0||i>=Ql.length)throw new Gr("internal-error","Argument validator received an unsupported number of arguments.");n=Ql[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.M+".";break e}r=null}}if(r)throw new Gr("argument-error",e+" failed: "+r)}(e=Fl.prototype).Ba=function(){var e=this;return this.f?this.f:this.f=Wl(this,Ye().then(function(){if(vr()&&!ar())return rr();throw new Gr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.v())}).then(function(t){return e.g=t,Cs(e.o,hs,{})}).then(function(t){e.a[ql]=t.recaptchaSiteKey}).s(function(t){throw e.f=null,t}))},e.render=function(){zl(this);var e=this;return Wl(this,this.Ba().then(function(){if(null===e.c){var t=e.u;if(!e.i){var n=qn(t);t=function(e,t,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!jn&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Le(a.name),'"'),a.type){o.push(' type="',Le(a.type),'"');var u={};Y(u,a),delete u.type,a=u}o.push(">"),o=o.join("")}return o=i.createElement(o),a&&(s(a)?o.className=a:d(a)?o.className=a.join(" "):Bn(o,a)),2<r.length&&function(e,t,n){function r(n){n&&t.appendChild(s(n)?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!m(o)||g(o)&&0<o.nodeType?r(o):F(Wn(o)?z(o):o,r)}}(i,o,r),o}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c}))},e.verify=function(){zl(this);var e=this;return Wl(this,this.render().then(function(t){return new Ve(function(n){var r=e.g.getResponse(t);r?n(r):(e.l.push(function t(r){r&&(function(e,t){V(e.l,function(e){return e==t})}(e,t),n(r))}),e.i&&e.g.execute(e.c))})}))},e.reset=function(){zl(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){zl(this),this.B=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=qn(this.u);for(var t;t=e.firstChild;)e.removeChild(t)}},C(Hl,Fl);var Ql="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Gl(e,t){return{name:e||"",M:"a valid string",optional:!!t,N:s}}function Yl(e,t){return{name:e||"",M:"a boolean",optional:!!t,N:u}}function Xl(e,t){return{name:e||"",M:"a valid object",optional:!!t,N:g}}function $l(e,t){return{name:e||"",M:"a function",optional:!!t,N:y}}function Jl(e,t){return{name:e||"",M:"null",optional:!!t,N:p}}function Zl(e){return{name:e?e+"Credential":"credential",M:e?"a valid "+e+" credential":"a valid credential",optional:!1,N:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.na||!n)}}}function eh(){return{name:"applicationVerifier",M:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,N:function(e){return!!(e&&s(e.type)&&y(e.verify))}}}function th(e,t,n,r){return{name:n||"",M:e.M+" or "+t.M,optional:!!r,N:function(n){return e.N(n)||t.N(n)}}}function nh(e,t){for(var n in t){var r=t[n].name;e[r]=oh(r,e[n],t[n].j)}}function rh(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:T(function(e){return this[e]},n),set:T(function(e,t,n,r){Kl(e,[n],[r],!0),this[t]=r},r,n,t[n].Ya),enumerable:!0})}}function ih(e,t,n,r){e[t]=oh(t,n,r)}function oh(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Kl(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=function(e){return(e=e.split("."))[e.length-1]}(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}nh(hl.prototype,{Xa:{name:"applyActionCode",j:[Gl("code")]},Ka:{name:"checkActionCode",j:[Gl("code")]},$a:{name:"confirmPasswordReset",j:[Gl("code"),Gl("newPassword")]},Xb:{name:"createUserWithEmailAndPassword",j:[Gl("email"),Gl("password")]},$b:{name:"fetchSignInMethodsForEmail",j:[Gl("email")]},oa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[Gl("emailLink")]},wc:{name:"onAuthStateChanged",j:[th(Xl(),$l(),"nextOrObserver"),$l("opt_error",!0),$l("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[th(Xl(),$l(),"nextOrObserver"),$l("opt_error",!0),$l("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[Gl("email"),th(Xl("opt_actionCodeSettings",!0),Jl(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[Gl("email"),Xl("actionCodeSettings")]},mb:{name:"setPersistence",j:[Gl("persistence")]},Gc:{name:"signInAndRetrieveDataWithCredential",j:[Zl()]},ob:{name:"signInAnonymously",j:[]},Ra:{name:"signInWithCredential",j:[Zl()]},Hc:{name:"signInWithCustomToken",j:[Gl("token")]},Ic:{name:"signInWithEmailAndPassword",j:[Gl("email"),Gl("password")]},Jc:{name:"signInWithEmailLink",j:[Gl("email"),Gl("emailLink",!0)]},Kc:{name:"signInWithPhoneNumber",j:[Gl("phoneNumber"),eh()]},Lc:{name:"signInWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"signInWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Rc:{name:"updateCurrentUser",j:[th({name:"user",M:"an instance of Firebase User",optional:!1,N:function(e){return!!(e&&e instanceof kc)}},Jl(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Gl(null,!0)]},Tc:{name:"useDeviceLanguage",j:[]},Uc:{name:"verifyPasswordResetCode",j:[Gl("code")]}}),rh(hl.prototype,{lc:{name:"languageCode",Ya:th(Gl(),Jl(),"languageCode")},ti:{name:"tenantId",Ya:th(Gl(),Jl(),"tenantId")}}),(hl.Persistence=bu).LOCAL="local",hl.Persistence.SESSION="session",hl.Persistence.NONE="none",nh(kc.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[Yl("opt_forceRefresh",!0)]},G:{name:"getIdToken",j:[Yl("opt_forceRefresh",!0)]},rc:{name:"linkAndRetrieveDataWithCredential",j:[Zl()]},eb:{name:"linkWithCredential",j:[Zl()]},sc:{name:"linkWithPhoneNumber",j:[Gl("phoneNumber"),eh()]},tc:{name:"linkWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},uc:{name:"linkWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Ac:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Zl()]},gb:{name:"reauthenticateWithCredential",j:[Zl()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[Gl("phoneNumber"),eh()]},Cc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[th(Xl("opt_actionCodeSettings",!0),Jl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Gl(null,!0)]},Qc:{name:"unlink",j:[Gl("provider")]},rb:{name:"updateEmail",j:[Gl("email")]},sb:{name:"updatePassword",j:[Gl("password")]},Sc:{name:"updatePhoneNumber",j:[Zl("phone")]},tb:{name:"updateProfile",j:[Xl("profile")]}}),nh(Cl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),nh(Sl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),nh(Ve.prototype,{ka:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),rh(mc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",Ya:Yl("appVerificationDisabledForTesting")}}),nh(yc.prototype,{confirm:{name:"confirm",j:[Gl("verificationCode")]}}),ih(qi,"fromJSON",function(e){e=s(e)?JSON.parse(e):e;for(var t,n=[Qi,ao,ho,zi],r=0;r<n.length;r++)if(t=n[r](e))return t;return null},[th(Gl(),Xl(),"json")]),ih(so,"credential",function(e,t){return new oo(e,t)},[Gl("email"),Gl("password")]),nh(oo.prototype,{A:{name:"toJSON",j:[Gl(null,!0)]}}),nh($i.prototype,{wa:{name:"addScope",j:[Gl("scope")]},Ea:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),ih($i,"credential",Ji,[th(Gl(),Xl(),"token")]),ih(so,"credentialWithLink",uo,[Gl("email"),Gl("emailLink")]),nh(Zi.prototype,{wa:{name:"addScope",j:[Gl("scope")]},Ea:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),ih(Zi,"credential",eo,[th(Gl(),Xl(),"token")]),nh(to.prototype,{wa:{name:"addScope",j:[Gl("scope")]},Ea:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),ih(to,"credential",no,[th(Gl(),th(Xl(),Jl()),"idToken"),th(Gl(),Jl(),"accessToken",!0)]),nh(ro.prototype,{Ea:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),ih(ro,"credential",io,[th(Gl(),Xl(),"token"),Gl("secret",!0)]),nh(Xi.prototype,{wa:{name:"addScope",j:[Gl("scope")]},credential:{name:"credential",j:[th(Gl(),th(Xl(),Jl()),"optionsOrIdToken"),th(Gl(),Jl(),"accessToken",!0)]},Ea:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),nh(Hi.prototype,{A:{name:"toJSON",j:[Gl(null,!0)]}}),nh(Vi.prototype,{A:{name:"toJSON",j:[Gl(null,!0)]}}),ih(po,"credential",mo,[Gl("verificationId"),Gl("verificationCode")]),nh(po.prototype,{Va:{name:"verifyPhoneNumber",j:[Gl("phoneNumber"),eh()]}}),nh(lo.prototype,{A:{name:"toJSON",j:[Gl(null,!0)]}}),nh(Gr.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),nh(So.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),nh(To.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),nh(Hl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),ih(Jr,"parseLink",ai,[Gl("link")]),function(){if(void 0===Vo||!Vo.INTERNAL||!Vo.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:qr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:hl,AuthCredential:qi,Error:Gr};ih(e,"EmailAuthProvider",so,[]),ih(e,"FacebookAuthProvider",$i,[]),ih(e,"GithubAuthProvider",Zi,[]),ih(e,"GoogleAuthProvider",to,[]),ih(e,"TwitterAuthProvider",ro,[]),ih(e,"OAuthProvider",Xi,[Gl("providerId")]),ih(e,"SAMLAuthProvider",Yi,[Gl("providerId")]),ih(e,"PhoneAuthProvider",po,[{name:"auth",M:"an instance of Firebase Auth",optional:!0,N:function(e){return!!(e&&e instanceof hl)}}]),ih(e,"RecaptchaVerifier",Hl,[th(Gl(),{name:"",M:"an HTML element",optional:!1,N:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),Xl("recaptchaParameters",!0),{name:"app",M:"an instance of Firebase App",optional:!0,N:function(e){return!!(e&&e instanceof Vo.app.App)}}]),ih(e,"ActionCodeURL",Jr,[]),Vo.INTERNAL.registerService("auth",function(e,t){return t({INTERNAL:{getUid:E((e=new hl(e)).getUid,e),getToken:E(e.cc,e),addAuthTokenListener:E(e.Wb,e),removeAuthTokenListener:E(e.Ec,e)}}),e},e,function(e,t){if("create"===e)try{t.auth()}catch(e){}}),Vo.INTERNAL.extendNamespace({User:kc})}()}).apply("undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Wo=(zo.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),so(t))},zo.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ao(t)},zo.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},zo.prototype.prefixedName_=function(e){return this.prefix_+e},zo.prototype.toString=function(){return this.domStorage_.toString()},zo);function zo(e){this.domStorage_=e,this.prefix_="firebase:"}var Ho=(Ko.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},Ko.prototype.get=function(e){return co(this.cache_,e)?this.cache_[e]:null},Ko.prototype.remove=function(e){delete this.cache_[e]},Ko);function Ko(){this.cache_={},this.isInMemoryStorage=!0}function Qo(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Wo(t)}}catch(e){}return new Ho}function Go(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(55296<=i&&i<=56319){var o=i-55296;Wi(++r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t}(e),n=new po;n.update(t);var r=n.digest();return Hi.encodeByteArray(r)}function Yo(e,t){Wi(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(ua.logLevel=go.VERBOSE,fa=ua.log.bind(ua),t&&sa.set("logging_enabled",!0)):"function"==typeof e?fa=e:(fa=null,sa.remove("logging_enabled"))}function Xo(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===pa&&(pa=!1,null===fa&&!0===sa.get("logging_enabled")&&Yo(!0)),fa){var n=ha.apply(null,e);fa(n)}}function $o(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Xo.apply(void 0,ji([e],t))}}function Jo(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+ha.apply(void 0,ji(e));ua.error(n)}function Zo(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+ha.apply(void 0,ji(e));throw ua.error(n),new Error(n)}function ea(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+ha.apply(void 0,ji(e));ua.warn(n)}function ta(e){return"number"==typeof e&&(e!=e||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY)}function na(e,t){return e===t?0:e<t?-1:1}function ra(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+so(t))}function ia(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)n<i+t?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r}var oa,aa=Qo("localStorage"),sa=Qo("sessionStorage"),ua=new Ao("@firebase/database"),ca="FIREBASE_DATABASE_EMULATOR_HOST",la=(oa=1,function(){return oa++}),ha=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r="",i=0;i<t.length;i++)Array.isArray(t[i])||t[i]&&"object"==typeof t[i]&&"number"==typeof t[i].length?r+=e.apply(null,t[i]):"object"==typeof t[i]?r+=so(t[i]):r+=t[i],r+=" ";return r},fa=null,pa=!0,da="[MIN_NAME]",ma="[MAX_NAME]",ya=function(e,t){if(e===t)return 0;if(e===da||t===ma)return-1;if(t===da||e===ma)return 1;var n=Ta(e),r=Ta(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},ga=function e(t){if("object"!=typeof t||null===t)return so(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",o=0;o<n.length;o++)0!==o&&(i+=","),i+=so(n[o]),i+=":",i+=e(t[n[o]]);return i+="}"};function va(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function ba(e){var t,n,r,i,o,a,s;for(Wi(!ta(e),"Invalid JSON number"),0===e?t=1/e==-1/(r=n=0)?1:0:(t=e<0,r=(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(e/Math.pow(2,-1074)))),a=[],o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(t?1:0),a.reverse(),s=a.join("");var u="";for(o=0;o<64;o+=8){var c=parseInt(s.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function wa(e){try{e()}catch(i){setTimeout(function(){var t=i.stack||"";throw ea("Exception was thrown by user callback.",t),i},Math.floor(0))}}function _a(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n}var Ea=new RegExp("^-?\\d{1,10}$"),Ta=function(e){if(Ea.test(e)){var t=Number(e);if(-2147483648<=t&&t<=2147483647)return t}return null},Sa=(Object.defineProperty(Ca,"Empty",{get:function(){return new Ca("")},enumerable:!0,configurable:!0}),Ca.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},Ca.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},Ca.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new Ca(this.pieces_,e)},Ca.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},Ca.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},Ca.prototype.toUrlEncodedString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+encodeURIComponent(String(this.pieces_[t])));return e||"/"},Ca.prototype.slice=function(e){return void 0===e&&(e=0),this.pieces_.slice(this.pieceNum_+e)},Ca.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],t=this.pieceNum_;t<this.pieces_.length-1;t++)e.push(this.pieces_[t]);return new Ca(e,0)},Ca.prototype.child=function(e){for(var t=[],n=this.pieceNum_;n<this.pieces_.length;n++)t.push(this.pieces_[n]);if(e instanceof Ca)for(n=e.pieceNum_;n<e.pieces_.length;n++)t.push(e.pieces_[n]);else{var r=e.split("/");for(n=0;n<r.length;n++)0<r[n].length&&t.push(r[n])}return new Ca(t,0)},Ca.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},Ca.relativePath=function(e,t){var n=e.getFront(),r=t.getFront();if(null===n)return t;if(n===r)return Ca.relativePath(e.popFront(),t.popFront());throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")},Ca.comparePaths=function(e,t){for(var n=e.slice(),r=t.slice(),i=0;i<n.length&&i<r.length;i++){var o=ya(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},Ca.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1;for(var t=this.pieceNum_,n=e.pieceNum_;t<=this.pieces_.length;t++,n++)if(this.pieces_[t]!==e.pieces_[n])return!1;return!0},Ca.prototype.contains=function(e){var t=this.pieceNum_,n=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0},Ca);function Ca(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}var ka=(Object.defineProperty(Ia,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(Ia,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),Ia.prototype.push=function(e){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=ko(e),this.checkValid_()},Ia.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=ko(e),0<this.parts_.length&&(this.byteLength_-=1)},Ia.prototype.checkValid_=function(){if(this.byteLength_>Ia.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+Ia.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>Ia.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ia.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},Ia.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},Ia);function Ia(e,t){this.errorPrefix_=t,this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=ko(this.parts_[n]);this.checkValid_()}var xa="firebaseio.com",Na="websocket",Aa="long_polling",Oa=(Da.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},Da.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Da.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},Da.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},Da.prototype.updateHost=function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&aa.set("host:"+this.host,this.internalHost))},Da.prototype.connectionURL=function(e,t){var n;if(Wi("string"==typeof e,"typeof type must == string"),Wi("object"==typeof t,"typeof params must == object"),e===Na)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(e!==Aa)throw new Error("Unknown connection type: "+e);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(t.ns=this.namespace);var r=[];return va(t,function(e,t){r.push(e+"="+t)}),n+r.join("&")},Da.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},Da.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},Da);function Da(e,t,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=aa.get("host:"+e)||this.host}function Ra(e){var t=Ha(e),n=t.namespace;"firebase"===t.domain&&Zo(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||"localhost"===t.domain||Zo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ea("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===t.scheme||"wss"===t.scheme;return{repoInfo:new Oa(t.host,t.secure,n,r,"",n!=t.subdomain),path:new Sa(t.pathString)}}function Pa(e){return"string"==typeof e&&0!==e.length&&!Ka.test(e)}function Ma(e){return"string"==typeof e&&0!==e.length&&!Qa.test(e)}function La(e){return null===e||"string"==typeof e||"number"==typeof e&&!ta(e)||e&&"object"==typeof e&&co(e,".sv")}function Fa(e,t,n,r,i){i&&void 0===n||Ya(To(e,t,i),n,r)}function Ua(e,t,n,r,i){if(!i||void 0!==n){var o=To(e,t,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];va(n,function(e,t){var n=new Sa(e);if(Ya(o,t,r.child(n)),".priority"===n.getBack()&&!La(t))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=(r=t[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Pa(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(Sa.comparePaths);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&a.contains(r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(o,a)}}function ja(e,t,n,r){if(!r||void 0!==n){if(ta(n))throw new Error(To(e,t,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!La(n))throw new Error(To(e,t,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function qa(e,t,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(To(e,t,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Ba(e,t,n,r){if(!(r&&void 0===n||Pa(n)))throw new Error(To(e,t,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function Va(e,t,n,r){if(!(r&&void 0===n||Ma(n)))throw new Error(To(e,t,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function Wa(e,t){if(".info"===t.getFront())throw new Error(e+" failed = Can't modify data under /.info/")}function za(e,t,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Pa(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(e){return Ma(e=e&&e.replace(/^\/*\.info(\/|$)/,"/"))}(r))throw new Error(To(e,t,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var Ha=function(e){var t="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"==typeof e){var c=e.indexOf("//");0<=c&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(e){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t,n,r={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var i=Fi(e.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var s=a.split("=");2===s.length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):ea("Invalid query segment '"+a+"' in query '"+e+"'")}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e.substring(Math.min(e.length,h)));0<=(c=t.indexOf(":"))?(a="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=e.length;var p=t.split(".");3===p.length?(n=p[1],o=r=p[0].toLowerCase()):2===p.length?n=p[0]:"localhost"===p[0].slice(0,c).toLowerCase()&&(n="localhost"),"ns"in f&&(o=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},Ka=/[\[\].#$\/\u0000-\u001F\u007F]/,Qa=/[\[\].#$\u0000-\u001F\u007F]/,Ga=10485760,Ya=function e(t,n,r){var i=r instanceof Sa?new ka(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+i.toErrorString());if("function"==typeof n)throw new Error(t+"contains a function "+i.toErrorString()+" with contents = "+n.toString());if(ta(n))throw new Error(t+"contains "+n.toString()+" "+i.toErrorString());if("string"==typeof n&&n.length>Ga/3&&ko(n)>Ga)throw new Error(t+"contains a string greater than "+Ga+" utf8 bytes "+i.toErrorString()+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var o=!1,a=!1;if(va(n,function(n,r){if(".value"===n)o=!0;else if(".priority"!==n&&".sv"!==n&&(a=!0,!Pa(n)))throw new Error(t+" contains an invalid key ("+n+") "+i.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(n),e(t,r,i),i.pop()}),o&&a)throw new Error(t+' contains ".value" child '+i.toErrorString()+" in addition to actual children.")}},Xa=($a.prototype.cancel=function(e){Eo("OnDisconnect.cancel",0,1,arguments.length),So("OnDisconnect.cancel",1,e,!0);var t=new Gi;return this.repo_.onDisconnectCancel(this.path_,t.wrapCallback(e)),t.promise},$a.prototype.remove=function(e){Eo("OnDisconnect.remove",0,1,arguments.length),Wa("OnDisconnect.remove",this.path_),So("OnDisconnect.remove",1,e,!0);var t=new Gi;return this.repo_.onDisconnectSet(this.path_,null,t.wrapCallback(e)),t.promise},$a.prototype.set=function(e,t){Eo("OnDisconnect.set",1,2,arguments.length),Wa("OnDisconnect.set",this.path_),Fa("OnDisconnect.set",1,e,this.path_,!1),So("OnDisconnect.set",2,t,!0);var n=new Gi;return this.repo_.onDisconnectSet(this.path_,e,n.wrapCallback(t)),n.promise},$a.prototype.setWithPriority=function(e,t,n){Eo("OnDisconnect.setWithPriority",2,3,arguments.length),Wa("OnDisconnect.setWithPriority",this.path_),Fa("OnDisconnect.setWithPriority",1,e,this.path_,!1),ja("OnDisconnect.setWithPriority",2,t,!1),So("OnDisconnect.setWithPriority",3,n,!0);var r=new Gi;return this.repo_.onDisconnectSetWithPriority(this.path_,e,t,r.wrapCallback(n)),r.promise},$a.prototype.update=function(e,t){if(Eo("OnDisconnect.update",1,2,arguments.length),Wa("OnDisconnect.update",this.path_),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,ea("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ua("OnDisconnect.update",1,e,this.path_,!1),So("OnDisconnect.update",2,t,!0);var i=new Gi;return this.repo_.onDisconnectUpdate(this.path_,e,i.wrapCallback(t)),i.promise},$a);function $a(e,t){this.repo_=e,this.path_=t}var Ja=(Za.prototype.toJSON=function(){return Eo("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},Za);function Za(e,t){this.committed=e,this.snapshot=t}var es,ts,ns,rs=(es="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ts=0,ns=[],function(e){var t,n=e===ts;ts=e;var r=new Array(8);for(t=7;0<=t;t--)r[t]=es.charAt(e%64),e=Math.floor(e/64);Wi(0===e,"Cannot push at time == 0");var i=r.join("");if(n){for(t=11;0<=t&&63===ns[t];t--)ns[t]=0;ns[t]++}else for(t=0;t<12;t++)ns[t]=Math.floor(64*Math.random());for(t=0;t<12;t++)i+=es.charAt(ns[t]);return Wi(20===i.length,"nextPushId: Length should be 20."),i}),is=(os.Wrap=function(e,t){return new os(e,t)},os);function os(e,t){this.name=e,this.node=t}var as,ss=(us.prototype.getCompare=function(){return this.compare.bind(this)},us.prototype.indexedValueChanged=function(e,t){var n=new is(da,e),r=new is(da,t);return 0!==this.compare(n,r)},us.prototype.minPost=function(){return is.MIN},us);function us(){}var cs,ls=(Ri(hs,cs=ss),Object.defineProperty(hs,"__EMPTY_NODE",{get:function(){return as},set:function(e){as=e},enumerable:!0,configurable:!0}),hs.prototype.compare=function(e,t){return ya(e.name,t.name)},hs.prototype.isDefinedOn=function(e){throw zi("KeyIndex.isDefinedOn not expected to be called.")},hs.prototype.indexedValueChanged=function(e,t){return!1},hs.prototype.minPost=function(){return is.MIN},hs.prototype.maxPost=function(){return new is(ma,as)},hs.prototype.makePost=function(e,t){return Wi("string"==typeof e,"KeyIndex indexValue must always be a string."),new is(e,as)},hs.prototype.toString=function(){return".key"},hs);function hs(){return null!==cs&&cs.apply(this,arguments)||this}var fs,ps=new ls;function ds(e){return"number"==typeof e?"number:"+ba(e):"string:"+e}function ms(e){if(e.isLeafNode()){var t=e.val();Wi("string"==typeof t||"number"==typeof t||"object"==typeof t&&co(t,".sv"),"Priority must be a string or number.")}else Wi(e===fs||e.isEmpty(),"priority of unexpected type.");Wi(e===fs||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")}var ys,gs,vs,bs,ws=(Object.defineProperty(_s,"__childrenNodeConstructor",{get:function(){return ys},set:function(e){ys=e},enumerable:!0,configurable:!0}),_s.prototype.isLeafNode=function(){return!0},_s.prototype.getPriority=function(){return this.priorityNode_},_s.prototype.updatePriority=function(e){return new _s(this.value_,e)},_s.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:_s.__childrenNodeConstructor.EMPTY_NODE},_s.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:_s.__childrenNodeConstructor.EMPTY_NODE},_s.prototype.hasChild=function(){return!1},_s.prototype.getPredecessorChildName=function(e,t){return null},_s.prototype.updateImmediateChild=function(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:_s.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)},_s.prototype.updateChild=function(e,t){var n=e.getFront();return null===n?t:t.isEmpty()&&".priority"!==n?this:(Wi(".priority"!==n||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,_s.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),t)))},_s.prototype.isEmpty=function(){return!1},_s.prototype.numChildren=function(){return 0},_s.prototype.forEachChild=function(e,t){return!1},_s.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},_s.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+ds(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"==t?ba(this.value_):this.value_,this.lazyHash_=Go(e)}return this.lazyHash_},_s.prototype.getValue=function(){return this.value_},_s.prototype.compareTo=function(e){return e===_s.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof _s.__childrenNodeConstructor?-1:(Wi(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},_s.prototype.compareToLeafNode_=function(e){var t=typeof e.value_,n=typeof this.value_,r=_s.VALUE_TYPE_ORDER.indexOf(t),i=_s.VALUE_TYPE_ORDER.indexOf(n);return Wi(0<=r,"Unknown leaf type: "+t),Wi(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r},_s.prototype.withIndex=function(){return this},_s.prototype.isIndexed=function(){return!0},_s.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},_s.VALUE_TYPE_ORDER=["object","boolean","number","string"],_s);function _s(e,t){void 0===t&&(t=_s.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Wi(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ms(this.priorityNode_)}function Es(){return null!==bs&&bs.apply(this,arguments)||this}var Ts=new(Ri(Es,bs=ss),Es.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?ya(e.name,t.name):i},Es.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},Es.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},Es.prototype.minPost=function(){return is.MIN},Es.prototype.maxPost=function(){return new is(ma,new ws("[PRIORITY-POST]",vs))},Es.prototype.makePost=function(e,t){var n=gs(e);return new is(t,new ws("[PRIORITY-POST]",n))},Es.prototype.toString=function(){return".priority"},Es),Ss=(Cs.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},Cs.prototype.hasNext=function(){return 0<this.nodeStack_.length},Cs.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},Cs);function Cs(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}var ks=(Is.prototype.copy=function(e,t,n,r,i){return new Is(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Is.prototype.count=function(){return this.left.count()+1+this.right.count()},Is.prototype.isEmpty=function(){return!1},Is.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},Is.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},Is.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},Is.prototype.minKey=function(){return this.min_().key},Is.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Is.prototype.insert=function(e,t,n){var r,i;return(i=(r=n(e,(i=this).key))<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n))).fixUp_()},Is.prototype.removeMin_=function(){if(this.left.isEmpty())return As.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},Is.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return As.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},Is.prototype.isRed_=function(){return this.color},Is.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},Is.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},Is.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},Is.prototype.rotateLeft_=function(){var e=this.copy(null,null,Is.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},Is.prototype.rotateRight_=function(){var e=this.copy(null,null,Is.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},Is.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},Is.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},Is.prototype.check_=function(){var e;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((e=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},Is.RED=!0,Is.BLACK=!1,Is);function Is(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Is.RED,this.left=null!=r?r:As.EMPTY_NODE,this.right=null!=i?i:As.EMPTY_NODE}var xs=(Ns.prototype.copy=function(e,t,n,r,i){return this},Ns.prototype.insert=function(e,t,n){return new ks(e,t,null)},Ns.prototype.remove=function(e,t){return this},Ns.prototype.count=function(){return 0},Ns.prototype.isEmpty=function(){return!0},Ns.prototype.inorderTraversal=function(e){return!1},Ns.prototype.reverseTraversal=function(e){return!1},Ns.prototype.minKey=function(){return null},Ns.prototype.maxKey=function(){return null},Ns.prototype.check_=function(){return 0},Ns.prototype.isRed_=function(){return!1},Ns);function Ns(){}var As=(Os.prototype.insert=function(e,t){return new Os(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ks.BLACK,null,null))},Os.prototype.remove=function(e){return new Os(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ks.BLACK,null,null))},Os.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:0<t&&(n=n.right)}return null},Os.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:0<t&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},Os.prototype.isEmpty=function(){return this.root_.isEmpty()},Os.prototype.count=function(){return this.root_.count()},Os.prototype.minKey=function(){return this.root_.minKey()},Os.prototype.maxKey=function(){return this.root_.maxKey()},Os.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},Os.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},Os.prototype.getIterator=function(e){return new Ss(this.root_,null,this.comparator_,!1,e)},Os.prototype.getIteratorFrom=function(e,t){return new Ss(this.root_,e,this.comparator_,!1,t)},Os.prototype.getReverseIteratorFrom=function(e,t){return new Ss(this.root_,e,this.comparator_,!0,t)},Os.prototype.getReverseIterator=function(e){return new Ss(this.root_,null,this.comparator_,!0,e)},Os.EMPTY_NODE=new xs,Os);function Os(e,t){void 0===t&&(t=Os.EMPTY_NODE),this.comparator_=e,this.root_=t}var Ds=Math.log(2),Rs=(Ps.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},Ps);function Ps(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Ds,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=e+1&r}var Ms,Ls,Fs=function(e,t,n,r){e.sort(t);var i=function(t){for(var r=null,i=null,o=e.length,a=function(t,r){var i=o-t,a=o;o-=t;var u=function t(r,i){var o,a,s=i-r;if(0==s)return null;if(1==s)return o=e[r],a=n?n(o):o,new ks(a,o.node,ks.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return o=e[u],a=n?n(o):o,new ks(a,o.node,ks.BLACK,c,l)}(1+i,a),c=e[i],l=n?n(c):c;s(new ks(l,c.node,r,null,u))},s=function(e){r=r?r.left=e:i=e},u=0;u<t.count;++u){var c=t.nextBitIsOne(),l=Math.pow(2,t.count-(u+1));c?a(l,ks.BLACK):(a(l,ks.BLACK),a(l,ks.RED))}return i}(new Rs(e.length));return new As(r||t,i)},Us={},js=(Object.defineProperty(qs,"Default",{get:function(){return Wi(Ts,"ChildrenNode.ts has not been loaded"),Ms=Ms||new qs({".priority":Us},{".priority":Ts})},enumerable:!0,configurable:!0}),qs.prototype.get=function(e){var t=lo(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof As?t:null},qs.prototype.hasIndex=function(e){return co(this.indexSet_,e.toString())},qs.prototype.addIndex=function(e,t){Wi(e!==ps,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=t.getIterator(is.Wrap),a=o.getNext();a;)i=i||e.isDefinedOn(a.node),r.push(a),a=o.getNext();n=i?Fs(r,e.getCompare()):Us;var s=e.toString(),u=Pi({},this.indexSet_);u[s]=e;var c=Pi({},this.indexes_);return c[s]=n,new qs(c,u)},qs.prototype.addToIndexes=function(e,t){var n=this;return new qs(fo(this.indexes_,function(r,i){var o=lo(n.indexSet_,i);if(Wi(o,"Missing index implementation for "+i),r===Us){if(o.isDefinedOn(e.node)){for(var a=[],s=t.getIterator(is.Wrap),u=s.getNext();u;)u.name!=e.name&&a.push(u),u=s.getNext();return a.push(e),Fs(a,o.getCompare())}return Us}var c=t.get(e.name),l=r;return c&&(l=l.remove(new is(e.name,c))),l.insert(e,e.node)}),this.indexSet_)},qs.prototype.removeFromIndexes=function(e,t){return new qs(fo(this.indexes_,function(n){if(n===Us)return n;var r=t.get(e.name);return r?n.remove(new is(e.name,r)):n}),this.indexSet_)},qs);function qs(e,t){this.indexes_=e,this.indexSet_=t}function Bs(e,t){return ya(e.name,t.name)}function Vs(e,t){return ya(e,t)}var Ws,zs=(Object.defineProperty(Hs,"EMPTY_NODE",{get:function(){return Ls=Ls||new Hs(new As(Vs),null,js.Default)},enumerable:!0,configurable:!0}),Hs.prototype.isLeafNode=function(){return!1},Hs.prototype.getPriority=function(){return this.priorityNode_||Ls},Hs.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new Hs(this.children_,e,this.indexMap_)},Hs.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Ls:t},Hs.prototype.getChild=function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())},Hs.prototype.hasChild=function(e){return null!==this.children_.get(e)},Hs.prototype.updateImmediateChild=function(e,t){if(Wi(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);var n,r=new is(e,t),i=void 0,o=void 0;return o=t.isEmpty()?(i=this.children_.remove(e),this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,t),this.indexMap_.addToIndexes(r,this.children_)),n=i.isEmpty()?Ls:this.priorityNode_,new Hs(i,n,o)},Hs.prototype.updateChild=function(e,t){var n=e.getFront();if(null===n)return t;Wi(".priority"!==e.getFront()||1===e.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(e.popFront(),t);return this.updateImmediateChild(n,r)},Hs.prototype.isEmpty=function(){return this.children_.isEmpty()},Hs.prototype.numChildren=function(){return this.children_.count()},Hs.prototype.val=function(e){if(this.isEmpty())return null;var t={},n=0,r=0,i=!0;if(this.forEachChild(Ts,function(o,a){t[o]=a.val(e),n++,i&&Hs.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1}),!e&&i&&r<2*n){var o=[];for(var a in t)o[a]=t[a];return o}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t},Hs.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+ds(this.getPriority().val())+":"),this.forEachChild(Ts,function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":Go(e)}return this.lazyHash_},Hs.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new is(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},Hs.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},Hs.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new is(t,this.children_.get(t)):null},Hs.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},Hs.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new is(t,this.children_.get(t)):null},Hs.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal(function(e){return t(e.name,e.node)}):this.children_.inorderTraversal(t)},Hs.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},Hs.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,function(e){return e});for(var r=this.children_.getIteratorFrom(e.name,is.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},Hs.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},Hs.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,function(e){return e});for(var r=this.children_.getReverseIteratorFrom(e.name,is.Wrap),i=r.peek();null!=i&&0<t.compare(i,e);)r.getNext(),i=r.peek();return r},Hs.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Qs?-1:0},Hs.prototype.withIndex=function(e){if(e===ps||this.indexMap_.hasIndex(e))return this;var t=this.indexMap_.addIndex(e,this.children_);return new Hs(this.children_,this.priorityNode_,t)},Hs.prototype.isIndexed=function(e){return e===ps||this.indexMap_.hasIndex(e)},Hs.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()!==t.children_.count())return!1;for(var n=this.getIterator(Ts),r=t.getIterator(Ts),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1},Hs.prototype.resolveIndex_=function(e){return e===ps?null:this.indexMap_.get(e.toString())},Hs.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,Hs);function Hs(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&ms(this.priorityNode_),this.children_.isEmpty()&&Wi(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function Ks(){return Ws.call(this,new As(Vs),zs.EMPTY_NODE,js.Default)||this}var Qs=new(Ri(Ks,Ws=zs),Ks.prototype.compareTo=function(e){return e===this?0:1},Ks.prototype.equals=function(e){return e===this},Ks.prototype.getPriority=function(){return this},Ks.prototype.getImmediateChild=function(e){return zs.EMPTY_NODE},Ks.prototype.isEmpty=function(){return!1},Ks);Object.defineProperties(is,{MIN:{value:new is(da,zs.EMPTY_NODE)},MAX:{value:new is(ma,Qs)}}),ls.__EMPTY_NODE=zs.EMPTY_NODE,ws.__childrenNodeConstructor=zs,fs=Qs,vs=Qs;var Gs,Ys=!0;function Xs(e,t){if(void 0===t&&(t=null),null===e)return zs.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),Wi(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new ws(e,Xs(t));if(e instanceof Array||!Ys){var n=zs.EMPTY_NODE;return va(e,function(t,r){if(co(e,t)&&"."!==t.substring(0,1)){var i=Xs(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}}),n.updatePriority(Xs(t))}var r=[],i=!1;if(va(e,function(e,t){if("."!==e.substring(0,1)){var n=Xs(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new is(e,n)))}}),0==r.length)return zs.EMPTY_NODE;var o=Fs(r,Bs,function(e){return e.name},Vs);if(i){var a=Fs(r,Ts.getCompare());return new zs(o,Xs(t),new js({".priority":a},{".priority":Ts}))}return new zs(o,Xs(t),js.Default)}function $s(){return null!==Gs&&Gs.apply(this,arguments)||this}gs=Xs;var Js,Zs=new(Ri($s,Gs=ss),$s.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?ya(e.name,t.name):n},$s.prototype.isDefinedOn=function(e){return!0},$s.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},$s.prototype.minPost=function(){return is.MIN},$s.prototype.maxPost=function(){return is.MAX},$s.prototype.makePost=function(e,t){var n=Xs(e);return new is(t,n)},$s.prototype.toString=function(){return".value"},$s),eu=(Ri(tu,Js=ss),tu.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},tu.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},tu.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?ya(e.name,t.name):i},tu.prototype.makePost=function(e,t){var n=Xs(e),r=zs.EMPTY_NODE.updateChild(this.indexPath_,n);return new is(t,r)},tu.prototype.maxPost=function(){var e=zs.EMPTY_NODE.updateChild(this.indexPath_,Qs);return new is(ma,e)},tu.prototype.toString=function(){return this.indexPath_.slice().join("/")},tu);function tu(e){var t=Js.call(this)||this;return t.indexPath_=e,Wi(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),t}var nu=(ru.prototype.val=function(){return Eo("DataSnapshot.val",0,0,arguments.length),this.node_.val()},ru.prototype.exportVal=function(){return Eo("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},ru.prototype.toJSON=function(){return Eo("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},ru.prototype.exists=function(){return Eo("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},ru.prototype.child=function(e){Eo("DataSnapshot.child",0,1,arguments.length),Va("DataSnapshot.child",1,e=String(e),!1);var t=new Sa(e),n=this.ref_.child(t);return new ru(this.node_.getChild(t),n,Ts)},ru.prototype.hasChild=function(e){Eo("DataSnapshot.hasChild",1,1,arguments.length),Va("DataSnapshot.hasChild",1,e,!1);var t=new Sa(e);return!this.node_.getChild(t).isEmpty()},ru.prototype.getPriority=function(){return Eo("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},ru.prototype.forEach=function(e){var t=this;return Eo("DataSnapshot.forEach",1,1,arguments.length),So("DataSnapshot.forEach",1,e,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(n,r){return e(new ru(r,t.ref_.child(n),Ts))})},ru.prototype.hasChildren=function(){return Eo("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(ru.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),ru.prototype.numChildren=function(){return Eo("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},ru.prototype.getRef=function(){return Eo("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(ru.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),ru);function ru(e,t,n){this.node_=e,this.ref_=t,this.index_=n}var iu=(ou.prototype.getPath=function(){var e=this.snapshot.getRef();return"value"===this.eventType?e.path:e.getParent().path},ou.prototype.getEventType=function(){return this.eventType},ou.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},ou.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+so(this.snapshot.exportVal())},ou);function ou(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}var au=(su.prototype.getPath=function(){return this.path},su.prototype.getEventType=function(){return"cancel"},su.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},su.prototype.toString=function(){return this.path.toString()+":cancel"},su);function su(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}var uu=(cu.prototype.respondsTo=function(e){return"value"===e},cu.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new iu("value",this,new nu(e.snapshotNode,t.getRef(),n))},cu.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){Wi(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callback_;return function(){r.call(t,e.snapshot)}},cu.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new au(this,e,t):null},cu.prototype.matches=function(e){return e instanceof cu&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},cu.prototype.hasAnyCallback=function(){return null!==this.callback_},cu);function cu(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n}var lu,hu=(fu.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,co(this.callbacks_,t)},fu.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new au(this,e,t):null},fu.prototype.createEvent=function(e,t){Wi(null!=e.childName,"Child events should have a childName.");var n=t.getRef().child(e.childName),r=t.getQueryParams().getIndex();return new iu(e.type,this,new nu(e.snapshotNode,n,r),e.prevName)},fu.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){Wi(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callbacks_[e.eventType];return function(){r.call(t,e.snapshot,e.prevName)}},fu.prototype.matches=function(e){var t=this;if(e instanceof fu){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var n=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),i=n.length;if(i===r.length){if(1!==i)return r.every(function(n){return e.callbacks_[n]===t.callbacks_[n]});var o=n[0],a=r[0];return!(a!==o||e.callbacks_[o]&&this.callbacks_[a]&&e.callbacks_[o]!==this.callbacks_[a])}}}return!1},fu.prototype.hasAnyCallback=function(){return null!==this.callbacks_},fu);function fu(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n}var pu=(Object.defineProperty(du,"__referenceConstructor",{get:function(){return Wi(lu,"Reference.ts has not been loaded"),lu},set:function(e){lu=e},enumerable:!0,configurable:!0}),du.validateQueryEndpoints_=function(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===ps){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!=da)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!=ma)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===Ts){if(null!=t&&!La(t)||null!=n&&!La(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Wi(e.getIndex()instanceof eu||e.getIndex()===Zs,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},du.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},du.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+": You can't combine multiple orderBy calls.")},du.prototype.getQueryParams=function(){return this.queryParams_},du.prototype.getRef=function(){return Eo("Query.ref",0,0,arguments.length),new du.__referenceConstructor(this.repo,this.path)},du.prototype.on=function(e,t,n,r){Eo("Query.on",2,4,arguments.length),qa("Query.on",1,e,!1),So("Query.on",2,t,!1);var i=du.getCancelAndContextArgs_("Query.on",n,r);if("value"===e)this.onValueEvent(t,i.cancel,i.context);else{var o={};o[e]=t,this.onChildEvent(o,i.cancel,i.context)}return t},du.prototype.onValueEvent=function(e,t,n){var r=new uu(e,t||null,n||null);this.repo.addEventCallbackForQuery(this,r)},du.prototype.onChildEvent=function(e,t,n){var r=new hu(e,t,n);this.repo.addEventCallbackForQuery(this,r)},du.prototype.off=function(e,t,n){Eo("Query.off",0,3,arguments.length),qa("Query.off",1,e,!0),So("Query.off",2,t,!0),Co("Query.off",3,n,!0);var r=null,i=null;"value"===e?r=new uu(t||null,null,n||null):e&&(t&&((i={})[e]=t),r=new hu(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},du.prototype.once=function(e,t,n,r){var i=this;Eo("Query.once",1,4,arguments.length),qa("Query.once",1,e,!1),So("Query.once",2,t,!0);var o=du.getCancelAndContextArgs_("Query.once",n,r),a=!0,s=new Gi;s.promise.catch(function(){});var u=function n(r){a&&(a=!1,i.off(e,n),t&&t.bind(o.context)(r),s.resolve(r))};return this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),s.reject(t)}),s.promise},du.prototype.limitToFirst=function(e){if(Eo("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new du(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},du.prototype.limitToLast=function(e){if(Eo("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new du(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},du.prototype.orderByChild=function(e){if(Eo("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Va("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var t=new Sa(e);if(t.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new eu(t),r=this.queryParams_.orderBy(n);return du.validateQueryEndpoints_(r),new du(this.repo,this.path,r,!0)},du.prototype.orderByKey=function(){Eo("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(ps);return du.validateQueryEndpoints_(e),new du(this.repo,this.path,e,!0)},du.prototype.orderByPriority=function(){Eo("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Ts);return du.validateQueryEndpoints_(e),new du(this.repo,this.path,e,!0)},du.prototype.orderByValue=function(){Eo("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Zs);return du.validateQueryEndpoints_(e),new du(this.repo,this.path,e,!0)},du.prototype.startAt=function(e,t){void 0===e&&(e=null),Eo("Query.startAt",0,2,arguments.length),Fa("Query.startAt",1,e,this.path,!0),Ba("Query.startAt",2,t,!0);var n=this.queryParams_.startAt(e,t);if(du.validateLimit_(n),du.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(t=e=null),new du(this.repo,this.path,n,this.orderByCalled_)},du.prototype.endAt=function(e,t){void 0===e&&(e=null),Eo("Query.endAt",0,2,arguments.length),Fa("Query.endAt",1,e,this.path,!0),Ba("Query.endAt",2,t,!0);var n=this.queryParams_.endAt(e,t);if(du.validateLimit_(n),du.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new du(this.repo,this.path,n,this.orderByCalled_)},du.prototype.equalTo=function(e,t){if(Eo("Query.equalTo",1,2,arguments.length),Fa("Query.equalTo",1,e,this.path,!1),Ba("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(e,t).endAt(e,t)},du.prototype.toString=function(){return Eo("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},du.prototype.toJSON=function(){return Eo("Query.toJSON",0,1,arguments.length),this.toString()},du.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},du.prototype.queryIdentifier=function(){var e=this.queryObject(),t=ga(e);return"{}"===t?"default":t},du.prototype.isEqual=function(e){if(Eo("Query.isEqual",1,1,arguments.length),!(e instanceof du))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var t=this.repo===e.repo,n=this.path.equals(e.path),r=this.queryIdentifier()===e.queryIdentifier();return t&&n&&r},du.getCancelAndContextArgs_=function(e,t,n){var r={cancel:null,context:null};if(t&&n)r.cancel=t,So(e,3,r.cancel,!0),r.context=n,Co(e,4,r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error(To(e,3,!0)+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(du.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),du);function du(e,t,n,r){this.repo=e,this.path=t,this.queryParams_=n,this.orderByCalled_=r}var mu=(yu.prototype.find=function(e){if(null!=this.value)return this.value.getChild(e);if(!e.isEmpty()&&0<this.children.size){var t=e.getFront();return e=e.popFront(),this.children.has(t)?this.children.get(t).find(e):null}return null},yu.prototype.remember=function(e,t){if(e.isEmpty())this.value=t,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,t);else{var n=e.getFront();this.children.has(n)||this.children.set(n,new yu);var r=this.children.get(n);e=e.popFront(),r.remember(e,t)}},yu.prototype.forget=function(e){if(e.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var t=this.value;this.value=null;var n=this;return t.forEachChild(Ts,function(e,t){n.remember(new Sa(e),t)}),this.forget(e)}if(0<this.children.size){var r=e.getFront();return e=e.popFront(),!this.children.has(r)||this.children.get(r).forget(e)&&this.children.delete(r),0===this.children.size}return!0},yu.prototype.forEachTree=function(e,t){null!==this.value?t(e,this.value):this.forEachChild(function(n,r){var i=new Sa(e.toString()+"/"+n);r.forEachTree(i,t)})},yu.prototype.forEachChild=function(e){this.children.forEach(function(t,n){e(n,t)})},yu);function yu(){this.value=null,this.children=new Map}function gu(e,t){return e&&"object"==typeof e?(Wi(".sv"in e,"Unexpected leaf node or priority contents"),t[e[".sv"]]):e}var vu,bu,wu=function e(t,n){var r,i=t.getPriority().val(),o=gu(i,n);if(t.isLeafNode()){var a=t,s=gu(a.getValue(),n);return s!==a.getValue()||o!==a.getPriority().val()?new ws(s,Xs(o)):t}var u=t;return o!==(r=u).getPriority().val()&&(r=r.updatePriority(new ws(o))),u.forEachChild(Ts,function(t,i){var o=e(i,n);o!==i&&(r=r.updateImmediateChild(t,o))}),r};(bu=vu=vu||{})[bu.OVERWRITE=0]="OVERWRITE",bu[bu.MERGE=1]="MERGE",bu[bu.ACK_USER_WRITE=2]="ACK_USER_WRITE",bu[bu.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var _u=(Eu.User=new Eu(!0,!1,null,!1),Eu.Server=new Eu(!1,!0,null,!1),Eu.forServerTaggedQuery=function(e){return new Eu(!1,!0,e,!0)},Eu);function Eu(e,t,n,r){this.fromUser=e,this.fromServer=t,this.queryId=n,this.tagged=r,Wi(!r||t,"Tagged queries must be from server.")}var Tu,Su=(Cu.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Wi(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var t=this.affectedTree.subtree(new Sa(e));return new Cu(Sa.Empty,t,this.revert)}return Wi(this.path.getFront()===e,"operationForChild called for unrelated child."),new Cu(this.path.popFront(),this.affectedTree,this.revert)},Cu);function Cu(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=vu.ACK_USER_WRITE,this.source=_u.User}var ku=(Iu.fromObject=function(e){var t=Iu.Empty;return va(e,function(e,n){t=t.set(new Sa(e),n)}),t},Iu.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},Iu.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:Sa.Empty,value:this.value};if(e.isEmpty())return null;var n=e.getFront(),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(e.popFront(),t);return null==i?null:{path:new Sa(n).child(i.path),value:i.value}},Iu.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})},Iu.prototype.subtree=function(e){if(e.isEmpty())return this;var t=e.getFront(),n=this.children.get(t);return null!==n?n.subtree(e.popFront()):Iu.Empty},Iu.prototype.set=function(e,t){if(e.isEmpty())return new Iu(t,this.children);var n=e.getFront(),r=(this.children.get(n)||Iu.Empty).set(e.popFront(),t),i=this.children.insert(n,r);return new Iu(this.value,i)},Iu.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?Iu.Empty:new Iu(null,this.children);var t=e.getFront(),n=this.children.get(t);if(n){var r=n.remove(e.popFront()),i=void 0;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?Iu.Empty:new Iu(this.value,i)}return this},Iu.prototype.get=function(e){if(e.isEmpty())return this.value;var t=e.getFront(),n=this.children.get(t);return n?n.get(e.popFront()):null},Iu.prototype.setTree=function(e,t){if(e.isEmpty())return t;var n=e.getFront(),r=(this.children.get(n)||Iu.Empty).setTree(e.popFront(),t),i=void 0;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Iu(this.value,i)},Iu.prototype.fold=function(e){return this.fold_(Sa.Empty,e)},Iu.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(e.child(r),t)}),t(e,this.value,n)},Iu.prototype.findOnPath=function(e,t){return this.findOnPath_(e,Sa.Empty,t)},Iu.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(e.isEmpty())return null;var i=e.getFront(),o=this.children.get(i);return o?o.findOnPath_(e.popFront(),t.child(i),n):null},Iu.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,Sa.Empty,t)},Iu.prototype.foreachOnPath_=function(e,t,n){if(e.isEmpty())return this;this.value&&n(t,this.value);var r=e.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(e.popFront(),t.child(r),n):Iu.Empty},Iu.prototype.foreach=function(e){this.foreach_(Sa.Empty,e)},Iu.prototype.foreach_=function(e,t){this.children.inorderTraversal(function(n,r){r.foreach_(e.child(n),t)}),this.value&&t(e,this.value)},Iu.prototype.foreachChild=function(e){this.children.inorderTraversal(function(t,n){n.value&&e(t,n.value)})},Iu.Empty=new Iu(null),Iu);function Iu(e,t){void 0===t&&(t=Tu=Tu||new As(na)),this.value=e,this.children=t}var xu=(Nu.prototype.operationForChild=function(e){return this.path.isEmpty()?new Nu(this.source,Sa.Empty):new Nu(this.source,this.path.popFront())},Nu);function Nu(e,t){this.source=e,this.path=t,this.type=vu.LISTEN_COMPLETE}var Au=(Ou.prototype.operationForChild=function(e){return this.path.isEmpty()?new Ou(this.source,Sa.Empty,this.snap.getImmediateChild(e)):new Ou(this.source,this.path.popFront(),this.snap)},Ou);function Ou(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=vu.OVERWRITE}var Du=(Ru.prototype.operationForChild=function(e){if(this.path.isEmpty()){var t=this.children.subtree(new Sa(e));return t.isEmpty()?null:t.value?new Au(this.source,Sa.Empty,t.value):new Ru(this.source,Sa.Empty,t)}return Wi(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new Ru(this.source,this.path.popFront(),this.children)},Ru.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},Ru);function Ru(e,t,n){this.source=e,this.path=t,this.children=n,this.type=vu.MERGE}var Pu=(Mu.prototype.isFullyInitialized=function(){return this.fullyInitialized_},Mu.prototype.isFiltered=function(){return this.filtered_},Mu.prototype.isCompleteForPath=function(e){if(e.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var t=e.getFront();return this.isCompleteForChild(t)},Mu.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},Mu.prototype.getNode=function(){return this.node_},Mu);function Mu(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}var Lu=(Fu.prototype.updateEventSnap=function(e,t,n){return new Fu(new Pu(e,t,n),this.serverCache_)},Fu.prototype.updateServerSnap=function(e,t,n){return new Fu(this.eventCache_,new Pu(e,t,n))},Fu.prototype.getEventCache=function(){return this.eventCache_},Fu.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},Fu.prototype.getServerCache=function(){return this.serverCache_},Fu.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},Fu.Empty=new Fu(new Pu(zs.EMPTY_NODE,!1,!1),new Pu(zs.EMPTY_NODE,!1,!1)),Fu);function Fu(e,t){this.eventCache_=e,this.serverCache_=t}var Uu=(ju.valueChange=function(e){return new ju(ju.VALUE,e)},ju.childAddedChange=function(e,t){return new ju(ju.CHILD_ADDED,t,e)},ju.childRemovedChange=function(e,t){return new ju(ju.CHILD_REMOVED,t,e)},ju.childChangedChange=function(e,t,n){return new ju(ju.CHILD_CHANGED,t,e,n)},ju.childMovedChange=function(e,t){return new ju(ju.CHILD_MOVED,t,e)},ju.CHILD_ADDED="child_added",ju.CHILD_REMOVED="child_removed",ju.CHILD_CHANGED="child_changed",ju.CHILD_MOVED="child_moved",ju.VALUE="value",ju);function ju(e,t,n,r,i){this.type=e,this.snapshotNode=t,this.childName=n,this.oldSnap=r,this.prevName=i}var qu=(Bu.prototype.updateChild=function(e,t,n,r,i,o){Wi(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()==n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(Uu.childRemovedChange(t,a)):Wi(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Uu.childAddedChange(t,n)):o.trackChildChange(Uu.childChangedChange(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},Bu.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Ts,function(e,r){t.hasChild(e)||n.trackChildChange(Uu.childRemovedChange(e,r))}),t.isLeafNode()||t.forEachChild(Ts,function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Uu.childChangedChange(t,r,i))}else n.trackChildChange(Uu.childAddedChange(t,r))})),t.withIndex(this.index_)},Bu.prototype.updatePriority=function(e,t){return e.isEmpty()?zs.EMPTY_NODE:e.updatePriority(t)},Bu.prototype.filtersNodes=function(){return!1},Bu.prototype.getIndexedFilter=function(){return this},Bu.prototype.getIndex=function(){return this.index_},Bu);function Bu(e){this.index_=e}var Vu=(Wu.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;Wi(t==Uu.CHILD_ADDED||t==Uu.CHILD_CHANGED||t==Uu.CHILD_REMOVED,"Only child changes supported for tracking"),Wi(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(t==Uu.CHILD_ADDED&&i==Uu.CHILD_REMOVED)this.changeMap.set(n,Uu.childChangedChange(n,e.snapshotNode,r.snapshotNode));else if(t==Uu.CHILD_REMOVED&&i==Uu.CHILD_ADDED)this.changeMap.delete(n);else if(t==Uu.CHILD_REMOVED&&i==Uu.CHILD_CHANGED)this.changeMap.set(n,Uu.childRemovedChange(n,r.oldSnap));else if(t==Uu.CHILD_CHANGED&&i==Uu.CHILD_ADDED)this.changeMap.set(n,Uu.childAddedChange(n,e.snapshotNode));else{if(t!=Uu.CHILD_CHANGED||i!=Uu.CHILD_CHANGED)throw zi("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Uu.childChangedChange(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)},Wu.prototype.getChanges=function(){return Array.from(this.changeMap.values())},Wu);function Wu(){this.changeMap=new Map}function zu(){}var Hu=new(zu.prototype.getCompleteChild=function(e){return null},zu.prototype.getChildAfterChild=function(e,t,n){return null},zu),Ku=(Qu.prototype.getCompleteChild=function(e){var t=this.viewCache_.getEventCache();if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Pu(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(e,n)},Qu.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,t,1,n,e);return 0===i.length?null:i[0]},Qu);function Qu(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}var Gu=function(e,t){this.viewCache=e,this.changes=t},Yu=(Xu.prototype.assertIndexed=function(e){Wi(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Wi(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},Xu.prototype.applyOperation=function(e,t,n,r){var i,o,a=new Vu;if(t.type===vu.OVERWRITE){var s=t;i=s.source.fromUser?this.applyUserOverwrite_(e,s.path,s.snap,n,r,a):(Wi(s.source.fromServer,"Unknown source."),o=s.source.tagged||e.getServerCache().isFiltered()&&!s.path.isEmpty(),this.applyServerOverwrite_(e,s.path,s.snap,n,r,o,a))}else if(t.type===vu.MERGE){var u=t;i=u.source.fromUser?this.applyUserMerge_(e,u.path,u.children,n,r,a):(Wi(u.source.fromServer,"Unknown source."),o=u.source.tagged||e.getServerCache().isFiltered(),this.applyServerMerge_(e,u.path,u.children,n,r,o,a))}else if(t.type===vu.ACK_USER_WRITE){var c=t;i=c.revert?this.revertUserWrite_(e,c.path,n,r,a):this.ackUserWrite_(e,c.path,c.affectedTree,n,r,a)}else{if(t.type!==vu.LISTEN_COMPLETE)throw zi("Unknown operation type: "+t.type);i=this.listenComplete_(e,t.path,n,a)}var l=a.getChanges();return Xu.maybeAddValueEvent_(e,i,l),new Gu(i,l)},Xu.maybeAddValueEvent_=function(e,t,n){var r=t.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=e.getCompleteEventSnap();(0<n.length||!e.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Uu.valueChange(t.getCompleteEventSnap()))}},Xu.prototype.generateEventCacheAfterServerEvent_=function(e,t,n,r,i){var o=e.getEventCache();if(null!=n.shadowingWrite(t))return e;var a=void 0,s=void 0;if(t.isEmpty())if(Wi(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var u=e.getCompleteServerSnap(),c=u instanceof zs?u:zs.EMPTY_NODE,l=n.calcCompleteEventChildren(c);a=this.filter_.updateFullNode(e.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(e.getCompleteServerSnap());a=this.filter_.updateFullNode(e.getEventCache().getNode(),h,i)}else{var f=t.getFront();if(".priority"==f){Wi(1==t.getLength(),"Can't have a priority with additional path components");var p=o.getNode();s=e.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(t,p,s);a=null!=d?this.filter_.updatePriority(p,d):o.getNode()}else{var m=t.popFront(),y=void 0;if(o.isCompleteForChild(f)){s=e.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(t,o.getNode(),s);y=null!=g?o.getNode().getImmediateChild(f).updateChild(m,g):o.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,e.getServerCache());a=null!=y?this.filter_.updateChild(o.getNode(),f,y,m,r,i):o.getNode()}}return e.updateEventSnap(a,o.isFullyInitialized()||t.isEmpty(),this.filter_.filtersNodes())},Xu.prototype.applyServerOverwrite_=function(e,t,n,r,i,o,a){var s,u=e.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(t.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(t,n);s=c.updateFullNode(u.getNode(),l,null)}else{var h=t.getFront();if(!u.isCompleteForPath(t)&&1<t.getLength())return e;var f=t.popFront(),p=u.getNode().getImmediateChild(h).updateChild(f,n);s=".priority"==h?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),h,p,f,Hu,null)}var d=e.updateServerSnap(s,u.isFullyInitialized()||t.isEmpty(),c.filtersNodes()),m=new Ku(r,d,i);return this.generateEventCacheAfterServerEvent_(d,t,r,m,a)},Xu.prototype.applyUserOverwrite_=function(e,t,n,r,i,o){var a,s,u=e.getEventCache(),c=new Ku(r,e,i);if(t.isEmpty())s=this.filter_.updateFullNode(e.getEventCache().getNode(),n,o),a=e.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var l=t.getFront();if(".priority"===l)s=this.filter_.updatePriority(e.getEventCache().getNode(),n),a=e.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var h=t.popFront(),f=u.getNode().getImmediateChild(l),p=void 0;if(h.isEmpty())p=n;else{var d=c.getCompleteChild(l);p=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):zs.EMPTY_NODE}if(f.equals(p))a=e;else{var m=this.filter_.updateChild(u.getNode(),l,p,h,c,o);a=e.updateEventSnap(m,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},Xu.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)},Xu.prototype.applyUserMerge_=function(e,t,n,r,i,o){var a=this,s=e;return n.foreach(function(n,u){var c=t.child(n);Xu.cacheHasChild_(e,c.getFront())&&(s=a.applyUserOverwrite_(s,c,u,r,i,o))}),n.foreach(function(n,u){var c=t.child(n);Xu.cacheHasChild_(e,c.getFront())||(s=a.applyUserOverwrite_(s,c,u,r,i,o))}),s},Xu.prototype.applyMerge_=function(e,t){return t.foreach(function(t,n){e=e.updateChild(t,n)}),e},Xu.prototype.applyServerMerge_=function(e,t,n,r,i,o,a){var s=this;if(e.getServerCache().getNode().isEmpty()&&!e.getServerCache().isFullyInitialized())return e;var u,c=e;u=t.isEmpty()?n:ku.Empty.setTree(t,n);var l=e.getServerCache().getNode();return u.children.inorderTraversal(function(t,n){if(l.hasChild(t)){var u=e.getServerCache().getNode().getImmediateChild(t),h=s.applyMerge_(u,n);c=s.applyServerOverwrite_(c,new Sa(t),h,r,i,o,a)}}),u.children.inorderTraversal(function(t,n){var u=!e.getServerCache().isCompleteForChild(t)&&null==n.value;if(!l.hasChild(t)&&!u){var h=e.getServerCache().getNode().getImmediateChild(t),f=s.applyMerge_(h,n);c=s.applyServerOverwrite_(c,new Sa(t),f,r,i,o,a)}}),c},Xu.prototype.ackUserWrite_=function(e,t,n,r,i,o){if(null!=r.shadowingWrite(t))return e;var a=e.getServerCache().isFiltered(),s=e.getServerCache();if(null!=n.value){if(t.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(t))return this.applyServerOverwrite_(e,t,s.getNode().getChild(t),r,i,a,o);if(t.isEmpty()){var u=ku.Empty;return s.getNode().forEachChild(ps,function(e,t){u=u.set(new Sa(e),t)}),this.applyServerMerge_(e,t,u,r,i,a,o)}return e}var c=ku.Empty;return n.foreach(function(e,n){var r=t.child(e);s.isCompleteForPath(r)&&(c=c.set(e,s.getNode().getChild(r)))}),this.applyServerMerge_(e,t,c,r,i,a,o)},Xu.prototype.listenComplete_=function(e,t,n,r){var i=e.getServerCache(),o=e.updateServerSnap(i.getNode(),i.isFullyInitialized()||t.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,t,n,Hu,r)},Xu.prototype.revertUserWrite_=function(e,t,n,r,i){var o;if(null!=n.shadowingWrite(t))return e;var a=new Ku(n,e,r),s=e.getEventCache().getNode(),u=void 0;if(t.isEmpty()||".priority"===t.getFront()){var c=void 0;if(e.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(e.getCompleteServerSnap());else{var l=e.getServerCache().getNode();Wi(l instanceof zs,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(l)}c=c,u=this.filter_.updateFullNode(s,c,i)}else{var h=t.getFront(),f=n.calcCompleteChild(h,e.getServerCache());null==f&&e.getServerCache().isCompleteForChild(h)&&(f=s.getImmediateChild(h)),(u=null!=f?this.filter_.updateChild(s,h,f,t.popFront(),a,i):e.getEventCache().getNode().hasChild(h)?this.filter_.updateChild(s,h,zs.EMPTY_NODE,t.popFront(),a,i):s).isEmpty()&&e.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(e.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=e.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Sa.Empty),e.updateEventSnap(u,o,this.filter_.filtersNodes())},Xu);function Xu(e){this.filter_=e}var $u=(Ju.prototype.generateEventsForChanges=function(e,t,n){var r=this,i=[],o=[];return e.forEach(function(e){e.type===Uu.CHILD_CHANGED&&r.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push(Uu.childMovedChange(e.childName,e.snapshotNode))}),this.generateEventsForType_(i,Uu.CHILD_REMOVED,e,n,t),this.generateEventsForType_(i,Uu.CHILD_ADDED,e,n,t),this.generateEventsForType_(i,Uu.CHILD_MOVED,o,n,t),this.generateEventsForType_(i,Uu.CHILD_CHANGED,e,n,t),this.generateEventsForType_(i,Uu.VALUE,e,n,t),i},Ju.prototype.generateEventsForType_=function(e,t,n,r,i){var o=this,a=n.filter(function(e){return e.type===t});a.sort(this.compareChanges_.bind(this)),a.forEach(function(t){var n=o.materializeSingleChange_(t,i);r.forEach(function(r){r.respondsTo(t.type)&&e.push(r.createEvent(n,o.query_))})})},Ju.prototype.materializeSingleChange_=function(e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,this.index_)),e},Ju.prototype.compareChanges_=function(e,t){if(null==e.childName||null==t.childName)throw zi("Should only compare child_ events.");var n=new is(e.childName,e.snapshotNode),r=new is(t.childName,t.snapshotNode);return this.index_.compare(n,r)},Ju);function Ju(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}var Zu,ec=(tc.prototype.getQuery=function(){return this.query_},tc.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},tc.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!t.getImmediateChild(e.getFront()).isEmpty())?t.getChild(e):null},tc.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},tc.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},tc.prototype.removeEventRegistration=function(e,t){var n=[];if(t){Wi(null==e,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(e){t=t;var i=e.createCancelEvent(t,r);i&&n.push(i)})}if(e){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(e)){if(e.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},tc.prototype.applyOperation=function(e,t,n){e.type===vu.MERGE&&null!==e.source.queryId&&(Wi(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Wi(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,e,t,n);return this.processor_.assertIndexed(i.viewCache),Wi(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},tc.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),n=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Ts,function(e,t){n.push(Uu.childAddedChange(e,t))}),t.isFullyInitialized()&&n.push(Uu.valueChange(t.getNode())),this.generateEventsForChanges_(n,t.getNode(),e)},tc.prototype.generateEventsForChanges_=function(e,t,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(e,t,r)},tc);function tc(e,t){this.query_=e,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new qu(n.getIndex()),i=n.getNodeFilter();this.processor_=new Yu(i);var o=t.getServerCache(),a=t.getEventCache(),s=r.updateFullNode(zs.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(zs.EMPTY_NODE,a.getNode(),null),c=new Pu(s,o.isFullyInitialized(),r.filtersNodes()),l=new Pu(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Lu(l,c),this.eventGenerator_=new $u(this.query_)}var nc=(Object.defineProperty(rc,"__referenceConstructor",{get:function(){return Wi(Zu,"Reference.ts has not been loaded"),Zu},set:function(e){Wi(!Zu,"__referenceConstructor has already been defined"),Zu=e},enumerable:!0,configurable:!0}),rc.prototype.isEmpty=function(){return 0===this.views.size},rc.prototype.applyOperation=function(e,t,n){var r,i,o=e.source.queryId;if(null!==o){var a=this.views.get(o);return Wi(null!=a,"SyncTree gave us an op for an invalid query."),a.applyOperation(e,t,n)}var s=[];try{for(var u=Fi(this.views.values()),c=u.next();!c.done;c=u.next())a=c.value,s=s.concat(a.applyOperation(e,t,n))}catch(e){r={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return s},rc.prototype.addEventRegistration=function(e,t,n,r,i){var o=e.queryIdentifier(),a=this.views.get(o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;u=!!s||(s=r instanceof zs?n.calcCompleteEventChildren(r):zs.EMPTY_NODE,!1);var c=new Lu(new Pu(s,u,!1),new Pu(r,i,!1));a=new ec(e,c),this.views.set(o,a)}return a.addEventRegistration(t),a.getInitialEvents(t)},rc.prototype.removeEventRegistration=function(e,t,n){var r,i,o=e.queryIdentifier(),a=[],s=[],u=this.hasCompleteView();if("default"===o)try{for(var c=Fi(this.views.entries()),l=c.next();!l.done;l=c.next()){var h=Ui(l.value,2),f=h[0],p=h[1];s=s.concat(p.removeEventRegistration(t,n)),p.isEmpty()&&(this.views.delete(f),p.getQuery().getQueryParams().loadsAllData()||a.push(p.getQuery()))}}catch(e){r={error:e}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}else(p=this.views.get(o))&&(s=s.concat(p.removeEventRegistration(t,n)),p.isEmpty()&&(this.views.delete(o),p.getQuery().getQueryParams().loadsAllData()||a.push(p.getQuery())));return u&&!this.hasCompleteView()&&a.push(new rc.__referenceConstructor(e.repo,e.path)),{removed:a,events:s}},rc.prototype.getQueryViews=function(){var e,t,n=[];try{for(var r=Fi(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},rc.prototype.getCompleteServerCache=function(e){var t,n,r=null;try{for(var i=Fi(this.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r||a.getCompleteServerCache(e)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},rc.prototype.viewForQuery=function(e){if(e.getQueryParams().loadsAllData())return this.getCompleteView();var t=e.queryIdentifier();return this.views.get(t)},rc.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)},rc.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},rc.prototype.getCompleteView=function(){var e,t;try{for(var n=Fi(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},rc);function rc(){this.views=new Map}var ic=(oc.prototype.addWrite=function(e,t){if(e.isEmpty())return new oc(new ku(t));var n=this.writeTree_.findRootMostValueAndPath(e);if(null!=n){var r=n.path,i=n.value,o=Sa.relativePath(r,e);return i=i.updateChild(o,t),new oc(this.writeTree_.set(r,i))}var a=new ku(t);return new oc(this.writeTree_.setTree(e,a))},oc.prototype.addWrites=function(e,t){var n=this;return va(t,function(t,r){n=n.addWrite(e.child(t),r)}),n},oc.prototype.removeWrite=function(e){return e.isEmpty()?oc.Empty:new oc(this.writeTree_.setTree(e,ku.Empty))},oc.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)},oc.prototype.getCompleteNode=function(e){var t=this.writeTree_.findRootMostValueAndPath(e);return null!=t?this.writeTree_.get(t.path).getChild(Sa.relativePath(t.path,e)):null},oc.prototype.getCompleteChildren=function(){var e=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Ts,function(t,n){e.push(new is(t,n))}):this.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new is(t,n.value))}),e},oc.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var t=this.getCompleteNode(e);return new oc(null!=t?new ku(t):this.writeTree_.subtree(e))},oc.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},oc.prototype.apply=function(e){return function e(t,n,r){if(null!=n.value)return r.updateChild(t,n.value);var i=null;return n.children.inorderTraversal(function(n,o){".priority"===n?(Wi(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=e(t.child(n),o,r)}),r.getChild(t).isEmpty()||null===i||(r=r.updateChild(t.child(".priority"),i)),r}(Sa.Empty,this.writeTree_,e)},oc.Empty=new oc(new ku(null)),oc);function oc(e){this.writeTree_=e}var ac=(sc.prototype.childWrites=function(e){return new uc(e,this)},sc.prototype.addOverwrite=function(e,t,n,r){Wi(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:e,snap:t,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,t)),this.lastWriteId_=n},sc.prototype.addMerge=function(e,t,n){Wi(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:t,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,t),this.lastWriteId_=n},sc.prototype.getWrite=function(e){for(var t=0;t<this.allWrites_.length;t++){var n=this.allWrites_[t];if(n.writeId===e)return n}return null},sc.prototype.removeWrite=function(e){var t=this,n=this.allWrites_.findIndex(function(t){return t.writeId===e});Wi(0<=n,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&0<=a;){var s=this.allWrites_[a];s.visible&&(n<=a&&this.recordContainsPath_(s,r.path)?i=!1:r.path.contains(s.path)&&(o=!0)),a--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):va(r.children,function(e){t.visibleWrites_=t.visibleWrites_.removeWrite(r.path.child(e))}),!0)},sc.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},sc.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(e);if(!r&&i.isEmpty())return t;if(r||null!=t||i.hasCompleteWrite(Sa.Empty)){var o=sc.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e);return u=t||zs.EMPTY_NODE,o.apply(u)}return null}var a=this.visibleWrites_.getCompleteNode(e);if(null!=a)return a;var s=this.visibleWrites_.childCompoundWrite(e);if(s.isEmpty())return t;if(null!=t||s.hasCompleteWrite(Sa.Empty)){var u=t||zs.EMPTY_NODE;return s.apply(u)}return null},sc.prototype.calcCompleteEventChildren=function(e,t){var n=zs.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(e);if(r)return r.isLeafNode()||r.forEachChild(Ts,function(e,t){n=n.updateImmediateChild(e,t)}),n;if(t){var i=this.visibleWrites_.childCompoundWrite(e);return t.forEachChild(Ts,function(e,t){var r=i.childCompoundWrite(new Sa(e)).apply(t);n=n.updateImmediateChild(e,r)}),i.getCompleteChildren().forEach(function(e){n=n.updateImmediateChild(e.name,e.node)}),n}return this.visibleWrites_.childCompoundWrite(e).getCompleteChildren().forEach(function(e){n=n.updateImmediateChild(e.name,e.node)}),n},sc.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n,r){Wi(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=e.child(t);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(t):o.apply(r.getChild(t))},sc.prototype.calcCompleteChild=function(e,t,n){var r=e.child(t),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(t)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(t)):null},sc.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},sc.prototype.calcIndexedSlice=function(e,t,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(e),u=s.getCompleteNode(Sa.Empty);if(null!=u)a=u;else{if(null==t)return[];a=s.apply(t)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},sc.prototype.recordContainsPath_=function(e,t){if(e.snap)return e.path.contains(t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&e.path.child(n).contains(t))return!0;return!1},sc.prototype.resetTree_=function(){this.visibleWrites_=sc.layerTree_(this.allWrites_,sc.DefaultFilter_,Sa.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},sc.DefaultFilter_=function(e){return e.visible},sc.layerTree_=function(e,t,n){for(var r=ic.Empty,i=0;i<e.length;++i){var o=e[i];if(t(o)){var a=o.path,s=void 0;if(o.snap)n.contains(a)?(s=Sa.relativePath(n,a),r=r.addWrite(s,o.snap)):a.contains(n)&&(s=Sa.relativePath(a,n),r=r.addWrite(Sa.Empty,o.snap.getChild(s)));else{if(!o.children)throw zi("WriteRecord should have .snap or .children");if(n.contains(a))s=Sa.relativePath(n,a),r=r.addWrites(s,o.children);else if(a.contains(n))if((s=Sa.relativePath(a,n)).isEmpty())r=r.addWrites(Sa.Empty,o.children);else{var u=lo(o.children,s.getFront());if(u){var c=u.getChild(s.popFront());r=r.addWrite(Sa.Empty,c)}}}}}return r},sc);function sc(){this.visibleWrites_=ic.Empty,this.allWrites_=[],this.lastWriteId_=-1}var uc=(cc.prototype.calcCompleteEventCache=function(e,t,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,n)},cc.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},cc.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,n)},cc.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},cc.prototype.calcIndexedSlice=function(e,t,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,n,r,i)},cc.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)},cc.prototype.child=function(e){return new cc(this.treePath_.child(e),this.writeTree_)},cc);function cc(e,t){this.treePath_=e,this.writeTree_=t}var lc=(hc.prototype.applyUserOverwrite=function(e,t,n,r){return this.pendingWriteTree_.addOverwrite(e,t,n,r),r?this.applyOperationToSyncPoints_(new Au(_u.User,e,t)):[]},hc.prototype.applyUserMerge=function(e,t,n){this.pendingWriteTree_.addMerge(e,t,n);var r=ku.fromObject(t);return this.applyOperationToSyncPoints_(new Du(_u.User,e,r))},hc.prototype.ackUserWrite=function(e,t){void 0===t&&(t=!1);var n=this.pendingWriteTree_.getWrite(e);if(this.pendingWriteTree_.removeWrite(e)){var r=ku.Empty;return null!=n.snap?r=r.set(Sa.Empty,!0):va(n.children,function(e,t){r=r.set(new Sa(e),t)}),this.applyOperationToSyncPoints_(new Su(n.path,r,t))}return[]},hc.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new Au(_u.Server,e,t))},hc.prototype.applyServerMerge=function(e,t){var n=ku.fromObject(t);return this.applyOperationToSyncPoints_(new Du(_u.Server,e,n))},hc.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new xu(_u.Server,e))},hc.prototype.applyTaggedQueryOverwrite=function(e,t,n){var r=this.queryKeyForTag_(n);if(null==r)return[];var i=hc.parseQueryKey_(r),o=i.path,a=i.queryId,s=Sa.relativePath(o,e),u=new Au(_u.forServerTaggedQuery(a),s,t);return this.applyTaggedOperation_(o,u)},hc.prototype.applyTaggedQueryMerge=function(e,t,n){var r=this.queryKeyForTag_(n);if(r){var i=hc.parseQueryKey_(r),o=i.path,a=i.queryId,s=Sa.relativePath(o,e),u=ku.fromObject(t),c=new Du(_u.forServerTaggedQuery(a),s,u);return this.applyTaggedOperation_(o,c)}return[]},hc.prototype.applyTaggedListenComplete=function(e,t){var n=this.queryKeyForTag_(t);if(n){var r=hc.parseQueryKey_(n),i=r.path,o=r.queryId,a=Sa.relativePath(i,e),s=new xu(_u.forServerTaggedQuery(o),a);return this.applyTaggedOperation_(i,s)}return[]},hc.prototype.addEventRegistration=function(e,t){var n=e.path,r=null,i=!1;this.syncPointTree_.foreachOnPath(n,function(e,t){var o=Sa.relativePath(e,n);r=r||t.getCompleteServerCache(o),i=i||t.hasCompleteView()});var o,a=this.syncPointTree_.get(n);a?(i=i||a.hasCompleteView(),r=r||a.getCompleteServerCache(Sa.Empty)):(a=new nc,this.syncPointTree_=this.syncPointTree_.set(n,a)),null!=r?o=!0:(o=!1,r=zs.EMPTY_NODE,this.syncPointTree_.subtree(n).foreachChild(function(e,t){var n=t.getCompleteServerCache(Sa.Empty);n&&(r=r.updateImmediateChild(e,n))}));var s=a.viewExistsForQuery(e);if(!s&&!e.getQueryParams().loadsAllData()){var u=hc.makeQueryKey_(e);Wi(!this.queryToTagMap.has(u),"View does not exist, but we have a tag");var c=hc.getNextQueryTag_();this.queryToTagMap.set(u,c),this.tagToQueryMap.set(c,u)}var l=this.pendingWriteTree_.childWrites(n),h=a.addEventRegistration(e,t,l,r,o);if(!s&&!i){var f=a.viewForQuery(e);h=h.concat(this.setupListener_(e,f))}return h},hc.prototype.removeEventRegistration=function(e,t,n){var r=this,i=e.path,o=this.syncPointTree_.get(i),a=[];if(o&&("default"===e.queryIdentifier()||o.viewExistsForQuery(e))){var s=o.removeEventRegistration(e,t,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var u=s.removed;a=s.events;var c=-1!==u.findIndex(function(e){return e.getQueryParams().loadsAllData()}),l=this.syncPointTree_.findOnPath(i,function(e,t){return t.hasCompleteView()});if(c&&!l){var h=this.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(h),p=0;p<f.length;++p){var d=f[p],m=d.getQuery(),y=this.createListenerForView_(d);this.listenProvider_.startListening(hc.queryForListening_(m),this.tagForQuery_(m),y.hashFn,y.onComplete)}}!l&&0<u.length&&!n&&(c?this.listenProvider_.stopListening(hc.queryForListening_(e),null):u.forEach(function(e){var t=r.queryToTagMap.get(hc.makeQueryKey_(e));r.listenProvider_.stopListening(hc.queryForListening_(e),t)})),this.removeTags_(u)}return a},hc.prototype.calcCompleteEventCache=function(e,t){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(e,function(t,n){var r=Sa.relativePath(t,e),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(e,r,t,!0)},hc.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold(function(e,t,n){if(t&&t.hasCompleteView())return[t.getCompleteView()];var r=[];return t&&(r=t.getQueryViews()),va(n,function(e,t){r=r.concat(t)}),r})},hc.prototype.removeTags_=function(e){for(var t=0;t<e.length;++t){var n=e[t];if(!n.getQueryParams().loadsAllData()){var r=hc.makeQueryKey_(n),i=this.queryToTagMap.get(r);this.queryToTagMap.delete(r),this.tagToQueryMap.delete(i)}}},hc.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},hc.prototype.setupListener_=function(e,t){var n=e.path,r=this.tagForQuery_(e),i=this.createListenerForView_(t),o=this.listenProvider_.startListening(hc.queryForListening_(e),r,i.hashFn,i.onComplete),a=this.syncPointTree_.subtree(n);if(r)Wi(!a.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var s=a.fold(function(e,t,n){if(!e.isEmpty()&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()];var r=[];return t&&(r=r.concat(t.getQueryViews().map(function(e){return e.getQuery()}))),va(n,function(e,t){r=r.concat(t)}),r}),u=0;u<s.length;++u){var c=s[u];this.listenProvider_.stopListening(hc.queryForListening_(c),this.tagForQuery_(c))}return o},hc.prototype.createListenerForView_=function(e){var t=this,n=e.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(e.getServerCache()||zs.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?t.applyTaggedListenComplete(n.path,r):t.applyListenComplete(n.path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==e?n="Client doesn't have permission to access the desired data.":"unavailable"==e&&(n="The service is unavailable");var r=new Error(e+" at "+t.path.toString()+": "+n);return r.code=e.toUpperCase(),r}(e,n);return t.removeEventRegistration(n,null,i)}}},hc.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},hc.parseQueryKey_=function(e){var t=e.indexOf("$");return Wi(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Sa(e.substr(0,t))}},hc.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap.get(e)},hc.prototype.tagForQuery_=function(e){var t=hc.makeQueryKey_(e);return this.queryToTagMap.get(t)},hc.getNextQueryTag_=function(){return hc.nextQueryTag_++},hc.prototype.applyTaggedOperation_=function(e,t){var n=this.syncPointTree_.get(e);Wi(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(e);return n.applyOperation(t,r,null)},hc.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Sa.Empty))},hc.prototype.applyOperationHelper_=function(e,t,n,r){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,t,n,r);var i=t.get(Sa.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Sa.Empty));var o=[],a=e.path.getFront(),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,l))}return i&&(o=o.concat(i.applyOperation(e,r,n))),o},hc.prototype.applyOperationDescendantsHelper_=function(e,t,n,r){var i=this,o=t.get(Sa.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(Sa.Empty));var a=[];return t.children.inorderTraversal(function(t,o){var s=n?n.getImmediateChild(t):null,u=r.child(t),c=e.operationForChild(t);c&&(a=a.concat(i.applyOperationDescendantsHelper_(c,o,s,u)))}),o&&(a=a.concat(o.applyOperation(e,r,n))),a},hc.nextQueryTag_=1,hc);function hc(e){this.listenProvider_=e,this.syncPointTree_=ku.Empty,this.pendingWriteTree_=new ac,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var fc=(pc.prototype.getNode=function(e){return this.rootNode_.getChild(e)},pc.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},pc);function pc(){this.rootNode_=zs.EMPTY_NODE}var dc=(mc.prototype.getToken=function(e){return this.app_.INTERNAL.getToken(e).then(null,function(e){return e&&"auth/token-not-initialized"===e.code?(Xo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})},mc.prototype.addTokenChangeListener=function(e){this.app_.INTERNAL.addAuthTokenListener(e)},mc.prototype.removeTokenChangeListener=function(e){this.app_.INTERNAL.removeAuthTokenListener(e)},mc.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ea(e)},mc);function mc(e){this.app_=e}var yc=function(e){this.accessToken=e},gc=(vc.prototype.getToken=function(e){return Promise.resolve(new yc("owner"))},vc.prototype.addTokenChangeListener=function(e){},vc.prototype.removeTokenChangeListener=function(e){},vc.prototype.notifyForInvalidToken=function(){ea('Database emulator unexpectedly rejected fake "owner" credentials.')},vc);function vc(e){this.app_=e}var bc=(wc.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),co(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},wc.prototype.get=function(){return Ki(this.counters_)},wc);function wc(){this.counters_={}}var _c=(Ec.getCollection=function(e){var t=e.toString();return this.collections_[t]||(this.collections_[t]=new bc),this.collections_[t]},Ec.getOrCreateReporter=function(e,t){var n=e.toString();return this.reporters_[n]||(this.reporters_[n]=t()),this.reporters_[n]},Ec.collections_={},Ec.reporters_={},Ec);function Ec(){}var Tc=(Sc.prototype.get=function(){var e=this.collection_.get(),t=Pi({},e);return this.last_&&va(this.last_,function(e,n){t[e]=t[e]-n}),this.last_=e,t},Sc);function Sc(e){this.collection_=e,this.last_=null}var Cc=(kc.prototype.includeStat=function(e){this.statsToReport_[e]=!0},kc.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;va(t,function(t,i){0<i&&co(e.statsToReport_,t)&&(n[t]=i,r=!0)}),r&&this.server_.reportStats(n),_a(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},kc);function kc(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Tc(e);var n=1e4+2e4*Math.random();_a(this.reportStats_.bind(this),Math.floor(n))}var Ic=(xc.prototype.queueEvents=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n],i=r.getPath();null===t||i.equals(t.getPath())||(this.eventLists_.push(t),t=null),null===t&&(t=new Nc(i)),t.add(r)}t&&this.eventLists_.push(t)},xc.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},xc.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},xc.prototype.raiseQueuedEventsMatchingPredicate_=function(e){this.recursionDepth_++;for(var t=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(e(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):t=!1)}t&&(this.eventLists_=[]),this.recursionDepth_--},xc);function xc(){this.eventLists_=[],this.recursionDepth_=0}var Nc=(Ac.prototype.add=function(e){this.events_.push(e)},Ac.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var t=this.events_[e];if(null!==t){this.events_[e]=null;var n=t.getEventRunner();fa&&Xo("event: "+t.toString()),wa(n)}}},Ac.prototype.getPath=function(){return this.path_},Ac);function Ac(e){this.path_=e,this.events_=[]}var Oc=(Dc.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=ji(this.listeners_[e]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},Dc.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},Dc.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},Dc.prototype.validateEventType_=function(e){Wi(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},Dc);function Dc(e){this.allowedEvents_=e,this.listeners_={},Wi(Array.isArray(e)&&0<e.length,"Requires a non-empty array")}var Rc,Pc=(Ri(Mc,Rc=Oc),Mc.getInstance=function(){return new Mc},Mc.prototype.getInitialEvent=function(e){return Wi("visible"===e,"Unknown event type: "+e),[this.visible_]},Mc);function Mc(){var e,t,n=Rc.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var Lc,Fc=(Ri(Uc,Lc=Oc),Uc.getInstance=function(){return new Uc},Uc.prototype.getInitialEvent=function(e){return Wi("online"===e,"Unknown event type: "+e),[this.online_]},Uc.prototype.currentlyOnline=function(){return this.online_},Uc);function Uc(){var e=Lc.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||$i()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}var jc=(qc.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},qc.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&wa(function(){n.onMessage_(e[t])})},r=0;r<e.length;++r)t(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},qc);function qc(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var Bc=(Vc.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new jc(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new Wc(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Ui(e,5),i=r[0],o=r[1],a=r[2];if(r[3],r[4],n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"==i)n.id=o,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Ui(e,2),i=r[0],o=r[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(xa)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,function(){})}})},Vc.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},Vc.forceAllow=function(){Vc.forceAllow_=!0},Vc.forceDisallow=function(){Vc.forceDisallow_=!0},Vc.isAvailable=function(){return!!Vc.forceAllow_||!(Vc.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},Vc.prototype.markConnectionHealthy=function(){},Vc.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},Vc.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},Vc.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},Vc.prototype.send=function(e){var t=so(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=function(e){var t=qi(e);return Hi.encodeByteArray(t,!0)}(t),r=ia(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},Vc.prototype.addDisconnectPingFrame=function(e,t){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},Vc.prototype.incrementIncomingBytes_=function(e){var t=so(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},Vc);function Vc(e,t,n,r){this.connId=e,this.repoInfo=t,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$o(e),this.stats_=_c.getCollection(t),this.urlFn=function(e){return t.connectionURL(Aa,e)}}var Wc=(zc.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Xo("No IE domain setting required")}catch(e){var n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},zc.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},zc.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},zc.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},zc.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},zc.prototype.addLongPollTag_=function(e,t){var n=this;function r(){n.outstandingRequests.delete(t),n.newRequest_()}this.outstandingRequests.add(t);var i=setTimeout(r,Math.floor(25e3));this.addTag(e,function(){clearTimeout(i),r()})},zc.prototype.addTag=function(e,t){var n=this;setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Xo("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(e){}},Math.floor(1))},zc);function zc(e,t,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=la(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=zc.createIFrame_();var i="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(i='<script>document.domain="'+document.domain+'";<\/script>');var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(e){Xo("frame writing exception"),e.stack&&Xo(e.stack),Xo(e)}}var Hc="",Kc=null;"undefined"!=typeof MozWebSocket?Kc=MozWebSocket:"undefined"!=typeof WebSocket&&(Kc=WebSocket);var Qc=(Gc.connectionURL_=function(e,t,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(xa)&&(r.r="f"),t&&(r.s=t),n&&(r.ls=n),e.connectionURL(Na,r)},Gc.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,aa.set("previous_websocket_failure",!0);try{if(Zi()){var i=Vi.NODE_ADMIN?"AdminNode":"Node",o={headers:{"User-Agent":"Firebase/5/"+Hc+"/"+r.platform+"/"+i}},a=Object({NODE_ENV:"production",PUBLIC_URL:"."}),s=0==this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;s&&(o.proxy={origin:s}),this.mySock=new Kc(this.connURL,[],o)}else this.mySock=new Kc(this.connURL)}catch(e){this.log_("Error instantiating WebSocket.");var u=e.message||e.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},Gc.prototype.start=function(){},Gc.forceDisallow=function(){Gc.forceDisallow_=!0},Gc.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);t&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0)}return!e&&null!==Kc&&!Gc.forceDisallow_},Gc.previouslyFailed=function(){return aa.isInMemoryStorage||!0===aa.get("previous_websocket_failure")},Gc.prototype.markConnectionHealthy=function(){aa.remove("previous_websocket_failure")},Gc.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length==this.totalFrames){var t=this.frames.join("");this.frames=null;var n=ao(t);this.onMessage(n)}},Gc.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},Gc.prototype.extractFrameCount_=function(e){if(Wi(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},Gc.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},Gc.prototype.send=function(e){this.resetKeepAlive();var t=so(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=ia(t,16384);1<n.length&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},Gc.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},Gc.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},Gc.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},Gc.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()},Math.floor(45e3))},Gc.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},Gc.responsesRequiredToBeHealthy=2,Gc.healthyTimeout=3e4,Gc);function Gc(e,t,n,r){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$o(this.connId),this.stats_=_c.getCollection(t),this.connURL=Gc.connectionURL_(t,n,r)}var Yc=(Object.defineProperty(Xc,"ALL_TRANSPORTS",{get:function(){return[Bc,Qc]},enumerable:!0,configurable:!0}),Xc.prototype.initTransports_=function(e){var t,n,r=Qc&&Qc.isAvailable(),i=r&&!Qc.previouslyFailed();if(e.webSocketOnly&&(r||ea("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Qc];else{var o=this.transports_=[];try{for(var a=Fi(Xc.ALL_TRANSPORTS),s=a.next();!s.done;s=a.next()){var u=s.value;u&&u.isAvailable()&&o.push(u)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}}},Xc.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},Xc.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},Xc);function Xc(e){this.initTransports_(e)}var $c=(Jc.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){e.conn_&&e.conn_.open(n,r)},Math.floor(0));var i=t.healthyTimeout||0;0<i&&(this.healthyTimeout_=_a(function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&102400<e.conn_.bytesReceived?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&10240<e.conn_.bytesSent?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))},Math.floor(i)))},Jc.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},Jc.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},Jc.prototype.connReceiver_=function(e){var t=this;return function(n){2!=t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},Jc.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},Jc.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},Jc.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},Jc.prototype.onSecondaryMessageReceived_=function(e){var t=ra("t",e),n=ra("d",e);if("c"==t)this.onSecondaryControl_(n);else{if("d"!=t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},Jc.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},Jc.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},Jc.prototype.onPrimaryMessageReceived_=function(e){var t=ra("t",e),n=ra("d",e);"c"==t?this.onControl_(n):"d"==t&&this.onDataMessage_(n)},Jc.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},Jc.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},Jc.prototype.onControl_=function(e){var t=ra("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Jo("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Jo("Unknown control packet command: "+t)}},Jc.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.updateHost(r),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&ea("Protocol version mismatch detected"),this.tryStartUpgrade_())},Jc.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},Jc.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),_a(function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())},Math.floor(6e4))},Jc.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.updateHost(e),1===this.state_?this.close():(this.closeConnections_(),this.start_())},Jc.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):_a(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},Jc.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},Jc.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},Jc.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(aa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},Jc.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},Jc.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},Jc.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},Jc.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},Jc);function Jc(e,t,n,r,i,o,a){this.id=e,this.repoInfo_=t,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$o("c:"+this.id+":"),this.transportManager_=new Yc(t),this.log_("Connection created"),this.start_()}var Zc=(el.prototype.put=function(e,t,n,r){},el.prototype.merge=function(e,t,n,r){},el.prototype.refreshAuthToken=function(e){},el.prototype.onDisconnectPut=function(e,t,n){},el.prototype.onDisconnectMerge=function(e,t,n){},el.prototype.onDisconnectCancel=function(e,t){},el.prototype.reportStats=function(e){},el);function el(){}var tl,nl=(Ri(rl,tl=Zc),rl.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(so(i)),Wi(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},rl.prototype.listen=function(e,t,n,r){var i=e.queryIdentifier(),o=e.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Wi(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Wi(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},rl.prototype.sendListen_=function(e){var t=this,n=e.query,r=n.path.toString(),i=n.queryIdentifier();this.log_("Listen on "+r+" for "+i);var o={p:r};e.tag&&(o.q=n.queryObject(),o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,function(o){var a=o.d,s=o.s;rl.warnOnListenWarnings_(a,n),(t.listens.get(r)&&t.listens.get(r).get(i))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(r,i),e.onComplete&&e.onComplete(s,a))})},rl.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&co(e,"w")){var n=lo(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t.getQueryParams().getIndex().toString()+'"',i=t.path.toString();ea("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},rl.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(e)},rl.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||function(e){var t=uo(e).claims;return"object"==typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},rl.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=uo(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))})}},rl.prototype.unlisten=function(e,t){var n=e.path.toString(),r=e.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Wi(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e.queryObject(),t)},rl.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},rl.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},rl.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},rl.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},rl.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,function(e){r&&setTimeout(function(){r(e.s,e.d)},Math.floor(0))})},rl.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},rl.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},rl.prototype.putInternal=function(e,t,n,r,i){var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},rl.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)})},rl.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}})}},rl.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+so(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},rl.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Jo("Unrecognized action received from server: "+so(e)+"\nAre you using the latest client?")},rl.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},rl.prototype.scheduleConnect_=function(e){var t=this;Wi(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){t.establishConnectionTimer_=null,t.establishConnection_()},Math.floor(e))},rl.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},rl.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},rl.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},rl.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+rl.nextConnectionId_++,i=this,o=this.lastSessionId,a=!1,s=null,u=function(){s?s.close():(a=!0,n())};this.realtime_={close:u,sendRequest:function(e){Wi(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)}};var c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(c).then(function(u){a?Xo("getToken() completed but was canceled"):(Xo("getToken() completed. Creating connection."),i.authToken_=u&&u.accessToken,s=new $c(r,i.repoInfo_,e,t,n,function(e){ea(e+" ("+i.repoInfo_.toString()+")"),i.interrupt("server_kill")},o))}).then(null,function(e){i.log_("Failed to get token: "+e),a||u()})}},rl.prototype.interrupt=function(e){Xo("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},rl.prototype.resume=function(e){Xo("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ho(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},rl.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},rl.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},rl.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map(function(e){return ga(e)}).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},rl.prototype.removeListen_=function(e,t){var n,r=new Sa(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n},rl.prototype.onAuthRevoked_=function(e,t){Xo("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},rl.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},rl.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=Fi(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,Fi(a.values())),u=s.next();!u.done;u=s.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}},rl.prototype.sendConnectStats_=function(){var e={};e["sdk.js."+Hc.replace(/\./g,"-")]=1,$i()?e["framework.cordova"]=1:Ji()&&(e["framework.reactnative"]=1),this.reportStats(e)},rl.prototype.shouldReconnect_=function(){var e=Fc.getInstance().currentlyOnline();return ho(this.interruptReasons_)&&e},rl.nextPersistentConnectionId_=0,rl.nextConnectionId_=0,rl);function rl(e,t,n,r,i,o){var a=tl.call(this)||this;if(a.repoInfo_=e,a.onDataUpdate_=t,a.onConnectStatus_=n,a.onServerInfoUpdate_=r,a.authTokenProvider_=i,a.authOverride_=o,a.id=rl.nextPersistentConnectionId_++,a.log_=$o("p:"+a.id+":"),a.interruptReasons_={},a.listens=new Map,a.outstandingPuts_=[],a.outstandingPutCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=1e3,a.maxReconnectDelay_=3e5,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,o&&!Zi())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),Pc.getInstance().on("visible",a.onVisible_,a),-1===e.host.indexOf("fblocal")&&Fc.getInstance().on("online",a.onOnline_,a),a}var il,ol=(Ri(al,il=Zc),al.prototype.reportStats=function(e){throw new Error("Method not implemented.")},al.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(Wi(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())},al.prototype.listen=function(e,t,n,r){var i=this,o=e.path.toString();this.log_("Listen called for "+o+" "+e.queryIdentifier());var a=al.getListenId_(e,n),s={};this.listens_[a]=s;var u=e.getQueryParams().toRestQueryStringParameters();this.restRequest_(o+".json",u,function(e,t){var u=t;404===e&&(e=u=null),null===e&&i.onDataUpdate_(o,u,!1,n),lo(i.listens_,a)===s&&r(e?401==e?"permission_denied":"rest_error:"+e:"ok",null)})},al.prototype.unlisten=function(e,t){var n=al.getListenId_(e,t);delete this.listens_[n]},al.prototype.refreshAuthToken=function(e){},al.prototype.restRequest_=function(e,t,n){var r=this;void 0===t&&(t={}),t.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var o=i&&i.accessToken;o&&(t.auth=o);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""}(t);r.log_("Sending REST request for "+a);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(n&&4===s.readyState){r.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);var e=null;if(200<=s.status&&s.status<300){try{e=ao(s.responseText)}catch(e){ea("Failed to parse JSON response for "+a+": "+s.responseText)}n(null,e)}else 401!==s.status&&404!==s.status&&ea("Got unsuccessful REST response for "+a+" Status: "+s.status),n(s.status);n=null}},s.open("GET",a,!0),s.send()})},al);function al(e,t,n){var r=il.call(this)||this;return r.repoInfo_=e,r.onDataUpdate_=t,r.authTokenProvider_=n,r.log_=$o("p:rest:"),r.listens_={},r}var sl="repo_interrupt",ul=(cl.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},cl.prototype.name=function(){return this.repoInfo_.namespace},cl.prototype.serverTime=function(){var e=this.infoData_.getNode(new Sa(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e},cl.prototype.generateServerValues=function(){return(e=(e={timestamp:this.serverTime()})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e},cl.prototype.onDataUpdate_=function(e,t,n,r){this.dataUpdateCount++;var i=new Sa(e);t=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,t):t;var o=[];if(r)if(n){var a=fo(t,function(e){return Xs(e)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var s=Xs(t);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)}else if(n){var u=fo(t,function(e){return Xs(e)});o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=Xs(t);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var l=i;0<o.length&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,o)},cl.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},cl.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),!1===e&&this.runOnDisconnectEvents_()},cl.prototype.onServerInfoUpdate_=function(e){var t=this;va(e,function(e,n){t.updateInfo_(e,n)})},cl.prototype.updateInfo_=function(e,t){var n=new Sa("/.info/"+e),r=Xs(t);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},cl.prototype.getNextWriteId_=function(){return this.nextWriteId_++},cl.prototype.setWithPriority=function(e,t,n,r){var i=this;this.log_("set",{path:e.toString(),value:t,priority:n});var o=this.generateServerValues(),a=Xs(t,n),s=wu(a,o),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(e,s,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(e.toString(),a.val(!0),function(t,n){var o="ok"===t;o||ea("set at "+e+" failed: "+t);var a=i.serverSyncTree_.ackUserWrite(u,!o);i.eventQueue_.raiseEventsForChangedPath(e,a),i.callOnCompleteCallback(r,t,n)});var l=this.abortTransactions_(e);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},cl.prototype.update=function(e,t,n){var r=this;this.log_("update",{path:e.toString(),value:t});var i=!0,o=this.generateServerValues(),a={};if(va(t,function(e,t){i=!1;var n=Xs(t);a[e]=wu(n,o)}),i)Xo("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var s=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(e,a,s);this.eventQueue_.queueEvents(u),this.server_.merge(e.toString(),t,function(t,i){var o="ok"===t;o||ea("update at "+e+" failed: "+t);var a=r.serverSyncTree_.ackUserWrite(s,!o),u=0<a.length?r.rerunTransactions_(e):e;r.eventQueue_.raiseEventsForChangedPath(u,a),r.callOnCompleteCallback(n,t,i)}),va(t,function(t){var n=r.abortTransactions_(e.child(t));r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(e,[])}},cl.prototype.runOnDisconnectEvents_=function(){var e=this;this.log_("onDisconnectEvents");var t=this.generateServerValues(),n=function(e,t){var n=new mu;return e.forEachTree(new Sa(""),function(e,r){n.remember(e,wu(r,t))}),n}(this.onDisconnect_,t),r=[];n.forEachTree(Sa.Empty,function(t,n){r=r.concat(e.serverSyncTree_.applyServerOverwrite(t,n));var i=e.abortTransactions_(t);e.rerunTransactions_(i)}),this.onDisconnect_=new mu,this.eventQueue_.raiseEventsForChangedPath(Sa.Empty,r)},cl.prototype.onDisconnectCancel=function(e,t){var n=this;this.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(e),n.callOnCompleteCallback(t,r,i)})},cl.prototype.onDisconnectSet=function(e,t,n){var r=this,i=Xs(t);this.server_.onDisconnectPut(e.toString(),i.val(!0),function(t,o){"ok"===t&&r.onDisconnect_.remember(e,i),r.callOnCompleteCallback(n,t,o)})},cl.prototype.onDisconnectSetWithPriority=function(e,t,n,r){var i=this,o=Xs(t,n);this.server_.onDisconnectPut(e.toString(),o.val(!0),function(t,n){"ok"===t&&i.onDisconnect_.remember(e,o),i.callOnCompleteCallback(r,t,n)})},cl.prototype.onDisconnectUpdate=function(e,t,n){var r=this;if(ho(t))return Xo("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(e.toString(),t,function(i,o){"ok"===i&&va(t,function(t,n){var i=Xs(n);r.onDisconnect_.remember(e.child(t),i)}),r.callOnCompleteCallback(n,i,o)})},cl.prototype.addEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},cl.prototype.removeEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},cl.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(sl)},cl.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(sl)},cl.prototype.stats=function(e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var t;t=e?(this.statsListener_||(this.statsListener_=new Tc(this.stats_)),this.statsListener_.get()):this.stats_.get();var n=Object.keys(t).reduce(function(e,t){return Math.max(t.length,e)},0);va(t,function(e,t){for(var r=e,i=e.length;i<n+2;i++)r+=" ";console.log(r+t)})}},cl.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},cl.prototype.log_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),Xo.apply(void 0,ji([n],e))},cl.prototype.callOnCompleteCallback=function(e,t,n){e&&wa(function(){if("ok"==t)e(null);else{var r=(t||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,e(o)}})},Object.defineProperty(cl.prototype,"database",{get:function(){return this.__database||(this.__database=new xl(this))},enumerable:!0,configurable:!0}),cl);function cl(e,t,n){var i,o=this;if(this.repoInfo_=e,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ic,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new mu,this.persistentConnection_=null,i="undefined"!=typeof r&&Object({NODE_ENV:"production",PUBLIC_URL:"."})[ca]?new gc(n):new dc(n),this.stats_=_c.getCollection(e),t||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new ol(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var a=n.options.databaseAuthVariableOverride;if(null!=a){if("object"!=typeof a)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{so(a)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}this.persistentConnection_=new nl(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,a),this.server_=this.persistentConnection_}i.addTokenChangeListener(function(e){o.server_.refreshAuthToken(e)}),this.statsReporter_=_c.getOrCreateReporter(e,function(){return new Cc(o.stats_,o.server_)}),this.transactions_init_(),this.infoData_=new fc,this.infoSyncTree_=new lc({startListening:function(e,t,n,r){var i=[],a=o.infoData_.getNode(e.path);return a.isEmpty()||(i=o.infoSyncTree_.applyServerOverwrite(e.path,a),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new lc({startListening:function(e,t,n,r){return o.server_.listen(e,n,t,function(t,n){var i=r(t,n);o.eventQueue_.raiseEventsForChangedPath(e.path,i)}),[]},stopListening:function(e,t){o.server_.unlisten(e,t)}})}var ll=(hl.prototype.getStartPost=function(){return this.startPost_},hl.prototype.getEndPost=function(){return this.endPost_},hl.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},hl.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new is(t,n))||(n=zs.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},hl.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=zs.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(zs.EMPTY_NODE);var i=this;return t.forEachChild(Ts,function(e,t){i.matches(new is(e,t))||(r=r.updateImmediateChild(e,zs.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)},hl.prototype.updatePriority=function(e,t){return e},hl.prototype.filtersNodes=function(){return!0},hl.prototype.getIndexedFilter=function(){return this.indexedFilter_},hl.prototype.getIndex=function(){return this.index_},hl.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},hl.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},hl);function hl(e){this.indexedFilter_=new qu(e.getIndex()),this.index_=e.getIndex(),this.startPost_=hl.getStartPost_(e),this.endPost_=hl.getEndPost_(e)}var fl=(pl.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new is(t,n))||(n=zs.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},pl.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=zs.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=zs.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=t.withIndex(this.index_)).updatePriority(zs.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(e,t){return l(t,e)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)a=i.getNext(),!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,zs.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},pl.prototype.updatePriority=function(e,t){return e},pl.prototype.filtersNodes=function(){return!0},pl.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},pl.prototype.getIndex=function(){return this.index_},pl.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(e,t){return a(t,e)}}else o=this.index_.getCompare();var s=e;Wi(s.numChildren()==this.limit_,"");var u=new is(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name==t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(l&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(Uu.childChangedChange(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(Uu.childRemovedChange(t,h));var d=s.updateImmediateChild(t,zs.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Uu.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?e:l&&0<=o(c,u)?(null!=i&&(i.trackChildChange(Uu.childRemovedChange(c.name,c.node)),i.trackChildChange(Uu.childAddedChange(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,zs.EMPTY_NODE)):e},pl);function pl(e){this.rangedFilter_=new ll(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}var dl=(ml.prototype.hasStart=function(){return this.startSet_},ml.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===ml.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},ml.prototype.getIndexStartValue=function(){return Wi(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},ml.prototype.getIndexStartName=function(){return Wi(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:da},ml.prototype.hasEnd=function(){return this.endSet_},ml.prototype.getIndexEndValue=function(){return Wi(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},ml.prototype.getIndexEndName=function(){return Wi(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ma},ml.prototype.hasLimit=function(){return this.limitSet_},ml.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},ml.prototype.getLimit=function(){return Wi(this.limitSet_,"Only valid if limit has been set"),this.limit_},ml.prototype.getIndex=function(){return this.index_},ml.prototype.copy_=function(){var e=new ml;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},ml.prototype.limit=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="",t},ml.prototype.limitToFirst=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_=ml.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,t},ml.prototype.limitToLast=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_=ml.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,t},ml.prototype.startAt=function(e,t){var n=this.copy_();return n.startSet_=!0,void 0===e&&(e=null),n.indexStartValue_=e,null!=t?(n.startNameSet_=!0,n.indexStartName_=t):(n.startNameSet_=!1,n.indexStartName_=""),n},ml.prototype.endAt=function(e,t){var n=this.copy_();return n.endSet_=!0,void 0===e&&(e=null),n.indexEndValue_=e,void 0!==t?(n.endNameSet_=!0,n.indexEndName_=t):(n.endNameSet_=!1,n.indexEndName_=""),n},ml.prototype.orderBy=function(e){var t=this.copy_();return t.index_=e,t},ml.prototype.getQueryObject=function(){var e=ml.WIRE_PROTOCOL_CONSTANTS_,t={};if(this.startSet_&&(t[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(t[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(t[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(t[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){t[e.LIMIT]=this.limit_;var n=this.viewFrom_;""===n&&(n=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),t[e.VIEW_FROM]=n}return this.index_!==Ts&&(t[e.INDEX]=this.index_.toString()),t},ml.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},ml.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==Ts},ml.prototype.getNodeFilter=function(){return this.loadsAllData()?new qu(this.getIndex()):this.hasLimit()?new fl(this):new ll(this)},ml.prototype.toRestQueryStringParameters=function(){var e,t=ml.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(e=this.index_===Ts?t.PRIORITY_INDEX:this.index_===Zs?t.VALUE_INDEX:this.index_===ps?t.KEY_INDEX:(Wi(this.index_ instanceof eu,"Unrecognized index type!"),this.index_.toString()),n[t.ORDER_BY]=so(e),this.startSet_&&(n[t.START_AT]=so(this.indexStartValue_),this.startNameSet_&&(n[t.START_AT]+=","+so(this.indexStartName_))),this.endSet_&&(n[t.END_AT]=so(this.indexEndValue_),this.endNameSet_&&(n[t.END_AT]+=","+so(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[t.LIMIT_TO_FIRST]=this.limit_:n[t.LIMIT_TO_LAST]=this.limit_)),n},ml.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},ml.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},ml.DEFAULT=new ml,ml);function ml(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ts}var yl,gl=(Ri(vl,yl=pu),vl.prototype.getKey=function(){return Eo("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},vl.prototype.child=function(e){return Eo("Reference.child",1,1,arguments.length),"number"==typeof e?e=String(e):e instanceof Sa||(null===this.path.getFront()?Va("Reference.child",1,t=(t=e)&&t.replace(/^\/*\.info(\/|$)/,"/"),!1):Va("Reference.child",1,e,!1)),new vl(this.repo,this.path.child(e));var t},vl.prototype.getParent=function(){Eo("Reference.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new vl(this.repo,e)},vl.prototype.getRoot=function(){Eo("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},vl.prototype.databaseProp=function(){return this.repo.database},vl.prototype.set=function(e,t){Eo("Reference.set",1,2,arguments.length),Wa("Reference.set",this.path),Fa("Reference.set",1,e,this.path,!1),So("Reference.set",2,t,!0);var n=new Gi;return this.repo.setWithPriority(this.path,e,null,n.wrapCallback(t)),n.promise},vl.prototype.update=function(e,t){if(Eo("Reference.update",1,2,arguments.length),Wa("Reference.update",this.path),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,ea("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ua("Reference.update",1,e,this.path,!1),So("Reference.update",2,t,!0);var i=new Gi;return this.repo.update(this.path,e,i.wrapCallback(t)),i.promise},vl.prototype.setWithPriority=function(e,t,n){if(Eo("Reference.setWithPriority",2,3,arguments.length),Wa("Reference.setWithPriority",this.path),Fa("Reference.setWithPriority",1,e,this.path,!1),ja("Reference.setWithPriority",2,t,!1),So("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new Gi;return this.repo.setWithPriority(this.path,e,t,r.wrapCallback(n)),r.promise},vl.prototype.remove=function(e){return Eo("Reference.remove",0,1,arguments.length),Wa("Reference.remove",this.path),So("Reference.remove",1,e,!0),this.set(null,e)},vl.prototype.transaction=function(e,t,n){if(Eo("Reference.transaction",1,3,arguments.length),Wa("Reference.transaction",this.path),So("Reference.transaction",1,e,!1),So("Reference.transaction",2,t,!0),function(e,t,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error(To("Reference.transaction",3,!0)+"must be a boolean.")}(0,0,n),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new Gi;return"function"==typeof t&&r.promise.catch(function(){}),this.repo.startTransaction(this.path,e,function(e,n,i){e?r.reject(e):r.resolve(new Ja(n,i)),"function"==typeof t&&t(e,n,i)},n),r.promise},vl.prototype.setPriority=function(e,t){Eo("Reference.setPriority",1,2,arguments.length),Wa("Reference.setPriority",this.path),ja("Reference.setPriority",1,e,!1),So("Reference.setPriority",2,t,!0);var n=new Gi;return this.repo.setWithPriority(this.path.child(".priority"),e,null,n.wrapCallback(t)),n.promise},vl.prototype.push=function(e,t){Eo("Reference.push",0,2,arguments.length),Wa("Reference.push",this.path),Fa("Reference.push",1,e,this.path,!0),So("Reference.push",2,t,!0);var n,r=this.repo.serverTime(),i=rs(r),o=this.child(i),a=this.child(i);return n=null!=e?o.set(e,t).then(function(){return a}):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof t&&n.catch(function(){}),o},vl.prototype.onDisconnect=function(){return Wa("Reference.onDisconnect",this.path),new Xa(this.repo,this.path)},Object.defineProperty(vl.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(vl.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(vl.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(vl.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),vl);function vl(e,t){if(!(e instanceof ul))throw new Error("new Reference() no longer supported - use app.database().");return yl.call(this,e,t,dl.DEFAULT,!1)||this}pu.__referenceConstructor=gl,nc.__referenceConstructor=gl;var bl,wl,_l=function(){this.children={},this.childCount=0,this.value=null},El=(Tl.prototype.subTree=function(e){for(var t,n=e instanceof Sa?e:new Sa(e),r=this;null!==(t=n.getFront());)r=new Tl(t,r,lo(r.node_.children,t)||new _l),n=n.popFront();return r},Tl.prototype.getValue=function(){return this.node_.value},Tl.prototype.setValue=function(e){Wi(void 0!==e,"Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},Tl.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},Tl.prototype.hasChildren=function(){return 0<this.node_.childCount},Tl.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},Tl.prototype.forEachChild=function(e){var t=this;va(this.node_.children,function(n,r){e(new Tl(n,t,r))})},Tl.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},Tl.prototype.forEachAncestor=function(e,t){for(var n=t?this:this.parent();null!==n;){if(e(n))return!0;n=n.parent()}return!1},Tl.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},Tl.prototype.path=function(){return new Sa(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},Tl.prototype.name=function(){return this.name_},Tl.prototype.parent=function(){return this.parent_},Tl.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},Tl.prototype.updateChild_=function(e,t){var n=t.isEmpty(),r=co(this.node_.children,e);n&&r?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[e]=t.node_,this.node_.childCount++,this.updateParents_())},Tl);function Tl(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n=new _l),this.name_=e,this.parent_=t,this.node_=n}(wl=bl=bl||{})[wl.RUN=0]="RUN",wl[wl.SENT=1]="SENT",wl[wl.COMPLETED=2]="COMPLETED",wl[wl.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",wl[wl.NEEDS_ABORT=4]="NEEDS_ABORT",ul.MAX_TRANSACTION_RETRIES_=25,ul.prototype.transactions_init_=function(){this.transactionQueueTree_=new El},ul.prototype.startTransaction=function(e,t,n,r){function i(){}this.log_("transaction on "+e);var o=new gl(this,e);o.on("value",i);var a={path:e,update:t,onComplete:n,status:null,order:la(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=this.getLatestState_(e);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var c=new nu(a.currentInputSnapshot,new gl(this,a.path),Ts);a.onComplete(null,!1,c)}}else{Ya("transaction failed: Data returned ",u,a.path),a.status=bl.RUN;var l=this.transactionQueueTree_.subTree(e),h=l.getValue()||[];h.push(a),l.setValue(h);var f=void 0;"object"==typeof u&&null!==u&&co(u,".priority")?(f=lo(u,".priority"),Wi(La(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(this.serverSyncTree_.calcCompleteEventCache(e)||zs.EMPTY_NODE).getPriority().val(),f=f;var p=this.generateServerValues(),d=Xs(u,f),m=wu(d,p);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=m,a.currentWriteId=this.getNextWriteId_();var y=this.serverSyncTree_.applyUserOverwrite(e,m,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(e,y),this.sendReadyTransactions_()}},ul.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||zs.EMPTY_NODE},ul.prototype.sendReadyTransactions_=function(e){var t=this;if(void 0===e&&(e=this.transactionQueueTree_),e||this.pruneCompletedTransactionsBelowNode_(e),null!==e.getValue()){var n=this.buildTransactionQueue_(e);Wi(0<n.length,"Sending zero length transaction queue"),n.every(function(e){return e.status===bl.RUN})&&this.sendTransactionQueue_(e.path(),n)}else e.hasChildren()&&e.forEachChild(function(e){t.sendReadyTransactions_(e)})},ul.prototype.sendTransactionQueue_=function(e,t){for(var n=this,r=t.map(function(e){return e.currentWriteId}),i=this.getLatestState_(e,r),o=i,a=i.hash(),s=0;s<t.length;s++){var u=t[s];Wi(u.status===bl.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=bl.SENT,u.retryCount++;var c=Sa.relativePath(e,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var l=o.val(!0),h=e;this.server_.put(h.toString(),l,function(r){n.log_("transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<t.length;a++){if(t[a].status=bl.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(t[a].currentWriteId)),t[a].onComplete){var s=t[a].currentOutputSnapshotResolved,u=new gl(n,t[a].path),c=new nu(s,u,Ts);o.push(t[a].onComplete.bind(null,null,!0,c))}t[a].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(e)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(e,i),a=0;a<o.length;a++)wa(o[a])}else{if("datastale"===r)for(a=0;a<t.length;a++)t[a].status===bl.SENT_NEEDS_ABORT?t[a].status=bl.NEEDS_ABORT:t[a].status=bl.RUN;else for(ea("transaction at "+h.toString()+" failed: "+r),a=0;a<t.length;a++)t[a].status=bl.NEEDS_ABORT,t[a].abortReason=r;n.rerunTransactions_(e)}},a)},ul.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),n=t.path(),r=this.buildTransactionQueue_(t);return this.rerunTransactionQueue_(r,n),n},ul.prototype.rerunTransactionQueue_=function(e,t){if(0!==e.length){for(var n,r=[],i=[],o=e.filter(function(e){return e.status===bl.RUN}).map(function(e){return e.currentWriteId}),a=0;a<e.length;a++){var s=e[a],u=Sa.relativePath(t,s.path),c=!1,l=void 0;if(Wi(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===bl.NEEDS_ABORT)c=!0,l=s.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===bl.RUN)if(s.retryCount>=ul.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var h=this.getLatestState_(s.path,o);s.currentInputSnapshot=h;var f=e[a].update(h.val());if(void 0!==f){Ya("transaction failed: Data returned ",f,s.path);var p=Xs(f);"object"==typeof f&&null!=f&&co(f,".priority")||(p=p.updatePriority(h.getPriority()));var d=s.currentWriteId,m=this.generateServerValues(),y=wu(p,m);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=y,s.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(d),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(s.path,y,s.currentWriteId,s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,l="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(t,i),i=[],c&&(e[a].status=bl.COMPLETED,n=e[a].unwatcher,setTimeout(n,Math.floor(0)),e[a].onComplete))if("nodata"===l){var g=new gl(this,e[a].path),v=e[a].currentInputSnapshot,b=new nu(v,g,Ts);r.push(e[a].onComplete.bind(null,null,!1,b))}else r.push(e[a].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),a=0;a<r.length;a++)wa(r[a]);this.sendReadyTransactions_()}},ul.prototype.getAncestorTransactionNode_=function(e){for(var t,n=this.transactionQueueTree_;null!==(t=e.getFront())&&null===n.getValue();)n=n.subTree(t),e=e.popFront();return n},ul.prototype.buildTransactionQueue_=function(e){var t=[];return this.aggregateTransactionQueuesForNode_(e,t),t.sort(function(e,t){return e.order-t.order}),t},ul.prototype.aggregateTransactionQueuesForNode_=function(e,t){var n=this,r=e.getValue();if(null!==r)for(var i=0;i<r.length;i++)t.push(r[i]);e.forEachChild(function(e){n.aggregateTransactionQueuesForNode_(e,t)})},ul.prototype.pruneCompletedTransactionsBelowNode_=function(e){var t=this,n=e.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==bl.COMPLETED&&(n[r]=n[i],r++);n.length=r,e.setValue(0<n.length?n:null)}e.forEachChild(function(e){t.pruneCompletedTransactionsBelowNode_(e)})},ul.prototype.abortTransactions_=function(e){var t=this,n=this.getAncestorTransactionNode_(e).path(),r=this.transactionQueueTree_.subTree(e);return r.forEachAncestor(function(e){t.abortTransactionsOnNode_(e)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(e){t.abortTransactionsOnNode_(e)}),n},ul.prototype.abortTransactionsOnNode_=function(e){var t=e.getValue();if(null!==t){for(var n=[],r=[],i=-1,o=0;o<t.length;o++)t[o].status===bl.SENT_NEEDS_ABORT||(t[o].status===bl.SENT?(Wi(i===o-1,"All SENT items should be at beginning of queue."),t[i=o].status=bl.SENT_NEEDS_ABORT,t[o].abortReason="set"):(Wi(t[o].status===bl.RUN,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(t[o].currentWriteId,!0)),t[o].onComplete&&n.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?e.setValue(null):t.length=i+1,this.eventQueue_.raiseEventsForChangedPath(e.path(),r),o=0;o<n.length;o++)wa(n[o])}};var Sl,Cl="databaseURL",kl=(Il.getInstance=function(){return Sl=Sl||new Il},Il.prototype.interrupt=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].interrupt()},Il.prototype.resume=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].resume()},Il.prototype.databaseFromApp=function(e,t){var n=t||e.options[Cl];void 0===n&&Zo("Can't determine Firebase Database URL.  Be sure to include "+Cl+" option when calling firebase.initializeApp().");var i=Ra(n),o=i.repoInfo,a=void 0;return"undefined"!=typeof r&&(a=Object({NODE_ENV:"production",PUBLIC_URL:"."})[ca]),a&&(n="http://"+a+"?ns="+o.namespace,o=(i=Ra(n)).repoInfo),za("Invalid Firebase Database URL",1,i),i.path.isEmpty()||Zo("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(o,e).database},Il.prototype.deleteRepo=function(e){var t=lo(this.repos_,e.app.name);t&&lo(t,e.repoInfo_.toURLString())===e||Zo("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),e.interrupt(),delete t[e.repoInfo_.toURLString()]},Il.prototype.createRepo=function(e,t){var n=lo(this.repos_,t.name);n||(n={},this.repos_[t.name]=n);var r=lo(n,e.toURLString());return r&&Zo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new ul(e,this.useRestClient_,t),n[e.toURLString()]=r},Il.prototype.forceRestClient=function(e){this.useRestClient_=e},Il);function Il(){this.repos_={},this.useRestClient_=!1}var xl=(Object.defineProperty(Nl.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),Nl.prototype.ref=function(e){return this.checkDeleted_("ref"),Eo("database.ref",0,1,arguments.length),e instanceof gl?this.refFromURL(e.toString()):void 0!==e?this.root_.child(e):this.root_},Nl.prototype.refFromURL=function(e){var t="database.refFromURL";this.checkDeleted_(t),Eo(t,1,1,arguments.length);var n=Ra(e);za(t,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&Zo(t+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},Nl.prototype.checkDeleted_=function(e){null===this.repo_&&Zo("Cannot call "+e+" on a deleted database.")},Nl.prototype.goOffline=function(){Eo("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},Nl.prototype.goOnline=function(){Eo("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},Nl.ServerValue={TIMESTAMP:{".sv":"timestamp"}},Nl);function Nl(e){(this.repo_=e)instanceof ul||Zo("Don't call new Database() directly - please use firebase.database()."),this.root_=new gl(e,Sa.Empty),this.INTERNAL=new Al(this)}var Al=(Ol.prototype.delete=function(){return Mi(this,void 0,void 0,function(){return Li(this,function(e){return this.database.checkDeleted_("delete"),kl.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},Ol);function Ol(e){this.database=e}var Dl=Object.freeze({forceLongPolling:function(){Qc.forceDisallow(),Bc.forceAllow()},forceWebSockets:function(){Bc.forceDisallow()},isWebSocketsAvailable:function(){return Qc.isAvailable()},setSecurityDebugCallback:function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){e.repo.stats(t)},statsIncrementCounter:function(e,t){e.repo.statsIncrementCounter(t)},dataUpdateCount:function(e){return e.repo.dataUpdateCount},interceptServerData:function(e,t){return e.repo.interceptServerData_(t)}}),Rl=nl;nl.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},nl.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var Pl,Ml,Ll=$c,Fl=Oa,Ul=Object.freeze({DataConnection:Rl,RealTimeConnection:Ll,hijackHash:function(e){var t=nl.prototype.put;return nl.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){nl.prototype.put=t}},ConnectionTarget:Fl,queryIdentifier:function(e){return e.queryIdentifier()},forceRestClient:function(e){kl.getInstance().forceRestClient(e)}}),jl=xl.ServerValue;Pl=(Ml=Vo).SDK_VERSION,Hc=Pl,Ml.INTERNAL.registerService("database",function(e,t,n){return kl.getInstance().databaseFromApp(e,n)},{Reference:gl,Query:pu,Database:xl,DataSnapshot:nu,enableLogging:Yo,INTERNAL:Dl,ServerValue:jl,TEST_ACCESS:Ul},null,!0);var ql,Bl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{},Vl=Vl||{},Wl=Bl;function zl(e){return"string"==typeof e}function Hl(e){return"number"==typeof e}function Kl(e,t){e=e.split("."),t=t||Wl;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function Ql(){}function Gl(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function Yl(e){return"array"==Gl(e)}function Xl(e){var t=Gl(e);return"array"==t||"object"==t&&"number"==typeof e.length}function $l(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Jl="closure_uid_"+(1e9*Math.random()>>>0),Zl=0;function eh(e,t,n){return e.call.apply(e.bind,arguments)}function th(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function nh(e,t,n){return(nh=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?eh:th).apply(null,arguments)}function rh(e){var t=Array.prototype.slice.call(arguments,1);return function(){var n=t.slice();return n.push.apply(n,arguments),e.apply(this,n)}}var ih=Date.now||function(){return+new Date};function oh(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,(e.prototype.constructor=e).yb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function ah(){this.j=this.j,this.i=this.i}ah.prototype.j=!1,ah.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[Jl]||(this[Jl]=++Zl))},ah.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var sh=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(zl(e))return zl(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},uh=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=zl(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function ch(){return Array.prototype.concat.apply([],arguments)}function lh(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function hh(e){return/^[\s\xa0]*$/.test(e)}var fh,ph=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function dh(e,t){return-1!=e.indexOf(t)}function mh(e,t){return e<t?-1:t<e?1:0}e:{var yh=Wl.navigator;if(yh){var gh=yh.userAgent;if(gh){fh=gh;break e}}fh=""}function vh(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function bh(e){var t,n={};for(t in e)n[t]=e[t];return n}var wh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _h(e){for(var t,n,r=1;r<arguments.length;r++){for(t in n=arguments[r])e[t]=n[t];for(var i=0;i<wh.length;i++)t=wh[i],Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}}function Eh(e){return Eh[" "](e),e}Eh[" "]=Ql;var Th,Sh,Ch=dh(fh,"Opera"),kh=dh(fh,"Trident")||dh(fh,"MSIE"),Ih=dh(fh,"Edge"),xh=Ih||kh,Nh=dh(fh,"Gecko")&&!(dh(fh.toLowerCase(),"webkit")&&!dh(fh,"Edge"))&&!(dh(fh,"Trident")||dh(fh,"MSIE"))&&!dh(fh,"Edge"),Ah=dh(fh.toLowerCase(),"webkit")&&!dh(fh,"Edge");function Oh(){var e=Wl.document;return e?e.documentMode:void 0}e:{var Dh="",Rh=(Sh=fh,Nh?/rv:([^\);]+)(\)|;)/.exec(Sh):Ih?/Edge\/([\d\.]+)/.exec(Sh):kh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Sh):Ah?/WebKit\/(\S+)/.exec(Sh):Ch?/(?:Version)[ \/]?(\S+)/.exec(Sh):void 0);if(Rh&&(Dh=Rh?Rh[1]:""),kh){var Ph=Oh();if(null!=Ph&&Ph>parseFloat(Dh)){Th=String(Ph);break e}}Th=Dh}var Mh,Lh={};function Fh(e){return function(t,n){var r=Lh;return Object.prototype.hasOwnProperty.call(r,t)?r[t]:r[t]=function(){for(var t=0,n=ph(String(Th)).split("."),r=ph(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=mh(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||mh(0==a[2].length,0==s[2].length)||mh(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}()}(e)}var Uh=Wl.document;Mh=Uh&&kh?Oh()||("CSS1Compat"==Uh.compatMode?parseInt(Th,10):5):void 0;var jh=!kh||9<=Number(Mh),qh=kh&&!Fh("9"),Bh=function(){if(!Wl.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Wl.addEventListener("test",Ql,t),Wl.removeEventListener("test",Ql,t)}catch(e){}return e}();function Vh(e,t){this.type=e,this.a=this.target=t,this.Ja=!0}function Wh(e,t){if(Vh.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(Nh){e:{try{Eh(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=zl(e.pointerType)?e.pointerType:zh[e.pointerType]||"",(this.c=e).defaultPrevented&&this.b()}}Vh.prototype.b=function(){this.Ja=!1},oh(Wh,Vh);var zh={2:"touch",3:"pen",4:"mouse"};Wh.prototype.b=function(){Wh.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,qh)try{(e.ctrlKey||112<=e.keyCode&&e.keyCode<=123)&&(e.keyCode=-1)}catch(e){}};var Hh="closure_listenable_"+(1e6*Math.random()|0),Kh=0;function Qh(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++Kh,this.X=this.Z=!1}function Gh(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function Yh(e){this.src=e,this.a={},this.b=0}function Xh(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=sh(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Gh(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function $h(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==r)return i}return-1}Yh.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=$h(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new Qh(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var Jh="closure_lm_"+(1e6*Math.random()|0),Zh={};function ef(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(Yl(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}return r=cf(r),t&&t[Hh]?t.Ba(n,r,$l(i)?!!i.capture:!!i,o):tf(t,n,r,!0,i,o)}(e,t,n,r,i);if(Yl(t)){for(var o=0;o<t.length;o++)ef(e,t[o],n,r,i);return null}return n=cf(n),e&&e[Hh]?e.Aa(t,n,$l(r)?!!r.capture:!!r,i):tf(e,t,n,!1,r,i)}function tf(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=$l(i)?!!i.capture:!!i;if(a&&!jh)return null;var s=sf(e);if(s||(e[Jh]=s=new Yh(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=af,t=jh?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),(n.proxy=r).src=e,r.listener=n,e.addEventListener)Bh||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(rf(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function nf(e){if(!Hl(e)&&e&&!e.X){var t=e.src;if(t&&t[Hh])Xh(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(rf(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=sf(t))?(Xh(n,e),0==n.b&&(n.src=null,t[Jh]=null)):Gh(e)}}}function rf(e){return e in Zh?Zh[e]:Zh[e]="on"+e}function of(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&nf(e),n.call(r,t)}function af(e,t){return!!e.X||of(e,jh?new Wh(t,this):t=new Wh(t||Kl("window.event"),this))}function sf(e){return(e=e[Jh])instanceof Yh?e:null}var uf="__closure_events_fn_"+(1e9*Math.random()>>>0);function cf(e){return"function"==Gl(e)?e:(e[uf]||(e[uf]=function(t){return e.handleEvent(t)}),e[uf])}function lf(){ah.call(this),this.c=new Yh(this),(this.J=this).B=null}function hf(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&Xh(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ja}oh(lf,ah),lf.prototype[Hh]=!0,(ql=lf.prototype).addEventListener=function(e,t,n,r){ef(this,e,t,n,r)},ql.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(Yl(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);else i=$l(i)?!!i.capture:!!i,r=cf(r),t&&t[Hh]?(t=t.c,(n=String(n).toString())in t.a&&-1<(r=$h(a=t.a[n],r,i,o))&&(Gh(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.a[n],t.b--))):(t=t&&sf(t))&&(n=t.a[n.toString()],t=-1,n&&(t=$h(n,r,i,o)),(r=-1<t?n[t]:null)&&nf(r))}(this,e,t,n,r)},ql.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var r=e.type||e;if(zl(e))e=new Vh(e,n);else if(e instanceof Vh)e.target=e.target||n;else{var i=e;_h(e=new Vh(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.a=t[o];i=hf(a,r,!0,e)&&i}if(i=hf(a=e.a=n,r,!0,e)&&i,i=hf(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=hf(a=e.a=t[o],r,!1,e)&&i;return i},ql.G=function(){if(lf.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)Gh(n[r]);delete t.a[e],t.b--}}this.B=null},ql.Aa=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},ql.Ba=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var ff=Wl.JSON.stringify;function pf(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function df(){this.b=this.a=null}pf.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var mf,yf=new pf(function(){return new gf},function(e){e.reset()});function gf(){this.next=this.b=this.a=null}function vf(e){Wl.setTimeout(function(){throw e},0)}function bf(e,t){mf||function(){var e=Wl.Promise.resolve(void 0);mf=function(){e.then(Ef)}}(),wf||(mf(),wf=!0),_f.add(e,t)}df.prototype.add=function(e,t){var n=yf.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},gf.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null};var wf=!(gf.prototype.reset=function(){this.next=this.b=this.a=null}),_f=new df;function Ef(){for(var e;r=n=void 0,r=null,(n=_f).a&&(r=n.a,n.a=n.a.next,n.a||(n.b=null),r.next=null),e=r;){try{e.a.call(e.b)}catch(e){vf(e)}var t=yf;t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}var n,r;wf=!1}function Tf(e,t){lf.call(this),this.b=e||1,this.a=t||Wl,this.f=nh(this.gb,this),this.g=ih()}function Sf(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function Cf(e,t,n){if("function"==Gl(e))n&&(e=nh(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=nh(e.handleEvent,e)}return 2147483647<Number(t)?-1:Wl.setTimeout(e,t||0)}function kf(e,t,n){ah.call(this),this.f=null!=n?nh(e,n):e,this.c=t,this.b=nh(this.ab,this),this.a=[]}function If(e){e.U=Cf(e.b,e.c),e.f.apply(null,e.a)}function xf(e){ah.call(this),this.b=e,this.a={}}oh(Tf,lf),(ql=Tf.prototype).ba=!1,ql.L=null,ql.gb=function(){if(this.ba){var e=ih()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Sf(this),this.start()))}},ql.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=ih())},ql.G=function(){Tf.N.G.call(this),Sf(this),delete this.a},oh(kf,ah),(ql=kf.prototype).ea=!1,ql.U=null,ql.Ua=function(e){this.a=arguments,this.U?this.ea=!0:If(this)},ql.G=function(){kf.N.G.call(this),this.U&&(Wl.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},ql.ab=function(){this.U=null,this.ea&&(this.ea=!1,If(this))},oh(xf,ah);var Nf=[];function Af(e,t,n,r){Yl(n)||(n&&(Nf[0]=n.toString()),n=Nf);for(var i=0;i<n.length;i++){var o=ef(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function Of(e){vh(e.a,function(e,t){this.a.hasOwnProperty(t)&&nf(e)},e),e.a={}}function Df(){}xf.prototype.G=function(){xf.N.G.call(this),Of(this)},xf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rf=new lf;function Pf(e){Vh.call(this,"serverreachability",e)}function Mf(e){Rf.dispatchEvent(new Pf(Rf,e))}function Lf(e){Vh.call(this,"statevent",e)}function Ff(e){Rf.dispatchEvent(new Lf(Rf,e))}function Uf(e){Vh.call(this,"timingevent",e)}function jf(e,t){if("function"!=Gl(e))throw Error("Fn must not be null and must be a function");return Wl.setTimeout(function(){e()},t)}oh(Pf,Vh),oh(Lf,Vh),oh(Uf,Vh);var qf={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},Bf={jb:"complete",wb:"success",Na:"error",Ma:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function Vf(){}function Wf(e){var t;return(t=e.a)||(t=e.a={}),t}function zf(){}Vf.prototype.a=null;var Hf,Kf={OPEN:"a",ib:"b",Na:"c",rb:"d"};function Qf(){Vh.call(this,"d")}function Gf(){Vh.call(this,"c")}function Yf(){}function Xf(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new xf(this),this.O=$f,e=xh?125:void 0,this.P=new Tf(e),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}oh(Qf,Vh),oh(Gf,Vh),oh(Yf,Vf),Hf=new Yf;var $f=45e3,Jf={},Zf={};function ep(e,t,n){e.F=1,e.f=Cp(vp(t)),e.l=n,e.H=!0,np(e,null)}function tp(e,t,n,r){e.F=1,e.f=Cp(vp(t)),e.l=null,e.H=n,np(e,r)}function np(e,t){e.v=ih(),op(e),e.D=vp(e.f),Sp(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new kf(nh(e.Ka,e,e.a),e.J)),Af(e.I,e.a,"readystatechange",e.eb),t=e.h?bh(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),Mf(1)}function rp(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var i=ip(e,n);if(i==Zf){4==t&&(e.c=4,Ff(14),r=!1);break}if(i==Jf){e.c=4,Ff(15),r=!1;break}lp(e,i)}4==t&&0==n.length&&(e.c=1,Ff(16),r=!1),e.b=e.b&&r,r||(cp(e),up(e))}function ip(e,t){var n=e.A,r=t.indexOf("\n",n);return-1==r?Zf:(n=Number(t.substring(n,r)),isNaN(n)?Jf:(r+=1)+n>t.length?Zf:(t=t.substr(r,n),e.A=r+n,t))}function op(e){e.R=ih()+e.O,ap(e,e.O)}function ap(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=jf(nh(e.bb,e),t)}function sp(e){e.i&&(Wl.clearTimeout(e.i),e.i=null)}function up(e){e.g.Da()||e.m||e.g.na(e)}function cp(e){sp(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,Sf(e.P),Of(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function lp(e,t){try{e.g.Ga(e,t),Mf(4)}catch(e){}}function hp(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Xl(e)||zl(e))uh(e,t,void 0);else{if(e.K&&"function"==typeof e.K)var n=e.K();else if(e.C&&"function"==typeof e.C)n=void 0;else if(Xl(e)||zl(e)){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.C&&"function"==typeof e.C)return e.C();if(zl(e))return e.split("");if(Xl(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function fp(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof fp)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function pp(e,t){mp(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&dp(e))}function dp(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];mp(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)mp(i,r=e.a[t])||(i[e.a[n++]=r]=1),t++;e.a.length=n}}function mp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(ql=Xf.prototype).setTimeout=function(e){this.O=e},ql.eb=function(e){e=e.target;var t=this.B;t&&3==gd(e)?t.Ua():this.Ka(e)},ql.Ka=function(e){try{if(e==this.a)e:{var t=gd(this.a),n=this.a.ya(),r=this.a.T();if(!(t<3||3==t&&!xh&&!this.a.aa())){this.m||4!=t||7==n||Mf(8==n||r<=0?3:2),sp(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){t:{if(this.a){var a=vd(this.a,"X-HTTP-Initial-Response");if(a&&!hh(a)){var s=a;break t}}s=null}if(!s){this.b=!1,this.c=3,Ff(12),cp(this),up(this);break e}this.s=!0,lp(this,s)}this.H?(rp(this,t,o),xh&&this.b&&3==t&&(Af(this.I,this.P,"tick",this.cb),this.P.start())):lp(this,o),4==t&&cp(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,op(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Ff(12)):(this.c=0,Ff(13)),cp(this),up(this)}}}catch(e){}},ql.cb=function(){if(this.a){var e=gd(this.a),t=this.a.aa();this.A<t.length&&(sp(this),rp(this,e,t),this.b&&4!=e&&op(this))}},ql.cancel=function(){this.m=!0,cp(this)},ql.bb=function(){this.i=null;var e=ih();0<=e-this.R?(2!=this.F&&(Mf(3),Ff(17)),cp(this),this.c=2,up(this)):ap(this,this.R-e)},(ql=fp.prototype).C=function(){dp(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},ql.K=function(){return dp(this),this.a.concat()},ql.get=function(e,t){return mp(this.b,e)?this.b[e]:t},ql.set=function(e,t){mp(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},ql.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var yp=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function gp(e,t){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,e instanceof gp?(this.h=void 0!==t?t:e.h,bp(this,e.f),this.j=e.j,wp(this,e.b),_p(this,e.i),this.a=e.a,Ep(this,jp(e.c)),this.g=e.g):e&&(n=String(e).match(yp))?(this.h=!!t,bp(this,n[1]||"",!0),this.j=kp(n[2]||""),wp(this,n[3]||"",!0),_p(this,n[4]),this.a=kp(n[5]||"",!0),Ep(this,n[6]||"",!0),this.g=kp(n[7]||"")):(this.h=!!t,this.c=new Pp(null,this.h))}function vp(e){return new gp(e)}function bp(e,t,n){e.f=n?kp(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function wp(e,t,n){e.b=n?kp(t,!0):t}function _p(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.i=t}else e.i=null}function Ep(e,t,n){t instanceof Pp?(e.c=t,function(e,t){t&&!e.f&&(Mp(e),e.c=null,e.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Lp(this,t),Up(this,n,e))},e)),e.f=t}(e.c,e.h)):(n||(t=Ip(t,Dp)),e.c=new Pp(t,e.h))}function Tp(e,t,n){e.c.set(t,n)}function Sp(e,t,n){Yl(n)||(n=[String(n)]),Up(e.c,t,n)}function Cp(e){return Tp(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ih()).toString(36)),e}function kp(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ip(e,t,n){return zl(e)?(e=encodeURI(e).replace(t,xp),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function xp(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}gp.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Ip(t,Np,!0),":");var n=this.b;return!n&&"file"!=t||(e.push("//"),(t=this.j)&&e.push(Ip(t,Np,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ip(n,"/"==n.charAt(0)?Op:Ap,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",Ip(n,Rp)),e.join("")},gp.prototype.resolve=function(e){var t=vp(this),n=!!e.f;n?bp(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?wp(t,e.b):n=null!=e.i;var r=e.a;if(n)_p(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=t.a.lastIndexOf("/");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(dh(i,"./")||dh(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.a=r:n=""!==e.c.toString(),n?Ep(t,jp(e.c)):n=!!e.g,n&&(t.g=e.g),t};var Np=/[#\/\?@]/g,Ap=/[#\?:]/g,Op=/[#\?]/g,Dp=/[#\?@]/g,Rp=/#/g;function Pp(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Mp(e){e.a||(e.a=new fp,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Lp(e,t){Mp(e),t=qp(e,t),mp(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,pp(e.a,t))}function Fp(e,t){return Mp(e),t=qp(e,t),mp(e.a.b,t)}function Up(e,t,n){Lp(e,t),0<n.length&&(e.c=null,e.a.set(qp(e,t),lh(n)),e.b+=n.length)}function jp(e){var t=new Pp;return t.c=e.c,e.a&&(t.a=new fp(e.a),t.b=e.b),t}function qp(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function Bp(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function Vp(e){var t=e.a.F.a;if(null!=t)Ff(4),t?(Ff(10),Ad(e.a,e,!1)):(Ff(11),Ad(e.a,e,!0));else{e.b=new Xf(e,void 0,void 0),e.b.h=e.h,t=Md(t=e.a,t.Y()?e.f:null,e.i),Ff(4),Sp(t,"TYPE","xmlhttp");var n=e.a.j,r=e.a.I;n&&r&&Tp(t,n,r),tp(e.b,t,!1,e.f)}}function Wp(){this.a=this.b=null}function zp(){this.a=new fp}function Hp(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[Jl]||(e[Jl]=++Zl)):t.charAt(0)+e}function Kp(e,t){this.b=e,this.a=t}function Qp(e){this.g=e||Gp,e=Wl.PerformanceNavigationTiming?0<(e=Wl.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(Wl.ka&&Wl.ka.Ea&&Wl.ka.Ea()&&Wl.ka.Ea().zb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new zp),this.b=null,this.c=[]}(ql=Pp.prototype).add=function(e,t){Mp(this),this.c=null,e=qp(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},ql.forEach=function(e,t){Mp(this),this.a.forEach(function(n,r){uh(n,function(n){e.call(t,n,r,this)},this)},this)},ql.K=function(){Mp(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},ql.C=function(e){Mp(this);var t=[];if(zl(e))Fp(this,e)&&(t=ch(t,this.a.get(qp(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=ch(t,e[n])}return t},ql.set=function(e,t){return Mp(this),this.c=null,Fp(this,e=qp(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},ql.get=function(e,t){return e&&0<(e=this.C(e)).length?String(e[0]):t},ql.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")},oh(function(){},function(){}),(ql=Bp.prototype).M=null,ql.$=function(e){return this.a.$(e)},ql.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},ql.Da=function(){return!1},ql.Ga=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=vd(e,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(e=vd(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(e){return(t=this.a).m=this.c,void Rd(t,2)}this.f=r[0]}else(t=this.a).m=this.c,Rd(t,2)}else 1==this.M&&(this.g?Ff(6):"11111"==t?(Ff(5),this.g=!0,(!kh||10<=Number(Mh))&&(this.c=200,this.b.cancel(),Ff(11),Ad(this.a,this,!0))):(Ff(7),this.g=!1))},ql.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,Vp(this)):1==this.M&&(this.g?(Ff(11),Ad(this.a,this,!0)):(Ff(10),Ad(this.a,this,!1)));else{0==this.M?Ff(8):1==this.M&&Ff(9);var e=this.a;e.m=this.c,Rd(e,2)}},ql.Y=function(){return this.a.Y()},ql.ma=function(){return this.a.ma()},zp.prototype.add=function(e){this.a.set(Hp(e),e)},zp.prototype.C=function(){return this.a.C()};var Gp=10;function Yp(e,t){!e.a&&(dh(t,"spdy")||dh(t,"quic")||dh(t,"h2"))&&(e.f=e.g,e.a=new zp,e.b&&(Zp(e,e.b),e.b=null))}function Xp(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function $p(e){return e.b?1:e.a?e.a.a.c:0}function Jp(e,t){return e=e.b?e.b==t:!!e.a&&(t=Hp(t),mp(e.a.a.b,t))}function Zp(e,t){e.a?e.a.add(t):e.b=t}function ed(e,t){var n;e.b&&e.b==t?e.b=null:((n=e.a)&&(n=Hp(t),n=mp(e.a.a.b,n)),n&&pp(e.a.a,Hp(t)))}function td(e){if(null!=e.b)return e.c.concat(e.b.j);if(null==e.a||0==e.a.a.c)return lh(e.c);var t=e.c;return uh(e.a.C(),function(e){t=t.concat(e.j)}),t}function nd(){}function rd(){this.a=new nd}function id(e,t,n){var r=n||"";try{hp(e,function(e,n){var i=e;$l(e)&&(i=ff(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function od(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}Qp.prototype.cancel=function(){var e;this.c=td(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(uh(this.a.C(),function(e){e.cancel()}),(e=this.a.a).b={},e.a.length=0,e.c=0)},nd.prototype.stringify=function(e){return Wl.JSON.stringify(e,void 0)},nd.prototype.parse=function(e){return Wl.JSON.parse(e,void 0)};var ad=Wl.JSON.parse;function sd(e){lf.call(this),this.headers=new fp,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=ud,this.D=this.F=!1}oh(sd,lf);var ud="",cd=/^https?$/i,ld=["POST","PUT"];function hd(e){return"content-type"==e.toLowerCase()}function fd(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,pd(e),md(e)}function pd(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function dd(e){if(e.b&&void 0!==Vl&&(!e.s[1]||4!=gd(e)||2!=e.T()))if(e.l&&4==gd(e))Cf(e.Fa,0,e);else if(e.dispatchEvent("readystatechange"),4==gd(e)){e.b=!1;try{var t,n=e.T();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.A).match(yp)[1]||null;if(!o&&Wl.self&&Wl.self.location){var a=Wl.self.location.protocol;o=a.substr(0,a.length-1)}i=!cd.test(o?o.toLowerCase():"")}t=i}t?(e.dispatchEvent("complete"),e.dispatchEvent("success")):(e.h=6,e.f=e.za()+" ["+e.T()+"]",pd(e))}finally{md(e)}}}function md(e,t){if(e.a){yd(e);var n=e.a,r=e.s[0]?Ql:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){}}}function yd(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(Wl.clearTimeout(e.m),e.m=null)}function gd(e){return e.a?e.a.readyState:0}function vd(e,t){return e.a?e.a.getResponseHeader(t):null}function bd(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(n=function(e){var t="";return vh(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),zl(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if((n=e.indexOf("#"))<0&&(n=e.length),(r=e.indexOf("?"))<0||n<r){r=n;var i=""}else i=e.substring(r+1,n);n=(e=[e.substr(0,r),i,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return Tp(e,t,n),e}function wd(e){this.f=[],this.F=new Wp,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!Kl("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=Kl("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Sa=Kl("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Qa=Kl("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=Kl("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.La=e&&e.Ab||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new Qp(e&&e.concurrentRequestLimit),this.ja=new rd,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function _d(e){if(Ed(e),3==e.u){var t=e.P++,n=vp(e.B);Tp(n,"SID",e.H),Tp(n,"RID",t),Tp(n,"TYPE","terminate"),kd(e,n),(t=new Xf(e,t,void 0)).F=2,t.f=Cp(vp(n)),n=!1,Wl.navigator&&Wl.navigator.sendBeacon&&(n=Wl.navigator.sendBeacon(t.f.toString(),"")),!n&&Wl.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=ih(),op(t)}Pd(e)}function Ed(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(Wl.clearTimeout(e.l),e.l=null),Od(e),e.b.cancel(),e.h&&(Hl(e.h)&&Wl.clearTimeout(e.h),e.h=null)}function Td(e,t){e.f.push(new Kp(e.Ra++,t)),3==e.u&&Sd(e)}function Sd(e){Xp(e.b)||e.h||(e.h=!0,bf(e.Ia,e),e.A=0)}function Cd(e,t){var n;n=t?t.W:e.P++;var r=vp(e.B);Tp(r,"SID",e.H),Tp(r,"RID",n),Tp(r,"AID",e.O),kd(e,r),e.g&&e.i&&bd(r,e.g,e.i),n=new Xf(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=Id(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),Zp(e.b,n),ep(n,r,t)}function kd(e,t){e.c&&hp({},function(e,n){Tp(t,n,e)})}function Id(e,t,n){n=Math.min(e.f.length,n);var r=e.c?nh(e.c.Ta,e.c,e):null;e:for(var i=e.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),s=!1;else try{id(l,a,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.f.splice(0,n),t.j=e,r}function xd(e){e.a||e.l||(e.S=1,bf(e.Ha,e),e.v=0)}function Nd(e){return!(e.a||e.l||3<=e.v)&&(e.S++,e.l=jf(nh(e.Ha,e),Dd(e,e.v)),e.v++,!0)}function Ad(e,t,n){var r=t.l;r&&Yp(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=Md(e,null,e.ha),Sd(e)}function Od(e){null!=e.s&&(Wl.clearTimeout(e.s),e.s=null)}function Dd(e,t){var n=e.Oa+Math.floor(Math.random()*e.Sa);return e.ma()||(n*=2),n*t}function Rd(e,t){if(2==t){var n=null;e.c&&(n=null);var r=nh(e.fb,e);n||(n=new gp("//www.google.com/images/cleardot.gif"),Wl.location&&"http"==Wl.location.protocol||bp(n,"https"),Cp(n)),function(e,t){var n=new Df;if(Wl.Image){var r=new Image;r.onload=rh(od,n,r,"TestLoadImage: loaded",!0,t),r.onerror=rh(od,n,r,"TestLoadImage: error",!1,t),r.onabort=rh(od,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=rh(od,n,r,"TestLoadImage: timeout",!1,t),Wl.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ff(2);e.u=0,e.c&&e.c.ta(t),Pd(e),Ed(e)}function Pd(e){e.u=0,e.m=-1,e.c&&(0==td(e.b).length&&0==e.f.length||(e.b.c.length=0,lh(e.f),e.f.length=0),e.c.sa())}function Md(e,t,n){var r=function(e){return e instanceof gp?vp(e):new gp(e,void 0)}(n);if(""!=r.b)t&&wp(r,t+"."+r.b),_p(r,r.i);else{var i,o=Wl.location;i=t?t+"."+o.hostname:o.hostname,r=function(e,t,n,r){var i=new gp(null,void 0);return e&&bp(i,e),t&&wp(i,t),n&&_p(i,n),r&&(i.a=r),i}(o.protocol,i,+o.port,n)}return e.V&&vh(e.V,function(e,t){Tp(r,t,e)}),t=e.j,n=e.I,t&&n&&Tp(r,t,n),Tp(r,"VER",e.wa),kd(e,r),r}function Ld(){}function Fd(){if(kh&&!(10<=Number(Mh)))throw Error("Environmental error: no available transport.")}function Ud(e,t){lf.call(this),this.a=new wd(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:function(e){for(var t=e,n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?t=i:((r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),t+=r?i:"/"+i)}return t}(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!hh(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!hh(t)&&(this.a.j=t,null!==(e=this.b)&&t in e&&t in(e=this.b)&&delete e[t]),this.f=new Bd(this)}function jd(e){Qf.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function qd(){Gf.call(this),this.status=1}function Bd(e){this.a=e}(ql=sd.prototype).ca=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Wf(this.H):Wf(Hf),this.a.onreadystatechange=nh(this.Fa,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(e){return void fd(this,e)}e=n||"";var i=new fp(this.headers);r&&hp(r,function(e,t){i.set(t,e)}),r=function(e){e:{for(var t=hd,n=e.length,r=zl(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return t<0?null:zl(e)?e.charAt(t):e[t]}(i.K()),n=Wl.FormData&&e instanceof Wl.FormData,0<=sh(ld,t)&&!r&&!n&&i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.a.setRequestHeader(t,e)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{yd(this),0<this.o&&((this.D=function(e){return kh&&Fh(9)&&Hl(e.timeout)&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=nh(this.Ca,this)):this.m=Cf(this.Ca,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(e){fd(this,e)}},ql.Ca=function(){void 0!==Vl&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},ql.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),md(this))},ql.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),md(this,!0)),sd.N.G.call(this)},ql.Fa=function(){this.j||(this.w||this.l||this.g?dd(this):this.$a())},ql.$a=function(){dd(this)},ql.T=function(){try{return 2<gd(this)?this.a.status:-1}catch(e){return-1}},ql.za=function(){try{return 2<gd(this)?this.a.statusText:""}catch(e){return""}},ql.aa=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},ql.Va=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ad(t)}},ql.ya=function(){return this.h},ql.Ya=function(){return zl(this.f)?this.f:String(this.f)},(ql=wd.prototype).wa=8,ql.u=1,ql.Da=function(){return 0==this.u},ql.Ia=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random());var t,n=new Xf(this,e=this.P++,void 0),r=this.i;if(this.J&&(r?_h(r=bh(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)e:{for(var i=t=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&zl(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.f.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=Id(this,n,t),Tp(i=vp(this.B),"RID",e),Tp(i,"CVER",22),this.o&&this.j&&Tp(i,"X-HTTP-Session-Id",this.j),kd(this,i),this.g&&r&&bd(i,this.g,r),Zp(this.b,n),this.W?(Tp(i,"$req",t),Tp(i,"SID","null"),n.S=!0,ep(n,i,null)):ep(n,i,t),this.u=2}}else 3==this.u&&(e?Cd(this,e):0==this.f.length||Xp(this.b)||Cd(this))},ql.Ha=function(){this.l=null,this.a=new Xf(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=vp(this.pa);Tp(e,"RID","rpc"),Tp(e,"SID",this.H),Tp(e,"CI",this.ia?"0":"1"),Tp(e,"AID",this.O),kd(this,e),Tp(e,"TYPE","xmlhttp"),this.g&&this.i&&bd(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),tp(this.a,e,!0,this.ga)},ql.Ga=function(e,t){if(0!=this.u&&(this.a==e||Jp(this.b,e)))if(this.m=e.o,!e.s&&Jp(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(e){n=null}if(Yl(n)&&3==n.length){if(0==(t=n)[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;Od(this),this.a.cancel(),this.a=null}Nd(this),Ff(18)}}else this.ra=t[1],0<this.ra-this.O&&t[2]<37500&&this.ia&&0==this.v&&!this.s&&(this.s=jf(nh(this.Za,this),6e3));if($p(this.b)<=1&&this.fa){try{this.fa()}catch(e){}this.fa=void 0}}else Rd(this,11)}else if(!e.s&&this.a!=e||Od(this),!hh(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var r=t[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&Hl(r)&&0<r&&(this.D=1.5*r),this.o&&(r=e.a)&&((i=vd(r,"X-Client-Wire-Protocol"))&&Yp(this.b,i),this.j&&(r=vd(r,"X-HTTP-Session-Id")))&&(this.I=r,Tp(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=e,this.pa=Md(this,this.Y()?this.ga:null,this.ha),r.s?(ed(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(sp(r),op(r)),this.a=r):xd(this),0<this.f.length&&Sd(this)}else"stop"!=r[0]&&"close"!=r[0]||Rd(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Rd(this,7):_d(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},ql.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Nd(this),Ff(19))},ql.na=function(e){var t=null;if(this.a==e){Od(this),this.a=null;var n=2}else{if(!Jp(this.b,e))return;t=e.j,ed(this.b,e),n=1}if(this.m=e.o,0!=this.u)if(e.b)1==n?(t=ih()-e.v,Rf.dispatchEvent(new Uf(Rf,e.l?e.l.length:0,t,this.A)),Sd(this)):xd(this);else{var r=e.c;if(3==r||0==r&&0<this.m||!(1==n&&function(e,t){return!($p(e.b)>=e.b.f-(e.h?1:0))&&(e.h?(e.f=t.j.concat(e.f),!0):!(1==e.u||2==e.u||e.A>=(e.Pa?0:e.Qa))&&(e.h=jf(nh(e.Ia,e,t),Dd(e,e.A)),e.A++,!0))}(this,e)||2==n&&Nd(this)))switch(t&&0<t.length&&(e=this.b,e.c=e.c.concat(t)),r){case 1:Rd(this,5);break;case 4:Rd(this,10);break;case 3:Rd(this,6);break;default:Rd(this,2)}}},ql.fb=function(e){Ff(e?2:1)},ql.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new sd(this.La)).F=this.R,e},ql.ma=function(){return!!this.c&&!0},ql.Y=function(){return this.R},(ql=Ld.prototype).va=function(){},ql.ua=function(){},ql.ta=function(){},ql.sa=function(){},ql.Ta=function(){},Fd.prototype.a=function(e,t){return new Ud(e,t)},oh(Ud,lf),(ql=Ud.prototype).addEventListener=function(e,t,n,r){Ud.N.addEventListener.call(this,e,t,n,r)},ql.removeEventListener=function(e,t,n,r){Ud.N.removeEventListener.call(this,e,t,n,r)},ql.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;Ff(0),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new Bp(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=bd(t,e.g,e.i)),(e=e.w).i=n,t=Md(e.a,null,e.i),Ff(3),null!=(n=e.a.F.b)?(e.f=n[0],e.M=1,Vp(e)):(Sp(t,"MODE","init"),!e.a.o&&e.a.j&&Sp(t,"X-HTTP-Session-Id",e.a.j),e.b=new Xf(e,void 0,void 0),e.b.h=e.h,tp(e.b,t,!1,null),e.M=0)},ql.close=function(){_d(this.a)},ql.Xa=function(e){if(zl(e)){var t={};t.__data__=e,Td(this.a,t)}else this.h?((t={}).__data__=ff(e),Td(this.a,t)):Td(this.a,e)},ql.G=function(){this.a.c=null,delete this.f,_d(this.a),delete this.a,Ud.N.G.call(this)},oh(jd,Qf),oh(qd,Gf),oh(Bd,Ld),Bd.prototype.va=function(){this.a.dispatchEvent("a")},Bd.prototype.ua=function(e){this.a.dispatchEvent(new jd(e))},Bd.prototype.ta=function(e){this.a.dispatchEvent(new qd(e))},Bd.prototype.sa=function(){this.a.dispatchEvent("b")};var Vd=rh(function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r},Fd);Fd.prototype.createWebChannel=Fd.prototype.a,Ud.prototype.send=Ud.prototype.Xa,Ud.prototype.open=Ud.prototype.Wa,Ud.prototype.close=Ud.prototype.close,qf.NO_ERROR=0,qf.TIMEOUT=8,qf.HTTP_ERROR=6,Bf.COMPLETE="complete",(zf.EventType=Kf).OPEN="a",Kf.CLOSE="b",Kf.ERROR="c",Kf.MESSAGE="d",lf.prototype.listen=lf.prototype.Aa,sd.prototype.listenOnce=sd.prototype.Ba,sd.prototype.getLastError=sd.prototype.Ya,sd.prototype.getLastErrorCode=sd.prototype.ya,sd.prototype.getStatus=sd.prototype.T,sd.prototype.getStatusText=sd.prototype.za,sd.prototype.getResponseJson=sd.prototype.Va,sd.prototype.getResponseText=sd.prototype.aa,sd.prototype.send=sd.prototype.ca;var Wd,zd,Hd={createWebChannelTransport:Vd,ErrorCode:qf,EventType:Bf,WebChannel:zf,XhrIo:sd},Kd=Hd.createWebChannelTransport,Qd=Hd.ErrorCode,Gd=Hd.EventType,Yd=Hd.WebChannel,Xd=Hd.XhrIo,$d=Vo.SDK_VERSION,Jd=new Ao("@firebase/firestore");function Zd(){return Jd.logLevel===go.DEBUG?Wd.DEBUG:Jd.logLevel===go.SILENT?Wd.SILENT:Wd.ERROR}function em(e){switch(e){case Wd.DEBUG:Jd.logLevel=go.DEBUG;break;case Wd.ERROR:Jd.logLevel=go.ERROR;break;case Wd.SILENT:Jd.logLevel=go.SILENT;break;default:Jd.error("Firestore ("+$d+"): Invalid value passed to `setLogLevel`")}}function tm(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(Jd.logLevel<=go.DEBUG){var i=n.map(rm);Jd.debug.apply(Jd,["Firestore ("+$d+") ["+e+"]: "+t].concat(i))}}function nm(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Jd.logLevel<=go.ERROR){var r=t.map(rm);Jd.error.apply(Jd,["Firestore ("+$d+"): "+e].concat(r))}}function rm(e){if("string"==typeof e)return e;var t=am.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}function im(e){var t="FIRESTORE ("+$d+") INTERNAL ASSERTION FAILED: "+e;throw nm(t),new Error(t)}function om(e,t){e||im(t)}(zd=Wd=Wd||{})[zd.DEBUG=0]="DEBUG",zd[zd.ERROR=1]="ERROR",zd[zd.SILENT=2]="SILENT";var am=(sm.setPlatform=function(e){sm.platform&&im("Platform already defined"),sm.platform=e},sm.getPlatform=function(){return sm.platform||im("Platform not set"),sm.platform},sm);function sm(){}function um(){return am.getPlatform().emptyByteString}var cm,lm={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},hm=(Ri(fm,cm=Error),fm);function fm(e,t){var n=cm.call(this,t)||this;return n.code=e,n.message=t,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function pm(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new hm(lm.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function dm(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function mm(e,t){return void 0!==e?e:t}function ym(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function gm(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function vm(e){for(var t in om(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function bm(e,t){if(0!==t.length)throw new hm(lm.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+Mm(t.length,"argument")+".")}function wm(e,t,n){if(t.length!==n)throw new hm(lm.INVALID_ARGUMENT,"Function "+e+"() requires "+Mm(n,"argument")+", but was called with "+Mm(t.length,"argument")+".")}function _m(e,t,n){if(t.length<n)throw new hm(lm.INVALID_ARGUMENT,"Function "+e+"() requires at least "+Mm(n,"argument")+", but was called with "+Mm(t.length,"argument")+".")}function Em(e,t,n,r){if(t.length<n||t.length>r)throw new hm(lm.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+Mm(t.length,"argument")+".")}function Tm(e,t,n,r){xm(e,t,Pm(n)+" argument",r)}function Sm(e,t,n,r){void 0!==r&&Tm(e,t,n,r)}function Cm(e,t,n,r){xm(e,t,n+" option",r)}function km(e,t,n,r){void 0!==r&&Cm(e,t,n,r)}function Im(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(Am(u))}var c=Am(r);throw new hm(lm.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(e,0,n,r,i)}function xm(e,t,n,r){if(!("object"===t?Nm(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var i=Am(r);throw new hm(lm.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function Nm(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Am(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":im("Unknown wrong type: "+typeof e);if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}function Om(e,t,n){if(void 0===n)throw new hm(lm.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+Pm(t)+" argument, but it was undefined.")}function Dm(e,t,n){gm(t,function(t,r){if(n.indexOf(t)<0)throw new hm(lm.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))})}function Rm(e,t,n,r){var i=Am(r);return new hm(lm.INVALID_ARGUMENT,"Function "+e+"() requires its "+Pm(n)+" argument to be a "+t+", but it was: "+i)}function Pm(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function Mm(e,t){return e+" "+t+(1===e?"":"s")}var Lm=(Fm.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return om(20===t.length,"Invalid auto ID: "+t),t},Fm);function Fm(){}function Um(e,t){return e<t?-1:t<e?1:0}function jm(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function qm(e){return e+"\0"}function Bm(){if("undefined"==typeof Uint8Array)throw new hm(lm.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Vm(){if(!am.getPlatform().base64Available)throw new hm(lm.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Wm=(zm.fromBase64String=function(e){wm("Blob.fromBase64String",arguments,1),Tm("Blob.fromBase64String","string",1,e),Vm();try{return new zm(am.getPlatform().atob(e))}catch(e){throw new hm(lm.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},zm.fromUint8Array=function(e){if(wm("Blob.fromUint8Array",arguments,1),Bm(),!(e instanceof Uint8Array))throw Rm("Blob.fromUint8Array","Uint8Array",1,e);return new zm(Array.prototype.map.call(e,function(e){return String.fromCharCode(e)}).join(""))},zm.prototype.toBase64=function(){return wm("Blob.toBase64",arguments,0),Vm(),am.getPlatform().btoa(this._binaryString)},zm.prototype.toUint8Array=function(){wm("Blob.toUint8Array",arguments,0),Bm();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},zm.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},zm.prototype.isEqual=function(e){return this._binaryString===e._binaryString},zm.prototype._compareTo=function(e){return Um(this._binaryString,e._binaryString)},zm);function zm(e){Vm(),this._binaryString=e}var Hm=pm(Wm,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),Km=function(e,t,n,r,i){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i},Qm="(default)",Gm=(Object.defineProperty(Ym.prototype,"isDefaultDatabase",{get:function(){return this.database===Qm},enumerable:!0,configurable:!0}),Ym.prototype.isEqual=function(e){return e instanceof Ym&&e.projectId===this.projectId&&e.database===this.database},Ym.prototype.compareTo=function(e){return Um(this.projectId,e.projectId)||Um(this.database,e.database)},Ym);function Ym(e,t){this.projectId=e,this.database=t||Qm}var Xm=($m.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},$m.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},$m.INVALID=-1,$m);function $m(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}var Jm="__name__",Zm=(Object.defineProperty(ey.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),ey.prototype.isEqual=function(e){return 0===ey.comparator(this,e)},ey.prototype.child=function(e){var t=this.segments.slice(this.offset,this.limit());return e instanceof ey?e.forEach(function(e){t.push(e)}):t.push(e),this.construct(t)},ey.prototype.limit=function(){return this.offset+this.length},ey.prototype.popFirst=function(e){return e=void 0===e?1:e,om(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},ey.prototype.popLast=function(){return om(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},ey.prototype.firstSegment=function(){return om(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},ey.prototype.lastSegment=function(){return this.get(this.length-1)},ey.prototype.get=function(e){return om(e<this.length,"Index out of range"),this.segments[this.offset+e]},ey.prototype.isEmpty=function(){return 0===this.length},ey.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},ey.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},ey.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},ey.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},ey.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(o<i)return 1}return e.length<t.length?-1:e.length>t.length?1:0},ey);function ey(e,t,n){void 0===t?t=0:t>e.length&&im("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&im("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n}var ty,ny=(Ri(ry,ty=Zm),ry.prototype.construct=function(e,t,n){return new ry(e,t,n)},ry.prototype.canonicalString=function(){return this.toArray().join("/")},ry.prototype.toString=function(){return this.canonicalString()},ry.fromString=function(e){if(0<=e.indexOf("//"))throw new hm(lm.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new ry(e.split("/").filter(function(e){return 0<e.length}))},ry.EMPTY_PATH=new ry([]),ry);function ry(){return null!==ty&&ty.apply(this,arguments)||this}var iy,oy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ay=(Ri(sy,iy=Zm),sy.prototype.construct=function(e,t,n){return new sy(e,t,n)},sy.isValidIdentifier=function(e){return oy.test(e)},sy.prototype.canonicalString=function(){return this.toArray().map(function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),sy.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")},sy.prototype.toString=function(){return this.canonicalString()},sy.prototype.isKeyField=function(){return 1===this.length&&this.get(0)===Jm},sy.keyField=function(){return new sy([Jm])},sy.fromServerFormat=function(e){for(var t=[],n="",r=0,i=function(){if(0===n.length)throw new hm(lm.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");t.push(n),n=""},o=!1;r<e.length;){var a=e[r];if("\\"===a){if(r+1===e.length)throw new hm(lm.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[r+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new hm(lm.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=s,r+=2}else"`"===a?o=!o:"."!==a||o?n+=a:i(),r++}if(i(),o)throw new hm(lm.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sy(t)},sy.EMPTY_PATH=new sy([]),sy);function sy(){return null!==iy&&iy.apply(this,arguments)||this}var uy=(cy.prototype.hasCollectionId=function(e){return 2<=this.path.length&&this.path.get(this.path.length-2)===e},cy.prototype.isEqual=function(e){return null!==e&&0===ny.comparator(this.path,e.path)},cy.prototype.toString=function(){return this.path.toString()},cy.comparator=function(e,t){return ny.comparator(e.path,t.path)},cy.isDocumentKey=function(e){return e.length%2==0},cy.fromSegments=function(e){return new cy(new ny(e.slice()))},cy.fromPathString=function(e){return new cy(ny.fromString(e))},cy.EMPTY=new cy(new ny([])),cy);function cy(e){this.path=e,om(cy.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}var ly,hy,fy=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})};(hy=ly=ly||{}).All="all",hy.ListenStreamIdle="listen_stream_idle",hy.ListenStreamConnectionBackoff="listen_stream_connection_backoff",hy.WriteStreamIdle="write_stream_idle",hy.WriteStreamConnectionBackoff="write_stream_connection_backoff",hy.OnlineStateTimeout="online_state_timeout",hy.ClientMetadataRefresh="client_metadata_refresh",hy.LruGarbageCollection="lru_garbage_collection",hy.RetryTransaction="retry_transaction";var py=(dy.createAndSchedule=function(e,t,n,r,i){var o=new dy(e,t,Date.now()+n,r,i);return o.start(n),o},dy.prototype.start=function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)},dy.prototype.skipDelay=function(){return this.handleDelayElapsed()},dy.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new hm(lm.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},dy.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},dy.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},dy);function dy(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new fy,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}var my=(Object.defineProperty(yy.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),yy.prototype.enqueueAndForget=function(e){this.enqueue(e)},yy.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},yy.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},yy.prototype.enqueueAndInitiateShutdown=function(e){return Mi(this,void 0,void 0,function(){return Li(this,function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},yy.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise(function(e){}):this.enqueueInternal(e)},yy.prototype.enqueueInternal=function(e){var t=this,n=this.tail.then(function(){return t.operationInProgress=!0,e().catch(function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw nm("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw e},0),e}).then(function(e){return t.operationInProgress=!1,e})});return this.tail=n},yy.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),om(0<=t,"Attempted to schedule an operation with a negative delay of "+t),-1<this.timerIdsToSkip.indexOf(e)&&(t=0);var i=py.createAndSchedule(this,e,t,n,function(e){return r.removeDelayedOperation(e)});return this.delayedOperations.push(i),i},yy.prototype.verifyNotFailed=function(){this.failure&&im("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},yy.prototype.verifyOperationInProgress=function(){om(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},yy.prototype.drain=function(){return this.enqueueEvenAfterShutdown(function(){return Promise.resolve()})},yy.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},yy.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then(function(){om(e===ly.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==ly.All&&i.timerId===e)break}return t.drain()})},yy.prototype.skipDelaysForTimerId=function(e){this.timerIdsToSkip.push(e)},yy.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);om(0<=t,"Delayed operation not found."),this.delayedOperations.splice(t,1)},yy);function yy(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}var gy="\x01",vy="\x01",by="\x10",wy="\x11";function _y(e){for(var t="",n=0;n<e.length;n++)0<t.length&&(t=Ty(t)),t=Ey(e.get(n),t);return Ty(t)}function Ey(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+=gy+by;break;case gy:n+=gy+wy;break;default:n+=o}}return n}function Ty(e){return e+gy+vy}function Sy(e){var t=e.length;if(om(2<=t,"Invalid path "+e),2===t)return om(e.charAt(0)===gy&&e.charAt(1)===vy,"Non-empty path "+e+" had length 2"),ny.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf(gy,o);switch((a<0||n<a)&&im('Invalid encoded resource path: "'+e+'"'),e.charAt(a+1)){case vy:var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case by:i+=e.substring(o,a),i+="\0";break;case wy:i+=e.substring(o,a+1);break;default:im('Invalid encoded resource path: "'+e+'"')}o=a+2}return new ny(r)}var Cy=(ky.now=function(){return ky.fromMillis(Date.now())},ky.fromDate=function(e){return ky.fromMillis(e.getTime())},ky.fromMillis=function(e){var t=Math.floor(e/1e3);return new ky(t,1e6*(e-1e3*t))},ky.prototype.toDate=function(){return new Date(this.toMillis())},ky.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},ky.prototype._compareTo=function(e){return this.seconds===e.seconds?Um(this.nanoseconds,e.nanoseconds):Um(this.seconds,e.seconds)},ky.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},ky.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},ky);function ky(e,t){if(this.seconds=e,(this.nanoseconds=t)<0)throw new hm(lm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(1e9<=t)throw new hm(lm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new hm(lm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(253402300800<=e)throw new hm(lm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}var Iy=(xy.fromMicroseconds=function(e){var t=Math.floor(e/1e6);return new xy(new Cy(t,e%1e6*1e3))},xy.fromTimestamp=function(e){return new xy(e)},xy.forDeletedDoc=function(){return xy.MIN},xy.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},xy.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},xy.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},xy.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},xy.prototype.toTimestamp=function(){return this.timestamp},xy.MIN=new xy(new Cy(0,0)),xy);function xy(e){this.timestamp=e}var Ny=(Ay.prototype.insert=function(e,t){return new Ay(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ry.BLACK,null,null))},Ay.prototype.remove=function(e){return new Ay(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ry.BLACK,null,null))},Ay.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:0<n&&(t=t.right)}return null},Ay.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;n=r<0?n.left:(t+=n.left.size+1,n.right)}return-1},Ay.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(Ay.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),Ay.prototype.minKey=function(){return this.root.minKey()},Ay.prototype.maxKey=function(){return this.root.maxKey()},Ay.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},Ay.prototype.forEach=function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})},Ay.prototype.toString=function(){var e=[];return this.inorderTraversal(function(t,n){return e.push(t+":"+n),!1}),"{"+e.join(", ")+"}"},Ay.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},Ay.prototype.getIterator=function(){return new Oy(this.root,null,this.comparator,!1)},Ay.prototype.getIteratorFrom=function(e){return new Oy(this.root,e,this.comparator,!1)},Ay.prototype.getReverseIterator=function(){return new Oy(this.root,null,this.comparator,!0)},Ay.prototype.getReverseIteratorFrom=function(e){return new Oy(this.root,e,this.comparator,!0)},Ay);function Ay(e,t){this.comparator=e,this.root=t||Ry.EMPTY}var Oy=(Dy.prototype.getNext=function(){om(0<this.nodeStack.length,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},Dy.prototype.hasNext=function(){return 0<this.nodeStack.length},Dy.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},Dy);function Dy(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}var Ry=(Py.prototype.copy=function(e,t,n,r,i){return new Py(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Py.prototype.isEmpty=function(){return!1},Py.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},Py.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},Py.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},Py.prototype.minKey=function(){return this.min().key},Py.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Py.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},Py.prototype.removeMin=function(){if(this.left.isEmpty())return Py.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},Py.prototype.remove=function(e,t){var n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Py.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()},Py.prototype.isRed=function(){return this.color},Py.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},Py.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},Py.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},Py.prototype.rotateLeft=function(){var e=this.copy(null,null,Py.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},Py.prototype.rotateRight=function(){var e=this.copy(null,null,Py.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},Py.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},Py.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},Py.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw im("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw im("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw im("Black depths differ");return e+(this.isRed()?0:1)},Py.EMPTY=null,Py.RED=!0,Py.BLACK=!1,Py);function Py(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Py.RED,this.left=null!=r?r:Py.EMPTY,this.right=null!=i?i:Py.EMPTY,this.size=this.left.size+1+this.right.size}var My=(Object.defineProperty(Ly.prototype,"key",{get:function(){throw im("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(Ly.prototype,"value",{get:function(){throw im("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(Ly.prototype,"color",{get:function(){throw im("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(Ly.prototype,"left",{get:function(){throw im("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(Ly.prototype,"right",{get:function(){throw im("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),Ly.prototype.copy=function(e,t,n,r,i){return this},Ly.prototype.insert=function(e,t,n){return new Ry(e,t)},Ly.prototype.remove=function(e,t){return this},Ly.prototype.isEmpty=function(){return!0},Ly.prototype.inorderTraversal=function(e){return!1},Ly.prototype.reverseTraversal=function(e){return!1},Ly.prototype.minKey=function(){return null},Ly.prototype.maxKey=function(){return null},Ly.prototype.isRed=function(){return!1},Ly.prototype.checkMaxDepth=function(){return!0},Ly.prototype.check=function(){return 0},Ly);function Ly(){this.size=0}Ry.EMPTY=new My;var Fy=(Uy.fromMapKeys=function(e){var t=new Uy(e.comparator);return e.forEach(function(e){t=t.add(e)}),t},Uy.prototype.has=function(e){return null!==this.data.get(e)},Uy.prototype.first=function(){return this.data.minKey()},Uy.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(Uy.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),Uy.prototype.indexOf=function(e){return this.data.indexOf(e)},Uy.prototype.forEach=function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})},Uy.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,e[1]))return;t(r.key)}},Uy.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},Uy.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},Uy.prototype.getIterator=function(){return new jy(this.data.getIterator())},Uy.prototype.getIteratorFrom=function(e){return new jy(this.data.getIteratorFrom(e))},Uy.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},Uy.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},Uy.prototype.isEmpty=function(){return this.data.isEmpty()},Uy.prototype.unionWith=function(e){var t=this;return e.forEach(function(e){t=t.add(e)}),t},Uy.prototype.isEqual=function(e){if(!(e instanceof Uy))return!1;if(this.size!==e.size)return!1;for(var t=this.data.getIterator(),n=e.data.getIterator();t.hasNext();){var r=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},Uy.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},Uy.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},Uy.prototype.copy=function(e){var t=new Uy(this.comparator);return t.data=e,t},Uy);function Uy(e){this.comparator=e,this.data=new Ny(this.comparator)}var jy=(qy.prototype.getNext=function(){return this.iter.getNext().key},qy.prototype.hasNext=function(){return this.iter.hasNext()},qy);function qy(e){this.iter=e}var By=new Ny(uy.comparator);function Vy(){return By}function Wy(){return Vy()}var zy=new Ny(uy.comparator);function Hy(){return zy}var Ky=new Ny(uy.comparator);function Qy(){return Ky}var Gy=new Fy(uy.comparator);function Yy(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Gy,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Xy=new Fy(Um);function $y(){return Xy}var Jy=(Zy.prototype.applyToRemoteDocument=function(e,t,n){t&&om(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;om(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(e)){var a=r[i];t=o.applyToRemoteDocument(t,a)}}return t},Zy.prototype.applyToLocalView=function(e,t){t&&om(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(e)&&(t=s.applyToLocalView(t,t,this.localWriteTime));for(var i=t,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(e)&&(t=s.applyToLocalView(t,i,this.localWriteTime))}return t},Zy.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach(function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))}),n},Zy.prototype.keys=function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},Yy())},Zy.prototype.isEqual=function(e){return this.batchId===e.batchId&&jm(this.mutations,e.mutations)&&jm(this.baseMutations,e.baseMutations)},Zy);function Zy(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,om(0<(this.mutations=r).length,"Cannot create an empty mutation batch")}var eg=(tg.from=function(e,t,n,r){om(e.mutations.length===n.length,"Mutations sent "+e.mutations.length+" must equal results received "+n.length);for(var i=Qy(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,n[a].version);return new tg(e,t,n,r,i)},tg);function tg(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}var ng=(rg.prototype.catch=function(e){return this.next(void 0,e)},rg.prototype.next=function(e,t){var n=this;return this.callbackAttached&&im("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new rg(function(r,i){n.nextCallback=function(t){n.wrapSuccess(e,t).next(r,i)},n.catchCallback=function(e){n.wrapFailure(t,e).next(r,i)}})},rg.prototype.toPromise=function(){var e=this;return new Promise(function(t,n){e.next(t,n)})},rg.prototype.wrapUserFunction=function(e){try{var t=e();return t instanceof rg?t:rg.resolve(t)}catch(e){return rg.reject(e)}},rg.prototype.wrapSuccess=function(e,t){return e?this.wrapUserFunction(function(){return e(t)}):rg.resolve(t)},rg.prototype.wrapFailure=function(e,t){return e?this.wrapUserFunction(function(){return e(t)}):rg.reject(t)},rg.resolve=function(e){return new rg(function(t,n){t(e)})},rg.reject=function(e){return new rg(function(t,n){n(e)})},rg.waitFor=function(e){return new rg(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(e){return n(e)})}),o=!0,i===r&&t()})},rg.or=function(e){for(var t=rg.resolve(!1),n=function(e){t=t.next(function(t){return t?rg.resolve(t):e()})},r=0,i=e;r<i.length;r++)n(i[r]);return t},rg.forEach=function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)},rg);function rg(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)},function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)})}var ig,og,ag=(sg.forUser=function(e,t,n,r){return om(""!==e.uid,"UserID must not be an empty string."),new sg(e.isAuthenticated()?e.uid:"",t,n,r)},sg.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hg(e).iterate({index:Pb.userMutationsIndex,range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})},sg.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next(function(t){return t.lastStreamToken=lg(n),pg(e).put(t)})},sg.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next(function(e){return e.lastStreamToken})},sg.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next(function(n){return n.lastStreamToken=lg(t),pg(e).put(n)})},sg.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=fg(e),a=hg(e);return a.add({}).next(function(s){om("number"==typeof s,"Auto-generated key is not a number");var u=new Jy(s,t,n,r),c=i.serializer.toDbMutationBatch(i.userId,u);i.documentKeysByBatchId[s]=u.keys();for(var l=[],h=0,f=r;h<f.length;h++){var p=f[h],d=Lb.key(i.userId,p.key.path,s);l.push(a.put(c)),l.push(o.put(d,Lb.PLACEHOLDER)),l.push(i.indexManager.addToCollectionParentIndex(e,p.key.path.popLast()))}return ng.waitFor(l).next(function(){return u})})},sg.prototype.lookupMutationBatch=function(e,t){var n=this;return hg(e).get(t).next(function(e){return e?(om(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null})},sg.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?ng.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r}return null})},sg.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return hg(e).iterate({index:Pb.userMutationsIndex,range:i},function(e,t,i){t.userId===n.userId&&(om(t.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(t)),i.done()}).next(function(){return o})},sg.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return hg(e).iterate({index:Pb.userMutationsIndex,range:t,reverse:!0},function(e,t,r){n=t.batchId,r.done()}).next(function(){return n})},sg.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hg(e).loadAll(Pb.userMutationsIndex,n).next(function(e){return e.map(function(e){return t.serializer.fromDbMutationBatch(e)})})},sg.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=Lb.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return fg(e).iterate({range:i},function(r,i,a){var s=r[0],u=r[1],c=r[2],l=Sy(u);if(s===n.userId&&t.path.isEqual(l))return hg(e).get(c).next(function(e){if(!e)throw im("Dangling document-mutation reference found: "+r+" which points to "+c);om(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+c),o.push(n.serializer.fromDbMutationBatch(e))});a.done()}).next(function(){return o})},sg.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Fy(Um),i=[];return t.forEach(function(t){var o=Lb.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=fg(e).iterate({range:a},function(e,i,o){var a=e[0],s=e[1],u=e[2],c=Sy(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()});i.push(s)}),ng.waitFor(i).next(function(){return n.lookupMutationBatches(e,r)})},sg.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;om(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),om(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,i=r.length+1,o=Lb.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Fy(Um);return fg(e).iterate({range:a},function(e,t,o){var a=e[0],u=e[1],c=e[2],l=Sy(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()}).next(function(){return n.lookupMutationBatches(e,s)})},sg.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(hg(e).get(t).next(function(e){if(null===e)throw im("Dangling document-mutation reference found, which points to "+t);om(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))}))}),ng.waitFor(i).next(function(){return r})},sg.prototype.removeMutationBatch=function(e,t){var n=this;return cg(e.simpleDbTransaction,this.userId,t).next(function(r){return n.removeCachedMutationKeys(t.batchId),ng.forEach(r,function(t){return n.referenceDelegate.removeMutationReference(e,t)})})},sg.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},sg.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return ng.resolve();var r=IDBKeyRange.lowerBound(Lb.prefixForUser(t.userId)),i=[];return fg(e).iterate({range:r},function(e,n,r){if(e[0]===t.userId){var o=Sy(e[1]);i.push(o)}else r.done()}).next(function(){om(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(e){return e.canonicalString()}))})})},sg.prototype.containsKey=function(e,t){return ug(e,this.userId,t)},sg.prototype.getMutationQueueMetadata=function(e){var t=this;return pg(e).get(this.userId).next(function(e){return e||new Db(t.userId,-1,"")})},sg);function sg(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}function ug(e,t,n){var r=Lb.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return fg(e).iterate({range:o,keysOnly:!0},function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()}).next(function(){return a})}function cg(e,t,n){var r=e.store(Pb.store),i=e.store(Lb.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},function(e,t,n){return s++,n.delete()});o.push(u.next(function(){om(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=Lb.key(t,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return ng.waitFor(o).next(function(){return c})}function lg(e){return e instanceof Uint8Array?(om("YES"===Object({NODE_ENV:"production",PUBLIC_URL:"."}).USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function hg(e){return Nw.getStore(e,Pb.store)}function fg(e){return Nw.getStore(e,Lb.store)}function pg(e){return Nw.getStore(e,Db.store)}(og=ig=ig||{})[og.QueryCache=0]="QueryCache",og[og.SyncEngine=1]="SyncEngine";var dg=(mg.prototype.next=function(){var e=this.nextId;return this.nextId+=2,e},mg.prototype.after=function(e){return this.seek(e+2),this.next()},mg.prototype.seek=function(e){om((1&e)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},mg.forQueryCache=function(){return new mg(ig.QueryCache,2)},mg.forSyncEngine=function(){return new mg(ig.SyncEngine)},mg);function mg(e,t){om((1&(this.generatorId=e))===e,"Generator ID "+e+" contains more than 1 reserved bits"),this.seek(void 0!==t?t:this.generatorId)}var yg="SimpleDb",gg=(vg.openOrCreate=function(e,t,n){return om(vg.isAvailable(),"IndexedDB not supported in current environment."),tm(yg,"Opening database:",e),new ng(function(r,i){var o=window.indexedDB.open(e,t);o.onsuccess=function(e){var t=e.target.result;r(new vg(t))},o.onblocked=function(){i(new hm(lm.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=function(e){var t=e.target.error;"VersionError"===t.name?i(new hm(lm.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i(t)},o.onupgradeneeded=function(t){tm(yg,'Database "'+e+'" requires upgrade from version:',t.oldVersion);var r=t.target.result,i=new _g(o.transaction);n.createOrUpgrade(r,i,t.oldVersion,kb).next(function(){tm(yg,"Database upgrade to version "+kb+" complete")})}}).toPromise()},vg.delete=function(e){return tm(yg,"Removing database:",e),Cg(window.indexedDB.deleteDatabase(e)).toPromise()},vg.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===Object({NODE_ENV:"production",PUBLIC_URL:"."}).USE_MOCK_PERSISTENCE;var e=Xi(),t=vg.getIOSVersion(e),n=0<t&&t<10,r=vg.getAndroidVersion(e),i=0<r&&r<4.5;return!(0<e.indexOf("MSIE ")||0<e.indexOf("Trident/")||0<e.indexOf("Edge/")||n||i)},vg.getStore=function(e,t){return e.store(t)},vg.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},vg.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},vg.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},vg.prototype.runTransaction=function(e,t,n){var r=_g.open(this.db,e,t),i=n(r).catch(function(e){return r.abort(e),ng.reject(e)}).toPromise();return i.catch(function(){}),r.completionPromise.then(function(){return i})},vg.prototype.close=function(){this.db.close()},vg);function vg(e){this.db=e,12.2===vg.getIOSVersion(Xi())&&nm("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}var bg=(Object.defineProperty(wg.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(wg.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(wg.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),wg.prototype.done=function(){this.shouldStop=!0},wg.prototype.skip=function(e){this.nextKey=e},wg.prototype.delete=function(){return Cg(this.dbCursor.delete())},wg);function wg(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}var _g=(Eg.open=function(e,t,n){return new Eg(e.transaction(n,t))},Object.defineProperty(Eg.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),Eg.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(tm(yg,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},Eg.prototype.store=function(e){var t=this.transaction.objectStore(e);return om(!!t,"Object store not part of transaction: "+e),new Tg(t)},Eg);function Eg(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new fy,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=Ig(e.target.error);t.completionDeferred.reject(n)}}var Tg=(Sg.prototype.put=function(e,t){return Cg(void 0!==t?(tm(yg,"PUT",this.store.name,e,t),this.store.put(t,e)):(tm(yg,"PUT",this.store.name,"<auto-key>",e),this.store.put(e)))},Sg.prototype.add=function(e){return tm(yg,"ADD",this.store.name,e,e),Cg(this.store.add(e))},Sg.prototype.get=function(e){var t=this;return Cg(this.store.get(e)).next(function(n){return void 0===n&&(n=null),tm(yg,"GET",t.store.name,e,n),n})},Sg.prototype.delete=function(e){return tm(yg,"DELETE",this.store.name,e),Cg(this.store.delete(e))},Sg.prototype.count=function(){return tm(yg,"COUNT",this.store.name),Cg(this.store.count())},Sg.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,function(e,t){r.push(t)}).next(function(){return r})},Sg.prototype.deleteAll=function(e,t){tm(yg,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(e,t,n){return n.delete()})},Sg.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},Sg.prototype.iterateSerial=function(e){var t=this.cursor({});return new ng(function(n,r){t.onerror=function(e){var t=Ig(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next(function(e){e?r.continue():n()}):n()}})},Sg.prototype.iterateCursor=function(e,t){var n=[];return new ng(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new bg(i),a=t(i.primaryKey,i.value,o);if(a instanceof ng){var s=a.catch(function(e){return o.done(),ng.reject(e)});n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}}).next(function(){return ng.waitFor(n)})},Sg.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(om(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},Sg.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},Sg);function Sg(e){this.store=e}function Cg(e){return new ng(function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Ig(e.target.error);n(t)}})}var kg=!1;function Ig(e){var t=gg.getIOSVersion(Xi());if(12.2<=t&&t<13){var n="An internal error was encountered in the Indexed Database server";if(0<=e.message.indexOf(n)){var r=new hm("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return kg||(kg=!0,setTimeout(function(){throw r},0)),r}}return e}var xg=(Ng.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next(function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next(function(){return n.highestTargetId})})},Ng.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next(function(e){return Iy.fromTimestamp(new Cy(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})},Ng.prototype.getHighestSequenceNumber=function(e){return Dg(e.simpleDbTransaction)},Ng.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)})},Ng.prototype.addQueryData=function(e,t){var n=this;return this.saveQueryData(e,t).next(function(){return n.retrieveMetadata(e).next(function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(t,r),n.saveMetadata(e,r)})})},Ng.prototype.updateQueryData=function(e,t){return this.saveQueryData(e,t)},Ng.prototype.removeQueryData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return Ag(e).delete(t.targetId)}).next(function(){return n.retrieveMetadata(e)}).next(function(t){return om(0<t.targetCount,"Removing from an empty query cache"),t.targetCount-=1,n.saveMetadata(e,t)})},Ng.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return Ag(e).iterate(function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=t&&void 0===n[u.targetId]&&(i++,o.push(r.removeQueryData(e,u)))}).next(function(){return ng.waitFor(o)}).next(function(){return i})},Ng.prototype.forEachTarget=function(e,t){var n=this;return Ag(e).iterate(function(e,r){var i=n.serializer.fromDbTarget(r);t(i)})},Ng.prototype.retrieveMetadata=function(e){return Og(e.simpleDbTransaction)},Ng.prototype.saveMetadata=function(e,t){return function(e){return Nw.getStore(e,Gb.store)}(e).put(Gb.key,t)},Ng.prototype.saveQueryData=function(e,t){return Ag(e).put(this.serializer.toDbTarget(t))},Ng.prototype.updateMetadataFromQueryData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},Ng.prototype.getQueryCount=function(e){return this.retrieveMetadata(e).next(function(e){return e.targetCount})},Ng.prototype.getQueryData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Ag(e).iterate({range:i,index:zb.queryTargetsIndexName},function(e,r,i){var a=n.serializer.fromDbTarget(r);t.isEqual(a.query)&&(o=a,i.done())}).next(function(){return o})},Ng.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=Rg(e);return t.forEach(function(t){var a=_y(t.path);i.push(o.put(new Kb(n,a))),i.push(r.referenceDelegate.addReference(e,t))}),ng.waitFor(i)},Ng.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=Rg(e);return ng.forEach(t,function(t){var o=_y(t.path);return ng.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])})},Ng.prototype.removeMatchingKeysForTargetId=function(e,t){var n=Rg(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},Ng.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Rg(e),i=Yy();return r.iterate({range:n,keysOnly:!0},function(e,t,n){var r=Sy(e[1]),o=new uy(r);i=i.add(o)}).next(function(){return i})},Ng.prototype.containsKey=function(e,t){var n=_y(t.path),r=IDBKeyRange.bound([n],[qm(n)],!1,!0),i=0;return Rg(e).iterate({index:Kb.documentTargetsIndex,keysOnly:!0,range:r},function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},Ng.prototype.getQueryDataForTarget=function(e,t){var n=this;return Ag(e).get(t).next(function(e){return e?n.serializer.fromDbTarget(e):null})},Ng);function Ng(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=dg.forQueryCache()}function Ag(e){return Nw.getStore(e,zb.store)}function Og(e){return gg.getStore(e,Gb.store).get(Gb.key).next(function(e){return om(null!==e,"Missing metadata row."),e})}function Dg(e){return Og(e).next(function(e){return e.highestListenSequenceNumber})}function Rg(e){return Nw.getStore(e,Kb.store)}var Pg=(Mg.fromSet=function(e){return new Mg(e)},Mg.fromArray=function(e){var t=new Fy(ay.comparator);return e.forEach(function(e){return t=t.add(e)}),new Mg(t)},Mg.prototype.covers=function(e){var t=!1;return this.fields.forEach(function(n){n.isPrefixOf(e)&&(t=!0)}),t},Mg.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},Mg);function Mg(e){this.fields=e}var Lg=(Fg.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},Fg);function Fg(e,t){this.field=e,this.transform=t}var Ug,jg,qg=function(e,t){this.version=e,this.transformResults=t};(jg=Ug=Ug||{})[jg.Set=0]="Set",jg[jg.Patch=1]="Patch",jg[jg.Transform=2]="Transform",jg[jg.Delete=3]="Delete";var Bg=(Vg.exists=function(e){return new Vg(void 0,e)},Vg.updateTime=function(e){return new Vg(e)},Object.defineProperty(Vg.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),Vg.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof eb&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof eb:(om(this.isNone,"Precondition should be empty"),!0)},Vg.prototype.isEqual=function(e){return function(e,t){return null!=e?!(!t||!e.isEqual(t)):e===t}(this.updateTime,e.updateTime)&&this.exists===e.exists},Vg.NONE=new Vg,Vg);function Vg(e,t){this.updateTime=e,this.exists=t,om(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}var Wg=(zg.prototype.verifyKeyMatches=function(e){null!=e&&om(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},zg.getPostMutationVersion=function(e){return e instanceof eb?e.version:Iy.MIN},zg);function zg(){}var Hg,Kg=(Ri(Qg,Hg=Wg),Qg.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),om(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new eb(this.key,n,{hasCommittedMutations:!0},this.value)},Qg.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=Wg.getPostMutationVersion(e);return new eb(this.key,r,{hasLocalMutations:!0},this.value)},Qg.prototype.extractBaseValue=function(e){return null},Qg.prototype.isEqual=function(e){return e instanceof Qg&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},Qg);function Qg(e,t,n){var r=Hg.call(this)||this;return r.key=e,r.value=t,r.precondition=n,r.type=Ug.Set,r}var Gg,Yg=(Ri(Xg,Gg=Wg),Xg.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),om(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new ab(this.key,t.version);var n=this.patchDocument(e);return new eb(this.key,t.version,{hasCommittedMutations:!0},n)},Xg.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=Wg.getPostMutationVersion(e),i=this.patchDocument(e);return new eb(this.key,r,{hasLocalMutations:!0},i)},Xg.prototype.extractBaseValue=function(e){return null},Xg.prototype.isEqual=function(e){return e instanceof Xg&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},Xg.prototype.patchDocument=function(e){var t;return t=e instanceof eb?e.data():Kv.EMPTY,this.patchObject(t)},Xg.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e=null!==r?e.set(n,r):e.delete(n)}}),e},Xg);function Xg(e,t,n,r){var i=Gg.call(this)||this;return i.key=e,i.data=t,i.fieldMask=n,i.precondition=r,i.type=Ug.Patch,i}var $g,Jg=(Ri(Zg,$g=Wg),Zg.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),om(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new ab(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data(),r);return new eb(this.key,i,{hasCommittedMutations:!0},o)},Zg.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,e,t),o=this.transformObject(r.data(),i);return new eb(this.key,r.version,{hasLocalMutations:!0},o)},Zg.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=e instanceof eb?e.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(t=null==t?Kv.EMPTY.set(i.field,a):t.set(i.field,a))}return t},Zg.prototype.isEqual=function(e){return e instanceof Zg&&this.key.isEqual(e.key)&&jm(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},Zg.prototype.requireDocument=function(e){om(e instanceof eb,"Unknown MaybeDocument type "+e);var t=e;return om(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},Zg.prototype.serverTransformResults=function(e,t){var n=[];om(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;e instanceof eb&&(a=e.field(i.field)),n.push(o.applyToRemoteDocument(a,t[r]))}return n},Zg.prototype.localTransformResults=function(e,t,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;t instanceof eb&&(u=t.field(a.field)),null===u&&n instanceof eb&&(u=n.field(a.field)),r.push(s.applyToLocalView(u,e))}return r},Zg.prototype.transformObject=function(e,t){om(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;e=e.set(r,t[n])}return e},Zg);function Zg(e,t){var n=$g.call(this)||this;return n.key=e,n.fieldTransforms=t,n.type=Ug.Transform,n.precondition=Bg.exists(!0),n}var ev,tv,nv,rv,iv,ov=(Ri(av,ev=Wg),av.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),om(null==t.transformResults,"Transform results received by DeleteMutation."),new rb(this.key,t.version,{hasCommittedMutations:!0})},av.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&om(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new rb(this.key,Iy.forDeletedDoc())):e},av.prototype.extractBaseValue=function(e){return null},av.prototype.isEqual=function(e){return e instanceof av&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},av);function av(e,t){var n=ev.call(this)||this;return n.key=e,n.precondition=t,n.type=Ug.Delete,n}(nv=tv=tv||{})[nv.NullValue=0]="NullValue",nv[nv.BooleanValue=1]="BooleanValue",nv[nv.NumberValue=2]="NumberValue",nv[nv.TimestampValue=3]="TimestampValue",nv[nv.StringValue=4]="StringValue",nv[nv.BlobValue=5]="BlobValue",nv[nv.RefValue=6]="RefValue",nv[nv.GeoPointValue=7]="GeoPointValue",nv[nv.ArrayValue=8]="ArrayValue",nv[nv.ObjectValue=9]="ObjectValue",(iv=rv=rv||{})[iv.Default=0]="Default",iv[iv.Estimate=1]="Estimate",iv[iv.Previous=2]="Previous";var sv=(uv.fromSnapshotOptions=function(e,t){switch(e.serverTimestamps){case"estimate":return new uv(rv.Estimate,t);case"previous":return new uv(rv.Previous,t);case"none":case void 0:return new uv(rv.Default,t);default:return im("fromSnapshotOptions() called with invalid options.")}},uv);function uv(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}var cv=(lv.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},lv.prototype.defaultCompareTo=function(e){return om(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),Um(this.typeOrder,e.typeOrder)},lv);function lv(){}var hv,fv=(Ri(pv,hv=cv),pv.prototype.value=function(e){return null},pv.prototype.isEqual=function(e){return e instanceof pv},pv.prototype.compareTo=function(e){return e instanceof pv?0:this.defaultCompareTo(e)},pv.INSTANCE=new pv,pv);function pv(){var e=hv.call(this)||this;return e.typeOrder=tv.NullValue,e.internalValue=null,e}var dv,mv=(Ri(yv,dv=cv),yv.prototype.value=function(e){return this.internalValue},yv.prototype.isEqual=function(e){return e instanceof yv&&this.internalValue===e.internalValue},yv.prototype.compareTo=function(e){return e instanceof yv?Um(this,e):this.defaultCompareTo(e)},yv.of=function(e){return e?yv.TRUE:yv.FALSE},yv.TRUE=new yv(!0),yv.FALSE=new yv(!1),yv);function yv(e){var t=dv.call(this)||this;return t.internalValue=e,t.typeOrder=tv.BooleanValue,t}var gv,vv=(Ri(bv,gv=cv),bv.prototype.value=function(e){return this.internalValue},bv.prototype.compareTo=function(e){return e instanceof bv?function(e,t){return e<t?-1:t<e?1:e===t?0:isNaN(e)?isNaN(t)?0:-1:1}(this.internalValue,e.internalValue):this.defaultCompareTo(e)},bv);function bv(e){var t=gv.call(this)||this;return t.internalValue=e,t.typeOrder=tv.NumberValue,t}function wv(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var _v,Ev=(Ri(Tv,_v=vv),Tv.prototype.isEqual=function(e){return e instanceof Tv&&wv(this.internalValue,e.internalValue)},Tv);function Tv(){return null!==_v&&_v.apply(this,arguments)||this}var Sv,Cv=(Ri(kv,Sv=vv),kv.prototype.isEqual=function(e){return e instanceof kv&&wv(this.internalValue,e.internalValue)},kv.NAN=new kv(NaN),kv.POSITIVE_INFINITY=new kv(1/0),kv.NEGATIVE_INFINITY=new kv(-1/0),kv);function kv(){return null!==Sv&&Sv.apply(this,arguments)||this}var Iv,xv=(Ri(Nv,Iv=cv),Nv.prototype.value=function(e){return this.internalValue},Nv.prototype.isEqual=function(e){return e instanceof Nv&&this.internalValue===e.internalValue},Nv.prototype.compareTo=function(e){return e instanceof Nv?Um(this.internalValue,e.internalValue):this.defaultCompareTo(e)},Nv);function Nv(e){var t=Iv.call(this)||this;return t.internalValue=e,t.typeOrder=tv.StringValue,t}var Av,Ov=(Ri(Dv,Av=cv),Dv.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},Dv.prototype.isEqual=function(e){return e instanceof Dv&&this.internalValue.isEqual(e.internalValue)},Dv.prototype.compareTo=function(e){return e instanceof Dv?this.internalValue._compareTo(e.internalValue):e instanceof Pv?-1:this.defaultCompareTo(e)},Dv);function Dv(e){var t=Av.call(this)||this;return t.internalValue=e,t.typeOrder=tv.TimestampValue,t}var Rv,Pv=(Ri(Mv,Rv=cv),Mv.prototype.value=function(e){return e&&e.serverTimestampBehavior===rv.Estimate?new Ov(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===rv.Previous&&this.previousValue?this.previousValue.value(e):null},Mv.prototype.isEqual=function(e){return e instanceof Mv&&this.localWriteTime.isEqual(e.localWriteTime)},Mv.prototype.compareTo=function(e){return e instanceof Mv?this.localWriteTime._compareTo(e.localWriteTime):e instanceof Ov?1:this.defaultCompareTo(e)},Mv.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},Mv);function Mv(e,t){var n=Rv.call(this)||this;return n.localWriteTime=e,n.previousValue=t,n.typeOrder=tv.TimestampValue,n}var Lv,Fv=(Ri(Uv,Lv=cv),Uv.prototype.value=function(e){return this.internalValue},Uv.prototype.isEqual=function(e){return e instanceof Uv&&this.internalValue.isEqual(e.internalValue)},Uv.prototype.compareTo=function(e){return e instanceof Uv?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},Uv);function Uv(e){var t=Lv.call(this)||this;return t.internalValue=e,t.typeOrder=tv.BlobValue,t}var jv,qv=(Ri(Bv,jv=cv),Bv.prototype.value=function(e){return this.key},Bv.prototype.isEqual=function(e){return e instanceof Bv&&this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId)},Bv.prototype.compareTo=function(e){if(e instanceof Bv){var t=this.databaseId.compareTo(e.databaseId);return 0!==t?t:uy.comparator(this.key,e.key)}return this.defaultCompareTo(e)},Bv);function Bv(e,t){var n=jv.call(this)||this;return n.databaseId=e,n.key=t,n.typeOrder=tv.RefValue,n}var Vv,Wv=(Ri(zv,Vv=cv),zv.prototype.value=function(e){return this.internalValue},zv.prototype.isEqual=function(e){return e instanceof zv&&this.internalValue.isEqual(e.internalValue)},zv.prototype.compareTo=function(e){return e instanceof zv?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},zv);function zv(e){var t=Vv.call(this)||this;return t.internalValue=e,t.typeOrder=tv.GeoPointValue,t}var Hv,Kv=(Ri(Qv,Hv=cv),Qv.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal(function(n,r){t[n]=r.value(e)}),t},Qv.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},Qv.prototype.isEqual=function(e){if(e instanceof Qv){for(var t=this.internalValue.getIterator(),n=e.internalValue.getIterator();t.hasNext()&&n.hasNext();){var r=t.getNext(),i=n.getNext();if(r.key!==i.key||!r.value.isEqual(i.value))return!1}return!t.hasNext()&&!n.hasNext()}return!1},Qv.prototype.compareTo=function(e){if(e instanceof Qv){for(var t=this.internalValue.getIterator(),n=e.internalValue.getIterator();t.hasNext()&&n.hasNext();){var r=t.getNext(),i=n.getNext(),o=Um(r.key,i.key)||r.value.compareTo(i.value);if(o)return o}return Um(t.hasNext(),n.hasNext())}return this.defaultCompareTo(e)},Qv.prototype.set=function(e,t){if(om(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),t);var n=this.child(e.firstSegment());n instanceof Qv||(n=Qv.EMPTY);var r=n.set(e.popFirst(),t);return this.setChild(e.firstSegment(),r)},Qv.prototype.delete=function(e){if(om(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new Qv(this.internalValue.remove(e.firstSegment()));var t=this.child(e.firstSegment());if(t instanceof Qv){var n=t.delete(e.popFirst());return new Qv(this.internalValue.insert(e.firstSegment(),n))}return this},Qv.prototype.contains=function(e){return null!==this.field(e)},Qv.prototype.field=function(e){om(!e.isEmpty(),"Can't get field of empty path");var t=this;return e.forEach(function(e){t=t instanceof Qv?t.internalValue.get(e):null}),t},Qv.prototype.fieldMask=function(){var e=new Fy(ay.comparator);return this.internalValue.forEach(function(t,n){var r=new ay([t]);if(n instanceof Qv){var i=n.fieldMask().fields;i.isEmpty()?e=e.add(r):i.forEach(function(t){e=e.add(r.child(t))})}else e=e.add(r)}),Pg.fromSet(e)},Qv.prototype.toString=function(){return this.internalValue.toString()},Qv.prototype.child=function(e){return this.internalValue.get(e)||void 0},Qv.prototype.setChild=function(e,t){return new Qv(this.internalValue.insert(e,t))},Qv.EMPTY=new Qv(new Ny(Um)),Qv);function Qv(e){var t=Hv.call(this)||this;return t.internalValue=e,t.typeOrder=tv.ObjectValue,t}var Gv,Yv=(Ri(Xv,Gv=cv),Xv.prototype.value=function(e){return this.internalValue.map(function(t){return t.value(e)})},Xv.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++)if(n[t].isEqual(e))return!0;return!1},Xv.prototype.forEach=function(e){this.internalValue.forEach(e)},Xv.prototype.isEqual=function(e){if(e instanceof Xv){if(this.internalValue.length!==e.internalValue.length)return!1;for(var t=0;t<this.internalValue.length;t++)if(!this.internalValue[t].isEqual(e.internalValue[t]))return!1;return!0}return!1},Xv.prototype.compareTo=function(e){if(e instanceof Xv){for(var t=Math.min(this.internalValue.length,e.internalValue.length),n=0;n<t;n++){var r=this.internalValue[n].compareTo(e.internalValue[n]);if(r)return r}return Um(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},Xv.prototype.toString=function(){return"["+this.internalValue.map(function(e){return e.toString()}).join(",")+"]"},Xv);function Xv(e){var t=Gv.call(this)||this;return t.internalValue=e,t.typeOrder=tv.ArrayValue,t}var $v=(Jv.compareByKey=function(e,t){return uy.comparator(e.key,t.key)},Jv);function Jv(e,t){this.key=e,this.version=t}var Zv,eb=(Ri(tb,Zv=$v),tb.prototype.field=function(e){if(this.objectValue)return this.objectValue.field(e);this.fieldValueCache||(this.fieldValueCache=new Map);var t=e.canonicalString(),n=this.fieldValueCache.get(t);if(void 0===n){var r=this.getProtoField(e);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(t,n)}return n},tb.prototype.data=function(){var e=this;if(!this.objectValue){var t=Kv.EMPTY;gm(this.proto.fields,function(n,r){t=t.set(new ay([n]),e.converter(r))}),this.objectValue=t,this.fieldValueCache=void 0}return this.objectValue},tb.prototype.value=function(){return this.data().value()},tb.prototype.isEqual=function(e){return e instanceof tb&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations&&this.data().isEqual(e.data())},tb.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(tb.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),tb.prototype.getProtoField=function(e){om(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var t=this.proto.fields[e.firstSegment()],n=1;n<e.length;++n){if(!t||!t.mapValue)return;t=t.mapValue.fields[e.get(n)]}return t},tb.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?r.compareTo(i):im("Trying to compare documents on fields that don't exist")},tb);function tb(e,t,n,r,i,o){var a=Zv.call(this,e,t)||this;return a.objectValue=r,a.proto=i,a.converter=o,om(void 0!==a.objectValue||void 0!==a.proto&&void 0!==a.converter,"If objectValue is not defined, proto and converter need to be set."),a.hasLocalMutations=!!n.hasLocalMutations,a.hasCommittedMutations=!!n.hasCommittedMutations,a}var nb,rb=(Ri(ib,nb=$v),ib.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(ib.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),ib.prototype.isEqual=function(e){return e instanceof ib&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},ib);function ib(e,t,n){var r=nb.call(this,e,t)||this;return r.hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}var ob,ab=(Ri(sb,ob=$v),sb.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(sb.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),sb.prototype.isEqual=function(e){return e instanceof sb&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},sb);function sb(){return null!==ob&&ob.apply(this,arguments)||this}var ub=(cb.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(e))return s}},cb.prototype.has=function(e){return void 0!==this.get(e)},cb.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},cb.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},cb.prototype.forEach=function(e){gm(this.inner,function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}})},cb.prototype.isEmpty=function(){return vm(this.inner)},cb);function cb(e){this.mapKeyFn=e,this.inner={}}var lb=(hb.prototype.addEntry=function(e){this.assertNotApplied(),this.changes.set(e.key,e)},hb.prototype.removeEntry=function(e){this.assertNotApplied(),this.changes.set(e,null)},hb.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?ng.resolve(n):this.getFromCache(e,t)},hb.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},hb.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},hb.prototype.assertNotApplied=function(){om(!this.changesApplied,"Changes have already been applied.")},hb);function hb(){this.changes=new ub(function(e){return e.toString()}),this.changesApplied=!1}var fb,pb="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",db=(Object.defineProperty(mb.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),mb.prototype.start=function(e){var t=gg.getStore(e,Zb.store);return this.synchronizeLastDocumentChangeId(t)},mb.prototype.addEntry=function(e,t,n){var r=this;return vb(e).put(wb(t),n).next(function(){r.indexManager.addToCollectionParentIndex(e,t.path.popLast())})},mb.prototype.removeEntry=function(e,t){var n=vb(e),r=wb(t);return n.delete(r)},mb.prototype.updateMetadata=function(e,t,n){var r=this;return this.getMetadata(e).next(function(i){return i.byteSize+=n,r.setMetadata(e,i).next(function(){if(r.keepDocumentChangeLog)return bb(e).put({changes:r.serializer.toDbResourcePaths(t)})})})},mb.prototype.getEntry=function(e,t){var n=this;return vb(e).get(wb(t)).next(function(e){return e?n.serializer.fromDbRemoteDocument(e):null})},mb.prototype.getSizedEntry=function(e,t){var n=this;return vb(e).get(wb(t)).next(function(e){return e?{maybeDocument:n.serializer.fromDbRemoteDocument(e),size:_b(e)}:null})},mb.prototype.getEntries=function(e,t){var n=this,r=Wy();return this.forEachDbEntry(e,t,function(e,t){r=t?r.insert(e,n.serializer.fromDbRemoteDocument(t)):r.insert(e,null)}).next(function(){return r})},mb.prototype.getSizedEntries=function(e,t){var n=this,r=Wy(),i=new Ny(uy.comparator);return this.forEachDbEntry(e,t,function(e,t){i=t?(r=r.insert(e,n.serializer.fromDbRemoteDocument(t)),i.insert(e,_b(t))):(r=r.insert(e,null),i.insert(e,0))}).next(function(){return{maybeDocuments:r,sizeMap:i}})},mb.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return ng.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return vb(e).iterate({range:r},function(e,t,r){for(var a=uy.fromSegments(e);o&&uy.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},mb.prototype.getDocumentsMatchingQuery=function(e,t){var n=this;om(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=Hy(),i=t.path.length+1,o=t.path.toArray(),a=IDBKeyRange.lowerBound(o);return vb(e).iterate({range:a},function(e,o,a){if(e.length===i){var s=n.serializer.fromDbRemoteDocument(o);t.path.isPrefixOf(s.key.path)?s instanceof eb&&t.matches(s)&&(r=r.insert(s.key,s)):a.done()}}).next(function(){return r})},mb.prototype.getNewDocumentChanges=function(e){var t=this;om(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=Yy(),r=Vy(),i=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,a=bb(e);return a.iterate({range:i},function(e,r){if(o&&(o=!1,t._lastProcessedDocumentChangeId+1!==r.id))return t.synchronizeLastDocumentChangeId(a).next(function(){return ng.reject(new hm(lm.DATA_LOSS,pb))});n=n.unionWith(t.serializer.fromDbResourcePaths(r.changes)),t._lastProcessedDocumentChangeId=r.id}).next(function(){var i=[];return n.forEach(function(n){i.push(t.getEntry(e,n).next(function(e){var t=e||new rb(n,Iy.forDeletedDoc());r=r.insert(n,t)}))}),ng.waitFor(i)}).next(function(){return r})},mb.prototype.removeDocumentChangesThroughChangeId=function(e,t){var n=IDBKeyRange.upperBound(t);return bb(e).delete(n)},mb.prototype.synchronizeLastDocumentChangeId=function(e){var t=this;return this._lastProcessedDocumentChangeId=0,e.iterate({keysOnly:!0,reverse:!0},function(e,n,r){t._lastProcessedDocumentChangeId=e,r.done()})},mb.prototype.newChangeBuffer=function(){return new mb.RemoteDocumentChangeBuffer(this)},mb.prototype.getSize=function(e){return this.getMetadata(e).next(function(e){return e.byteSize})},mb.prototype.getMetadata=function(e){return gb(e).get(Vb.key).next(function(e){return om(!!e,"Missing document cache metadata"),e})},mb.prototype.setMetadata=function(e,t){return gb(e).put(Vb.key,t)},mb.RemoteDocumentChangeBuffer=(Ri(yb,fb=lb),yb.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=Yy();return this.changes.forEach(function(o,a){var s=t.documentSizes.get(o);if(om(void 0!==s,"Cannot modify a document that wasn't read (for "+o+")"),a){var u=t.documentCache.serializer.toDbRemoteDocument(a),c=_b(u);r+=c-s,n.push(t.documentCache.addEntry(e,o,u))}else r-=s,n.push(t.documentCache.removeEntry(e,o));i=i.add(o)}),n.push(this.documentCache.updateMetadata(e,i,r)),ng.waitFor(n)},yb.prototype.getFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntry(e,t).next(function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)})},yb.prototype.getAllFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntries(e,t).next(function(e){var t=e.maybeDocuments;return e.sizeMap.forEach(function(e,t){n.documentSizes.set(e,t)}),t})},yb),mb);function mb(e,t,n){this.serializer=e,this.indexManager=t,this.keepDocumentChangeLog=n,this._lastProcessedDocumentChangeId=0}function yb(e){var t=fb.call(this)||this;return t.documentCache=e,t.documentSizes=new ub(function(e){return e.toString()}),t}function gb(e){return Nw.getStore(e,Vb.store)}function vb(e){return Nw.getStore(e,qb.store)}function bb(e){return Nw.getStore(e,Zb.store)}function wb(e){return e.path.toArray()}function _b(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw im("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}var Eb=(Tb.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),ng.resolve()},Tb.prototype.getCollectionParents=function(e,t){return ng.resolve(this.collectionParentIndex.getEntries(t))},Tb);function Tb(){this.collectionParentIndex=new Sb}var Sb=(Cb.prototype.add=function(e){om(e.length%2==1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Fy(ny.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},Cb.prototype.getEntries=function(e){return(this.index[e]||new Fy(ny.comparator)).toArray()},Cb);function Cb(){this.index={}}var kb=8,Ib=(xb.prototype.createOrUpgrade=function(e,t,n,r){var i=this;om(n<r&&0<=n&&r<=kb,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&1<=r&&(function(e){e.createObjectStore(Ab.store)}(e),function(e){e.createObjectStore(Db.store,{keyPath:Db.keyPath}),e.createObjectStore(Pb.store,{keyPath:Pb.keyPath,autoIncrement:!0}).createIndex(Pb.userMutationsIndex,Pb.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Lb.store)}(e),Jb(e),function(e){e.createObjectStore(qb.store)}(e));var o=ng.resolve();return n<3&&3<=r&&(0!==n&&(function(e){e.deleteObjectStore(Kb.store),e.deleteObjectStore(zb.store),e.deleteObjectStore(Gb.store)}(e),Jb(e)),o=o.next(function(){return function(e){var t=e.store(Gb.store),n=new Gb(0,0,Iy.MIN.toTimestamp(),0);return t.put(Gb.key,n)}(t)})),n<4&&4<=r&&(0!==n&&(o=o.next(function(){return n=e,(r=t).store(Pb.store).loadAll().next(function(e){n.deleteObjectStore(Pb.store),n.createObjectStore(Pb.store,{keyPath:Pb.keyPath,autoIncrement:!0}).createIndex(Pb.userMutationsIndex,Pb.userMutationsKeyPath,{unique:!0});var t=r.store(Pb.store),i=e.map(function(e){return t.put(e)});return ng.waitFor(i)});var n,r})),o=o.next(function(){!function(e){e.createObjectStore(tw.store,{keyPath:tw.keyPath})}(e),function(e){e.createObjectStore(Zb.store,{keyPath:"id",autoIncrement:!0})}(e)})),n<5&&5<=r&&(o=o.next(function(){return i.removeAcknowledgedMutations(t)})),n<6&&6<=r&&(o=o.next(function(){return function(e){e.createObjectStore(Vb.store)}(e),i.addDocumentGlobal(t)})),n<7&&7<=r&&(o=o.next(function(){return i.ensureSequenceNumbers(t)})),n<8&&8<=r&&(o=o.next(function(){return i.createCollectionParentIndex(e,t)})),o},xb.prototype.addDocumentGlobal=function(e){var t=0;return e.store(qb.store).iterate(function(e,n){t+=_b(n)}).next(function(){var n=new Vb(t);return e.store(Vb.store).put(Vb.key,n)})},xb.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(Db.store),r=e.store(Pb.store);return n.loadAll().next(function(n){return ng.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(Pb.userMutationsIndex,i).next(function(r){return ng.forEach(r,function(r){om(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return cg(e,n.userId,i).next(function(){})})})})})},xb.prototype.ensureSequenceNumbers=function(e){var t=e.store(Kb.store),n=e.store(qb.store);return Dg(e).next(function(e){var r=[];return n.iterate(function(n,i){var o=new ny(n),a=function(e){return[0,_y(e)]}(o);r.push(t.get(a).next(function(n){return n?ng.resolve():function(n){return t.put(new Kb(0,_y(n),e))}(o)}))}).next(function(){return ng.waitFor(r)})})},xb.prototype.createCollectionParentIndex=function(e,t){function n(e){if(i.add(e)){var t=e.lastSegment(),n=e.popLast();return r.put({collectionId:t,parent:_y(n)})}}e.createObjectStore(Xb.store,{keyPath:Xb.keyPath});var r=t.store(Xb.store),i=new Sb;return t.store(qb.store).iterate({keysOnly:!0},function(e,t){var r=new ny(e);return n(r.popLast())}).next(function(){return t.store(Lb.store).iterate({keysOnly:!0},function(e,t){e[0];var r=e[1],i=(e[2],Sy(r));return n(i.popLast())})})},xb);function xb(e){this.serializer=e}var Nb=function(e,t){this.seconds=e,this.nanoseconds=t},Ab=(Ob.store="owner",Ob.key="owner",Ob);function Ob(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}var Db=(Rb.store="mutationQueues",Rb.keyPath="userId",Rb);function Rb(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}var Pb=(Mb.store="mutations",Mb.keyPath="batchId",Mb.userMutationsIndex="userMutationsIndex",Mb.userMutationsKeyPath=["userId","batchId"],Mb);function Mb(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}var Lb=(Fb.prefixForUser=function(e){return[e]},Fb.prefixForPath=function(e,t){return[e,_y(t)]},Fb.key=function(e,t,n){return[e,_y(t),n]},Fb.store="documentMutations",Fb.PLACEHOLDER=new Fb,Fb);function Fb(){}var Ub=function(e,t){this.path=e,this.readTime=t},jb=function(e,t){this.path=e,this.version=t},qb=(Bb.store="remoteDocuments",Bb);function Bb(e,t,n,r){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r}var Vb=(Wb.store="remoteDocumentGlobal",Wb.key="remoteDocumentGlobalKey",Wb);function Wb(e){this.byteSize=e}var zb=(Hb.store="targets",Hb.keyPath="targetId",Hb.queryTargetsIndexName="queryTargetsIndex",Hb.queryTargetsKeyPath=["canonicalId","targetId"],Hb);function Hb(e,t,n,r,i,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}var Kb=(Qb.store="targetDocuments",Qb.keyPath=["targetId","path"],Qb.documentTargetsIndex="documentTargetsIndex",Qb.documentTargetsKeyPath=["path","targetId"],Qb);function Qb(e,t,n){this.targetId=e,this.path=t,om(0===e==(void 0!==(this.sequenceNumber=n)),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}var Gb=(Yb.key="targetGlobalKey",Yb.store="targetGlobal",Yb);function Yb(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}var Xb=($b.store="collectionParents",$b.keyPath=["collectionId","parent"],$b);function $b(e,t){this.collectionId=e,this.parent=t}function Jb(e){e.createObjectStore(Kb.store,{keyPath:Kb.keyPath}).createIndex(Kb.documentTargetsIndex,Kb.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(zb.store,{keyPath:zb.keyPath}).createIndex(zb.queryTargetsIndexName,zb.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Gb.store)}var Zb=(ew.store="remoteDocumentChanges",ew.keyPath="id",ew);function ew(e){this.changes=e}var tw=(nw.store="clientMetadata",nw.keyPath="clientId",nw);function nw(e,t,n,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}var rw,iw,ow=[Db.store,Pb.store,Lb.store,qb.store,zb.store,Ab.store,Gb.store,Kb.store].concat([tw.store,Zb.store]).concat([Vb.store]).concat([Xb.store]),aw=(sw.prototype.addToCollectionParentIndex=function(e,t){if(om(t.length%2==1,"Expected a collection path."),this.collectionParentsCache.add(t)){om(1<=t.length,"Invalid collection path.");var n=t.lastSegment(),r=t.popLast();return uw(e).put({collectionId:n,parent:_y(r)})}return ng.resolve()},sw.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[qm(t),""],!1,!0);return uw(e).loadAll(r).next(function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(Sy(o.parent))}return n})},sw);function sw(){this.collectionParentsCache=new Sb}function uw(e){return Nw.getStore(e,Xb.store)}(iw=rw=rw||{})[iw.Listen=0]="Listen",iw[iw.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",iw[iw.LimboResolution=2]="LimboResolution";var cw=(lw.prototype.withSequenceNumber=function(e){return new lw(this.query,this.targetId,this.purpose,e,this.snapshotVersion,this.resumeToken)},lw.prototype.withResumeToken=function(e,t){return new lw(this.query,this.targetId,this.purpose,this.sequenceNumber,t,e)},lw.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.resumeToken===e.resumeToken&&this.query.isEqual(e.query)},lw);function lw(e,t,n,r,i,o){void 0===i&&(i=Iy.MIN),void 0===o&&(o=um()),this.query=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}var hw=(fw.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=uy.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new rb(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}return e.unknownDocument?(t=uy.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version),new ab(t,n)):im("Unexpected DbRemoteDocument")},fw.prototype.toDbRemoteDocument=function(e){if(e instanceof eb){var t=e.proto?e.proto:this.remoteSerializer.toDocument(e),n=e.hasCommittedMutations;return new qb(null,null,t,n)}if(e instanceof rb){var r=e.key.path.toArray(),i=this.toDbTimestamp(e.version);return n=e.hasCommittedMutations,new qb(null,new Ub(r,i),null,n)}return e instanceof ab?(r=e.key.path.toArray(),i=this.toDbTimestamp(e.version),new qb(new jb(r,i),null,null,!0)):im("Unexpected MaybeDocumment")},fw.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new Nb(t.seconds,t.nanoseconds)},fw.prototype.fromDbTimestamp=function(e){var t=new Cy(e.seconds,e.nanoseconds);return Iy.fromTimestamp(t)},fw.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map(function(e){return n.remoteSerializer.toMutation(e)}),i=t.mutations.map(function(e){return n.remoteSerializer.toMutation(e)});return new Pb(e,t.batchId,t.localWriteTime.toMillis(),r,i)},fw.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map(function(e){return t.remoteSerializer.fromMutation(e)}),r=e.mutations.map(function(e){return t.remoteSerializer.fromMutation(e)}),i=Cy.fromMillis(e.localWriteTimeMs);return new Jy(e.batchId,i,n,r)},fw.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach(function(e){t.push(_y(e.path))}),t},fw.prototype.fromDbResourcePaths=function(e){for(var t=Yy(),n=0,r=e;n<r.length;n++){var i=r[n];t=t.add(new uy(Sy(i)))}return t},fw.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime);return t=function(e){return void 0!==e.documents}(e.query)?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new cw(t,e.targetId,rw.Listen,e.lastListenSequenceNumber,n,e.resumeToken)},fw.prototype.toDbTarget=function(e){om(rw.Listen===e.purpose,"Only queries with purpose "+rw.Listen+" may be stored, got "+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion);return t=e.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.query):this.remoteSerializer.toQueryTarget(e.query),n=e.resumeToken instanceof Uint8Array?(om("YES"===Object({NODE_ENV:"production",PUBLIC_URL:"."}).USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),e.resumeToken.toString()):e.resumeToken,new zb(e.targetId,e.query.canonicalId(),r,n,e.sequenceNumber,t)},fw);function fw(e){this.remoteSerializer=e}function pw(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=Um(n,i);return 0===a?Um(r,o):a}var dw=(mw.prototype.nextIndex=function(){return++this.previousIndex},mw.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();pw(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(mw.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),mw);function mw(e){this.maxElements=e,this.buffer=new Fy(pw),this.previousIndex=0}var yw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gw=(vw.withCacheSize=function(e){return new vw(e,vw.DEFAULT_COLLECTION_PERCENTILE,vw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},vw.COLLECTION_DISABLED=-1,vw.MINIMUM_CACHE_SIZE_BYTES=1048576,vw.DEFAULT=new vw(vw.DEFAULT_CACHE_SIZE_BYTES=41943040,vw.DEFAULT_COLLECTION_PERCENTILE=10,vw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),vw.DISABLED=new vw(vw.COLLECTION_DISABLED,0,0),vw);function vw(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}var bw=(ww.prototype.start=function(){om(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==gw.COLLECTION_DISABLED&&this.scheduleGC()},ww.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(ww.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),ww.prototype.scheduleGC=function(){var e=this;om(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;tm("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(ly.LruGarbageCollection,t,function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then(function(){return e.scheduleGC()}).catch(Ow)})},ww);function ww(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}var _w=(Ew.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next(function(e){return Math.floor(t/100*e)})},Ew.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return ng.resolve(Xm.INVALID);var r=new dw(t);return this.delegate.forEachTarget(e,function(e){return r.addElement(e.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,function(e){return r.addElement(e)})}).next(function(){return r.maxValue})},Ew.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},Ew.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},Ew.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===gw.COLLECTION_DISABLED?(tm("LruGarbageCollector","Garbage collection skipped; disabled"),ng.resolve(yw)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(tm("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),yw):n.runGarbageCollection(e,t)})},Ew.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},Ew.prototype.runGarbageCollection=function(e,t){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return r=t>c.params.maximumSequenceNumbersToCollect?(tm("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+t),c.params.maximumSequenceNumbersToCollect):t,o=Date.now(),c.nthSequenceNumber(e,r)}).next(function(r){return n=r,a=Date.now(),c.removeTargets(e,n,t)}).next(function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)}).next(function(e){return u=Date.now(),Zd()<=Wd.DEBUG&&tm("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+e+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),ng.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})})},Ew);function Ew(e,t){this.delegate=e,this.params=t}var Tw,Sw="IndexedDbPersistence",Cw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",kw="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Iw=(Ri(xw,Tw=function(){}),xw);function xw(e,t){var n=Tw.call(this)||this;return n.simpleDbTransaction=e,n.currentSequenceNumber=t,n}var Nw=(Aw.getStore=function(e,t){if(e instanceof Iw)return gg.getStore(e.simpleDbTransaction,t);throw im("IndexedDbPersistence must use instances of IndexedDbTransaction")},Aw.createIndexedDbPersistence=function(e){return Mi(this,void 0,void 0,function(){var t;return Li(this,function(n){switch(n.label){case 0:if(!Aw.isAvailable())throw new hm(lm.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(t=new Aw(e.allowTabSynchronization,e.persistenceKey,e.clientId,e.platform,e.lruParams,e.queue,e.serializer,e.sequenceNumberSyncer)).start()];case 1:return n.sent(),[2,t]}})})},Aw.prototype.start=function(){var e=this;return om(!this.started,"IndexedDbPersistence double-started!"),om(null!==this.window,"Expected 'window' to be defined"),gg.openOrCreate(this.dbName,kb,new Ib(this.serializer)).then(function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()}).then(function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.startRemoteDocumentCache()}).then(function(){return e.simpleDb.runTransaction("readonly",[Gb.store],function(t){return Dg(t).next(function(t){e.listenSequence=new Xm(t,e.sequenceNumberSyncer)})})}).then(function(){e._started=!0}).catch(function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)})},Aw.prototype.startRemoteDocumentCache=function(){var e=this;return this.simpleDb.runTransaction("readonly",ow,function(t){return e.remoteDocumentCache.start(t)})},Aw.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return Mi(t,void 0,void 0,function(){return Li(this,function(t){return this.started?[2,e(n)]:[2]})})},e(this.isPrimary)},Aw.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener(function(n){return Mi(t,void 0,void 0,function(){return Li(this,function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},Aw.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget(function(){return Mi(t,void 0,void 0,function(){return Li(this,function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}))},Aw.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite",ow,function(t){return Rw(t).put(new tw(e.clientId,Date.now(),e.networkEnabled,e.inForeground,e.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next(function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget(function(){return e.primaryStateListener(!1)}))})}).next(function(){return e.canActAsPrimary(t)}).next(function(n){var r=e.isPrimary;return e.isPrimary=n,r!==e.isPrimary&&e.queue.enqueueAndForget(function(){return e.primaryStateListener(e.isPrimary)}),r&&!e.isPrimary?e.releasePrimaryLeaseIfHeld(t):e.isPrimary?e.acquireOrExtendPrimaryLease(t):void 0})})},Aw.prototype.verifyPrimaryLease=function(e){var t=this;return Dw(e).get(Ab.key).next(function(e){return ng.resolve(t.isLocalClient(e))})},Aw.prototype.removeClientMetadata=function(e){return Rw(e).delete(this.clientId)},Aw.prototype.maybeGarbageCollectMultiClientState=function(){return Mi(this,void 0,void 0,function(){var e,t,n=this;return Li(this,function(r){switch(r.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),t=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(r){var i=Aw.getStore(r,tw.store);return i.loadAll().next(function(r){e=n.filterActiveClients(r,18e5),t=r.filter(function(t){return-1===e.indexOf(t)})}).next(function(){return ng.forEach(t,function(e){return i.delete(e.clientId)})}).next(function(){if(0<(e=e.filter(function(e){return e.clientId!==n.clientId})).length){var t=e.map(function(e){return e.lastProcessedDocumentChangeId||0}),i=Math.min.apply(Math,t);return n.remoteDocumentCache.removeDocumentChangesThroughChangeId(r,i)}})})]);case 1:r.sent(),t.forEach(function(e){n.window.localStorage.removeItem(n.zombiedClientLocalStorageKey(e.clientId))}),r.label=2;case 2:return[2]}})})},Aw.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(ly.ClientMetadataRefresh,4e3,function(){return e.updateClientMetadataAndTryBecomePrimary().then(function(){return e.maybeGarbageCollectMultiClientState()}).then(function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},Aw.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},Aw.prototype.canActAsPrimary=function(e){var t=this;return Dw(e).get(Ab.key).next(function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new hm(lm.FAILED_PRECONDITION,kw);return!1}}return!(!t.networkEnabled||!t.inForeground)||Rw(e).loadAll().next(function(e){return void 0===t.filterActiveClients(e,5e3).find(function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1})})}).next(function(e){return t.isPrimary!==e&&tm(Sw,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e})},Aw.prototype.shutdown=function(){return Mi(this,void 0,void 0,function(){var e=this;return Li(this,function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[Ab.store,tw.store],function(t){return e.releasePrimaryLeaseIfHeld(t).next(function(){return e.removeClientMetadata(t)})})];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}})})},Aw.prototype.filterActiveClients=function(e,t){var n=this;return e.filter(function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)})},Aw.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly",[tw.store],function(t){return Rw(t).loadAll().next(function(t){return e.filterActiveClients(t,18e5).map(function(e){return e.clientId})})})},Aw.clearPersistence=function(e){return Mi(this,void 0,void 0,function(){var t;return Li(this,function(n){switch(n.label){case 0:return Aw.isAvailable()?(t=e+Aw.MAIN_DATABASE,[4,gg.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}})})},Object.defineProperty(Aw.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),Aw.prototype.getMutationQueue=function(e){return om(this.started,"Cannot initialize MutationQueue before persistence is started."),ag.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},Aw.prototype.getQueryCache=function(){return om(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},Aw.prototype.getRemoteDocumentCache=function(){return om(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},Aw.prototype.getIndexManager=function(){return om(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},Aw.prototype.runTransaction=function(e,t,n){var r=this;return tm(Sw,"Starting transaction:",e),this.simpleDb.runTransaction("readonly"===t?"readonly":"readwrite",ow,function(i){return"readwrite-primary"===t?r.verifyPrimaryLease(i).next(function(t){if(!t)throw nm("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new hm(lm.FAILED_PRECONDITION,Cw);return n(new Iw(i,r.listenSequence.next()))}).next(function(e){return r.acquireOrExtendPrimaryLease(i).next(function(){return e})}):r.verifyAllowTabSynchronization(i).next(function(){return n(new Iw(i,r.listenSequence.next()))})})},Aw.prototype.verifyAllowTabSynchronization=function(e){var t=this;return Dw(e).get(Ab.key).next(function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new hm(lm.FAILED_PRECONDITION,kw)})},Aw.prototype.acquireOrExtendPrimaryLease=function(e){var t=new Ab(this.clientId,this.allowTabSynchronization,Date.now());return Dw(e).put(Ab.key,t)},Aw.isAvailable=function(){return gg.isAvailable()},Aw.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},Aw.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=Dw(e);return n.get(Ab.key).next(function(e){return t.isLocalClient(e)?(tm(Sw,"Releasing primary lease."),n.delete(Ab.key)):ng.resolve()})},Aw.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t||n<e&&(nm("Detected an update time that is in the future: "+e+" > "+n),1))},Aw.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},Aw.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(om(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},Aw.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},Aw.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(om("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},Aw.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return tm(Sw,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return nm(Sw,"Failed to get zombied client id.",e),!1}},Aw.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){nm("Failed to set zombie client id.",e)}},Aw.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},Aw.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},Aw.MAIN_DATABASE="main",Aw);function Aw(e,t,n,r,i,o,a,s){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.queue=o,this.sequenceNumberSyncer=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},this.referenceDelegate=new Pw(this,i),this.dbName=t+Aw.MAIN_DATABASE,this.serializer=new hw(a),this.document=r.document,this.queryCache=new xg(this.referenceDelegate,this.serializer),this.indexManager=new aw,this.remoteDocumentCache=new db(this.serializer,this.indexManager,this.allowTabSynchronization),!r.window||!r.window.localStorage)throw new hm(lm.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}function Ow(e){return Mi(this,void 0,void 0,function(){return Li(this,function(t){if(!function(e){return e.code===lm.FAILED_PRECONDITION&&e.message===Cw}(e))throw e;return tm(Sw,"Unexpectedly lost primary lease"),[2]})})}function Dw(e){return e.store(Ab.store)}function Rw(e){return e.store(tw.store)}var Pw=(Mw.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getQueryCache().getQueryCount(e).next(function(e){return t.next(function(t){return e+t})})},Mw.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},Mw.prototype.forEachTarget=function(e,t){return this.db.getQueryCache().forEachTarget(e,t)},Mw.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,function(e,n){return t(n)})},Mw.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},Mw.prototype.addReference=function(e,t){return Lw(e,t)},Mw.prototype.removeReference=function(e,t){return Lw(e,t)},Mw.prototype.removeTargets=function(e,t,n){return this.db.getQueryCache().removeTargets(e,t,n)},Mw.prototype.removeMutationReference=function(e,t){return Lw(e,t)},Mw.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?ng.resolve(!0):function(e,t){var n=!1;return pg(e).iterateSerial(function(r){return ug(e,r,t).next(function(e){return e&&(n=!0),ng.resolve(!e)})}).next(function(){return n})}(e,t)},Mw.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(e,function(a,s){if(s<=t){var u=n.isPinned(e,a).next(function(t){if(!t)return o++,r.getEntry(e,a).next(function(){return r.removeEntry(a),Rg(e).delete([0,_y(a.path)])})});i.push(u)}}).next(function(){return ng.waitFor(i)}).next(function(){return r.apply(e)}).next(function(){return o})},Mw.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getQueryCache().updateQueryData(e,n)},Mw.prototype.updateLimboDocument=function(e,t){return Lw(e,t)},Mw.prototype.forEachOrphanedDocument=function(e,t){var n,r=Rg(e),i=Xm.INVALID;return r.iterate({index:Kb.documentTargetsIndex},function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==Xm.INVALID&&t(new uy(Sy(n)),i),i=s,n=a):i=Xm.INVALID}).next(function(){i!==Xm.INVALID&&t(new uy(Sy(n)),i)})},Mw.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},Mw);function Mw(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new _w(this,t)}function Lw(e,t){return Rg(e).put(function(e,t){return new Kb(0,_y(e.path),t)}(t,e.currentSequenceNumber))}var Fw=(Uw.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.getDocumentInternal(e,t,r)})},Uw.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next(function(e){for(var r=0,i=n;r<i.length;r++)e=i[r].applyToLocalView(t,e);return e})},Uw.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=Wy();return t.forEach(function(e,t){for(var i=0,o=n;i<o.length;i++)t=o[i].applyToLocalView(e,t);r=r.insert(e,t)}),r},Uw.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next(function(t){return n.getLocalViewOfDocuments(e,t)})},Uw.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=Vy();return i.forEach(function(e,t){t=t||new rb(e,Iy.forDeletedDoc()),o=o.insert(e,t)}),o})},Uw.prototype.getDocumentsMatchingQuery=function(e,t){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t):this.getDocumentsMatchingCollectionQuery(e,t)},Uw.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new uy(t)).next(function(e){var t=Hy();return e instanceof eb&&(t=t.insert(e.key,e)),t})},Uw.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t){var n=this;om(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var r=t.collectionGroup,i=Hy();return this.indexManager.getCollectionParents(e,r).next(function(o){return ng.forEach(o,function(o){var a=t.asCollectionQueryAtPath(o.child(r));return n.getDocumentsMatchingCollectionQuery(e,a).next(function(e){e.forEach(function(e,t){i=i.insert(e,t)})})}).next(function(){return i})})},Uw.prototype.getDocumentsMatchingCollectionQuery=function(e,t){var n,r,i=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t).next(function(r){return n=r,i.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)}).next(function(t){return r=t,i.addMissingBaseDocuments(e,r,n).next(function(e){n=e;for(var t=0,i=r;t<i.length;t++)for(var o=i[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=n.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);n=h instanceof eb?n.insert(c,h):n.remove(c)}})}).next(function(){return n.forEach(function(e,r){t.matches(r)||(n=n.remove(e))}),n})},Uw.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=Yy(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Yg&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.remoteDocumentCache.getEntries(e,r).next(function(e){return e.forEach(function(e,t){null!==t&&t instanceof eb&&(c=c.insert(e,t))}),c})},Uw);function Uw(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}var jw=(qw.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},qw.prototype.addReference=function(e,t){var n=new Bw(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},qw.prototype.addReferences=function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})},qw.prototype.removeReference=function(e,t){this.removeRef(new Bw(e,t))},qw.prototype.removeReferences=function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})},qw.prototype.removeReferencesForId=function(e){var t=this,n=uy.EMPTY,r=new Bw(n,e),i=new Bw(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(e){t.removeRef(e),o.push(e.key)}),o},qw.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach(function(t){return e.removeRef(t)})},qw.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},qw.prototype.referencesForId=function(e){var t=uy.EMPTY,n=new Bw(t,e),r=new Bw(t,e+1),i=Yy();return this.refsByTarget.forEachInRange([n,r],function(e){i=i.add(e.key)}),i},qw.prototype.containsKey=function(e){var t=new Bw(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},qw);function qw(){this.refsByKey=new Fy(Bw.compareByKey),this.refsByTarget=new Fy(Bw.compareByTargetId)}var Bw=(Vw.compareByKey=function(e,t){return uy.comparator(e.key,t.key)||Um(e.targetOrBatchId,t.targetOrBatchId)},Vw.compareByTargetId=function(e,t){return Um(e.targetOrBatchId,t.targetOrBatchId)||uy.comparator(e.key,t.key)},Vw);function Vw(e,t){this.key=e,this.targetOrBatchId=t}var Ww="LocalStore",zw=(Hw.prototype.handleUserChange=function(e){var t=this;return this.persistence.runTransaction("Handle user change","readonly",function(n){var r;return t.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,t.mutationQueue=t.persistence.getMutationQueue(e),t.localDocuments=new Fw(t.remoteDocuments,t.mutationQueue,t.persistence.getIndexManager()),t.mutationQueue.getAllMutationBatches(n)}).next(function(e){for(var i=[],o=[],a=Yy(),s=0,u=r;s<u.length;s++){var c=u[s];i.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){c=d[p],o.push(c.batchId);for(var m=0,y=c.mutations;m<y.length;m++)f=y[m],a=a.add(f.key)}return t.localDocuments.getDocuments(n,a).next(function(e){return{affectedDocuments:e,removedBatchIds:i,addedBatchIds:o}})})})},Hw.prototype.localWrite=function(e){var t=this,n=Cy.now(),r=e.reduce(function(e,t){return e.add(t.key)},Yy());return this.persistence.runTransaction("Locally write mutations","readwrite",function(i){return t.localDocuments.getDocuments(i,r).next(function(r){for(var o=[],a=0,s=e;a<s.length;a++){var u=s[a],c=u.extractBaseValue(r.get(u.key));null!=c&&o.push(new Yg(u.key,c,c.fieldMask(),Bg.exists(!0)))}return t.mutationQueue.addMutationBatch(i,n,o,e).next(function(e){var t=e.applyToLocalDocumentSet(r);return{batchId:e.batchId,changes:t}})})})},Hw.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(n){return t.mutationQueue.lookupMutationKeys(n,e).next(function(e){return e?t.localDocuments.getDocuments(n,e):ng.resolve(null)})})},Hw.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer();return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next(function(){return t.applyWriteToRemoteDocuments(n,e,i)}).next(function(){return i.apply(n)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},Hw.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next(function(e){return om(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},Hw.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)})},Hw.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly",function(t){return e.mutationQueue.getLastStreamToken(t)})},Hw.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(n){return t.mutationQueue.setLastStreamToken(n,e)})},Hw.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.queryCache.getLastRemoteSnapshotVersion(t)})},Hw.prototype.applyRemoteEvent=function(e){var t=this,n=this.remoteDocuments.newChangeBuffer(),r=e.snapshotVersion;return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(i){var o=[];ym(e.targetChanges,function(e,n){var a=t.queryDataByTarget[e];if(a){o.push(t.queryCache.removeMatchingKeys(i,n.removedDocuments,e).next(function(){return t.queryCache.addMatchingKeys(i,n.addedDocuments,e)}));var s=n.resumeToken;if(0<s.length){var u=a.withResumeToken(s,r);t.queryDataByTarget[e]=u,Hw.shouldPersistQueryData(a,u,n)&&o.push(t.queryCache.updateQueryData(i,u))}}});var a=Vy(),s=Yy();if(e.documentUpdates.forEach(function(e,t){s=s.add(e)}),o.push(n.getEntries(i,s).next(function(r){e.documentUpdates.forEach(function(s,u){var c=r.get(s);u instanceof rb&&u.version.isEqual(Iy.MIN)?(n.removeEntry(s),a=a.insert(s,u)):null==c||0<u.version.compareTo(c.version)||0===u.version.compareTo(c.version)&&c.hasPendingWrites?(Iy.MIN.isEqual(e.snapshotVersion)&&nm(Ww,"Cannot add a document when the remote version is zero"),n.addEntry(u),a=a.insert(s,u)):tm(Ww,"Ignoring outdated watch update for ",s,". Current version:",c.version," Watch version:",u.version),e.resolvedLimboDocuments.has(s)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(i,s))})})),!r.isEqual(Iy.MIN)){var u=t.queryCache.getLastRemoteSnapshotVersion(i).next(function(e){return om(0<=r.compareTo(e),"Watch stream reverted to previous snapshot?? "+r+" < "+e),t.queryCache.setTargetsMetadata(i,i.currentSequenceNumber,r)});o.push(u)}return ng.waitFor(o).next(function(){return n.apply(i)}).next(function(){return t.localDocuments.getLocalViewOfDocuments(i,a)})})},Hw.shouldPersistQueryData=function(e,t,n){return om(0<t.resumeToken.length,"Attempted to persist query data with no resume token"),0===e.resumeToken.length||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||0<n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size},Hw.prototype.notifyLocalViewChanges=function(e){var t=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return ng.forEach(e,function(e){return t.localViewReferences.addReferences(e.addedKeys,e.targetId),t.localViewReferences.removeReferences(e.removedKeys,e.targetId),ng.forEach(e.removedKeys,function(e){return t.persistence.referenceDelegate.removeReference(n,e)})})})},Hw.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)})},Hw.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly",function(n){return t.localDocuments.getDocument(n,e)})},Hw.prototype.allocateQuery=function(e){var t=this;return this.persistence.runTransaction("Allocate query","readwrite",function(n){var r;return t.queryCache.getQueryData(n,e).next(function(i){return i?(r=i,ng.resolve()):t.queryCache.allocateTargetId(n).next(function(i){return r=new cw(e,i,rw.Listen,n.currentSequenceNumber),t.queryCache.addQueryData(n,r)})}).next(function(){return om(!t.queryDataByTarget[r.targetId],"Tried to allocate an already allocated query: "+e),t.queryDataByTarget[r.targetId]=r})})},Hw.prototype.releaseQuery=function(e,t){var n=this,r=t?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release query",r,function(r){return n.queryCache.getQueryData(r,e).next(function(i){om(null!=i,"Tried to release nonexistent query: "+e);var o=i.targetId,a=n.queryDataByTarget[o],s=n.localViewReferences.removeReferencesForId(o);return delete n.queryDataByTarget[o],t?ng.resolve():ng.forEach(s,function(e){return n.persistence.referenceDelegate.removeReference(r,e)}).next(function(){return n.persistence.referenceDelegate.removeTarget(r,a)})})})},Hw.prototype.executeQuery=function(e){var t=this;return this.persistence.runTransaction("Execute query","readonly",function(n){return t.localDocuments.getDocumentsMatchingQuery(n,e)})},Hw.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly",function(n){return t.queryCache.getMatchingKeysForTargetId(n,e)})},Hw.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},Hw.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},Hw.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},Hw.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),a=ng.resolve();return o.forEach(function(r){a=a.next(function(){return n.getEntry(e,r)}).next(function(e){var o=e,a=t.docVersions.get(r);om(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,t))?n.addEntry(o):om(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))})}),a.next(function(){return r.mutationQueue.removeMutationBatch(e,i)})},Hw.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.queryDataByTarget)})},Hw.prototype.getQueryForTarget=function(e){var t=this;return this.queryDataByTarget[e]?Promise.resolve(this.queryDataByTarget[e].query):this.persistence.runTransaction("Get query data","readonly",function(n){return t.queryCache.getQueryDataForTarget(n,e).next(function(e){return e?e.query:null})})},Hw.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly",function(t){return e.remoteDocuments.getNewDocumentChanges(t)})},Hw.RESUME_TOKEN_MAX_AGE_MICROS=3e8,Hw);function Hw(e,t){this.persistence=e,this.localViewReferences=new jw,this.queryDataByTarget={},om(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(t),this.remoteDocuments=e.getRemoteDocumentCache(),this.queryCache=e.getQueryCache(),this.localDocuments=new Fw(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager())}var Kw=(Qw.prototype.checkEmpty=function(e){return ng.resolve(0===this.mutationQueue.length)},Qw.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");om(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return om(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,ng.resolve()},Qw.prototype.getLastStreamToken=function(e){return ng.resolve(this.lastStreamToken)},Qw.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,ng.resolve()},Qw.prototype.addMutationBatch=function(e,t,n,r){om(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;this.nextBatchId++,0<this.mutationQueue.length&&om(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new Jy(i,t,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Bw(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}return ng.resolve(o)},Qw.prototype.lookupMutationBatch=function(e,t){return ng.resolve(this.findMutationBatch(t))},Qw.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return om(null!=n,"Failed to find local mutation batch."),ng.resolve(n.keys())},Qw.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.indexOfBatchId(n),i=r<0?0:r;return ng.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},Qw.prototype.getHighestUnacknowledgedBatchId=function(){return ng.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},Qw.prototype.getAllMutationBatches=function(e){return ng.resolve(this.mutationQueue.slice())},Qw.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new Bw(t,0),i=new Bw(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(e){om(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);om(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),ng.resolve(o)},Qw.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Fy(Um);return t.forEach(function(e){var t=new Bw(e,0),i=new Bw(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],function(t){om(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)})}),ng.resolve(this.findMutationBatches(r))},Qw.prototype.getAllMutationBatchesAffectingQuery=function(e,t){om(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;uy.isDocumentKey(i)||(i=i.child(""));var o=new Bw(new uy(i),0),a=new Fy(Um);return this.batchesByDocumentKey.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.targetOrBatchId)),!0)},o),ng.resolve(this.findMutationBatches(a))},Qw.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach(function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)}),n},Qw.prototype.removeMutationBatch=function(e,t){var n=this;om(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return ng.forEach(t.mutations,function(i){var o=new Bw(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(e,i.key)}).next(function(){n.batchesByDocumentKey=r})},Qw.prototype.removeCachedMutationKeys=function(e){},Qw.prototype.containsKey=function(e,t){var n=new Bw(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return ng.resolve(t.isEqual(r&&r.key))},Qw.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&om(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),ng.resolve()},Qw.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return om(0<=n&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},Qw.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},Qw.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return om(n.batchId===e,"If found batch must match"),n},Qw);function Qw(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=um(),this.batchesByDocumentKey=new Fy(Bw.compareByKey)}var Gw=(Yw.prototype.getTargetCount=function(e){return ng.resolve(this.targetCount)},Yw.prototype.forEachTarget=function(e,t){return this.queries.forEach(function(e,n){return t(n)}),ng.resolve()},Yw.prototype.getLastRemoteSnapshotVersion=function(e){return ng.resolve(this.lastRemoteSnapshotVersion)},Yw.prototype.getHighestSequenceNumber=function(e){return ng.resolve(this.highestSequenceNumber)},Yw.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,ng.resolve(t)},Yw.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),ng.resolve()},Yw.prototype.saveQueryData=function(e){this.queries.set(e.query,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},Yw.prototype.addQueryData=function(e,t){return om(!this.queries.has(t.query),"Adding a query that already exists"),this.saveQueryData(t),this.targetCount+=1,ng.resolve()},Yw.prototype.updateQueryData=function(e,t){return om(this.queries.has(t.query),"Updating a non-existent query"),this.saveQueryData(t),ng.resolve()},Yw.prototype.removeQueryData=function(e,t){return om(0<this.targetCount,"Removing a target from an empty cache"),om(this.queries.has(t.query),"Removing a non-existent target from the cache"),this.queries.delete(t.query),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,ng.resolve()},Yw.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.queries.forEach(function(a,s){s.sequenceNumber<=t&&!n[s.targetId]&&(r.queries.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),ng.waitFor(o).next(function(){return i})},Yw.prototype.getQueryCount=function(e){return ng.resolve(this.targetCount)},Yw.prototype.getQueryData=function(e,t){var n=this.queries.get(t)||null;return ng.resolve(n)},Yw.prototype.getQueryDataForTarget=function(e,t){return im("Not yet implemented.")},Yw.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.addReference(e,t))}),ng.waitFor(i)},Yw.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.removeReference(e,t))}),ng.waitFor(i)},Yw.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),ng.resolve()},Yw.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return ng.resolve(n)},Yw.prototype.containsKey=function(e,t){return ng.resolve(this.references.containsKey(t))},Yw);function Yw(e){this.persistence=e,this.queries=new ub(function(e){return e.canonicalId()}),this.lastRemoteSnapshotVersion=Iy.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new jw,this.targetCount=0,this.targetIdGenerator=dg.forQueryCache()}var Xw,$w=(Jw.prototype.addEntry=function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.sizer(t);return this.docs=this.docs.insert(n,{maybeDocument:t,size:o}),this.newDocumentChanges=this.newDocumentChanges.add(n),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())},Jw.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},Jw.prototype.getEntry=function(e,t){var n=this.docs.get(t);return ng.resolve(n?n.maybeDocument:null)},Jw.prototype.getEntries=function(e,t){var n=this,r=Wy();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)}),ng.resolve(r)},Jw.prototype.getDocumentsMatchingQuery=function(e,t){om(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var n=Hy(),r=new uy(t.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),a=o.key,s=o.value.maybeDocument;if(!t.path.isPrefixOf(a.path))break;s instanceof eb&&t.matches(s)&&(n=n.insert(s.key,s))}return ng.resolve(n)},Jw.prototype.forEachDocumentKey=function(e,t){return ng.forEach(this.docs,function(e){return t(e)})},Jw.prototype.getNewDocumentChanges=function(e){var t=this,n=Vy();return this.newDocumentChanges.forEach(function(e){var r=t.docs.get(e),i=r?r.maybeDocument:new rb(e,Iy.forDeletedDoc());n=n.insert(e,i)}),this.newDocumentChanges=Yy(),ng.resolve(n)},Jw.prototype.newChangeBuffer=function(){return new Jw.RemoteDocumentChangeBuffer(this)},Jw.prototype.getSize=function(e){return ng.resolve(this.size)},Jw.RemoteDocumentChangeBuffer=(Ri(Zw,Xw=lb),Zw.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach(function(r,i){i?n.push(t.documentCache.addEntry(e,i)):t.documentCache.removeEntry(r)}),ng.waitFor(n)},Zw.prototype.getFromCache=function(e,t){return this.documentCache.getEntry(e,t)},Zw.prototype.getAllFromCache=function(e,t){return this.documentCache.getEntries(e,t)},Zw),Jw);function Jw(e,t){this.indexManager=e,this.sizer=t,this.docs=new Ny(uy.comparator),this.newDocumentChanges=Yy(),this.size=0}function Zw(e){var t=Xw.call(this)||this;return t.documentCache=e,t}var e_=(t_.createLruPersistence=function(e,t,n){return new t_(e,function(e){return new o_(e,new hw(t),n)})},t_.createEagerPersistence=function(e){return new t_(e,function(e){return new r_(e)})},t_.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(t_.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t_.prototype.getActiveClients=function(){return Mi(this,void 0,void 0,function(){return Li(this,function(e){return[2,[this.clientId]]})})},t_.prototype.setPrimaryStateListener=function(e){return e(!0)},t_.prototype.setDatabaseDeletedListener=function(){},t_.prototype.setNetworkEnabled=function(e){},t_.prototype.getIndexManager=function(){return this.indexManager},t_.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new Kw(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},t_.prototype.getQueryCache=function(){return this.queryCache},t_.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t_.prototype.runTransaction=function(e,t,n){var r=this;tm("MemoryPersistence","Starting transaction:",e);var i=new n_(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(e){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return e})}).toPromise()},t_.prototype.mutationQueuesContainKey=function(e,t){return ng.or(function(e){var t=[];return gm(e,function(e,n){return t.push(n)}),t}(this.mutationQueues).map(function(n){return function(){return n.containsKey(e,t)}}))},t_);function t_(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new Xm(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.queryCache=new Gw(this),this.indexManager=new Eb,this.remoteDocumentCache=new $w(this.indexManager,function(e){return n.referenceDelegate.documentSize(e)})}var n_=function(e){this.currentSequenceNumber=e},r_=(Object.defineProperty(i_.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw im("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),i_.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},i_.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),ng.resolve()},i_.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),ng.resolve()},i_.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),ng.resolve()},i_.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.orphanedDocuments.add(e)})}).next(function(){return r.removeQueryData(e,t)})},i_.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},i_.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ng.forEach(this.orphanedDocuments,function(r){return t.isReferenced(e,r).next(function(e){e||n.removeEntry(r)})}).next(function(){return t._orphanedDocuments=null,n.apply(e)})},i_.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next(function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)})},i_.prototype.documentSize=function(e){return 0},i_.prototype.isReferenced=function(e,t){var n=this;return ng.or([function(){return n.persistence.getQueryCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return ng.resolve(n.inMemoryPins.containsKey(t))}])},i_);function i_(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}var o_=(a_.prototype.onTransactionStarted=function(){},a_.prototype.onTransactionCommitted=function(e){return ng.resolve()},a_.prototype.forEachTarget=function(e,t){return this.persistence.getQueryCache().forEachTarget(e,t)},a_.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getQueryCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})},a_.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},a_.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return ng.forEach(this.orphanedSequenceNumbers,function(r,i){return n.isPinned(e,r,i).next(function(e){return e?ng.resolve():t(i)})})},a_.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},a_.prototype.removeTargets=function(e,t,n){return this.persistence.getQueryCache().removeTargets(e,t,n)},a_.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(e,function(i){return n.isPinned(e,i,t).next(function(e){e||(r++,o.removeEntry(i))})}).next(function(){return o.apply(e)}).next(function(){return r})},a_.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),ng.resolve()},a_.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getQueryCache().updateQueryData(e,n)},a_.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),ng.resolve()},a_.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),ng.resolve()},a_.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),ng.resolve()},a_.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw im("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},a_.prototype.isPinned=function(e,t,n){var r=this;return ng.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return ng.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getQueryCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return ng.resolve(void 0!==e&&n<e)}])},a_.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},a_);function a_(e,t,n){this.persistence=e,this.serializer=t,this.inMemoryPins=null,this.orphanedSequenceNumbers=new ub(function(e){return _y(e.path)}),this.garbageCollector=new _w(this,n)}var s_=Number,u_=s_.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),c_=s_.MAX_SAFE_INTEGER||Math.pow(2,53)-1,l_=s_.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function h_(e){return null==e}function f_(e){return l_(e)&&e<=c_&&u_<=e}var p_=(d_.prototype.reset=function(){this.currentBaseMs=0},d_.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},d_.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);0<this.currentBaseMs&&tm("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return t.lastAttemptTime=Date.now(),e()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},d_.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},d_.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},d_);function d_(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}var m_,y_,g_="PersistentStream";(y_=m_=m_||{})[y_.Initial=0]="Initial",y_[y_.Starting=1]="Starting",y_[y_.Open=2]="Open",y_[y_.Error=3]="Error",y_[y_.Backoff=4]="Backoff";var v_=(b_.prototype.isStarted=function(){return this.state===m_.Starting||this.state===m_.Open||this.state===m_.Backoff},b_.prototype.isOpen=function(){return this.state===m_.Open},b_.prototype.start=function(){this.state!==m_.Error?(om(this.state===m_.Initial,"Already started"),this.auth()):this.performBackoff()},b_.prototype.stop=function(){return Mi(this,void 0,void 0,function(){return Li(this,function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(m_.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},b_.prototype.inhibitBackoff=function(){om(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=m_.Initial,this.backoff.reset()},b_.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return e.handleIdleCloseTimer()}))},b_.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},b_.prototype.handleIdleCloseTimer=function(){return Mi(this,void 0,void 0,function(){return Li(this,function(e){return this.isOpen()?[2,this.close(m_.Initial)]:[2]})})},b_.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},b_.prototype.close=function(e,t){return Mi(this,void 0,void 0,function(){return Li(this,function(n){switch(n.label){case 0:return om(this.isStarted(),"Only started streams should be closed."),om(e===m_.Error||h_(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==m_.Error?this.backoff.reset():t&&t.code===lm.RESOURCE_EXHAUSTED?(nm(t.toString()),nm("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===lm.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}})})},b_.prototype.tearDown=function(){},b_.prototype.auth=function(){var e=this;om(this.state===m_.Initial,"Must be in initial state to auth"),this.state=m_.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(t){e.closeCount===n&&e.startStream(t)},function(n){t(function(){var t=new hm(lm.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)})})},b_.prototype.startStream=function(e){var t=this;om(this.state===m_.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen(function(){n(function(){return om(t.state===m_.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=m_.Open,t.listener.onOpen()})}),this.stream.onClose(function(e){n(function(){return t.handleStreamClose(e)})}),this.stream.onMessage(function(e){n(function(){return t.onMessage(e)})})},b_.prototype.performBackoff=function(){var e=this;om(this.state===m_.Error,"Should only perform backoff when in Error state"),this.state=m_.Backoff,this.backoff.backoffAndRun(function(){return Mi(e,void 0,void 0,function(){return Li(this,function(e){return om(this.state===m_.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=m_.Initial,this.start(),om(this.isStarted(),"PersistentStream should have started"),[2]})})})},b_.prototype.handleStreamClose=function(e){return om(this.isStarted(),"Can't handle server close on non-started stream"),tm(g_,"close with error: "+e),this.stream=null,this.close(m_.Error,e)},b_.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget(function(){return t.closeCount===e?n():(tm(g_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},b_);function b_(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=m_.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new p_(e,t)}var w_,__=(Ri(E_,w_=v_),E_.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},E_.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},E_.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},E_.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},E_);function E_(e,t,n,r,i){var o=w_.call(this,e,ly.ListenStreamConnectionBackoff,ly.ListenStreamIdle,t,n,i)||this;return o.serializer=r,o}var T_,S_=(Ri(C_,T_=v_),Object.defineProperty(C_.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),C_.prototype.start=function(){this.handshakeComplete_=!1,T_.prototype.start.call(this)},C_.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},C_.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},C_.prototype.onMessage=function(e){if(om(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return om(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},C_.prototype.writeHandshake=function(){om(this.isOpen(),"Writing handshake requires an opened stream"),om(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},C_.prototype.writeMutations=function(e){var t=this;om(this.isOpen(),"Writing mutations requires an opened stream"),om(this.handshakeComplete_,"Handshake must be complete before writing mutations"),om(0<this.lastStreamToken.length,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map(function(e){return t.serializer.toMutation(e)})};this.sendRequest(n)},C_);function C_(e,t,n,r,i){var o=T_.call(this,e,ly.WriteStreamConnectionBackoff,ly.WriteStreamIdle,t,n,i)||this;return o.serializer=r,o.handshakeComplete_=!1,o.lastStreamToken=um(),o}var k_=(I_.prototype.newPersistentWriteStream=function(e){return new S_(this.queue,this.connection,this.credentials,this.serializer,e)},I_.prototype.newPersistentWatchStream=function(e){return new __(this.queue,this.connection,this.credentials,this.serializer,e)},I_.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map(function(e){return t.serializer.toMutation(e)})};return this.invokeRPC("Commit",n).then(function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)})},I_.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map(function(e){return t.serializer.toName(e)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=Vy();n.forEach(function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)});var i=[];return e.forEach(function(e){var t=r.get(e);om(!!t,"Missing entity in write response for "+e),i.push(t)}),i})},I_.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(e,t,r)}).catch(function(e){throw e.code===lm.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},I_.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(e,t,r)}).catch(function(e){throw e.code===lm.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},I_);function I_(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}var x_,N_,A_,O_,D_=(R_.prototype.lookup=function(e){return Mi(this,void 0,void 0,function(){var t,n=this;return Li(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),0<this.mutations.length)throw new hm(lm.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(e)];case 1:return(t=r.sent()).forEach(function(e){e instanceof rb||e instanceof eb?n.recordVersion(e):im("Document in a transaction was a "+e.constructor.name)}),[2,t]}})})},R_.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},R_.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e)},R_.prototype.delete=function(e){this.write([new ov(e,this.precondition(e))]),this.writtenDocs.add(e)},R_.prototype.commit=function(){return Mi(this,void 0,void 0,function(){var e;return Li(this,function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(e=this.readVersions,this.mutations.forEach(function(t){e=e.remove(t.key)}),!e.isEmpty())throw new hm(lm.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}})})},R_.prototype.recordVersion=function(e){var t;if(e instanceof eb)t=e.version;else{if(!(e instanceof rb))throw im("Document in a transaction was a "+e.constructor.name);t=Iy.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new hm(lm.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},R_.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?Bg.updateTime(t):Bg.NONE},R_.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(this.writtenDocs.has(e)||!t)return Bg.exists(!0);if(t.isEqual(Iy.forDeletedDoc()))throw new hm(lm.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bg.updateTime(t)},R_.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},R_.prototype.ensureCommitNotCalled=function(){om(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},R_);function R_(e){this.datastore=e,this.readVersions=Qy(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}(N_=x_=x_||{})[N_.Unknown=0]="Unknown",N_[N_.Online=1]="Online",N_[N_.Offline=2]="Offline",(O_=A_=A_||{})[O_.RemoteStore=0]="RemoteStore",O_[O_.SharedClientState=1]="SharedClientState";var P_,M_,L_=(F_.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(x_.Unknown),om(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(ly.OnlineStateTimeout,1e4,function(){return e.onlineStateTimer=null,om(e.state===x_.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(x_.Offline),Promise.resolve()}))},F_.prototype.handleWatchStreamFailure=function(e){this.state===x_.Online?(this.setAndBroadcast(x_.Unknown),om(0===this.watchStreamFailures,"watchStreamFailures must be 0"),om(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,1<=this.watchStreamFailures&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(x_.Offline)))},F_.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===x_.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},F_.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},F_.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(nm(t),this.shouldWarnClientIsOffline=!1):tm("OnlineStateTracker",t)},F_.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},F_);function F_(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=x_.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}function U_(e){switch(e){case lm.OK:return im("Treated status OK as error");case lm.CANCELLED:case lm.UNKNOWN:case lm.DEADLINE_EXCEEDED:case lm.RESOURCE_EXHAUSTED:case lm.INTERNAL:case lm.UNAVAILABLE:case lm.UNAUTHENTICATED:return!1;case lm.INVALID_ARGUMENT:case lm.NOT_FOUND:case lm.ALREADY_EXISTS:case lm.PERMISSION_DENIED:case lm.FAILED_PRECONDITION:case lm.ABORTED:case lm.OUT_OF_RANGE:case lm.UNIMPLEMENTED:case lm.DATA_LOSS:return!0;default:return im("Unknown status code: "+e)}}function j_(e){if(void 0===e)return nm("GRPC error has no .code"),lm.UNKNOWN;switch(e){case P_.OK:return lm.OK;case P_.CANCELLED:return lm.CANCELLED;case P_.UNKNOWN:return lm.UNKNOWN;case P_.DEADLINE_EXCEEDED:return lm.DEADLINE_EXCEEDED;case P_.RESOURCE_EXHAUSTED:return lm.RESOURCE_EXHAUSTED;case P_.INTERNAL:return lm.INTERNAL;case P_.UNAVAILABLE:return lm.UNAVAILABLE;case P_.UNAUTHENTICATED:return lm.UNAUTHENTICATED;case P_.INVALID_ARGUMENT:return lm.INVALID_ARGUMENT;case P_.NOT_FOUND:return lm.NOT_FOUND;case P_.ALREADY_EXISTS:return lm.ALREADY_EXISTS;case P_.PERMISSION_DENIED:return lm.PERMISSION_DENIED;case P_.FAILED_PRECONDITION:return lm.FAILED_PRECONDITION;case P_.ABORTED:return lm.ABORTED;case P_.OUT_OF_RANGE:return lm.OUT_OF_RANGE;case P_.UNIMPLEMENTED:return lm.UNIMPLEMENTED;case P_.DATA_LOSS:return lm.DATA_LOSS;default:return im("Unknown status code: "+e)}}(M_=P_=P_||{})[M_.OK=0]="OK",M_[M_.CANCELLED=1]="CANCELLED",M_[M_.UNKNOWN=2]="UNKNOWN",M_[M_.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",M_[M_.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",M_[M_.NOT_FOUND=5]="NOT_FOUND",M_[M_.ALREADY_EXISTS=6]="ALREADY_EXISTS",M_[M_.PERMISSION_DENIED=7]="PERMISSION_DENIED",M_[M_.UNAUTHENTICATED=16]="UNAUTHENTICATED",M_[M_.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",M_[M_.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",M_[M_.ABORTED=10]="ABORTED",M_[M_.OUT_OF_RANGE=11]="OUT_OF_RANGE",M_[M_.UNIMPLEMENTED=12]="UNIMPLEMENTED",M_[M_.INTERNAL=13]="INTERNAL",M_[M_.UNAVAILABLE=14]="UNAVAILABLE",M_[M_.DATA_LOSS=15]="DATA_LOSS";var q_,B_,V_,W_,z_=(H_.emptySet=function(e){return new H_(e.comparator)},H_.prototype.has=function(e){return null!=this.keyedMap.get(e)},H_.prototype.get=function(e){return this.keyedMap.get(e)},H_.prototype.first=function(){return this.sortedSet.minKey()},H_.prototype.last=function(){return this.sortedSet.maxKey()},H_.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},H_.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(H_.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),H_.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})},H_.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},H_.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},H_.prototype.isEqual=function(e){if(!(e instanceof H_))return!1;if(this.size!==e.size)return!1;for(var t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();t.hasNext();){var r=t.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},H_.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},H_.prototype.copy=function(e,t){var n=new H_;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n},H_);function H_(e){this.comparator=e?function(t,n){return e(t,n)||uy.comparator(t.key,n.key)}:function(e,t){return uy.comparator(e.key,t.key)},this.keyedMap=Hy(),this.sortedSet=new Ny(this.comparator)}(B_=q_=q_||{})[B_.Added=0]="Added",B_[B_.Removed=1]="Removed",B_[B_.Modified=2]="Modified",B_[B_.Metadata=3]="Metadata",(W_=V_=V_||{})[W_.Local=0]="Local",W_[W_.Synced=1]="Synced";var K_=(Q_.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==q_.Added&&n.type===q_.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===q_.Metadata&&n.type!==q_.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===q_.Modified&&n.type===q_.Modified?this.changeMap=this.changeMap.insert(t,{type:q_.Modified,doc:e.doc}):e.type===q_.Modified&&n.type===q_.Added?this.changeMap=this.changeMap.insert(t,{type:q_.Added,doc:e.doc}):e.type===q_.Removed&&n.type===q_.Added?this.changeMap=this.changeMap.remove(t):e.type===q_.Removed&&n.type===q_.Modified?this.changeMap=this.changeMap.insert(t,{type:q_.Removed,doc:n.doc}):e.type===q_.Added&&n.type===q_.Removed?this.changeMap=this.changeMap.insert(t,{type:q_.Modified,doc:e.doc}):im("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},Q_.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal(function(t,n){e.push(n)}),e},Q_);function Q_(){this.changeMap=new Ny(uy.comparator)}var G_=(Y_.fromInitialDocuments=function(e,t,n,r){var i=[];return t.forEach(function(e){i.push({type:q_.Added,doc:e})}),new Y_(e,t,z_.emptySet(t),i,n,r,!0,!1)},Object.defineProperty(Y_.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),Y_.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},Y_);function Y_(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}var X_=($_.createSynthesizedRemoteEventForCurrentChange=function(e,t){var n,r=((n={})[e]=J_.createSynthesizedTargetChangeForCurrentChange(e,t),n);return new $_(Iy.MIN,r,$y(),Vy(),Yy())},$_);function $_(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}var J_=(Z_.createSynthesizedTargetChangeForCurrentChange=function(e,t){return new Z_(um(),t,Yy(),Yy(),Yy())},Z_);function Z_(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}var eE,tE,nE=function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r},rE=function(e,t){this.targetId=e,this.existenceFilter=t};(tE=eE=eE||{})[tE.NoChange=0]="NoChange",tE[tE.Added=1]="Added",tE[tE.Removed=2]="Removed",tE[tE.Current=3]="Current",tE[tE.Reset=4]="Reset";var iE=function(e,t,n,r){void 0===n&&(n=um()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},oE=(Object.defineProperty(aE.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(aE.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(aE.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(aE.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),aE.prototype.updateResumeToken=function(e){0<e.length&&(this._hasPendingChanges=!0,this._resumeToken=e)},aE.prototype.toTargetChange=function(){var e=Yy(),t=Yy(),n=Yy();return this.documentChanges.forEach(function(r,i){switch(i){case q_.Added:e=e.add(r);break;case q_.Modified:t=t.add(r);break;case q_.Removed:n=n.add(r);break;default:im("Encountered invalid change type: "+i)}}),new J_(this._resumeToken,this._current,e,t,n)},aE.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=lE()},aE.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},aE.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},aE.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},aE.prototype.recordTargetResponse=function(){this.pendingResponses-=1},aE.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},aE);function aE(){this.pendingResponses=0,this.documentChanges=lE(),this._resumeToken=um(),this._current=!1,this._hasPendingChanges=!0}var sE=(uE.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof eb?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof rb&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.removeDocumentFromTarget(r,e.key,e.newDoc)},uE.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,function(n){var r=t.ensureTargetState(n);switch(e.state){case eE.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case eE.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case eE.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),om(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case eE.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case eE.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:im("Unknown target watch change state: "+e.state)}})},uE.prototype.forEachTarget=function(e,t){0<e.targetIds.length?e.targetIds.forEach(t):ym(this.targetStates,t)},uE.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.queryDataForActiveTarget(t);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new uy(i.path);this.removeDocumentFromTarget(t,o,new rb(o,Iy.forDeletedDoc()))}else om(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},uE.prototype.createRemoteEvent=function(e){var t=this,n={};ym(this.targetStates,function(r,i){var o=t.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var a=new uy(o.query.path);null!==t.pendingDocumentUpdates.get(a)||t.targetContainsDocument(r,a)||t.removeDocumentFromTarget(r,a,new rb(a,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=Yy();this.pendingDocumentTargetMapping.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.queryDataForActiveTarget(e);return!n||n.purpose===rw.LimboResolution||(i=!1)}),i&&(r=r.add(e))});var i=new X_(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Vy(),this.pendingDocumentTargetMapping=cE(),this.pendingTargetResets=new Fy(Um),i},uE.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?q_.Modified:q_.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},uE.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,q_.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},uE.prototype.removeTarget=function(e){delete this.targetStates[e]},uE.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},uE.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},uE.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new oE),this.targetStates[e]},uE.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new Fy(Um),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},uE.prototype.isActiveTarget=function(e){var t=null!==this.queryDataForActiveTarget(e);return t||tm("WatchChangeAggregator","Detected inactive target",e),t},uE.prototype.queryDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getQueryDataForTarget(e)},uE.prototype.resetTarget=function(e){var t=this;om(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new oE,this.metadataProvider.getRemoteKeysForTarget(e).forEach(function(n){t.removeDocumentFromTarget(e,n,null)})},uE.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},uE);function uE(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=Vy(),this.pendingDocumentTargetMapping=cE(),this.pendingTargetResets=new Fy(Um)}function cE(){return new Ny(uy.comparator)}function lE(){return new Ny(uy.comparator)}var hE="RemoteStore",fE=(pE.prototype.start=function(){return this.enableNetwork()},pE.prototype.enableNetwork=function(){return Mi(this,void 0,void 0,function(){var e;return Li(this,function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(x_.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},pE.prototype.disableNetwork=function(){return Mi(this,void 0,void 0,function(){return Li(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(x_.Offline),[2]}})})},pE.prototype.disableNetworkInternal=function(){return Mi(this,void 0,void 0,function(){return Li(this,function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),0<this.writePipeline.length&&(tm(hE,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},pE.prototype.shutdown=function(){return Mi(this,void 0,void 0,function(){return Li(this,function(e){switch(e.label){case 0:return tm(hE,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(x_.Unknown),[2]}})})},pE.prototype.listen=function(e){om(!dm(this.listenTargets,e.targetId),"listen called with duplicate targetId!"),this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e)},pE.prototype.unlisten=function(e){om(dm(this.listenTargets,e),"unlisten called without assigned target ID!"),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),vm(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(x_.Unknown))},pE.prototype.getQueryDataForTarget=function(e){return this.listenTargets[e]||null},pE.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},pE.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},pE.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},pE.prototype.startWatchStream=function(){om(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new sE(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},pE.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!vm(this.listenTargets)},pE.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},pE.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},pE.prototype.onWatchStreamOpen=function(){return Mi(this,void 0,void 0,function(){var e=this;return Li(this,function(t){return ym(this.listenTargets,function(t,n){e.sendWatchRequest(n)}),[2]})})},pE.prototype.onWatchStreamClose=function(e){return Mi(this,void 0,void 0,function(){return Li(this,function(t){return void 0===e&&om(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(x_.Unknown),[2]})})},pE.prototype.onWatchStreamChange=function(e,t){return Mi(this,void 0,void 0,function(){var n;return Li(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(x_.Online),e instanceof iE&&e.state===eE.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof nE?this.watchChangeAggregator.handleDocumentChange(e):e instanceof rE?this.watchChangeAggregator.handleExistenceFilter(e):(om(e instanceof iE,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(Iy.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),0<=t.compareTo(n)?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},pE.prototype.raiseWatchSnapshot=function(e){var t=this;om(!e.isEqual(Iy.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return ym(n.targetChanges,function(n,r){if(0<r.resumeToken.length){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.withResumeToken(r.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.withResumeToken(um(),n.snapshotVersion),t.sendUnwatchRequest(e);var r=new cw(n.query,e,rw.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},pE.prototype.handleTargetError=function(e){var t=this;om(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach(function(e){r=r.then(function(){return Mi(t,void 0,void 0,function(){return Li(this,function(t){return dm(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]})})})}),r},pE.prototype.fillWritePipeline=function(){return Mi(this,void 0,void 0,function(){var e,t;return Li(this,function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(e=0<this.writePipeline.length?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(t=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},pE.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},pE.prototype.outstandingWrites=function(){return this.writePipeline.length},pE.prototype.addToWritePipeline=function(e){om(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},pE.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&0<this.writePipeline.length},pE.prototype.startWriteStream=function(){om(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},pE.prototype.onWriteStreamOpen=function(){return Mi(this,void 0,void 0,function(){return Li(this,function(e){return this.writeStream.writeHandshake(),[2]})})},pE.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var t=0,n=e.writePipeline;t<n.length;t++){var r=n[t];e.writeStream.writeMutations(r.mutations)}}).catch(Ow)},pE.prototype.onMutationResult=function(e,t){var n=this;om(0<this.writePipeline.length,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=eg.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},pE.prototype.onWriteStreamClose=function(e){return Mi(this,void 0,void 0,function(){var t=this;return Li(this,function(n){return void 0===e&&om(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&0<this.writePipeline.length?[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then(function(){t.shouldStartWriteStream()&&t.startWriteStream()})]:[2]})})},pE.prototype.handleHandshakeError=function(e){return Mi(this,void 0,void 0,function(){return Li(this,function(t){return U_(e.code)?(tm(hE,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=um(),[2,this.localStore.setLastStreamToken(um()).catch(Ow)]):[2]})})},pE.prototype.handleWriteError=function(e){return Mi(this,void 0,void 0,function(){var t,n=this;return Li(this,function(r){return function(e){return U_(e)&&e!==lm.ABORTED}(e.code)?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then(function(){return n.fillWritePipeline()})]):[2]})})},pE.prototype.createTransaction=function(){return new D_(this.datastore)},pE.prototype.restartNetwork=function(){return Mi(this,void 0,void 0,function(){return Li(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(x_.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}})})},pE.prototype.handleCredentialChange=function(){return Mi(this,void 0,void 0,function(){return Li(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(tm(hE,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},pE.prototype.applyPrimaryState=function(e){return Mi(this,void 0,void 0,function(){return Li(this,function(t){switch(t.label){case 0:return(this.isPrimary=e)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(x_.Unknown),t.label=4;case 4:return[2]}})})},pE);function pE(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback(function(e){n.enqueueAndForget(function(){return Mi(o,void 0,void 0,function(){return Li(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(tm(hE,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})}),this.onlineStateTracker=new L_(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}var dE=(Object.defineProperty(mE.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(mE.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),mE.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},mE.prototype._compareTo=function(e){return Um(this._lat,e._lat)||Um(this._long,e._long)},mE);function mE(e,t){if(wm("GeoPoint",arguments,2),Tm("GeoPoint","number",1,e),Tm("GeoPoint","number",2,t),!isFinite(e)||e<-90||90<e)throw new hm(lm.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||180<t)throw new hm(lm.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}var yE=(gE.atPath=function(e){return new gE(e)},Object.defineProperty(gE.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[zE]:this.memoizedOrderBy=[new VE(e),zE];else{om(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field.");for(var n=!(this.memoizedOrderBy=[]),r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=0<this.explicitOrderBy.length?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:UE.ASCENDING;this.memoizedOrderBy.push(a===UE.ASCENDING?zE:HE)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),gE.prototype.addFilter=function(e){om(null==this.getInequalityFilterField()||!(e instanceof _E)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),om(!this.isDocumentQuery(),"No filtering allowed for document query");var t=this.filters.concat([e]);return new gE(this.path,this.collectionGroup,this.explicitOrderBy.slice(),t,this.limit,this.startAt,this.endAt)},gE.prototype.addOrderBy=function(e){om(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var t=this.explicitOrderBy.concat([e]);return new gE(this.path,this.collectionGroup,t,this.filters.slice(),this.limit,this.startAt,this.endAt)},gE.prototype.withLimit=function(e){return new gE(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},gE.prototype.withStartAt=function(e){return new gE(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},gE.prototype.withEndAt=function(e){return new gE(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},gE.prototype.asCollectionQueryAtPath=function(e){return new gE(e,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},gE.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();this.isCollectionGroupQuery()&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++)e+=n[t].canonicalId(),e+=",";e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)e+=i[r].canonicalId(),e+=",";h_(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},gE.prototype.toString=function(){var e="Query("+this.path.canonicalString();return this.isCollectionGroupQuery()&&(e+=" collectionGroup="+this.collectionGroup),0<this.filters.length&&(e+=", filters: ["+this.filters.join(", ")+"]"),h_(this.limit)||(e+=", limit: "+this.limit),0<this.explicitOrderBy.length&&(e+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),e+")"},gE.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&!!this.path.isEqual(e.path)&&!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)},gE.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(e,t);if(0!==a)return a;n=n||o.field.isKeyField()}return om(n,"orderBy used that doesn't compare on key field"),0},gE.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},gE.prototype.hasLimit=function(){return!h_(this.limit)},gE.prototype.getFirstOrderByField=function(){return 0<this.explicitOrderBy.length?this.explicitOrderBy[0].field:null},gE.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof _E&&n.isInequality())return n.field}return null},gE.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(r instanceof _E&&0<=e.indexOf(r.op))return r.op}return null},gE.prototype.isDocumentQuery=function(){return uy.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},gE.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},gE.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):uy.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},gE.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},gE.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++)if(!n[t].matches(e))return!1;return!0},gE.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,e))},gE.prototype.assertValidBound=function(e){om(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},gE);function gE(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}var vE=(bE.fromString=function(e){switch(e){case"<":return bE.LESS_THAN;case"<=":return bE.LESS_THAN_OR_EQUAL;case"==":return bE.EQUAL;case">=":return bE.GREATER_THAN_OR_EQUAL;case">":return bE.GREATER_THAN;case"array-contains":return bE.ARRAY_CONTAINS;case"in":return bE.IN;case"array-contains-any":return bE.ARRAY_CONTAINS_ANY;default:return im("Unknown FieldFilter operator: "+e)}},bE.prototype.toString=function(){return this.name},bE.prototype.isEqual=function(e){return this.name===e.name},bE.LESS_THAN=new bE("<"),bE.LESS_THAN_OR_EQUAL=new bE("<="),bE.EQUAL=new bE("=="),bE.GREATER_THAN=new bE(">"),bE.GREATER_THAN_OR_EQUAL=new bE(">="),bE.ARRAY_CONTAINS=new bE("array-contains"),bE.IN=new bE("in"),bE.ARRAY_CONTAINS_ANY=new bE("array-contains-any"),bE);function bE(e){this.name=e}var wE,_E=(Ri(EE,wE=function(){}),EE.create=function(e,t,n){if(e.isKeyField())return t===vE.IN?(om(n instanceof Yv,"Comparing on key with IN, but filter value not an ArrayValue"),om(n.internalValue.every(function(e){return e instanceof qv}),"Comparing on key with IN, but an array value was not a RefValue"),new IE(e,n)):(om(n instanceof qv,"Comparing on key, but filter value not a RefValue"),om(t!==vE.ARRAY_CONTAINS&&t!==vE.ARRAY_CONTAINS_ANY,"'"+t.toString()+"' queries don't make sense on document keys."),new SE(e,t,n));if(n.isEqual(fv.INSTANCE)){if(t!==vE.EQUAL)throw new hm(lm.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new EE(e,t,n)}if(n.isEqual(Cv.NAN)){if(t!==vE.EQUAL)throw new hm(lm.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new EE(e,t,n)}return t===vE.ARRAY_CONTAINS?new AE(e,n):t===vE.IN?(om(n instanceof Yv,"IN filter has invalid value: "+n.toString()),new RE(e,n)):t===vE.ARRAY_CONTAINS_ANY?(om(n instanceof Yv,"ARRAY_CONTAINS_ANY filter has invalid value: "+n.toString()),new LE(e,n)):new EE(e,t,n)},EE.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},EE.prototype.matchesComparison=function(e){switch(this.op){case vE.LESS_THAN:return e<0;case vE.LESS_THAN_OR_EQUAL:return e<=0;case vE.EQUAL:return 0===e;case vE.GREATER_THAN:return 0<e;case vE.GREATER_THAN_OR_EQUAL:return 0<=e;default:return im("Unknown FieldFilter operator: "+this.op)}},EE.prototype.isInequality=function(){return 0<=[vE.LESS_THAN,vE.LESS_THAN_OR_EQUAL,vE.GREATER_THAN,vE.GREATER_THAN_OR_EQUAL].indexOf(this.op)},EE.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},EE.prototype.isEqual=function(e){return e instanceof EE&&this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value)},EE.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},EE);function EE(e,t,n){var r=wE.call(this)||this;return r.field=e,r.op=t,r.value=n,r}var TE,SE=(Ri(CE,TE=_E),CE.prototype.matches=function(e){var t=this.value,n=uy.comparator(e.key,t.key);return this.matchesComparison(n)},CE);function CE(){return null!==TE&&TE.apply(this,arguments)||this}var kE,IE=(Ri(xE,kE=_E),xE.prototype.matches=function(e){return this.value.internalValue.some(function(t){return e.key.isEqual(t.key)})},xE);function xE(e,t){var n=kE.call(this,e,vE.IN,t)||this;return n.value=t,n}var NE,AE=(Ri(OE,NE=_E),OE.prototype.matches=function(e){var t=e.field(this.field);return t instanceof Yv&&t.contains(this.value)},OE);function OE(e,t){return NE.call(this,e,vE.ARRAY_CONTAINS,t)||this}var DE,RE=(Ri(PE,DE=_E),PE.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},PE);function PE(e,t){var n=DE.call(this,e,vE.IN,t)||this;return n.value=t,n}var ME,LE=(Ri(FE,ME=_E),FE.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof Yv&&n.internalValue.some(function(e){return t.value.contains(e)})},FE);function FE(e,t){var n=ME.call(this,e,vE.ARRAY_CONTAINS_ANY,t)||this;return n.value=t,n}var UE=(jE.prototype.toString=function(){return this.name},jE.ASCENDING=new jE("asc"),jE.DESCENDING=new jE("desc"),jE);function jE(e){this.name=e}var qE=(BE.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++)e+=n[t].toString();return e},BE.prototype.sortsBeforeDocument=function(e,t){om(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())om(o instanceof qv,"Bound has a non-key value where the key path is being used."),n=uy.comparator(o.key,t.key);else{var a=t.field(i.field);om(null!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===UE.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},BE.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],r=e.position[t];if(!n.isEqual(r))return!1}return!0},BE);function BE(e,t){this.position=e,this.before=t}var VE=(WE.prototype.compare=function(e,t){var n=this.isKeyOrderBy?eb.compareByKey(e,t):eb.compareByField(this.field,e,t);switch(this.dir){case UE.ASCENDING:return n;case UE.DESCENDING:return-1*n;default:return im("Unknown direction: "+this.dir)}},WE.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},WE.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},WE.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},WE);function WE(e,t){this.field=e,void 0===t&&(t=UE.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}var zE=new VE(ay.keyField(),UE.ASCENDING),HE=new VE(ay.keyField(),UE.DESCENDING),KE=(QE.prototype.applyToLocalView=function(e,t){return new Pv(t,e)},QE.prototype.applyToRemoteDocument=function(e,t){return t},QE.prototype.computeBaseValue=function(e){return null},QE.prototype.isEqual=function(e){return e instanceof QE},QE.instance=new QE,QE);function QE(){}var GE=(YE.prototype.applyToLocalView=function(e,t){return this.apply(e)},YE.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},YE.prototype.apply=function(e){for(var t=eT(e),n=function(e){t.find(function(t){return t.isEqual(e)})||t.push(e)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Yv(t)},YE.prototype.computeBaseValue=function(e){return null},YE.prototype.isEqual=function(e){return e instanceof YE&&jm(e.elements,this.elements)},YE);function YE(e){this.elements=e}var XE=($E.prototype.applyToLocalView=function(e,t){return this.apply(e)},$E.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},$E.prototype.apply=function(e){for(var t=eT(e),n=function(e){t=t.filter(function(t){return!t.isEqual(e)})},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Yv(t)},$E.prototype.computeBaseValue=function(e){return null},$E.prototype.isEqual=function(e){return e instanceof $E&&jm(e.elements,this.elements)},$E);function $E(e){this.elements=e}var JE=(ZE.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);if(n instanceof Ev&&this.operand instanceof Ev){var r=n.internalValue+this.operand.internalValue;return new Ev(r)}return r=n.internalValue+this.operand.internalValue,new Cv(r)},ZE.prototype.applyToRemoteDocument=function(e,t){return om(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},ZE.prototype.computeBaseValue=function(e){return e instanceof vv?e:new Ev(0)},ZE.prototype.isEqual=function(e){return e instanceof ZE&&this.operand.isEqual(e.operand)},ZE);function ZE(e){this.operand=e}function eT(e){return e instanceof Yv?e.internalValue.slice():[]}var tT=(nT.prototype.isEqual=function(e){return e&&e.count===this.count},nT);function nT(e){this.count=e}var rT,iT,oT=((rT={})[UE.ASCENDING.name]="ASCENDING",rT[UE.DESCENDING.name]="DESCENDING",rT),aT=((iT={})[vE.LESS_THAN.name]="LESS_THAN",iT[vE.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",iT[vE.GREATER_THAN.name]="GREATER_THAN",iT[vE.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",iT[vE.EQUAL.name]="EQUAL",iT[vE.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",iT[vE.IN.name]="IN",iT[vE.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",iT),sT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uT(e,t){om(!h_(e),t+" is missing")}function cT(e){return"number"==typeof e?e:"string"==typeof e?Number(e):im("can't parse "+e)}var lT=(hT.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},hT.prototype.unsafeCastProtoByteString=function(e){return e},hT.prototype.fromRpcStatus=function(e){var t=void 0===e.code?lm.UNKNOWN:j_(e.code);return new hm(t,e.message||"")},hT.prototype.toInt32Value=function(e){return h_(e)?void 0:{value:e}},hT.prototype.fromInt32Value=function(e){var t;return h_(t="object"==typeof e?e.value:e)?null:t},hT.prototype.toTimestamp=function(e){return{seconds:""+e.seconds,nanos:e.nanoseconds}},hT.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);om(!!e,"Cannot deserialize null or undefined timestamp.");var t=cT(e.seconds||"0"),n=e.nanos||0;return new Cy(t,n)},hT.prototype.fromIso8601String=function(e){var t=0,n=sT.exec(e);if(om(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new Cy(o,t)},hT.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},hT.prototype.fromBlob=function(e){return"string"==typeof e?(om(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Wm.fromBase64String(e)):(om(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Wm.fromUint8Array(e))},hT.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},hT.prototype.fromVersion=function(e){return om(!!e,"Trying to deserialize version that isn't set"),Iy.fromTimestamp(this.fromTimestamp(e))},hT.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},hT.prototype.fromResourceName=function(e){var t=ny.fromString(e);return om(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},hT.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},hT.prototype.fromName=function(e){var t=this.fromResourceName(e);return om(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),om(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new uy(this.extractLocalPathFromResourceName(t))},hT.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},hT.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?ny.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(hT.prototype,"encodedDatabaseId",{get:function(){return new ny(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),hT.prototype.fullyQualifiedPrefixPath=function(e){return new ny(["projects",e.projectId,"databases",e.database])},hT.prototype.extractLocalPathFromResourceName=function(e){return om(4<e.length&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},hT.prototype.isValidResourceName=function(e){return 4<=e.length&&"projects"===e.get(0)&&"databases"===e.get(2)},hT.prototype.toValue=function(e){if(e instanceof fv)return{nullValue:"NULL_VALUE"};if(e instanceof mv)return{booleanValue:e.value()};if(e instanceof Ev)return{integerValue:""+e.value()};if(e instanceof Cv){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof xv?{stringValue:e.value()}:e instanceof Kv?{mapValue:this.toMapValue(e)}:e instanceof Yv?{arrayValue:this.toArrayValue(e)}:e instanceof Ov?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof Wv?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof Fv?{bytesValue:this.toBytes(e.value())}:e instanceof qv?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:im("Unknown FieldValue "+JSON.stringify(e))},hT.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return fv.INSTANCE;if("booleanValue"in e)return mv.of(e.booleanValue);if("integerValue"in e)return new Ev(cT(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return Cv.NAN;if("Infinity"===e.doubleValue)return Cv.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return Cv.NEGATIVE_INFINITY}return new Cv(e.doubleValue)}if("stringValue"in e)return new xv(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e){uT(e.arrayValue,"arrayValue");var n=e.arrayValue.values||[];return new Yv(n.map(function(e){return t.fromValue(e)}))}if("timestampValue"in e)return uT(e.timestampValue,"timestampValue"),new Ov(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e){uT(e.geoPointValue,"geoPointValue");var r=e.geoPointValue.latitude||0,i=e.geoPointValue.longitude||0;return new Wv(new dE(r,i))}if("bytesValue"in e){uT(e.bytesValue,"bytesValue");var o=this.fromBlob(e.bytesValue);return new Fv(o)}if("referenceValue"in e){uT(e.referenceValue,"referenceValue");var a=this.fromResourceName(e.referenceValue),s=new Gm(a.get(1),a.get(3)),u=new uy(this.extractLocalPathFromResourceName(a));return new qv(s,u)}return im("Unknown Value proto "+JSON.stringify(e))},hT.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},hT.prototype.toDocument=function(e){return om(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toTimestamp(e.version.toTimestamp())}},hT.prototype.fromDocument=function(e,t){var n=this,r=this.fromName(e.name),i=this.fromVersion(e.updateTime);return new eb(r,i,{hasCommittedMutations:!!t},void 0,e,function(e){return n.fromValue(e)})},hT.prototype.toFields=function(e){var t=this,n={};return e.forEach(function(e,r){n[e]=t.toValue(r)}),n},hT.prototype.fromFields=function(e){var t=this,n=e,r=Kv.EMPTY;return gm(n,function(e,n){r=r.set(new ay([e]),t.fromValue(n))}),r},hT.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},hT.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.toValue(e))}),{values:n}},hT.prototype.fromFound=function(e){var t=this;om(!!e.found,"Tried to deserialize a found document from a missing document."),uT(e.found.name,"doc.found.name"),uT(e.found.updateTime,"doc.found.updateTime");var n=this.fromName(e.found.name),r=this.fromVersion(e.found.updateTime);return new eb(n,r,{},void 0,e.found,function(e){return t.fromValue(e)})},hT.prototype.fromMissing=function(e){om(!!e.missing,"Tried to deserialize a missing document from a found document."),om(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new rb(t,n)},hT.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):im("invalid batch get response: "+JSON.stringify(e))},hT.prototype.toWatchTargetChangeState=function(e){switch(e){case eE.Added:return"ADD";case eE.Current:return"CURRENT";case eE.NoChange:return"NO_CHANGE";case eE.Removed:return"REMOVE";case eE.Reset:return"RESET";default:return im("Unknown WatchTargetChangeState: "+e)}},hT.prototype.toTestWatchChange=function(e){if(e instanceof rE)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof nE){if(e.newDoc instanceof eb){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof rb)return t=e.newDoc,{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}};if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof iE){var n=void 0;return e.cause&&(n={code:function(e){if(void 0===e)return P_.OK;switch(e){case lm.OK:return P_.OK;case lm.CANCELLED:return P_.CANCELLED;case lm.UNKNOWN:return P_.UNKNOWN;case lm.DEADLINE_EXCEEDED:return P_.DEADLINE_EXCEEDED;case lm.RESOURCE_EXHAUSTED:return P_.RESOURCE_EXHAUSTED;case lm.INTERNAL:return P_.INTERNAL;case lm.UNAVAILABLE:return P_.UNAVAILABLE;case lm.UNAUTHENTICATED:return P_.UNAUTHENTICATED;case lm.INVALID_ARGUMENT:return P_.INVALID_ARGUMENT;case lm.NOT_FOUND:return P_.NOT_FOUND;case lm.ALREADY_EXISTS:return P_.ALREADY_EXISTS;case lm.PERMISSION_DENIED:return P_.PERMISSION_DENIED;case lm.FAILED_PRECONDITION:return P_.FAILED_PRECONDITION;case lm.ABORTED:return P_.ABORTED;case lm.OUT_OF_RANGE:return P_.OUT_OF_RANGE;case lm.UNIMPLEMENTED:return P_.UNIMPLEMENTED;case lm.DATA_LOSS:return P_.DATA_LOSS;default:return im("Unknown status code: "+e)}}(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return im("Unrecognized watch change: "+JSON.stringify(e))},hT.prototype.fromWatchChange=function(e){var t,n=this;if("targetChange"in e){uT(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=e.targetChange.resumeToken||this.emptyByteString(),a=e.targetChange.cause,s=a&&this.fromRpcStatus(a);t=new iE(r,i,o,s||null)}else if("documentChange"in e){uT(e.documentChange,"documentChange"),uT(e.documentChange.document,"documentChange.name"),uT(e.documentChange.document.name,"documentChange.document.name"),uT(e.documentChange.document.updateTime,"documentChange.document.updateTime");var u=e.documentChange,c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),h=new eb(c,l,{},void 0,u.document,function(e){return n.fromValue(e)}),f=u.targetIds||[],p=u.removedTargetIds||[];t=new nE(f,p,h.key,h)}else if("documentDelete"in e){uT(e.documentDelete,"documentDelete"),uT(e.documentDelete.document,"documentDelete.document");var d=e.documentDelete;c=this.fromName(d.document),l=d.readTime?this.fromVersion(d.readTime):Iy.forDeletedDoc(),h=new rb(c,l),p=d.removedTargetIds||[],t=new nE([],p,h.key,h)}else if("documentRemove"in e){uT(e.documentRemove,"documentRemove"),uT(e.documentRemove.document,"documentRemove");var m=e.documentRemove;c=this.fromName(m.document),p=m.removedTargetIds||[],t=new nE([],p,c,null)}else{if(!("filter"in e))return im("Unknown change type "+JSON.stringify(e));uT(e.filter,"filter"),uT(e.filter.targetId,"filter.targetId");var y=e.filter,g=y.count||0,v=new tT(g),b=y.targetId;t=new rE(b,v)}return t},hT.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?eE.NoChange:"ADD"===e?eE.Added:"REMOVE"===e?eE.Removed:"CURRENT"===e?eE.Current:"RESET"===e?eE.Reset:im("Got unexpected TargetChange.state: "+e)},hT.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return Iy.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?Iy.MIN:t.readTime?this.fromVersion(t.readTime):Iy.MIN},hT.prototype.toMutation=function(e){var t,n=this;if(e instanceof Kg)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof ov)t={delete:this.toName(e.key)};else if(e instanceof Yg)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof Jg))return im("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map(function(e){return n.toFieldTransform(e)})}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},hT.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):Bg.NONE;if(e.update){uT(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new Yg(r,i,o,n)}return new Kg(r,i,n)}if(e.delete)return r=this.fromName(e.delete),new ov(r,n);if(e.transform){r=this.fromName(e.transform.document);var a=e.transform.fieldTransforms.map(function(e){return t.fromFieldTransform(e)});return om(!0===n.exists,'Transforms only support precondition "exists == true"'),new Jg(r,a)}return im("unknown mutation proto: "+JSON.stringify(e))},hT.prototype.toPrecondition=function(e){return om(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:im("Unknown precondition")},hT.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?Bg.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?Bg.exists(e.exists):Bg.NONE},hT.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t),i=null;return e.transformResults&&0<e.transformResults.length&&(i=e.transformResults.map(function(e){return n.fromValue(e)})),new qg(r,i)},hT.prototype.fromWriteResults=function(e,t){var n=this;return e&&0<e.length?(om(void 0!==t,"Received a write result without a commit time"),e.map(function(e){return n.fromWriteResult(e,t)})):[]},hT.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof KE)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof GE)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof XE)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof JE)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw im("Unknown transform: "+e.transform)},hT.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)om("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=KE.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new GE(r.map(function(e){return t.fromValue(e)}))}else if("removeAllFromArray"in e)r=e.removeAllFromArray.values||[],n=new XE(r.map(function(e){return t.fromValue(e)}));else if("increment"in e){var i=this.fromValue(e.increment);om(i instanceof vv,"NUMERIC_ADD transform requires a NumberValue"),n=new JE(i)}else im("Unknown transform proto: "+JSON.stringify(e));var o=ay.fromServerFormat(e.fieldPath);return new Lg(o,n)},hT.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},hT.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;om(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return yE.atPath(this.fromQueryPath(n))},hT.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(om(n.length%2==0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(om(n.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return void 0!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},hT.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(0<r){om(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new yE(t,i,s,a,u,c,l)},hT.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},hT.prototype.toLabel=function(e){switch(e){case rw.Listen:return null;case rw.ExistenceFilterMismatch:return"existence-filter-mismatch";case rw.LimboResolution:return"limbo-document";default:return im("Unrecognized query purpose: "+e)}},hT.prototype.toTarget=function(e){var t,n=e.query;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,0<e.resumeToken.length&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},hT.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map(function(e){return e instanceof _E?t.toUnaryOrFieldFilter(e):im("Unrecognized filter: "+JSON.stringify(e))});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},hT.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return t.fromFilter(e)}).reduce(function(e,t){return e.concat(t)}):im("Unknown filter: "+JSON.stringify(e)):[]},hT.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map(function(e){return t.toPropertyOrder(e)})},hT.prototype.fromOrder=function(e){var t=this;return e.map(function(e){return t.fromPropertyOrder(e)})},hT.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map(function(e){return t.toValue(e)})}},hT.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map(function(e){return t.fromValue(e)});return new qE(r,n)},hT.prototype.toDirection=function(e){return oT[e.name]},hT.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return UE.ASCENDING;case"DESCENDING":return UE.DESCENDING;default:return}},hT.prototype.toOperatorName=function(e){return aT[e.name]},hT.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return vE.EQUAL;case"GREATER_THAN":return vE.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return vE.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return vE.LESS_THAN;case"LESS_THAN_OR_EQUAL":return vE.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return vE.ARRAY_CONTAINS;case"IN":return vE.IN;case"ARRAY_CONTAINS_ANY":return vE.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return im("Unspecified operator");default:return im("Unknown operator")}},hT.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},hT.prototype.fromFieldPathReference=function(e){return ay.fromServerFormat(e.fieldPath)},hT.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},hT.prototype.fromPropertyOrder=function(e){return new VE(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},hT.prototype.fromFieldFilter=function(e){return _E.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},hT.prototype.toUnaryOrFieldFilter=function(e){if(e.op===vE.EQUAL){if(e.value.isEqual(Cv.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}};if(e.value.isEqual(fv.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},hT.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return _E.create(t,vE.EQUAL,Cv.NAN);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return _E.create(n,vE.EQUAL,fv.INSTANCE);case"OPERATOR_UNSPECIFIED":return im("Unspecified filter");default:return im("Unknown filter")}},hT.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}},hT.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map(function(e){return ay.fromServerFormat(e)});return Pg.fromArray(t)},hT);function hT(e,t){this.databaseId=e,this.options=t}var fT=function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},pT=(dT.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);return r||(n=!0,r=new fT,this.queries.set(t,r)),r.listeners.push(e),om(!e.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),!r.viewSnap||e.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent(),n?this.syncEngine.listen(t).then(function(e){return r.targetId=e}):Promise.resolve(r.targetId)},dT.prototype.unlisten=function(e){return Mi(this,void 0,void 0,function(){var t,n,r,i;return Li(this,function(o){return t=e.query,n=!1,(r=this.queries.get(t))&&0<=(i=r.listeners.indexOf(e))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]})})},dT.prototype.onWatchChange=function(e){for(var t=!1,n=0,r=e;n<r.length;n++){var i=r[n],o=i.query,a=this.queries.get(o);if(a){for(var s=0,u=a.listeners;s<u.length;s++)u[s].onViewSnapshot(i)&&(t=!0);a.viewSnap=i}}t&&this.raiseSnapshotsInSyncEvent()},dT.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(t);this.queries.delete(e)},dT.prototype.onOnlineStateChange=function(e){this.onlineState=e;var t=!1;this.queries.forEach(function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].applyOnlineStateChange(e)&&(t=!0)}),t&&this.raiseSnapshotsInSyncEvent()},dT.prototype.addSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.add(e),e.next()},dT.prototype.removeSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.delete(e)},dT.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach(function(e){e.next()})},dT);function dT(e){this.syncEngine=e,this.queries=new ub(function(e){return e.canonicalId()}),this.onlineState=x_.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}var mT=(yT.prototype.onViewSnapshot=function(e){if(om(0<e.docChanges.length||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==q_.Metadata&&t.push(i)}e=new G_(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),o=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),o=!0),this.snap=e,o},yT.prototype.onError=function(e){this.queryObserver.error(e)},yT.prototype.applyOnlineStateChange=function(e){this.onlineState=e;var t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t},yT.prototype.shouldRaiseInitialEvent=function(e,t){if(om(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==x_.Offline;return this.options.waitForSyncWhenOnline&&n?(om(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===x_.Offline},yT.prototype.shouldRaiseEvent=function(e){if(0<e.docChanges.length)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},yT.prototype.raiseInitialEvent=function(e){om(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=G_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},yT);function yT(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=x_.Unknown,this.options=n||{}}var gT=(vT.fromSnapshot=function(e,t){for(var n=Yy(),r=Yy(),i=0,o=t.docChanges;i<o.length;i++){var a=o[i];switch(a.type){case q_.Added:n=n.add(a.doc.key);break;case q_.Removed:r=r.add(a.doc.key)}}return new vT(e,n,r)},vT);function vT(e,t,n){this.targetId=e,this.addedKeys=t,this.removedKeys=n}var bT=function(e){this.key=e},wT=function(e){this.key=e},_T=(Object.defineProperty(ET.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),ET.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new K_,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(e.inorderTraversal(function(e,t){var c=i.get(e),l=t instanceof eb?t:null;l&&(om(e.isEqual(l.key),"Mismatching keys found in document changes: "+e+" != "+l.key),l=n.query.matches(l)?l:null);var h=!!c&&n.mutatedKeys.has(c.key),f=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),p=!1;c&&l?c.data().isEqual(l.data())?h!==f&&(r.track({type:q_.Metadata,doc:l}),p=!0):n.shouldWaitForSyncedDocument(c,l)||(r.track({type:q_.Modified,doc:l}),p=!0,u&&0<n.query.docComparator(l,u)&&(s=!0)):!c&&l?(r.track({type:q_.Added,doc:l}),p=!0):c&&!l&&(r.track({type:q_.Removed,doc:c}),p=!0,u&&(s=!0)),p&&(o=l?(a=a.add(l),f?o.add(e):o.delete(e)):(a=a.delete(e),o.delete(e)))}),this.query.hasLimit())for(;a.size>this.query.limit;){var c=a.last();a=a.delete(c.key),o=o.delete(c.key),r.track({type:q_.Removed,doc:c})}return om(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},ET.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},ET.prototype.applyChanges=function(e,t,n){var r=this;om(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort(function(e,t){return function(e,t){function n(e){switch(e){case q_.Added:return 1;case q_.Modified:case q_.Metadata:return 2;case q_.Removed:return 0;default:return im("Unknown ChangeType: "+e)}}return n(e)-n(t)}(e.type,t.type)||r.query.docComparator(e.doc,t.doc)}),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?V_.Synced:V_.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new G_(this.query,e.documentSet,i,o,e.mutatedKeys,s===V_.Local,u,!1),limboChanges:a}:{limboChanges:a}},ET.prototype.applyOnlineStateChange=function(e){return this.current&&e===x_.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new K_,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},ET.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations},ET.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.add(e)}),e.modifiedDocuments.forEach(function(e){return om(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")}),e.removedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)}),this.current=e.current)},ET.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=Yy(),this.documentSet.forEach(function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))});var n=[];return t.forEach(function(t){e.limboDocuments.has(t)||n.push(new wT(t))}),this.limboDocuments.forEach(function(e){t.has(e)||n.push(new bT(e))}),n},ET.prototype.synchronizeWithPersistedState=function(e,t){this._syncedDocuments=t,this.limboDocuments=Yy();var n=this.computeDocChanges(e);return this.applyChanges(n,!0)},ET.prototype.computeInitialSnapshot=function(){return G_.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===V_.Local)},ET);function ET(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=Yy(),this.mutatedKeys=Yy(),this.documentSet=new z_(e.docComparator.bind(e))}var TT=(ST.prototype.run=function(){this.runWithBackOff()},ST.prototype.runWithBackOff=function(){var e=this;this.backoff.backoffAndRun(function(){return Mi(e,void 0,void 0,function(){var e,t,n=this;return Li(this,function(r){return e=this.remoteStore.createTransaction(),(t=this.tryRunUpdateFunction(e))&&t.then(function(t){n.asyncQueue.enqueueAndForget(function(){return e.commit().then(function(){n.deferred.resolve(t)}).catch(function(e){n.handleTransactionError(e)})})}).catch(function(e){n.handleTransactionError(e)}),[2]})})})},ST.prototype.tryRunUpdateFunction=function(e){try{var t=this.updateFunction(e);return!h_(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},ST.prototype.handleTransactionError=function(e){var t=this;0<this.retries&&this.isRetryableTransactionError(e)?(this.retries-=1,this.asyncQueue.enqueueAndForget(function(){return t.runWithBackOff(),Promise.resolve()})):this.deferred.reject(e)},ST.prototype.isRetryableTransactionError=function(e){if("FirebaseError"!==e.name)return!1;var t=e.code;return"aborted"===t||"failed-precondition"===t||!U_(t)},ST);function ST(e,t,n,r){this.asyncQueue=e,this.remoteStore=t,this.updateFunction=n,this.deferred=r,this.retries=5,this.backoff=new p_(this.asyncQueue,ly.RetryTransaction)}var CT="SyncEngine",kT=function(e,t,n){this.query=e,this.targetId=t,this.view=n},IT=function(e){this.key=e,this.receivedDocument=!1},xT=(Object.defineProperty(NT.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),NT.prototype.subscribe=function(e){om(null!==e,"SyncEngine listener cannot be null"),om(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},NT.prototype.listen=function(e){return Mi(this,void 0,void 0,function(){var t,n,r,i,o;return Li(this,function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(e)];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}})})},NT.prototype.initializeViewAndComputeSnapshot=function(e,t){return Mi(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c;return Li(this,function(l){switch(l.label){case 0:return n=e.query,[4,this.localStore.executeQuery(n)];case 1:return r=l.sent(),[4,this.localStore.remoteDocumentKeys(e.targetId)];case 2:return i=l.sent(),o=new _T(n,i),a=o.computeDocChanges(r),s=J_.createSynthesizedTargetChangeForCurrentChange(e.targetId,t&&this.onlineState!==x_.Offline),om(0===(u=o.applyChanges(a,!0===this.isPrimary,s)).limboChanges.length,"View returned limbo docs before target ack from the server."),om(!!u.snapshot,"applyChanges for new view should always return a snapshot"),c=new kT(n,e.targetId,o),this.queryViewsByQuery.set(n,c),this.queryViewsByTarget[e.targetId]=c,[2,u.snapshot]}})})},NT.prototype.synchronizeViewAndComputeSnapshot=function(e){return Mi(this,void 0,void 0,function(){var t,n,r;return Li(this,function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(e.query)];case 1:return t=i.sent(),[4,this.localStore.remoteDocumentKeys(e.targetId)];case 2:return n=i.sent(),r=e.view.synchronizeWithPersistedState(t,n),this.isPrimary&&this.updateTrackedLimbos(e.targetId,r.limboChanges),[2,r]}})})},NT.prototype.unlisten=function(e){return Mi(this,void 0,void 0,function(){var t,n=this;return Li(this,function(r){switch(r.label){case 0:return this.assertSubscribed("unlisten()"),om(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseQuery(e,!1).then(function(){n.sharedClientState.clearQueryState(t.targetId),n.remoteStore.unlisten(t.targetId),n.removeAndCleanupQuery(t)}).catch(Ow)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(t),[4,this.localStore.releaseQuery(e,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}})})},NT.prototype.write=function(e,t){return Mi(this,void 0,void 0,function(){var n;return Li(this,function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}})})},NT.prototype.runTransaction=function(e,t,n){new TT(e,this.remoteStore,t,n).run()},NT.prototype.applyRemoteEvent=function(e){return Mi(this,void 0,void 0,function(){var t,n=this;return Li(this,function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=r.sent(),gm(e.targetChanges,function(e,t){var r=n.limboResolutionsByTarget[Number(e)];r&&(om(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),0<t.addedDocuments.size?r.receivedDocument=!0:0<t.modifiedDocuments.size?om(r.receivedDocument,"Received change for limbo target document without add."):0<t.removedDocuments.size&&(om(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))}),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return r.sent(),[3,6];case 4:return[4,Ow(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},NT.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===A_.RemoteStore||!this.isPrimary&&t===A_.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach(function(t,r){var i=r.view.applyOnlineStateChange(e);om(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)}),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},NT.prototype.rejectListen=function(e,t){return Mi(this,void 0,void 0,function(){var n,r,i,o,a,s,u=this;return Li(this,function(c){switch(c.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),n=this.limboResolutionsByTarget[e],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=(i=new Ny(uy.comparator)).insert(r,new rb(r,Iy.forDeletedDoc())),o=Yy().add(r),a=new X_(Iy.MIN,{},new Fy(Um),i,o),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return om(!!(s=this.queryViewsByTarget[e]),"Unknown targetId: "+e),[4,this.localStore.releaseQuery(s.query,!1).then(function(){return u.removeAndCleanupQuery(s)}).catch(Ow)];case 2:c.sent(),this.syncEngineListener.onWatchError(s.query,t),c.label=3;case 3:return[2]}})})},NT.prototype.applyBatchState=function(e,t,n){return Mi(this,void 0,void 0,function(){var r;return Li(this,function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=i.sent())?(tm(CT,"Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):im("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}})})},NT.prototype.applySuccessfulWrite=function(e){return Mi(this,void 0,void 0,function(){var t,n;return Li(this,function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),t=e.batch.batchId,this.processUserCallback(t,null),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Ow(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},NT.prototype.rejectFailedWrite=function(e,t){return Mi(this,void 0,void 0,function(){var n;return Li(this,function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"rejected",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Ow(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},NT.prototype.registerPendingWritesCallback=function(e){return Mi(this,void 0,void 0,function(){var t,n;return Li(this,function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||tm(CT,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(t=r.sent())?e.resolve():((n=this.pendingWritesCallbacks.get(t)||[]).push(e),this.pendingWritesCallbacks.set(t,n)),[2]}})})},NT.prototype.triggerPendingWritesCallbacks=function(e){(this.pendingWritesCallbacks.get(e)||[]).forEach(function(e){e.resolve()}),this.pendingWritesCallbacks.delete(e)},NT.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach(function(t){t.forEach(function(t){t.reject(new hm(lm.CANCELLED,e))})}),this.pendingWritesCallbacks.clear()},NT.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n=(n=n||new Ny(Um)).insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},NT.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(om(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},NT.prototype.removeAndCleanupQuery=function(e){var t=this;if(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.queryViewsByQuery.delete(e.query),delete this.queryViewsByTarget[e.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(e.targetId);this.limboDocumentRefs.removeReferencesForId(e.targetId),n.forEach(function(e){t.limboDocumentRefs.containsKey(e)||t.removeLimboTarget(e)})}},NT.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},NT.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];i instanceof bT?(this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i)):i instanceof wT?(tm(CT,"Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):im("Unknown limbo change: "+JSON.stringify(i))}},NT.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){tm(CT,"New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=yE.atPath(t.path);this.limboResolutionsByTarget[n]=new IT(t),this.remoteStore.listen(new cw(r,n,rw.LimboResolution,Xm.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},NT.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},NT.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return Mi(this,void 0,void 0,function(){var n,r,i,o=this;return Li(this,function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach(function(a,s){i.push(Promise.resolve().then(function(){var t=s.view.computeDocChanges(e);return t.needsRefill?o.localStore.executeQuery(s.query).then(function(e){return s.view.computeDocChanges(e,t)}):t}).then(function(e){var i=t&&t.targetChanges[s.targetId],a=s.view.applyChanges(e,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=gT.fromSnapshot(s.targetId,a.snapshot);r.push(u)}}))}),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}})})},NT.prototype.assertSubscribed=function(e){om(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},NT.prototype.handleCredentialChange=function(e){return Mi(this,void 0,void 0,function(){var t,n;return Li(this,function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(e)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},NT.prototype.applyPrimaryState=function(e){return Mi(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u=this;return Li(this,function(c){switch(c.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return c.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=c.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,a=[],s=Promise.resolve(),ym(this.queryViewsByTarget,function(e,t){u.sharedClientState.isLocalQueryTarget(e)?a.push(e):s=s.then(function(){return u.unlisten(t.query)}),u.remoteStore.unlisten(t.targetId)}),[4,s]);case 4:return c.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)];case 5:return c.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})},NT.prototype.resetLimboDocuments=function(){var e=this;ym(this.limboResolutionsByTarget,function(t){e.remoteStore.unlisten(t)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new Ny(uy.comparator)},NT.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return Mi(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u,c;return Li(this,function(l){switch(l.label){case 0:t=[],n=[],r=0,i=e,l.label=1;case 1:return r<i.length?(o=i[r],a=void 0,(s=this.queryViewsByTarget[o])?[4,this.localStore.releaseQuery(s.query,!0)]:[3,5]):[3,11];case 2:return l.sent(),[4,this.localStore.allocateQuery(s.query)];case 3:return a=l.sent(),[4,this.synchronizeViewAndComputeSnapshot(s)];case 4:return(u=l.sent()).snapshot&&n.push(u.snapshot),[3,9];case 5:return om(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(o)];case 6:return om(!!(c=l.sent()),"Query data for target "+o+" not found"),[4,this.localStore.allocateQuery(c)];case 7:return a=l.sent(),[4,this.initializeViewAndComputeSnapshot(a,!1)];case 8:l.sent(),l.label=9;case 9:t.push(a),l.label=10;case 10:return r++,[3,1];case 11:return this.syncEngineListener.onWatchChange(n),[2,t]}})})},NT.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},NT.prototype.applyTargetState=function(e,t,n){return Mi(this,void 0,void 0,function(){var r,i,o,a,s;return Li(this,function(u){switch(u.label){case 0:if(this.isPrimary)return tm(CT,"Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[e])return[3,11];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,8]}return[3,10];case 1:return u.trys.push([1,4,,8]),[4,this.localStore.getNewDocumentChanges()];case 2:return r=u.sent(),i=X_.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return u.sent(),[3,11];case 4:return function(e){return e.code===lm.DATA_LOSS&&e.message===pb}(o=u.sent())?(a=[],ym(this.queryViewsByTarget,function(e){return a.push(e)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)]):[3,6];case 5:return u.sent(),[3,7];case 6:throw o;case 7:return[3,8];case 8:return s=this.queryViewsByTarget[e],this.removeAndCleanupQuery(s),[4,this.localStore.releaseQuery(s.query,!0)];case 9:return u.sent(),this.syncEngineListener.onWatchError(s.query,n),[3,11];case 10:im("Unexpected target state: "+t),u.label=11;case 11:return[2]}})})},NT.prototype.applyActiveTargetsChange=function(e,t){return Mi(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,l,h=this;return Li(this,function(f){switch(f.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,f.label=1;case 1:return n<r.length?(l=r[n],om(!this.queryViewsByTarget[l],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(l)]):[3,6];case 2:return om(!!(i=f.sent()),"Query data for active target "+l+" not found"),[4,this.localStore.allocateQuery(i)];case 3:return o=f.sent(),[4,this.initializeViewAndComputeSnapshot(o,!1)];case 4:f.sent(),this.remoteStore.listen(o),f.label=5;case 5:return n++,[3,1];case 6:a=function(e){var t;return Li(this,function(n){switch(n.label){case 0:return(t=s.queryViewsByTarget[e])?[4,s.localStore.releaseQuery(t.query,!1).then(function(){h.remoteStore.unlisten(e),h.removeAndCleanupQuery(t)}).catch(Ow)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},s=this,u=0,c=t,f.label=7;case 7:return u<c.length?(l=c[u],[5,a(l)]):[3,10];case 8:f.sent(),f.label=9;case 9:return u++,[3,7];case 10:return[2]}})})},NT.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},NT.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},NT.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];return t&&t.receivedDocument?Yy().add(t.key):this.queryViewsByTarget[e]?this.queryViewsByTarget[e].view.syncedDocuments:Yy()},NT);function NT(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new ub(function(e){return e.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new Ny(uy.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new jw,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=dg.forSyncEngine(),this.isPrimary=void 0,this.onlineState=x_.Unknown}var AT=(OT.prototype.isAuthenticated=function(){return null!=this.uid},OT.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},OT.prototype.isEqual=function(e){return e.uid===this.uid},OT.UNAUTHENTICATED=new OT(null),OT.GOOGLE_CREDENTIALS=new OT("google-credentials-uid"),OT.FIRST_PARTY=new OT("first-party-uid"),OT);function OT(e){this.uid=e}var DT="SharedClientState",RT="firestore_clients",PT="firestore_mutations",MT="firestore_targets",LT=(FT.fromWebStorageEntry=function(e,t,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new hm(r.error.code,r.error.message)),i?new FT(e,t,r.state,o):(nm(DT,"Failed to parse mutation state for ID '"+t+"': "+n),null)},FT.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},FT);function FT(e,t,n,r){this.user=e,this.batchId=t,this.state=n,om(void 0!==(this.error=r)==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}var UT=(jT.fromWebStorageEntry=function(e,t){var n=JSON.parse(t),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new hm(n.error.code,n.error.message)),r?new jT(e,n.state,i):(nm(DT,"Failed to parse target state for ID '"+e+"': "+t),null)},jT.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},jT);function jT(e,t,n){this.targetId=e,this.state=t,om(void 0!==(this.error=n)==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}var qT=(BT.fromWebStorageEntry=function(e,t){for(var n=JSON.parse(t),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=$y(),o=0;r&&o<n.activeTargetIds.length;++o)r=f_(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new BT(e,i):(nm(DT,"Failed to parse client data for instance '"+e+"': "+t),null)},BT);function BT(e,t){this.clientId=e,this.activeTargetIds=t}var VT=(WT.fromWebStorageEntry=function(e){var t=JSON.parse(e);return"object"==typeof t&&t.onlineState in x_&&"string"==typeof t.clientId?new WT(t.clientId,x_[t.onlineState]):(nm(DT,"Failed to parse online state: "+e),null)},WT);function WT(e,t){this.clientId=e,this.onlineState=t}var zT=(HT.prototype.addQueryTarget=function(e){om(!this.activeTargetIds.has(e),"Target with ID '"+e+"' already active."),this.activeTargetIds=this.activeTargetIds.add(e)},HT.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},HT.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},HT);function HT(){this.activeTargetIds=$y()}var KT=(QT.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},QT.prototype.start=function(){return Mi(this,void 0,void 0,function(){var e,t,n,r,i,o,a,s,u,c,l,h=this;return Li(this,function(f){switch(f.label){case 0:return om(!this.started,"WebStorageSharedClientState already started"),om(null!==this.syncEngine,"syncEngine property must be set before calling start()"),om(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=f.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(o=qT.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(s=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(s),u=0,c=this.earlyEvents;u<c.length;u++)l=c[u],this.handleWebStorageEvent(l);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return h.shutdown()}),this.started=!0,[2]}})})},QT.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},QT.prototype.getAllActiveQueryTargets=function(){var e=$y();return gm(this.activeClients,function(t,n){e=e.unionWith(n.activeTargetIds)}),e},QT.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},QT.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},QT.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},QT.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(e));if(n){var r=UT.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},QT.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},QT.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},QT.prototype.clearQueryState=function(e){this.removeItem(this.toWebStorageQueryTargetMetadataKey(e))},QT.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},QT.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach(function(e){r.removeMutationState(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})},QT.prototype.setOnlineState=function(e){this.persistOnlineState(e)},QT.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},QT.prototype.getItem=function(e){var t=this.storage.getItem(e);return tm(DT,"READ",e,t),t},QT.prototype.setItem=function(e,t){tm(DT,"SET",e,t),this.storage.setItem(e,t)},QT.prototype.removeItem=function(e){tm(DT,"REMOVE",e),this.storage.removeItem(e)},QT.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(tm(DT,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void nm("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return Mi(t,void 0,void 0,function(){var t,n,r,i,o,a;return Li(this,function(s){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(o=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(o)]}else e.key===this.sequenceNumberKey&&(om(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(e){var t=Xm.INVALID;if(null!=e)try{var n=JSON.parse(e);om("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(e){nm(DT,"Failed to read sequence number from WebStorage",e)}return t}(e.newValue))!==Xm.INVALID&&this.sequenceNumberHandler(a));return[2]})})})}},Object.defineProperty(QT.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),QT.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},QT.prototype.persistMutationState=function(e,t,n){var r=new LT(this.currentUser,e,t,n),i=this.toWebStorageMutationBatchKey(e);this.setItem(i,r.toWebStorageJSON())},QT.prototype.removeMutationState=function(e){var t=this.toWebStorageMutationBatchKey(e);this.removeItem(t)},QT.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:x_[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},QT.prototype.persistQueryTargetState=function(e,t,n){var r=this.toWebStorageQueryTargetMetadataKey(e),i=new UT(e,t,n);this.setItem(r,i.toWebStorageJSON())},QT.prototype.toWebStorageClientStateKey=function(e){return om(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),RT+"_"+this.persistenceKey+"_"+e},QT.prototype.toWebStorageQueryTargetMetadataKey=function(e){return MT+"_"+this.persistenceKey+"_"+e},QT.prototype.toWebStorageMutationBatchKey=function(e){var t=PT+"_"+this.persistenceKey+"_"+e;return this.currentUser.isAuthenticated()&&(t+="_"+this.currentUser.uid),t},QT.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},QT.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return om(null!==n,"Cannot parse client state key '"+e+"'"),qT.fromWebStorageEntry(n,t)},QT.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);om(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return LT.fromWebStorageEntry(new AT(i),r,t)},QT.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);om(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return UT.fromWebStorageEntry(r,t)},QT.prototype.fromWebStorageOnlineState=function(e){return VT.fromWebStorageEntry(e)},QT.prototype.handleMutationBatchEvent=function(e){return Mi(this,void 0,void 0,function(){return Li(this,function(t){return e.user.uid!==this.currentUser.uid?(tm(DT,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]})})},QT.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},QT.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach(function(e){return Mi(n,void 0,void 0,function(){return Li(this,function(t){return r.has(e)||o.push(e),[2]})})}),r.forEach(function(e){return Mi(n,void 0,void 0,function(){return Li(this,function(t){return i.has(e)||a.push(e),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,a)},QT.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},QT);function QT(e,t,n,r,i){if(this.queue=e,this.platform=t,this.persistenceKey=n,this.localClientId=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!QT.isAvailable(this.platform))throw new hm(lm.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey="firestore_sequence_number_"+n,this.activeClients[this.localClientId]=new zT,this.clientStateKeyRe=new RegExp("^"+RT+"_"+o+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+PT+"_"+o+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+MT+"_"+o+"_(\\d+)$"),this.onlineStateKey="firestore_online_state_"+n,this.platform.window.addEventListener("storage",this.storageListener)}var GT=(YT.prototype.addPendingMutation=function(e){},YT.prototype.updateMutationState=function(e,t,n){},YT.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},YT.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},YT.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},YT.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},YT.prototype.clearQueryState=function(e){delete this.queryState[e]},YT.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},YT.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},YT.prototype.start=function(){return this.localState=new zT,Promise.resolve()},YT.prototype.handleUserChange=function(e,t,n){},YT.prototype.setOnlineState=function(e){},YT.prototype.shutdown=function(){},YT.prototype.writeSequenceNumber=function(e){},YT);function YT(){this.localState=new zT,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}var XT="FirestoreClient",$T=(JT.prototype.lruParams=function(){return gw.withCacheSize(this.cacheSizeBytes)},JT);function JT(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}var ZT=function(){},eS=(tS.prototype.start=function(e){var t=this;this.verifyNotTerminated();var n=new fy,r=new fy,i=!1;return this.credentials.setChangeListener(function(o){i?t.asyncQueue.enqueueAndForget(function(){return t.handleCredentialChange(o)}):(i=!0,t.initializePersistence(e,r,o).then(function(e){return t.initializeRest(o,e)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},tS.prototype.enableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return e.syncEngine.enableNetwork()})},tS.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof $T?this.startIndexedDbPersistence(n,e).then(function(e){return t.resolve(),e}).catch(function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()}):(t.resolve(),this.startMemoryPersistence())},tS.prototype.canFallback=function(e){return e instanceof hm?e.code===lm.FAILED_PRECONDITION||e.code===lm.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code},tS.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new hm(lm.FAILED_PRECONDITION,"The client has already been terminated.")},tS.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=Nw.buildStoragePrefix(this.databaseInfo),i=new lT(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return Mi(n,void 0,void 0,function(){var n,o;return Li(this,function(a){switch(a.label){case 0:if(t.synchronizeTabs&&!KT.isAvailable(this.platform))throw new hm(lm.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=t.lruParams(),this.sharedClientState=t.synchronizeTabs?new KT(this.asyncQueue,this.platform,r,this.clientId,e):new GT,[4,Nw.createIndexedDbPersistence({allowTabSynchronization:t.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return o=a.sent(),[2,(this.persistence=o).referenceDelegate.garbageCollector]}})})})},tS.prototype.startMemoryPersistence=function(){return this.persistence=e_.createEagerPersistence(this.clientId),this.sharedClientState=new GT,Promise.resolve(null)},tS.prototype.initializeRest=function(e,t){var n=this;return tm(XT,"Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then(function(r){return Mi(n,void 0,void 0,function(){var n,i,o,a,s,u=this;return Li(this,function(c){switch(c.label){case 0:return this.localStore=new zw(this.persistence,e),t&&(this.lruScheduler=new bw(t,this.asyncQueue,this.localStore)),n=this.platform.newConnectivityMonitor(),i=this.platform.newSerializer(this.databaseInfo.databaseId),o=new k_(this.asyncQueue,r,this.credentials,i),a=function(e){return u.syncEngine.applyOnlineStateChange(e,A_.RemoteStore)},s=function(e){return u.syncEngine.applyOnlineStateChange(e,A_.SharedClientState)},this.remoteStore=new fE(this.localStore,o,this.asyncQueue,a,n),this.syncEngine=new xT(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=s,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new pT(this.syncEngine),[4,this.sharedClientState.start()];case 1:return c.sent(),[4,this.remoteStore.start()];case 2:return c.sent(),[4,this.persistence.setPrimaryStateListener(function(e){return Mi(u,void 0,void 0,function(){return Li(this,function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}})})})];case 3:return c.sent(),[4,this.persistence.setDatabaseDeletedListener(function(){return Mi(u,void 0,void 0,function(){return Li(this,function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}})})})];case 4:return c.sent(),[2]}})})})},tS.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),tm(XT,"Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},tS.prototype.disableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return e.syncEngine.disableNetwork()})},tS.prototype.terminate=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown(function(){return Mi(e,void 0,void 0,function(){return Li(this,function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}})})})},tS.prototype.waitForPendingWrites=function(){var e=this;this.verifyNotTerminated();var t=new fy;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.registerPendingWritesCallback(t)}),t.promise},tS.prototype.listen=function(e,t,n){var r=this;this.verifyNotTerminated();var i=new mT(e,t,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},tS.prototype.unlisten=function(e){var t=this;this.clientTerminated||this.asyncQueue.enqueueAndForget(function(){return t.eventMgr.unlisten(e)})},tS.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.localStore.readDocument(e)}).then(function(e){if(e instanceof eb)return e;if(e instanceof rb)return null;throw new hm(lm.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},tS.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.localStore.executeQuery(e)}).then(function(t){var n=Yy(),r=new _T(e,n),i=r.computeDocChanges(t);return r.applyChanges(i,!1).snapshot})},tS.prototype.write=function(e){var t=this;this.verifyNotTerminated();var n=new fy;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.write(e,n)}),n.promise},tS.prototype.databaseId=function(){return this.databaseInfo.databaseId},tS.prototype.addSnapshotsInSyncListener=function(e){var t=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget(function(){return t.eventMgr.addSnapshotsInSyncListener(e),Promise.resolve()})},tS.prototype.removeSnapshotsInSyncListener=function(e){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(e)},Object.defineProperty(tS.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),tS.prototype.transaction=function(e){var t=this;this.verifyNotTerminated();var n=new fy;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.runTransaction(t.asyncQueue,e,n),Promise.resolve()}),n.promise},tS);function tS(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=Lm.newId()}var nS=(rS.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},rS.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},rS.prototype.mute=function(){this.muted=!0},rS.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)},rS);function rS(e){this.observer=e,this.muted=!1}var iS=(oS.documentId=function(){return oS._DOCUMENT_ID},oS.prototype.isEqual=function(e){if(!(e instanceof oS))throw Rm("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},oS._DOCUMENT_ID=new oS(ay.keyField().canonicalString()),oS);function oS(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e,t,n,r){if(!(t instanceof Array)||t.length<1)throw new hm(lm.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+Mm(1,"element")+".")}(0,e);for(var n=0;n<e.length;++n)if(Tm("FieldPath","string",n,e[n]),0===e[n].length)throw new hm(lm.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ay(e)}var aS=new RegExp("[~\\*/\\[\\]]"),sS=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+e}},uS=(cS.prototype.getToken=function(){return Promise.resolve(null)},cS.prototype.invalidateToken=function(){},cS.prototype.setChangeListener=function(e){om(!this.changeListener,"Can only call setChangeListener() once."),(this.changeListener=e)(AT.UNAUTHENTICATED)},cS.prototype.removeChangeListener=function(){om(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},cS);function cS(){this.changeListener=null}var lS=(hS.prototype.getToken=function(){var e=this;om(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(e.tokenCounter!==t)throw new hm(lm.ABORTED,"getToken aborted due to token change.");return n?(om("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new sS(n.accessToken,e.currentUser)):null})},hS.prototype.invalidateToken=function(){this.forceRefresh=!0},hS.prototype.setChangeListener=function(e){om(!this.changeListener,"Can only call setChangeListener() once."),(this.changeListener=e)(this.currentUser)},hS.prototype.removeChangeListener=function(){om(null!=this.tokenListener,"removeChangeListener() called twice"),om(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},hS.prototype.getUser=function(){var e=this.app.INTERNAL.getUid();return om(null===e||"string"==typeof e,"Received invalid UID: "+e),new AT(e)},hS);function hS(e){var t=this;this.app=e,this.tokenListener=null,this.currentUser=AT.UNAUTHENTICATED,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.changeListener&&t.changeListener(t.currentUser)},this.currentUser=this.getUser(),this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}var fS=(Object.defineProperty(pS.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),pS);function pS(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=AT.FIRST_PARTY}var dS=(mS.prototype.getToken=function(){return Promise.resolve(new fS(this.gapi,this.sessionIndex))},mS.prototype.setChangeListener=function(e){e(AT.FIRST_PARTY)},mS.prototype.removeChangeListener=function(){},mS.prototype.invalidateToken=function(){},mS);function mS(e,t){this.gapi=e,this.sessionIndex=t}function yS(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var gS=(vS.delete=function(){return bm("FieldValue.delete",arguments),wS.instance},vS.serverTimestamp=function(){return bm("FieldValue.serverTimestamp",arguments),TS.instance},vS.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return _m("FieldValue.arrayUnion",arguments,1),new kS(e)},vS.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return _m("FieldValue.arrayRemove",arguments,1),new NS(e)},vS.increment=function(e){return Tm("FieldValue.increment","number",1,e),wm("FieldValue.increment",arguments,1),new DS(e)},vS.prototype.isEqual=function(e){return this===e},vS);function vS(e){this._methodName=e}var bS,wS=(Ri(_S,bS=gS),_S.instance=new _S,_S);function _S(){return bS.call(this,"FieldValue.delete")||this}var ES,TS=(Ri(SS,ES=gS),SS.instance=new SS,SS);function SS(){return ES.call(this,"FieldValue.serverTimestamp")||this}var CS,kS=(Ri(IS,CS=gS),IS);function IS(e){var t=CS.call(this,"FieldValue.arrayUnion")||this;return t._elements=e,t}var xS,NS=(Ri(AS,xS=gS),AS);function AS(e){var t=xS.call(this,"FieldValue.arrayRemove")||this;return t._elements=e,t}var OS,DS=(Ri(RS,OS=gS),RS);function RS(e){var t=OS.call(this,"FieldValue.increment")||this;return t._operand=e,t}var PS=pm(gS,"Use FieldValue.<field>() instead."),MS=/^__.*__$/,LS=(FS.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new Yg(e,this.data,this.fieldMask,t)):n.push(new Kg(e,this.data,t)),0<this.fieldTransforms.length&&n.push(new Jg(e,this.fieldTransforms)),n},FS);function FS(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}var US,jS,qS=(BS.prototype.toMutations=function(e,t){var n=[new Yg(e,this.data,this.fieldMask,t)];return 0<this.fieldTransforms.length&&n.push(new Jg(e,this.fieldTransforms)),n},BS);function BS(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}function VS(e){switch(e){case US.Set:case US.MergeSet:case US.Update:return!0;case US.Argument:return!1;default:throw im("Unexpected case for UserDataSource: "+e)}}(jS=US=US||{})[jS.Set=0]="Set",jS[jS.Update=1]="Update",jS[jS.MergeSet=2]="MergeSet",jS[jS.Argument=3]="Argument";var WS=(zS.prototype.childContextForField=function(e){var t=null==this.path?null:this.path.child(e),n=new zS(this.dataSource,this.methodName,t,!1,this.fieldTransforms,this.fieldMask);return n.validatePathSegment(e),n},zS.prototype.childContextForFieldPath=function(e){var t=null==this.path?null:this.path.child(e),n=new zS(this.dataSource,this.methodName,t,!1,this.fieldTransforms,this.fieldMask);return n.validatePath(),n},zS.prototype.childContextForArray=function(e){return new zS(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},zS.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new hm(lm.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},zS.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},zS.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},zS.prototype.validatePathSegment=function(e){if(VS(this.dataSource)&&MS.test(e))throw this.createError("Document fields cannot begin and end with __")},zS);function zS(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}var HS=function(e,t){this.databaseId=e,this.key=t},KS=(QS.prototype.parseSetData=function(e,t){var n=new WS(US.Set,e,ay.EMPTY_PATH);YS("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new LS(r,null,n.fieldTransforms)},QS.prototype.parseMergeData=function(e,t,n){var r=new WS(US.MergeSet,e,ay.EMPTY_PATH);YS("Data must be an object, but it was:",r,t);var i,o,a=this.parseData(t,r);if(n){for(var s=new Fy(ay.comparator),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof iS)h=l._internalPath;else{if("string"!=typeof l)throw im("Expected stringOrFieldPath to be a string or a FieldPath");h=$S(e,l)}if(!r.contains(h))throw new hm(lm.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=Pg.fromSet(s),o=r.fieldTransforms.filter(function(e){return i.covers(e.field)})}else i=Pg.fromArray(r.fieldMask),o=r.fieldTransforms;return new LS(a,i,o)},QS.prototype.parseUpdateData=function(e,t){var n=this,r=new WS(US.Update,e,ay.EMPTY_PATH);YS("Data must be an object, but it was:",r,t);var i=new Fy(ay.comparator),o=Kv.EMPTY;gm(t,function(t,a){var s=$S(e,t),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof wS)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}});var a=Pg.fromSet(i);return new qS(o,a,r.fieldTransforms)},QS.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new WS(US.Update,e,ay.EMPTY_PATH),o=[XS(e,t)],a=[n];if(r.length%2!=0)throw new hm(lm.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(XS(e,r[s])),a.push(r[s+1]);var u=new Fy(ay.comparator),c=Kv.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),f=this.runPreConverter(a[s],h);if(f instanceof wS)u=u.add(l);else{var p=this.parseData(f,h);null!=p&&(u=u.add(l),c=c.set(l,p))}}var d=Pg.fromSet(u);return new qS(c,d,i.fieldTransforms)},QS.prototype.parseQueryValue=function(e,t){var n=new WS(US.Argument,e,ay.EMPTY_PATH),r=this.parseData(t,n);return om(null!=r,"Parsed data should not be null."),om(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},QS.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(e){var n=JS(e);throw t.createError(n)}},QS.prototype.parseData=function(e,t){if(GS(e=this.runPreConverter(e,t)))return YS("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof gS)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},QS.prototype.parseObject=function(e,t){var n=this,r=new Ny(Um);return vm(e)?t.path&&0<t.path.length&&t.fieldMask.push(t.path):gm(e,function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))}),new Kv(r)},QS.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=o[i],s=this.parseData(a,t.childContextForArray(r));null==s&&(s=fv.INSTANCE),n.push(s),r++}return new Yv(n)},QS.prototype.parseSentinelFieldValue=function(e,t){if(!VS(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof wS){if(t.dataSource!==US.MergeSet)throw t.dataSource===US.Update?(om(0<t.path.length,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof TS)t.fieldTransforms.push(new Lg(t.path,KE.instance));else if(e instanceof kS){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new GE(n);t.fieldTransforms.push(new Lg(t.path,r))}else if(e instanceof NS){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new XE(n);t.fieldTransforms.push(new Lg(t.path,i))}else if(e instanceof DS){var o=this.parseQueryValue("FieldValue.increment",e._operand),a=new JE(o);t.fieldTransforms.push(new Lg(t.path,a))}else im("Unknown FieldValue type: "+e)},QS.prototype.parseScalarValue=function(e,t){if(null===e)return fv.INSTANCE;if("number"==typeof e)return f_(e)?new Ev(e):new Cv(e);if("boolean"==typeof e)return mv.of(e);if("string"==typeof e)return new xv(e);if(e instanceof Date)return new Ov(Cy.fromDate(e));if(e instanceof Cy)return new Ov(new Cy(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof dE)return new Wv(e);if(e instanceof Wm)return new Fv(e);if(e instanceof HS)return new qv(e.databaseId,e.key);throw t.createError("Unsupported field value: "+Am(e))},QS.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map(function(t,r){var i=new WS(US.Argument,e,ay.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))})},QS);function QS(e){this.preConverter=e}function GS(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Cy||e instanceof dE||e instanceof Wm||e instanceof HS||e instanceof gS)}function YS(e,t,n){if(!GS(n)||!Nm(n)){var r=Am(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function XS(e,t){if(t instanceof iS)return t._internalPath;if("string"==typeof t)return $S(e,t);throw new hm(lm.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function $S(e,t){try{return function(e){if(0<=e.search(aS))throw new hm(lm.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(iS.bind.apply(iS,[void 0].concat(e.split("."))))}catch(t){throw new hm(lm.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(t){var n=JS(t);throw new hm(lm.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function JS(e){return e instanceof Error?e.message:e.toString()}var ZS=gw.COLLECTION_DISABLED,eC=(tC.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},tC);function tC(e){if(void 0===e.host){if(void 0!==e.ssl)throw new hm(lm.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else Cm("settings","non-empty string","host",e.host),this.host=e.host,km("settings","boolean","ssl",e.ssl),this.ssl=mm(e.ssl,!0);if(Dm("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),km("settings","object","credentials",e.credentials),this.credentials=e.credentials,km("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?nm("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&nm("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=mm(e.timestampsInSnapshots,!0),km("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=gw.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==ZS&&e.cacheSizeBytes<gw.MINIMUM_CACHE_SIZE_BYTES)throw new hm(lm.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+gw.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}km("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0!==e.experimentalForceLongPolling&&e.experimentalForceLongPolling}var nC=(rC.prototype.settings=function(e){if(wm("Firestore.settings",arguments,1),Tm("Firestore.settings","object",1,e),dm(e,"persistence"))throw new hm(lm.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new eC(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new hm(lm.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this._settings=t).credentials&&(this._credentials=function(e){if(!e)return new uS;switch(e.type){case"gapi":var t=e.client;return om(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new dS(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new hm(lm.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},rC.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},rC.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},rC.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new hm(lm.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&nm("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=mm(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new $T(this._settings.cacheSizeBytes,t))},rC.prototype.clearPersistence=function(){var e=this,t=Nw.buildStoragePrefix(this.makeDatabaseInfo()),n=new fy;return this._queue.enqueueAndForgetEvenAfterShutdown(function(){return Mi(e,void 0,void 0,function(){var e;return Li(this,function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new hm(lm.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,Nw.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise},rC.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(rC.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),rC.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},rC.prototype._onSnapshotsInSync=function(e){if(this.ensureClientConfigured(),yS(e))return this.onSnapshotsInSyncInternal(e);Tm("Firestore.onSnapshotsInSync","function",1,e);var t={next:e};return this.onSnapshotsInSyncInternal(t)},rC.prototype.onSnapshotsInSyncInternal=function(e){var t=this,n=new nS({next:function(){e.next&&e.next()},error:function(e){throw im("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),t._firestoreClient.removeSnapshotsInSyncListener(n)}},rC.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new ZT),this._firestoreClient},rC.prototype.makeDatabaseInfo=function(){return new Km(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},rC.prototype.configureClient=function(e){om(!!this._settings.host,"FirestoreSettings.host is not set"),om(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._firestoreClient=new eS(am.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},rC.prototype.createDataConverter=function(e){return new KS(function(t){if(t instanceof uC){var n=e,r=t.firestore._databaseId;if(!r.isEqual(n))throw new hm(lm.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new HS(e,t._key)}return t})},rC.databaseIdFromApp=function(e){var t=e.options;if(!dm(t,"projectId"))throw new hm(lm.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new hm(lm.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Gm(n)},Object.defineProperty(rC.prototype,"app",{get:function(){if(!this._firebaseApp)throw new hm(lm.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),rC.prototype.collection=function(e){return wm("Firestore.collection",arguments,1),Tm("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new EC(ny.fromString(e),this)},rC.prototype.doc=function(e){return wm("Firestore.doc",arguments,1),Tm("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),uC.forPath(ny.fromString(e),this)},rC.prototype.collectionGroup=function(e){if(wm("Firestore.collectionGroup",arguments,1),Tm("Firestore.collectionGroup","non-empty string",1,e),0<=e.indexOf("/"))throw new hm(lm.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new gC(new yE(ny.EMPTY_PATH,e),this)},rC.prototype.runTransaction=function(e){var t=this;return wm("Firestore.runTransaction",arguments,1),Tm("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction(function(n){return e(new iC(t,n))})},rC.prototype.batch=function(){return this.ensureClientConfigured(),new aC(this)},Object.defineProperty(rC,"logLevel",{get:function(){switch(Zd()){case Wd.DEBUG:return"debug";case Wd.ERROR:return"error";case Wd.SILENT:return"silent";default:return im("Unknown log level: "+Zd())}},enumerable:!0,configurable:!0}),rC.setLogLevel=function(e){switch(wm("Firestore.setLogLevel",arguments,1),Tm("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":em(Wd.DEBUG);break;case"error":em(Wd.ERROR);break;case"silent":em(Wd.SILENT);break;default:throw new hm(lm.INVALID_ARGUMENT,"Invalid log level: "+e)}},rC.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},rC);function rC(e){var t=this;if(this._firebaseApp=null,this._queue=new my,this.INTERNAL={delete:function(){return Mi(t,void 0,void 0,function(){return Li(this,function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return e.sent(),[2]}})})}},"object"==typeof e.options){var n=e;this._firebaseApp=n,this._databaseId=rC.databaseIdFromApp(n),this._persistenceKey=n.name,this._credentials=new lS(n)}else{var r=e;if(!r.projectId)throw new hm(lm.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new Gm(r.projectId,r.database),this._persistenceKey="[DEFAULT]",this._credentials=new uS}this._settings=new eC({}),this._dataConverter=this.createDataConverter(this._databaseId)}var iC=(oC.prototype.get=function(e){var t=this;wm("Transaction.get",arguments,1);var n=IC("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return im("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof rb)return new fC(t._firestore,n._key,null,!1,!1);if(r instanceof eb)return new fC(t._firestore,n._key,r,!1,!1);throw im("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)})},oC.prototype.set=function(e,t,n){Em("Transaction.set",arguments,2,3);var r=IC("Transaction.set",e,this._firestore),i=(n=SC("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",t);return this._transaction.set(r._key,i),this},oC.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return i="string"==typeof t||t instanceof iS?(_m("Transaction.update",arguments,3),r=IC("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(wm("Transaction.update",arguments,2),r=IC("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},oC.prototype.delete=function(e){wm("Transaction.delete",arguments,1);var t=IC("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},oC);function oC(e,t){this._firestore=e,this._transaction=t}var aC=(sC.prototype.set=function(e,t,n){Em("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=IC("WriteBatch.set",e,this._firestore),i=(n=SC("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",t);return this._mutations=this._mutations.concat(i.toMutations(r._key,Bg.NONE)),this},sC.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),i="string"==typeof t||t instanceof iS?(_m("WriteBatch.update",arguments,3),r=IC("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(wm("WriteBatch.update",arguments,2),r=IC("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,Bg.exists(!0))),this},sC.prototype.delete=function(e){wm("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=IC("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new ov(t._key,Bg.NONE)),this},sC.prototype.commit=function(){return Mi(this,void 0,void 0,function(){return Li(this,function(e){return this.verifyNotCommitted(),this._committed=!0,0<this._mutations.length?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},sC.prototype.verifyNotCommitted=function(){if(this._committed)throw new hm(lm.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},sC);function sC(e){this._firestore=e,this._mutations=[],this._committed=!1}var uC=(cC.forPath=function(e,t){if(e.length%2!=0)throw new hm(lm.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new cC(new uy(e),t)},Object.defineProperty(cC.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(cC.prototype,"parent",{get:function(){return new EC(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(cC.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),cC.prototype.collection=function(e){if(wm("DocumentReference.collection",arguments,1),Tm("DocumentReference.collection","non-empty string",1,e),!e)throw new hm(lm.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=ny.fromString(e);return new EC(this._key.path.child(t),this.firestore)},cC.prototype.isEqual=function(e){if(!(e instanceof cC))throw Rm("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},cC.prototype.set=function(e,t){Em("DocumentReference.set",arguments,1,2);var n=(t=SC("DocumentReference.set",t)).merge||t.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",e,t.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",e);return this._firestoreClient.write(n.toMutations(this._key,Bg.NONE))},cC.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof e||e instanceof iS?(_m("DocumentReference.update",arguments,2),this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(wm("DocumentReference.update",arguments,1),this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,Bg.exists(!0)))},cC.prototype.delete=function(){return wm("DocumentReference.delete",arguments,0),this._firestoreClient.write([new ov(this._key,Bg.NONE)])},cC.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Em("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||yS(e[i])||(Dm("DocumentReference.onSnapshot",r=e[i],["includeMetadataChanges"]),km("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return n=yS(e[i])?e[i]:(Tm("DocumentReference.onSnapshot","function",i,e[i]),Sm("DocumentReference.onSnapshot","function",i+1,e[i+1]),Sm("DocumentReference.onSnapshot","function",i+2,e[i+2]),{next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},cC.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new nS({next:function(e){if(t.next){om(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new fC(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(yE.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},cC.prototype.get=function(e){var t=this;return Em("DocumentReference.get",arguments,0,1),kC("DocumentReference.get",e),new Promise(function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then(function(e){n(new fC(t.firestore,t._key,e,!0,e instanceof eb&&e.hasLocalMutations))},r):t.getViaSnapshotListener(n,r,e)})},cC.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new hm(lm.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new hm(lm.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},cC);function cC(e,t){this._key=e,this.firestore=t,this._firestoreClient=this.firestore.ensureClientConfigured()}var lC=(hC.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},hC);function hC(e,t){this.hasPendingWrites=e,this.fromCache=t}var fC=(pC.prototype.data=function(e){return Em("DocumentSnapshot.data",arguments,0,1),e=CC("DocumentSnapshot.data",e),this._document?this.convertObject(this._document.data(),sv.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},pC.prototype.get=function(e,t){if(Em("DocumentSnapshot.get",arguments,1,2),t=CC("DocumentSnapshot.get",t),this._document){var n=this._document.data().field(XS("DocumentSnapshot.get",e));if(null!==n)return this.convertValue(n,sv.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(pC.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(pC.prototype,"ref",{get:function(){return new uC(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(pC.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(pC.prototype,"metadata",{get:function(){return new lC(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),pC.prototype.isEqual=function(e){if(!(e instanceof pC))throw Rm("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},pC.prototype.convertObject=function(e,t){var n=this,r={};return e.forEach(function(e,i){r[e]=n.convertValue(i,t)}),r},pC.prototype.convertValue=function(e,t){if(e instanceof Kv)return this.convertObject(e,t);if(e instanceof Yv)return this.convertArray(e,t);if(e instanceof qv){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||nm("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new uC(n,this._firestore)}return e.value(t)},pC.prototype.convertArray=function(e,t){var n=this;return e.internalValue.map(function(e){return n.convertValue(e,t)})},pC);function pC(e,t,n,r,i){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i}var dC,mC=(Ri(yC,dC=fC),yC.prototype.data=function(e){var t=dC.prototype.data.call(this,e);return om("object"==typeof t,"Document in a QueryDocumentSnapshot should exist"),t},yC);function yC(){return null!==dC&&dC.apply(this,arguments)||this}var gC=(vC.prototype.where=function(e,t,n){wm("Query.where",arguments,3),Om("Query.where",3,n),"in"!==t&&"array-contains-any"!==t&&function(e,t,n,r){if(!t.some(function(e){return e===r}))throw new hm(lm.INVALID_ARGUMENT,"Invalid value "+Am(r)+" provided to function Query.where() for its "+Pm(2)+" argument. Acceptable values: "+t.join(", "))}(0,["<","<=","==",">=",">","array-contains"],0,t);var r,i=XS("Query.where",e),o=vE.fromString(t);if(i.isKeyField()){if(o===vE.ARRAY_CONTAINS||o===vE.ARRAY_CONTAINS_ANY)throw new hm(lm.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o.toString()+"' queries on FieldPath.documentId().");if(o===vE.IN){this.validateDisjunctiveFilterElements(n,o);for(var a=[],s=0,u=n;s<u.length;s++){var c=u[s];a.push(this.parseDocumentIdValue(c))}r=new Yv(a)}else r=this.parseDocumentIdValue(n)}else o!==vE.IN&&o!==vE.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(n,o),r=this.firestore._dataConverter.parseQueryValue("Query.where",n);var l=_E.create(i,o,r);return this.validateNewFilter(l),new vC(this._query.addFilter(l),this.firestore)},vC.prototype.orderBy=function(e,t){var n;if(Em("Query.orderBy",arguments,1,2),Sm("Query.orderBy","non-empty string",2,t),void 0===t||"asc"===t)n=UE.ASCENDING;else{if("desc"!==t)throw new hm(lm.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+t+"', expected 'asc' or 'desc'.");n=UE.DESCENDING}if(null!==this._query.startAt)throw new hm(lm.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new hm(lm.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=XS("Query.orderBy",e),i=new VE(r,n);return this.validateNewOrderBy(i),new vC(this._query.addOrderBy(i),this.firestore)},vC.prototype.limit=function(e){if(wm("Query.limit",arguments,1),Tm("Query.limit","number",1,e),e<=0)throw new hm(lm.INVALID_ARGUMENT,"Invalid Query. Query limit ("+e+") is invalid. Limit must be positive.");return new vC(this._query.withLimit(e),this.firestore)},vC.prototype.startAt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];_m("Query.startAt",arguments,1);var r=this.boundFromDocOrFields("Query.startAt",e,t,!0);return new vC(this._query.withStartAt(r),this.firestore)},vC.prototype.startAfter=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];_m("Query.startAfter",arguments,1);var r=this.boundFromDocOrFields("Query.startAfter",e,t,!1);return new vC(this._query.withStartAt(r),this.firestore)},vC.prototype.endBefore=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];_m("Query.endBefore",arguments,1);var r=this.boundFromDocOrFields("Query.endBefore",e,t,!0);return new vC(this._query.withEndAt(r),this.firestore)},vC.prototype.endAt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];_m("Query.endAt",arguments,1);var r=this.boundFromDocOrFields("Query.endAt",e,t,!1);return new vC(this._query.withEndAt(r),this.firestore)},vC.prototype.isEqual=function(e){if(!(e instanceof vC))throw Rm("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},vC.prototype.boundFromDocOrFields=function(e,t,n,r){if(Om(e,1,t),t instanceof fC){if(0<n.length)throw new hm(lm.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new hm(lm.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},vC.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new qv(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(s instanceof Pv)throw new hm(lm.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.canonicalString();throw new hm(lm.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new qE(r,n)},vC.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new hm(lm.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var a=t[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new hm(lm.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new hm(lm.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(ny.fromString(a));if(!uy.isDocumentKey(s))throw new hm(lm.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new uy(s);i.push(new qv(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(e,a);i.push(c)}}return new qE(i,n)},vC.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Em("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof e[i]||yS(e[i])||(Dm("Query.onSnapshot",r=e[i],["includeMetadataChanges"]),km("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=yS(e[i])?e[i]:(Tm("Query.onSnapshot","function",i,e[i]),Sm("Query.onSnapshot","function",i+1,e[i+1]),Sm("Query.onSnapshot","function",i+2,e[i+2]),{next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(r,n)},vC.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new nS({next:function(e){t.next&&t.next(new bC(n.firestore,n._query,e))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(a)}},vC.prototype.get=function(e){var t=this;return Em("Query.get",arguments,0,1),kC("Query.get",e),new Promise(function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then(function(e){n(new bC(t.firestore,t._query,e))},r):t.getViaSnapshotListener(n,r,e)})},vC.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new hm(lm.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},vC.prototype.parseDocumentIdValue=function(e){if("string"==typeof e){if(""===e)throw new hm(lm.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new hm(lm.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var t=this._query.path.child(ny.fromString(e));if(!uy.isDocumentKey(t))throw new hm(lm.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+t+"' is not because it has an odd number of segments ("+t.length+").");return new qv(this.firestore._databaseId,new uy(t))}if(e instanceof uC){var n=e;return new qv(this.firestore._databaseId,n._key)}throw new hm(lm.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Am(e)+".")},vC.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new hm(lm.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(10<e.length)throw new hm(lm.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=e.indexOf(null))throw new hm(lm.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(0<e.filter(function(e){return Number.isNaN(e)}).length)throw new hm(lm.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},vC.prototype.validateNewFilter=function(e){if(e instanceof _E){var t=[vE.ARRAY_CONTAINS,vE.ARRAY_CONTAINS_ANY],n=[vE.IN,vE.ARRAY_CONTAINS_ANY],r=0<=t.indexOf(e.op),i=0<=n.indexOf(e.op);if(e.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(e.field))throw new hm(lm.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+e.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(e.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(t)),null!=s)throw s===e.op?new hm(lm.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new hm(lm.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},vC.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},vC.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new hm(lm.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},vC);function vC(e,t){this._query=e,this.firestore=t}var bC=(Object.defineProperty(wC.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(wC.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(wC.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),wC.prototype.forEach=function(e,t){var n=this;Em("QuerySnapshot.forEach",arguments,1,2),Tm("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach(function(r){e.call(t,n.convertToDocumentImpl(r))})},Object.defineProperty(wC.prototype,"query",{get:function(){return new gC(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),wC.prototype.docChanges=function(e){e&&(Dm("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),km("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new hm(lm.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map(function(t){var o=new mC(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key));return om(t.type===q_.Added,"Invalid event type for first snapshot"),om(!r||n.query.docComparator(r,t.doc)<0,"Got added events in wrong order"),r=t.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}var o=n.oldDocs;return n.docChanges.filter(function(e){return t||e.type!==q_.Metadata}).map(function(t){var r=new mC(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key)),i=-1,a=-1;return t.type!==q_.Added&&(om(0<=(i=o.indexOf(t.doc.key)),"Index for document not found"),o=o.delete(t.doc.key)),t.type!==q_.Removed&&(a=(o=o.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case q_.Added:return"added";case q_.Modified:case q_.Metadata:return"modified";case q_.Removed:return"removed";default:return im("Unknown change type: "+e)}}(t.type),doc:r,oldIndex:i,newIndex:a}})}(this._firestore,t,this._snapshot),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},wC.prototype.isEqual=function(e){if(!(e instanceof wC))throw Rm("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},wC.prototype.convertToDocumentImpl=function(e){return new mC(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key))},wC);function wC(e,t,n){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new lC(n.hasPendingWrites,n.fromCache)}["length","forEach","map"].concat("undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(e){try{Object.defineProperty(bC.prototype.docChanges,e,{get:function(){return function(){throw new hm(lm.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}});var _C,EC=(Ri(TC,_C=gC),Object.defineProperty(TC.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(TC.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new uC(new uy(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(TC.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),TC.prototype.doc=function(e){if(Em("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=Lm.newId()),Tm("CollectionReference.doc","non-empty string",1,e),""===e)throw new hm(lm.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=ny.fromString(e);return uC.forPath(this._query.path.child(t),this.firestore)},TC.prototype.add=function(e){wm("CollectionReference.add",arguments,1),Tm("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then(function(){return t})},TC);function TC(e,t){var n=_C.call(this,yE.atPath(e),t)||this;if(e.length%2!=1)throw new hm(lm.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return n}function SC(e,t){if(void 0===t)return{merge:!1};if(Dm(e,t,["merge","mergeFields"]),km(e,"boolean","merge",t.merge),function(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){if(!(r instanceof Array))throw new hm(lm.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+Am(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new hm(lm.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be "+n+", but the value at index "+o+" was: "+Am(r[o]))}(e,t,n,r,i)}(e,"mergeFields","a string or a FieldPath",t.mergeFields,function(e){return"string"==typeof e||e instanceof iS}),void 0!==t.mergeFields&&void 0!==t.merge)throw new hm(lm.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function CC(e,t){return void 0===t?{}:(Dm(e,t,["serverTimestamps"]),Im(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function kC(e,t){Sm(e,"object",1,t),t&&(Dm(e,t,["source"]),Im(e,0,"source",t.source,["default","server","cache"]))}function IC(e,t,n){if(t instanceof uC){if(t.firestore!==n)throw new hm(lm.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw Rm(e,"DocumentReference",1,t)}var xC=pm(nC,"Use firebase.firestore() instead."),NC=pm(iC,"Use firebase.firestore().runTransaction() instead."),AC=pm(aC,"Use firebase.firestore().batch() instead."),OC=pm(uC,"Use firebase.firestore().doc() instead."),DC=pm(fC),RC=pm(mC),PC=pm(gC),MC=pm(bC),LC=pm(EC,"Use firebase.firestore().collection() instead."),FC={Firestore:xC,GeoPoint:dE,Timestamp:Cy,Blob:Hm,Transaction:NC,WriteBatch:AC,DocumentReference:OC,DocumentSnapshot:DC,Query:PC,QueryDocumentSnapshot:RC,QuerySnapshot:MC,CollectionReference:LC,FieldPath:iS,FieldValue:PS,setLogLevel:nC.setLogLevel,CACHE_SIZE_UNLIMITED:ZS},UC=(jC.prototype.addCallback=function(e){},jC.prototype.shutdown=function(){},jC);function jC(){}var qC="ConnectivityMonitor",BC=(VC.prototype.addCallback=function(e){this.callbacks.push(e)},VC.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},VC.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},VC.prototype.onNetworkAvailable=function(){tm(qC,"Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(0)},VC.prototype.onNetworkUnavailable=function(){tm(qC,"Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(1)},VC.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},VC);function VC(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}var WC=(zC.prototype.onOpen=function(e){om(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},zC.prototype.onClose=function(e){om(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},zC.prototype.onMessage=function(e){om(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},zC.prototype.close=function(){this.closeFn()},zC.prototype.send=function(e){this.sendFn(e)},zC.prototype.callOnOpen=function(){om(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},zC.prototype.callOnClose=function(e){om(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},zC.prototype.callOnMessage=function(e){om(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},zC);function zC(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}var HC="Connection",KC={BatchGetDocuments:"batchGet",Commit:"commit"},QC="gl-js/ fire/"+$d,GC=(YC.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=QC},YC.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise(function(o,a){var s=new Xd;s.listenOnce(Gd.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Qd.NO_ERROR:var t=s.getResponseJson();tm(HC,"XHR received:",JSON.stringify(t)),o(t);break;case Qd.TIMEOUT:tm(HC,'RPC "'+e+'" timed out'),a(new hm(lm.DEADLINE_EXCEEDED,"Request time out"));break;case Qd.HTTP_ERROR:var n=s.getStatus();if(tm(HC,'RPC "'+e+'" failed with status:',n,"response text:",s.getResponseText()),0<n){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var i=function(e){var t=e.toLowerCase().replace("_","-");return 0<=Object.values(lm).indexOf(t)?t:lm.UNKNOWN}(r.status);a(new hm(i,r.message))}else a(new hm(lm.UNKNOWN,"Server responded with status "+s.getStatus()))}else tm(HC,'RPC "'+e+'" failed'),a(new hm(lm.UNAVAILABLE,"Connection failed."));break;default:im('RPC "'+e+'" failed with unanticipated webchannel error '+s.getLastErrorCode()+": "+s.getLastError()+", giving up.")}}finally{tm(HC,'RPC "'+e+'" completed.')}});var u=JSON.stringify(t);tm(HC,"XHR sending: ",i+" "+u);var c={"Content-Type":"text/plain"};r.modifyHeadersForRequest(c,n),s.send(i,"POST",u,c,15)})},YC.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},YC.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=Kd(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,t),Ji()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");function a(e,t){s.listen(e,function(e){try{t(e)}catch(e){setTimeout(function(){throw e},0)}})}tm(HC,"Creating WebChannel: "+o+" "+i);var s=r.createWebChannel(o,i),u=!1,c=!1,l=new WC({sendFn:function(e){c?tm(HC,"Not sending because WebChannel is closed:",e):(u||(tm(HC,"Opening WebChannel transport."),s.open(),u=!0),tm(HC,"WebChannel sending:",e),s.send(e))},closeFn:function(){return s.close()}});return a(Yd.EventType.OPEN,function(){c||tm(HC,"WebChannel transport opened.")}),a(Yd.EventType.CLOSE,function(){c||(c=!0,tm(HC,"WebChannel transport closed"),l.callOnClose())}),a(Yd.EventType.ERROR,function(e){c||(c=!0,tm(HC,"WebChannel transport errored:",e),l.callOnClose(new hm(lm.UNAVAILABLE,"The operation could not be completed")))}),a(Yd.EventType.MESSAGE,function(e){if(!c){var t=e.data[0];om(!!t,"Got a webchannel message without data.");var n=t,r=n.error||n[0]&&n[0].error;if(r){tm(HC,"WebChannel received error:",r);var i=r.status,o=function(e){var t=P_[e];if(void 0!==t)return j_(t)}(i),a=r.message;void 0===o&&(o=lm.INTERNAL,a="Unknown error status: "+i+" with message "+r.message),c=!0,l.callOnClose(new hm(o,a)),s.close()}else tm(HC,"WebChannel received:",t),l.callOnMessage(t)}}),setTimeout(function(){l.callOnOpen()},0),l},YC.prototype.makeUrl=function(e){var t=KC[e];om(void 0!==t,"Unknown REST mapping for: "+e);var n=[this.baseUrl,"/","v1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(t),n.join("")},YC);function YC(e){this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host,this.forceLongPolling=e.forceLongPolling}var XC=(Object.defineProperty($C.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty($C.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),$C.prototype.loadConnection=function(e){return Promise.resolve(new GC(e))},$C.prototype.newConnectivityMonitor=function(){return BC.isAvailable()?new BC:new UC},$C.prototype.newSerializer=function(e){return new lT(e,{useProto3Json:!0})},$C.prototype.formatJSON=function(e){return JSON.stringify(e)},$C.prototype.atob=function(e){return atob(e)},$C.prototype.btoa=function(e){return btoa(e)},$C);function $C(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}am.setPlatform(new XC),function(e){e.INTERNAL.registerService("firestore",function(e){return new nC(e)},function(e){om(e&&"object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(FC))}(Vo);var JC,ZC={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ek=(Ri(tk,JC=Error),tk);function tk(e,t,n){var r=JC.call(this,t)||this;return Object.setPrototypeOf(r,tk.prototype),r.code=e,r.details=n,r}var nk=(rk.prototype.getAuthToken=function(){return Mi(this,void 0,void 0,function(){var e;return Li(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.app.INTERNAL.getToken()];case 1:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 2:return t.sent(),[2,void 0];case 3:return[2]}})})},rk.prototype.getInstanceIdToken=function(){return Mi(this,void 0,void 0,function(){var e;return Li(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.app.messaging?[4,this.app.messaging().getToken()]:[2,void 0];case 1:return(e=t.sent())?[2,e]:[2,void 0];case 2:return t.sent(),[2,void 0];case 3:return[2]}})})},rk.prototype.getContext=function(){return Mi(this,void 0,void 0,function(){var e,t;return Li(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}})})},rk);function rk(e){this.app=e}function ik(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var ok=(ak.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(Array.isArray(e))return e.map(function(e){return t.encode(e)});if("function"==typeof e||"object"==typeof e)return ik(e,function(e){return t.encode(e)});throw new Error("Data cannot be encoded in JSON: "+e)},ak.prototype.decode=function(e){var t=this;if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(e.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(function(e){return t.decode(e)}):"function"==typeof e||"object"==typeof e?ik(e,function(e){return t.decode(e)}):e},ak);function ak(){}var sk,uk,ck=(Object.defineProperty(lk.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),lk.prototype._url=function(e){var t=this.app_.options.projectId,n=this.region_;return null===this.emulatorOrigin?"https://"+n+"-"+t+".cloudfunctions.net/"+e:this.emulatorOrigin+"/"+t+"/"+n+"/"+e},lk.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},lk.prototype.httpsCallable=function(e,t){var n=this;return function(r){return n.call(e,r,t||{})}},lk.prototype.postJSON=function(e,t,n){return Mi(this,void 0,void 0,function(){var r,i;return Li(this,function(o){switch(o.label){case 0:n.append("Content-Type","application/json"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}})})},lk.prototype.call=function(e,t,n){return Mi(this,void 0,void 0,function(){var r,i,o,a,s,u,c,l;return Li(this,function(h){switch(h.label){case 0:return r=this._url(e),t=this.serializer.encode(t),i={data:t},o=new Headers,[4,this.contextProvider.getContext()];case 1:return(a=h.sent()).authToken&&o.append("Authorization","Bearer "+a.authToken),a.instanceIdToken&&o.append("Firebase-Instance-ID-Token",a.instanceIdToken),s=n.timeout||7e4,[4,Promise.race([this.postJSON(r,i,o),function(e){return new Promise(function(t,n){setTimeout(function(){n(new ek("deadline-exceeded","deadline-exceeded"))},e)})}(s),this.cancelAllRequests])];case 2:if(!(u=h.sent()))throw new ek("cancelled","Firebase Functions instance was deleted.");if(c=function(e,t,n){var r=function(e){if(200<=e&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r,o=void 0;try{var a=t&&t.error;if(a){var s=a.status;if("string"==typeof s){if(!ZC[s])return new ek("internal","internal");r=ZC[s],i=s}var u=a.message;"string"==typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(e){}return"ok"===r?null:new ek(r,i,o)}(u.status,u.json,this.serializer))throw c;if(!u.json)throw new ek("internal","Response is not valid JSON object.");if(void 0===(l=u.json.data)&&(l=u.json.result),void 0===l)throw new ek("internal","Response is missing data field.");return[2,{data:this.serializer.decode(l)}]}})})},lk);function lk(e,t){var n=this;void 0===t&&(t="us-central1"),this.app_=e,this.region_=t,this.serializer=new ok,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return n.deleteService()}},this.contextProvider=new nk(e),this.cancelAllRequests=new Promise(function(e){n.deleteService=function(){return e()}})}sk={Functions:ck},Vo.INTERNAL.registerService("functions",function(e,t,n){return new ck(e,n)},sk,void 0,!0);var hk,fk,pk,dk,mk=((uk={})["only-available-in-window"]="This method is available in a Window context.",uk["only-available-in-sw"]="This method is available in a service worker context.",uk["should-be-overriden"]="This method should be overriden by extended classes.",uk["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",uk["permission-default"]="The required permissions were not granted and dismissed instead.",uk["permission-blocked"]="The required permissions were not granted and blocked instead.",uk["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",uk["notifications-blocked"]="Notifications have been blocked.",uk["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",uk["sw-registration-expected"]="A service worker registration was the expected input.",uk["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",uk["invalid-saved-token"]="Unable to access details of the saved token.",uk["sw-reg-redundant"]="The service worker being used for push was made redundant.",uk["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",uk["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",uk["token-subscribe-no-push-set"]="FCM returned an invalid response when getting an FCM token.",uk["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",uk["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",uk["token-update-no-token"]="FCM returned no token when updating the user to push.",uk["use-sw-before-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",uk["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",uk["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",uk["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",uk["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",uk["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",uk["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$errorInfo}",uk["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",uk["failed-to-delete-token"]="Unable to delete the currently saved token.",uk["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",uk["bad-scope"]="The service worker scope must be a string with at least one character.",uk["bad-vapid-key"]="The public VAPID key is not a Uint8Array with 65 bytes.",uk["bad-subscription"]="The subscription must be a valid PushSubscription.",uk["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",uk["bad-push-set"]="The FCM push set used for storage / lookup was not not a valid push set string.",uk["failed-delete-vapid-key"]="The VAPID key could not be deleted.",uk["invalid-public-vapid-key"]="The public VAPID key must be a string.",uk["use-public-key-before-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",uk["public-vapid-key-decryption-failed"]="The public VAPID key did not equal 65 bytes when decrypted.",uk),yk=new ro("messaging","Messaging",mk),gk=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),vk="https://fcm.googleapis.com";function bk(e,t){if(null==e||null==t)return!1;if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),r=new DataView(t),i=0;i<e.byteLength;i++)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}function wk(e){return function(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,ji(t)))}(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(fk=hk=hk||{}).TYPE_OF_MSG="firebase-messaging-msg-type",fk.DATA="firebase-messaging-msg-data",(dk=pk=pk||{}).PUSH_MSG_RECEIVED="push-msg-received",dk.NOTIFICATION_CLICKED="notification-clicked";var _k=(Ek.prototype.getToken=function(e,t,n){return Mi(this,void 0,void 0,function(){var r,i,o,a,s,u,c,l,h;return Li(this,function(f){switch(f.label){case 0:r=wk(t.getKey("p256dh")),i=wk(t.getKey("auth")),o="authorized_entity="+e+"&endpoint="+t.endpoint+"&encryption_key="+r+"&encryption_auth="+i,bk(n.buffer,gk.buffer)||(a=wk(n),o+="&application_pub_key="+a),(s=new Headers).append("Content-Type","application/x-www-form-urlencoded"),u={method:"POST",headers:s,body:o},f.label=1;case 1:return f.trys.push([1,4,,5]),[4,fetch(vk+"/fcm/connect/subscribe",u)];case 2:return[4,f.sent().json()];case 3:return c=f.sent(),[3,5];case 4:throw l=f.sent(),yk.create("token-subscribe-failed",{errorInfo:l});case 5:if(c.error)throw h=c.error.message,yk.create("token-subscribe-failed",{errorInfo:h});if(!c.token)throw yk.create("token-subscribe-no-token");if(!c.pushSet)throw yk.create("token-subscribe-no-push-set");return[2,{token:c.token,pushSet:c.pushSet}]}})})},Ek.prototype.updateToken=function(e,t,n,r,i){return Mi(this,void 0,void 0,function(){var o,a,s,u,c,l,h,f,p;return Li(this,function(d){switch(d.label){case 0:o=wk(r.getKey("p256dh")),a=wk(r.getKey("auth")),s="push_set="+n+"&token="+t+"&authorized_entity="+e+"&endpoint="+r.endpoint+"&encryption_key="+o+"&encryption_auth="+a,bk(i.buffer,gk.buffer)||(u=wk(i),s+="&application_pub_key="+u),(c=new Headers).append("Content-Type","application/x-www-form-urlencoded"),l={method:"POST",headers:c,body:s},d.label=1;case 1:return d.trys.push([1,4,,5]),[4,fetch(vk+"/fcm/connect/subscribe",l)];case 2:return[4,d.sent().json()];case 3:return h=d.sent(),[3,5];case 4:throw f=d.sent(),yk.create("token-update-failed",{errorInfo:f});case 5:if(h.error)throw p=h.error.message,yk.create("token-update-failed",{errorInfo:p});if(!h.token)throw yk.create("token-update-no-token");return[2,h.token]}})})},Ek.prototype.deleteToken=function(e,t,n){return Mi(this,void 0,void 0,function(){var r,i,o,a,s,u;return Li(this,function(c){switch(c.label){case 0:r="authorized_entity="+e+"&token="+t+"&pushSet="+n,(i=new Headers).append("Content-Type","application/x-www-form-urlencoded"),o={method:"POST",headers:i,body:r},c.label=1;case 1:return c.trys.push([1,4,,5]),[4,fetch(vk+"/fcm/connect/unsubscribe",o)];case 2:return[4,c.sent().json()];case 3:if((a=c.sent()).error)throw s=a.error.message,yk.create("token-unsubscribe-failed",{errorInfo:s});return[3,5];case 4:throw u=c.sent(),yk.create("token-unsubscribe-failed",{errorInfo:u});case 5:return[2]}})})},Ek);function Ek(){}function Tk(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var Sk="undefined",Ck="fcm_token_object_Store",kk=(Ik.prototype.get=function(e){return this.createTransaction(function(t){return t.get(e)})},Ik.prototype.getIndex=function(e,t){return this.createTransaction(function(n){return n.index(e).get(t)})},Ik.prototype.put=function(e){return this.createTransaction(function(t){return t.put(e)},"readwrite")},Ik.prototype.delete=function(e){return this.createTransaction(function(t){return t.delete(e)},"readwrite")},Ik.prototype.closeDatabase=function(){return Mi(this,void 0,void 0,function(){return Li(this,function(e){switch(e.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:e.sent().close(),this.dbPromise=null,e.label=2;case 2:return[2]}})})},Ik.prototype.createTransaction=function(e,t){return void 0===t&&(t="readonly"),Mi(this,void 0,void 0,function(){var n,r,i,o;return Li(this,function(a){switch(a.label){case 0:return[4,this.getDb()];case 1:return n=a.sent(),r=n.transaction(this.objectStoreName,t),i=r.objectStore(this.objectStoreName),[4,function(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}(e(i))];case 2:return o=a.sent(),[2,new Promise(function(e,t){r.oncomplete=function(){e(o)},r.onerror=function(){t(r.error)}})]}})})},Ik.prototype.getDb=function(){var e=this;return this.dbPromise||(this.dbPromise=new Promise(function(t,n){var r=indexedDB.open(e.dbName,e.dbVersion);r.onsuccess=function(){t(r.result)},r.onerror=function(){e.dbPromise=null,n(r.error)},r.onupgradeneeded=function(t){return e.onDbUpgrade(r,t)}})),this.dbPromise},Ik);function Ik(){this.dbPromise=null}var xk,Nk=(Ri(Ak,xk=kk),Ak.prototype.onDbUpgrade=function(e,t){var n=e.result;switch(t.oldVersion){case 0:(r=n.createObjectStore(this.objectStoreName,{keyPath:"swScope"})).createIndex("fcmSenderId","fcmSenderId",{unique:!1}),r.createIndex("fcmToken","fcmToken",{unique:!0});case 1:!function(){var e=indexedDB.open(Sk);e.onerror=function(e){},e.onsuccess=function(t){!function(e){if(e.objectStoreNames.contains(Ck)){var t=e.transaction(Ck).objectStore(Ck),n=new _k,r=t.openCursor();r.onerror=function(e){console.warn("Unable to cleanup old IDB.",e)},r.onsuccess=function(){var t=r.result;if(t){var i=t.value;n.deleteToken(i.fcmSenderId,i.fcmToken,i.fcmPushSet),t.continue()}else e.close(),indexedDB.deleteDatabase(Sk)}}}(e.result)}}();case 2:var r,i=(r=e.transaction.objectStore(this.objectStoreName)).openCursor();i.onsuccess=function(){var e=i.result;if(e){var t=e.value,n=Pi({},t);t.createTime||(n.createTime=Date.now()),"string"==typeof t.vapidKey&&(n.vapidKey=Tk(t.vapidKey)),"string"==typeof t.auth&&(n.auth=Tk(t.auth).buffer),"string"==typeof t.auth&&(n.p256dh=Tk(t.p256dh).buffer),e.update(n),e.continue()}}}},Ak.prototype.getTokenDetailsFromToken=function(e){return Mi(this,void 0,void 0,function(){return Li(this,function(t){if(!e)throw yk.create("bad-token");return Ok({fcmToken:e}),[2,this.getIndex("fcmToken",e)]})})},Ak.prototype.getTokenDetailsFromSWScope=function(e){return Mi(this,void 0,void 0,function(){return Li(this,function(t){if(!e)throw yk.create("bad-scope");return Ok({swScope:e}),[2,this.get(e)]})})},Ak.prototype.saveTokenDetails=function(e){return Mi(this,void 0,void 0,function(){return Li(this,function(t){if(!e.swScope)throw yk.create("bad-scope");if(!e.vapidKey)throw yk.create("bad-vapid-key");if(!e.endpoint||!e.auth||!e.p256dh)throw yk.create("bad-subscription");if(!e.fcmSenderId)throw yk.create("bad-sender-id");if(!e.fcmToken)throw yk.create("bad-token");if(!e.fcmPushSet)throw yk.create("bad-push-set");return Ok(e),[2,this.put(e)]})})},Ak.prototype.deleteToken=function(e){return Mi(this,void 0,void 0,function(){var t;return Li(this,function(n){switch(n.label){case 0:return"string"!=typeof e||0===e.length?[2,Promise.reject(yk.create("invalid-delete-token"))]:[4,this.getTokenDetailsFromToken(e)];case 1:if(!(t=n.sent()))throw yk.create("delete-token-not-found");return[4,this.delete(t.swScope)];case 2:return n.sent(),[2,t]}})})},Ak);function Ak(){var e=null!==xk&&xk.apply(this,arguments)||this;return e.dbName="fcm_token_details_db",e.dbVersion=3,e.objectStoreName="fcm_token_object_Store",e}function Ok(e){if(e.fcmToken&&("string"!=typeof e.fcmToken||0===e.fcmToken.length))throw yk.create("bad-token");if(e.swScope&&("string"!=typeof e.swScope||0===e.swScope.length))throw yk.create("bad-scope");if(e.vapidKey&&(!(e.vapidKey instanceof Uint8Array)||65!==e.vapidKey.length))throw yk.create("bad-vapid-key");if(e.endpoint&&("string"!=typeof e.endpoint||0===e.endpoint.length))throw yk.create("bad-subscription");if(e.auth&&!(e.auth instanceof ArrayBuffer))throw yk.create("bad-subscription");if(e.p256dh&&!(e.p256dh instanceof ArrayBuffer))throw yk.create("bad-subscription");if(e.fcmSenderId&&("string"!=typeof e.fcmSenderId||0===e.fcmSenderId.length))throw yk.create("bad-sender-id");if(e.fcmPushSet&&("string"!=typeof e.fcmPushSet||0===e.fcmPushSet.length))throw yk.create("bad-push-set")}var Dk,Rk=(Ri(Pk,Dk=kk),Pk.prototype.onDbUpgrade=function(e){e.result.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},Pk.prototype.getVapidFromSWScope=function(e){return Mi(this,void 0,void 0,function(){var t;return Li(this,function(n){switch(n.label){case 0:if("string"!=typeof e||0===e.length)throw yk.create("bad-scope");return[4,this.get(e)];case 1:return[2,(t=n.sent())?t.vapidKey:void 0]}})})},Pk.prototype.saveVapidDetails=function(e,t){return Mi(this,void 0,void 0,function(){var n;return Li(this,function(r){if("string"!=typeof e||0===e.length)throw yk.create("bad-scope");if(null===t||65!==t.length)throw yk.create("bad-vapid-key");return n={swScope:e,vapidKey:t},[2,this.put(n)]})})},Pk.prototype.deleteVapidDetails=function(e){return Mi(this,void 0,void 0,function(){var t;return Li(this,function(n){switch(n.label){case 0:return[4,this.getVapidFromSWScope(e)];case 1:if(!(t=n.sent()))throw yk.create("delete-scope-not-found");return[4,this.delete(e)];case 2:return n.sent(),[2,t]}})})},Pk);function Pk(){var e=null!==Dk&&Dk.apply(this,arguments)||this;return e.dbName="fcm_vapid_details_db",e.dbVersion=1,e.objectStoreName="fcm_vapid_object_Store",e}var Mk="messagingSenderId",Lk=(Fk.prototype.getToken=function(){return Mi(this,void 0,void 0,function(){var e,t,n,r,i;return Li(this,function(o){switch(o.label){case 0:if("denied"===(e=this.getNotificationPermission_()))throw yk.create("notifications-blocked");return"granted"!==e?[2,null]:[4,this.getSWRegistration_()];case 1:return t=o.sent(),[4,this.getPublicVapidKey_()];case 2:return n=o.sent(),[4,this.getPushSubscription(t,n)];case 3:return r=o.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(t.scope)];case 4:return(i=o.sent())?[2,this.manageExistingToken(t,r,n,i)]:[2,this.getNewToken(t,r,n)]}})})},Fk.prototype.manageExistingToken=function(e,t,n,r){return Mi(this,void 0,void 0,function(){return Li(this,function(i){switch(i.label){case 0:return function(e,t,n){if(!n.vapidKey||!bk(t.buffer,n.vapidKey.buffer))return!1;var r=e.endpoint===n.endpoint,i=bk(e.getKey("auth"),n.auth),o=bk(e.getKey("p256dh"),n.p256dh);return r&&i&&o}(t,n,r)?Date.now()<r.createTime+6048e5?[2,r.fcmToken]:[2,this.updateToken(e,t,n,r)]:[4,this.deleteTokenFromDB(r.fcmToken)];case 1:return i.sent(),[2,this.getNewToken(e,t,n)]}})})},Fk.prototype.updateToken=function(e,t,n,r){return Mi(this,void 0,void 0,function(){var i,o,a;return Li(this,function(s){switch(s.label){case 0:return s.trys.push([0,4,,6]),[4,this.iidModel.updateToken(this.messagingSenderId,r.fcmToken,r.fcmPushSet,t,n)];case 1:return i=s.sent(),o={swScope:e.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:i,fcmPushSet:r.fcmPushSet,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(o)];case 2:return s.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return s.sent(),[2,i];case 4:return a=s.sent(),[4,this.deleteToken(r.fcmToken)];case 5:throw s.sent(),a;case 6:return[2]}})})},Fk.prototype.getNewToken=function(e,t,n){return Mi(this,void 0,void 0,function(){var r,i;return Li(this,function(o){switch(o.label){case 0:return[4,this.iidModel.getToken(this.messagingSenderId,t,n)];case 1:return r=o.sent(),i={swScope:e.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:r.token,fcmPushSet:r.pushSet,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(i)];case 2:return o.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return o.sent(),[2,r.token]}})})},Fk.prototype.deleteToken=function(e){return Mi(this,void 0,void 0,function(){var t,n;return Li(this,function(r){switch(r.label){case 0:return[4,this.deleteTokenFromDB(e)];case 1:return r.sent(),[4,this.getSWRegistration_()];case 2:return(t=r.sent())?[4,t.pushManager.getSubscription()]:[3,4];case 3:if(n=r.sent())return[2,n.unsubscribe()];r.label=4;case 4:return[2,!0]}})})},Fk.prototype.deleteTokenFromDB=function(e){return Mi(this,void 0,void 0,function(){var t;return Li(this,function(n){switch(n.label){case 0:return[4,this.tokenDetailsModel.deleteToken(e)];case 1:return t=n.sent(),[4,this.iidModel.deleteToken(t.fcmSenderId,t.fcmToken,t.fcmPushSet)];case 2:return n.sent(),[2]}})})},Fk.prototype.getPushSubscription=function(e,t){return e.pushManager.getSubscription().then(function(n){return n||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t})})},Fk.prototype.requestPermission=function(){throw yk.create("only-available-in-window")},Fk.prototype.useServiceWorker=function(e){throw yk.create("only-available-in-window")},Fk.prototype.usePublicVapidKey=function(e){throw yk.create("only-available-in-window")},Fk.prototype.onMessage=function(e,t,n){throw yk.create("only-available-in-window")},Fk.prototype.onTokenRefresh=function(e,t,n){throw yk.create("only-available-in-window")},Fk.prototype.setBackgroundMessageHandler=function(e){throw yk.create("only-available-in-sw")},Fk.prototype.delete=function(){return Mi(this,void 0,void 0,function(){return Li(this,function(e){switch(e.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return e.sent(),[2]}})})},Fk.prototype.getNotificationPermission_=function(){return Notification.permission},Fk.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},Fk.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},Fk.prototype.getIidModel=function(){return this.iidModel},Fk);function Fk(e){var t=this;if(!e.options[Mk]||"string"!=typeof e.options[Mk])throw yk.create("bad-sender-id");this.messagingSenderId=e.options[Mk],this.tokenDetailsModel=new Nk,this.vapidDetailsModel=new Rk,this.iidModel=new _k,this.app=e,this.INTERNAL={delete:function(){return t.delete()}}}var Uk,jk="FCM_MSG",qk=(Ri(Bk,Uk=Lk),Bk.prototype.onPush=function(e){e.waitUntil(this.onPush_(e))},Bk.prototype.onSubChange=function(e){e.waitUntil(this.onSubChange_(e))},Bk.prototype.onNotificationClick=function(e){e.waitUntil(this.onNotificationClick_(e))},Bk.prototype.onPush_=function(e){return Mi(this,void 0,void 0,function(){var t,n,r,i,o,a;return Li(this,function(s){switch(s.label){case 0:if(!e.data)return[2];try{t=e.data.json()}catch(s){return[2]}return[4,this.hasVisibleClients_()];case 1:return s.sent()?[2,this.sendMessageToWindowClients_(t)]:(n=this.getNotificationData_(t))?(r=n.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return i=s.sent(),o=n.actions,a=Notification.maxActions,o&&a&&o.length>a&&console.warn("This browser only supports "+a+" actions.The remaining actions will not be displayed."),[2,i.showNotification(r,n)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(t)]:[3,5];case 4:return s.sent(),[2];case 5:return[2]}})})},Bk.prototype.onSubChange_=function(e){return Mi(this,void 0,void 0,function(){var e,t,n,r;return Li(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return e=i.sent(),[3,3];case 2:throw t=i.sent(),yk.create("unable-to-resubscribe",{errorInfo:t});case 3:return i.trys.push([3,5,,8]),[4,e.pushManager.getSubscription()];case 4:return i.sent(),[3,8];case 5:return n=i.sent(),[4,this.getTokenDetailsModel().getTokenDetailsFromSWScope(e.scope)];case 6:if(!(r=i.sent()))throw n;return[4,this.deleteToken(r.fcmToken)];case 7:throw i.sent(),n;case 8:return[2]}})})},Bk.prototype.onNotificationClick_=function(e){return Mi(this,void 0,void 0,function(){var t,n,r,i;return Li(this,function(o){switch(o.label){case 0:return e.notification&&e.notification.data&&e.notification.data[jk]?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),(t=e.notification.data[jk]).notification&&(n=t.fcmOptions&&t.fcmOptions.link||t.notification.click_action)?[4,this.getWindowClient_(n)]:[2]):[2];case 1:return(r=o.sent())?[3,3]:[4,self.clients.openWindow(n)];case 2:return r=o.sent(),[3,5];case 3:return[4,r.focus()];case 4:r=o.sent(),o.label=5;case 5:return r?(delete t.notification,delete t.fcmOptions,i=Wk(pk.NOTIFICATION_CLICKED,t),[2,this.attemptToMessageClient_(r,i)]):[2]}})})},Bk.prototype.getNotificationData_=function(e){var t;if(e&&"object"==typeof e.notification){var n=Pi({},e.notification);return n.data=Pi({},e.notification.data,((t={})[jk]=e,t)),n}},Bk.prototype.setBackgroundMessageHandler=function(e){if(!e||"function"!=typeof e)throw yk.create("bg-handler-function-expected");this.bgMessageHandler=e},Bk.prototype.getWindowClient_=function(e){return Mi(this,void 0,void 0,function(){var t,n,r,i;return Li(this,function(o){switch(o.label){case 0:return t=new URL(e,self.location.href).href,[4,Vk()];case 1:for(n=o.sent(),r=null,i=0;i<n.length;i++)if(new URL(n[i].url,self.location.href).href===t){r=n[i];break}return[2,r]}})})},Bk.prototype.attemptToMessageClient_=function(e,t){return Mi(this,void 0,void 0,function(){return Li(this,function(n){if(!e)throw yk.create("no-window-client-to-msg");return e.postMessage(t),[2]})})},Bk.prototype.hasVisibleClients_=function(){return Mi(this,void 0,void 0,function(){return Li(this,function(e){switch(e.label){case 0:return[4,Vk()];case 1:return[2,e.sent().some(function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")})]}})})},Bk.prototype.sendMessageToWindowClients_=function(e){return Mi(this,void 0,void 0,function(){var t,n,r=this;return Li(this,function(i){switch(i.label){case 0:return[4,Vk()];case 1:return t=i.sent(),n=Wk(pk.PUSH_MSG_RECEIVED,e),[4,Promise.all(t.map(function(e){return r.attemptToMessageClient_(e,n)}))];case 2:return i.sent(),[2]}})})},Bk.prototype.getSWRegistration_=function(){return Mi(this,void 0,void 0,function(){return Li(this,function(e){return[2,self.registration]})})},Bk.prototype.getPublicVapidKey_=function(){return Mi(this,void 0,void 0,function(){var e,t;return Li(this,function(n){switch(n.label){case 0:return[4,this.getSWRegistration_()];case 1:if(!(e=n.sent()))throw yk.create("sw-registration-expected");return[4,this.getVapidDetailsModel().getVapidFromSWScope(e.scope)];case 2:return null==(t=n.sent())?[2,gk]:[2,t]}})})},Bk);function Bk(e){var t=Uk.call(this,e)||this;return t.bgMessageHandler=null,self.addEventListener("push",function(e){t.onPush(e)}),self.addEventListener("pushsubscriptionchange",function(e){t.onSubChange(e)}),self.addEventListener("notificationclick",function(e){t.onNotificationClick(e)}),t}function Vk(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Wk(e,t){var n;return(n={})[hk.TYPE_OF_MSG]=e,n[hk.DATA]=t,n}var zk,Hk,Kk=(Ri(Qk,zk=Lk),Qk.prototype.requestPermission=function(){return Mi(this,void 0,void 0,function(){var e;return Li(this,function(t){switch(t.label){case 0:return"granted"===this.getNotificationPermission_()?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?yk.create("permission-blocked"):yk.create("permission-default")}})})},Qk.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw yk.create("sw-registration-expected");if(null!=this.registrationToUse)throw yk.create("use-sw-before-get-token");this.registrationToUse=e},Qk.prototype.usePublicVapidKey=function(e){if("string"!=typeof e)throw yk.create("invalid-public-vapid-key");if(null!=this.publicVapidKeyToUse)throw yk.create("use-public-key-before-get-token");var t=Tk(e);if(65!==t.length)throw yk.create("public-vapid-key-decryption-failed");this.publicVapidKeyToUse=t},Qk.prototype.onMessage=function(e,t,n){return"function"==typeof e?this.onMessageInternal(e,t,n):this.onMessageInternal(e)},Qk.prototype.onTokenRefresh=function(e,t,n){return"function"==typeof e?this.onTokenRefreshInternal(e,t,n):this.onTokenRefreshInternal(e)},Qk.prototype.waitForRegistrationToActivate_=function(e){var t=e.installing||e.waiting||e.active;return new Promise(function(n,r){t?"activated"!==t.state?"redundant"!==t.state?t.addEventListener("statechange",function i(){if("activated"===t.state)n(e);else{if("redundant"!==t.state)return;r(yk.create("sw-reg-redundant"))}t.removeEventListener("statechange",i)}):r(yk.create("sw-reg-redundant")):n(e):r(yk.create("no-sw-in-reg"))})},Qk.prototype.getSWRegistration_=function(){var e=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch(function(e){throw yk.create("failed-serviceworker-registration",{browserErrorMessage:e.message})}).then(function(t){return e.waitForRegistrationToActivate_(t).then(function(){return(e.registrationToUse=t).update(),t})}))},Qk.prototype.getPublicVapidKey_=function(){return Mi(this,void 0,void 0,function(){return Li(this,function(e){return this.publicVapidKeyToUse?[2,this.publicVapidKeyToUse]:[2,gk]})})},Qk.prototype.setupSWMessageListener_=function(){var e=this;navigator.serviceWorker.addEventListener("message",function(t){if(t.data&&t.data[hk.TYPE_OF_MSG]){var n=t.data;switch(n[hk.TYPE_OF_MSG]){case pk.PUSH_MSG_RECEIVED:case pk.NOTIFICATION_CLICKED:var r=n[hk.DATA];e.messageObserver&&e.messageObserver.next(r)}}},!1)},Qk);function Qk(e){var t=zk.call(this,e)||this;return t.registrationToUse=null,t.publicVapidKeyToUse=null,t.messageObserver=null,t.tokenRefreshObserver=null,t.onMessageInternal=yo(function(e){t.messageObserver=e}),t.onTokenRefreshInternal=yo(function(e){t.tokenRefreshObserver=e}),t.setupSWMessageListener_(),t}function Gk(){return self&&"ServiceWorkerGlobalScope"in self?"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Hk={isSupported:Gk},Vo.INTERNAL.registerService("messaging",function(e){if(!Gk())throw yk.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new qk(e):new Kk(e)},Hk);var Yk="firebasestorage.googleapis.com",Xk="storageBucket",$k=(Jk.prototype.codeProp=function(){return this.code},Jk.prototype.codeEquals=function(e){return eI(e)===this.codeProp()},Jk.prototype.serverResponseProp=function(){return this.serverResponse_},Jk.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(Jk.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(Jk.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(Jk.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(Jk.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),Jk);function Jk(e,t){this.code_=eI(e),this.message_="Firebase Storage: "+t,this.serverResponse_=null,this.name_="FirebaseError"}var Zk={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function eI(e){return"storage/"+e}function tI(){return new $k(Zk.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function nI(){return new $k(Zk.CANCELED,"User canceled the upload/download.")}function rI(){return new $k(Zk.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function iI(e,t,n){return new $k(Zk.INVALID_ARGUMENT,"Invalid argument in `"+t+"` at index "+e+": "+n)}function oI(){return new $k(Zk.APP_DELETED,"The Firebase app was deleted.")}function aI(e,t){return new $k(Zk.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function sI(e){throw new $k(Zk.INTERNAL_ERROR,"Internal error: "+e)}var uI={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function cI(e){switch(e){case uI.RAW:case uI.BASE64:case uI.BASE64URL:case uI.DATA_URL:return;default:throw"Expected one of the event types: ["+uI.RAW+", "+uI.BASE64+", "+uI.BASE64URL+", "+uI.DATA_URL+"]."}}var lI=function(e,t){this.data=e,this.contentType=t||null};function hI(e,t){switch(e){case uI.RAW:return new lI(fI(t));case uI.BASE64:case uI.BASE64URL:return new lI(pI(e,t));case uI.DATA_URL:return new lI(function(e){var t=new yI(e);return t.base64?pI(uI.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(e){throw aI(uI.DATA_URL,"Malformed data URL.")}return fI(t)}(t.rest)}(t),function(e){return new yI(e).contentType}(t))}throw tI()}function fI(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?n<e.length-1&&56320==(64512&e.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function pI(e,t){switch(e){case uI.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw aI(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case uI.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw aI(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(t)}catch(t){throw aI(e,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var dI,mI,yI=function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw aI(uI.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=function(e,t){return e.length>=t.length&&e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)},gI={STATE_CHANGED:"state_changed"},vI="running",bI="pausing",wI="paused",_I="success",EI="canceling",TI="canceled",SI="error",CI={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function kI(e){switch(e){case vI:case bI:case EI:return CI.RUNNING;case wI:return CI.PAUSED;case _I:return CI.SUCCESS;case TI:return CI.CANCELED;case SI:default:return CI.ERROR}}function II(e){return null!=e}function xI(e){return void 0!==e}function NI(e){return"function"==typeof e}function AI(e){return"object"==typeof e}function OI(e){return"string"==typeof e||e instanceof String}function DI(e){return"number"==typeof e||e instanceof Number}function RI(e){return PI()&&e instanceof Blob}function PI(){return"undefined"!=typeof Blob}(mI=dI=dI||{})[mI.NO_ERROR=0]="NO_ERROR",mI[mI.NETWORK_ERROR=1]="NETWORK_ERROR",mI[mI.ABORT=2]="ABORT";var MI=(LI.prototype.send=function(e,t,n,r){if(this.sent_)throw sI("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),II(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return II(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},LI.prototype.getErrorCode=function(){if(!this.sent_)throw sI("cannot .getErrorCode() before sending");return this.errorCode_},LI.prototype.getStatus=function(){if(!this.sent_)throw sI("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},LI.prototype.getResponseText=function(){if(!this.sent_)throw sI("cannot .getResponseText() before sending");return this.xhr_.responseText},LI.prototype.abort=function(){this.xhr_.abort()},LI.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},LI.prototype.addUploadProgressListener=function(e){II(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},LI.prototype.removeUploadProgressListener=function(e){II(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},LI);function LI(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=dI.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=dI.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=dI.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var FI=(UI.prototype.createXhrIo=function(){return new MI},UI);function UI(){}var jI=(qI.prototype.size=function(){return this.size_},qI.prototype.type=function(){return this.type_},qI.prototype.slice=function(e,t){if(RI(this.data_)){var n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new qI(n)}return new qI(new Uint8Array(this.data_.buffer,e,t-e),!0)},qI.getBlob=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(PI()){var n=e.map(function(e){return e instanceof qI?e.data_:e});return new qI(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(PI())return new Blob(e);throw Error("This browser doesn't seem to support creating Blobs")}.apply(null,n))}var r=e.map(function(e){return OI(e)?hI(uI.RAW,e).data:e.data_}),i=0;r.forEach(function(e){i+=e.byteLength});var o=new Uint8Array(i),a=0;return r.forEach(function(e){for(var t=0;t<e.length;t++)o[a++]=e[t]}),new qI(o,!0)},qI.prototype.uploadData=function(){return this.data_},qI);function qI(e,t){var n=0,r="";RI(e)?(n=(this.data_=e).size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}var BI=(Object.defineProperty(VI.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(VI.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),VI.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},VI.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},VI.makeFromBucketSpec=function(e){var t;try{t=VI.makeFromUrl(e)}catch(t){return new VI(e,"")}if(""===t.path)return t;throw function(e){return new $k(Zk.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}(e)},VI.makeFromUrl=function(e){for(var t=null,n="([A-Za-z0-9.\\-_]+)",r=new RegExp("^gs://"+n+"(/(.*))?$","i"),i=Yk.replace(/[.]/g,"\\."),o=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+i+"/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(e){e.path_=decodeURIComponent(e.path)}}],a=0;a<o.length;a++){var s=o[a],u=s.regex.exec(e);if(u){var c=u[s.indices.bucket],l=u[s.indices.path];t=new VI(c,l=l||""),s.postModify(t);break}}if(null==t)throw function(e){return new $k(Zk.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return t},VI);function VI(e,t){this.bucket=e,this.path_=t}function WI(e){var t;try{t=JSON.parse(e)}catch(e){return null}return function(e){return AI(e)&&!Array.isArray(e)}(t)?t:null}function zI(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function HI(e){return"https://"+Yk+"/v0"+e}function KI(e){var t=encodeURIComponent,n="?";for(var r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n=n.slice(0,-1)}function QI(e,t){return t}var GI=function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||QI},YI=null;function XI(e,t,n){var r=WI(t);return null===r?null:function(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new BI(n,r);return t.makeStorageReference(i)}})}(r,e),r}(e,r,n)}function $I(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}function JI(e){if(!AI(e)||!e)throw"Expected Metadata object.";for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if("customMetadata"===t){if(!AI(n))throw"Expected object for 'customMetadata' mapping."}else if(AI(r=n)&&null!==r)throw"Mapping for '"+t+"' cannot be an object."}var r}var ZI="maxResults",ex=1e3,tx="pageToken",nx="prefixes",rx="items";function ix(e){if(!AI(e)||!e)throw"Expected ListOptions object.";for(var t in e)if(t===ZI){if(!DI(n=e[ZI])||!Number.isInteger(n)||e[ZI]<=0)throw"Expected maxResults to be a positive number.";if(1e3<e[ZI])throw"Expected maxResults to be less than or equal to "+ex+"."}else{if(t!==tx)throw"Unknown option: "+t;if(e[tx]&&!OI(e[tx]))throw"Expected pageToken to be string."}var n}var ox=function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function ax(e){if(!e)throw tI()}function sx(e,t){return function(n,r){var i=XI(e,r,t);return ax(null!==i),i}}function ux(e){return function(t,n){var r=function(e,t){var n=WI(t);return null===n?null:function(e,t){var n={prefixes:[],items:[],nextPageToken:t.nextPageToken},r=e.bucket();if(null===r)throw new $k(Zk.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Xk+"' property when initializing the app?");if(t[nx])for(var i=0,o=t[nx];i<o.length;i++){var a=o[i].replace(/\/$/,""),s=e.makeStorageReference(new BI(r,a));n.prefixes.push(s)}if(t[rx])for(var u=0,c=t[rx];u<c.length;u++){var l=c[u];s=e.makeStorageReference(new BI(r,l.name)),n.items.push(s)}return n}(e,n)}(e,n);return ax(null!==r),r}}function cx(e){return function(t,n){var r;return(r=401===t.getStatus()?new $k(Zk.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?function(e){return new $k(Zk.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(e.bucket):403===t.getStatus()?function(e){return new $k(Zk.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}(e.path):n).setServerResponseProp(n.serverResponseProp()),r}}function lx(e){var t=cx(e);return function(n,r){var i=t(n,r);return 404===n.getStatus()&&(i=function(e){return new $k(Zk.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}(e.path)),i.setServerResponseProp(r.serverResponseProp()),i}}function hx(e,t,n){var r=HI(t.fullServerUrl()),i=e.maxOperationRetryTime(),o=new ox(r,"GET",sx(e,n),i);return o.errorHandler=lx(t),o}function fx(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}var px=function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null};function dx(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){ax(!1)}return ax(!!n&&-1!==(t||["active"]).indexOf(n)),n}var mx=function(e,t,n){if(NI(e)||II(t)||II(n))this.next=e,this.error=t||null,this.complete=n||null;else{var r=e;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}},yx=function(e,t,n,r,i,o){this.bytesTransferred=e,this.totalBytes=t,this.state=n,this.metadata=r,this.task=i,this.ref=o};function gx(e,t,n){for(var r=t.length,i=t.length,o=0;o<t.length;o++)if(t[o].optional){r=o;break}if(!(r<=n.length&&n.length<=i))throw function(e,t,n,r){var i,o;return o=e===t?1===(i=e)?"argument":"arguments":(i="between "+e+" and "+t,"arguments"),new $k(Zk.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+n+"`: Expected "+i+" "+o+", received "+r+".")}(r,i,e,n.length);for(o=0;o<n.length;o++)try{t[o].validator(n[o])}catch(t){throw t instanceof Error?iI(o,e,t.message):iI(o,e,t)}}var vx=function(e,t){var n=this;this.validator=function(t){n.optional&&!xI(t)||e(t)},this.optional=!!t};function bx(e,t){function n(e){if(!OI(e))throw"Expected string."}var r;return r=e?function(e,t){return function(n){e(n),t(n)}}(n,e):n,new vx(r,t)}function wx(e){return new vx(JI,e)}function _x(){return new vx(function(e){if(!(DI(e)&&0<=e))throw"Expected a number 0 or greater."})}function Ex(e,t){return new vx(function(t){if(!(null===t||II(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)},t)}function Tx(e){return new vx(function(e){if(null!==e&&!NI(e))throw"Expected a Function."},e)}function Sx(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then(function(){return e.apply(void 0,t)})}}var Cx=(kx.prototype.makeProgressCallback_=function(){var e=this,t=this.transferred_;return function(n){return e.updateProgress_(t+n)}},kx.prototype.shouldDoResumable_=function(e){return 262144<e.size()},kx.prototype.start_=function(){this.state_===vI&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},kx.prototype.resolveToken_=function(e){var t=this;this.authWrapper_.getAuthToken().then(function(n){switch(t.state_){case vI:e(n);break;case EI:t.transition_(TI);break;case bI:t.transition_(wI)}})},kx.prototype.createResumable_=function(){var e=this;this.resolveToken_(function(t){var n=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a=fx(t,r,i),s={name:a.fullPath},u=HI(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=$I(a,n),h=e.maxUploadRetryTime(),f=new ox(u,"POST",function(e){var t;dx(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){ax(!1)}return ax(OI(t)),t},h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=cx(t),f}(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t);(e.request_=r).getPromise().then(function(t){e.request_=null,e.uploadUrl_=t,e.needToFetchStatus_=!1,e.completeTransitions_()},e.errorHandler_)})},kx.prototype.fetchStatus_=function(){var e=this,t=this.uploadUrl_;this.resolveToken_(function(n){var r=function(e,t,n,r){var i=e.maxUploadRetryTime(),o=new ox(n,"POST",function(e){var t=dx(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){ax(!1)}n||ax(!1);var i=Number(n);return ax(!isNaN(i)),new px(i,r.size(),"final"===t)},i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=cx(t),o}(e.authWrapper_,e.location_,t,e.blob_),i=e.authWrapper_.makeRequest(r,n);(e.request_=i).getPromise().then(function(t){t=t,e.request_=null,e.updateProgress_(t.current),e.needToFetchStatus_=!1,t.finalized&&(e.needToFetchMetadata_=!0),e.completeTransitions_()},e.errorHandler_)})},kx.prototype.continueUpload_=function(){var e=this,t=262144*this.chunkMultiplier_,n=new px(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_(function(i){var o;try{o=function(e,t,n,r,i,o,a,s){var u=new px(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new $k(Zk.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;0<i&&(l=Math.min(l,i));var h=u.current,f=h+l,p={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,f);if(null===d)throw rI();var m=t.maxUploadRetryTime(),y=new ox(n,"POST",function(e,n){var i,a=dx(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?sx(t,o)(e,n):null,new px(s,c,"final"===a,i)},m);return y.headers=p,y.body=d.uploadData(),y.progressCallback=s||null,y.errorHandler=cx(e),y}(e.location_,e.authWrapper_,r,e.blob_,t,e.mappings_,n,e.makeProgressCallback_())}catch(i){return e.error_=i,void e.transition_(SI)}var a=e.authWrapper_.makeRequest(o,i);(e.request_=a).getPromise().then(function(t){e.increaseMultiplier_(),e.request_=null,e.updateProgress_(t.current),t.finalized?(e.metadata_=t.metadata,e.transition_(_I)):e.completeTransitions_()},e.errorHandler_)})},kx.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},kx.prototype.fetchMetadata_=function(){var e=this;this.resolveToken_(function(t){var n=hx(e.authWrapper_,e.location_,e.mappings_),r=e.authWrapper_.makeRequest(n,t);(e.request_=r).getPromise().then(function(t){e.request_=null,e.metadata_=t,e.transition_(_I)},e.metadataErrorHandler_)})},kx.prototype.oneShotUpload_=function(){var e=this;this.resolveToken_(function(t){var n=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=fx(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+$I(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=jI.getBlob(c,r,l);if(null===h)throw rI();var f={name:u.fullPath},p=HI(o),d=e.maxUploadRetryTime(),m=new ox(p,"POST",sx(e,n),d);return m.urlParams=f,m.headers=a,m.body=h.uploadData(),m.errorHandler=cx(t),m}(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t);(e.request_=r).getPromise().then(function(t){e.request_=null,e.metadata_=t,e.updateProgress_(e.blob_.size()),e.transition_(_I)},e.errorHandler_)})},kx.prototype.updateProgress_=function(e){var t=this.transferred_;this.transferred_=e,this.transferred_!==t&&this.notifyObservers_()},kx.prototype.transition_=function(e){if(this.state_!==e)switch(e){case EI:case bI:this.state_=e,null!==this.request_&&this.request_.cancel();break;case vI:var t=this.state_===wI;this.state_=e,t&&(this.notifyObservers_(),this.start_());break;case wI:this.state_=e,this.notifyObservers_();break;case TI:this.error_=nI(),this.state_=e,this.notifyObservers_();break;case SI:case _I:this.state_=e,this.notifyObservers_()}},kx.prototype.completeTransitions_=function(){switch(this.state_){case bI:this.transition_(wI);break;case EI:this.transition_(TI);break;case vI:this.start_()}},Object.defineProperty(kx.prototype,"snapshot",{get:function(){var e=kI(this.state_);return new yx(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),kx.prototype.on=function(e,t,n,r){var i="Expected a function or an Object with one of `next`, `error`, `complete` properties.",o=Tx(!0).validator,a=Ex(null,!0).validator;function s(e){try{return void o(e)}catch(e){}try{if(a(e),!(xI(e.next)||xI(e.error)||xI(e.complete)))throw"";return}catch(e){throw i}}gx("on",[bx(function(){if(e!==gI.STATE_CHANGED)throw"Expected one of the event types: ["+gI.STATE_CHANGED+"]."}),Ex(s,!0),Tx(!0),Tx(!0)],arguments);var u=this;function c(e){return function(t,n,i){null!==e&&gx("on",e,arguments);var o=new mx(t,n,r);return u.addObserver_(o),function(){u.removeObserver_(o)}}}var l=[Ex(function(e){if(null===e)throw i;s(e)}),Tx(!0),Tx(!0)];return xI(t)||xI(n)||xI(r)?c(null)(t,n,r):c(l)},kx.prototype.then=function(e,t){return this.promise_.then(e,t)},kx.prototype.catch=function(e){return this.then(null,e)},kx.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},kx.prototype.removeObserver_=function(e){var t=this.observers_.indexOf(e);-1!==t&&this.observers_.splice(t,1)},kx.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach(function(t){e.notifyObserver_(t)})},kx.prototype.finishPromise_=function(){if(null!==this.resolve_){var e=!0;switch(kI(this.state_)){case CI.SUCCESS:Sx(this.resolve_.bind(null,this.snapshot))();break;case CI.CANCELED:case CI.ERROR:Sx(this.reject_.bind(null,this.error_))();break;default:e=!1}e&&(this.resolve_=null,this.reject_=null)}},kx.prototype.notifyObserver_=function(e){switch(kI(this.state_)){case CI.RUNNING:case CI.PAUSED:e.next&&Sx(e.next.bind(e,this.snapshot))();break;case CI.SUCCESS:e.complete&&Sx(e.complete.bind(e))();break;case CI.CANCELED:case CI.ERROR:e.error&&Sx(e.error.bind(e,this.error_))();break;default:e.error&&Sx(e.error.bind(e,this.error_))()}},kx.prototype.resume=function(){gx("resume",[],arguments);var e=this.state_===wI||this.state_===bI;return e&&this.transition_(vI),e},kx.prototype.pause=function(){gx("pause",[],arguments);var e=this.state_===vI;return e&&this.transition_(bI),e},kx.prototype.cancel=function(){gx("cancel",[],arguments);var e=this.state_===vI||this.state_===bI;return e&&this.transition_(EI),e},kx);function kx(e,t,n,r,i,o){var a=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.authWrapper_=t,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=vI,this.errorHandler_=function(e){a.request_=null,a.chunkMultiplier_=1,e.codeEquals(Zk.CANCELED)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=e,a.transition_(SI))},this.metadataErrorHandler_=function(e){a.request_=null,e.codeEquals(Zk.CANCELED)?a.completeTransitions_():(a.error_=e,a.transition_(SI))},this.promise_=new Promise(function(e,t){a.resolve_=e,a.reject_=t,a.start_()}),this.promise_.then(null,function(){})}var Ix=(xx.prototype.toString=function(){return gx("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},xx.prototype.newRef=function(e,t){return new xx(e,t)},xx.prototype.mappings=function(){return function(){if(YI)return YI;var e=[];e.push(new GI("bucket")),e.push(new GI("generation")),e.push(new GI("metageneration")),e.push(new GI("name","fullPath",!0));var t=new GI("name");t.xform=function(e,t){return function(e){return!OI(e)||e.length<2?e:zI(e)}(t)},e.push(t);var n=new GI("size");return n.xform=function(e,t){return II(t)?Number(t):t},e.push(n),e.push(new GI("timeCreated")),e.push(new GI("updated")),e.push(new GI("md5Hash",null,!0)),e.push(new GI("cacheControl",null,!0)),e.push(new GI("contentDisposition",null,!0)),e.push(new GI("contentEncoding",null,!0)),e.push(new GI("contentLanguage",null,!0)),e.push(new GI("contentType",null,!0)),e.push(new GI("metadata","customMetadata",!0)),YI=e}()},xx.prototype.child=function(e){gx("child",[bx()],arguments);var t=function(e,t){var n=t.split("/").filter(function(e){return 0<e.length}).join("/");return 0===e.length?n:e+"/"+n}(this.location.path,e),n=new BI(this.location.bucket,t);return this.newRef(this.authWrapper,n)},Object.defineProperty(xx.prototype,"parent",{get:function(){var e=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this.location.path);if(null===e)return null;var t=new BI(this.location.bucket,e);return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(xx.prototype,"root",{get:function(){var e=new BI(this.location.bucket,"");return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(xx.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(xx.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(xx.prototype,"name",{get:function(){return zI(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(xx.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),xx.prototype.put=function(e,t){return void 0===t&&(t=null),gx("put",[new vx(function(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||PI()&&e instanceof Blob))throw"Expected Blob or File."}),wx(!0)],arguments),this.throwIfRoot_("put"),new Cx(this,this.authWrapper,this.location,this.mappings(),new jI(e),t)},xx.prototype.putString=function(e,t,n){void 0===t&&(t=uI.RAW),gx("putString",[bx(),bx(cI,!0),wx(!0)],arguments),this.throwIfRoot_("putString");var r=hI(t,e),i=Object.assign({},n);return!II(i.contentType)&&II(r.contentType)&&(i.contentType=r.contentType),new Cx(this,this.authWrapper,this.location,this.mappings(),new jI(r.data,!0),i)},xx.prototype.delete=function(){var e=this;return gx("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then(function(t){var n=function(e,t){var n=HI(t.fullServerUrl()),r=e.maxOperationRetryTime(),i=new ox(n,"DELETE",function(e,t){},r);return i.successCodes=[200,204],i.errorHandler=lx(t),i}(e.authWrapper,e.location);return e.authWrapper.makeRequest(n,t).getPromise()})},xx.prototype.listAll=function(){gx("listAll",[],arguments);var e={prefixes:[],items:[]};return this.listAllHelper(e).then(function(){return e})},xx.prototype.listAllHelper=function(e,t){return Mi(this,void 0,void 0,function(){var n,r,i,o;return Li(this,function(a){switch(a.label){case 0:return n={pageToken:t},[4,this.list(n)];case 1:return r=a.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,this.listAllHelper(e,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}})})},xx.prototype.list=function(e){gx("list",[new vx(ix,!0)],arguments);var t=this;return this.authWrapper.getAuthToken().then(function(n){var r=e||{},i=function(e,t,n,r,i){var o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",0<"/".length&&(o.delimiter="/"),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=HI(t.bucketOnlyServerUrl()),s=e.maxOperationRetryTime(),u=new ox(a,"GET",ux(e),s);return u.urlParams=o,u.errorHandler=cx(t),u}(t.authWrapper,t.location,0,r.pageToken,r.maxResults);return t.authWrapper.makeRequest(i,n).getPromise()})},xx.prototype.getMetadata=function(){var e=this;return gx("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then(function(t){var n=hx(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(n,t).getPromise()})},xx.prototype.updateMetadata=function(e){var t=this;return gx("updateMetadata",[wx()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then(function(n){var r=function(e,t,n,r){var i=HI(t.fullServerUrl()),o=$I(n,r),a=e.maxOperationRetryTime(),s=new ox(i,"PATCH",sx(e,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=lx(t),s}(t.authWrapper,t.location,e,t.mappings());return t.authWrapper.makeRequest(r,n).getPromise()})},xx.prototype.getDownloadURL=function(){var e=this;return gx("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then(function(t){var n=function(e,t,n){var r=HI(t.fullServerUrl()),i=e.maxOperationRetryTime(),o=new ox(r,"GET",function(e,t){return function(n,r){var i=XI(e,r,t);return ax(null!==i),function(e,t){var n=WI(t);if(null===n)return null;if(!OI(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map(function(t){var n=e.bucket,r=e.fullPath;return HI("/b/"+i(n)+"/o/"+i(r))+KI({alt:"media",token:t})})[0]}(i,r)}}(e,n),i);return o.errorHandler=lx(t),o}(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(n,t).getPromise().then(function(e){if(null===e)throw new $k(Zk.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})})},xx.prototype.throwIfRoot_=function(e){if(""===this.location.path)throw function(e){return new $k(Zk.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)},xx);function xx(e,t){this.authWrapper=e,this.location=t instanceof BI?t:BI.makeFromUrl(t)}var Nx=(Ax.prototype.getPromise=function(){return this.promise_},Ax.prototype.cancel=function(e){},Ax);function Ax(e){this.promise_=Promise.reject(e)}var Ox=(Dx.prototype.addRequest=function(e){var t=this,n=this.id;this.id++,this.map.set(n,e),e.getPromise().then(function(){return t.map.delete(n)},function(){return t.map.delete(n)})},Dx.prototype.clear=function(){this.map.forEach(function(e){e&&e.cancel(!0)}),this.map.clear()},Dx);function Dx(){this.map=new Map,this.id=-9007199254740991}var Rx=(Px.extractBucket_=function(e){var t=e[Xk]||null;return null==t?null:BI.makeFromBucketSpec(t).bucket},Px.prototype.getAuthToken=function(){return null!==this.app_&&II(this.app_.INTERNAL)&&II(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(e){return null!==e?e.accessToken:null},function(){return null}):Promise.resolve(null)},Px.prototype.bucket=function(){if(this.deleted_)throw oI();return this.bucket_},Px.prototype.service=function(){return this.service_},Px.prototype.makeStorageReference=function(e){return this.storageRefMaker_(this,e)},Px.prototype.makeRequest=function(e,t){if(this.deleted_)return new Nx(oI());var n=this.requestMaker_(e,t,this.pool_);return this.requestMap_.addRequest(n),n},Px.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},Px.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},Px.prototype.setMaxUploadRetryTime=function(e){this.maxUploadRetryTime_=e},Px.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},Px.prototype.setMaxOperationRetryTime=function(e){this.maxOperationRetryTime_=e},Px);function Px(e,t,n,r,i){if(this.bucket_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var o=this.app_.options;II(o)&&(this.bucket_=Px.extractBucket_(o))}this.storageRefMaker_=t,this.requestMaker_=n,this.pool_=i,this.service_=r,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e4,this.requestMap_=new Ox}var Mx=(Lx.prototype.start_=function(){var e=this;function t(t,n){var r,i=e.resolve_,o=e.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=e.callback_(a,a.getResponseText());xI(s)?i(s):i()}catch(t){o(t)}else null!==a?((r=tI()).setServerResponseProp(a.getResponseText()),e.errorCallback_?o(e.errorCallback_(a,r)):o(r)):n.canceled?o(r=e.appDelete_?oI():nI()):o(r=new $k(Zk.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new Fx(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];u||(u=!0,t.apply(null,e))}function l(t){i=setTimeout(function(){i=null,e(h,s())},t)}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];u||(e?c.call.apply(c,[null,e].concat(t)):s()||o?c.call.apply(c,[null,e].concat(t)):(r<64&&(r*=2),l(1===a?(a=2,0):1e3*(r+Math.random()))))}var f=!1;function p(e){f||(f=!0,u||(null!==i?(e||(a=2),clearTimeout(i),l(0)):e||(a=1)))}return l(0),setTimeout(function(){p(o=!0)},n),p}(function(t,n){if(n)t(!1,new Fx(!1,null,!0));else{var r=e.pool_.createXhrIo();e.pendingXhr_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then(function(n){null!==e.progressCallback_&&n.removeUploadProgressListener(i),e.pendingXhr_=null;var r=(n=n).getErrorCode()===dI.NO_ERROR,o=n.getStatus();if(r&&!e.isRetryStatusCode_(o)){var a=-1!==e.successCodes_.indexOf(o);t(!0,new Fx(a,n))}else{var s=n.getErrorCode()===dI.ABORT;t(!1,new Fx(!1,null,s))}})}function i(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}},t,this.timeout_)},Lx.prototype.getPromise=function(){return this.promise_},Lx.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},Lx.prototype.isRetryStatusCode_=function(e){var t=500<=e&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r},Lx);function Lx(e,t,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(e,t){h.resolve_=e,h.reject_=t,h.start_()})}var Fx=function(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n};function Ux(e,t,n){var r=KI(e.urlParams),i=e.url+r,o=Object.assign({},e.headers);return function(e,t){null!==t&&0<t.length&&(e.Authorization="Firebase "+t)}(o,t),function(e){var t=void 0!==Vo?Vo.SDK_VERSION:"AppManager";e["X-Firebase-Storage-Version"]="webjs/"+t}(o),new Mx(i,e.method,o,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n)}var jx=(qx.prototype.ref=function(e){if(gx("ref",[bx(function(e){if("string"!=typeof e)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(e))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var t=new Ix(this.authWrapper_,this.bucket_);return null!=e?t.child(e):t},qx.prototype.refFromURL=function(e){return gx("refFromURL",[bx(function(e){if("string"!=typeof e)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(e))throw"Expected full URL but got a child path, use ref instead.";try{BI.makeFromUrl(e)}catch(e){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new Ix(this.authWrapper_,e)},Object.defineProperty(qx.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),qx.prototype.setMaxUploadRetryTime=function(e){gx("setMaxUploadRetryTime",[_x()],arguments),this.authWrapper_.setMaxUploadRetryTime(e)},qx.prototype.setMaxOperationRetryTime=function(e){gx("setMaxOperationRetryTime",[_x()],arguments),this.authWrapper_.setMaxOperationRetryTime(e)},Object.defineProperty(qx.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(qx.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),qx);function qx(e,t,n){if(this.bucket_=null,this.authWrapper_=new Rx(e,function(e,t){return new Ix(e,t)},Ux,this,t),this.app_=e,null!=n)this.bucket_=BI.makeFromBucketSpec(n);else{var r=this.authWrapper_.bucket();null!=r&&(this.bucket_=new BI(r,""))}this.internals_=new Vx(this)}var Bx,Vx=(Wx.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},Wx);function Wx(e){this.service_=e}function zx(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function Hx(e,t,n){var r,i=new Promise(function(i,o){zx(r=e[t].apply(e,n)).then(i,o)});return i.request=r,i}function Kx(e,t,n){n.forEach(function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})})}function Qx(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return Hx(this[t],r,arguments)})})}function Gx(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})})}function Yx(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return function(e,t,n){var r=Hx(e,t,n);return r.then(function(e){if(e)return new $x(e,r.request)})}(this[t],r,arguments)})})}function Xx(e){this._index=e}function $x(e,t){this._cursor=e,this._request=t}function Jx(e){this._store=e}function Zx(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}function eN(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new Zx(n)}function tN(e){this._db=e}Bx={TaskState:CI,TaskEvent:gI,StringFormat:uI,Storage:jx,Reference:Ix},Vo.INTERNAL.registerService("storage",function(e,t,n){return new jx(e,new FI,n)},Bx,void 0,!0),Kx(Xx,"_index",["name","keyPath","multiEntry","unique"]),Qx(Xx,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),Yx(Xx,"_index",IDBIndex,["openCursor","openKeyCursor"]),Kx($x,"_cursor",["direction","key","primaryKey","value"]),Qx($x,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&($x.prototype[e]=function(){var t=this,n=arguments;return Promise.resolve().then(function(){return t._cursor[e].apply(t._cursor,n),zx(t._request).then(function(e){if(e)return new $x(e,t._request)})})})}),Jx.prototype.createIndex=function(){return new Xx(this._store.createIndex.apply(this._store,arguments))},Jx.prototype.index=function(){return new Xx(this._store.index.apply(this._store,arguments))},Kx(Jx,"_store",["name","keyPath","indexNames","autoIncrement"]),Qx(Jx,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),Yx(Jx,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),Gx(Jx,"_store",IDBObjectStore,["deleteIndex"]),Zx.prototype.objectStore=function(){return new Jx(this._tx.objectStore.apply(this._tx,arguments))},Kx(Zx,"_tx",["objectStoreNames","mode"]),Gx(Zx,"_tx",IDBTransaction,["abort"]),eN.prototype.createObjectStore=function(){return new Jx(this._db.createObjectStore.apply(this._db,arguments))},Kx(eN,"_db",["name","version","objectStoreNames"]),Gx(eN,"_db",IDBDatabase,["deleteObjectStore","close"]),tN.prototype.transaction=function(){return new Zx(this._db.transaction.apply(this._db,arguments))},Kx(tN,"_db",["name","version","objectStoreNames"]),Gx(tN,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[Jx,Xx].forEach(function(t){e in t.prototype&&(t.prototype[e.replace("open","iterate")]=function(){var t=function(e){return Array.prototype.slice.call(e)}(arguments),n=t[t.length-1],r=this._store||this._index,i=r[e].apply(r,t.slice(0,-1));i.onsuccess=function(){n(i.result)}})})}),[Xx,Jx].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise(function(i){n.iterateCursor(e,function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)})})})});var nN,rN=1e4,iN="w:0.2.7",oN="FIS_v2",aN="https://firebaseinstallations.googleapis.com/v1",sN=36e5,uN=((nN={})["missing-app-config-values"]="Missing App configuration values.",nN["create-installation-failed"]="Could not register Firebase Installation.",nN["generate-token-failed"]="Could not generate Auth Token.",nN["not-registered"]="Firebase Installation is not registered.",nN["installation-not-found"]="Firebase Installation not found.",nN["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',nN["app-offline"]="Could not process request. Application offline.",nN["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",nN),cN=new ro("installations","Installations",uN);function lN(e){return e instanceof to&&e.code.includes("request-failed")}function hN(e){if(!e||!e.options)throw cN.create("missing-app-config-values");var t=e.name,n=e.options,r=n.projectId,i=n.apiKey,o=n.appId;if(!(t&&r&&i&&o))throw cN.create("missing-app-config-values");return{appName:t,projectId:r,apiKey:i,appId:o}}function fN(e){var t=e.projectId;return aN+"/projects/"+t+"/installations"}function pN(e){return{token:e.token,requestStatus:2,expiresIn:function(e){return Number(e.replace("s","000"))}(e.expiresIn),creationTime:Date.now()}}function dN(e,t){return Mi(this,void 0,void 0,function(){var n,r;return Li(this,function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,cN.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}})})}function mN(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function yN(e,t){var n=t.refreshToken,r=mN(e);return r.append("Authorization",function(e){return oN+" "+e}(n)),r}function gN(e){return Mi(this,void 0,void 0,function(){var t;return Li(this,function(n){switch(n.label){case 0:return[4,e()];case 1:return 500<=(t=n.sent()).status&&t.status<600?[2,e()]:[2,t]}})})}function vN(e){return new Promise(function(t){setTimeout(t,e)})}var bN=/^[cdef][\w-]{21}$/,wN="";function _N(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return function(e){return btoa(String.fromCharCode.apply(String,ji(e))).replace(/\+/g,"-").replace(/\//g,"_")}(e).substr(0,22)}(e);return bN.test(t)?t:wN}catch(e){return wN}}var EN="firebase-installations-database",TN=1,SN="firebase-installations-store",CN=null;function kN(){return CN=CN||function(e,t,n){var r=Hx(indexedDB,"open",[e,t]),i=r.request;return i&&(i.onupgradeneeded=function(e){n&&n(new eN(i.result,e.oldVersion,i.transaction))}),r.then(function(e){return new tN(e)})}(EN,TN,function(e){switch(e.oldVersion){case 0:e.createObjectStore(SN)}})}function IN(e,t){return Mi(this,void 0,void 0,function(){var n,r,i;return Li(this,function(o){switch(o.label){case 0:return n=AN(e),[4,kN()];case 1:return r=o.sent(),[4,(i=r.transaction(SN,"readwrite")).objectStore(SN).put(t,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,t]}})})}function xN(e){return Mi(this,void 0,void 0,function(){var t,n,r;return Li(this,function(i){switch(i.label){case 0:return t=AN(e),[4,kN()];case 1:return n=i.sent(),[4,(r=n.transaction(SN,"readwrite")).objectStore(SN).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function NN(e,t){return Mi(this,void 0,void 0,function(){var n,r,i,o,a,s;return Li(this,function(u){switch(u.label){case 0:return n=AN(e),[4,kN()];case 1:return r=u.sent(),i=r.transaction(SN,"readwrite"),[4,(o=i.objectStore(SN)).get(n)];case 2:return a=u.sent(),(s=t(a))===a?[2,s]:void 0!==s?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),[2,s]}})})}function AN(e){return e.appName+"!"+e.appId}function ON(e){return Mi(this,void 0,void 0,function(){var t,n,r;return Li(this,function(i){switch(i.label){case 0:return[4,NN(e,function(n){var r=function(e){var t=e||{fid:_N(),registrationStatus:0};return RN(t)?{fid:t.fid,registrationStatus:0}:t}(n),i=function(e,t){if(0!==t.registrationStatus)return 1===t.registrationStatus?{installationEntry:t,registrationPromise:function(e){return Mi(this,void 0,void 0,function(){var t;return Li(this,function(n){switch(n.label){case 0:return[4,DN(e)];case 1:t=n.sent(),n.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,vN(100)];case 3:return n.sent(),[4,DN(e)];case 4:return t=n.sent(),[3,2];case 5:if(0===t.registrationStatus)throw cN.create("create-installation-failed");return[2,t]}})})}(e)}:{installationEntry:t};if(!navigator.onLine){var n=Promise.reject(cN.create("app-offline"));return{installationEntry:t,registrationPromise:n}}var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=function(e,t){return Mi(this,void 0,void 0,function(){var n,r;return Li(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,function(e,t){var n=t.fid;return Mi(this,void 0,void 0,function(){var t,r,i,o,a,s;return Li(this,function(u){switch(u.label){case 0:return t=fN(e),r=mN(e),i={fid:n,authVersion:oN,appId:e.appId,sdkVersion:iN},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,gN(function(){return fetch(t,o)})];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,{fid:(s=u.sent()).fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:pN(s.authToken)}];case 3:return[4,dN("Create Installation",a)];case 4:throw u.sent()}})})}(e,t)];case 1:return n=i.sent(),[2,IN(e,n)];case 2:return lN(r=i.sent())&&409===r.serverCode?[4,xN(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,IN(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}(e,r);return{installationEntry:r,registrationPromise:i}}(e,r);return t=i.registrationPromise,i.installationEntry})];case 1:return(n=i.sent()).fid!==wN?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}})})}function DN(e){return NN(e,function(e){if(!e)throw cN.create("installation-not-found");return RN(e)?{fid:e.fid,registrationStatus:0}:e})}function RN(e){return 1===e.registrationStatus&&e.registrationTime+rN<Date.now()}function PN(e,t){return Mi(this,void 0,void 0,function(){var n,r,i,o,a;return Li(this,function(s){switch(s.label){case 0:return n=function(e,t){var n=t.fid;return fN(e)+"/"+n+"/authTokens:generate"}(e,t),r=yN(e,t),i={installation:{sdkVersion:iN}},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,gN(function(){return fetch(n,o)})];case 1:return(a=s.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,pN(s.sent())];case 3:return[4,dN("Generate Auth Token",a)];case 4:throw s.sent()}})})}function MN(e){return Mi(this,void 0,void 0,function(){var t,n,r;return Li(this,function(i){switch(i.label){case 0:return[4,NN(e,function(n){if(!FN(n))throw cN.create("not-registered");var r=n.authToken;if(function(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+sN}(e)}(r))return n;if(1===r.requestStatus)return t=function(e){return Mi(this,void 0,void 0,function(){var t,n;return Li(this,function(r){switch(r.label){case 0:return[4,LN(e)];case 1:t=r.sent(),r.label=2;case 2:return 1!==t.authToken.requestStatus?[3,5]:[4,vN(100)];case 3:return r.sent(),[4,LN(e)];case 4:return t=r.sent(),[3,2];case 5:if(0===(n=t.authToken).requestStatus)throw cN.create("generate-token-failed");return[2,n]}})})}(e),n;if(!navigator.onLine)throw cN.create("app-offline");var i=function(e){var t={requestStatus:1,requestTime:Date.now()};return Pi({},e,{authToken:t})}(n);return t=function(e,t){return Mi(this,void 0,void 0,function(){var n,r,i;return Li(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,PN(e,t)];case 1:return n=o.sent(),i=Pi({},t,{authToken:n}),[4,IN(e,i)];case 2:return o.sent(),[2,n];case 3:return!lN(r=o.sent())||401!==r.serverCode&&404!==r.serverCode?[3,5]:[4,xN(e)];case 4:return o.sent(),[3,7];case 5:return i=Pi({},t,{authToken:{requestStatus:0}}),[4,IN(e,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}})})}(e,i),i})];case 1:return n=i.sent(),t?[4,t]:[3,3];case 2:return r=i.sent(),[3,4];case 3:r=n.authToken,i.label=4;case 4:return[2,r.token]}})})}function LN(e){return NN(e,function(e){if(!FN(e))throw cN.create("not-registered");return function(e){return 1===e.requestStatus&&e.requestTime+rN<Date.now()}(e.authToken)?Pi({},e,{authToken:{requestStatus:0}}):e})}function FN(e){return void 0!==e&&2===e.registrationStatus}function UN(e,t){return Mi(this,void 0,void 0,function(){var n,r,i,o;return Li(this,function(a){switch(a.label){case 0:return n=function(e,t){var n=t.fid;return fN(e)+"/"+n}(e,t),r=yN(e,t),i={method:"DELETE",headers:r},[4,gN(function(){return fetch(n,i)})];case 1:return(o=a.sent()).ok?[3,3]:[4,dN("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}})})}Vo.INTERNAL.registerService("installations",function(e){return hN(e),{app:e,getId:function(){return function(e){return Mi(this,void 0,void 0,function(){var t,n,r,i;return Li(this,function(o){switch(o.label){case 0:return[4,ON(t=hN(e))];case 1:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)&&i.catch(function(){}),2===r.registrationStatus&&MN(t).catch(function(){}),[2,r.fid]}})})}(e)},getToken:function(){return function(e){return Mi(this,void 0,void 0,function(){var t;return Li(this,function(n){switch(n.label){case 0:return[4,function(e){return Mi(this,void 0,void 0,function(){var t,n,r;return Li(this,function(i){switch(i.label){case 0:return[4,ON(e)];case 1:return t=i.sent(),n=t.installationEntry,(r=t.registrationPromise)?[4,r]:[3,3];case 2:return i.sent(),[3,4];case 3:if(2!==n.registrationStatus)throw cN.create("create-installation-failed");i.label=4;case 4:return[2]}})})}(t=hN(e))];case 1:return n.sent(),[2,MN(t)]}})})}(e)},delete:function(){return function(e){return Mi(this,void 0,void 0,function(){var t,n;return Li(this,function(r){switch(r.label){case 0:return[4,NN(t=hN(e),function(e){if(!e||0!==e.registrationStatus)return e})];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw cN.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw cN.create("app-offline");case 3:return[4,UN(t,n)];case 4:return r.sent(),[4,xN(t)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}(e)}}});var jN,qN,BN,VN,WN="0.2.19",zN="FB-PERF-TRACE-MEASURE",HN="@firebase/performance/config",KN="@firebase/performance/configexpire",QN="Performance",GN=((jN={})["trace started"]="Trace {$traceName} was started before.",jN["trace stopped"]="Trace {$traceName} is not running.",jN["no window"]="Window is not available.",jN["no app id"]="App id is not available.",jN["no project id"]="Project id is not available.",jN["no api key"]="Api key is not available.",jN["invalid cc log"]="Attempted to queue invalid cc event",jN["FB not default"]="Performance can only start when Firebase app instance is the default one.",jN["RC response not ok"]="RC response is not ok",jN["invalid attribute name"]="Attribute name {$attributeName} is invalid.",jN["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",jN["invalide custom metric name"]="Custom metric name {$customMetricName} is invalid",jN),YN=new ro("performance",QN,GN),XN=($N.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},$N.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},$N.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},$N.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},$N.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},$N.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},$N.prototype.requiredApisAvailable=function(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)},$N.prototype.setupObserver=function(e,t){this.PerformanceObserver&&new this.PerformanceObserver(function(e){for(var n=0,r=e.getEntries();n<r.length;n++){var i=r[n];t(i)}}).observe({entryTypes:[e]})},$N.getInstance=function(){return void 0===qN&&(qN=new $N(BN)),qN},$N);function $N(e){if(!e)throw YN.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}var JN,ZN,eA,tA=(nA.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw YN.create("no app id");return e},nA.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw YN.create("no project id");return e},nA.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw YN.create("no api key");return e},nA.getInstance=function(){return void 0===VN&&(VN=new nA),VN},nA);function nA(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}function rA(){return JN}(eA=ZN=ZN||{})[eA.UNKNOWN=0]="UNKNOWN",eA[eA.VISIBLE=1]="VISIBLE",eA[eA.HIDDEN=2]="HIDDEN",eA[eA.PRERENDER=3]="PRERENDER",eA[eA.UNLOADED=4]="UNLOADED";var iA=["firebase_","google_","ga_"],oA=new RegExp("^[a-zA-Z]\\w*$");function aA(){switch(XN.getInstance().document.visibilityState){case"visible":return ZN.VISIBLE;case"hidden":return ZN.HIDDEN;case"prerender":return ZN.PRERENDER;default:return ZN.UNKNOWN}}var sA=new Ao(QN);sA.logLevel=go.INFO;var uA="0.0.1",cA={loggingEnabled:!0},lA="FIREBASE_INSTALLATIONS_AUTH",hA="Could not fetch config, will use default configs";function fA(e){if(!e)return e;var t=tA.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=cA.loggingEnabled,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=pA(t.tracesSamplingRate),t.logNetworkAfterSampling=pA(t.networkRequestsSamplingRate),e}function pA(e){return Math.random()<=e}var dA,mA=1;function yA(){return mA=2,dA=dA||function(){var e=XN.getInstance().document;return new Promise(function(t){e&&"complete"!==e.readyState?e.addEventListener("readystatechange",function n(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())}):t()})}().then(function(){return function(){var e=tA.getInstance().firebaseAppInstance.installations().getId();return e.then(function(e){JN=e}),e}()}).then(function(e){return function(e){var t,n=function(){var e=XN.getInstance().localStorage,t=e.getItem(KN);if(t&&function(e){return Number(e)>Date.now()}(t)){var n=e.getItem(HN);if(n)try{return JSON.parse(n)}catch(e){return}}}();return n?(fA(n),Promise.resolve()):(t=e,function(){var e=tA.getInstance().firebaseAppInstance.installations().getToken();return e.then(function(e){}),e}().then(function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+tA.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+tA.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:lA+" "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:tA.getInstance().getAppId(),app_version:WN,sdk_version:uA})});return fetch(r).then(function(e){if(e.ok)return e.json();throw YN.create("RC response not ok")})}).catch(function(){sA.info(hA)})).then(function(e){return fA(e)}).then(function(e){return function(e){if(e){var t=XN.getInstance().localStorage;t.setItem(HN,JSON.stringify(e)),t.setItem(KN,String(Date.now()+60*tA.getInstance().configTimeToLive*60*1e3))}}(e)},function(){})}(e)}).then(function(){return gA()},function(){return gA()})}function gA(){mA=3}var vA,bA=3,wA=[];function _A(){if(vA)return vA;var e,t=(e=SA,function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];!function(e){if(!e.eventTime||!e.message)throw YN.create("invalid cc log");wA=wA.concat([e])}({message:e.apply(void 0,r),eventTime:Date.now()})});return(vA=new Ao("@firebase/performance/cc")).logHandler=t,vA}function EA(e){var t=tA.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&XN.getInstance().requiredApisAvailable()&&(e.isAuto&&aA()!==ZN.VISIBLE||t.loggingEnabled&&t.logTraceAfterSampling&&(3===mA?TA(e):yA().then(function(){return TA(e)},function(){return TA(e)})))}function TA(e){rA()&&setTimeout(function(){return _A().log(e,1)},0)}function SA(e,t){return 0===t?function(e){var t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:CA(),network_request_metric:t};return JSON.stringify(n)}(e):function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=kA(e.counters));var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=kA(n));var r={application_info:CA(),trace_metric:t};return JSON.stringify(r)}(e)}function CA(){return{google_app_id:tA.getInstance().getAppId(),app_instance_id:rA(),web_app_info:{sdk_version:WN,page_url:XN.getInstance().getUrl(),service_worker_status:function(){var e=XN.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}(),visibility_state:aA(),effective_connection_type:function(){var e=XN.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0}}function kA(e){return Object.keys(e).map(function(t){return{key:t,value:e[t]}})}!function e(t){setTimeout(function(){if(0!==bA){if(!wA.length)return e(1e4);var t=wA.slice();wA=[];var n=t.map(function(e){return{source_extension_json:e.message,event_time_ms:String(e.eventTime)}}),r={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:tA.getInstance().logSource,log_event:n};fetch(tA.getInstance().logEndPointUrl,{method:"POST",body:JSON.stringify(r)}).then(function(e){return e.ok||sA.info("Call to Firebase backend failed."),e.json()}).then(function(t){var n=Number(t.next_request_wait_millis),r=isNaN(n)?1e4:Math.max(1e4,n);bA=3,e(r)}).catch(function(){wA=t.concat(wA),bA--,sA.info("Tries left: "+bA+"."),e(1e4)})}},t)}(5500);var IA=["_fp","_fcp","_fid"],xA=(NA.prototype.start=function(){if(1!==this.state)throw YN.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},NA.prototype.stop=function(){if(2!==this.state)throw YN.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),EA(this)},NA.prototype.record=function(e,t,n){if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=Pi({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}EA(this)},NA.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]&&this.putMetric(e,0),this.counters[e]+=t},NA.prototype.putMetric=function(e,t){if(!function(e,t){return!(0===e.length||100<e.length)&&(t&&t.startsWith("_wt_")&&-1<IA.indexOf(e)||!e.startsWith("_"))}(e,this.name))throw YN.create("invalide custom metric name",{customMetricName:e});this.counters[e]=t},NA.prototype.getMetric=function(e){return this.counters[e]||0},NA.prototype.putAttribute=function(e,t){var n=function(e){return!(0===e.length||40<e.length||iA.some(function(t){return e.startsWith(t)})||!e.match(oA))}(e),r=function(e){return 0!==e.length&&e.length<=100}(t);if(n&&r)this.customAttributes[e]=t;else{if(!n)throw YN.create("invalid attribute name",{attributeName:e});if(!r)throw YN.create("invalid attribute value",{attributeValue:t})}},NA.prototype.getAttribute=function(e){return this.customAttributes[e]},NA.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},NA.prototype.getAttributes=function(){return Pi({},this.customAttributes)},NA.prototype.setStartTime=function(e){this.startTimeUs=e},NA.prototype.setDuration=function(e){this.durationUs=e},NA.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},NA.createOobTrace=function(e,t,n){var r=XN.getInstance().getUrl();if(r){var i=new NA("_wt_"+r,!0),o=Math.floor(1e3*XN.getInstance().getTimeOrigin());if(i.setStartTime(o),e&&e[0]&&(i.setDuration(Math.floor(1e3*e[0].duration)),i.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),i.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),i.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),t){var a=t.find(function(e){return"first-paint"===e.name});a&&a.startTime&&i.putMetric("_fp",Math.floor(1e3*a.startTime));var s=t.find(function(e){return"first-contentful-paint"===e.name});s&&s.startTime&&i.putMetric("_fcp",Math.floor(1e3*s.startTime)),n&&i.putMetric("_fid",Math.floor(1e3*n))}EA(i)}},NA.createUserTimingTrace=function(e){EA(new NA(e,!1,e))},NA);function NA(e,t,n){void 0===t&&(t=!1),this.name=e,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=XN.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||zN+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function AA(e){var t=e;if(t&&void 0!==t.responseStart){var n=XN.getInstance().getTimeOrigin(),r=Math.floor(1e3*(t.startTime+n)),i=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,o=Math.floor(1e3*(t.responseEnd-t.startTime));!function(e){var t=tA.getInstance();t.instrumentationEnabled&&e.url!==t.logEndPointUrl.split("?")[0]&&t.loggingEnabled&&t.logNetworkAfterSampling&&setTimeout(function(){return _A().log(e,0)},0)}({url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}var OA=5e3;function DA(){rA()&&(setTimeout(function(){return function(){var e=XN.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout(function(){xA.createOobTrace(t,n),r=void 0},OA);e.onFirstInputDelay(function(e){r&&(clearTimeout(r),xA.createOobTrace(t,n,e))})}else xA.createOobTrace(t,n)}()},0),setTimeout(function(){return function(){for(var e=XN.getInstance(),t=e.getEntriesByType("resource"),n=0,r=t;n<r.length;n++)AA(r[n]);e.setupObserver("resource",AA)}()},0),setTimeout(function(){return function(){for(var e=XN.getInstance(),t=e.getEntriesByType("measure"),n=0,r=t;n<r.length;n++)RA(r[n]);e.setupObserver("measure",RA)}()},0))}function RA(e){var t=e.name;t.substring(0,zN.length)!==zN&&xA.createUserTimingTrace(t)}var PA=(MA.prototype.trace=function(e){return new xA(e)},Object.defineProperty(MA.prototype,"instrumentationEnabled",{get:function(){return tA.getInstance().instrumentationEnabled},set:function(e){tA.getInstance().instrumentationEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(MA.prototype,"dataCollectionEnabled",{get:function(){return tA.getInstance().dataCollectionEnabled},set:function(e){tA.getInstance().dataCollectionEnabled=e},enumerable:!0,configurable:!0}),MA);function MA(e){this.app=e,XN.getInstance().requiredApisAvailable()?yA().then(DA,DA):sA.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")}return Vo.INTERNAL.registerService("performance",function(e){if("[DEFAULT]"!==e.name)throw YN.create("FB not default");if("undefined"==typeof window)throw YN.create("no window");return function(e){BN=e}(window),tA.getInstance().firebaseAppInstance=e,new PA(e)},{}),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),Vo}()}).call(this,n(22),n(191).setImmediate,n(70))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!l){var e=s(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new d(e,t)),1!==c.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,a,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))i.call(n,c)&&(s[c]=n[c]);if(r){a=r(n);for(var l=0;l<a.length;l++)o.call(n,a[l])&&(s[a[l]]=n[a[l]])}}return s}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(49);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return r})},,function(e,t,n){var r=n(25),i=n(32),o=n(44),a=n(46),s=n(64),u=function e(t,n,u){var c,l,h,f,p=t&e.F,d=t&e.G,m=t&e.P,y=t&e.B,g=d?r:t&e.S?r[n]||(r[n]={}):(r[n]||{}).prototype,v=d?i:i[n]||(i[n]={}),b=v.prototype||(v.prototype={});for(c in d&&(u=n),u)h=((l=!p&&g&&void 0!==g[c])?g:u)[c],f=y&&l?s(h,r):m&&"function"==typeof h?s(Function.call,h):h,g&&a(g,c,h,t&e.U),v[c]!=h&&o(v,c,f),m&&b[c]!=h&&(b[c]=h)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t){e.exports=!1},function(e,t,n){var r=n(33).f,i=n(43),o=n(16)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(143),i=n(107);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){"use strict";var r=n(225)(!0);n(91)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var r=n(18),i=n(12),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(52)?"pure":"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(72),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){"use strict";var r=n(94),i={};i[n(13)("toStringTag")]="z",i+""!="[object z]"&&n(42)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(e,t,n){"use strict";e.exports=n(52)||!n(27)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete n(12)[e]})},function(e,t,n){var r=n(294);e.exports=p,e.exports.parse=o,e.exports.compile=function(e,t){return s(o(e,t))},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=f;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,r=[],o=0,a=0,s="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],f=n[1],p=n.index;if(s+=e.slice(a,p),a=p+h.length,f)s+=f[1];else{var d=e[a],m=n[2],y=n[3],g=n[4],v=n[5],b=n[6],w=n[7];s&&(r.push(s),s="");var _=null!=m&&null!=d&&d!==m,E="+"===b||"*"===b,T="?"===b||"*"===b,S=n[2]||l,C=g||v;r.push({name:y||o++,prefix:m||"",delimiter:S,optional:T,repeat:E,partial:_,asterisk:!!w,pattern:C?c(C):w?".*":"[^"+u(S)+"]+?"})}}return a<e.length&&(s+=e.substr(a)),s&&r.push(s),r}function a(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function s(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"===typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,i){for(var o="",s=n||{},u=(i||{}).pretty?a:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var h,f=s[l.name];if(null==f){if(l.optional){l.partial&&(o+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(f)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var p=0;p<f.length;p++){if(h=u(f[p]),!t[c].test(h))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(h)+"`");o+=(0===p?l.prefix:l.delimiter)+h}}else{if(h=l.asterisk?encodeURI(f).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}):u(f),!t[c].test(h))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+h+'"');o+=l.prefix+h}}else o+=l}return o}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function h(e){return e.sensitive?"":"i"}function f(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<e.length;s++){var c=e[s];if("string"===typeof c)a+=u(c);else{var f=u(c.prefix),p="(?:"+c.pattern+")";t.push(c),c.repeat&&(p+="(?:"+f+p+")*"),a+=p=c.optional?c.partial?f+"("+p+")?":"(?:"+f+"("+p+"))?":f+"("+p+")"}}var d=u(n.delimiter||"/"),m=a.slice(-d.length)===d;return i||(a=(m?a.slice(0,-d.length):a)+"(?:"+d+"(?=$))?"),a+=o?"$":i&&m?"":"(?="+d+"|$)",l(new RegExp("^"+a,h(n)),t)}function p(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(p(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return f(o(e,n),t,n)}(e,t,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(296),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default,e.exports=t.default},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e){return null!==e&&"object"===("undefined"===typeof e?"undefined":r(e))&&(e&&"function"===typeof e.then)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(29),i=n(227),o=n(116),a=n(115)("IE_PROTO"),s=function(){},u=function(){var e,t=n(114)("iframe"),r=o.length;for(t.style.display="none",n(117).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){"use strict";var r=n(52),i=n(6),o=n(42),a=n(47),s=n(60),u=n(192),c=n(67),l=n(93),h=n(13)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,d,m,y,g){u(n,t,d);var v,b,w,_=function(e){if(!f&&e in C)return C[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},E=t+" Iterator",T="values"==m,S=!1,C=e.prototype,k=C[h]||C["@@iterator"]||m&&C[m],I=k||_(m),x=m?T?_("entries"):I:void 0,N="Array"==t&&C.entries||k;if(N&&(w=l(N.call(new e)))!==Object.prototype&&w.next&&(c(w,E,!0),r||"function"==typeof w[h]||a(w,h,p)),T&&k&&"values"!==k.name&&(S=!0,I=function(){return k.call(this)}),r&&!g||!f&&!S&&C[h]||a(C,h,I),s[t]=I,s[E]=p,m)if(v={values:T?I:_("values"),keys:y?I:_("keys"),entries:x},g)for(b in v)b in C||o(C,b,v[b]);else i(i.P+i.F*(f||S),t,v);return v}},function(e,t,n){var r=n(162),i=n(116).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(41),i=n(20),o=n(115)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(49),i=n(13)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var r=n(37),i=n(164),o=n(165),a=n(29),s=n(35),u=n(166),c={},l={};(t=e.exports=function(e,t,n,h,f){var p,d,m,y,g=f?function(){return e}:u(e),v=r(n,h,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(p=s(e.length);p>b;b++)if((y=t?v(a(d=e[b])[0],d[1]):v(e[b]))===c||y===l)return y}else for(m=g.call(e);!(d=m.next()).done;)if((y=i(m,v,d.value,t))===c||y===l)return y}).BREAK=c,t.RETURN=l},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";var r=n(188),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,d=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(d){var i=p(n);i&&i!==d&&e(t,i,r)}var a=l(n);h&&(a=a.concat(h(n)));for(var s=u(t),m=u(n),y=0;y<a.length;++y){var g=a[y];if(!o[g]&&(!r||!r[g])&&(!m||!m[g])&&(!s||!s[g])){var v=f(n,g);try{c(t,g,v)}catch(b){}}}return t}return t}},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",function(){return i}),n.d(t,"__assign",function(){return o}),n.d(t,"__rest",function(){return a}),n.d(t,"__decorate",function(){return s}),n.d(t,"__param",function(){return u}),n.d(t,"__metadata",function(){return c}),n.d(t,"__awaiter",function(){return l}),n.d(t,"__generator",function(){return h}),n.d(t,"__exportStar",function(){return f}),n.d(t,"__values",function(){return p}),n.d(t,"__read",function(){return d}),n.d(t,"__spread",function(){return m}),n.d(t,"__spreadArrays",function(){return y}),n.d(t,"__await",function(){return g}),n.d(t,"__asyncGenerator",function(){return v}),n.d(t,"__asyncDelegator",function(){return b}),n.d(t,"__asyncValues",function(){return w}),n.d(t,"__makeTemplateObject",function(){return _}),n.d(t,"__importStar",function(){return E}),n.d(t,"__importDefault",function(){return T});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function d(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise(function(n,r){o.push([e,t,n,r])>1||s(e,t)})})}function s(e,t){try{(n=i[e](t)).value instanceof g?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:g(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,i,(t=e[n](t)).done,t.value)})}}}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){var r=n(34);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(63)("meta"),i=n(34),o=n(43),a=n(33).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(61)(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},h=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},onFreeze:function(e){return c&&h.NEED&&u(e)&&!o(e,r)&&l(e),e}}},function(e,t,n){var r=n(32),i=n(25),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(78)?"pure":"global",copyright:"\xa9 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(105),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(101)("keys"),i=n(63);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(45),i=n(204),o=n(107),a=n(106)("IE_PROTO"),s=function(){},u=function(){var e,t=n(141)("iframe"),r=o.length;for(t.style.display="none",n(205).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){"use strict";var r=n(147),i={};i[n(16)("toStringTag")]="z",i+""!="[object z]"&&n(46)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(e,t,n){"use strict";var r=n(207)(!0);n(112)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){"use strict";var r=n(78),i=n(77),o=n(46),a=n(44),s=n(65),u=n(208),c=n(79),l=n(209),h=n(16)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,d,m,y,g){u(n,t,d);var v,b,w,_=function(e){if(!f&&e in C)return C[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},E=t+" Iterator",T="values"==m,S=!1,C=e.prototype,k=C[h]||C["@@iterator"]||m&&C[m],I=k||_(m),x=m?T?_("entries"):I:void 0,N="Array"==t&&C.entries||k;if(N&&(w=l(N.call(new e)))!==Object.prototype&&w.next&&(c(w,E,!0),r||"function"==typeof w[h]||a(w,h,p)),T&&k&&"values"!==k.name&&(S=!0,I=function(){return k.call(this)}),r&&!g||!f&&!S&&C[h]||a(C,h,I),s[t]=I,s[E]=p,m)if(v={values:T?I:_("values"),keys:y?I:_("keys"),entries:x},g)for(b in v)b in C||o(C,b,v[b]);else i(i.P+i.F*(f||S),t,v);return v}},function(e,t,n){var r=n(34);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){var r=n(19),i=n(12).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(82)("keys"),i=n(66);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(12).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(49);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){"use strict";var r=n(24),i=n(59);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(13)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(a){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},e(o)}catch(a){}return n}},function(e,t,n){"use strict";var r=n(12),i=n(24),o=n(15),a=n(13)("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){for(var r=n(168),i=n(56),o=n(42),a=n(12),s=n(47),u=n(60),c=n(13),l=c("iterator"),h=c("toStringTag"),f=u.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(p),m=0;m<d.length;m++){var y,g=d[m],v=p[g],b=a[g],w=b&&b.prototype;if(w&&(w[l]||s(w,l,f),w[h]||s(w,h,g),u[g]=f,v))for(y in r)w[y]||o(w,y,r[y],!0)}},function(e,t,n){var r=n(42);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(66)("meta"),i=n(19),o=n(41),a=n(24).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(27)(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},h=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},onFreeze:function(e){return c&&h.NEED&&u(e)&&!o(e,r)&&l(e),e}}},function(e,t,n){var r=n(19);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){var r=n(12),i=n(18),o=n(52),a=n(177),s=n(24).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){"use strict";(function(e,r){var i,o=n(181);i="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof e?e:r;var a=Object(o.a)(i);t.a=a}).call(this,n(22),n(189)(e))},function(e,t){e.exports=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}},function(e,t,n){"use strict";(function(e){for(var n="undefined"!==typeof window&&"undefined"!==typeof document,r=["Edge","Trident","Firefox"],i=0,o=0;o<r.length;o+=1)if(n&&navigator.userAgent.indexOf(r[o])>=0){i=1;break}var a=n&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},i))}};function s(e){return e&&"[object Function]"==={}.toString.call(e)}function u(e,t){if(1!==e.nodeType)return[];var n=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?n[t]:n}function c(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function l(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=u(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/(auto|scroll|overlay)/.test(n+i+r)?e:l(c(e))}var h=n&&!(!window.MSInputMethodContext||!document.documentMode),f=n&&/MSIE 10/.test(navigator.userAgent);function p(e){return 11===e?h:10===e?f:h||f}function d(e){if(!e)return document.documentElement;for(var t=p(10)?document.body:null,n=e.offsetParent||null;n===t&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===u(n,"position")?d(n):n:e?e.ownerDocument.documentElement:document.documentElement}function m(e){return null!==e.parentNode?m(e.parentNode):e}function y(e,t){if(!e||!e.nodeType||!t||!t.nodeType)return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?e:t,i=n?t:e,o=document.createRange();o.setStart(r,0),o.setEnd(i,0);var a=o.commonAncestorContainer;if(e!==a&&t!==a||r.contains(i))return function(e){var t=e.nodeName;return"BODY"!==t&&("HTML"===t||d(e.firstElementChild)===e)}(a)?a:d(a);var s=m(e);return s.host?y(s.host,t):y(e,m(t).host)}function g(e){var t="top"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=e.nodeName;if("BODY"===n||"HTML"===n){var r=e.ownerDocument.documentElement;return(e.ownerDocument.scrollingElement||r)[t]}return e[t]}function v(e,t){var n="x"===t?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"],10)+parseFloat(e["border"+r+"Width"],10)}function b(e,t,n,r){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],p(10)?parseInt(n["offset"+e])+parseInt(r["margin"+("Height"===e?"Top":"Left")])+parseInt(r["margin"+("Height"===e?"Bottom":"Right")]):0)}function w(e){var t=e.body,n=e.documentElement,r=p(10)&&getComputedStyle(n);return{height:b("Height",t,n,r),width:b("Width",t,n,r)}}var _=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),T=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function C(e){return S({},e,{right:e.left+e.width,bottom:e.top+e.height})}function k(e){var t={};try{if(p(10)){t=e.getBoundingClientRect();var n=g(e,"top"),r=g(e,"left");t.top+=n,t.left+=r,t.bottom+=n,t.right+=r}else t=e.getBoundingClientRect()}catch(f){}var i={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},o="HTML"===e.nodeName?w(e.ownerDocument):{},a=o.width||e.clientWidth||i.right-i.left,s=o.height||e.clientHeight||i.bottom-i.top,c=e.offsetWidth-a,l=e.offsetHeight-s;if(c||l){var h=u(e);c-=v(h,"x"),l-=v(h,"y"),i.width-=c,i.height-=l}return C(i)}function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=p(10),i="HTML"===t.nodeName,o=k(e),a=k(t),s=l(e),c=u(t),h=parseFloat(c.borderTopWidth,10),f=parseFloat(c.borderLeftWidth,10);n&&i&&(a.top=Math.max(a.top,0),a.left=Math.max(a.left,0));var d=C({top:o.top-a.top-h,left:o.left-a.left-f,width:o.width,height:o.height});if(d.marginTop=0,d.marginLeft=0,!r&&i){var m=parseFloat(c.marginTop,10),y=parseFloat(c.marginLeft,10);d.top-=h-m,d.bottom-=h-m,d.left-=f-y,d.right-=f-y,d.marginTop=m,d.marginLeft=y}return(r&&!n?t.contains(s):t===s&&"BODY"!==s.nodeName)&&(d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=g(t,"top"),i=g(t,"left"),o=n?-1:1;return e.top+=r*o,e.bottom+=r*o,e.left+=i*o,e.right+=i*o,e}(d,t)),d}function x(e){if(!e||!e.parentElement||p())return document.documentElement;for(var t=e.parentElement;t&&"none"===u(t,"transform");)t=t.parentElement;return t||document.documentElement}function N(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={top:0,left:0},a=i?x(e):y(e,t);if("viewport"===r)o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.ownerDocument.documentElement,r=I(e,n),i=Math.max(n.clientWidth,window.innerWidth||0),o=Math.max(n.clientHeight,window.innerHeight||0),a=t?0:g(n),s=t?0:g(n,"left");return C({top:a-r.top+r.marginTop,left:s-r.left+r.marginLeft,width:i,height:o})}(a,i);else{var s=void 0;"scrollParent"===r?"BODY"===(s=l(c(t))).nodeName&&(s=e.ownerDocument.documentElement):s="window"===r?e.ownerDocument.documentElement:r;var h=I(s,a,i);if("HTML"!==s.nodeName||function e(t){var n=t.nodeName;if("BODY"===n||"HTML"===n)return!1;if("fixed"===u(t,"position"))return!0;var r=c(t);return!!r&&e(r)}(a))o=h;else{var f=w(e.ownerDocument),p=f.height,d=f.width;o.top+=h.top-h.marginTop,o.bottom=p+h.top,o.left+=h.left-h.marginLeft,o.right=d+h.left}}var m="number"===typeof(n=n||0);return o.left+=m?n:n.left||0,o.top+=m?n:n.top||0,o.right-=m?n:n.right||0,o.bottom-=m?n:n.bottom||0,o}function A(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var a=N(n,r,o,i),s={top:{width:a.width,height:t.top-a.top},right:{width:a.right-t.right,height:a.height},bottom:{width:a.width,height:a.bottom-t.bottom},left:{width:t.left-a.left,height:a.height}},u=Object.keys(s).map(function(e){return S({key:e},s[e],{area:(t=s[e],t.width*t.height)});var t}).sort(function(e,t){return t.area-e.area}),c=u.filter(function(e){var t=e.width,r=e.height;return t>=n.clientWidth&&r>=n.clientHeight}),l=c.length>0?c[0].key:u[0].key,h=e.split("-")[1];return l+(h?"-"+h:"")}function O(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return I(n,r?x(t):y(t,n),r)}function D(e){var t=e.ownerDocument.defaultView.getComputedStyle(e),n=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),r=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:e.offsetWidth+r,height:e.offsetHeight+n}}function R(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function P(e,t,n){n=n.split("-")[0];var r=D(e),i={width:r.width,height:r.height},o=-1!==["right","left"].indexOf(n),a=o?"top":"left",s=o?"left":"top",u=o?"height":"width",c=o?"width":"height";return i[a]=t[a]+t[u]/2-r[u]/2,i[s]=n===s?t[s]-r[c]:t[R(s)],i}function M(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function L(e,t,n){return(void 0===n?e:e.slice(0,function(e,t,n){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===n});var r=M(e,function(e){return e[t]===n});return e.indexOf(r)}(e,"name",n))).forEach(function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=e.function||e.fn;e.enabled&&s(n)&&(t.offsets.popper=C(t.offsets.popper),t.offsets.reference=C(t.offsets.reference),t=n(t,e))}),t}function F(e,t){return e.some(function(e){var n=e.name;return e.enabled&&n===t})}function U(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<t.length;r++){var i=t[r],o=i?""+i+n:e;if("undefined"!==typeof document.body.style[o])return o}return null}function j(e){var t=e.ownerDocument;return t?t.defaultView:window}function q(e,t,n,r){n.updateBound=r,j(e).addEventListener("resize",n.updateBound,{passive:!0});var i=l(e);return function e(t,n,r,i){var o="BODY"===t.nodeName,a=o?t.ownerDocument.defaultView:t;a.addEventListener(n,r,{passive:!0}),o||e(l(a.parentNode),n,r,i),i.push(a)}(i,"scroll",n.updateBound,n.scrollParents),n.scrollElement=i,n.eventsEnabled=!0,n}function B(){var e,t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,j(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}function V(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function W(e,t){Object.keys(t).forEach(function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&V(t[n])&&(r="px"),e.style[n]=t[n]+r})}var z=n&&/Firefox/i.test(navigator.userAgent);function H(e,t,n){var r=M(e,function(e){return e.name===t}),i=!!r&&e.some(function(e){return e.name===n&&e.enabled&&e.order<r.order});if(!i){var o="`"+t+"`",a="`"+n+"`";console.warn(a+" modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return i}var K=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Q=K.slice(3);function G(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Q.indexOf(e),r=Q.slice(n+1).concat(Q.slice(0,n));return t?r.reverse():r}var Y={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function X(e,t,n,r){var i=[0,0],o=-1!==["right","left"].indexOf(r),a=e.split(/(\+|\-)/).map(function(e){return e.trim()}),s=a.indexOf(M(a,function(e){return-1!==e.search(/,|\s/)}));a[s]&&-1===a[s].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var u=/\s*,\s*|\s+/,c=-1!==s?[a.slice(0,s).concat([a[s].split(u)[0]]),[a[s].split(u)[1]].concat(a.slice(s+1))]:[a];return(c=c.map(function(e,r){var i=(1===r?!o:o)?"height":"width",a=!1;return e.reduce(function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,a=!0,e):a?(e[e.length-1]+=t,a=!1,e):e.concat(t)},[]).map(function(e){return function(e,t,n,r){var i=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+i[1],a=i[2];if(!o)return e;if(0===a.indexOf("%")){var s=void 0;switch(a){case"%p":s=n;break;case"%":case"%r":default:s=r}return C(s)[t]/100*o}if("vh"===a||"vw"===a)return("vh"===a?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*o;return o}(e,i,t,n)})})).forEach(function(e,t){e.forEach(function(n,r){V(n)&&(i[t]+=n*("-"===e[r-1]?-1:1))})}),i}var $={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,n=t.split("-")[0],r=t.split("-")[1];if(r){var i=e.offsets,o=i.reference,a=i.popper,s=-1!==["bottom","top"].indexOf(n),u=s?"left":"top",c=s?"width":"height",l={start:T({},u,o[u]),end:T({},u,o[u]+o[c]-a[c])};e.offsets.popper=S({},a,l[r])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var n=t.offset,r=e.placement,i=e.offsets,o=i.popper,a=i.reference,s=r.split("-")[0],u=void 0;return u=V(+n)?[+n,0]:X(n,o,a,s),"left"===s?(o.top+=u[0],o.left-=u[1]):"right"===s?(o.top+=u[0],o.left+=u[1]):"top"===s?(o.left+=u[0],o.top-=u[1]):"bottom"===s&&(o.left+=u[0],o.top+=u[1]),e.popper=o,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var n=t.boundariesElement||d(e.instance.popper);e.instance.reference===n&&(n=d(n));var r=U("transform"),i=e.instance.popper.style,o=i.top,a=i.left,s=i[r];i.top="",i.left="",i[r]="";var u=N(e.instance.popper,e.instance.reference,t.padding,n,e.positionFixed);i.top=o,i.left=a,i[r]=s,t.boundaries=u;var c=t.priority,l=e.offsets.popper,h={primary:function(e){var n=l[e];return l[e]<u[e]&&!t.escapeWithReference&&(n=Math.max(l[e],u[e])),T({},e,n)},secondary:function(e){var n="right"===e?"left":"top",r=l[n];return l[e]>u[e]&&!t.escapeWithReference&&(r=Math.min(l[n],u[e]-("right"===e?l.width:l.height))),T({},n,r)}};return c.forEach(function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";l=S({},l,h[t](e))}),e.offsets.popper=l,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,n=t.popper,r=t.reference,i=e.placement.split("-")[0],o=Math.floor,a=-1!==["top","bottom"].indexOf(i),s=a?"right":"bottom",u=a?"left":"top",c=a?"width":"height";return n[s]<o(r[u])&&(e.offsets.popper[u]=o(r[u])-n[c]),n[u]>o(r[s])&&(e.offsets.popper[u]=o(r[s])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var n;if(!H(e.instance.modifiers,"arrow","keepTogether"))return e;var r=t.element;if("string"===typeof r){if(!(r=e.instance.popper.querySelector(r)))return e}else if(!e.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var i=e.placement.split("-")[0],o=e.offsets,a=o.popper,s=o.reference,c=-1!==["left","right"].indexOf(i),l=c?"height":"width",h=c?"Top":"Left",f=h.toLowerCase(),p=c?"left":"top",d=c?"bottom":"right",m=D(r)[l];s[d]-m<a[f]&&(e.offsets.popper[f]-=a[f]-(s[d]-m)),s[f]+m>a[d]&&(e.offsets.popper[f]+=s[f]+m-a[d]),e.offsets.popper=C(e.offsets.popper);var y=s[f]+s[l]/2-m/2,g=u(e.instance.popper),v=parseFloat(g["margin"+h],10),b=parseFloat(g["border"+h+"Width"],10),w=y-e.offsets.popper[f]-v-b;return w=Math.max(Math.min(a[l]-m,w),0),e.arrowElement=r,e.offsets.arrow=(T(n={},f,Math.round(w)),T(n,p,""),n),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(F(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var n=N(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),r=e.placement.split("-")[0],i=R(r),o=e.placement.split("-")[1]||"",a=[];switch(t.behavior){case Y.FLIP:a=[r,i];break;case Y.CLOCKWISE:a=G(r);break;case Y.COUNTERCLOCKWISE:a=G(r,!0);break;default:a=t.behavior}return a.forEach(function(s,u){if(r!==s||a.length===u+1)return e;r=e.placement.split("-")[0],i=R(r);var c=e.offsets.popper,l=e.offsets.reference,h=Math.floor,f="left"===r&&h(c.right)>h(l.left)||"right"===r&&h(c.left)<h(l.right)||"top"===r&&h(c.bottom)>h(l.top)||"bottom"===r&&h(c.top)<h(l.bottom),p=h(c.left)<h(n.left),d=h(c.right)>h(n.right),m=h(c.top)<h(n.top),y=h(c.bottom)>h(n.bottom),g="left"===r&&p||"right"===r&&d||"top"===r&&m||"bottom"===r&&y,v=-1!==["top","bottom"].indexOf(r),b=!!t.flipVariations&&(v&&"start"===o&&p||v&&"end"===o&&d||!v&&"start"===o&&m||!v&&"end"===o&&y),w=!!t.flipVariationsByContent&&(v&&"start"===o&&d||v&&"end"===o&&p||!v&&"start"===o&&y||!v&&"end"===o&&m),_=b||w;(f||g||_)&&(e.flipped=!0,(f||g)&&(r=a[u+1]),_&&(o=function(e){return"end"===e?"start":"start"===e?"end":e}(o)),e.placement=r+(o?"-"+o:""),e.offsets.popper=S({},e.offsets.popper,P(e.instance.popper,e.offsets.reference,e.placement)),e=L(e.instance.modifiers,e,"flip"))}),e},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,n=t.split("-")[0],r=e.offsets,i=r.popper,o=r.reference,a=-1!==["left","right"].indexOf(n),s=-1===["top","left"].indexOf(n);return i[a?"left":"top"]=o[n]-(s?i[a?"width":"height"]:0),e.placement=R(t),e.offsets.popper=C(i),e}},hide:{order:800,enabled:!0,fn:function(e){if(!H(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=M(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var n=t.x,r=t.y,i=e.offsets.popper,o=M(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration;void 0!==o&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a=void 0!==o?o:t.gpuAcceleration,s=d(e.instance.popper),u=k(s),c={position:i.position},l=function(e,t){var n=e.offsets,r=n.popper,i=n.reference,o=Math.round,a=Math.floor,s=function(e){return e},u=o(i.width),c=o(r.width),l=-1!==["left","right"].indexOf(e.placement),h=-1!==e.placement.indexOf("-"),f=t?l||h||u%2===c%2?o:a:s,p=t?o:s;return{left:f(u%2===1&&c%2===1&&!h&&t?r.left-1:r.left),top:p(r.top),bottom:p(r.bottom),right:f(r.right)}}(e,window.devicePixelRatio<2||!z),h="bottom"===n?"top":"bottom",f="right"===r?"left":"right",p=U("transform"),m=void 0,y=void 0;if(y="bottom"===h?"HTML"===s.nodeName?-s.clientHeight+l.bottom:-u.height+l.bottom:l.top,m="right"===f?"HTML"===s.nodeName?-s.clientWidth+l.right:-u.width+l.right:l.left,a&&p)c[p]="translate3d("+m+"px, "+y+"px, 0)",c[h]=0,c[f]=0,c.willChange="transform";else{var g="bottom"===h?-1:1,v="right"===f?-1:1;c[h]=y*g,c[f]=m*v,c.willChange=h+", "+f}var b={"x-placement":e.placement};return e.attributes=S({},b,e.attributes),e.styles=S({},c,e.styles),e.arrowStyles=S({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){var t,n;return W(e.instance.popper,e.styles),t=e.instance.popper,n=e.attributes,Object.keys(n).forEach(function(e){!1!==n[e]?t.setAttribute(e,n[e]):t.removeAttribute(e)}),e.arrowElement&&Object.keys(e.arrowStyles).length&&W(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,n,r,i){var o=O(i,t,e,n.positionFixed),a=A(n.placement,o,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",a),W(t,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},J=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=a(this.update.bind(this)),this.options=S({},e.Defaults,i),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(S({},e.Defaults.modifiers,i.modifiers)).forEach(function(t){r.options.modifiers[t]=S({},e.Defaults.modifiers[t]||{},i.modifiers?i.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return S({name:e},r.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(e){e.enabled&&s(e.onLoad)&&e.onLoad(r.reference,r.popper,r.options,e,r.state)}),this.update();var o=this.options.eventsEnabled;o&&this.enableEventListeners(),this.state.eventsEnabled=o}return E(e,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=O(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=A(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=P(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=L(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,F(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[U("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=q(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return B.call(this)}}]),e}();J.Utils=("undefined"!==typeof window?window:e).PopperUtils,J.placements=K,J.Defaults=$,t.a=J}).call(this,n(22))},function(e,t){var n=NaN,r="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,u=parseInt,c=Object.prototype.toString;function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&c.call(e)==r}(e))return n;if(l(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=l(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var h=a.test(e);return h||s.test(e)?u(e.slice(2),h?2:8):o.test(e)?n:+e}},function(e,t,n){"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function i(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function o(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function a(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var n=null,a=null,s=null;if("function"===typeof t.componentWillMount?n="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?a="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(a="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?s="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==a||null!==s){var u=e.displayName||e.name,c="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+u+" uses "+c+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==a?"\n  "+a:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=i),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=o;var l=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;l.call(this,e,t,r)}}return e}n.r(t),n.d(t,"polyfill",function(){return a}),r.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0,o.__suppressDeprecationWarning=!0},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){(function(t){var n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",o="[object Null]",a="[object Proxy]",s="[object Undefined]",u="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,l=u||c||Function("return this")(),h=Object.prototype,f=h.hasOwnProperty,p=h.toString,d=l.Symbol,m=d?d.toStringTag:void 0;function y(e){return null==e?void 0===e?s:o:m&&m in Object(e)?function(e){var t=f.call(e,m),n=e[m];try{e[m]=void 0;var r=!0}catch(o){}var i=p.call(e);r&&(t?e[m]=n:delete e[m]);return i}(e):function(e){return p.call(e)}(e)}e.exports=function(e){if(!function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}(e))return!1;var t=y(e);return t==r||t==i||t==n||t==a}}).call(this,n(22))},function(e,t,n){"use strict";var r=n(136),i=[ReferenceError,TypeError,RangeError],o=!1;function a(){o=!1,r._l=null,r._m=null}function s(e,t){return t.some(function(t){return e instanceof t})}t.disable=a,t.enable=function(e){e=e||{},o&&a();o=!0;var t=0,n=0,u={};function c(t){(e.allRejections||s(u[t].error,e.whitelist||i))&&(u[t].displayId=n++,e.onUnhandled?(u[t].logged=!0,e.onUnhandled(u[t].displayId,u[t].error)):(u[t].logged=!0,function(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach(function(e){console.warn("  "+e)})}(u[t].displayId,u[t].error)))}r._l=function(t){var n;2===t._i&&u[t._o]&&(u[t._o].logged?(n=t._o,u[n].logged&&(e.onHandled?e.onHandled(u[n].displayId,u[n].error):u[n].onUnhandled||(console.warn("Promise Rejection Handled (id: "+u[n].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+u[n].displayId+".")))):clearTimeout(u[t._o].timeout),delete u[t._o])},r._m=function(e,n){0===e._h&&(e._o=t++,u[e._o]={displayId:null,error:n,timeout:setTimeout(c.bind(null,e._o),s(n,i)?100:2e3),logged:!1})}}},function(e,t,n){"use strict";var r=n(195);function i(){}var o=null,a={};function s(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("Promise constructor's argument is not a function");this._h=0,this._i=0,this._j=null,this._k=null,e!==i&&p(e,this)}function u(e,t){for(;3===e._i;)e=e._j;if(s._l&&s._l(e),0===e._i)return 0===e._h?(e._h=1,void(e._k=t)):1===e._h?(e._h=2,void(e._k=[e._k,t])):void e._k.push(t);!function(e,t){r(function(){var n=1===e._i?t.onFulfilled:t.onRejected;if(null!==n){var r=function(e,t){try{return e(t)}catch(n){return o=n,a}}(n,e._j);r===a?l(t.promise,o):c(t.promise,r)}else 1===e._i?c(t.promise,e._j):l(t.promise,e._j)})}(e,t)}function c(e,t){if(t===e)return l(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===typeof t||"function"===typeof t)){var n=function(e){try{return e.then}catch(t){return o=t,a}}(t);if(n===a)return l(e,o);if(n===e.then&&t instanceof s)return e._i=3,e._j=t,void h(e);if("function"===typeof n)return void p(n.bind(t),e)}e._i=1,e._j=t,h(e)}function l(e,t){e._i=2,e._j=t,s._m&&s._m(e,t),h(e)}function h(e){if(1===e._h&&(u(e,e._k),e._k=null),2===e._h){for(var t=0;t<e._k.length;t++)u(e,e._k[t]);e._k=null}}function f(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function p(e,t){var n=!1,r=function(e,t,n){try{e(t,n)}catch(r){return o=r,a}}(e,function(e){n||(n=!0,c(t,e))},function(e){n||(n=!0,l(t,e))});n||r!==a||(n=!0,l(t,o))}e.exports=s,s._l=null,s._m=null,s._n=i,s.prototype.then=function(e,t){if(this.constructor!==s)return function(e,t,n){return new e.constructor(function(r,o){var a=new s(i);a.then(r,o),u(e,new f(t,n,a))})}(this,e,t);var n=new s(i);return u(this,new f(e,t,n)),n}},function(e,t,n){"use strict";var r=n(136);e.exports=r;var i=l(!0),o=l(!1),a=l(null),s=l(void 0),u=l(0),c=l("");function l(e){var t=new r(r._n);return t._i=1,t._j=e,t}r.resolve=function(e){if(e instanceof r)return e;if(null===e)return a;if(void 0===e)return s;if(!0===e)return i;if(!1===e)return o;if(0===e)return u;if(""===e)return c;if("object"===typeof e||"function"===typeof e)try{var t=e.then;if("function"===typeof t)return new r(t.bind(e))}catch(n){return new r(function(e,t){t(n)})}return l(e)},r.all=function(e){var t=Array.prototype.slice.call(e);return new r(function(e,n){if(0===t.length)return e([]);var i=t.length;function o(a,s){if(s&&("object"===typeof s||"function"===typeof s)){if(s instanceof r&&s.then===r.prototype.then){for(;3===s._i;)s=s._j;return 1===s._i?o(a,s._j):(2===s._i&&n(s._j),void s.then(function(e){o(a,e)},n))}var u=s.then;if("function"===typeof u)return void new r(u.bind(s)).then(function(e){o(a,e)},n)}t[a]=s,0===--i&&e(t)}for(var a=0;a<t.length;a++)o(a,t[a])})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){e.forEach(function(e){r.resolve(e).then(t,n)})})},r.prototype.catch=function(e){return this.then(null,e)}},function(e,t,n){"use strict";n.r(t),n.d(t,"Headers",function(){return c}),n.d(t,"Request",function(){return y}),n.d(t,"Response",function(){return b}),n.d(t,"DOMException",function(){return _}),n.d(t,"fetch",function(){return E});var r={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(r.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(e){return e&&i.indexOf(Object.prototype.toString.call(e))>-1};function a(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function s(e){return"string"!==typeof e&&(e=String(e)),e}function u(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r.iterable&&(t[Symbol.iterator]=function(){return t}),t}function c(e){this.map={},e instanceof c?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function l(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function f(e){var t=new FileReader,n=h(t);return t.readAsArrayBuffer(e),n}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:r.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:r.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():r.arrayBuffer&&r.blob&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||o(e))?this._bodyArrayBuffer=p(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=h(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(e,t){e=a(e),t=s(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},c.prototype.delete=function(e){delete this.map[a(e)]},c.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},c.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},c.prototype.set=function(e,t){this.map[a(e)]=s(t)},c.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},c.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),u(e)},c.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),u(e)},c.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),u(e)},r.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function y(e,t){var n=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new c(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new c(t.headers)),this.method=function(e){var t=e.toUpperCase();return m.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function g(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function v(e){var t=new c;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function b(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new c(t.headers),this.url=t.url||"",this._initBody(e)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},d.call(y.prototype),d.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:0,statusText:""});return e.type="error",e};var w=[301,302,303,307,308];b.redirect=function(e,t){if(-1===w.indexOf(t))throw new RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})};var _=self.DOMException;try{new _}catch(T){(_=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),_.prototype.constructor=_}function E(e,t){return new Promise(function(n,i){var o=new y(e,t);if(o.signal&&o.signal.aborted)return i(new _("Aborted","AbortError"));var a=new XMLHttpRequest;function s(){a.abort()}a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:v(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;n(new b(t,e))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.onabort=function(){i(new _("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&r.blob&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),o.signal&&(o.signal.addEventListener("abort",s),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",s)}),a.send("undefined"===typeof o._bodyInit?null:o._bodyInit)})}E.polyfill=!0,self.fetch||(self.fetch=E,self.Headers=c,self.Request=y,self.Response=b)},function(e,t,n){n(196),n(110),e.exports=n(32).Symbol},function(e,t,n){e.exports=!n(39)&&!n(61)(function(){return 7!=Object.defineProperty(n(141)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(34),i=n(25).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){t.f=n(16)},function(e,t,n){var r=n(43),i=n(51),o=n(201)(!1),a=n(106)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(143),i=n(107).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(108),i=n(62),o=n(51),a=n(99),s=n(43),u=n(140),c=Object.getOwnPropertyDescriptor;t.f=n(39)?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(n){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(102),i=n(16)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){n(111),n(210),e.exports=n(32).Array.from},function(e,t,n){var r=n(103);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(45);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(a){var o=e.return;throw void 0!==o&&r(o.call(e)),a}}},function(e,t,n){var r=n(65),i=n(16)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(147),i=n(16)("iterator"),o=n(65);e.exports=n(32).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(16)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(a){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},e(o)}catch(a){}return n}},function(e,t,n){for(var r=n(213),i=n(80),o=n(46),a=n(25),s=n(44),u=n(65),c=n(16),l=c("iterator"),h=c("toStringTag"),f=u.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(p),m=0;m<d.length;m++){var y,g=d[m],v=p[g],b=a[g],w=b&&b.prototype;if(w&&(w[l]||s(w,l,f),w[h]||s(w,h,g),u[g]=f,v))for(y in r)w[y]||o(w,y,r[y],!0)}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(33).f,i=n(109),o=n(157),a=n(64),s=n(158),u=n(159),c=n(112),l=n(155),h=n(216),f=n(39),p=n(100).fastKey,d=n(113),m=f?"_s":"size",y=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var l=e(function(e,r){s(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=r&&u(r,n,e[c],e)});return o(l.prototype,{clear:function(){for(var e=d(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=d(this,t),r=y(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[m]--}return!!r},forEach:function(e){d(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!y(d(this,t),e)}}),f&&r(l.prototype,"size",{get:function(){return d(this,t)[m]}}),l},def:function(e,t,n){var r,i,o=y(e,t);return o?o.v=n:(e._l=o={i:i=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[m]++,"F"!==i&&(e._i[i]=o)),e},getEntry:y,setStrong:function(e,t,n){c(e,t,function(e,n){this._t=d(e,t),this._k=n,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?l(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,l(1))},n?"entries":"values",!n,!0),h(t)}}},function(e,t,n){var r=n(46);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(64),i=n(150),o=n(151),a=n(45),s=n(104),u=n(152),c={},l={};(t=e.exports=function(e,t,n,h,f){var p,d,m,y,g=f?function(){return e}:u(e),v=r(n,h,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(p=s(e.length);p>b;b++)if((y=t?v(a(d=e[b])[0],d[1]):v(e[b]))===c||y===l)return y}else for(m=g.call(e);!(d=m.next()).done;)if((y=i(m,v,d.value,t))===c||y===l)return y}).BREAK=c,t.RETURN=l},function(e,t,n){"use strict";var r=n(25),i=n(77),o=n(46),a=n(157),s=n(100),u=n(159),c=n(158),l=n(34),h=n(61),f=n(153),p=n(79),d=n(217);e.exports=function(e,t,n,m,y,g){var v=r[e],b=v,w=y?"set":"add",_=b&&b.prototype,E={},T=function(e){var t=_[e];o(_,e,"delete"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof b&&(g||_.forEach&&!h(function(){(new b).entries().next()}))){var S=new b,C=S[w](g?{}:-0,1)!=S,k=h(function(){S.has(1)}),I=f(function(e){new b(e)}),x=!g&&h(function(){for(var e=new b,t=5;t--;)e[w](t,t);return!e.has(-0)});I||((b=t(function(t,n){c(t,b,e);var r=d(new v,t,b);return void 0!=n&&u(n,y,r[w],r),r})).prototype=_,_.constructor=b),(k||x)&&(T("delete"),T("has"),y&&T("get")),(x||C)&&T(w),g&&_.clear&&delete _.clear}else b=m.getConstructor(t,e,y,w),a(b.prototype,n),s.NEED=!0;return p(b,e),E[e]=b,i(i.G+i.W+i.F*(b!=v),E),g||m.setStrong(b,e,y),b}},function(e,t,n){e.exports=!n(15)&&!n(27)(function(){return 7!=Object.defineProperty(n(114)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(41),i=n(28),o=n(163)(!1),a=n(115)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(28),i=n(35),o=n(83);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(29);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(a){var o=e.return;throw void 0!==o&&r(o.call(e)),a}}},function(e,t,n){var r=n(60),i=n(13)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(94),i=n(13)("iterator"),o=n(60);e.exports=n(18).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(38),i=n(20),o=n(73),a=n(35);e.exports=function(e,t,n,s,u){r(t);var c=i(e),l=o(c),h=a(c.length),f=u?h-1:0,p=u?-1:1;if(n<2)for(;;){if(f in l){s=l[f],f+=p;break}if(f+=p,u?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;u?f>=0:h>f;f+=p)f in l&&(s=t(s,l[f],f,c));return s}},function(e,t,n){"use strict";var r=n(68),i=n(133),o=n(60),a=n(28);e.exports=n(91)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t,n){"use strict";var r=n(24).f,i=n(90),o=n(123),a=n(37),s=n(124),u=n(95),c=n(91),l=n(133),h=n(121),f=n(15),p=n(125).fastKey,d=n(126),m=f?"_s":"size",y=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var l=e(function(e,r){s(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=r&&u(r,n,e[c],e)});return o(l.prototype,{clear:function(){for(var e=d(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=d(this,t),r=y(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[m]--}return!!r},forEach:function(e){d(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!y(d(this,t),e)}}),f&&r(l.prototype,"size",{get:function(){return d(this,t)[m]}}),l},def:function(e,t,n){var r,i,o=y(e,t);return o?o.v=n:(e._l=o={i:i=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[m]++,"F"!==i&&(e._i[i]=o)),e},getEntry:y,setStrong:function(e,t,n){c(e,t,function(e,n){this._t=d(e,t),this._k=n,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?l(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,l(1))},n?"entries":"values",!n,!0),h(t)}}},function(e,t,n){"use strict";var r=n(12),i=n(6),o=n(42),a=n(123),s=n(125),u=n(95),c=n(124),l=n(19),h=n(27),f=n(120),p=n(67),d=n(190);e.exports=function(e,t,n,m,y,g){var v=r[e],b=v,w=y?"set":"add",_=b&&b.prototype,E={},T=function(e){var t=_[e];o(_,e,"delete"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof b&&(g||_.forEach&&!h(function(){(new b).entries().next()}))){var S=new b,C=S[w](g?{}:-0,1)!=S,k=h(function(){S.has(1)}),I=f(function(e){new b(e)}),x=!g&&h(function(){for(var e=new b,t=5;t--;)e[w](t,t);return!e.has(-0)});I||((b=t(function(t,n){c(t,b,e);var r=d(new v,t,b);return void 0!=n&&u(n,y,r[w],r),r})).prototype=_,_.constructor=b),(k||x)&&(T("delete"),T("has"),y&&T("get")),(x||C)&&T(w),g&&_.clear&&delete _.clear}else b=m.getConstructor(t,e,y,w),a(b.prototype,n),s.NEED=!0;return p(b,e),E[e]=b,i(i.G+i.W+i.F*(b!=v),E),g||m.setStrong(b,e,y),b}},function(e,t,n){var r=n(15),i=n(56),o=n(28),a=n(74).f;e.exports=function(e){return function(t){for(var n,s=o(t),u=i(s),c=u.length,l=0,h=[];c>l;)n=u[l++],r&&!a.call(s,n)||h.push(e?[n,s[n]]:s[n]);return h}}},function(e,t,n){var r,i,o,a=n(37),s=n(269),u=n(117),c=n(114),l=n(12),h=l.process,f=l.setImmediate,p=l.clearImmediate,d=l.MessageChannel,m=l.Dispatch,y=0,g={},v=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},b=function(e){v.call(e.data)};f&&p||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++y]=function(){s("function"==typeof e?e:Function(e),t)},r(y),y},p=function(e){delete g[e]},"process"==n(49)(h)?r=function(e){h.nextTick(a(v,e,1))}:m&&m.now?r=function(e){m.now(a(v,e,1))}:d?(o=(i=new d).port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),v.call(e)}}:function(e){setTimeout(a(v,e,1),0)}),e.exports={set:f,clear:p}},function(e,t,n){"use strict";var r=n(38);function i(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(98),o=n(175),a=n(176),s=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),u=new o.ErrorFactory("app","Firebase",s),c="[DEFAULT]",l=[],h=function(){function e(e,t,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=o.deepCopy(e),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){l.push(e),setTimeout(function(){return e(null)},0)},removeAuthTokenListener:function(e){l=l.filter(function(t){return t!==e})}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){e.firebase_.INTERNAL.removeApp(e.name_);for(var t=[],n=0,r=Object.keys(e.services_);n<r.length;n++)for(var i=r[n],o=0,a=Object.keys(e.services_[i]);o<a.length;o++){var s=a[o];t.push(e.services_[i][s])}return Promise.all(t.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))}).then(function(){e.isDeleted_=!0,e.services_={}})},e.prototype._getService=function(e,t){if(void 0===t&&(t=c),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==c?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=r}return this.services_[e][t]},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=c),this.services_[e]&&this.services_[e][t]&&delete this.services_[e][t]},e.prototype.extendApp=function(e){var t=this;o.deepExtend(this,e),e.INTERNAL&&e.INTERNAL.addAuthTokenListener&&(l.forEach(function(e){t.INTERNAL.addAuthTokenListener(e)}),l=[])},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw u.create("app-deleted",{appName:this.name_})},e}();h.prototype.name&&h.prototype.options||h.prototype.delete||console.log("dc");var f="6.6.2",p=new a.Logger("@firebase/app");if(o.isBrowser()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var d=self.firebase.SDK_VERSION;d&&d.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var m=function e(){var t=function(e){var t={},n={},r={},i={__esModule:!0,initializeApp:function(n,r){if(void 0===r&&(r={}),"object"!==typeof r||null===r){var a=r;r={name:a}}var s=r;void 0===s.name&&(s.name=c);var h=s.name;if("string"!==typeof h||!h)throw u.create("bad-app-name",{appName:String(h)});if(o.contains(t,h))throw u.create("duplicate-app",{appName:h});var f=new e(n,s,i);return t[h]=f,l(f,"create"),f},app:a,apps:null,SDK_VERSION:f,INTERNAL:{registerService:function(t,c,l,h,f){if(void 0===f&&(f=!1),n[t])return p.debug("There were multiple attempts to register service "+t+"."),i[t];function d(e){if(void 0===e&&(e=a()),"function"!==typeof e[t])throw u.create("invalid-app-argument",{appName:t});return e[t]()}return n[t]=c,h&&(r[t]=h,s().forEach(function(e){h("create",e)})),void 0!==l&&o.deepExtend(d,l),i[t]=d,e.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,t).apply(this,f?e:[])},d},removeApp:function(e){l(t[e],"delete"),delete t[e]},factories:n,useAsService:h}};function a(e){if(e=e||c,!o.contains(t,e))throw u.create("no-app",{appName:e});return t[e]}function s(){return Object.keys(t).map(function(e){return t[e]})}function l(e,t){for(var i=0,o=Object.keys(n);i<o.length;i++){var a=h(0,o[i]);if(null===a)return;r[a]&&r[a](t,e)}}function h(e,t){return"serverAuth"===t?null:t}return i.default=i,Object.defineProperty(i,"apps",{get:s}),a.App=e,i}(h);return t.INTERNAL=i.__assign({},t.INTERNAL,{createFirebaseNamespace:e,extendNamespace:function(e){o.deepExtend(t,e)},createSubscribe:o.createSubscribe,ErrorFactory:o.ErrorFactory,deepExtend:o.deepExtend}),t}(),y=m.initializeApp;m.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.isNode()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),y.apply(void 0,e)};var g=m;t.default=g,t.firebase=g},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(98),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw a(t)},a=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},s=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},c=function(e){try{return u.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=l(e[n],t[n]));return e}var h=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}},e}();function f(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}var p="FirebaseError",d=function(e){function t(n,r){var i=e.call(this,r)||this;return i.code=n,i.name=p,Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,m.prototype.create),i}return r.__extends(t,e),t}(Error),m=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?function(e,t){return e.replace(y,function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"})}(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new d(i,s),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},e}();var y=/\{\$([^}]+)}/g;function g(e){return JSON.parse(e)}var v=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=g(c(o[0])||""),n=g(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:t,claims:n,data:r,signature:i}};var b=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();var w=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"===typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=_),void 0===r.error&&(r.error=_),void 0===r.complete&&(r.complete=_);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}();function _(){}function E(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument "}t.CONSTANTS=i,t.Deferred=h,t.ErrorFactory=m,t.FirebaseError=d,t.Sha1=b,t.assert=o,t.assertionError=a,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){e.apply(void 0,n)}).catch(function(e){t&&t(e)})}},t.base64=u,t.base64Decode=c,t.base64Encode=function(e){var t=s(e);return u.encodeByteArray(t,!0)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createSubscribe=function(e,t){var n=new w(e,t);return n.subscribe.bind(n)},t.decode=v,t.deepCopy=function(e){return l(void 0,e)},t.deepExtend=l,t.errorPrefix=E,t.getUA=f,t.isAdmin=function(e){var t=v(e).claims;return"object"===typeof t&&!0===t.admin},t.isBrowser=function(){return"object"===typeof self&&self.self===self},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isMobileCordova=function(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},t.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(t){return!1}},t.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},t.isReactNative=function(){return"object"===typeof navigator&&"ReactNative"===navigator.product},t.isValidFormat=function(e){var t=v(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t=v(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"===typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},t.issuedAtTime=function(e){var t=v(e).claims;return"object"===typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=g,t.map=function(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r},t.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}}),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;o(++r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(E(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(E(e,t,r)+"must be a valid context object.")},t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!==typeof n)throw new Error(E(e,t,r)+"must be a valid firebase namespace.")}}).call(this,n(22))},function(e,t,n){"use strict";n.r(t),n.d(t,"LogLevel",function(){return r}),n.d(t,"Logger",function(){return s}),n.d(t,"setLogLevel",function(){return u});var r,i=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(r||(r={}));var o=r.INFO,a=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var o=(new Date).toISOString();switch(t){case r.DEBUG:case r.VERBOSE:console.log.apply(console,["["+o+"]  "+e.name+":"].concat(n));break;case r.INFO:console.info.apply(console,["["+o+"]  "+e.name+":"].concat(n));break;case r.WARN:console.warn.apply(console,["["+o+"]  "+e.name+":"].concat(n));break;case r.ERROR:console.error.apply(console,["["+o+"]  "+e.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},s=function(){function e(e){this.name=e,this._logLevel=o,this._logHandler=a,i.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in r))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,r.DEBUG].concat(e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,r.VERBOSE].concat(e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,r.INFO].concat(e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,r.WARN].concat(e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,r.ERROR].concat(e))},e}();function u(e){i.forEach(function(t){t.logLevel=e})}},function(e,t,n){t.f=n(13)},function(e,t,n){},function(e,t,n){!function(e){"use strict";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},n={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode("xml",function(r,i){var o,a,s=r.indentUnit,u={},c=i.htmlMode?t:n;for(var l in c)u[l]=c[l];for(var l in i)u[l]=i[l];function h(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();return"<"==r?e.eat("!")?e.eat("[")?e.match("CDATA[")?n(p("atom","]]>")):null:e.match("--")?n(p("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(function e(t){return function(n,r){for(var i;null!=(i=n.next());){if("<"==i)return r.tokenize=e(t+1),r.tokenize(n,r);if(">"==i){if(1==t){r.tokenize=h;break}return r.tokenize=e(t-1),r.tokenize(n,r)}}return"meta"}}(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=p("meta","?>"),"meta"):(o=e.eat("/")?"closeTag":"openTag",t.tokenize=f,"tag bracket"):"&"==r?(e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"))?"atom":"error":(e.eatWhile(/[^&<]/),null)}function f(e,t){var n=e.next();if(">"==n||"/"==n&&e.eat(">"))return t.tokenize=h,o=">"==n?"endTag":"selfcloseTag","tag bracket";if("="==n)return o="equals",null;if("<"==n){t.tokenize=h,t.state=g,t.tagName=t.tagStart=null;var r=t.tokenize(e,t);return r?r+" tag error":"tag error"}return/[\'\"]/.test(n)?(t.tokenize=function(e){var t=function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=f;break}return"string"};return t.isInAttribute=!0,t}(n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function p(e,t){return function(n,r){for(;!n.eol();){if(n.match(t)){r.tokenize=h;break}n.next()}return e}}function d(e,t,n){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=n,(u.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function m(e){e.context&&(e.context=e.context.prev)}function y(e,t){for(var n;;){if(!e.context)return;if(n=e.context.tagName,!u.contextGrabbers.hasOwnProperty(n)||!u.contextGrabbers[n].hasOwnProperty(t))return;m(e)}}function g(e,t,n){return"openTag"==e?(n.tagStart=t.column(),v):"closeTag"==e?b:g}function v(e,t,n){return"word"==e?(n.tagName=t.current(),a="tag",E):u.allowMissingTagName&&"endTag"==e?(a="tag bracket",E(e,0,n)):(a="error",v)}function b(e,t,n){if("word"==e){var r=t.current();return n.context&&n.context.tagName!=r&&u.implicitlyClosed.hasOwnProperty(n.context.tagName)&&m(n),n.context&&n.context.tagName==r||!1===u.matchClosing?(a="tag",w):(a="tag error",_)}return u.allowMissingTagName&&"endTag"==e?(a="tag bracket",w(e,0,n)):(a="error",_)}function w(e,t,n){return"endTag"!=e?(a="error",w):(m(n),g)}function _(e,t,n){return a="error",w(e,0,n)}function E(e,t,n){if("word"==e)return a="attribute",T;if("endTag"==e||"selfcloseTag"==e){var r=n.tagName,i=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||u.autoSelfClosers.hasOwnProperty(r)?y(n,r):(y(n,r),n.context=new d(n,r,i==n.indented)),g}return a="error",E}function T(e,t,n){return"equals"==e?S:(u.allowMissing||(a="error"),E(e,0,n))}function S(e,t,n){return"string"==e?C:"word"==e&&u.allowUnquoted?(a="string",E):(a="error",E(e,0,n))}function C(e,t,n){return"string"==e?C:E(e,0,n)}return h.isInText=!0,{startState:function(e){var t={tokenize:h,state:g,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;o=null;var n=t.tokenize(e,t);return(n||o)&&"comment"!=n&&(a=null,t.state=t.state(o||n,e,t),a&&(n="error"==a?n+" error":a)),n},indent:function(t,n,r){var i=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+s;if(i&&i.noIndent)return e.Pass;if(t.tokenize!=f&&t.tokenize!=h)return r?r.match(/^(\s*)/)[0].length:0;if(t.tagName)return!1!==u.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+s*(u.multilineTagIndentFactor||1);if(u.alignCDATA&&/<!\[CDATA\[/.test(n))return 0;var o=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(o&&o[1])for(;i;){if(i.tagName==o[2]){i=i.prev;break}if(!u.implicitlyClosed.hasOwnProperty(i.tagName))break;i=i.prev}else if(o)for(;i;){var a=u.contextGrabbers[i.tagName];if(!a||!a.hasOwnProperty(o[2]))break;i=i.prev}for(;i&&i.prev&&!i.startOfLine;)i=i.prev;return i?i.indent+s:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:u.htmlMode?"html":"xml",helperType:u.htmlMode?"html":"xml",skipAttribute:function(e){e.state==S&&(e.state=E)},xmlCurrentTag:function(e){return e.tagName?{name:e.tagName,close:"closeTag"==e.type}:null},xmlCurrentContext:function(e){for(var t=[],n=e.context;n;n=n.prev)n.tagName&&t.push(n.tagName);return t.reverse()}}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}(n(53))},function(e,t,n){"use strict";e.exports=n(282)},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"===typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var i=r();i.withExtraArgument=r,t.a=i},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var r=n(88),i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a={Pending:"PENDING",Fulfilled:"FULFILLED",Rejected:"REJECTED"};function s(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).dispatch;return"function"===typeof t?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[a.Pending,a.Fulfilled,a.Rejected],n=e.promiseTypeSuffixes||t,s=e.promiseTypeDelimiter||"_";return function(e){var t=e.dispatch;return function(e){return function(a){var u=void 0,c=void 0;if(!a.payload)return e(a);var l=a.payload;if(Object(r.a)(l))u=l;else if(Object(r.a)(l.promise))u=l.promise,c=l.data;else{if("function"!==typeof l&&"function"!==typeof l.promise)return e(a);if(u=l.promise?l.promise():l(),c=l.promise?l.data:void 0,!Object(r.a)(u))return e(o({},a,{payload:u}))}var h=a.type,f=a.meta,p=i(n,3),d=p[0],m=p[1],y=p[2],g=function(e,t){return o({type:[h,t?y:m].join(s)},null===e||"undefined"===typeof e?{}:{payload:e},void 0!==f?{meta:f}:{},t?{error:!0}:{})};return e(o({type:[h,d].join(s)},void 0!==c?{payload:c}:{},void 0!==f?{meta:f}:{})),u.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=g(e,!1);return t(n),{value:e,action:n}},function(e){var n=g(e,!0);throw t(n),e})}}}}()({dispatch:t}):(e&&Object({NODE_ENV:"production",PUBLIC_URL:"."}),null)}}).call(this,n(70))},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(1),o=n(21),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),r(t,[{key:"componentDidMount",value:function(){var e=this,t=!0,n=!0,r=o.findDOMNode(this);e.__documentTouchStarted=function(t){r.removeEventListener("click",e.__elementClicked),document.removeEventListener("click",e.__documentClicked)},e.__documentTouchMoved=function(e){n=!1},e.__documentTouchEnded=function(t){n&&e.__documentClicked(t),n=!0},e.__documentClicked=function(t){if(-1===(t.__clickedElements||[]).indexOf(r)){var n=e.onClickOut||e.props.onClickOut;if(!n)return console.warn("onClickOut is not defined.");n.call(e,t)}},e.__elementTouchMoved=function(e){t=!1},e.__elementTouchEnded=function(n){t&&e.__elementClicked(n),t=!0},e.__elementClicked=function(e){e.__clickedElements=e.__clickedElements||[],e.__clickedElements.push(r)},setTimeout(function(){e.__unmounted||e.toggleListeners("addEventListener")},0)}},{key:"toggleListeners",value:function(e){var t=o.findDOMNode(this);t[e]("touchmove",this.__elementTouchMoved),t[e]("touchend",this.__elementTouchEnded),t[e]("click",this.__elementClicked),document[e]("touchstart",this.__documentTouchStarted),document[e]("touchmove",this.__documentTouchMoved),document[e]("touchend",this.__documentTouchEnded),document[e]("click",this.__documentClicked)}},{key:"componentWillUnmount",value:function(){this.toggleListeners("removeEventListener"),this.__unmounted=!0}},{key:"render",value:function(){return Array.isArray(this.props.children)?i.createElement("div",null,this.props.children):i.Children.only(this.props.children)}}]),t}();e.exports=a},function(e,t,n){"use strict";(function(e){var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a,s=n(1),u="undefined"===typeof navigator||!0===e.PREVENT_CODEMIRROR_RENDER;u||(a=n(53));var c=function(){function e(){}return e.equals=function(e,t){var n=this,r=Object.keys,o="undefined"===typeof e?"undefined":i(e),a="undefined"===typeof t?"undefined":i(t);return e&&t&&"object"===o&&o===a?r(e).length===r(t).length&&r(e).every(function(r){return n.equals(e[r],t[r])}):e===t},e}(),l=function(){function e(e,t){this.editor=e,this.props=t}return e.prototype.delegateCursor=function(e,t,n){var r=this.editor.getDoc();n&&this.editor.focus(),t?r.setCursor(e):r.setCursor(e,null,{scroll:!1})},e.prototype.delegateScroll=function(e){this.editor.scrollTo(e.x,e.y)},e.prototype.delegateSelection=function(e,t){this.editor.setSelections(e),t&&this.editor.focus()},e.prototype.apply=function(e){e&&e.selection&&e.selection.ranges&&this.delegateSelection(e.selection.ranges,e.selection.focus||!1),e&&e.cursor&&this.delegateCursor(e.cursor,e.autoScroll||!1,this.editor.getOption("autofocus")||!1),e&&e.scroll&&this.delegateScroll(e.scroll)},e.prototype.applyNext=function(e,t,n){e&&e.selection&&e.selection.ranges&&t&&t.selection&&t.selection.ranges&&!c.equals(e.selection.ranges,t.selection.ranges)&&this.delegateSelection(t.selection.ranges,t.selection.focus||!1),e&&e.cursor&&t&&t.cursor&&!c.equals(e.cursor,t.cursor)&&this.delegateCursor(n.cursor||t.cursor,t.autoScroll||!1,t.autoCursor||!1),e&&e.scroll&&t&&t.scroll&&!c.equals(e.scroll,t.scroll)&&this.delegateScroll(t.scroll)},e.prototype.applyUserDefined=function(e,t){t&&t.cursor&&this.delegateCursor(t.cursor,e.autoScroll||!1,this.editor.getOption("autofocus")||!1)},e.prototype.wire=function(e){var t=this;Object.keys(e||{}).filter(function(e){return/^on/.test(e)}).forEach(function(e){switch(e){case"onBlur":t.editor.on("blur",function(e,n){t.props.onBlur(t.editor,n)});break;case"onContextMenu":t.editor.on("contextmenu",function(e,n){t.props.onContextMenu(t.editor,n)});break;case"onCopy":t.editor.on("copy",function(e,n){t.props.onCopy(t.editor,n)});break;case"onCursor":t.editor.on("cursorActivity",function(e){t.props.onCursor(t.editor,t.editor.getCursor())});break;case"onCursorActivity":t.editor.on("cursorActivity",function(e){t.props.onCursorActivity(t.editor)});break;case"onCut":t.editor.on("cut",function(e,n){t.props.onCut(t.editor,n)});break;case"onDblClick":t.editor.on("dblclick",function(e,n){t.props.onDblClick(t.editor,n)});break;case"onDragEnter":t.editor.on("dragenter",function(e,n){t.props.onDragEnter(t.editor,n)});break;case"onDragLeave":t.editor.on("dragleave",function(e,n){t.props.onDragLeave(t.editor,n)});break;case"onDragOver":t.editor.on("dragover",function(e,n){t.props.onDragOver(t.editor,n)});break;case"onDragStart":t.editor.on("dragstart",function(e,n){t.props.onDragStart(t.editor,n)});break;case"onDrop":t.editor.on("drop",function(e,n){t.props.onDrop(t.editor,n)});break;case"onFocus":t.editor.on("focus",function(e,n){t.props.onFocus(t.editor,n)});break;case"onGutterClick":t.editor.on("gutterClick",function(e,n,r,i){t.props.onGutterClick(t.editor,n,r,i)});break;case"onKeyDown":t.editor.on("keydown",function(e,n){t.props.onKeyDown(t.editor,n)});break;case"onKeyPress":t.editor.on("keypress",function(e,n){t.props.onKeyPress(t.editor,n)});break;case"onKeyUp":t.editor.on("keyup",function(e,n){t.props.onKeyUp(t.editor,n)});break;case"onMouseDown":t.editor.on("mousedown",function(e,n){t.props.onMouseDown(t.editor,n)});break;case"onPaste":t.editor.on("paste",function(e,n){t.props.onPaste(t.editor,n)});break;case"onRenderLine":t.editor.on("renderLine",function(e,n,r){t.props.onRenderLine(t.editor,n,r)});break;case"onScroll":t.editor.on("scroll",function(e){t.props.onScroll(t.editor,t.editor.getScrollInfo())});break;case"onSelection":t.editor.on("beforeSelectionChange",function(e,n){t.props.onSelection(t.editor,n)});break;case"onTouchStart":t.editor.on("touchstart",function(e,n){t.props.onTouchStart(t.editor,n)});break;case"onUpdate":t.editor.on("update",function(e){t.props.onUpdate(t.editor)});break;case"onViewportChange":t.editor.on("viewportChange",function(e,n,r){t.props.onViewportChange(t.editor,n,r)})}})},e}(),h=function(e){function t(t){var n=e.call(this,t)||this;return u?n:(n.applied=!1,n.appliedNext=!1,n.appliedUserDefined=!1,n.deferred=null,n.emulating=!1,n.hydrated=!1,n.initCb=function(){n.props.editorDidConfigure&&n.props.editorDidConfigure(n.editor)},n.mounted=!1,n)}return o(t,e),t.prototype.hydrate=function(e){var t=this,n=r({},a.defaults,this.editor.options,e.options||{});Object.keys(n).some(function(e){return t.editor.getOption(e)!==n[e]})&&Object.keys(n).forEach(function(r){e.options.hasOwnProperty(r)&&t.editor.getOption(r)!==n[r]&&(t.editor.setOption(r,n[r]),t.mirror.setOption(r,n[r]))}),this.hydrated||(this.mounted&&this.deferred?this.resolveChange():this.initChange(e.value||"")),this.hydrated=!0},t.prototype.initChange=function(e){this.emulating=!0;var t=this.editor.lastLine(),n=this.editor.getLine(this.editor.lastLine()).length;this.editor.replaceRange(e||"",{line:0,ch:0},{line:t,ch:n}),this.mirror.setValue(e),this.editor.clearHistory(),this.mirror.clearHistory(),this.emulating=!1},t.prototype.resolveChange=function(){this.emulating=!0,"undo"===this.deferred.origin?this.editor.undo():"redo"===this.deferred.origin?this.editor.redo():this.editor.replaceRange(this.deferred.text,this.deferred.from,this.deferred.to,this.deferred.origin),this.emulating=!1,this.deferred=null},t.prototype.mirrorChange=function(e){return"undo"===e.origin?(this.editor.setHistory(this.mirror.getHistory()),this.mirror.undo()):"redo"===e.origin?(this.editor.setHistory(this.mirror.getHistory()),this.mirror.redo()):this.mirror.replaceRange(e.text,e.from,e.to,e.origin),this.mirror.getValue()},t.prototype.componentWillMount=function(){u||this.props.editorWillMount&&this.props.editorWillMount()},t.prototype.componentDidMount=function(){var e=this;u||(this.props.defineMode&&this.props.defineMode.name&&this.props.defineMode.fn&&a.defineMode(this.props.defineMode.name,this.props.defineMode.fn),this.editor=a(this.ref),this.shared=new l(this.editor,this.props),this.mirror=a(function(){}),this.editor.on("electricInput",function(){e.mirror.setHistory(e.editor.getHistory())}),this.editor.on("cursorActivity",function(){e.mirror.setCursor(e.editor.getCursor())}),this.editor.on("beforeChange",function(t,n){if(!e.emulating){n.cancel(),e.deferred=n;var r=e.mirrorChange(e.deferred);e.props.onBeforeChange&&e.props.onBeforeChange(e.editor,e.deferred,r)}}),this.editor.on("change",function(t,n){e.mounted&&e.props.onChange&&e.props.onChange(e.editor,n,e.editor.getValue())}),this.hydrate(this.props),this.shared.apply(this.props),this.applied=!0,this.mounted=!0,this.shared.wire(this.props),this.editor.getOption("autofocus")&&this.editor.focus(),this.props.editorDidMount&&this.props.editorDidMount(this.editor,this.editor.getValue(),this.initCb))},t.prototype.componentWillReceiveProps=function(e){if(!u){var t={cursor:null};e.value!==this.props.value&&(this.hydrated=!1),this.props.autoCursor||void 0===this.props.autoCursor||(t.cursor=this.editor.getCursor()),this.hydrate(e),this.appliedNext||(this.shared.applyNext(this.props,e,t),this.appliedNext=!0),this.shared.applyUserDefined(this.props,t),this.appliedUserDefined=!0}},t.prototype.componentWillUnmount=function(){u||this.props.editorWillUnmount&&this.props.editorWillUnmount(a)},t.prototype.shouldComponentUpdate=function(e,t){return!u},t.prototype.render=function(){var e=this;if(u)return null;var t=this.props.className?"react-codemirror2 "+this.props.className:"react-codemirror2";return s.createElement("div",{className:t,ref:function(t){return e.ref=t}})},t}(s.Component);t.Controlled=h;var f=function(e){function t(t){var n=e.call(this,t)||this;return u?n:(n.applied=!1,n.appliedUserDefined=!1,n.continueChange=!1,n.detached=!1,n.hydrated=!1,n.initCb=function(){n.props.editorDidConfigure&&n.props.editorDidConfigure(n.editor)},n.mounted=!1,n.onBeforeChangeCb=function(){n.continueChange=!0},n)}return o(t,e),t.prototype.hydrate=function(e){var t=this,n=r({},a.defaults,this.editor.options,e.options||{});if(Object.keys(n).some(function(e){return t.editor.getOption(e)!==n[e]})&&Object.keys(n).forEach(function(r){e.options.hasOwnProperty(r)&&t.editor.getOption(r)!==n[r]&&t.editor.setOption(r,n[r])}),!this.hydrated){var i=this.editor.lastLine(),o=this.editor.getLine(this.editor.lastLine()).length;this.editor.replaceRange(e.value||"",{line:0,ch:0},{line:i,ch:o})}this.hydrated=!0},t.prototype.componentWillMount=function(){u||this.props.editorWillMount&&this.props.editorWillMount()},t.prototype.componentDidMount=function(){var e=this;u||(this.detached=!0===this.props.detach,this.props.defineMode&&this.props.defineMode.name&&this.props.defineMode.fn&&a.defineMode(this.props.defineMode.name,this.props.defineMode.fn),this.editor=a(this.ref),this.shared=new l(this.editor,this.props),this.editor.on("beforeChange",function(t,n){e.props.onBeforeChange&&e.props.onBeforeChange(e.editor,n,e.editor.getValue(),e.onBeforeChangeCb)}),this.editor.on("change",function(t,n){e.mounted&&e.props.onChange&&(e.props.onBeforeChange?e.continueChange&&e.props.onChange(e.editor,n,e.editor.getValue()):e.props.onChange(e.editor,n,e.editor.getValue()))}),this.hydrate(this.props),this.shared.apply(this.props),this.applied=!0,this.mounted=!0,this.shared.wire(this.props),this.editor.clearHistory(),this.props.editorDidMount&&this.props.editorDidMount(this.editor,this.editor.getValue(),this.initCb))},t.prototype.componentWillReceiveProps=function(e){if(this.detached&&!1===e.detach&&(this.detached=!1,this.props.editorDidAttach&&this.props.editorDidAttach(this.editor)),this.detached||!0!==e.detach||(this.detached=!0,this.props.editorDidDetach&&this.props.editorDidDetach(this.editor)),!u&&!this.detached){var t={cursor:null};e.value!==this.props.value&&(this.hydrated=!1,this.applied=!1,this.appliedUserDefined=!1),this.props.autoCursor||void 0===this.props.autoCursor||(t.cursor=this.editor.getCursor()),this.hydrate(e),this.applied||(this.shared.apply(this.props),this.applied=!0),this.appliedUserDefined||(this.shared.applyUserDefined(this.props,t),this.appliedUserDefined=!0)}},t.prototype.componentWillUnmount=function(){u||this.props.editorWillUnmount&&this.props.editorWillUnmount(a)},t.prototype.shouldComponentUpdate=function(e,t){var n=!0;return u&&(n=!1),this.detached&&(n=!1),n},t.prototype.render=function(){var e=this;if(u)return null;var t=this.props.className?"react-codemirror2 "+this.props.className:"react-codemirror2";return s.createElement("div",{className:t,ref:function(t){return e.ref=t}})},t}(s.Component);t.UnControlled=f}).call(this,n(22))},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";var r=n(17),i=n.n(r),o=n(23),a=n.n(o),s=n(1),u=n.n(s),c=n(0),l=n.n(c),h=n(54),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var d=function(e){return 0===u.a.Children.count(e)},m=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=p(this,e.call.apply(e,[this].concat(o))),r.state={match:r.computeMatch(r.props,r.context.router)},p(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:f({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var n=e.computedMatch,r=e.location,i=e.path,o=e.strict,s=e.exact,u=e.sensitive;if(n)return n;a()(t,"You should not use <Route> or withRouter() outside a <Router>");var c=t.route,l=(r||c.location).pathname;return Object(h.a)(l,{path:i,strict:o,exact:s,sensitive:u},c.match)},t.prototype.componentWillMount=function(){i()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),i()(!(this.props.component&&this.props.children&&!d(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),i()(!(this.props.render&&this.props.children&&!d(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){i()(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),i()(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,n=t.children,r=t.component,i=t.render,o=this.context.router,a=o.history,s=o.route,c=o.staticContext,l={match:e,location:this.props.location||s.location,history:a,staticContext:c};return r?e?u.a.createElement(r,l):null:i?e?i(l):null:"function"===typeof n?n(l):n&&!d(n)?u.a.Children.only(n):null},t}(u.a.Component);m.propTypes={computedMatch:l.a.object,path:l.a.string,exact:l.a.bool,strict:l.a.bool,sensitive:l.a.bool,component:l.a.func,render:l.a.func,children:l.a.oneOfType([l.a.func,l.a.node]),location:l.a.object},m.contextTypes={router:l.a.shape({history:l.a.object.isRequired,route:l.a.object.isRequired,staticContext:l.a.object})},m.childContextTypes={router:l.a.object.isRequired};var y=m;t.a=y},function(e,t,n){"use strict";e.exports=n(281)},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){var r=n(19),i=n(254).set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},function(e,t,n){(function(e){var r="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(283),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(22))},function(e,t,n){"use strict";var r=n(90),i=n(59),o=n(67),a={};n(47)(a,n(13)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},,function(e,t,n){"use strict";"undefined"===typeof Promise&&(n(135).enable(),window.Promise=n(137)),n(138),Object.assign=n(71),n(139),n(148),n(212),n(219),n(221).polyfill(window)},function(e,t,n){"use strict";(function(t){function n(e){i.length||(r(),!0),i[i.length]=e}e.exports=n;var r,i=[],o=0,a=1024;function s(){for(;o<i.length;){var e=o;if(o+=1,i[e].call(),o>a){for(var t=0,n=i.length-o;t<n;t++)i[t]=i[t+o];i.length-=o,o=0}}i.length=0,o=0,!1}var u="undefined"!==typeof t?t:self,c=u.MutationObserver||u.WebKitMutationObserver;function l(e){return function(){var t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}r="function"===typeof c?function(e){var t=1,n=new c(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}(s):l(s),n.requestFlush=r,n.makeRequestCallFromTimer=l}).call(this,n(22))},function(e,t,n){"use strict";var r=n(25),i=n(43),o=n(39),a=n(77),s=n(46),u=n(100).KEY,c=n(61),l=n(101),h=n(79),f=n(63),p=n(16),d=n(142),m=n(198),y=n(199),g=n(203),v=n(45),b=n(34),w=n(51),_=n(99),E=n(62),T=n(109),S=n(206),C=n(146),k=n(33),I=n(80),x=C.f,N=k.f,A=S.f,O=r.Symbol,D=r.JSON,R=D&&D.stringify,P=p("_hidden"),M=p("toPrimitive"),L={}.propertyIsEnumerable,F=l("symbol-registry"),U=l("symbols"),j=l("op-symbols"),q=Object.prototype,B="function"==typeof O,V=r.QObject,W=!V||!V.prototype||!V.prototype.findChild,z=o&&c(function(){return 7!=T(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=x(q,t);r&&delete q[t],N(e,t,n),r&&e!==q&&N(q,t,r)}:N,H=function(e){var t=U[e]=T(O.prototype);return t._k=e,t},K=B&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},Q=function(e,t,n){return e===q&&Q(j,t,n),v(e),t=_(t,!0),v(n),i(U,t)?(n.enumerable?(i(e,P)&&e[P][t]&&(e[P][t]=!1),n=T(n,{enumerable:E(0,!1)})):(i(e,P)||N(e,P,E(1,{})),e[P][t]=!0),z(e,t,n)):N(e,t,n)},G=function(e,t){v(e);for(var n,r=y(t=w(t)),i=0,o=r.length;o>i;)Q(e,n=r[i++],t[n]);return e},Y=function(e){var t=L.call(this,e=_(e,!0));return!(this===q&&i(U,e)&&!i(j,e))&&(!(t||!i(this,e)||!i(U,e)||i(this,P)&&this[P][e])||t)},X=function(e,t){if(e=w(e),t=_(t,!0),e!==q||!i(U,t)||i(j,t)){var n=x(e,t);return!n||!i(U,t)||i(e,P)&&e[P][t]||(n.enumerable=!0),n}},$=function(e){for(var t,n=A(w(e)),r=[],o=0;n.length>o;)i(U,t=n[o++])||t==P||t==u||r.push(t);return r},J=function(e){for(var t,n=e===q,r=A(n?j:w(e)),o=[],a=0;r.length>a;)!i(U,t=r[a++])||n&&!i(q,t)||o.push(U[t]);return o};B||(s((O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0);return o&&W&&z(q,e,{configurable:!0,set:function t(n){this===q&&t.call(j,n),i(this,P)&&i(this[P],e)&&(this[P][e]=!1),z(this,e,E(1,n))}}),H(e)}).prototype,"toString",function(){return this._k}),C.f=X,k.f=Q,n(145).f=S.f=$,n(108).f=Y,n(144).f=J,o&&!n(78)&&s(q,"propertyIsEnumerable",Y,!0),d.f=function(e){return H(p(e))}),a(a.G+a.W+a.F*!B,{Symbol:O});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)p(Z[ee++]);for(var te=I(p.store),ne=0;te.length>ne;)m(te[ne++]);a(a.S+a.F*!B,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=O(e)},keyFor:function(e){if(!K(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!B,"Object",{create:function(e,t){return void 0===t?T(e):G(T(e),t)},defineProperty:Q,defineProperties:G,getOwnPropertyDescriptor:X,getOwnPropertyNames:$,getOwnPropertySymbols:J}),D&&a(a.S+a.F*(!B||c(function(){var e=O();return"[null]"!=R([e])||"{}"!=R({a:e})||"{}"!=R(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!K(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!K(t))return t}),r[1]=t,R.apply(D,r)}}),O.prototype[M]||n(44)(O.prototype,M,O.prototype.valueOf),h(O,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(25),i=n(32),o=n(78),a=n(142),s=n(33).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var r=n(80),i=n(144),o=n(108);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var r=n(102);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(51),i=n(104),o=n(202);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(105),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(102);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(33),i=n(45),o=n(80);e.exports=n(39)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(25).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(51),i=n(145).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(t){return a.slice()}}(e):i(r(e))}},function(e,t,n){var r=n(105),i=n(103);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(109),i=n(62),o=n(79),a={};n(44)(a,n(16)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(43),i=n(149),o=n(106)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){"use strict";var r=n(64),i=n(77),o=n(149),a=n(150),s=n(151),u=n(104),c=n(211),l=n(152);i(i.S+i.F*!n(153)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,h,f=o(e),p="function"==typeof this?this:Array,d=arguments.length,m=d>1?arguments[1]:void 0,y=void 0!==m,g=0,v=l(f);if(y&&(m=r(m,d>2?arguments[2]:void 0,2)),void 0==v||p==Array&&s(v))for(n=new p(t=u(f.length));t>g;g++)c(n,g,y?m(f[g],g):f[g]);else for(h=v.call(f),n=new p;!(i=h.next()).done;g++)c(n,g,y?a(h,m,[i.value,g],!0):i.value);return n.length=g,n}})},function(e,t,n){"use strict";var r=n(33),i=n(62);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){n(110),n(111),n(154),n(215),e.exports=n(32).Map},function(e,t,n){"use strict";var r=n(214),i=n(155),o=n(65),a=n(51);e.exports=n(112)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t,n){var r=n(16)("unscopables"),i=Array.prototype;void 0==i[r]&&n(44)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t,n){"use strict";var r=n(156),i=n(113);e.exports=n(160)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(25),i=n(33),o=n(39),a=n(16)("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(34),i=n(218).set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},function(e,t,n){var r=n(34),i=n(45),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(64)(Function.call,n(146).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){n(110),n(111),n(154),n(220),e.exports=n(32).Set},function(e,t,n){"use strict";var r=n(156),i=n(113);e.exports=n(160)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){(function(t){for(var r=n(222),i="undefined"===typeof window?t:window,o=["moz","webkit"],a="AnimationFrame",s=i["request"+a],u=i["cancel"+a]||i["cancelRequest"+a],c=0;!s&&c<o.length;c++)s=i[o[c]+"Request"+a],u=i[o[c]+"Cancel"+a]||i[o[c]+"CancelRequest"+a];if(!s||!u){var l=0,h=0,f=[];s=function(e){if(0===f.length){var t=r(),n=Math.max(0,1e3/60-(t-l));l=n+t,setTimeout(function(){var e=f.slice(0);f.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(l)}catch(n){setTimeout(function(){throw n},0)}},Math.round(n))}return f.push({handle:++h,callback:e,cancelled:!1}),h},u=function(e){for(var t=0;t<f.length;t++)f[t].handle===e&&(f[t].cancelled=!0)}}e.exports=function(e){return s.call(i,e)},e.exports.cancel=function(){u.apply(i,arguments)},e.exports.polyfill=function(e){e||(e=i),e.requestAnimationFrame=s,e.cancelAnimationFrame=u}}).call(this,n(22))},function(e,t,n){(function(t){(function(){var n,r,i,o,a,s;"undefined"!==typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!==typeof t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-a)/1e6},r=t.hrtime,o=(n=function(){var e;return 1e9*(e=r())[0]+e[1]})(),s=1e9*t.uptime(),a=o-s):Date.now?(e.exports=function(){return Date.now()-i},i=Date.now()):(e.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,n(70))},function(e,t,n){"use strict";"undefined"===typeof Promise&&(n(135).enable(),window.Promise=n(137)),n(138),Object.assign=n(71),n(139),n(148)},function(e,t,n){n(81),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(247),n(249),n(250),n(251),n(168),e.exports=n(18).Array},function(e,t,n){var r=n(72),i=n(89);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},function(e,t,n){e.exports=n(82)("native-function-to-string",Function.toString)},function(e,t,n){var r=n(24),i=n(29),o=n(56);e.exports=n(15)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(6);r(r.S,"Array",{isArray:n(118)})},function(e,t,n){"use strict";var r=n(37),i=n(6),o=n(20),a=n(164),s=n(165),u=n(35),c=n(119),l=n(166);i(i.S+i.F*!n(120)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,h,f=o(e),p="function"==typeof this?this:Array,d=arguments.length,m=d>1?arguments[1]:void 0,y=void 0!==m,g=0,v=l(f);if(y&&(m=r(m,d>2?arguments[2]:void 0,2)),void 0==v||p==Array&&s(v))for(n=new p(t=u(f.length));t>g;g++)c(n,g,y?m(f[g],g):f[g]);else for(h=v.call(f),n=new p;!(i=h.next()).done;g++)c(n,g,y?a(h,m,[i.value,g],!0):i.value);return n.length=g,n}})},function(e,t,n){"use strict";var r=n(6),i=n(119);r(r.S+r.F*n(27)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)i(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(6),i=n(28),o=[].join;r(r.P+r.F*(n(73)!=Object||!n(26)(o)),"Array",{join:function(e){return o.call(i(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(6),i=n(117),o=n(49),a=n(83),s=n(35),u=[].slice;r(r.P+r.F*n(27)(function(){i&&u.call(i)}),"Array",{slice:function(e,t){var n=s(this.length),r=o(this);if(t=void 0===t?n:t,"Array"==r)return u.call(this,e,t);for(var i=a(e,n),c=a(t,n),l=s(c-i),h=new Array(l),f=0;f<l;f++)h[f]="String"==r?this.charAt(i+f):this[i+f];return h}})},function(e,t,n){"use strict";var r=n(6),i=n(38),o=n(20),a=n(27),s=[].sort,u=[1,2,3];r(r.P+r.F*(a(function(){u.sort(void 0)})||!a(function(){u.sort(null)})||!n(26)(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),i(e))}})},function(e,t,n){"use strict";var r=n(6),i=n(48)(0),o=n(26)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r=n(236);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(19),i=n(118),o=n(13)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(6),i=n(48)(1);r(r.P+r.F*!n(26)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(6),i=n(48)(2);r(r.P+r.F*!n(26)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(6),i=n(48)(3);r(r.P+r.F*!n(26)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(6),i=n(48)(4);r(r.P+r.F*!n(26)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(6),i=n(167);r(r.P+r.F*!n(26)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(6),i=n(167);r(r.P+r.F*!n(26)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(6),i=n(163)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(26)(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(6),i=n(28),o=n(72),a=n(35),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n(26)(s)),"Array",{lastIndexOf:function(e){if(u)return s.apply(this,arguments)||0;var t=i(this),n=a(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){var r=n(6);r(r.P,"Array",{copyWithin:n(246)}),n(68)("copyWithin")},function(e,t,n){"use strict";var r=n(20),i=n(83),o=n(35);e.exports=[].copyWithin||function(e,t){var n=r(this),a=o(n.length),s=i(e,a),u=i(t,a),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?a:i(c,a))-u,a-s),h=1;for(u<s&&s<u+l&&(h=-1,u+=l-1,s+=l-1);l-- >0;)u in n?n[s]=n[u]:delete n[s],s+=h,u+=h;return n}},function(e,t,n){var r=n(6);r(r.P,"Array",{fill:n(248)}),n(68)("fill")},function(e,t,n){"use strict";var r=n(20),i=n(83),o=n(35);e.exports=function(e){for(var t=r(this),n=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var r=n(6),i=n(48)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),r(r.P+r.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(68)("find")},function(e,t,n){"use strict";var r=n(6),i=n(48)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(68)(o)},function(e,t,n){n(121)("Array")},function(e,t,n){n(84),n(81),n(122),n(253),e.exports=n(18).Map},function(e,t,n){"use strict";var r=n(169),i=n(126);e.exports=n(170)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){var r=n(19),i=n(29),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(37)(Function.call,n(58).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){n(84),n(81),n(122),n(256),e.exports=n(18).Set},function(e,t,n){"use strict";var r=n(169),i=n(126);e.exports=n(170)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){n(258),n(260),n(261),n(262),n(263),n(264),n(265),e.exports=n(18).Object},function(e,t,n){var r=n(6),i=n(259),o=n(28),a=n(58),s=n(119);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),u=a.f,c=i(r),l={},h=0;c.length>h;)void 0!==(n=u(r,t=c[h++]))&&s(l,t,n);return l}})},function(e,t,n){var r=n(92),i=n(96),o=n(29),a=n(12).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(6),i=n(171)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){var r=n(6),i=n(171)(!0);r(r.S,"Object",{entries:function(e){return i(e)}})},function(e,t,n){"use strict";var r=n(6),i=n(20),o=n(38),a=n(24);n(15)&&r(r.P+n(85),"Object",{__defineGetter__:function(e,t){a.f(i(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(6),i=n(20),o=n(38),a=n(24);n(15)&&r(r.P+n(85),"Object",{__defineSetter__:function(e,t){a.f(i(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(6),i=n(20),o=n(57),a=n(93),s=n(58).f;n(15)&&r(r.P+n(85),"Object",{__lookupGetter__:function(e){var t,n=i(this),r=o(e,!0);do{if(t=s(n,r))return t.get}while(n=a(n))}})},function(e,t,n){"use strict";var r=n(6),i=n(20),o=n(57),a=n(93),s=n(58).f;n(15)&&r(r.P+n(85),"Object",{__lookupSetter__:function(e){var t,n=i(this),r=o(e,!0);do{if(t=s(n,r))return t.set}while(n=a(n))}})},function(e,t,n){n(84),n(81),n(122),n(267),e.exports=n(18).Promise},function(e,t,n){"use strict";var r,i,o,a,s=n(52),u=n(12),c=n(37),l=n(94),h=n(6),f=n(19),p=n(38),d=n(124),m=n(95),y=n(268),g=n(172).set,v=n(270)(),b=n(173),w=n(271),_=n(272),E=n(273),T=u.TypeError,S=u.process,C=S&&S.versions,k=C&&C.v8||"",I=u.Promise,x="process"==l(S),N=function(){},A=i=b.f,O=!!function(){try{var e=I.resolve(1),t=(e.constructor={})[n(13)("species")]=function(e){e(N,N)};return(x||"function"==typeof PromiseRejectionEvent)&&e.then(N)instanceof t&&0!==k.indexOf("6.6")&&-1===_.indexOf("Chrome/66")}catch(r){}}(),D=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},R=function(e,t){if(!e._n){e._n=!0;var n=e._c;v(function(){for(var r=e._v,i=1==e._s,o=0,a=function(t){var n,o,a,s=i?t.ok:t.fail,u=t.resolve,c=t.reject,l=t.domain;try{s?(i||(2==e._h&&L(e),e._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===t.promise?c(T("Promise-chain cycle")):(o=D(n))?o.call(n,u,c):u(n)):c(r)}catch(h){l&&!a&&l.exit(),c(h)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&P(e)})}},P=function(e){g.call(u,function(){var t,n,r,i=e._v,o=M(e);if(o&&(t=w(function(){x?S.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=x||M(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},M=function(e){return 1!==e._h&&0===(e._a||e._c).length},L=function(e){g.call(u,function(){var t;x?S.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},F=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),R(t,!0))},U=function e(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw T("Promise can't be resolved itself");(n=D(t))?v(function(){var i={_w:r,_d:!1};try{n.call(t,c(e,i,1),c(F,i,1))}catch(o){F.call(i,o)}}):(r._v=t,r._s=1,R(r,!1))}catch(i){F.call({_w:r,_d:!1},i)}}};O||(I=function(e){d(this,I,"Promise","_h"),p(e),r.call(this);try{e(c(U,this,1),c(F,this,1))}catch(t){F.call(this,t)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(123)(I.prototype,{then:function(e,t){var n=A(y(this,I));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=x?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&R(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=c(U,e,1),this.reject=c(F,e,1)},b.f=A=function(e){return e===I||e===a?new o(e):i(e)}),h(h.G+h.W+h.F*!O,{Promise:I}),n(67)(I,"Promise"),n(121)("Promise"),a=n(18).Promise,h(h.S+h.F*!O,"Promise",{reject:function(e){var t=A(this);return(0,t.reject)(e),t.promise}}),h(h.S+h.F*(s||!O),"Promise",{resolve:function(e){return E(s&&this===a?I:this,e)}}),h(h.S+h.F*!(O&&n(120)(function(e){I.all(e).catch(N)})),"Promise",{all:function(e){var t=this,n=A(t),r=n.resolve,i=n.reject,o=w(function(){var n=[],o=0,a=1;m(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=A(t),r=n.reject,i=w(function(){m(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(e,t,n){var r=n(29),i=n(38),o=n(13)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(12),i=n(172).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(49)(a);e.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(o){throw e?n():t=void 0,o}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(c)}}else n=function(){i.call(r,c)};else{var h=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=h=!h}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},function(e,t,n){var r=n(12).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){var r=n(29),i=n(19),o=n(173);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(1),i=n(71),o=n(276);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=!1,u=null,c=!1,l=null,h={onError:function(e){s=!0,u=e}};function f(e,t,n,r,i,o,a,c,l){s=!1,u=null,function(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}.apply(h,arguments)}var p=null,d=null,m=null;function y(e,t,n){var r=e.type||"unknown-event";e.currentTarget=m(n),function(e,t,n,r,i,o,h,p,d){if(f.apply(this,arguments),s){if(!s)throw Error(a(198));var m=u;s=!1,u=null,c||(c=!0,l=m)}}(r,t,void 0,e),e.currentTarget=null}var g=null,v={};function b(){if(g)for(var e in v){var t=v[e],n=g.indexOf(e);if(!(-1<n))throw Error(a(96,e));if(!_[n]){if(!t.extractEvents)throw Error(a(97,e));for(var r in _[n]=t,n=t.eventTypes){var i=void 0,o=n[r],s=t,u=r;if(E.hasOwnProperty(u))throw Error(a(99,u));E[u]=o;var c=o.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&w(c[i],s,u);i=!0}else o.registrationName?(w(o.registrationName,s,u),i=!0):i=!1;if(!i)throw Error(a(98,r,e))}}}}function w(e,t,n){if(T[e])throw Error(a(100,e));T[e]=t,S[e]=t.eventTypes[n].dependencies}var _=[],E={},T={},S={};function C(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!v.hasOwnProperty(t)||v[t]!==r){if(v[t])throw Error(a(102,t));v[t]=r,n=!0}}n&&b()}var k=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),I=null,x=null,N=null;function A(e){if(e=d(e)){if("function"!==typeof I)throw Error(a(280));var t=e.stateNode;t&&(t=p(t),I(e.stateNode,e.type,t))}}function O(e){x?N?N.push(e):N=[e]:x=e}function D(){if(x){var e=x,t=N;if(N=x=null,A(e),t)for(e=0;e<t.length;e++)A(t[e])}}function R(e,t){return e(t)}function P(e,t,n,r,i){return e(t,n,r,i)}function M(){}var L=R,F=!1,U=!1;function j(){null===x&&null===N||(M(),D())}function q(e,t,n){if(U)return e(t,n);U=!0;try{return L(e,t,n)}finally{U=!1,j()}}var B=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,V=Object.prototype.hasOwnProperty,W={},z={};function H(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var K={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){K[e]=new H(e,0,!1,e,null,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];K[t]=new H(t,1,!1,e[1],null,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){K[e]=new H(e,2,!1,e.toLowerCase(),null,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){K[e]=new H(e,2,!1,e,null,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){K[e]=new H(e,3,!1,e.toLowerCase(),null,!1)}),["checked","multiple","muted","selected"].forEach(function(e){K[e]=new H(e,3,!0,e,null,!1)}),["capture","download"].forEach(function(e){K[e]=new H(e,4,!1,e,null,!1)}),["cols","rows","size","span"].forEach(function(e){K[e]=new H(e,6,!1,e,null,!1)}),["rowSpan","start"].forEach(function(e){K[e]=new H(e,5,!1,e.toLowerCase(),null,!1)});var Q=/[\-:]([a-z])/g;function G(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Q,G);K[t]=new H(t,1,!1,e,null,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Q,G);K[t]=new H(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Q,G);K[t]=new H(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)}),["tabIndex","crossOrigin"].forEach(function(e){K[e]=new H(e,1,!1,e.toLowerCase(),null,!1)}),K.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach(function(e){K[e]=new H(e,1,!1,e.toLowerCase(),null,!0)});var Y=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function X(e,t,n,r){var i=K.hasOwnProperty(t)?K[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!V.call(z,e)||!V.call(W,e)&&(B.test(e)?z[e]=!0:(W[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}Y.hasOwnProperty("ReactCurrentDispatcher")||(Y.ReactCurrentDispatcher={current:null}),Y.hasOwnProperty("ReactCurrentBatchConfig")||(Y.ReactCurrentBatchConfig={suspense:null});var $=/^(.*)[\\\/]/,J="function"===typeof Symbol&&Symbol.for,Z=J?Symbol.for("react.element"):60103,ee=J?Symbol.for("react.portal"):60106,te=J?Symbol.for("react.fragment"):60107,ne=J?Symbol.for("react.strict_mode"):60108,re=J?Symbol.for("react.profiler"):60114,ie=J?Symbol.for("react.provider"):60109,oe=J?Symbol.for("react.context"):60110,ae=J?Symbol.for("react.concurrent_mode"):60111,se=J?Symbol.for("react.forward_ref"):60112,ue=J?Symbol.for("react.suspense"):60113,ce=J?Symbol.for("react.suspense_list"):60120,le=J?Symbol.for("react.memo"):60115,he=J?Symbol.for("react.lazy"):60116,fe=J?Symbol.for("react.block"):60121,pe="function"===typeof Symbol&&Symbol.iterator;function de(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function me(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case te:return"Fragment";case ee:return"Portal";case re:return"Profiler";case ne:return"StrictMode";case ue:return"Suspense";case ce:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case oe:return"Context.Consumer";case ie:return"Context.Provider";case se:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case le:return me(e.type);case fe:return me(e.render);case he:if(e=1===e._status?e._result:null)return me(e)}return null}function ye(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=me(e.type);n=null,r&&(n=me(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace($,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}function ge(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function ve(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function be(e){e._valueTracker||(e._valueTracker=function(e){var t=ve(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function we(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ve(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function _e(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ge(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Te(e,t){null!=(t=t.checked)&&X(e,"checked",t,!1)}function Se(e,t){Te(e,t);var n=ge(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ke(e,t.type,n):t.hasOwnProperty("defaultValue")&&ke(e,t.type,ge(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ce(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ke(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ie(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(t.children))&&(e.children=t),e}function xe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ge(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ge(n)}}function Oe(e,t){var n=ge(t.value),r=ge(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function De(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Re="http://www.w3.org/1999/xhtml",Pe="http://www.w3.org/2000/svg";function Me(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Me(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Fe,Ue,je=(Ue=function(e,t){if(e.namespaceURI!==Pe||"innerHTML"in e)e.innerHTML=t;else{for((Fe=Fe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return Ue(e,t)})}:Ue);function qe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Be(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ve={animationend:Be("Animation","AnimationEnd"),animationiteration:Be("Animation","AnimationIteration"),animationstart:Be("Animation","AnimationStart"),transitionend:Be("Transition","TransitionEnd")},We={},ze={};function He(e){if(We[e])return We[e];if(!Ve[e])return e;var t,n=Ve[e];for(t in n)if(n.hasOwnProperty(t)&&t in ze)return We[e]=n[t];return e}k&&(ze=document.createElement("div").style,"AnimationEvent"in window||(delete Ve.animationend.animation,delete Ve.animationiteration.animation,delete Ve.animationstart.animation),"TransitionEvent"in window||delete Ve.transitionend.transition);var Ke=He("animationend"),Qe=He("animationiteration"),Ge=He("animationstart"),Ye=He("transitionend"),Xe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$e=new("function"===typeof WeakMap?WeakMap:Map);function Je(e){var t=$e.get(e);return void 0===t&&(t=new Map,$e.set(e,t)),t}function Ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function et(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function tt(e){if(Ze(e)!==e)throw Error(a(188))}function nt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return tt(i),e;if(o===r)return tt(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function rt(e,t){if(null==t)throw Error(a(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function it(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var ot=null;function at(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)y(e,t[r],n[r]);else t&&y(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function st(e){if(null!==e&&(ot=rt(ot,e)),e=ot,ot=null,e){if(it(e,at),ot)throw Error(a(95));if(c)throw e=l,c=!1,l=null,e}}function ut(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ct(e){if(!k)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var lt=[];function ht(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>lt.length&&lt.push(e)}function ft(e,t,n,r){if(lt.length){var i=lt.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function pt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=Nn(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=ut(e.nativeEvent);r=e.topLevelType;var o=e.nativeEvent,a=e.eventSystemFlags;0===n&&(a|=64);for(var s=null,u=0;u<_.length;u++){var c=_[u];c&&(c=c.extractEvents(r,t,o,i,a))&&(s=rt(s,c))}st(s)}}function dt(e,t,n){if(!n.has(e)){switch(e){case"scroll":Gt(t,"scroll",!0);break;case"focus":case"blur":Gt(t,"focus",!0),Gt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ct(e)&&Gt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Xe.indexOf(e)&&Qt(e,t)}n.set(e,null)}}var mt,yt,gt,vt=!1,bt=[],wt=null,_t=null,Et=null,Tt=new Map,St=new Map,Ct=[],kt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),It="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function xt(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Nt(e,t){switch(e){case"focus":case"blur":wt=null;break;case"dragenter":case"dragleave":_t=null;break;case"mouseover":case"mouseout":Et=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":St.delete(t.pointerId)}}function At(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=xt(t,n,r,i,o),null!==t&&(null!==(t=An(t))&&yt(t)),e):(e.eventSystemFlags|=r,e)}function Ot(e){var t=Nn(e.target);if(null!==t){var n=Ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=et(n)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,function(){gt(n)})}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Dt(e){if(null!==e.blockedOn)return!1;var t=Xt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=An(t);return null!==n&&yt(n),e.blockedOn=t,!1}return!0}function Rt(e,t,n){Dt(e)&&n.delete(t)}function Pt(){for(vt=!1;0<bt.length;){var e=bt[0];if(null!==e.blockedOn){null!==(e=An(e.blockedOn))&&mt(e);break}var t=Xt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:bt.shift()}null!==wt&&Dt(wt)&&(wt=null),null!==_t&&Dt(_t)&&(_t=null),null!==Et&&Dt(Et)&&(Et=null),Tt.forEach(Rt),St.forEach(Rt)}function Mt(e,t){e.blockedOn===t&&(e.blockedOn=null,vt||(vt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Pt)))}function Lt(e){function t(t){return Mt(t,e)}if(0<bt.length){Mt(bt[0],e);for(var n=1;n<bt.length;n++){var r=bt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==wt&&Mt(wt,e),null!==_t&&Mt(_t,e),null!==Et&&Mt(Et,e),Tt.forEach(t),St.forEach(t),n=0;n<Ct.length;n++)(r=Ct[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ct.length&&null===(n=Ct[0]).blockedOn;)Ot(n),null===n.blockedOn&&Ct.shift()}var Ft={},Ut=new Map,jt=new Map,qt=["abort","abort",Ke,"animationEnd",Qe,"animationIteration",Ge,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ye,"transitionEnd","waiting","waiting"];function Bt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:t},jt.set(r,t),Ut.set(r,o),Ft[i]=o}}Bt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Bt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Bt(qt,2);for(var Vt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Wt=0;Wt<Vt.length;Wt++)jt.set(Vt[Wt],0);var zt=o.unstable_UserBlockingPriority,Ht=o.unstable_runWithPriority,Kt=!0;function Qt(e,t){Gt(t,e,!1)}function Gt(e,t,n){var r=jt.get(t);switch(void 0===r?2:r){case 0:r=function(e,t,n,r){F||M();var i=Yt,o=F;F=!0;try{P(i,e,t,n,r)}finally{(F=o)||j()}}.bind(null,t,1,e);break;case 1:r=function(e,t,n,r){Ht(zt,Yt.bind(null,e,t,n,r))}.bind(null,t,1,e);break;default:r=Yt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Yt(e,t,n,r){if(Kt)if(0<bt.length&&-1<kt.indexOf(e))e=xt(null,e,t,n,r),bt.push(e);else{var i=Xt(e,t,n,r);if(null===i)Nt(e,r);else if(-1<kt.indexOf(e))e=xt(i,e,t,n,r),bt.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return wt=At(wt,e,t,n,r,i),!0;case"dragenter":return _t=At(_t,e,t,n,r,i),!0;case"mouseover":return Et=At(Et,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Tt.set(o,At(Tt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,St.set(o,At(St.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){Nt(e,r),e=ft(e,r,null,t);try{q(pt,e)}finally{ht(e)}}}}function Xt(e,t,n,r){if(null!==(n=Nn(n=ut(r)))){var i=Ze(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=et(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=ft(e,r,n,t);try{q(pt,e)}finally{ht(e)}return null}var $t={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jt=["Webkit","ms","Moz","O"];function Zt(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||$t.hasOwnProperty(e)&&$t[e]?(""+t).trim():t+"px"}function en(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=Zt(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys($t).forEach(function(e){Jt.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$t[t]=$t[e]})});var tn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nn(e,t){if(t){if(tn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if(!("object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62,""))}}function rn(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var on=Re;function an(e,t){var n=Je(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=S[t];for(var r=0;r<t.length;r++)dt(t[r],e,n)}function sn(){}function un(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ln(e,t){var n,r=cn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cn(r)}}function hn(){for(var e=window,t=un();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=un((e=t.contentWindow).document)}return t}function fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var pn="$",dn="/$",mn="$?",yn="$!",gn=null,vn=null;function bn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function wn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var _n="function"===typeof setTimeout?setTimeout:void 0,En="function"===typeof clearTimeout?clearTimeout:void 0;function Tn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Sn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===pn||n===yn||n===mn){if(0===t)return e;t--}else n===dn&&t++}e=e.previousSibling}return null}var Cn=Math.random().toString(36).slice(2),kn="__reactInternalInstance$"+Cn,In="__reactEventHandlers$"+Cn,xn="__reactContainere$"+Cn;function Nn(e){var t=e[kn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[xn]||n[kn]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Sn(e);null!==e;){if(n=e[kn])return n;e=Sn(e)}return t}n=(e=n).parentNode}return null}function An(e){return!(e=e[kn]||e[xn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function On(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Dn(e){return e[In]||null}function Rn(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Pn(e,t){var n=e.stateNode;if(!n)return null;var r=p(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}function Mn(e,t,n){(t=Pn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=rt(n._dispatchListeners,t),n._dispatchInstances=rt(n._dispatchInstances,e))}function Ln(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Rn(t);for(t=n.length;0<t--;)Mn(n[t],"captured",e);for(t=0;t<n.length;t++)Mn(n[t],"bubbled",e)}}function Fn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Pn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=rt(n._dispatchListeners,t),n._dispatchInstances=rt(n._dispatchInstances,e))}function Un(e){e&&e.dispatchConfig.registrationName&&Fn(e._targetInst,null,e)}function jn(e){it(e,Ln)}var qn=null,Bn=null,Vn=null;function Wn(){if(Vn)return Vn;var e,t,n=Bn,r=n.length,i="value"in qn?qn.value:qn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Vn=i.slice(e,1<t?1-t:void 0)}function zn(){return!0}function Hn(){return!1}function Kn(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?zn:Hn,this.isPropagationStopped=Hn,this}function Qn(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Gn(e){if(!(e instanceof this))throw Error(a(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Yn(e){e.eventPool=[],e.getPooled=Qn,e.release=Gn}i(Kn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=zn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=zn)},persist:function(){this.isPersistent=zn},isPersistent:Hn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Hn,this._dispatchInstances=this._dispatchListeners=null}}),Kn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Kn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Yn(n),n},Yn(Kn);var Xn=Kn.extend({data:null}),$n=Kn.extend({data:null}),Jn=[9,13,27,32],Zn=k&&"CompositionEvent"in window,er=null;k&&"documentMode"in document&&(er=document.documentMode);var tr=k&&"TextEvent"in window&&!er,nr=k&&(!Zn||er&&8<er&&11>=er),rr=String.fromCharCode(32),ir={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},or=!1;function ar(e,t){switch(e){case"keyup":return-1!==Jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function sr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var ur=!1;var cr={eventTypes:ir,extractEvents:function(e,t,n,r){var i;if(Zn)e:{switch(e){case"compositionstart":var o=ir.compositionStart;break e;case"compositionend":o=ir.compositionEnd;break e;case"compositionupdate":o=ir.compositionUpdate;break e}o=void 0}else ur?ar(e,n)&&(o=ir.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=ir.compositionStart);return o?(nr&&"ko"!==n.locale&&(ur||o!==ir.compositionStart?o===ir.compositionEnd&&ur&&(i=Wn()):(Bn="value"in(qn=r)?qn.value:qn.textContent,ur=!0)),o=Xn.getPooled(o,t,n,r),i?o.data=i:null!==(i=sr(n))&&(o.data=i),jn(o),i=o):i=null,(e=tr?function(e,t){switch(e){case"compositionend":return sr(t);case"keypress":return 32!==t.which?null:(or=!0,rr);case"textInput":return(e=t.data)===rr&&or?null:e;default:return null}}(e,n):function(e,t){if(ur)return"compositionend"===e||!Zn&&ar(e,t)?(e=Wn(),Vn=Bn=qn=null,ur=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nr&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=$n.getPooled(ir.beforeInput,t,n,r)).data=e,jn(t)):t=null,null===i?t:null===t?i:[i,t]}},lr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!lr[e.type]:"textarea"===t}var fr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function pr(e,t,n){return(e=Kn.getPooled(fr.change,e,t,n)).type="change",O(n),jn(e),e}var dr=null,mr=null;function yr(e){st(e)}function gr(e){if(we(On(e)))return e}function vr(e,t){if("change"===e)return t}var br=!1;function wr(){dr&&(dr.detachEvent("onpropertychange",_r),mr=dr=null)}function _r(e){if("value"===e.propertyName&&gr(mr))if(e=pr(mr,e,ut(e)),F)st(e);else{F=!0;try{R(yr,e)}finally{F=!1,j()}}}function Er(e,t,n){"focus"===e?(wr(),mr=n,(dr=t).attachEvent("onpropertychange",_r)):"blur"===e&&wr()}function Tr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return gr(mr)}function Sr(e,t){if("click"===e)return gr(t)}function Cr(e,t){if("input"===e||"change"===e)return gr(t)}k&&(br=ct("input")&&(!document.documentMode||9<document.documentMode));var kr={eventTypes:fr,_isInputEventSupported:br,extractEvents:function(e,t,n,r){var i=t?On(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=vr;else if(hr(i))if(br)a=Cr;else{a=Tr;var s=Er}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=Sr);if(a&&(a=a(e,t)))return pr(a,n,r);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&ke(i,"number",i.value)}},Ir=Kn.extend({view:null,detail:null}),xr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xr[e])&&!!t[e]}function Ar(){return Nr}var Or=0,Dr=0,Rr=!1,Pr=!1,Mr=Ir.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ar,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Or;return Or=e.screenX,Rr?"mousemove"===e.type?e.screenX-t:0:(Rr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Dr;return Dr=e.screenY,Pr?"mousemove"===e.type?e.screenY-t:0:(Pr=!0,0)}}),Lr=Mr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Fr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Ur={eventTypes:Fr,extractEvents:function(e,t,n,r,i){var o="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(o&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,a)?(a=t,null!==(t=(t=n.relatedTarget||n.toElement)?Nn(t):null)&&(t!==Ze(t)||5!==t.tag&&6!==t.tag)&&(t=null)):a=null;if(a===t)return null;if("mouseout"===e||"mouseover"===e)var s=Mr,u=Fr.mouseLeave,c=Fr.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=Lr,u=Fr.pointerLeave,c=Fr.pointerEnter,l="pointer");if(e=null==a?o:On(a),o=null==t?o:On(t),(u=s.getPooled(u,a,n,r)).type=l+"leave",u.target=e,u.relatedTarget=o,(n=s.getPooled(c,t,n,r)).type=l+"enter",n.target=o,n.relatedTarget=e,l=t,(r=a)&&l)e:{for(c=l,a=0,e=s=r;e;e=Rn(e))a++;for(e=0,t=c;t;t=Rn(t))e++;for(;0<a-e;)s=Rn(s),a--;for(;0<e-a;)c=Rn(c),e--;for(;a--;){if(s===c||s===c.alternate)break e;s=Rn(s),c=Rn(c)}s=null}else s=null;for(c=s,s=[];r&&r!==c&&(null===(a=r.alternate)||a!==c);)s.push(r),r=Rn(r);for(r=[];l&&l!==c&&(null===(a=l.alternate)||a!==c);)r.push(l),l=Rn(l);for(l=0;l<s.length;l++)Fn(s[l],"bubbled",u);for(l=r.length;0<l--;)Fn(r[l],"captured",n);return 0===(64&i)?[u]:[u,n]}};var jr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},qr=Object.prototype.hasOwnProperty;function Br(e,t){if(jr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!qr.call(t,n[r])||!jr(e[n[r]],t[n[r]]))return!1;return!0}var Vr=k&&"documentMode"in document&&11>=document.documentMode,Wr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},zr=null,Hr=null,Kr=null,Qr=!1;function Gr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Qr||null==zr||zr!==un(n)?null:("selectionStart"in(n=zr)&&fn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Kr&&Br(Kr,n)?null:(Kr=n,(e=Kn.getPooled(Wr.select,Hr,e,t)).type="select",e.target=zr,jn(e),e))}var Yr={eventTypes:Wr,extractEvents:function(e,t,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Je(i),o=S.onSelect;for(var a=0;a<o.length;a++)if(!i.has(o[a])){i=!1;break e}i=!0}o=!i}if(o)return null;switch(i=t?On(t):window,e){case"focus":(hr(i)||"true"===i.contentEditable)&&(zr=i,Hr=t,Kr=null);break;case"blur":Kr=Hr=zr=null;break;case"mousedown":Qr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Qr=!1,Gr(n,r);case"selectionchange":if(Vr)break;case"keydown":case"keyup":return Gr(n,r)}return null}},Xr=Kn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),$r=Kn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jr=Ir.extend({relatedTarget:null});function Zr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var ei={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ti={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ni=Ir.extend({key:function(e){if(e.key){var t=ei[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Zr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ti[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ar,charCode:function(e){return"keypress"===e.type?Zr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Zr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ri=Mr.extend({dataTransfer:null}),ii=Ir.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ar}),oi=Kn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ai=Mr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),si={eventTypes:Ft,extractEvents:function(e,t,n,r){var i=Ut.get(e);if(!i)return null;switch(e){case"keypress":if(0===Zr(n))return null;case"keydown":case"keyup":e=ni;break;case"blur":case"focus":e=Jr;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ri;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=ii;break;case Ke:case Qe:case Ge:e=Xr;break;case Ye:e=oi;break;case"scroll":e=Ir;break;case"wheel":e=ai;break;case"copy":case"cut":case"paste":e=$r;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Lr;break;default:e=Kn}return jn(t=e.getPooled(i,t,n,r)),t}};if(g)throw Error(a(101));g=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),b(),p=Dn,d=An,m=On,C({SimpleEventPlugin:si,EnterLeaveEventPlugin:Ur,ChangeEventPlugin:kr,SelectEventPlugin:Yr,BeforeInputEventPlugin:cr});var ui=[],ci=-1;function li(e){0>ci||(e.current=ui[ci],ui[ci]=null,ci--)}function hi(e,t){ui[++ci]=e.current,e.current=t}var fi={},pi={current:fi},di={current:!1},mi=fi;function yi(e,t){var n=e.type.contextTypes;if(!n)return fi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function gi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function vi(){li(di),li(pi)}function bi(e,t,n){if(pi.current!==fi)throw Error(a(168));hi(pi,t),hi(di,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,me(t)||"Unknown",o));return i({},n,{},r)}function _i(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fi,mi=pi.current,hi(pi,e),hi(di,di.current),!0}function Ei(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=wi(e,t,mi),r.__reactInternalMemoizedMergedChildContext=e,li(di),li(pi),hi(pi,e)):li(di),hi(di,n)}var Ti=o.unstable_runWithPriority,Si=o.unstable_scheduleCallback,Ci=o.unstable_cancelCallback,ki=o.unstable_requestPaint,Ii=o.unstable_now,xi=o.unstable_getCurrentPriorityLevel,Ni=o.unstable_ImmediatePriority,Ai=o.unstable_UserBlockingPriority,Oi=o.unstable_NormalPriority,Di=o.unstable_LowPriority,Ri=o.unstable_IdlePriority,Pi={},Mi=o.unstable_shouldYield,Li=void 0!==ki?ki:function(){},Fi=null,Ui=null,ji=!1,qi=Ii(),Bi=1e4>qi?Ii:function(){return Ii()-qi};function Vi(){switch(xi()){case Ni:return 99;case Ai:return 98;case Oi:return 97;case Di:return 96;case Ri:return 95;default:throw Error(a(332))}}function Wi(e){switch(e){case 99:return Ni;case 98:return Ai;case 97:return Oi;case 96:return Di;case 95:return Ri;default:throw Error(a(332))}}function zi(e,t){return e=Wi(e),Ti(e,t)}function Hi(e,t,n){return e=Wi(e),Si(e,t,n)}function Ki(e){return null===Fi?(Fi=[e],Ui=Si(Ni,Gi)):Fi.push(e),Pi}function Qi(){if(null!==Ui){var e=Ui;Ui=null,Ci(e)}Gi()}function Gi(){if(!ji&&null!==Fi){ji=!0;var e=0;try{var t=Fi;zi(99,function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}}),Fi=null}catch(n){throw null!==Fi&&(Fi=Fi.slice(e+1)),Si(Ni,Qi),n}finally{ji=!1}}}function Yi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Xi(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var $i={current:null},Ji=null,Zi=null,eo=null;function to(){eo=Zi=Ji=null}function no(e){var t=$i.current;li($i),e.type._context._currentValue=t}function ro(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function io(e,t){Ji=e,eo=Zi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Da=!0),e.firstContext=null)}function oo(e,t){if(eo!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(eo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Zi){if(null===Ji)throw Error(a(308));Zi=t,Ji.dependencies={expirationTime:0,firstContext:t,responders:null}}else Zi=Zi.next=t;return e._currentValue}var ao=!1;function so(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function uo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function co(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function lo(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ho(e,t){var n=e.alternate;null!==n&&uo(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function fo(e,t,n,r){var o=e.updateQueue;ao=!1;var a=o.baseQueue,s=o.shared.pending;if(null!==s){if(null!==a){var u=a.next;a.next=s.next,s.next=u}a=s,o.shared.pending=null,null!==(u=e.alternate)&&(null!==(u=u.updateQueue)&&(u.baseQueue=s))}if(null!==a){u=a.next;var c=o.baseState,l=0,h=null,f=null,p=null;if(null!==u)for(var d=u;;){if((s=d.expirationTime)<r){var m={expirationTime:d.expirationTime,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null};null===p?(f=p=m,h=c):p=p.next=m,s>l&&(l=s)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null}),mu(s,d.suspenseConfig);e:{var y=e,g=d;switch(s=t,m=n,g.tag){case 1:if("function"===typeof(y=g.payload)){c=y.call(m,c,s);break e}c=y;break e;case 3:y.effectTag=-4097&y.effectTag|64;case 0:if(null===(s="function"===typeof(y=g.payload)?y.call(m,c,s):y)||void 0===s)break e;c=i({},c,s);break e;case 2:ao=!0}}null!==d.callback&&(e.effectTag|=32,null===(s=o.effects)?o.effects=[d]:s.push(d))}if(null===(d=d.next)||d===u){if(null===(s=o.shared.pending))break;d=a.next=s.next,s.next=u,o.baseQueue=a=s,o.shared.pending=null}}null===p?h=c:p.next=f,o.baseState=h,o.baseQueue=p,yu(l),e.expirationTime=l,e.memoizedState=c}}function po(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var mo=Y.ReactCurrentBatchConfig,yo=(new r.Component).refs;function go(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var vo={isMounted:function(e){return!!(e=e._reactInternalFiber)&&Ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=ru(),i=mo.suspense;(i=co(r=iu(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),lo(e,i),ou(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=ru(),i=mo.suspense;(i=co(r=iu(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),lo(e,i),ou(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=ru(),r=mo.suspense;(r=co(n=iu(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),lo(e,r),ou(e,n)}};function bo(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Br(n,r)||!Br(i,o))}function wo(e,t,n){var r=!1,i=fi,o=t.contextType;return"object"===typeof o&&null!==o?o=oo(o):(i=gi(t)?mi:pi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?yi(e,i):fi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=vo,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function _o(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vo.enqueueReplaceState(t,t.state,null)}function Eo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=yo,so(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=oo(o):(o=gi(t)?mi:pi.current,i.context=yi(e,o)),fo(e,n,i,r),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(go(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&vo.enqueueReplaceState(i,i.state,null),fo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var To=Array.isArray;function So(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===yo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Co(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function ko(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Fu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=So(e,t,n),r.return=e,r):((r=Mu(n.type,n.key,n.props,null,e.mode,r)).ref=So(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Lu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Fu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case Z:return(n=Mu(t.type,t.key,t.props,null,e.mode,n)).ref=So(e,null,t),n.return=e,n;case ee:return(t=Uu(t,e.mode,n)).return=e,t}if(To(t)||de(t))return(t=Lu(t,e.mode,n,null)).return=e,t;Co(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case Z:return n.key===i?n.type===te?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case ee:return n.key===i?l(e,t,n,r):null}if(To(n)||de(n))return null!==i?null:h(e,t,n,r,null);Co(e,n)}return null}function d(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case Z:return e=e.get(null===r.key?n:r.key)||null,r.type===te?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case ee:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(To(r)||de(r))return h(t,e=e.get(n)||null,r,i,null);Co(t,r)}return null}function m(i,a,s,u){for(var c=null,l=null,h=a,m=a=0,y=null;null!==h&&m<s.length;m++){h.index>m?(y=h,h=null):y=h.sibling;var g=p(i,h,s[m],u);if(null===g){null===h&&(h=y);break}e&&h&&null===g.alternate&&t(i,h),a=o(g,a,m),null===l?c=g:l.sibling=g,l=g,h=y}if(m===s.length)return n(i,h),c;if(null===h){for(;m<s.length;m++)null!==(h=f(i,s[m],u))&&(a=o(h,a,m),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);m<s.length;m++)null!==(y=d(h,i,m,s[m],u))&&(e&&null!==y.alternate&&h.delete(null===y.key?m:y.key),a=o(y,a,m),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach(function(e){return t(i,e)}),c}function y(i,s,u,c){var l=de(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,m=s,y=s=0,g=null,v=u.next();null!==m&&!v.done;y++,v=u.next()){m.index>y?(g=m,m=null):g=m.sibling;var b=p(i,m,v.value,c);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(i,m),s=o(b,s,y),null===h?l=b:h.sibling=b,h=b,m=g}if(v.done)return n(i,m),l;if(null===m){for(;!v.done;y++,v=u.next())null!==(v=f(i,v.value,c))&&(s=o(v,s,y),null===h?l=v:h.sibling=v,h=v);return l}for(m=r(i,m);!v.done;y++,v=u.next())null!==(v=d(m,i,y,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?y:v.key),s=o(v,s,y),null===h?l=v:h.sibling=v,h=v);return e&&m.forEach(function(e){return t(i,e)}),l}return function(e,r,o,u){var c="object"===typeof o&&null!==o&&o.type===te&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case Z:e:{for(l=o.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(o.type===te){n(e,c.sibling),(r=i(c,o.props.children)).return=e,e=r;break e}break;default:if(c.elementType===o.type){n(e,c.sibling),(r=i(c,o.props)).ref=So(e,c,o),r.return=e,e=r;break e}}n(e,c);break}t(e,c),c=c.sibling}o.type===te?((r=Lu(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=Mu(o.type,o.key,o.props,null,e.mode,u)).ref=So(e,r,o),u.return=e,e=u)}return s(e);case ee:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Uu(o,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Fu(o,e.mode,u)).return=e,e=r),s(e);if(To(o))return m(e,r,o,u);if(de(o))return y(e,r,o,u);if(l&&Co(e,o),"undefined"===typeof o&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(a(152,e.displayName||e.name||"Component"))}return n(e,r)}}var Io=ko(!0),xo=ko(!1),No={},Ao={current:No},Oo={current:No},Do={current:No};function Ro(e){if(e===No)throw Error(a(174));return e}function Po(e,t){switch(hi(Do,t),hi(Oo,e),hi(Ao,No),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Le(null,"");break;default:t=Le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Ao),hi(Ao,t)}function Mo(){li(Ao),li(Oo),li(Do)}function Lo(e){Ro(Do.current);var t=Ro(Ao.current),n=Le(t,e.type);t!==n&&(hi(Oo,e),hi(Ao,n))}function Fo(e){Oo.current===e&&(li(Ao),li(Oo))}var Uo={current:0};function jo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===mn||n.data===yn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function qo(e,t){return{responder:e,props:t}}var Bo=Y.ReactCurrentDispatcher,Vo=Y.ReactCurrentBatchConfig,Wo=0,zo=null,Ho=null,Ko=null,Qo=!1;function Go(){throw Error(a(321))}function Yo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!jr(e[n],t[n]))return!1;return!0}function Xo(e,t,n,r,i,o){if(Wo=o,zo=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Bo.current=null===e||null===e.memoizedState?ba:wa,e=n(r,i),t.expirationTime===Wo){o=0;do{if(t.expirationTime=0,!(25>o))throw Error(a(301));o+=1,Ko=Ho=null,t.updateQueue=null,Bo.current=_a,e=n(r,i)}while(t.expirationTime===Wo)}if(Bo.current=va,t=null!==Ho&&null!==Ho.next,Wo=0,Ko=Ho=zo=null,Qo=!1,t)throw Error(a(300));return e}function $o(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ko?zo.memoizedState=Ko=e:Ko=Ko.next=e,Ko}function Jo(){if(null===Ho){var e=zo.alternate;e=null!==e?e.memoizedState:null}else e=Ho.next;var t=null===Ko?zo.memoizedState:Ko.next;if(null!==t)Ko=t,Ho=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Ho=e).memoizedState,baseState:Ho.baseState,baseQueue:Ho.baseQueue,queue:Ho.queue,next:null},null===Ko?zo.memoizedState=Ko=e:Ko=Ko.next=e}return Ko}function Zo(e,t){return"function"===typeof t?t(e):t}function ea(e){var t=Jo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=Ho,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,c=i;do{var l=c.expirationTime;if(l<Wo){var h={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=h,o=r):u=u.next=h,l>zo.expirationTime&&(zo.expirationTime=l,yu(l))}else null!==u&&(u=u.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),mu(l,c.suspenseConfig),r=c.eagerReducer===e?c.eagerState:e(r,c.action);c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=s,jr(r,t.memoizedState)||(Da=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ta(e){var t=Jo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);jr(o,t.memoizedState)||(Da=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function na(e){var t=$o();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Zo,lastRenderedState:e}).dispatch=ga.bind(null,zo,e),[t.memoizedState,e]}function ra(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=zo.updateQueue)?(t={lastEffect:null},zo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ia(){return Jo().memoizedState}function oa(e,t,n,r){var i=$o();zo.effectTag|=e,i.memoizedState=ra(1|t,n,void 0,void 0===r?null:r)}function aa(e,t,n,r){var i=Jo();r=void 0===r?null:r;var o=void 0;if(null!==Ho){var a=Ho.memoizedState;if(o=a.destroy,null!==r&&Yo(r,a.deps))return void ra(t,n,o,r)}zo.effectTag|=e,i.memoizedState=ra(1|t,n,o,r)}function sa(e,t){return oa(516,4,e,t)}function ua(e,t){return aa(516,4,e,t)}function ca(e,t){return aa(4,2,e,t)}function la(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ha(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,aa(4,2,la.bind(null,t,e),n)}function fa(){}function pa(e,t){return $o().memoizedState=[e,void 0===t?null:t],e}function da(e,t){var n=Jo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Yo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ma(e,t){var n=Jo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Yo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ya(e,t,n){var r=Vi();zi(98>r?98:r,function(){e(!0)}),zi(97<r?97:r,function(){var r=Vo.suspense;Vo.suspense=void 0===t?null:t;try{e(!1),n()}finally{Vo.suspense=r}})}function ga(e,t,n){var r=ru(),i=mo.suspense;i={expirationTime:r=iu(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===zo||null!==o&&o===zo)Qo=!0,i.expirationTime=Wo,zo.expirationTime=Wo;else{if(0===e.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.eagerReducer=o,i.eagerState=s,jr(s,a))return}catch(u){}ou(e,r)}}var va={readContext:oo,useCallback:Go,useContext:Go,useEffect:Go,useImperativeHandle:Go,useLayoutEffect:Go,useMemo:Go,useReducer:Go,useRef:Go,useState:Go,useDebugValue:Go,useResponder:Go,useDeferredValue:Go,useTransition:Go},ba={readContext:oo,useCallback:pa,useContext:oo,useEffect:sa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,oa(4,2,la.bind(null,t,e),n)},useLayoutEffect:function(e,t){return oa(4,2,e,t)},useMemo:function(e,t){var n=$o();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=$o();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=ga.bind(null,zo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},$o().memoizedState=e},useState:na,useDebugValue:fa,useResponder:qo,useDeferredValue:function(e,t){var n=na(e),r=n[0],i=n[1];return sa(function(){var n=Vo.suspense;Vo.suspense=void 0===t?null:t;try{i(e)}finally{Vo.suspense=n}},[e,t]),r},useTransition:function(e){var t=na(!1),n=t[0];return t=t[1],[pa(ya.bind(null,t,e),[t,e]),n]}},wa={readContext:oo,useCallback:da,useContext:oo,useEffect:ua,useImperativeHandle:ha,useLayoutEffect:ca,useMemo:ma,useReducer:ea,useRef:ia,useState:function(){return ea(Zo)},useDebugValue:fa,useResponder:qo,useDeferredValue:function(e,t){var n=ea(Zo),r=n[0],i=n[1];return ua(function(){var n=Vo.suspense;Vo.suspense=void 0===t?null:t;try{i(e)}finally{Vo.suspense=n}},[e,t]),r},useTransition:function(e){var t=ea(Zo),n=t[0];return t=t[1],[da(ya.bind(null,t,e),[t,e]),n]}},_a={readContext:oo,useCallback:da,useContext:oo,useEffect:ua,useImperativeHandle:ha,useLayoutEffect:ca,useMemo:ma,useReducer:ta,useRef:ia,useState:function(){return ta(Zo)},useDebugValue:fa,useResponder:qo,useDeferredValue:function(e,t){var n=ta(Zo),r=n[0],i=n[1];return ua(function(){var n=Vo.suspense;Vo.suspense=void 0===t?null:t;try{i(e)}finally{Vo.suspense=n}},[e,t]),r},useTransition:function(e){var t=ta(Zo),n=t[0];return t=t[1],[da(ya.bind(null,t,e),[t,e]),n]}},Ea=null,Ta=null,Sa=!1;function Ca(e,t){var n=Du(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function ka(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Ia(e){if(Sa){var t=Ta;if(t){var n=t;if(!ka(e,t)){if(!(t=Tn(n.nextSibling))||!ka(e,t))return e.effectTag=-1025&e.effectTag|2,Sa=!1,void(Ea=e);Ca(Ea,n)}Ea=e,Ta=Tn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Sa=!1,Ea=e}}function xa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ea=e}function Na(e){if(e!==Ea)return!1;if(!Sa)return xa(e),Sa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!wn(t,e.memoizedProps))for(t=Ta;t;)Ca(e,t),t=Tn(t.nextSibling);if(xa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===dn){if(0===t){Ta=Tn(e.nextSibling);break e}t--}else n!==pn&&n!==yn&&n!==mn||t++}e=e.nextSibling}Ta=null}}else Ta=Ea?Tn(e.stateNode.nextSibling):null;return!0}function Aa(){Ta=Ea=null,Sa=!1}var Oa=Y.ReactCurrentOwner,Da=!1;function Ra(e,t,n,r){t.child=null===e?xo(t,null,n,r):Io(t,e.child,n,r)}function Pa(e,t,n,r,i){n=n.render;var o=t.ref;return io(t,i),r=Xo(e,t,n,r,o,i),null===e||Da?(t.effectTag|=1,Ra(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),$a(e,t,i))}function Ma(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||Ru(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mu(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,La(e,t,a,r,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:Br)(i,r)&&e.ref===t.ref)?$a(e,t,o):(t.effectTag|=1,(e=Pu(a,r)).ref=t.ref,e.return=t,t.child=e)}function La(e,t,n,r,i,o){return null!==e&&Br(e.memoizedProps,r)&&e.ref===t.ref&&(Da=!1,i<o)?(t.expirationTime=e.expirationTime,$a(e,t,o)):Ua(e,t,n,r,o)}function Fa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Ua(e,t,n,r,i){var o=gi(n)?mi:pi.current;return o=yi(t,o),io(t,i),n=Xo(e,t,n,r,o,i),null===e||Da?(t.effectTag|=1,Ra(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),$a(e,t,i))}function ja(e,t,n,r,i){if(gi(n)){var o=!0;_i(t)}else o=!1;if(io(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),wo(t,n,r),Eo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=oo(c):c=yi(t,c=gi(n)?mi:pi.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&_o(t,a,r,c),ao=!1;var f=t.memoizedState;a.state=f,fo(t,r,a,i),u=t.memoizedState,s!==r||f!==u||di.current||ao?("function"===typeof l&&(go(t,n,l,r),u=t.memoizedState),(s=ao||bo(t,n,s,r,f,u,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.effectTag|=4)):("function"===typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,uo(e,t),s=t.memoizedProps,a.props=t.type===t.elementType?s:Xi(t.type,s),u=a.context,"object"===typeof(c=n.contextType)&&null!==c?c=oo(c):c=yi(t,c=gi(n)?mi:pi.current),(h="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&_o(t,a,r,c),ao=!1,u=t.memoizedState,a.state=u,fo(t,r,a,i),f=t.memoizedState,s!==r||u!==f||di.current||ao?("function"===typeof l&&(go(t,n,l,r),f=t.memoizedState),(l=ao||bo(t,n,s,r,u,f,c))?(h||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,c)),"function"===typeof a.componentDidUpdate&&(t.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=c,r=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return qa(e,t,n,r,o,i)}function qa(e,t,n,r,i,o){Fa(e,t);var a=0!==(64&t.effectTag);if(!r&&!a)return i&&Ei(t,n,!1),$a(e,t,o);r=t.stateNode,Oa.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=Io(t,e.child,null,o),t.child=Io(t,null,s,o)):Ra(e,t,s,o),t.memoizedState=r.state,i&&Ei(t,n,!0),t.child}function Ba(e){var t=e.stateNode;t.pendingContext?bi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&bi(0,t.context,!1),Po(e,t.containerInfo)}var Va,Wa,za,Ha,Ka={dehydrated:null,retryTime:0};function Qa(e,t,n){var r,i=t.mode,o=t.pendingProps,a=Uo.current,s=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&a)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),hi(Uo,1&a),null===e){if(void 0!==o.fallback&&Ia(t),s){if(s=o.fallback,(o=Lu(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Lu(s,i,n,null)).return=t,o.sibling=n,t.memoizedState=Ka,t.child=o,n}return i=o.children,t.memoizedState=null,t.child=xo(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,s){if(o=o.fallback,(n=Pu(e,e.pendingProps)).return=t,0===(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=Pu(i,o)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Ka,t.child=n,i}return n=Io(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=o.fallback,(o=Lu(null,i,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Lu(s,i,n,null)).return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=Ka,t.child=o,n}return t.memoizedState=null,t.child=Io(t,e,o.children,n)}function Ga(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),ro(e.return,t)}function Ya(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function Xa(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ra(e,t,r.children,n),0!==(2&(r=Uo.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ga(e,n);else if(19===e.tag)Ga(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(hi(Uo,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===jo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ya(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===jo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ya(t,!0,n,null,o,t.lastEffect);break;case"together":Ya(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function $a(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&yu(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ja(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Za(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return gi(t.type)&&vi(),null;case 3:return Mo(),li(di),li(pi),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Na(t)||(t.effectTag|=4),Wa(t),null;case 5:Fo(t),n=Ro(Do.current);var o=t.type;if(null!==e&&null!=t.stateNode)za(e,t,o,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=Ro(Ao.current),Na(t)){r=t.stateNode,o=t.type;var s=t.memoizedProps;switch(r[kn]=t,r[In]=s,o){case"iframe":case"object":case"embed":Qt("load",r);break;case"video":case"audio":for(e=0;e<Xe.length;e++)Qt(Xe[e],r);break;case"source":Qt("error",r);break;case"img":case"image":case"link":Qt("error",r),Qt("load",r);break;case"form":Qt("reset",r),Qt("submit",r);break;case"details":Qt("toggle",r);break;case"input":Ee(r,s),Qt("invalid",r),an(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Qt("invalid",r),an(n,"onChange");break;case"textarea":Ae(r,s),Qt("invalid",r),an(n,"onChange")}for(var u in nn(o,s),e=null,s)if(s.hasOwnProperty(u)){var c=s[u];"children"===u?"string"===typeof c?r.textContent!==c&&(e=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(e=["children",""+c]):T.hasOwnProperty(u)&&null!=c&&an(n,u)}switch(o){case"input":be(r),Ce(r,s,!0);break;case"textarea":be(r),De(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=sn)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(u=9===n.nodeType?n:n.ownerDocument,e===on&&(e=Me(o)),e===on?"script"===o?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(o,{is:r.is}):(e=u.createElement(o),"select"===o&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,o),e[kn]=t,e[In]=r,Va(e,t,!1,!1),t.stateNode=e,u=rn(o,r),o){case"iframe":case"object":case"embed":Qt("load",e),c=r;break;case"video":case"audio":for(c=0;c<Xe.length;c++)Qt(Xe[c],e);c=r;break;case"source":Qt("error",e),c=r;break;case"img":case"image":case"link":Qt("error",e),Qt("load",e),c=r;break;case"form":Qt("reset",e),Qt("submit",e),c=r;break;case"details":Qt("toggle",e),c=r;break;case"input":Ee(e,r),c=_e(e,r),Qt("invalid",e),an(n,"onChange");break;case"option":c=Ie(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},c=i({},r,{value:void 0}),Qt("invalid",e),an(n,"onChange");break;case"textarea":Ae(e,r),c=Ne(e,r),Qt("invalid",e),an(n,"onChange");break;default:c=r}nn(o,c);var l=c;for(s in l)if(l.hasOwnProperty(s)){var h=l[s];"style"===s?en(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&je(e,h):"children"===s?"string"===typeof h?("textarea"!==o||""!==h)&&qe(e,h):"number"===typeof h&&qe(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(T.hasOwnProperty(s)?null!=h&&an(n,s):null!=h&&X(e,s,h,u))}switch(o){case"input":be(e),Ce(e,r,!1);break;case"textarea":be(e),De(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ge(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?xe(e,!!r.multiple,n,!1):null!=r.defaultValue&&xe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof c.onClick&&(e.onclick=sn)}bn(o,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Ha(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));n=Ro(Do.current),Ro(Ao.current),Na(t)?(n=t.stateNode,r=t.memoizedProps,n[kn]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[kn]=t,t.stateNode=n)}return null;case 13:return li(Uo),r=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Na(t):(r=null!==(o=e.memoizedState),n||null===o||null!==(o=e.child.sibling)&&(null!==(s=t.firstEffect)?(t.firstEffect=o,o.nextEffect=s):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Uo.current)?Fs===Is&&(Fs=As):(Fs!==Is&&Fs!==As||(Fs=Os),0!==Vs&&null!==Ps&&(Bu(Ps,Ls),Vu(Ps,Vs)))),(n||r)&&(t.effectTag|=4),null);case 4:return Mo(),Wa(t),null;case 10:return no(t),null;case 17:return gi(t.type)&&vi(),null;case 19:if(li(Uo),null===(r=t.memoizedState))return null;if(o=0!==(64&t.effectTag),null===(s=r.rendering)){if(o)Ja(r,!1);else if(Fs!==Is||null!==e&&0!==(64&e.effectTag))for(s=t.child;null!==s;){if(null!==(e=jo(s))){for(t.effectTag|=64,Ja(r,!1),null!==(o=e.updateQueue)&&(t.updateQueue=o,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)s=n,(o=r).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(e=o.alternate)?(o.childExpirationTime=0,o.expirationTime=s,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=e.childExpirationTime,o.expirationTime=e.expirationTime,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,s=e.dependencies,o.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),r=r.sibling;return hi(Uo,1&Uo.current|2),t.child}s=s.sibling}}else{if(!o)if(null!==(e=jo(s))){if(t.effectTag|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),Ja(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Bi()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,o=!0,Ja(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=r.last)?n.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Bi()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Bi(),n.sibling=null,t=Uo.current,hi(Uo,o?1&t|2:1&t),n):null}throw Error(a(156,t.tag))}function es(e){switch(e.tag){case 1:gi(e.type)&&vi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Mo(),li(di),li(pi),0!==(64&(t=e.effectTag)))throw Error(a(285));return e.effectTag=-4097&t|64,e;case 5:return Fo(e),null;case 13:return li(Uo),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return li(Uo),null;case 4:return Mo(),null;case 10:return no(e),null;default:return null}}function ts(e,t){return{value:e,source:t,stack:ye(t)}}Va=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Wa=function(){},za=function(e,t,n,r,o){var a=e.memoizedProps;if(a!==r){var s,u,c=t.stateNode;switch(Ro(Ao.current),e=null,n){case"input":a=_e(c,a),r=_e(c,r),e=[];break;case"option":a=Ie(c,a),r=Ie(c,r),e=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":a=Ne(c,a),r=Ne(c,r),e=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(c.onclick=sn)}for(s in nn(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(u in c=a[s])c.hasOwnProperty(u)&&(n||(n={}),n[u]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(T.hasOwnProperty(s)?e||(e=[]):(e=e||[]).push(s,null));for(s in r){var l=r[s];if(c=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&l!==c&&(null!=l||null!=c))if("style"===s)if(c){for(u in c)!c.hasOwnProperty(u)||l&&l.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in l)l.hasOwnProperty(u)&&c[u]!==l[u]&&(n||(n={}),n[u]=l[u])}else n||(e||(e=[]),e.push(s,n)),n=l;else"dangerouslySetInnerHTML"===s?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(e=e||[]).push(s,l)):"children"===s?c===l||"string"!==typeof l&&"number"!==typeof l||(e=e||[]).push(s,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(T.hasOwnProperty(s)?(null!=l&&an(o,s),e||c===l||(e=[])):(e=e||[]).push(s,l))}n&&(e=e||[]).push("style",n),o=e,(t.updateQueue=o)&&(t.effectTag|=4)}},Ha=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var ns="function"===typeof WeakSet?WeakSet:Set;function rs(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ye(n)),null!==n&&me(n.type),t=t.value,null!==e&&1===e.tag&&me(e.type);try{console.error(t)}catch(i){setTimeout(function(){throw i})}}function is(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Iu(e,n)}else t.current=null}function os(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(a(163))}function as(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function ss(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function us(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void ss(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&po(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}po(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&bn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Lt(n)))));case 19:case 17:case 20:case 21:return}throw Error(a(163))}function cs(e,t,n){switch("function"===typeof Au&&Au(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;zi(97<n?97:n,function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(o){Iu(i,o)}}e=e.next}while(e!==r)})}break;case 1:is(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){Iu(e,n)}}(t,n);break;case 5:is(t);break;case 4:ps(e,t,n)}}function ls(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&ls(t)}function hs(e){return 5===e.tag||3===e.tag||4===e.tag}function fs(e){e:{for(var t=e.return;null!==t;){if(hs(t)){var n=t;break e}t=t.return}throw Error(a(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.effectTag&&(qe(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||hs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?function e(t,n,r){var i=t.tag,o=5===i||6===i;if(o)t=o?t.stateNode:t.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode,n.insertBefore(t,r)):(n=r,n.appendChild(t)),r=r._reactRootContainer,null!==r&&void 0!==r||null!==n.onclick||(n.onclick=sn));else if(4!==i&&(t=t.child,null!==t))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t):function e(t,n,r){var i=t.tag,o=5===i||6===i;if(o)t=o?t.stateNode:t.stateNode.instance,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==i&&(t=t.child,null!==t))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t)}function ps(e,t,n){for(var r,i,o=t,s=!1;;){if(!s){s=o.return;e:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===o.tag||6===o.tag){e:for(var u=e,c=o,l=n,h=c;;)if(cs(u,h,l),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===c)break e;for(;null===h.sibling;){if(null===h.return||h.return===c)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(u=r,c=o.stateNode,8===u.nodeType?u.parentNode.removeChild(c):u.removeChild(c)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(cs(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function ds(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void as(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[In]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Te(n,r),rn(e,i),t=rn(e,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?en(n,u):"dangerouslySetInnerHTML"===s?je(n,u):"children"===s?qe(n,u):X(n,s,u,t)}switch(e){case"input":Se(n,r);break;case"textarea":Oe(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?xe(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?xe(n,!!r.multiple,r.defaultValue,!0):xe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Lt(t.containerInfo)));case 12:return;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,zs=Bi()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,o.style.display=Zt("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void ms(t);case 19:return void ms(t);case 17:return}throw Error(a(163))}function ms(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ns),t.forEach(function(t){var r=function(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=iu(t=ru(),e,null)),null!==(e=au(e,t))&&uu(e)}.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}var ys="function"===typeof WeakMap?WeakMap:Map;function gs(e,t,n){(n=co(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Qs||(Qs=!0,Gs=r),rs(e,t)},n}function vs(e,t,n){(n=co(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return rs(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ys?Ys=new Set([this]):Ys.add(this),rs(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var bs,ws=Math.ceil,_s=Y.ReactCurrentDispatcher,Es=Y.ReactCurrentOwner,Ts=0,Ss=8,Cs=16,ks=32,Is=0,xs=1,Ns=2,As=3,Os=4,Ds=5,Rs=Ts,Ps=null,Ms=null,Ls=0,Fs=Is,Us=null,js=1073741823,qs=1073741823,Bs=null,Vs=0,Ws=!1,zs=0,Hs=500,Ks=null,Qs=!1,Gs=null,Ys=null,Xs=!1,$s=null,Js=90,Zs=null,eu=0,tu=null,nu=0;function ru(){return(Rs&(Cs|ks))!==Ts?1073741821-(Bi()/10|0):0!==nu?nu:nu=1073741821-(Bi()/10|0)}function iu(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=Vi();if(0===(4&t))return 99===r?1073741823:1073741822;if((Rs&Cs)!==Ts)return Ls;if(null!==n)e=Yi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Yi(e,150,100);break;case 97:case 96:e=Yi(e,5e3,250);break;case 95:e=2;break;default:throw Error(a(326))}return null!==Ps&&e===Ls&&--e,e}function ou(e,t){if(50<eu)throw eu=0,tu=null,Error(a(185));if(null!==(e=au(e,t))){var n=Vi();1073741823===t?(Rs&Ss)!==Ts&&(Rs&(Cs|ks))===Ts?cu(e):(uu(e),Rs===Ts&&Qi()):uu(e),(4&Rs)===Ts||98!==n&&99!==n||(null===Zs?Zs=new Map([[e,t]]):(void 0===(n=Zs.get(e))||n>t)&&Zs.set(e,t))}}function au(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Ps===i&&(yu(t),Fs===Os&&Bu(i,Ls)),Vu(i,t)),i}function su(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!qu(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function uu(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Ki(cu.bind(null,e));else{var t=su(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=ru();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Pi&&Ci(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Ki(cu.bind(null,e)):Hi(r,function e(t,n){nu=0;if(n)return n=ru(),Wu(t,n),uu(t),null;var r=su(t);if(0!==r){if(n=t.callbackNode,(Rs&(Cs|ks))!==Ts)throw Error(a(327));if(Su(),t===Ps&&r===Ls||fu(t,r),null!==Ms){var i=Rs;Rs|=Cs;for(var o=du();;)try{vu();break}catch(c){pu(t,c)}if(to(),Rs=i,_s.current=o,Fs===xs)throw n=Us,fu(t,r),Bu(t,r),uu(t),n;if(null===Ms)switch(o=t.finishedWork=t.current.alternate,t.finishedExpirationTime=r,i=Fs,Ps=null,i){case Is:case xs:throw Error(a(345));case Ns:Wu(t,2<r?2:r);break;case As:if(Bu(t,r),i=t.lastSuspendedTime,r===i&&(t.nextKnownPendingLevel=_u(o)),1073741823===js&&10<(o=zs+Hs-Bi())){if(Ws){var s=t.lastPingedTime;if(0===s||s>=r){t.lastPingedTime=r,fu(t,r);break}}if(0!==(s=su(t))&&s!==r)break;if(0!==i&&i!==r){t.lastPingedTime=i;break}t.timeoutHandle=_n(Eu.bind(null,t),o);break}Eu(t);break;case Os:if(Bu(t,r),i=t.lastSuspendedTime,r===i&&(t.nextKnownPendingLevel=_u(o)),Ws&&(0===(o=t.lastPingedTime)||o>=r)){t.lastPingedTime=r,fu(t,r);break}if(0!==(o=su(t))&&o!==r)break;if(0!==i&&i!==r){t.lastPingedTime=i;break}if(1073741823!==qs?i=10*(1073741821-qs)-Bi():1073741823===js?i=0:(i=10*(1073741821-js)-5e3,o=Bi(),r=10*(1073741821-r)-o,0>(i=o-i)&&(i=0),i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*ws(i/1960))-i,r<i&&(i=r)),10<i){t.timeoutHandle=_n(Eu.bind(null,t),i);break}Eu(t);break;case Ds:if(1073741823!==js&&null!==Bs){s=js;var u=Bs;if(0>=(i=0|u.busyMinDurationMs)?i=0:(o=0|u.busyDelayMs,s=Bi()-(10*(1073741821-s)-(0|u.timeoutMs||5e3)),i=s<=o?0:o+i-s),10<i){Bu(t,r),t.timeoutHandle=_n(Eu.bind(null,t),i);break}}Eu(t);break;default:throw Error(a(329))}if(uu(t),t.callbackNode===n)return e.bind(null,t)}}return null}.bind(null,e),{timeout:10*(1073741821-t)-Bi()}),e.callbackNode=t}}}function cu(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,(Rs&(Cs|ks))!==Ts)throw Error(a(327));if(Su(),e===Ps&&t===Ls||fu(e,t),null!==Ms){var n=Rs;Rs|=Cs;for(var r=du();;)try{gu();break}catch(i){pu(e,i)}if(to(),Rs=n,_s.current=r,Fs===xs)throw n=Us,fu(e,t),Bu(e,t),uu(e),n;if(null!==Ms)throw Error(a(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Ps=null,Eu(e),uu(e)}return null}function lu(e,t){var n=Rs;Rs|=1;try{return e(t)}finally{(Rs=n)===Ts&&Qi()}}function hu(e,t){var n=Rs;Rs&=-2,Rs|=Ss;try{return e(t)}finally{(Rs=n)===Ts&&Qi()}}function fu(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,En(n)),null!==Ms)for(n=Ms.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&vi();break;case 3:Mo(),li(di),li(pi);break;case 5:Fo(r);break;case 4:Mo();break;case 13:case 19:li(Uo);break;case 10:no(r)}n=n.return}Ps=e,Ms=Pu(e.current,null),Ls=t,Fs=Is,Us=null,qs=js=1073741823,Bs=null,Vs=0,Ws=!1}function pu(e,t){for(;;){try{if(to(),Bo.current=va,Qo)for(var n=zo.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Wo=0,Ko=Ho=zo=null,Qo=!1,null===Ms||null===Ms.return)return Fs=xs,Us=t,Ms=null;e:{var i=e,o=Ms.return,a=Ms,s=t;if(t=Ls,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var u=s;if(0===(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.expirationTime=c.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var l=0!==(1&Uo.current),h=o;do{var f;if(f=13===h.tag){var p=h.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var d=h.memoizedProps;f=void 0!==d.fallback&&(!0!==d.unstable_avoidThisFallback||!l)}}if(f){var m=h.updateQueue;if(null===m){var y=new Set;y.add(u),h.updateQueue=y}else m.add(u);if(0===(2&h.mode)){if(h.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var g=co(1073741823,null);g.tag=2,lo(a,g)}a.expirationTime=1073741823;break e}s=void 0,a=t;var v=i.pingCache;if(null===v?(v=i.pingCache=new ys,s=new Set,v.set(u,s)):void 0===(s=v.get(u))&&(s=new Set,v.set(u,s)),!s.has(a)){s.add(a);var b=xu.bind(null,i,u,a);u.then(b,b)}h.effectTag|=4096,h.expirationTime=t;break e}h=h.return}while(null!==h);s=Error((me(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ye(a))}Fs!==Ds&&(Fs=Ns),s=ts(s,a),h=o;do{switch(h.tag){case 3:u=s,h.effectTag|=4096,h.expirationTime=t,ho(h,gs(h,u,t));break e;case 1:u=s;var w=h.type,_=h.stateNode;if(0===(64&h.effectTag)&&("function"===typeof w.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Ys||!Ys.has(_)))){h.effectTag|=4096,h.expirationTime=t,ho(h,vs(h,u,t));break e}}h=h.return}while(null!==h)}Ms=wu(Ms)}catch(E){t=E;continue}break}}function du(){var e=_s.current;return _s.current=va,null===e?va:e}function mu(e,t){e<js&&2<e&&(js=e),null!==t&&e<qs&&2<e&&(qs=e,Bs=t)}function yu(e){e>Vs&&(Vs=e)}function gu(){for(;null!==Ms;)Ms=bu(Ms)}function vu(){for(;null!==Ms&&!Mi();)Ms=bu(Ms)}function bu(e){var t=bs(e.alternate,e,Ls);return e.memoizedProps=e.pendingProps,null===t&&(t=wu(e)),Es.current=null,t}function wu(e){Ms=e;do{var t=Ms.alternate;if(e=Ms.return,0===(2048&Ms.effectTag)){if(t=Za(t,Ms,Ls),1===Ls||1!==Ms.childExpirationTime){for(var n=0,r=Ms.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}Ms.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Ms.firstEffect),null!==Ms.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Ms.firstEffect),e.lastEffect=Ms.lastEffect),1<Ms.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Ms:e.firstEffect=Ms,e.lastEffect=Ms))}else{if(null!==(t=es(Ms)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Ms.sibling))return t;Ms=e}while(null!==Ms);return Fs===Is&&(Fs=Ds),null}function _u(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Eu(e){var t=Vi();return zi(99,function(e,t){do{Su()}while(null!==$s);if((Rs&(Cs|ks))!==Ts)throw Error(a(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=_u(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Ps&&(Ms=Ps=null,Ls=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Rs;Rs|=ks,Es.current=null,gn=Kt;var s=hn();if(fn(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{var c=(u=(u=s.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var l=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{u.nodeType,h.nodeType}catch(k){u=null;break e}var f=0,p=-1,d=-1,m=0,y=0,g=s,v=null;t:for(;;){for(var b;g!==u||0!==l&&3!==g.nodeType||(p=f+l),g!==h||0!==c&&3!==g.nodeType||(d=f+c),3===g.nodeType&&(f+=g.nodeValue.length),null!==(b=g.firstChild);)v=g,g=b;for(;;){if(g===s)break t;if(v===u&&++m===l&&(p=f),v===h&&++y===c&&(d=f),null!==(b=g.nextSibling))break;v=(g=v).parentNode}g=b}u=-1===p||-1===d?null:{start:p,end:d}}else u=null}u=u||{start:0,end:0}}else u=null;vn={activeElementDetached:null,focusedElem:s,selectionRange:u},Kt=!1,Ks=i;do{try{Tu()}catch(k){if(null===Ks)throw Error(a(330));Iu(Ks,k),Ks=Ks.nextEffect}}while(null!==Ks);Ks=i;do{try{for(s=e,u=t;null!==Ks;){var w=Ks.effectTag;if(16&w&&qe(Ks.stateNode,""),128&w){var _=Ks.alternate;if(null!==_){var E=_.ref;null!==E&&("function"===typeof E?E(null):E.current=null)}}switch(1038&w){case 2:fs(Ks),Ks.effectTag&=-3;break;case 6:fs(Ks),Ks.effectTag&=-3,ds(Ks.alternate,Ks);break;case 1024:Ks.effectTag&=-1025;break;case 1028:Ks.effectTag&=-1025,ds(Ks.alternate,Ks);break;case 4:ds(Ks.alternate,Ks);break;case 8:ps(s,l=Ks,u),ls(l)}Ks=Ks.nextEffect}}catch(k){if(null===Ks)throw Error(a(330));Iu(Ks,k),Ks=Ks.nextEffect}}while(null!==Ks);if(E=vn,_=hn(),w=E.focusedElem,u=E.selectionRange,_!==w&&w&&w.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(w.ownerDocument.documentElement,w)){null!==u&&fn(w)&&(_=u.start,void 0===(E=u.end)&&(E=_),"selectionStart"in w?(w.selectionStart=_,w.selectionEnd=Math.min(E,w.value.length)):(E=(_=w.ownerDocument||document)&&_.defaultView||window).getSelection&&(E=E.getSelection(),l=w.textContent.length,s=Math.min(u.start,l),u=void 0===u.end?s:Math.min(u.end,l),!E.extend&&s>u&&(l=u,u=s,s=l),l=ln(w,s),h=ln(w,u),l&&h&&(1!==E.rangeCount||E.anchorNode!==l.node||E.anchorOffset!==l.offset||E.focusNode!==h.node||E.focusOffset!==h.offset)&&((_=_.createRange()).setStart(l.node,l.offset),E.removeAllRanges(),s>u?(E.addRange(_),E.extend(h.node,h.offset)):(_.setEnd(h.node,h.offset),E.addRange(_))))),_=[];for(E=w;E=E.parentNode;)1===E.nodeType&&_.push({element:E,left:E.scrollLeft,top:E.scrollTop});for("function"===typeof w.focus&&w.focus(),w=0;w<_.length;w++)(E=_[w]).element.scrollLeft=E.left,E.element.scrollTop=E.top}Kt=!!gn,vn=gn=null,e.current=n,Ks=i;do{try{for(w=e;null!==Ks;){var T=Ks.effectTag;if(36&T&&us(w,Ks.alternate,Ks),128&T){_=void 0;var S=Ks.ref;if(null!==S){var C=Ks.stateNode;switch(Ks.tag){case 5:_=C;break;default:_=C}"function"===typeof S?S(_):S.current=_}}Ks=Ks.nextEffect}}catch(k){if(null===Ks)throw Error(a(330));Iu(Ks,k),Ks=Ks.nextEffect}}while(null!==Ks);Ks=null,Li(),Rs=o}else e.current=n;if(Xs)Xs=!1,$s=e,Js=t;else for(Ks=i;null!==Ks;)t=Ks.nextEffect,Ks.nextEffect=null,Ks=t;if(0===(t=e.firstPendingTime)&&(Ys=null),1073741823===t?e===tu?eu++:(eu=0,tu=e):eu=0,"function"===typeof Nu&&Nu(n.stateNode,r),uu(e),Qs)throw Qs=!1,e=Gs,Gs=null,e;return(Rs&Ss)!==Ts?null:(Qi(),null)}.bind(null,e,t)),null}function Tu(){for(;null!==Ks;){var e=Ks.effectTag;0!==(256&e)&&os(Ks.alternate,Ks),0===(512&e)||Xs||(Xs=!0,Hi(97,function(){return Su(),null})),Ks=Ks.nextEffect}}function Su(){if(90!==Js){var e=97<Js?97:Js;return Js=90,zi(e,Cu)}}function Cu(){if(null===$s)return!1;var e=$s;if($s=null,(Rs&(Cs|ks))!==Ts)throw Error(a(331));var t=Rs;for(Rs|=ks,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:as(5,n),ss(5,n)}}catch(r){if(null===e)throw Error(a(330));Iu(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return Rs=t,Qi(),!0}function ku(e,t,n){lo(e,t=gs(e,t=ts(n,t),1073741823)),null!==(e=au(e,1073741823))&&uu(e)}function Iu(e,t){if(3===e.tag)ku(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){ku(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ys||!Ys.has(r))){lo(n,e=vs(n,e=ts(t,e),1073741823)),null!==(n=au(n,1073741823))&&uu(n);break}}n=n.return}}function xu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Ps===e&&Ls===n?Fs===Os||Fs===As&&1073741823===js&&Bi()-zs<Hs?fu(e,Ls):Ws=!0:qu(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,uu(e)))}bs=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||di.current)Da=!0;else{if(r<n){switch(Da=!1,t.tag){case 3:Ba(t),Aa();break;case 5:if(Lo(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:gi(t.type)&&_i(t);break;case 4:Po(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,hi($i,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Qa(e,t,n):(hi(Uo,1&Uo.current),null!==(t=$a(e,t,n))?t.sibling:null);hi(Uo,1&Uo.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return Xa(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),hi(Uo,Uo.current),!r)return null}return $a(e,t,n)}Da=!1}}else Da=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=yi(t,pi.current),io(t,n),i=Xo(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,gi(r)){var o=!0;_i(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,so(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&go(t,r,s,e),i.updater=vo,t.stateNode=i,i._reactInternalFiber=t,Eo(t,r,e,n),t=qa(null,t,r,!0,o,n)}else t.tag=0,Ra(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)})}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"===typeof e)return Ru(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===se)return 11;if(e===le)return 14}return 2}(i),e=Xi(i,e),o){case 0:t=Ua(null,t,i,e,n);break e;case 1:t=ja(null,t,i,e,n);break e;case 11:t=Pa(null,t,i,e,n);break e;case 14:t=Ma(null,t,i,Xi(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ua(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,ja(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Ba(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,uo(e,t),fo(t,r,null,n),(r=t.memoizedState.element)===i)Aa(),t=$a(e,t,n);else{if((i=t.stateNode.hydrate)&&(Ta=Tn(t.stateNode.containerInfo.firstChild),Ea=t,i=Sa=!0),i)for(n=xo(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Ra(e,t,r,n),Aa();t=t.child}return t;case 5:return Lo(t),null===e&&Ia(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,wn(r,i)?s=null:null!==o&&wn(r,o)&&(t.effectTag|=16),Fa(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Ra(e,t,s,n),t=t.child),t;case 6:return null===e&&Ia(t),null;case 13:return Qa(e,t,n);case 4:return Po(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Io(t,null,r,n):Ra(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Pa(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return Ra(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ra(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var u=t.type._context;if(hi($i,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=jr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!di.current){t=$a(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&((l=co(n,null)).tag=2,lo(u,l)),u.expirationTime<n&&(u.expirationTime=n),null!==(l=u.alternate)&&l.expirationTime<n&&(l.expirationTime=n),ro(u.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Ra(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,io(t,n),r=r(i=oo(i,o.unstable_observedBits)),t.effectTag|=1,Ra(e,t,r,n),t.child;case 14:return o=Xi(i=t.type,t.pendingProps),Ma(e,t,i,o=Xi(i.type,o),r,n);case 15:return La(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,gi(r)?(e=!0,_i(t)):e=!1,io(t,n),wo(t,r,i),Eo(t,r,i,n),qa(null,t,r,!0,e,n);case 19:return Xa(e,t,n)}throw Error(a(156,t.tag))};var Nu=null,Au=null;function Ou(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Du(e,t,n,r){return new Ou(e,t,n,r)}function Ru(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pu(e,t){var n=e.alternate;return null===n?((n=Du(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mu(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Ru(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case te:return Lu(n.children,i,o,t);case ae:s=8,i|=7;break;case ne:s=8,i|=1;break;case re:return(e=Du(12,n,t,8|i)).elementType=re,e.type=re,e.expirationTime=o,e;case ue:return(e=Du(13,n,t,i)).type=ue,e.elementType=ue,e.expirationTime=o,e;case ce:return(e=Du(19,n,t,i)).elementType=ce,e.expirationTime=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case ie:s=10;break e;case oe:s=9;break e;case se:s=11;break e;case le:s=14;break e;case he:s=16,r=null;break e;case fe:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Du(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Lu(e,t,n,r){return(e=Du(7,e,r,t)).expirationTime=n,e}function Fu(e,t,n){return(e=Du(6,e,null,t)).expirationTime=n,e}function Uu(e,t,n){return(t=Du(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ju(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function qu(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Bu(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Vu(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Wu(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function zu(e,t,n,r){var i=t.current,o=ru(),s=mo.suspense;o=iu(o,i,s);e:if(n){t:{if(Ze(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(gi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(gi(c)){n=wi(n,c,u);break e}}n=u}else n=fi;return null===t.context?t.context=n:t.pendingContext=n,(t=co(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),lo(i,t),ou(i,o),o}function Hu(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Ku(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Qu(e,t){Ku(e,t),(e=e.alternate)&&Ku(e,t)}function Gu(e,t,n){var r=new ju(e,t,n=null!=n&&!0===n.hydrate),i=Du(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,so(i),e[xn]=r.current,n&&0!==t&&function(e,t){var n=Je(t);kt.forEach(function(e){dt(e,t,n)}),It.forEach(function(e){dt(e,t,n)})}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function Yu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=Hu(a);s.call(e)}}zu(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Gu(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var e=Hu(a);u.call(e)}}hu(function(){zu(t,a,e,i)})}return Hu(a)}function $u(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yu(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ee,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Gu.prototype.render=function(e){zu(e,this._internalRoot,null,null)},Gu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;zu(null,e,null,function(){t[xn]=null})},mt=function(e){if(13===e.tag){var t=Yi(ru(),150,100);ou(e,t),Qu(e,t)}},yt=function(e){13===e.tag&&(ou(e,3),Qu(e,3))},gt=function(e){if(13===e.tag){var t=ru();ou(e,t=iu(t,e,null)),Qu(e,t)}},I=function(e,t,n){switch(t){case"input":if(Se(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Dn(r);if(!i)throw Error(a(90));we(r),Se(r,i)}}}break;case"textarea":Oe(e,n);break;case"select":null!=(t=n.value)&&xe(e,!!n.multiple,t,!1)}},R=lu,P=function(e,t,n,r,i){var o=Rs;Rs|=4;try{return zi(98,e.bind(null,t,n,r,i))}finally{(Rs=o)===Ts&&Qi()}},M=function(){(Rs&(1|Cs|ks))===Ts&&(function(){if(null!==Zs){var e=Zs;Zs=null,e.forEach(function(e,t){Wu(t,e),uu(t)}),Qi()}}(),Su())},L=function(e,t){var n=Rs;Rs|=2;try{return e(t)}finally{(Rs=n)===Ts&&Qi()}};var Ju={Events:[An,On,Dn,C,E,jn,function(e){it(e,Un)},O,D,Yt,st,Su,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Nu=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},Au=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=nt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Nn,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ju,t.createPortal=$u,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=nt(t))?null:e.stateNode},t.flushSync=function(e,t){if((Rs&(Cs|ks))!==Ts)throw Error(a(187));var n=Rs;Rs|=1;try{return zi(99,e.bind(null,t))}finally{Rs=n,Qi()}},t.hydrate=function(e,t,n){if(!Yu(t))throw Error(a(200));return Xu(null,e,t,!0,n)},t.render=function(e,t,n){if(!Yu(t))throw Error(a(200));return Xu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yu(e))throw Error(a(40));return!!e._reactRootContainer&&(hu(function(){Xu(null,null,e,!1,function(){e._reactRootContainer=null,e[xn]=null})}),!0)},t.unstable_batchedUpdates=lu,t.unstable_createPortal=function(e,t){return $u(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yu(n))throw Error(a(200));if(null==e||void 0===e._reactInternalFiber)throw Error(a(38));return Xu(e,t,n,!1,r)},t.version="16.13.1"},function(e,t,n){"use strict";var r=n(71),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,d=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,y="function"===typeof Symbol&&Symbol.iterator;function g(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function w(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||v}function _(){}function E(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||v}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(g(85));this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=w.prototype;var T=E.prototype=new _;T.constructor=E,r(T,w.prototype),T.isPureReactComponent=!0;var S={current:null},C=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,n){var r,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)C.call(t,r)&&!k.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:S.current}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}var N=/\/+/g,A=[];function O(e,t,n,r){if(A.length){var i=A.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function D(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>A.length&&A.push(e)}function R(e,t,n){return null==e?0:function e(t,n,r,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case o:case a:u=!0}}if(u)return r(i,t,""===n?"."+P(t,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(t))for(var c=0;c<t.length;c++){var l=n+P(s=t[c],c);u+=e(s,l,r,i)}else if(l=null===t||"object"!==typeof t?null:"function"===typeof(l=y&&t[y]||t["@@iterator"])?l:null,"function"===typeof l)for(t=l.call(t),c=0;!(s=t.next()).done;)u+=e(s=s.value,l=n+P(s,c++),r,i);else if("object"===s)throw r=""+t,Error(g(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return u}(e,"",t,n)}function P(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function M(e,t){e.func.call(e.context,t,e.count++)}function L(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?F(e,r,n,function(e){return e}):null!=e&&(x(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(N,"$&/")+"/")+n)),r.push(e))}function F(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(N,"$&/")+"/"),R(e,L,t=O(t,o,r,i)),D(t)}var U={current:null};function j(){var e=U.current;if(null===e)throw Error(g(321));return e}var q={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:S,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return F(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;R(e,M,t=O(null,null,t,n)),D(t)},count:function(e){return R(e,function(){return null},null)},toArray:function(e){var t=[];return F(e,t,null,function(e){return e}),t},only:function(e){if(!x(e))throw Error(g(143));return e}},t.Component=w,t.Fragment=s,t.Profiler=c,t.PureComponent=E,t.StrictMode=u,t.Suspense=p,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(g(267,e));var i=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=S.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)C.call(t,l)&&!k.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];i.children=c}return{$$typeof:o,type:e.type,key:a,ref:s,props:i,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:f,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return j().useCallback(e,t)},t.useContext=function(e,t){return j().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return j().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return j().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return j().useLayoutEffect(e,t)},t.useMemo=function(e,t){return j().useMemo(e,t)},t.useReducer=function(e,t,n){return j().useReducer(e,t,n)},t.useRef=function(e){return j().useRef(e)},t.useState=function(e){return j().useState(e)},t.version="16.13.1"},function(e,t,n){"use strict";e.exports=n(277)},function(e,t,n){"use strict";var r,i,o,a,s;if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,c=null,l=function e(){if(null!==u)try{var n=t.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(e,0),r}},h=Date.now();t.unstable_now=function(){return Date.now()-h},r=function(e){null!==u?setTimeout(r,0,e):(u=e,setTimeout(l,0))},i=function(e,t){c=setTimeout(e,t)},o=function(){clearTimeout(c)},a=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var f=window.performance,p=window.Date,d=window.setTimeout,m=window.clearTimeout;if("undefined"!==typeof console){var y=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof y&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof f&&"function"===typeof f.now)t.unstable_now=function(){return f.now()};else{var g=p.now();t.unstable_now=function(){return p.now()-g}}var v=!1,b=null,w=-1,_=5,E=0;a=function(){return t.unstable_now()>=E},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):_=0<e?Math.floor(1e3/e):5};var T=new MessageChannel,S=T.port2;T.port1.onmessage=function(){if(null!==b){var e=t.unstable_now();E=e+_;try{b(!0,e)?S.postMessage(null):(v=!1,b=null)}catch(n){throw S.postMessage(null),n}}else v=!1},r=function(e){b=e,v||(v=!0,S.postMessage(null))},i=function(e,n){w=d(function(){e(t.unstable_now())},n)},o=function(){m(w),w=-1}}function C(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<x(i,t)))break e;e[r]=t,e[n]=i,n=r}}function k(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>x(a,n))void 0!==u&&0>x(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>x(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function x(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var N=[],A=[],O=1,D=null,R=3,P=!1,M=!1,L=!1;function F(e){for(var t=k(A);null!==t;){if(null===t.callback)I(A);else{if(!(t.startTime<=e))break;I(A),t.sortIndex=t.expirationTime,C(N,t)}t=k(A)}}function U(e){if(L=!1,F(e),!M)if(null!==k(N))M=!0,r(j);else{var t=k(A);null!==t&&i(U,t.startTime-e)}}function j(e,n){M=!1,L&&(L=!1,o()),P=!0;var r=R;try{for(F(n),D=k(N);null!==D&&(!(D.expirationTime>n)||e&&!a());){var s=D.callback;if(null!==s){D.callback=null,R=D.priorityLevel;var u=s(D.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?D.callback=u:D===k(N)&&I(N),F(n)}else I(N);D=k(N)}if(null!==D)var c=!0;else{var l=k(A);null!==l&&i(U,l.startTime-n),c=!1}return c}finally{D=null,R=r,P=!1}}function q(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var B=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){M||P||(M=!0,r(j))},t.unstable_getCurrentPriorityLevel=function(){return R},t.unstable_getFirstCallbackNode=function(){return k(N)},t.unstable_next=function(e){switch(R){case 1:case 2:case 3:var t=3;break;default:t=R}var n=R;R=t;try{return e()}finally{R=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=B,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=R;R=e;try{return t()}finally{R=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();if("object"===typeof a&&null!==a){var u=a.delay;u="number"===typeof u&&0<u?s+u:s,a="number"===typeof a.timeout?a.timeout:q(e)}else a=q(e),u=s;return e={id:O++,callback:n,priorityLevel:e,startTime:u,expirationTime:a=u+a,sortIndex:-1},u>s?(e.sortIndex=u,C(A,e),null===k(N)&&e===k(A)&&(L?o():L=!0,i(U,u-s))):(e.sortIndex=a,C(N,e),M||P||(M=!0,r(j))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();F(e);var n=k(N);return n!==D&&null!==D&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<D.expirationTime||a()},t.unstable_wrapCallback=function(e){var t=R;return function(){var n=R;R=t;try{return e.apply(this,arguments)}finally{R=n}}}},,function(e,t,n){"use strict";var r=n(280);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.memo"):60115,y=r?Symbol.for("react.lazy"):60116;function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case h:case f:case a:case u:case s:case d:return e;default:switch(e=e&&e.$$typeof){case l:case p:case c:return e;default:return t}}case y:case m:case o:return t}}}function v(e){return g(e)===f}t.typeOf=g,t.AsyncMode=h,t.ConcurrentMode=f,t.ContextConsumer=l,t.ContextProvider=c,t.Element=i,t.ForwardRef=p,t.Fragment=a,t.Lazy=y,t.Memo=m,t.Portal=o,t.Profiler=u,t.StrictMode=s,t.Suspense=d,t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===s||e===d||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===m||e.$$typeof===c||e.$$typeof===l||e.$$typeof===p)},t.isAsyncMode=function(e){return v(e)||g(e)===h},t.isConcurrentMode=v,t.isContextConsumer=function(e){return g(e)===l},t.isContextProvider=function(e){return g(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return g(e)===p},t.isFragment=function(e){return g(e)===a},t.isLazy=function(e){return g(e)===y},t.isMemo=function(e){return g(e)===m},t.isPortal=function(e){return g(e)===o},t.isProfiler=function(e){return g(e)===u},t.isStrictMode=function(e){return g(e)===s},t.isSuspense=function(e){return g(e)===d}},function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,y=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,w=r?Symbol.for("react.responder"):60118,_=r?Symbol.for("react.scope"):60119;function E(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case h:case f:case a:case u:case s:case d:return e;default:switch(e=e&&e.$$typeof){case l:case p:case g:case y:case c:return e;default:return t}}case o:return t}}}function T(e){return E(e)===f}t.AsyncMode=h,t.ConcurrentMode=f,t.ContextConsumer=l,t.ContextProvider=c,t.Element=i,t.ForwardRef=p,t.Fragment=a,t.Lazy=g,t.Memo=y,t.Portal=o,t.Profiler=u,t.StrictMode=s,t.Suspense=d,t.isAsyncMode=function(e){return T(e)||E(e)===h},t.isConcurrentMode=T,t.isContextConsumer=function(e){return E(e)===l},t.isContextProvider=function(e){return E(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return E(e)===p},t.isFragment=function(e){return E(e)===a},t.isLazy=function(e){return E(e)===g},t.isMemo=function(e){return E(e)===y},t.isPortal=function(e){return E(e)===o},t.isProfiler=function(e){return E(e)===u},t.isStrictMode=function(e){return E(e)===s},t.isSuspense=function(e){return E(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===s||e===d||e===m||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===y||e.$$typeof===c||e.$$typeof===l||e.$$typeof===p||e.$$typeof===b||e.$$typeof===w||e.$$typeof===_||e.$$typeof===v)},t.typeOf=E},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i=1,o={},a=!1,s=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){l(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&l(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){l(e.data)},r=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;r=function(t){var n=s.createElement("script");n.onreadystatechange=function(){l(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():r=function(e){setTimeout(l,0,e)},u.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return o[i]=a,r(i),i++},u.clearImmediate=c}function c(e){delete o[e]}function l(e){if(a)setTimeout(l,0,e);else{var t=o[e];if(t){a=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{c(e),a=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n(22),n(70))},function(e,t,n){!function(e){"use strict";try{(function(){e=e&&e.hasOwnProperty("default")?e.default:e;var t="firebasestorage.googleapis.com",n="storageBucket",r=(i.prototype.codeProp=function(){return this.code},i.prototype.codeEquals=function(e){return a(e)===this.codeProp()},i.prototype.serverResponseProp=function(){return this.serverResponse_},i.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(i.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),i);function i(e,t){this.code_=a(e),this.message_="Firebase Storage: "+t,this.serverResponse_=null,this.name_="FirebaseError"}var o={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function a(e){return"storage/"+e}function s(){return new r(o.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function u(){return new r(o.CANCELED,"User canceled the upload/download.")}function c(){return new r(o.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function l(e,t,n){return new r(o.INVALID_ARGUMENT,"Invalid argument in `"+t+"` at index "+e+": "+n)}function h(){return new r(o.APP_DELETED,"The Firebase app was deleted.")}function f(e,t){return new r(o.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function p(e){throw new r(o.INTERNAL_ERROR,"Internal error: "+e)}var d={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function m(e){switch(e){case d.RAW:case d.BASE64:case d.BASE64URL:case d.DATA_URL:return;default:throw"Expected one of the event types: ["+d.RAW+", "+d.BASE64+", "+d.BASE64URL+", "+d.DATA_URL+"]."}}var y=function(e,t){this.data=e,this.contentType=t||null};function g(e,t){switch(e){case d.RAW:return new y(v(t));case d.BASE64:case d.BASE64URL:return new y(b(e,t));case d.DATA_URL:return new y(function(e){var t=new E(e);return t.base64?b(d.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(e){throw f(d.DATA_URL,"Malformed data URL.")}return v(t)}(t.rest)}(t),function(e){return new E(e).contentType}(t))}throw s()}function v(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?n<e.length-1&&56320==(64512&e.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function b(e,t){switch(e){case d.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw f(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case d.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw f(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(t)}catch(t){throw f(e,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var w,_,E=function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw f(d.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=function(e,t){return e.length>=t.length&&e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)},T={STATE_CHANGED:"state_changed"},S="running",C="pausing",k="paused",I="success",x="canceling",N="canceled",A="error",O={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function D(e){switch(e){case S:case C:case x:return O.RUNNING;case k:return O.PAUSED;case I:return O.SUCCESS;case N:return O.CANCELED;case A:default:return O.ERROR}}function R(e){return null!=e}function P(e){return void 0!==e}function M(e){return"function"==typeof e}function L(e){return"object"==typeof e}function F(e){return"string"==typeof e||e instanceof String}function U(e){return"number"==typeof e||e instanceof Number}function j(e){return q()&&e instanceof Blob}function q(){return"undefined"!=typeof Blob}(_=w=w||{})[_.NO_ERROR=0]="NO_ERROR",_[_.NETWORK_ERROR=1]="NETWORK_ERROR",_[_.ABORT=2]="ABORT";var B=(V.prototype.send=function(e,t,n,r){if(this.sent_)throw p("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),R(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return R(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},V.prototype.getErrorCode=function(){if(!this.sent_)throw p("cannot .getErrorCode() before sending");return this.errorCode_},V.prototype.getStatus=function(){if(!this.sent_)throw p("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},V.prototype.getResponseText=function(){if(!this.sent_)throw p("cannot .getResponseText() before sending");return this.xhr_.responseText},V.prototype.abort=function(){this.xhr_.abort()},V.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},V.prototype.addUploadProgressListener=function(e){R(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},V.prototype.removeUploadProgressListener=function(e){R(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},V);function V(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=w.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=w.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=w.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var W=(z.prototype.createXhrIo=function(){return new B},z);function z(){}var H=(K.prototype.size=function(){return this.size_},K.prototype.type=function(){return this.type_},K.prototype.slice=function(e,t){if(j(this.data_)){var n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new K(n)}return new K(new Uint8Array(this.data_.buffer,e,t-e),!0)},K.getBlob=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(q()){var n=e.map(function(e){return e instanceof K?e.data_:e});return new K(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(q())return new Blob(e);throw Error("This browser doesn't seem to support creating Blobs")}.apply(null,n))}var r=e.map(function(e){return F(e)?g(d.RAW,e).data:e.data_}),i=0;r.forEach(function(e){i+=e.byteLength});var o=new Uint8Array(i),a=0;return r.forEach(function(e){for(var t=0;t<e.length;t++)o[a++]=e[t]}),new K(o,!0)},K.prototype.uploadData=function(){return this.data_},K);function K(e,t){var n=0,r="";j(e)?(n=(this.data_=e).size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}var Q=(Object.defineProperty(G.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),G.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},G.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},G.makeFromBucketSpec=function(e){var t;try{t=G.makeFromUrl(e)}catch(t){return new G(e,"")}if(""===t.path)return t;throw function(e){return new r(o.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}(e)},G.makeFromUrl=function(e){for(var n=null,i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i"),s=t.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(e){e.path_=decodeURIComponent(e.path)}}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var f=h[l.indices.bucket],p=h[l.indices.path];n=new G(f,p=p||""),l.postModify(n);break}}if(null==n)throw function(e){return new r(o.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n},G);function G(e,t){this.bucket=e,this.path_=t}function Y(e){var t;try{t=JSON.parse(e)}catch(e){return null}return function(e){return L(e)&&!Array.isArray(e)}(t)?t:null}function X(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function $(e){return"https://"+t+"/v0"+e}function J(e){var t=encodeURIComponent,n="?";for(var r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n=n.slice(0,-1)}function Z(e,t){return t}var ee=function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Z},te=null;function ne(e,t,n){var r=Y(t);return null===r?null:function(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new Q(n,r);return t.makeStorageReference(i)}})}(r,e),r}(e,r,n)}function re(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}function ie(e){if(!L(e)||!e)throw"Expected Metadata object.";for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if("customMetadata"===t){if(!L(n))throw"Expected object for 'customMetadata' mapping."}else if(L(r=n)&&null!==r)throw"Mapping for '"+t+"' cannot be an object."}var r}var oe="maxResults",ae=1e3,se="pageToken",ue="prefixes",ce="items";function le(e){if(!L(e)||!e)throw"Expected ListOptions object.";for(var t in e)if(t===oe){if(!U(n=e[oe])||!Number.isInteger(n)||e[oe]<=0)throw"Expected maxResults to be a positive number.";if(1e3<e[oe])throw"Expected maxResults to be less than or equal to "+ae+"."}else{if(t!==se)throw"Unknown option: "+t;if(e[se]&&!F(e[se]))throw"Expected pageToken to be string."}var n}var he=function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function fe(e){if(!e)throw s()}function pe(e,t){return function(n,r){var i=ne(e,r,t);return fe(null!==i),i}}function de(e){return function(t,i){var a=function(e,t){var i=Y(t);return null===i?null:function(e,t){var i={prefixes:[],items:[],nextPageToken:t.nextPageToken},a=e.bucket();if(null===a)throw new r(o.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+n+"' property when initializing the app?");if(t[ue])for(var s=0,u=t[ue];s<u.length;s++){var c=u[s].replace(/\/$/,""),l=e.makeStorageReference(new Q(a,c));i.prefixes.push(l)}if(t[ce])for(var h=0,f=t[ce];h<f.length;h++){var p=f[h];l=e.makeStorageReference(new Q(a,p.name)),i.items.push(l)}return i}(e,i)}(e,i);return fe(null!==a),a}}function me(e){return function(t,n){var i;return(i=401===t.getStatus()?new r(o.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?function(e){return new r(o.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(e.bucket):403===t.getStatus()?function(e){return new r(o.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}(e.path):n).setServerResponseProp(n.serverResponseProp()),i}}function ye(e){var t=me(e);return function(n,i){var a=t(n,i);return 404===n.getStatus()&&(a=function(e){return new r(o.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}(e.path)),a.setServerResponseProp(i.serverResponseProp()),a}}function ge(e,t,n){var r=$(t.fullServerUrl()),i=e.maxOperationRetryTime(),o=new he(r,"GET",pe(e,n),i);return o.errorHandler=ye(t),o}function ve(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}var be=function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null};function we(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){fe(!1)}return fe(!!n&&-1!==(t||["active"]).indexOf(n)),n}var _e=function(e,t,n){if(M(e)||R(t)||R(n))this.next=e,this.error=t||null,this.complete=n||null;else{var r=e;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}},Ee=function(e,t,n,r,i,o){this.bytesTransferred=e,this.totalBytes=t,this.state=n,this.metadata=r,this.task=i,this.ref=o};function Te(e,t,n){for(var i=t.length,a=t.length,s=0;s<t.length;s++)if(t[s].optional){i=s;break}if(!(i<=n.length&&n.length<=a))throw function(e,t,n,i){var a,s;return s=e===t?1===(a=e)?"argument":"arguments":(a="between "+e+" and "+t,"arguments"),new r(o.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+n+"`: Expected "+a+" "+s+", received "+i+".")}(i,a,e,n.length);for(s=0;s<n.length;s++)try{t[s].validator(n[s])}catch(t){throw t instanceof Error?l(s,e,t.message):l(s,e,t)}}var Se=function(e,t){var n=this;this.validator=function(t){n.optional&&!P(t)||e(t)},this.optional=!!t};function Ce(e,t){function n(e){if(!F(e))throw"Expected string."}var r;return r=e?function(e,t){return function(n){e(n),t(n)}}(n,e):n,new Se(r,t)}function ke(e){return new Se(ie,e)}function Ie(){return new Se(function(e){if(!(U(e)&&0<=e))throw"Expected a number 0 or greater."})}function xe(e,t){return new Se(function(t){if(!(null===t||R(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)},t)}function Ne(e){return new Se(function(e){if(null!==e&&!M(e))throw"Expected a Function."},e)}function Ae(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then(function(){return e.apply(void 0,t)})}}var Oe=(De.prototype.makeProgressCallback_=function(){var e=this,t=this.transferred_;return function(n){return e.updateProgress_(t+n)}},De.prototype.shouldDoResumable_=function(e){return 262144<e.size()},De.prototype.start_=function(){this.state_===S&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},De.prototype.resolveToken_=function(e){var t=this;this.authWrapper_.getAuthToken().then(function(n){switch(t.state_){case S:e(n);break;case x:t.transition_(N);break;case C:t.transition_(k)}})},De.prototype.createResumable_=function(){var e=this;this.resolveToken_(function(t){var n=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a=ve(t,r,i),s={name:a.fullPath},u=$(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=re(a,n),h=e.maxUploadRetryTime(),f=new he(u,"POST",function(e){var t;we(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){fe(!1)}return fe(F(t)),t},h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=me(t),f}(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t);(e.request_=r).getPromise().then(function(t){e.request_=null,e.uploadUrl_=t,e.needToFetchStatus_=!1,e.completeTransitions_()},e.errorHandler_)})},De.prototype.fetchStatus_=function(){var e=this,t=this.uploadUrl_;this.resolveToken_(function(n){var r=function(e,t,n,r){var i=e.maxUploadRetryTime(),o=new he(n,"POST",function(e){var t=we(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){fe(!1)}n||fe(!1);var i=Number(n);return fe(!isNaN(i)),new be(i,r.size(),"final"===t)},i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=me(t),o}(e.authWrapper_,e.location_,t,e.blob_),i=e.authWrapper_.makeRequest(r,n);(e.request_=i).getPromise().then(function(t){t=t,e.request_=null,e.updateProgress_(t.current),e.needToFetchStatus_=!1,t.finalized&&(e.needToFetchMetadata_=!0),e.completeTransitions_()},e.errorHandler_)})},De.prototype.continueUpload_=function(){var e=this,t=262144*this.chunkMultiplier_,n=new be(this.transferred_,this.blob_.size()),i=this.uploadUrl_;this.resolveToken_(function(a){var s;try{s=function(e,t,n,i,a,s,u,l){var h=new be(0,0);if(u?(h.current=u.current,h.total=u.total):(h.current=0,h.total=i.size()),i.size()!==h.total)throw new r(o.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var f=h.total-h.current,p=f;0<a&&(p=Math.min(p,a));var d=h.current,m=d+p,y={"X-Goog-Upload-Command":p===f?"upload, finalize":"upload","X-Goog-Upload-Offset":h.current},g=i.slice(d,m);if(null===g)throw c();var v=t.maxUploadRetryTime(),b=new he(n,"POST",function(e,n){var r,o=we(e,["active","final"]),a=h.current+p,u=i.size();return r="final"===o?pe(t,s)(e,n):null,new be(a,u,"final"===o,r)},v);return b.headers=y,b.body=g.uploadData(),b.progressCallback=l||null,b.errorHandler=me(e),b}(e.location_,e.authWrapper_,i,e.blob_,t,e.mappings_,n,e.makeProgressCallback_())}catch(a){return e.error_=a,void e.transition_(A)}var u=e.authWrapper_.makeRequest(s,a);(e.request_=u).getPromise().then(function(t){e.increaseMultiplier_(),e.request_=null,e.updateProgress_(t.current),t.finalized?(e.metadata_=t.metadata,e.transition_(I)):e.completeTransitions_()},e.errorHandler_)})},De.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},De.prototype.fetchMetadata_=function(){var e=this;this.resolveToken_(function(t){var n=ge(e.authWrapper_,e.location_,e.mappings_),r=e.authWrapper_.makeRequest(n,t);(e.request_=r).getPromise().then(function(t){e.request_=null,e.metadata_=t,e.transition_(I)},e.metadataErrorHandler_)})},De.prototype.oneShotUpload_=function(){var e=this;this.resolveToken_(function(t){var n=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=ve(t,r,i),l="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+re(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+s+"--",f=H.getBlob(l,r,h);if(null===f)throw c();var p={name:u.fullPath},d=$(o),m=e.maxUploadRetryTime(),y=new he(d,"POST",pe(e,n),m);return y.urlParams=p,y.headers=a,y.body=f.uploadData(),y.errorHandler=me(t),y}(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t);(e.request_=r).getPromise().then(function(t){e.request_=null,e.metadata_=t,e.updateProgress_(e.blob_.size()),e.transition_(I)},e.errorHandler_)})},De.prototype.updateProgress_=function(e){var t=this.transferred_;this.transferred_=e,this.transferred_!==t&&this.notifyObservers_()},De.prototype.transition_=function(e){if(this.state_!==e)switch(e){case x:case C:this.state_=e,null!==this.request_&&this.request_.cancel();break;case S:var t=this.state_===k;this.state_=e,t&&(this.notifyObservers_(),this.start_());break;case k:this.state_=e,this.notifyObservers_();break;case N:this.error_=u(),this.state_=e,this.notifyObservers_();break;case A:case I:this.state_=e,this.notifyObservers_()}},De.prototype.completeTransitions_=function(){switch(this.state_){case C:this.transition_(k);break;case x:this.transition_(N);break;case S:this.start_()}},Object.defineProperty(De.prototype,"snapshot",{get:function(){var e=D(this.state_);return new Ee(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),De.prototype.on=function(e,t,n,r){var i="Expected a function or an Object with one of `next`, `error`, `complete` properties.",o=Ne(!0).validator,a=xe(null,!0).validator;function s(e){try{return void o(e)}catch(e){}try{if(a(e),!(P(e.next)||P(e.error)||P(e.complete)))throw"";return}catch(e){throw i}}Te("on",[Ce(function(){if(e!==T.STATE_CHANGED)throw"Expected one of the event types: ["+T.STATE_CHANGED+"]."}),xe(s,!0),Ne(!0),Ne(!0)],arguments);var u=this;function c(e){return function(t,n,i){null!==e&&Te("on",e,arguments);var o=new _e(t,n,r);return u.addObserver_(o),function(){u.removeObserver_(o)}}}var l=[xe(function(e){if(null===e)throw i;s(e)}),Ne(!0),Ne(!0)];return P(t)||P(n)||P(r)?c(null)(t,n,r):c(l)},De.prototype.then=function(e,t){return this.promise_.then(e,t)},De.prototype.catch=function(e){return this.then(null,e)},De.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},De.prototype.removeObserver_=function(e){var t=this.observers_.indexOf(e);-1!==t&&this.observers_.splice(t,1)},De.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach(function(t){e.notifyObserver_(t)})},De.prototype.finishPromise_=function(){if(null!==this.resolve_){var e=!0;switch(D(this.state_)){case O.SUCCESS:Ae(this.resolve_.bind(null,this.snapshot))();break;case O.CANCELED:case O.ERROR:Ae(this.reject_.bind(null,this.error_))();break;default:e=!1}e&&(this.resolve_=null,this.reject_=null)}},De.prototype.notifyObserver_=function(e){switch(D(this.state_)){case O.RUNNING:case O.PAUSED:e.next&&Ae(e.next.bind(e,this.snapshot))();break;case O.SUCCESS:e.complete&&Ae(e.complete.bind(e))();break;case O.CANCELED:case O.ERROR:e.error&&Ae(e.error.bind(e,this.error_))();break;default:e.error&&Ae(e.error.bind(e,this.error_))()}},De.prototype.resume=function(){Te("resume",[],arguments);var e=this.state_===k||this.state_===C;return e&&this.transition_(S),e},De.prototype.pause=function(){Te("pause",[],arguments);var e=this.state_===S;return e&&this.transition_(C),e},De.prototype.cancel=function(){Te("cancel",[],arguments);var e=this.state_===S||this.state_===C;return e&&this.transition_(x),e},De);function De(e,t,n,r,i,a){var s=this;void 0===a&&(a=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.authWrapper_=t,this.location_=n,this.blob_=i,this.metadata_=a,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=S,this.errorHandler_=function(e){s.request_=null,s.chunkMultiplier_=1,e.codeEquals(o.CANCELED)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=e,s.transition_(A))},this.metadataErrorHandler_=function(e){s.request_=null,e.codeEquals(o.CANCELED)?s.completeTransitions_():(s.error_=e,s.transition_(A))},this.promise_=new Promise(function(e,t){s.resolve_=e,s.reject_=t,s.start_()}),this.promise_.then(null,function(){})}var Re=(Pe.prototype.toString=function(){return Te("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},Pe.prototype.newRef=function(e,t){return new Pe(e,t)},Pe.prototype.mappings=function(){return function(){if(te)return te;var e=[];e.push(new ee("bucket")),e.push(new ee("generation")),e.push(new ee("metageneration")),e.push(new ee("name","fullPath",!0));var t=new ee("name");t.xform=function(e,t){return function(e){return!F(e)||e.length<2?e:X(e)}(t)},e.push(t);var n=new ee("size");return n.xform=function(e,t){return R(t)?Number(t):t},e.push(n),e.push(new ee("timeCreated")),e.push(new ee("updated")),e.push(new ee("md5Hash",null,!0)),e.push(new ee("cacheControl",null,!0)),e.push(new ee("contentDisposition",null,!0)),e.push(new ee("contentEncoding",null,!0)),e.push(new ee("contentLanguage",null,!0)),e.push(new ee("contentType",null,!0)),e.push(new ee("metadata","customMetadata",!0)),te=e}()},Pe.prototype.child=function(e){Te("child",[Ce()],arguments);var t=function(e,t){var n=t.split("/").filter(function(e){return 0<e.length}).join("/");return 0===e.length?n:e+"/"+n}(this.location.path,e),n=new Q(this.location.bucket,t);return this.newRef(this.authWrapper,n)},Object.defineProperty(Pe.prototype,"parent",{get:function(){var e=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this.location.path);if(null===e)return null;var t=new Q(this.location.bucket,e);return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(Pe.prototype,"root",{get:function(){var e=new Q(this.location.bucket,"");return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(Pe.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(Pe.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(Pe.prototype,"name",{get:function(){return X(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(Pe.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),Pe.prototype.put=function(e,t){return void 0===t&&(t=null),Te("put",[new Se(function(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||q()&&e instanceof Blob))throw"Expected Blob or File."}),ke(!0)],arguments),this.throwIfRoot_("put"),new Oe(this,this.authWrapper,this.location,this.mappings(),new H(e),t)},Pe.prototype.putString=function(e,t,n){void 0===t&&(t=d.RAW),Te("putString",[Ce(),Ce(m,!0),ke(!0)],arguments),this.throwIfRoot_("putString");var r=g(t,e),i=Object.assign({},n);return!R(i.contentType)&&R(r.contentType)&&(i.contentType=r.contentType),new Oe(this,this.authWrapper,this.location,this.mappings(),new H(r.data,!0),i)},Pe.prototype.delete=function(){var e=this;return Te("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then(function(t){var n=function(e,t){var n=$(t.fullServerUrl()),r=e.maxOperationRetryTime(),i=new he(n,"DELETE",function(e,t){},r);return i.successCodes=[200,204],i.errorHandler=ye(t),i}(e.authWrapper,e.location);return e.authWrapper.makeRequest(n,t).getPromise()})},Pe.prototype.listAll=function(){Te("listAll",[],arguments);var e={prefixes:[],items:[]};return this.listAllHelper(e).then(function(){return e})},Pe.prototype.listAllHelper=function(e,t){return function(e,t,n,r){return new(n=n||Promise)(function(t,i){function o(e){try{s(r.next(e))}catch(e){i(e)}}function a(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(o,a)}s((r=r.apply(e,[])).next())})}(this,0,void 0,function(){var n,r,i,o;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,function(a){switch(a.label){case 0:return n={pageToken:t},[4,this.list(n)];case 1:return r=a.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,this.listAllHelper(e,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}})})},Pe.prototype.list=function(e){Te("list",[new Se(le,!0)],arguments);var t=this;return this.authWrapper.getAuthToken().then(function(n){var r=e||{},i=function(e,t,n,r,i){var o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",0<"/".length&&(o.delimiter="/"),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=$(t.bucketOnlyServerUrl()),s=e.maxOperationRetryTime(),u=new he(a,"GET",de(e),s);return u.urlParams=o,u.errorHandler=me(t),u}(t.authWrapper,t.location,0,r.pageToken,r.maxResults);return t.authWrapper.makeRequest(i,n).getPromise()})},Pe.prototype.getMetadata=function(){var e=this;return Te("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then(function(t){var n=ge(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(n,t).getPromise()})},Pe.prototype.updateMetadata=function(e){var t=this;return Te("updateMetadata",[ke()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then(function(n){var r=function(e,t,n,r){var i=$(t.fullServerUrl()),o=re(n,r),a=e.maxOperationRetryTime(),s=new he(i,"PATCH",pe(e,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=ye(t),s}(t.authWrapper,t.location,e,t.mappings());return t.authWrapper.makeRequest(r,n).getPromise()})},Pe.prototype.getDownloadURL=function(){var e=this;return Te("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then(function(t){var n=function(e,t,n){var r=$(t.fullServerUrl()),i=e.maxOperationRetryTime(),o=new he(r,"GET",function(e,t){return function(n,r){var i=ne(e,r,t);return fe(null!==i),function(e,t){var n=Y(t);if(null===n)return null;if(!F(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map(function(t){var n=e.bucket,r=e.fullPath;return $("/b/"+i(n)+"/o/"+i(r))+J({alt:"media",token:t})})[0]}(i,r)}}(e,n),i);return o.errorHandler=ye(t),o}(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(n,t).getPromise().then(function(e){if(null===e)throw new r(o.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})})},Pe.prototype.throwIfRoot_=function(e){if(""===this.location.path)throw function(e){return new r(o.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)},Pe);function Pe(e,t){this.authWrapper=e,this.location=t instanceof Q?t:Q.makeFromUrl(t)}var Me=(Le.prototype.getPromise=function(){return this.promise_},Le.prototype.cancel=function(e){},Le);function Le(e){this.promise_=Promise.reject(e)}var Fe=(Ue.prototype.addRequest=function(e){var t=this,n=this.id;this.id++,this.map.set(n,e),e.getPromise().then(function(){return t.map.delete(n)},function(){return t.map.delete(n)})},Ue.prototype.clear=function(){this.map.forEach(function(e){e&&e.cancel(!0)}),this.map.clear()},Ue);function Ue(){this.map=new Map,this.id=-9007199254740991}var je=(qe.extractBucket_=function(e){var t=e[n]||null;return null==t?null:Q.makeFromBucketSpec(t).bucket},qe.prototype.getAuthToken=function(){return null!==this.app_&&R(this.app_.INTERNAL)&&R(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(e){return null!==e?e.accessToken:null},function(){return null}):Promise.resolve(null)},qe.prototype.bucket=function(){if(this.deleted_)throw h();return this.bucket_},qe.prototype.service=function(){return this.service_},qe.prototype.makeStorageReference=function(e){return this.storageRefMaker_(this,e)},qe.prototype.makeRequest=function(e,t){if(this.deleted_)return new Me(h());var n=this.requestMaker_(e,t,this.pool_);return this.requestMap_.addRequest(n),n},qe.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},qe.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},qe.prototype.setMaxUploadRetryTime=function(e){this.maxUploadRetryTime_=e},qe.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},qe.prototype.setMaxOperationRetryTime=function(e){this.maxOperationRetryTime_=e},qe);function qe(e,t,n,r,i){if(this.bucket_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var o=this.app_.options;R(o)&&(this.bucket_=qe.extractBucket_(o))}this.storageRefMaker_=t,this.requestMaker_=n,this.pool_=i,this.service_=r,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e4,this.requestMap_=new Fe}var Be=(Ve.prototype.start_=function(){var e=this;function t(t,n){var i,a=e.resolve_,c=e.reject_,l=n.xhr;if(n.wasSuccessCode)try{var f=e.callback_(l,l.getResponseText());P(f)?a(f):a()}catch(t){c(t)}else null!==l?((i=s()).setServerResponseProp(l.getResponseText()),e.errorCallback_?c(e.errorCallback_(l,i)):c(i)):n.canceled?c(i=e.appDelete_?h():u()):c(i=new r(o.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new We(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];u||(u=!0,t.apply(null,e))}function l(t){i=setTimeout(function(){i=null,e(h,s())},t)}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];u||(e?c.call.apply(c,[null,e].concat(t)):s()||o?c.call.apply(c,[null,e].concat(t)):(r<64&&(r*=2),l(1===a?(a=2,0):1e3*(r+Math.random()))))}var f=!1;function p(e){f||(f=!0,u||(null!==i?(e||(a=2),clearTimeout(i),l(0)):e||(a=1)))}return l(0),setTimeout(function(){p(o=!0)},n),p}(function(t,n){if(n)t(!1,new We(!1,null,!0));else{var r=e.pool_.createXhrIo();e.pendingXhr_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then(function(n){null!==e.progressCallback_&&n.removeUploadProgressListener(i),e.pendingXhr_=null;var r=(n=n).getErrorCode()===w.NO_ERROR,o=n.getStatus();if(r&&!e.isRetryStatusCode_(o)){var a=-1!==e.successCodes_.indexOf(o);t(!0,new We(a,n))}else{var s=n.getErrorCode()===w.ABORT;t(!1,new We(!1,null,s))}})}function i(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}},t,this.timeout_)},Ve.prototype.getPromise=function(){return this.promise_},Ve.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},Ve.prototype.isRetryStatusCode_=function(e){var t=500<=e&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r},Ve);function Ve(e,t,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(e,t){h.resolve_=e,h.reject_=t,h.start_()})}var We=function(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n};function ze(t,n,r){var i=J(t.urlParams),o=t.url+i,a=Object.assign({},t.headers);return function(e,t){null!==t&&0<t.length&&(e.Authorization="Firebase "+t)}(a,n),function(t){var n=void 0!==e?e.SDK_VERSION:"AppManager";t["X-Firebase-Storage-Version"]="webjs/"+n}(a),new Be(o,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}var He=(Ke.prototype.ref=function(e){if(Te("ref",[Ce(function(e){if("string"!=typeof e)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(e))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var t=new Re(this.authWrapper_,this.bucket_);return null!=e?t.child(e):t},Ke.prototype.refFromURL=function(e){return Te("refFromURL",[Ce(function(e){if("string"!=typeof e)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(e))throw"Expected full URL but got a child path, use ref instead.";try{Q.makeFromUrl(e)}catch(e){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new Re(this.authWrapper_,e)},Object.defineProperty(Ke.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),Ke.prototype.setMaxUploadRetryTime=function(e){Te("setMaxUploadRetryTime",[Ie()],arguments),this.authWrapper_.setMaxUploadRetryTime(e)},Ke.prototype.setMaxOperationRetryTime=function(e){Te("setMaxOperationRetryTime",[Ie()],arguments),this.authWrapper_.setMaxOperationRetryTime(e)},Object.defineProperty(Ke.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(Ke.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),Ke);function Ke(e,t,n){if(this.bucket_=null,this.authWrapper_=new je(e,function(e,t){return new Re(e,t)},ze,this,t),this.app_=e,null!=n)this.bucket_=Q.makeFromBucketSpec(n);else{var r=this.authWrapper_.bucket();null!=r&&(this.bucket_=new Q(r,""))}this.internals_=new Ge(this)}var Qe,Ge=(Ye.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},Ye);function Ye(e){this.service_=e}Qe={TaskState:O,TaskEvent:T,StringFormat:d,Storage:He,Reference:Re},e.INTERNAL.registerService("storage",function(e,t,n){return new He(e,new W,n)},Qe,void 0,!0)}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-storage - be sure to load firebase-app.js first.")}}(n(174))},function(e,t,n){n(286),n(84),n(289),n(290),e.exports=n(18).Symbol},function(e,t,n){"use strict";var r=n(12),i=n(41),o=n(15),a=n(6),s=n(42),u=n(125).KEY,c=n(27),l=n(82),h=n(67),f=n(66),p=n(13),d=n(177),m=n(127),y=n(287),g=n(118),v=n(29),b=n(19),w=n(20),_=n(28),E=n(57),T=n(59),S=n(90),C=n(288),k=n(58),I=n(96),x=n(24),N=n(56),A=k.f,O=x.f,D=C.f,R=r.Symbol,P=r.JSON,M=P&&P.stringify,L=p("_hidden"),F=p("toPrimitive"),U={}.propertyIsEnumerable,j=l("symbol-registry"),q=l("symbols"),B=l("op-symbols"),V=Object.prototype,W="function"==typeof R&&!!I.f,z=r.QObject,H=!z||!z.prototype||!z.prototype.findChild,K=o&&c(function(){return 7!=S(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=A(V,t);r&&delete V[t],O(e,t,n),r&&e!==V&&O(V,t,r)}:O,Q=function(e){var t=q[e]=S(R.prototype);return t._k=e,t},G=W&&"symbol"==typeof R.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof R},Y=function(e,t,n){return e===V&&Y(B,t,n),v(e),t=E(t,!0),v(n),i(q,t)?(n.enumerable?(i(e,L)&&e[L][t]&&(e[L][t]=!1),n=S(n,{enumerable:T(0,!1)})):(i(e,L)||O(e,L,T(1,{})),e[L][t]=!0),K(e,t,n)):O(e,t,n)},X=function(e,t){v(e);for(var n,r=y(t=_(t)),i=0,o=r.length;o>i;)Y(e,n=r[i++],t[n]);return e},$=function(e){var t=U.call(this,e=E(e,!0));return!(this===V&&i(q,e)&&!i(B,e))&&(!(t||!i(this,e)||!i(q,e)||i(this,L)&&this[L][e])||t)},J=function(e,t){if(e=_(e),t=E(t,!0),e!==V||!i(q,t)||i(B,t)){var n=A(e,t);return!n||!i(q,t)||i(e,L)&&e[L][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=D(_(e)),r=[],o=0;n.length>o;)i(q,t=n[o++])||t==L||t==u||r.push(t);return r},ee=function(e){for(var t,n=e===V,r=D(n?B:_(e)),o=[],a=0;r.length>a;)!i(q,t=r[a++])||n&&!i(V,t)||o.push(q[t]);return o};W||(s((R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0);return o&&H&&K(V,e,{configurable:!0,set:function t(n){this===V&&t.call(B,n),i(this,L)&&i(this[L],e)&&(this[L][e]=!1),K(this,e,T(1,n))}}),Q(e)}).prototype,"toString",function(){return this._k}),k.f=J,x.f=Y,n(92).f=C.f=Z,n(74).f=$,I.f=ee,o&&!n(52)&&s(V,"propertyIsEnumerable",$,!0),d.f=function(e){return Q(p(e))}),a(a.G+a.W+a.F*!W,{Symbol:R});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var re=N(p.store),ie=0;re.length>ie;)m(re[ie++]);a(a.S+a.F*!W,"Symbol",{for:function(e){return i(j,e+="")?j[e]:j[e]=R(e)},keyFor:function(e){if(!G(e))throw TypeError(e+" is not a symbol!");for(var t in j)if(j[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!W,"Object",{create:function(e,t){return void 0===t?S(e):X(S(e),t)},defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:J,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var oe=c(function(){I.f(1)});a(a.S+a.F*oe,"Object",{getOwnPropertySymbols:function(e){return I.f(w(e))}}),P&&a(a.S+a.F*(!W||c(function(){var e=R();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!G(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!G(t))return t}),r[1]=t,M.apply(P,r)}}),R.prototype[F]||n(47)(R.prototype,F,R.prototype.valueOf),h(R,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(e,t,n){var r=n(56),i=n(96),o=n(74);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var r=n(28),i=n(92).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(t){return a.slice()}}(e):i(r(e))}},function(e,t,n){n(127)("asyncIterator")},function(e,t,n){n(127)("observable")},function(e,t,n){"use strict";n(292)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=(r=n(174))&&"object"===typeof r&&"default"in r?r.default:r,a=n(176),s=n(98),u=n(175),c=n(293),l=o.SDK_VERSION,h=new a.Logger("@firebase/firestore");function f(){return h.logLevel===a.LogLevel.DEBUG?i.DEBUG:h.logLevel===a.LogLevel.SILENT?i.SILENT:i.ERROR}function p(e){switch(e){case i.DEBUG:h.logLevel=a.LogLevel.DEBUG;break;case i.ERROR:h.logLevel=a.LogLevel.ERROR;break;case i.SILENT:h.logLevel=a.LogLevel.SILENT;break;default:h.error("Firestore ("+l+"): Invalid value passed to `setLogLevel`")}}function d(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(h.logLevel<=a.LogLevel.DEBUG){var i=n.map(y);h.debug.apply(h,["Firestore ("+l+") ["+e+"]: "+t].concat(i))}}function m(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(h.logLevel<=a.LogLevel.ERROR){var r=t.map(y);h.error.apply(h,["Firestore ("+l+"): "+e].concat(r))}}function y(e){if("string"===typeof e)return e;var t=b.getPlatform();try{return t.formatJSON(e)}catch(n){return e}}function g(e){var t="FIRESTORE ("+l+") INTERNAL ASSERTION FAILED: "+e;throw m(t),new Error(t)}function v(e,t){e||g(t)}!function(e){e[e.DEBUG=0]="DEBUG",e[e.ERROR=1]="ERROR",e[e.SILENT=2]="SILENT"}(i||(i={}));var b=function(){function e(){}return e.setPlatform=function(t){e.platform&&g("Platform already defined"),e.platform=t},e.getPlatform=function(){return e.platform||g("Platform not set"),e.platform},e}();function w(){return b.getPlatform().emptyByteString}var _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},E=function(e){function t(t,n){var r=e.call(this,n)||this;return r.code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return s.__extends(t,e),t}(Error);function T(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new E(_.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function C(e,t){return void 0!==e?e:t}function k(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function I(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function x(e){for(var t in v(null!=e&&"object"===typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function N(e,t){if(0!==t.length)throw new E(_.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+K(t.length,"argument")+".")}function A(e,t,n){if(t.length!==n)throw new E(_.INVALID_ARGUMENT,"Function "+e+"() requires "+K(n,"argument")+", but was called with "+K(t.length,"argument")+".")}function O(e,t,n){if(t.length<n)throw new E(_.INVALID_ARGUMENT,"Function "+e+"() requires at least "+K(n,"argument")+", but was called with "+K(t.length,"argument")+".")}function D(e,t,n,r){if(t.length<n||t.length>r)throw new E(_.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+K(t.length,"argument")+".")}function R(e,t,n,r){j(e,t,H(n)+" argument",r)}function P(e,t,n,r){void 0!==r&&R(e,t,n,r)}function M(e,t,n,r){j(e,t,n+" option",r)}function L(e,t,n,r){void 0!==r&&M(e,t,n,r)}function F(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){if(!(r instanceof Array))throw new E(_.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+B(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new E(_.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be "+n+", but the value at index "+o+" was: "+B(r[o]))}(e,t,n,r,i)}function U(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(B(u))}var c=B(r);throw new E(_.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(e,0,n,r,i)}function j(e,t,n,r){if(!("object"===t?q(r):"non-empty string"===t?"string"===typeof r&&""!==r:typeof r===t)){var i=B(r);throw new E(_.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function q(e){return"object"===typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function B(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"===typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"===typeof e||"boolean"===typeof e)return""+e;if("object"===typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"===typeof e?"a function":g("Unknown wrong type: "+typeof e)}function V(e,t,n){if(void 0===n)throw new E(_.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+H(t)+" argument, but it was undefined.")}function W(e,t,n){I(t,function(t,r){if(n.indexOf(t)<0)throw new E(_.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))})}function z(e,t,n,r){var i=B(r);return new E(_.INVALID_ARGUMENT,"Function "+e+"() requires its "+H(n)+" argument to be a "+t+", but it was: "+i)}function H(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function K(e,t){return e+" "+t+(1===e?"":"s")}var Q=function(){function e(){}return e.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return v(20===t.length,"Invalid auto ID: "+t),t},e}();function G(e,t){return e<t?-1:e>t?1:0}function Y(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function X(e){return e+"\0"}function $(){if("undefined"===typeof Uint8Array)throw new E(_.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function J(){if(!b.getPlatform().base64Available)throw new E(_.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Z,ee=function(){function e(e){J(),this._binaryString=e}return e.fromBase64String=function(t){A("Blob.fromBase64String",arguments,1),R("Blob.fromBase64String","string",1,t),J();try{return new e(b.getPlatform().atob(t))}catch(n){throw new E(_.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+n)}},e.fromUint8Array=function(t){if(A("Blob.fromUint8Array",arguments,1),$(),!(t instanceof Uint8Array))throw z("Blob.fromUint8Array","Uint8Array",1,t);return new e(Array.prototype.map.call(t,function(e){return String.fromCharCode(e)}).join(""))},e.prototype.toBase64=function(){return A("Blob.toBase64",arguments,0),J(),b.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){A("Blob.toUint8Array",arguments,0),$();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._binaryString===e._binaryString},e.prototype._compareTo=function(e){return G(this._binaryString,e._binaryString)},e}(),te=T(ee,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),ne=function(){return function(e,t,n,r,i){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i}}(),re="(default)",ie=function(){function e(e,t){this.projectId=e,this.database=t||re}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database===re},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(e){return G(this.projectId,e.projectId)||G(this.database,e.database)},e}(),oe=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}return e.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},e.INVALID=-1,e}(),ae=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&g("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&g("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,v(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return v(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return v(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return v(e<this.length,"Index out of range"),this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(e){if(e.indexOf("//")>=0)throw new E(_.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new t(e.split("/").filter(function(e){return e.length>0}))},t.EMPTY_PATH=new t([]),t}(ae),ue=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return ue.test(e)},t.prototype.canonicalString=function(){return this.toArray().map(function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new E(_.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new E(_.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new E(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new E(_.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.EMPTY_PATH=new t([]),t}(ae),le=function(){function e(t){this.path=t,v(e.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}return e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===se.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return se.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2===0},e.fromSegments=function(t){return new e(new se(t.slice()))},e.fromPathString=function(t){return new e(se.fromString(t))},e.EMPTY=new e(new se([])),e}(),he=function(){return function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}}();!function(e){e.All="all",e.ListenStreamIdle="listen_stream_idle",e.ListenStreamConnectionBackoff="listen_stream_connection_backoff",e.WriteStreamIdle="write_stream_idle",e.WriteStreamConnectionBackoff="write_stream_connection_backoff",e.OnlineStateTimeout="online_state_timeout",e.ClientMetadataRefresh="client_metadata_refresh",e.LruGarbageCollection="lru_garbage_collection",e.RetryTransaction="retry_transaction"}(Z||(Z={}));var fe=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new he,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new E(_.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}(),pe=function(){function e(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueAndInitiateShutdown=function(e){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise(function(e){}):this.enqueueInternal(e)},e.prototype.enqueueInternal=function(e){var t=this,n=this.tail.then(function(){return t.operationInProgress=!0,e().catch(function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw m("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw e},0),e}).then(function(e){return t.operationInProgress=!1,e})});return this.tail=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),v(t>=0,"Attempted to schedule an operation with a negative delay of "+t),this.timerIdsToSkip.indexOf(e)>-1&&(t=0);var i=fe.createAndSchedule(this,e,t,n,function(e){return r.removeDelayedOperation(e)});return this.delayedOperations.push(i),i},e.prototype.verifyNotFailed=function(){this.failure&&g("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},e.prototype.verifyOperationInProgress=function(){v(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},e.prototype.drain=function(){return this.enqueueEvenAfterShutdown(function(){return Promise.resolve()})},e.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++){if(n[t].timerId===e)return!0}return!1},e.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then(function(){v(e===Z.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==Z.All&&i.timerId===e)break}return t.drain()})},e.prototype.skipDelaysForTimerId=function(e){this.timerIdsToSkip.push(e)},e.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);v(t>=0,"Delayed operation not found."),this.delayedOperations.splice(t,1)},e}(),de="\x01",me="\x01",ye="\x10",ge="\x11";function ve(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=we(t)),t=be(e.get(n),t);return we(t)}function be(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+=de+ye;break;case de:n+=de+ge;break;default:n+=o}}return n}function we(e){return e+de+me}function _e(e){var t=e.length;if(v(t>=2,"Invalid path "+e),2===t)return v(e.charAt(0)===de&&e.charAt(1)===me,"Non-empty path "+e+" had length 2"),se.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf(de,o);switch((a<0||a>n)&&g('Invalid encoded resource path: "'+e+'"'),e.charAt(a+1)){case me:var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case ye:i+=e.substring(o,a),i+="\0";break;case ge:i+=e.substring(o,a+1);break;default:g('Invalid encoded resource path: "'+e+'"')}o=a+2}return new se(r)}var Ee=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new E(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new E(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new E(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new E(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?G(this.nanoseconds,e.nanoseconds):G(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e}(),Te=function(){function e(e){this.timestamp=e}return e.fromMicroseconds=function(t){var n=Math.floor(t/1e6);return new e(new Ee(n,t%1e6*1e3))},e.fromTimestamp=function(t){return new e(t)},e.forDeletedDoc=function(){return e.MIN},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e.MIN=new e(new Ee(0,0)),e}(),Se=function(){function e(e,t){this.comparator=e,this.root=t||ke.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ke.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ke.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})},e.prototype.toString=function(){var e=[];return this.inorderTraversal(function(t,n){return e.push(t+":"+n),!1}),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new Ce(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new Ce(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new Ce(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new Ce(this.root,e,this.comparator,!0)},e}(),Ce=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){v(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),ke=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw g("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw g("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw g("Black depths differ");return e+(this.isRed()?0:1)},e.EMPTY=null,e.RED=!0,e.BLACK=!1,e}(),Ie=function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw g("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw g("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw g("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw g("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw g("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new ke(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}();ke.EMPTY=new Ie;var xe=function(){function e(e){this.comparator=e,this.data=new Se(this.comparator)}return e.fromMapKeys=function(t){var n=new e(t.comparator);return t.forEach(function(e){n=n.add(e)}),n},e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();){if(!e(n.getNext().key))return}},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new Ne(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new Ne(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return e.forEach(function(e){t=t.add(e)}),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},e.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),Ne=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Ae=new Se(le.comparator);function Oe(){return Ae}function De(){return Oe()}var Re=new Se(le.comparator);function Pe(){return Re}var Me=new Se(le.comparator);function Le(){return Me}var Fe=new xe(le.comparator);function Ue(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Fe,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var je=new xe(G);function qe(){return je}var Be=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r,v(r.length>0,"Cannot create an empty mutation batch")}return e.prototype.applyToRemoteDocument=function(e,t,n){t&&v(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;v(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(e)){var a=r[i];t=o.applyToRemoteDocument(t,a)}}return t},e.prototype.applyToLocalView=function(e,t){t&&v(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++){(s=r[n]).key.isEqual(e)&&(t=s.applyToLocalView(t,t,this.localWriteTime))}for(var i=t,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(e)&&(t=s.applyToLocalView(t,i,this.localWriteTime))}return t},e.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach(function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))}),n},e.prototype.keys=function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},Ue())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&Y(this.mutations,e.mutations)&&Y(this.baseMutations,e.baseMutations)},e}(),Ve=function(){function e(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return e.from=function(t,n,r,i){v(t.mutations.length===r.length,"Mutations sent "+t.mutations.length+" must equal results received "+r.length);for(var o=Le(),a=t.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,r[s].version);return new e(t,n,r,i,o)},e}(),We=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)},function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)})}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&g("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}})},e.prototype.toPromise=function(){var e=this;return new Promise(function(t,n){e.next(t,n)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(e,n){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.waitFor=function(t){return new e(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(e){return n(e)})}),o=!0,i===r&&e()})},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next(function(n){return n?e.resolve(n):t()})},i=0,o=t;i<o.length;i++){r(o[i])}return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)},e}(),ze=function(){function e(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return e.forUser=function(t,n,r,i){return v(""!==t.uid,"UserID must not be an empty string."),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ge(e).iterate({index:un.userMutationsIndex,range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})},e.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next(function(t){return t.lastStreamToken=Qe(n),Xe(e).put(t)})},e.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next(function(e){return e.lastStreamToken})},e.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next(function(n){return n.lastStreamToken=Qe(t),Xe(e).put(n)})},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=Ye(e),a=Ge(e);return a.add({}).next(function(s){v("number"===typeof s,"Auto-generated key is not a number");var u=new Be(s,t,n,r),c=i.serializer.toDbMutationBatch(i.userId,u);i.documentKeysByBatchId[s]=u.keys();for(var l=[],h=0,f=r;h<f.length;h++){var p=f[h],d=cn.key(i.userId,p.key.path,s);l.push(a.put(c)),l.push(o.put(d,cn.PLACEHOLDER)),l.push(i.indexManager.addToCollectionParentIndex(e,p.key.path.popLast()))}return We.waitFor(l).next(function(){return u})})},e.prototype.lookupMutationBatch=function(e,t){var n=this;return Ge(e).get(t).next(function(e){return e?(v(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null})},e.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?We.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r,r}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Ge(e).iterate({index:un.userMutationsIndex,range:i},function(e,t,i){t.userId===n.userId&&(v(t.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(t)),i.done()}).next(function(){return o})},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ge(e).iterate({index:un.userMutationsIndex,range:t,reverse:!0},function(e,t,r){n=t.batchId,r.done()}).next(function(){return n})},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ge(e).loadAll(un.userMutationsIndex,n).next(function(e){return e.map(function(e){return t.serializer.fromDbMutationBatch(e)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=cn.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Ye(e).iterate({range:i},function(r,i,a){var s=r[0],u=r[1],c=r[2],l=_e(u);if(s===n.userId&&t.path.isEqual(l))return Ge(e).get(c).next(function(e){if(!e)throw g("Dangling document-mutation reference found: "+r+" which points to "+c);v(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+c),o.push(n.serializer.fromDbMutationBatch(e))});a.done()}).next(function(){return o})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new xe(G),i=[];return t.forEach(function(t){var o=cn.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=Ye(e).iterate({range:a},function(e,i,o){var a=e[0],s=e[1],u=e[2],c=_e(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()});i.push(s)}),We.waitFor(i).next(function(){return n.lookupMutationBatches(e,r)})},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;v(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),v(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,i=r.length+1,o=cn.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new xe(G);return Ye(e).iterate({range:a},function(e,t,o){var a=e[0],u=e[1],c=e[2],l=_e(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()}).next(function(){return n.lookupMutationBatches(e,s)})},e.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(Ge(e).get(t).next(function(e){if(null===e)throw g("Dangling document-mutation reference found, which points to "+t);v(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))}))}),We.waitFor(i).next(function(){return r})},e.prototype.removeMutationBatch=function(e,t){var n=this;return Ke(e.simpleDbTransaction,this.userId,t).next(function(r){return n.removeCachedMutationKeys(t.batchId),We.forEach(r,function(t){return n.referenceDelegate.removeMutationReference(e,t)})})},e.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return We.resolve();var r=IDBKeyRange.lowerBound(cn.prefixForUser(t.userId)),i=[];return Ye(e).iterate({range:r},function(e,n,r){if(e[0]===t.userId){var o=_e(e[1]);i.push(o)}else r.done()}).next(function(){v(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(e){return e.canonicalString()}))})})},e.prototype.containsKey=function(e,t){return He(e,this.userId,t)},e.prototype.getMutationQueueMetadata=function(e){var t=this;return Xe(e).get(this.userId).next(function(e){return e||new sn(t.userId,-1,"")})},e}();function He(e,t,n){var r=cn.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Ye(e).iterate({range:o,keysOnly:!0},function(e,n,r){var o=e[0],s=e[1];e[2];o===t&&s===i&&(a=!0),r.done()}).next(function(){return a})}function Ke(e,t,n){var r=e.store(un.store),i=e.store(cn.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},function(e,t,n){return s++,n.delete()});o.push(u.next(function(){v(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=cn.key(t,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return We.waitFor(o).next(function(){return c})}function Qe(e){return e instanceof Uint8Array?(v("YES"===Object({NODE_ENV:"production",PUBLIC_URL:"."}).USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function Ge(e){return Un.getStore(e,un.store)}function Ye(e){return Un.getStore(e,cn.store)}function Xe(e){return Un.getStore(e,sn.store)}var $e,Je=1;!function(e){e[e.QueryCache=0]="QueryCache",e[e.SyncEngine=1]="SyncEngine"}($e||($e={}));var Ze=function(){function e(e,t){this.generatorId=e,v((e&Je)===e,"Generator ID "+e+" contains more than "+Je+" reserved bits"),this.seek(void 0!==t?t:this.generatorId)}return e.prototype.next=function(){var e=this.nextId;return this.nextId+=1<<Je,e},e.prototype.after=function(e){return this.seek(e+(1<<Je)),this.next()},e.prototype.seek=function(e){v((e&Je)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},e.forQueryCache=function(){return new e($e.QueryCache,2)},e.forSyncEngine=function(){return new e($e.SyncEngine)},e}(),et="SimpleDb",tt=function(){function e(t){this.db=t,12.2===e.getIOSVersion(u.getUA())&&m("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.openOrCreate=function(t,n,r){return v(e.isAvailable(),"IndexedDB not supported in current environment."),d(et,"Opening database:",t),new We(function(i,o){var a=window.indexedDB.open(t,n);a.onsuccess=function(t){var n=t.target.result;i(new e(n))},a.onblocked=function(){o(new E(_.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(e){var t=e.target.error;"VersionError"===t.name?o(new E(_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(t)},a.onupgradeneeded=function(e){d(et,'Database "'+t+'" requires upgrade from version:',e.oldVersion);var n=e.target.result,i=new rt(a.transaction);r.createOrUpgrade(n,i,e.oldVersion,nn).next(function(){d(et,"Database upgrade to version "+nn+" complete")})}}).toPromise()},e.delete=function(e){return d(et,"Removing database:",e),ot(window.indexedDB.deleteDatabase(e)).toPromise()},e.isAvailable=function(){if("undefined"===typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===Object({NODE_ENV:"production",PUBLIC_URL:"."}).USE_MOCK_PERSISTENCE;var t=u.getUA(),n=e.getIOSVersion(t),r=0<n&&n<10,i=e.getAndroidVersion(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.getStore=function(e,t){return e.store(t)},e.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},e.prototype.runTransaction=function(e,t,n){var r=rt.open(this.db,e,t),i=n(r).catch(function(e){return r.abort(e),We.reject(e)}).toPromise();return i.catch(function(){}),r.completionPromise.then(function(){return i})},e.prototype.close=function(){this.db.close()},e}(),nt=function(){function e(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.shouldStop=!0},e.prototype.skip=function(e){this.nextKey=e},e.prototype.delete=function(){return ot(this.dbCursor.delete())},e}(),rt=function(){function e(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new he,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=st(e.target.error);t.completionDeferred.reject(n)}}return e.open=function(t,n,r){return new e(t.transaction(r,n))},Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),e.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(d(et,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return v(!!t,"Object store not part of transaction: "+e),new it(t)},e}(),it=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(d(et,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(d(et,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ot(n)},e.prototype.add=function(e){return d(et,"ADD",this.store.name,e,e),ot(this.store.add(e))},e.prototype.get=function(e){var t=this;return ot(this.store.get(e)).next(function(n){return void 0===n&&(n=null),d(et,"GET",t.store.name,e,n),n})},e.prototype.delete=function(e){return d(et,"DELETE",this.store.name,e),ot(this.store.delete(e))},e.prototype.count=function(){return d(et,"COUNT",this.store.name),ot(this.store.count())},e.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,function(e,t){r.push(t)}).next(function(){return r})},e.prototype.deleteAll=function(e,t){d(et,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(e,t,n){return n.delete()})},e.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},e.prototype.iterateSerial=function(e){var t=this.cursor({});return new We(function(n,r){t.onerror=function(e){var t=st(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next(function(e){e?r.continue():n()}):n()}})},e.prototype.iterateCursor=function(e,t){var n=[];return new We(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new nt(i),a=t(i.primaryKey,i.value,o);if(a instanceof We){var s=a.catch(function(e){return o.done(),We.reject(e)});n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}}).next(function(){return We.waitFor(n)})},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"===typeof e?n=e:(v(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function ot(e){return new We(function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=st(e.target.error);n(t)}})}var at=!1;function st(e){var t=tt.getIOSVersion(u.getUA());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new E("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return at||(at=!0,setTimeout(function(){throw r},0)),r}}return e}var ut=function(){function e(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=Ze.forQueryCache()}return e.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next(function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next(function(){return n.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next(function(e){return Te.fromTimestamp(new Ee(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(e){return ht(e.simpleDbTransaction)},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)})},e.prototype.addQueryData=function(e,t){var n=this;return this.saveQueryData(e,t).next(function(){return n.retrieveMetadata(e).next(function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(t,r),n.saveMetadata(e,r)})})},e.prototype.updateQueryData=function(e,t){return this.saveQueryData(e,t)},e.prototype.removeQueryData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return ct(e).delete(t.targetId)}).next(function(){return n.retrieveMetadata(e)}).next(function(t){return v(t.targetCount>0,"Removing from an empty query cache"),t.targetCount-=1,n.saveMetadata(e,t)})},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return ct(e).iterate(function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=t&&void 0===n[u.targetId]&&(i++,o.push(r.removeQueryData(e,u)))}).next(function(){return We.waitFor(o)}).next(function(){return i})},e.prototype.forEachTarget=function(e,t){var n=this;return ct(e).iterate(function(e,r){var i=n.serializer.fromDbTarget(r);t(i)})},e.prototype.retrieveMetadata=function(e){return lt(e.simpleDbTransaction)},e.prototype.saveMetadata=function(e,t){return(n=e,Un.getStore(n,yn.store)).put(yn.key,t);var n},e.prototype.saveQueryData=function(e,t){return ct(e).put(this.serializer.toDbTarget(t))},e.prototype.updateMetadataFromQueryData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getQueryCount=function(e){return this.retrieveMetadata(e).next(function(e){return e.targetCount})},e.prototype.getQueryData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ct(e).iterate({range:i,index:dn.queryTargetsIndexName},function(e,r,i){var a=n.serializer.fromDbTarget(r);t.isEqual(a.query)&&(o=a,i.done())}).next(function(){return o})},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=ft(e);return t.forEach(function(t){var a=ve(t.path);i.push(o.put(new mn(n,a))),i.push(r.referenceDelegate.addReference(e,t))}),We.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=ft(e);return We.forEach(t,function(t){var o=ve(t.path);return We.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])})},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=ft(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ft(e),i=Ue();return r.iterate({range:n,keysOnly:!0},function(e,t,n){var r=_e(e[1]),o=new le(r);i=i.add(o)}).next(function(){return i})},e.prototype.containsKey=function(e,t){var n=ve(t.path),r=IDBKeyRange.bound([n],[X(n)],!1,!0),i=0;return ft(e).iterate({index:mn.documentTargetsIndex,keysOnly:!0,range:r},function(e,t,n){var r=e[0];e[1];0!==r&&(i++,n.done())}).next(function(){return i>0})},e.prototype.getQueryDataForTarget=function(e,t){var n=this;return ct(e).get(t).next(function(e){return e?n.serializer.fromDbTarget(e):null})},e}();function ct(e){return Un.getStore(e,dn.store)}function lt(e){return tt.getStore(e,yn.store).get(yn.key).next(function(e){return v(null!==e,"Missing metadata row."),e})}function ht(e){return lt(e).next(function(e){return e.highestListenSequenceNumber})}function ft(e){return Un.getStore(e,mn.store)}var pt,dt=function(){function e(e){this.fields=e}return e.fromSet=function(t){return new e(t)},e.fromArray=function(t){var n=new xe(ce.comparator);return t.forEach(function(e){return n=n.add(e)}),new e(n)},e.prototype.covers=function(e){var t=!1;return this.fields.forEach(function(n){n.isPrefixOf(e)&&(t=!0)}),t},e.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},e}(),mt=function(){function e(e,t){this.field=e,this.transform=t}return e.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},e}(),yt=function(){return function(e,t){this.version=e,this.transformResults=t}}();!function(e){e[e.Set=0]="Set",e[e.Patch=1]="Patch",e[e.Transform=2]="Transform",e[e.Delete=3]="Delete"}(pt||(pt={}));var gt,vt,bt=function(){function e(e,t){this.updateTime=e,this.exists=t,v(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof Vt&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof Vt:(v(this.isNone,"Precondition should be empty"),!0)},e.prototype.isEqual=function(e){return t=this.updateTime,n=e.updateTime,(null!==t&&void 0!==t?!(!n||!t.isEqual(n)):t===n)&&this.exists===e.exists;var t,n},e.NONE=new e,e}(),wt=function(){function e(){}return e.prototype.verifyKeyMatches=function(e){null!=e&&v(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},e.getPostMutationVersion=function(e){return e instanceof Vt?e.version:Te.MIN},e}(),_t=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.value=n,i.precondition=r,i.type=pt.Set,i}return s.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),v(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new Vt(this.key,n,{hasCommittedMutations:!0},this.value)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=wt.getPostMutationVersion(e);return new Vt(this.key,r,{hasLocalMutations:!0},this.value)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},t}(wt),Et=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.key=t,o.data=n,o.fieldMask=r,o.precondition=i,o.type=pt.Patch,o}return s.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),v(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new zt(this.key,t.version);var n=this.patchDocument(e);return new Vt(this.key,t.version,{hasCommittedMutations:!0},n)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=wt.getPostMutationVersion(e),i=this.patchDocument(e);return new Vt(this.key,r,{hasLocalMutations:!0},i)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},t.prototype.patchDocument=function(e){var t;return t=e instanceof Vt?e.data():jt.EMPTY,this.patchObject(t)},t.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e=null!==r?e.set(n,r):e.delete(n)}}),e},t}(wt),Tt=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.fieldTransforms=n,r.type=pt.Transform,r.precondition=bt.exists(!0),r}return s.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),v(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new zt(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data(),r);return new Vt(this.key,i,{hasCommittedMutations:!0},o)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,e,t),o=this.transformObject(r.data(),i);return new Vt(this.key,r.version,{hasLocalMutations:!0},o)},t.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=e instanceof Vt?e.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(t=null==t?jt.EMPTY.set(i.field,a):t.set(i.field,a))}return t},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&Y(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},t.prototype.requireDocument=function(e){v(e instanceof Vt,"Unknown MaybeDocument type "+e);var t=e;return v(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},t.prototype.serverTransformResults=function(e,t){var n=[];v(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;e instanceof Vt&&(a=e.field(i.field)),n.push(o.applyToRemoteDocument(a,t[r]))}return n},t.prototype.localTransformResults=function(e,t,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;t instanceof Vt&&(u=t.field(a.field)),null===u&&n instanceof Vt&&(u=n.field(a.field)),r.push(s.applyToLocalView(u,e))}return r},t.prototype.transformObject=function(e,t){v(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;e=e.set(r,t[n])}return e},t}(wt),St=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.precondition=n,r.type=pt.Delete,r}return s.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),v(null==t.transformResults,"Transform results received by DeleteMutation."),new Wt(this.key,t.version,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&v(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Wt(this.key,Te.forDeletedDoc())):e},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},t}(wt);!function(e){e[e.NullValue=0]="NullValue",e[e.BooleanValue=1]="BooleanValue",e[e.NumberValue=2]="NumberValue",e[e.TimestampValue=3]="TimestampValue",e[e.StringValue=4]="StringValue",e[e.BlobValue=5]="BlobValue",e[e.RefValue=6]="RefValue",e[e.GeoPointValue=7]="GeoPointValue",e[e.ArrayValue=8]="ArrayValue",e[e.ObjectValue=9]="ObjectValue"}(gt||(gt={})),function(e){e[e.Default=0]="Default",e[e.Estimate=1]="Estimate",e[e.Previous=2]="Previous"}(vt||(vt={}));var Ct=function(){function e(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}return e.fromSnapshotOptions=function(t,n){switch(t.serverTimestamps){case"estimate":return new e(vt.Estimate,n);case"previous":return new e(vt.Previous,n);case"none":case void 0:return new e(vt.Default,n);default:return g("fromSnapshotOptions() called with invalid options.")}},e}(),kt=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},e.prototype.defaultCompareTo=function(e){return v(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),G(this.typeOrder,e.typeOrder)},e}(),It=function(e){function t(){var t=e.call(this)||this;return t.typeOrder=gt.NullValue,t.internalValue=null,t}return s.__extends(t,e),t.prototype.value=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t},t.prototype.compareTo=function(e){return e instanceof t?0:this.defaultCompareTo(e)},t.INSTANCE=new t,t}(kt),xt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=gt.BooleanValue,n}return s.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?G(this,e):this.defaultCompareTo(e)},t.of=function(e){return e?t.TRUE:t.FALSE},t.TRUE=new t(!0),t.FALSE=new t(!1),t}(kt),Nt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=gt.NumberValue,n}return s.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.compareTo=function(e){return e instanceof t?(n=this.internalValue,r=e.internalValue,n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1):this.defaultCompareTo(e);var n,r},t}(kt);function At(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}var Ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&At(this.internalValue,e.internalValue)},t}(Nt),Dt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&At(this.internalValue,e.internalValue)},t.NAN=new t(NaN),t.POSITIVE_INFINITY=new t(1/0),t.NEGATIVE_INFINITY=new t(-1/0),t}(Nt),Rt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=gt.StringValue,n}return s.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?G(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(kt),Pt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=gt.TimestampValue,n}return s.__extends(t,e),t.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):e instanceof Mt?-1:this.defaultCompareTo(e)},t}(kt),Mt=function(e){function t(t,n){var r=e.call(this)||this;return r.localWriteTime=t,r.previousValue=n,r.typeOrder=gt.TimestampValue,r}return s.__extends(t,e),t.prototype.value=function(e){return e&&e.serverTimestampBehavior===vt.Estimate?new Pt(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===vt.Previous&&this.previousValue?this.previousValue.value(e):null},t.prototype.isEqual=function(e){return e instanceof t&&this.localWriteTime.isEqual(e.localWriteTime)},t.prototype.compareTo=function(e){return e instanceof t?this.localWriteTime._compareTo(e.localWriteTime):e instanceof Pt?1:this.defaultCompareTo(e)},t.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},t}(kt),Lt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=gt.BlobValue,n}return s.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(kt),Ft=function(e){function t(t,n){var r=e.call(this)||this;return r.databaseId=t,r.key=n,r.typeOrder=gt.RefValue,r}return s.__extends(t,e),t.prototype.value=function(e){return this.key},t.prototype.isEqual=function(e){return e instanceof t&&(this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId))},t.prototype.compareTo=function(e){if(e instanceof t){var n=this.databaseId.compareTo(e.databaseId);return 0!==n?n:le.comparator(this.key,e.key)}return this.defaultCompareTo(e)},t}(kt),Ut=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=gt.GeoPointValue,n}return s.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(kt),jt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=gt.ObjectValue,n}return s.__extends(t,e),t.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal(function(n,r){t[n]=r.value(e)}),t},t.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},t.prototype.isEqual=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=G(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return G(n.hasNext(),r.hasNext())}return this.defaultCompareTo(e)},t.prototype.set=function(e,n){if(v(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),n);var r=this.child(e.firstSegment());r instanceof t||(r=t.EMPTY);var i=r.set(e.popFirst(),n);return this.setChild(e.firstSegment(),i)},t.prototype.delete=function(e){if(v(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new t(this.internalValue.remove(e.firstSegment()));var n=this.child(e.firstSegment());if(n instanceof t){var r=n.delete(e.popFirst());return new t(this.internalValue.insert(e.firstSegment(),r))}return this},t.prototype.contains=function(e){return null!==this.field(e)},t.prototype.field=function(e){v(!e.isEmpty(),"Can't get field of empty path");var n=this;return e.forEach(function(e){n=n instanceof t?n.internalValue.get(e):null}),n},t.prototype.fieldMask=function(){var e=new xe(ce.comparator);return this.internalValue.forEach(function(n,r){var i=new ce([n]);if(r instanceof t){var o=r.fieldMask().fields;o.isEmpty()?e=e.add(i):o.forEach(function(t){e=e.add(i.child(t))})}else e=e.add(i)}),dt.fromSet(e)},t.prototype.toString=function(){return this.internalValue.toString()},t.prototype.child=function(e){return this.internalValue.get(e)||void 0},t.prototype.setChild=function(e,n){return new t(this.internalValue.insert(e,n))},t.EMPTY=new t(new Se(G)),t}(kt),qt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=gt.ArrayValue,n}return s.__extends(t,e),t.prototype.value=function(e){return this.internalValue.map(function(t){return t.value(e)})},t.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++){if(n[t].isEqual(e))return!0}return!1},t.prototype.forEach=function(e){this.internalValue.forEach(e)},t.prototype.isEqual=function(e){if(e instanceof t){if(this.internalValue.length!==e.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(e.internalValue[n]))return!1;return!0}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=Math.min(this.internalValue.length,e.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(e.internalValue[r]);if(i)return i}return G(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},t.prototype.toString=function(){return"["+this.internalValue.map(function(e){return e.toString()}).join(",")+"]"},t}(kt),Bt=function(){function e(e,t){this.key=e,this.version=t}return e.compareByKey=function(e,t){return le.comparator(e.key,t.key)},e}(),Vt=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,n)||this;return s.objectValue=i,s.proto=o,s.converter=a,v(void 0!==s.objectValue||void 0!==s.proto&&void 0!==s.converter,"If objectValue is not defined, proto and converter need to be set."),s.hasLocalMutations=!!r.hasLocalMutations,s.hasCommittedMutations=!!r.hasCommittedMutations,s}return s.__extends(t,e),t.prototype.field=function(e){if(this.objectValue)return this.objectValue.field(e);this.fieldValueCache||(this.fieldValueCache=new Map);var t=e.canonicalString(),n=this.fieldValueCache.get(t);if(void 0===n){var r=this.getProtoField(e);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(t,n)}return n},t.prototype.data=function(){var e=this;if(!this.objectValue){var t=jt.EMPTY;I(this.proto.fields,function(n,r){t=t.set(new ce([n]),e.converter(r))}),this.objectValue=t,this.fieldValueCache=void 0}return this.objectValue},t.prototype.value=function(){return this.data().value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations&&this.data().isEqual(e.data())},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.getProtoField=function(e){v(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var t=this.proto.fields[e.firstSegment()],n=1;n<e.length;++n){if(!t||!t.mapValue)return;t=t.mapValue.fields[e.get(n)]}return t},t.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?r.compareTo(i):g("Trying to compare documents on fields that don't exist")},t}(Bt),Wt=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return s.__extends(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(Bt),zt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(Bt),Ht=function(){function e(e){this.mapKeyFn=e,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){I(this.inner,function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}})},e.prototype.isEmpty=function(){return x(this.inner)},e}(),Kt=function(){function e(){this.changes=new Ht(function(e){return e.toString()}),this.changesApplied=!1}return e.prototype.addEntry=function(e){this.assertNotApplied(),this.changes.set(e.key,e)},e.prototype.removeEntry=function(e){this.assertNotApplied(),this.changes.set(e,null)},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?We.resolve(n):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){v(!this.changesApplied,"Changes have already been applied.")},e}(),Qt="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",Gt=function(){function e(e,t,n){this.serializer=e,this.indexManager=t,this.keepDocumentChangeLog=n,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(e.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),e.prototype.start=function(e){var t=tt.getStore(e,bn.store);return this.synchronizeLastDocumentChangeId(t)},e.prototype.addEntry=function(e,t,n){var r=this;return Xt(e).put(Jt(t),n).next(function(){r.indexManager.addToCollectionParentIndex(e,t.path.popLast())})},e.prototype.removeEntry=function(e,t){var n=Xt(e),r=Jt(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t,n){var r=this;return this.getMetadata(e).next(function(i){return i.byteSize+=n,r.setMetadata(e,i).next(function(){if(r.keepDocumentChangeLog)return $t(e).put({changes:r.serializer.toDbResourcePaths(t)})})})},e.prototype.getEntry=function(e,t){var n=this;return Xt(e).get(Jt(t)).next(function(e){return e?n.serializer.fromDbRemoteDocument(e):null})},e.prototype.getSizedEntry=function(e,t){var n=this;return Xt(e).get(Jt(t)).next(function(e){return e?{maybeDocument:n.serializer.fromDbRemoteDocument(e),size:Zt(e)}:null})},e.prototype.getEntries=function(e,t){var n=this,r=De();return this.forEachDbEntry(e,t,function(e,t){r=t?r.insert(e,n.serializer.fromDbRemoteDocument(t)):r.insert(e,null)}).next(function(){return r})},e.prototype.getSizedEntries=function(e,t){var n=this,r=De(),i=new Se(le.comparator);return this.forEachDbEntry(e,t,function(e,t){t?(r=r.insert(e,n.serializer.fromDbRemoteDocument(t)),i=i.insert(e,Zt(t))):(r=r.insert(e,null),i=i.insert(e,0))}).next(function(){return{maybeDocuments:r,sizeMap:i}})},e.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return We.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return Xt(e).iterate({range:r},function(e,t,r){for(var a=le.fromSegments(e);o&&le.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(e,t){var n=this;v(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=Pe(),i=t.path.length+1,o=t.path.toArray(),a=IDBKeyRange.lowerBound(o);return Xt(e).iterate({range:a},function(e,o,a){if(e.length===i){var s=n.serializer.fromDbRemoteDocument(o);t.path.isPrefixOf(s.key.path)?s instanceof Vt&&t.matches(s)&&(r=r.insert(s.key,s)):a.done()}}).next(function(){return r})},e.prototype.getNewDocumentChanges=function(e){var t=this;v(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=Ue(),r=Oe(),i=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,a=$t(e);return a.iterate({range:i},function(e,r){if(o&&(o=!1,t._lastProcessedDocumentChangeId+1!==r.id))return t.synchronizeLastDocumentChangeId(a).next(function(){return We.reject(new E(_.DATA_LOSS,Qt))});n=n.unionWith(t.serializer.fromDbResourcePaths(r.changes)),t._lastProcessedDocumentChangeId=r.id}).next(function(){var i=[];return n.forEach(function(n){i.push(t.getEntry(e,n).next(function(e){var t=e||new Wt(n,Te.forDeletedDoc());r=r.insert(n,t)}))}),We.waitFor(i)}).next(function(){return r})},e.prototype.removeDocumentChangesThroughChangeId=function(e,t){var n=IDBKeyRange.upperBound(t);return $t(e).delete(n)},e.prototype.synchronizeLastDocumentChangeId=function(e){var t=this;return this._lastProcessedDocumentChangeId=0,e.iterate({keysOnly:!0,reverse:!0},function(e,n,r){t._lastProcessedDocumentChangeId=e,r.done()})},e.prototype.newChangeBuffer=function(){return new e.RemoteDocumentChangeBuffer(this)},e.prototype.getSize=function(e){return this.getMetadata(e).next(function(e){return e.byteSize})},e.prototype.getMetadata=function(e){return Yt(e).get(pn.key).next(function(e){return v(!!e,"Missing document cache metadata"),e})},e.prototype.setMetadata=function(e,t){return Yt(e).put(pn.key,t)},e.RemoteDocumentChangeBuffer=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n.documentSizes=new Ht(function(e){return e.toString()}),n}return s.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=Ue();return this.changes.forEach(function(o,a){var s=t.documentSizes.get(o);if(v(void 0!==s,"Cannot modify a document that wasn't read (for "+o+")"),a){var u=t.documentCache.serializer.toDbRemoteDocument(a),c=Zt(u);r+=c-s,n.push(t.documentCache.addEntry(e,o,u))}else r-=s,n.push(t.documentCache.removeEntry(e,o));i=i.add(o)}),n.push(this.documentCache.updateMetadata(e,i,r)),We.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntry(e,t).next(function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)})},t.prototype.getAllFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntries(e,t).next(function(e){var t=e.maybeDocuments;return e.sizeMap.forEach(function(e,t){n.documentSizes.set(e,t)}),t})},t}(Kt),e}();function Yt(e){return Un.getStore(e,pn.store)}function Xt(e){return Un.getStore(e,fn.store)}function $t(e){return Un.getStore(e,bn.store)}function Jt(e){return e.path.toArray()}function Zt(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw g("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}var en=function(){function e(){this.collectionParentIndex=new tn}return e.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),We.resolve()},e.prototype.getCollectionParents=function(e,t){return We.resolve(this.collectionParentIndex.getEntries(t))},e}(),tn=function(){function e(){this.index={}}return e.prototype.add=function(e){v(e.length%2===1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new xe(se.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.getEntries=function(e){return(this.index[e]||new xe(se.comparator)).toArray()},e}(),nn=8,rn=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,r){var i=this;v(n<r&&n>=0&&r<=nn,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&r>=1&&(function(e){e.createObjectStore(an.store)}(e),function(e){e.createObjectStore(sn.store,{keyPath:sn.keyPath}),e.createObjectStore(un.store,{keyPath:un.keyPath,autoIncrement:!0}).createIndex(un.userMutationsIndex,un.userMutationsKeyPath,{unique:!0}),e.createObjectStore(cn.store)}(e),vn(e),function(e){e.createObjectStore(fn.store)}(e));var o=We.resolve();return n<3&&r>=3&&(0!==n&&(!function(e){e.deleteObjectStore(mn.store),e.deleteObjectStore(dn.store),e.deleteObjectStore(yn.store)}(e),vn(e)),o=o.next(function(){return function(e){var t=e.store(yn.store),n=new yn(0,0,Te.MIN.toTimestamp(),0);return t.put(yn.key,n)}(t)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(e,t){return t.store(un.store).loadAll().next(function(n){e.deleteObjectStore(un.store);var r=e.createObjectStore(un.store,{keyPath:un.keyPath,autoIncrement:!0});r.createIndex(un.userMutationsIndex,un.userMutationsKeyPath,{unique:!0});var i=t.store(un.store),o=n.map(function(e){return i.put(e)});return We.waitFor(o)})}(e,t)})),o=o.next(function(){!function(e){e.createObjectStore(wn.store,{keyPath:wn.keyPath})}(e),function(e){e.createObjectStore(bn.store,{keyPath:"id",autoIncrement:!0})}(e)})),n<5&&r>=5&&(o=o.next(function(){return i.removeAcknowledgedMutations(t)})),n<6&&r>=6&&(o=o.next(function(){return function(e){e.createObjectStore(pn.store)}(e),i.addDocumentGlobal(t)})),n<7&&r>=7&&(o=o.next(function(){return i.ensureSequenceNumbers(t)})),n<8&&r>=8&&(o=o.next(function(){return i.createCollectionParentIndex(e,t)})),o},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store(fn.store).iterate(function(e,n){t+=Zt(n)}).next(function(){var n=new pn(t);return e.store(pn.store).put(pn.key,n)})},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(sn.store),r=e.store(un.store);return n.loadAll().next(function(n){return We.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(un.userMutationsIndex,i).next(function(r){return We.forEach(r,function(r){v(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return Ke(e,n.userId,i).next(function(){})})})})})},e.prototype.ensureSequenceNumbers=function(e){var t=e.store(mn.store),n=e.store(fn.store);return ht(e).next(function(e){var r=[];return n.iterate(function(n,i){var o=new se(n),a=function(e){return[0,ve(e)]}(o);r.push(t.get(a).next(function(n){return n?We.resolve():function(n){return t.put(new mn(0,ve(n),e))}(o)}))}).next(function(){return We.waitFor(r)})})},e.prototype.createCollectionParentIndex=function(e,t){e.createObjectStore(gn.store,{keyPath:gn.keyPath});var n=t.store(gn.store),r=new tn,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:ve(i)})}};return t.store(fn.store).iterate({keysOnly:!0},function(e,t){var n=new se(e);return i(n.popLast())}).next(function(){return t.store(cn.store).iterate({keysOnly:!0},function(e,t){e[0];var n=e[1],r=(e[2],_e(n));return i(r.popLast())})})},e}();var on=function(){return function(e,t){this.seconds=e,this.nanoseconds=t}}(),an=function(){function e(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}return e.store="owner",e.key="owner",e}();var sn=function(){function e(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}return e.store="mutationQueues",e.keyPath="userId",e}(),un=function(){function e(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return e.store="mutations",e.keyPath="batchId",e.userMutationsIndex="userMutationsIndex",e.userMutationsKeyPath=["userId","batchId"],e}();var cn=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,ve(t)]},e.key=function(e,t,n){return[e,ve(t),n]},e.store="documentMutations",e.PLACEHOLDER=new e,e}();var ln=function(){return function(e,t){this.path=e,this.readTime=t}}(),hn=function(){return function(e,t){this.path=e,this.version=t}}(),fn=function(){function e(e,t,n,r){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r}return e.store="remoteDocuments",e}(),pn=function(){function e(e){this.byteSize=e}return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e}();var dn=function(){function e(e,t,n,r,i,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return e.store="targets",e.keyPath="targetId",e.queryTargetsIndexName="queryTargetsIndex",e.queryTargetsKeyPath=["canonicalId","targetId"],e}(),mn=function(){function e(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n,v(0===e===(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return e.store="targetDocuments",e.keyPath=["targetId","path"],e.documentTargetsIndex="documentTargetsIndex",e.documentTargetsKeyPath=["path","targetId"],e}(),yn=function(){function e(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return e.key="targetGlobalKey",e.store="targetGlobal",e}(),gn=function(){function e(e,t){this.collectionId=e,this.parent=t}return e.store="collectionParents",e.keyPath=["collectionId","parent"],e}();function vn(e){e.createObjectStore(mn.store,{keyPath:mn.keyPath}).createIndex(mn.documentTargetsIndex,mn.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(dn.store,{keyPath:dn.keyPath}).createIndex(dn.queryTargetsIndexName,dn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(yn.store)}var bn=function(){function e(e){this.changes=e}return e.store="remoteDocumentChanges",e.keyPath="id",e}();var wn=function(){function e(e,t,n,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}return e.store="clientMetadata",e.keyPath="clientId",e}();var _n,En=[sn.store,un.store,cn.store,fn.store,dn.store,an.store,yn.store,mn.store].concat([wn.store,bn.store]).concat([pn.store]).concat([gn.store]),Tn=function(){function e(){this.collectionParentsCache=new tn}return e.prototype.addToCollectionParentIndex=function(e,t){if(v(t.length%2===1,"Expected a collection path."),this.collectionParentsCache.add(t)){v(t.length>=1,"Invalid collection path.");var n=t.lastSegment(),r=t.popLast();return Sn(e).put({collectionId:n,parent:ve(r)})}return We.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[X(t),""],!1,!0);return Sn(e).loadAll(r).next(function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(_e(o.parent))}return n})},e}();function Sn(e){return Un.getStore(e,gn.store)}!function(e){e[e.Listen=0]="Listen",e[e.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",e[e.LimboResolution=2]="LimboResolution"}(_n||(_n={}));var Cn=function(){function e(e,t,n,r,i,o){void 0===i&&(i=Te.MIN),void 0===o&&(o=w()),this.query=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}return e.prototype.withSequenceNumber=function(t){return new e(this.query,this.targetId,this.purpose,t,this.snapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.query,this.targetId,this.purpose,this.sequenceNumber,n,t)},e.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.resumeToken===e.resumeToken&&this.query.isEqual(e.query)},e}(),kn=function(){function e(e){this.remoteSerializer=e}return e.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=le.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new Wt(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){t=le.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version);return new zt(t,n)}return g("Unexpected DbRemoteDocument")},e.prototype.toDbRemoteDocument=function(e){if(e instanceof Vt){var t=e.proto?e.proto:this.remoteSerializer.toDocument(e),n=e.hasCommittedMutations;return new fn(null,null,t,n)}if(e instanceof Wt){var r=e.key.path.toArray(),i=this.toDbTimestamp(e.version);n=e.hasCommittedMutations;return new fn(null,new ln(r,i),null,n)}if(e instanceof zt){r=e.key.path.toArray(),i=this.toDbTimestamp(e.version);return new fn(new hn(r,i),null,null,!0)}return g("Unexpected MaybeDocumment")},e.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new on(t.seconds,t.nanoseconds)},e.prototype.fromDbTimestamp=function(e){var t=new Ee(e.seconds,e.nanoseconds);return Te.fromTimestamp(t)},e.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map(function(e){return n.remoteSerializer.toMutation(e)}),i=t.mutations.map(function(e){return n.remoteSerializer.toMutation(e)});return new un(e,t.batchId,t.localWriteTime.toMillis(),r,i)},e.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map(function(e){return t.remoteSerializer.fromMutation(e)}),r=e.mutations.map(function(e){return t.remoteSerializer.fromMutation(e)}),i=Ee.fromMillis(e.localWriteTimeMs);return new Be(e.batchId,i,n,r)},e.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach(function(e){t.push(ve(e.path))}),t},e.prototype.fromDbResourcePaths=function(e){for(var t=Ue(),n=0,r=e;n<r.length;n++){var i=r[n];t=t.add(new le(_e(i)))}return t},e.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime);return t=void 0!==e.query.documents?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new Cn(t,e.targetId,_n.Listen,e.lastListenSequenceNumber,n,e.resumeToken)},e.prototype.toDbTarget=function(e){v(_n.Listen===e.purpose,"Only queries with purpose "+_n.Listen+" may be stored, got "+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion);return t=e.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.query):this.remoteSerializer.toQueryTarget(e.query),e.resumeToken instanceof Uint8Array?(v("YES"===Object({NODE_ENV:"production",PUBLIC_URL:"."}).USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),n=e.resumeToken.toString()):n=e.resumeToken,new dn(e.targetId,e.query.canonicalId(),r,n,e.sequenceNumber,t)},e}();function In(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=G(n,i);return 0===a?G(r,o):a}var xn=function(){function e(e){this.maxElements=e,this.buffer=new xe(In),this.previousIndex=0}return e.prototype.nextIndex=function(){return++this.previousIndex},e.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();In(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),e}(),Nn={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},An=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e.COLLECTION_DISABLED=-1,e.MINIMUM_CACHE_SIZE_BYTES=1048576,e.DEFAULT_CACHE_SIZE_BYTES=41943040,e.DEFAULT_COLLECTION_PERCENTILE=10,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,e.DEFAULT=new e(e.DEFAULT_CACHE_SIZE_BYTES,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),e.DISABLED=new e(e.COLLECTION_DISABLED,0,0),e}(),On=function(){function e(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}return e.prototype.start=function(){v(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==An.COLLECTION_DISABLED&&this.scheduleGC()},e.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),e.prototype.scheduleGC=function(){var e=this;v(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;d("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(Z.LruGarbageCollection,t,function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then(function(){return e.scheduleGC()}).catch(jn)})},e}(),Dn=function(){function e(e,t){this.delegate=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next(function(e){return Math.floor(t/100*e)})},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return We.resolve(oe.INVALID);var r=new xn(t);return this.delegate.forEachTarget(e,function(e){return r.addElement(e.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,function(e){return r.addElement(e)})}).next(function(){return r.maxValue})},e.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===An.COLLECTION_DISABLED?(d("LruGarbageCollector","Garbage collection skipped; disabled"),We.resolve(Nn)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(d("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Nn):n.runGarbageCollection(e,t)})},e.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},e.prototype.runGarbageCollection=function(e,t){var n,r,o,a,s,u,c,l=this,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return t>l.params.maximumSequenceNumbersToCollect?(d("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+t),r=l.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),l.nthSequenceNumber(e,r)}).next(function(r){return n=r,s=Date.now(),l.removeTargets(e,n,t)}).next(function(t){return o=t,u=Date.now(),l.removeOrphanedDocuments(e,n)}).next(function(e){(c=Date.now(),f()<=i.DEBUG)&&d("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+o+" targets in "+(u-s)+"ms\n\tRemoved "+e+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-h)+"ms");return We.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:e})})},e}(),Rn=function(){return function(){}}(),Pn="IndexedDbPersistence",Mn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ln="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Fn=function(e){function t(t,n){var r=e.call(this)||this;return r.simpleDbTransaction=t,r.currentSequenceNumber=n,r}return s.__extends(t,e),t}(Rn),Un=function(){function e(t,n,r,i,o,a,s,u){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.queue=a,this.sequenceNumberSyncer=u,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},this.referenceDelegate=new Vn(this,o),this.dbName=n+e.MAIN_DATABASE,this.serializer=new kn(s),this.document=i.document,this.queryCache=new ut(this.referenceDelegate,this.serializer),this.indexManager=new Tn,this.remoteDocumentCache=new Gt(this.serializer,this.indexManager,this.allowTabSynchronization),!i.window||!i.window.localStorage)throw new E(_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.webStorage=this.window.localStorage}return e.getStore=function(e,t){if(e instanceof Fn)return tt.getStore(e.simpleDbTransaction,t);throw g("IndexedDbPersistence must use instances of IndexedDbTransaction")},e.createIndexedDbPersistence=function(t){return s.__awaiter(this,void 0,void 0,function(){var n;return s.__generator(this,function(r){switch(r.label){case 0:if(!e.isAvailable())throw new E(_.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new e(t.allowTabSynchronization,t.persistenceKey,t.clientId,t.platform,t.lruParams,t.queue,t.serializer,t.sequenceNumberSyncer)).start()];case 1:return r.sent(),[2,n]}})})},e.prototype.start=function(){var e=this;return v(!this.started,"IndexedDbPersistence double-started!"),v(null!==this.window,"Expected 'window' to be defined"),tt.openOrCreate(this.dbName,nn,new rn(this.serializer)).then(function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()}).then(function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.startRemoteDocumentCache()}).then(function(){return e.simpleDb.runTransaction("readonly",[yn.store],function(t){return ht(t).next(function(t){e.listenSequence=new oe(t,e.sequenceNumberSyncer)})})}).then(function(){e._started=!0}).catch(function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)})},e.prototype.startRemoteDocumentCache=function(){var e=this;return this.simpleDb.runTransaction("readonly",En,function(t){return e.remoteDocumentCache.start(t)})},e.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return s.__awaiter(t,void 0,void 0,function(){return s.__generator(this,function(t){return this.started?[2,e(n)]:[2]})})},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener(function(n){return s.__awaiter(t,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget(function(){return s.__awaiter(t,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}))},e.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite",En,function(t){return Bn(t).put(new wn(e.clientId,Date.now(),e.networkEnabled,e.inForeground,e.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next(function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget(function(){return e.primaryStateListener(!1)}))})}).next(function(){return e.canActAsPrimary(t)}).next(function(n){var r=e.isPrimary;return e.isPrimary=n,r!==e.isPrimary&&e.queue.enqueueAndForget(function(){return e.primaryStateListener(e.isPrimary)}),r&&!e.isPrimary?e.releasePrimaryLeaseIfHeld(t):e.isPrimary?e.acquireOrExtendPrimaryLease(t):void 0})})},e.prototype.verifyPrimaryLease=function(e){var t=this;return qn(e).get(an.key).next(function(e){return We.resolve(t.isLocalClient(e))})},e.prototype.removeClientMetadata=function(e){return Bn(e).delete(this.clientId)},e.prototype.maybeGarbageCollectMultiClientState=function(){return s.__awaiter(this,void 0,void 0,function(){var t,n,r=this;return s.__generator(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(i){var o=e.getStore(i,wn.store);return o.loadAll().next(function(e){t=r.filterActiveClients(e,18e5),n=e.filter(function(e){return-1===t.indexOf(e)})}).next(function(){return We.forEach(n,function(e){return o.delete(e.clientId)})}).next(function(){if((t=t.filter(function(e){return e.clientId!==r.clientId})).length>0){var e=t.map(function(e){return e.lastProcessedDocumentChangeId||0}),n=Math.min.apply(Math,e);return r.remoteDocumentCache.removeDocumentChangesThroughChangeId(i,n)}})})]);case 1:i.sent(),n.forEach(function(e){r.window.localStorage.removeItem(r.zombiedClientLocalStorageKey(e.clientId))}),i.label=2;case 2:return[2]}})})},e.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(Z.ClientMetadataRefresh,4e3,function(){return e.updateClientMetadataAndTryBecomePrimary().then(function(){return e.maybeGarbageCollectMultiClientState()}).then(function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},e.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.canActAsPrimary=function(e){var t=this;return qn(e).get(an.key).next(function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new E(_.FAILED_PRECONDITION,Ln);return!1}}return!(!t.networkEnabled||!t.inForeground)||Bn(e).loadAll().next(function(e){return void 0===t.filterActiveClients(e,5e3).find(function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1})})}).next(function(e){return t.isPrimary!==e&&d(Pn,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e})},e.prototype.shutdown=function(){return s.__awaiter(this,void 0,void 0,function(){var e=this;return s.__generator(this,function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[an.store,wn.store],function(t){return e.releasePrimaryLeaseIfHeld(t).next(function(){return e.removeClientMetadata(t)})})];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}})})},e.prototype.filterActiveClients=function(e,t){var n=this;return e.filter(function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)})},e.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly",[wn.store],function(t){return Bn(t).loadAll().next(function(t){return e.filterActiveClients(t,18e5).map(function(e){return e.clientId})})})},e.clearPersistence=function(t){return s.__awaiter(this,void 0,void 0,function(){var n;return s.__generator(this,function(r){switch(r.label){case 0:return e.isAvailable()?(n=t+e.MAIN_DATABASE,[4,tt.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}})})},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getMutationQueue=function(e){return v(this.started,"Cannot initialize MutationQueue before persistence is started."),ze.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},e.prototype.getQueryCache=function(){return v(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},e.prototype.getRemoteDocumentCache=function(){return v(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},e.prototype.getIndexManager=function(){return v(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},e.prototype.runTransaction=function(e,t,n){var r=this;return d(Pn,"Starting transaction:",e),this.simpleDb.runTransaction("readonly"===t?"readonly":"readwrite",En,function(i){return"readwrite-primary"===t?r.verifyPrimaryLease(i).next(function(t){if(!t)throw m("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new E(_.FAILED_PRECONDITION,Mn);return n(new Fn(i,r.listenSequence.next()))}).next(function(e){return r.acquireOrExtendPrimaryLease(i).next(function(){return e})}):r.verifyAllowTabSynchronization(i).next(function(){return n(new Fn(i,r.listenSequence.next()))})})},e.prototype.verifyAllowTabSynchronization=function(e){var t=this;return qn(e).get(an.key).next(function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new E(_.FAILED_PRECONDITION,Ln)})},e.prototype.acquireOrExtendPrimaryLease=function(e){var t=new an(this.clientId,this.allowTabSynchronization,Date.now());return qn(e).put(an.key,t)},e.isAvailable=function(){return tt.isAvailable()},e.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},e.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=qn(e);return n.get(an.key).next(function(e){return t.isLocalClient(e)?(d(Pn,"Releasing primary lease."),n.delete(an.key)):We.resolve()})},e.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(m("Detected an update time that is in the future: "+e+" > "+n),!1))},e.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"===typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},e.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(v(null!==this.document&&"function"===typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},e.prototype.attachWindowUnloadHook=function(){var e=this;"function"===typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},e.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(v("function"===typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},e.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return d(Pn,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(n){return m(Pn,"Failed to get zombied client id.",n),!1}},e.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){m("Failed to set zombie client id.",e)}},e.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},e.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e.MAIN_DATABASE="main",e}();function jn(e){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){if(!function(e){return e.code===_.FAILED_PRECONDITION&&e.message===Mn}(e))throw e;return d(Pn,"Unexpectedly lost primary lease"),[2]})})}function qn(e){return e.store(an.store)}function Bn(e){return e.store(wn.store)}var Vn=function(){function e(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new Dn(this,t)}return e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getQueryCache().getQueryCount(e).next(function(e){return t.next(function(t){return e+t})})},e.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},e.prototype.forEachTarget=function(e,t){return this.db.getQueryCache().forEachTarget(e,t)},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,function(e,n){return t(n)})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return Wn(e,t)},e.prototype.removeReference=function(e,t){return Wn(e,t)},e.prototype.removeTargets=function(e,t,n){return this.db.getQueryCache().removeTargets(e,t,n)},e.prototype.removeMutationReference=function(e,t){return Wn(e,t)},e.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?We.resolve(!0):function(e,t){var n=!1;return Xe(e).iterateSerial(function(r){return He(e,r,t).next(function(e){return e&&(n=!0),We.resolve(!e)})}).next(function(){return n})}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(e,function(a,s){if(s<=t){var u=n.isPinned(e,a).next(function(t){if(!t)return o++,r.getEntry(e,a).next(function(){return r.removeEntry(a),ft(e).delete([0,ve(a.path)])})});i.push(u)}}).next(function(){return We.waitFor(i)}).next(function(){return r.apply(e)}).next(function(){return o})},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getQueryCache().updateQueryData(e,n)},e.prototype.updateLimboDocument=function(e,t){return Wn(e,t)},e.prototype.forEachOrphanedDocument=function(e,t){var n,r=ft(e),i=oe.INVALID;return r.iterate({index:mn.documentTargetsIndex},function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==oe.INVALID&&t(new le(_e(n)),i),i=s,n=a):i=oe.INVALID}).next(function(){i!==oe.INVALID&&t(new le(_e(n)),i)})},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function Wn(e,t){return ft(e).put(function(e,t){return new mn(0,ve(e.path),t)}(t,e.currentSequenceNumber))}var zn=function(){function e(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}return e.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.getDocumentInternal(e,t,r)})},e.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next(function(e){for(var r=0,i=n;r<i.length;r++){e=i[r].applyToLocalView(t,e)}return e})},e.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=De();return t.forEach(function(e,t){for(var i=0,o=n;i<o.length;i++){t=o[i].applyToLocalView(e,t)}r=r.insert(e,t)}),r},e.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next(function(t){return n.getLocalViewOfDocuments(e,t)})},e.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=Oe();return i.forEach(function(e,t){t||(t=new Wt(e,Te.forDeletedDoc())),o=o.insert(e,t)}),o})},e.prototype.getDocumentsMatchingQuery=function(e,t){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t):this.getDocumentsMatchingCollectionQuery(e,t)},e.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new le(t)).next(function(e){var t=Pe();return e instanceof Vt&&(t=t.insert(e.key,e)),t})},e.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t){var n=this;v(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var r=t.collectionGroup,i=Pe();return this.indexManager.getCollectionParents(e,r).next(function(o){return We.forEach(o,function(o){var a=t.asCollectionQueryAtPath(o.child(r));return n.getDocumentsMatchingCollectionQuery(e,a).next(function(e){e.forEach(function(e,t){i=i.insert(e,t)})})}).next(function(){return i})})},e.prototype.getDocumentsMatchingCollectionQuery=function(e,t){var n,r,i=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t).next(function(r){return n=r,i.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)}).next(function(t){return r=t,i.addMissingBaseDocuments(e,r,n).next(function(e){n=e;for(var t=0,i=r;t<i.length;t++)for(var o=i[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=n.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);n=h instanceof Vt?n.insert(c,h):n.remove(c)}})}).next(function(){return n.forEach(function(e,r){t.matches(r)||(n=n.remove(e))}),n})},e.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=Ue(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Et&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.remoteDocumentCache.getEntries(e,r).next(function(e){return e.forEach(function(e,t){null!==t&&t instanceof Vt&&(c=c.insert(e,t))}),c})},e}(),Hn=function(){function e(){this.refsByKey=new xe(Kn.compareByKey),this.refsByTarget=new xe(Kn.compareByTargetId)}return e.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},e.prototype.addReference=function(e,t){var n=new Kn(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},e.prototype.addReferences=function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})},e.prototype.removeReference=function(e,t){this.removeRef(new Kn(e,t))},e.prototype.removeReferences=function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})},e.prototype.removeReferencesForId=function(e){var t=this,n=le.EMPTY,r=new Kn(n,e),i=new Kn(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(e){t.removeRef(e),o.push(e.key)}),o},e.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach(function(t){return e.removeRef(t)})},e.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},e.prototype.referencesForId=function(e){var t=le.EMPTY,n=new Kn(t,e),r=new Kn(t,e+1),i=Ue();return this.refsByTarget.forEachInRange([n,r],function(e){i=i.add(e.key)}),i},e.prototype.containsKey=function(e){var t=new Kn(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),Kn=function(){function e(e,t){this.key=e,this.targetOrBatchId=t}return e.compareByKey=function(e,t){return le.comparator(e.key,t.key)||G(e.targetOrBatchId,t.targetOrBatchId)},e.compareByTargetId=function(e,t){return G(e.targetOrBatchId,t.targetOrBatchId)||le.comparator(e.key,t.key)},e}(),Qn=function(){function e(e,t){this.persistence=e,this.localViewReferences=new Hn,this.queryDataByTarget={},v(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(t),this.remoteDocuments=e.getRemoteDocumentCache(),this.queryCache=e.getQueryCache(),this.localDocuments=new zn(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager())}return e.prototype.handleUserChange=function(e){var t=this;return this.persistence.runTransaction("Handle user change","readonly",function(n){var r;return t.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,t.mutationQueue=t.persistence.getMutationQueue(e),t.localDocuments=new zn(t.remoteDocuments,t.mutationQueue,t.persistence.getIndexManager()),t.mutationQueue.getAllMutationBatches(n)}).next(function(e){for(var i=[],o=[],a=Ue(),s=0,u=r;s<u.length;s++){var c=u[s];i.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){c=d[p];o.push(c.batchId);for(var m=0,y=c.mutations;m<y.length;m++){f=y[m];a=a.add(f.key)}}return t.localDocuments.getDocuments(n,a).next(function(e){return{affectedDocuments:e,removedBatchIds:i,addedBatchIds:o}})})})},e.prototype.localWrite=function(e){var t=this,n=Ee.now(),r=e.reduce(function(e,t){return e.add(t.key)},Ue());return this.persistence.runTransaction("Locally write mutations","readwrite",function(i){return t.localDocuments.getDocuments(i,r).next(function(r){for(var o=[],a=0,s=e;a<s.length;a++){var u=s[a],c=u.extractBaseValue(r.get(u.key));null!=c&&o.push(new Et(u.key,c,c.fieldMask(),bt.exists(!0)))}return t.mutationQueue.addMutationBatch(i,n,o,e).next(function(e){var t=e.applyToLocalDocumentSet(r);return{batchId:e.batchId,changes:t}})})})},e.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(n){return t.mutationQueue.lookupMutationKeys(n,e).next(function(e){return e?t.localDocuments.getDocuments(n,e):We.resolve(null)})})},e.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer();return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next(function(){return t.applyWriteToRemoteDocuments(n,e,i)}).next(function(){return i.apply(n)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},e.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next(function(e){return v(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},e.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)})},e.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly",function(t){return e.mutationQueue.getLastStreamToken(t)})},e.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(n){return t.mutationQueue.setLastStreamToken(n,e)})},e.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.queryCache.getLastRemoteSnapshotVersion(t)})},e.prototype.applyRemoteEvent=function(t){var n=this,r=this.remoteDocuments.newChangeBuffer(),i=t.snapshotVersion;return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var a=[];k(t.targetChanges,function(t,r){var s=n.queryDataByTarget[t];if(s){a.push(n.queryCache.removeMatchingKeys(o,r.removedDocuments,t).next(function(){return n.queryCache.addMatchingKeys(o,r.addedDocuments,t)}));var u=r.resumeToken;if(u.length>0){var c=s.withResumeToken(u,i);n.queryDataByTarget[t]=c,e.shouldPersistQueryData(s,c,r)&&a.push(n.queryCache.updateQueryData(o,c))}}});var s=Oe(),u=Ue();if(t.documentUpdates.forEach(function(e,t){u=u.add(e)}),a.push(r.getEntries(o,u).next(function(e){t.documentUpdates.forEach(function(i,u){var c=e.get(i);u instanceof Wt&&u.version.isEqual(Te.MIN)?(r.removeEntry(i),s=s.insert(i,u)):null==c||u.version.compareTo(c.version)>0||0===u.version.compareTo(c.version)&&c.hasPendingWrites?(Te.MIN.isEqual(t.snapshotVersion)&&m("LocalStore","Cannot add a document when the remote version is zero"),r.addEntry(u),s=s.insert(i,u)):d("LocalStore","Ignoring outdated watch update for ",i,". Current version:",c.version," Watch version:",u.version),t.resolvedLimboDocuments.has(i)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,i))})})),!i.isEqual(Te.MIN)){var c=n.queryCache.getLastRemoteSnapshotVersion(o).next(function(e){return v(i.compareTo(e)>=0,"Watch stream reverted to previous snapshot?? "+i+" < "+e),n.queryCache.setTargetsMetadata(o,o.currentSequenceNumber,i)});a.push(c)}return We.waitFor(a).next(function(){return r.apply(o)}).next(function(){return n.localDocuments.getLocalViewOfDocuments(o,s)})})},e.shouldPersistQueryData=function(e,t,n){return v(t.resumeToken.length>0,"Attempted to persist query data with no resume token"),0===e.resumeToken.length||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)},e.prototype.notifyLocalViewChanges=function(e){var t=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return We.forEach(e,function(e){return t.localViewReferences.addReferences(e.addedKeys,e.targetId),t.localViewReferences.removeReferences(e.removedKeys,e.targetId),We.forEach(e.removedKeys,function(e){return t.persistence.referenceDelegate.removeReference(n,e)})})})},e.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)})},e.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly",function(n){return t.localDocuments.getDocument(n,e)})},e.prototype.allocateQuery=function(e){var t=this;return this.persistence.runTransaction("Allocate query","readwrite",function(n){var r;return t.queryCache.getQueryData(n,e).next(function(i){return i?(r=i,We.resolve()):t.queryCache.allocateTargetId(n).next(function(i){return r=new Cn(e,i,_n.Listen,n.currentSequenceNumber),t.queryCache.addQueryData(n,r)})}).next(function(){return v(!t.queryDataByTarget[r.targetId],"Tried to allocate an already allocated query: "+e),t.queryDataByTarget[r.targetId]=r,r})})},e.prototype.releaseQuery=function(e,t){var n=this,r=t?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release query",r,function(r){return n.queryCache.getQueryData(r,e).next(function(i){v(null!=i,"Tried to release nonexistent query: "+e);var o=i.targetId,a=n.queryDataByTarget[o],s=n.localViewReferences.removeReferencesForId(o);return delete n.queryDataByTarget[o],t?We.resolve():We.forEach(s,function(e){return n.persistence.referenceDelegate.removeReference(r,e)}).next(function(){return n.persistence.referenceDelegate.removeTarget(r,a)})})})},e.prototype.executeQuery=function(e){var t=this;return this.persistence.runTransaction("Execute query","readonly",function(n){return t.localDocuments.getDocumentsMatchingQuery(n,e)})},e.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly",function(n){return t.queryCache.getMatchingKeysForTargetId(n,e)})},e.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},e.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},e.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},e.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),a=We.resolve();return o.forEach(function(r){a=a.next(function(){return n.getEntry(e,r)}).next(function(e){var o=e,a=t.docVersions.get(r);v(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,t))?n.addEntry(o):v(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))})}),a.next(function(){return r.mutationQueue.removeMutationBatch(e,i)})},e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.queryDataByTarget)})},e.prototype.getQueryForTarget=function(e){var t=this;return this.queryDataByTarget[e]?Promise.resolve(this.queryDataByTarget[e].query):this.persistence.runTransaction("Get query data","readonly",function(n){return t.queryCache.getQueryDataForTarget(n,e).next(function(e){return e?e.query:null})})},e.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly",function(t){return e.remoteDocuments.getNewDocumentChanges(t)})},e.RESUME_TOKEN_MAX_AGE_MICROS=3e8,e}(),Gn=function(){function e(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=w(),this.batchesByDocumentKey=new xe(Kn.compareByKey)}return e.prototype.checkEmpty=function(e){return We.resolve(0===this.mutationQueue.length)},e.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");v(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return v(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,We.resolve()},e.prototype.getLastStreamToken=function(e){return We.resolve(this.lastStreamToken)},e.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,We.resolve()},e.prototype.addMutationBatch=function(e,t,n,r){v(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;(this.nextBatchId++,this.mutationQueue.length>0)&&v(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new Be(i,t,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Kn(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}return We.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return We.resolve(this.findMutationBatch(t))},e.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return v(null!=n,"Failed to find local mutation batch."),We.resolve(n.keys())},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.indexOfBatchId(n),i=r<0?0:r;return We.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return We.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},e.prototype.getAllMutationBatches=function(e){return We.resolve(this.mutationQueue.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new Kn(t,0),i=new Kn(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(e){v(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);v(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),We.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new xe(G);return t.forEach(function(e){var t=new Kn(e,0),i=new Kn(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],function(t){v(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)})}),We.resolve(this.findMutationBatches(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){v(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;le.isDocumentKey(i)||(i=i.child(""));var o=new Kn(new le(i),0),a=new xe(G);return this.batchesByDocumentKey.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.targetOrBatchId)),!0)},o),We.resolve(this.findMutationBatches(a))},e.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach(function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)}),n},e.prototype.removeMutationBatch=function(e,t){var n=this;v(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return We.forEach(t.mutations,function(i){var o=new Kn(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(e,i.key)}).next(function(){n.batchesByDocumentKey=r})},e.prototype.removeCachedMutationKeys=function(e){},e.prototype.containsKey=function(e,t){var n=new Kn(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return We.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&v(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),We.resolve()},e.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return v(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},e.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},e.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return v(n.batchId===e,"If found batch must match"),n},e}(),Yn=function(){function e(e){this.persistence=e,this.queries=new Ht(function(e){return e.canonicalId()}),this.lastRemoteSnapshotVersion=Te.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Hn,this.targetCount=0,this.targetIdGenerator=Ze.forQueryCache()}return e.prototype.getTargetCount=function(e){return We.resolve(this.targetCount)},e.prototype.forEachTarget=function(e,t){return this.queries.forEach(function(e,n){return t(n)}),We.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return We.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return We.resolve(this.highestSequenceNumber)},e.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,We.resolve(t)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),We.resolve()},e.prototype.saveQueryData=function(e){this.queries.set(e.query,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},e.prototype.addQueryData=function(e,t){return v(!this.queries.has(t.query),"Adding a query that already exists"),this.saveQueryData(t),this.targetCount+=1,We.resolve()},e.prototype.updateQueryData=function(e,t){return v(this.queries.has(t.query),"Updating a non-existent query"),this.saveQueryData(t),We.resolve()},e.prototype.removeQueryData=function(e,t){return v(this.targetCount>0,"Removing a target from an empty cache"),v(this.queries.has(t.query),"Removing a non-existent target from the cache"),this.queries.delete(t.query),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,We.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.queries.forEach(function(a,s){s.sequenceNumber<=t&&!n[s.targetId]&&(r.queries.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),We.waitFor(o).next(function(){return i})},e.prototype.getQueryCount=function(e){return We.resolve(this.targetCount)},e.prototype.getQueryData=function(e,t){var n=this.queries.get(t)||null;return We.resolve(n)},e.prototype.getQueryDataForTarget=function(e,t){return g("Not yet implemented.")},e.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.addReference(e,t))}),We.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.removeReference(e,t))}),We.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),We.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return We.resolve(n)},e.prototype.containsKey=function(e,t){return We.resolve(this.references.containsKey(t))},e}();var Xn=function(){function e(e,t){this.indexManager=e,this.sizer=t,this.docs=new Se(le.comparator),this.newDocumentChanges=Ue(),this.size=0}return e.prototype.addEntry=function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.sizer(t);return this.docs=this.docs.insert(n,{maybeDocument:t,size:o}),this.newDocumentChanges=this.newDocumentChanges.add(n),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return We.resolve(n?n.maybeDocument:null)},e.prototype.getEntries=function(e,t){var n=this,r=De();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)}),We.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t){v(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var n=Pe(),r=new le(t.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),a=o.key,s=o.value.maybeDocument;if(!t.path.isPrefixOf(a.path))break;s instanceof Vt&&t.matches(s)&&(n=n.insert(s.key,s))}return We.resolve(n)},e.prototype.forEachDocumentKey=function(e,t){return We.forEach(this.docs,function(e){return t(e)})},e.prototype.getNewDocumentChanges=function(e){var t=this,n=Oe();return this.newDocumentChanges.forEach(function(e){var r=t.docs.get(e),i=r?r.maybeDocument:new Wt(e,Te.forDeletedDoc());n=n.insert(e,i)}),this.newDocumentChanges=Ue(),We.resolve(n)},e.prototype.newChangeBuffer=function(){return new e.RemoteDocumentChangeBuffer(this)},e.prototype.getSize=function(e){return We.resolve(this.size)},e.RemoteDocumentChangeBuffer=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n}return s.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach(function(r,i){i?n.push(t.documentCache.addEntry(e,i)):t.documentCache.removeEntry(r)}),We.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.documentCache.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getEntries(e,t)},t}(Kt),e}(),$n=function(){function e(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new oe(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.queryCache=new Yn(this);this.indexManager=new en,this.remoteDocumentCache=new Xn(this.indexManager,function(e){return n.referenceDelegate.documentSize(e)})}return e.createLruPersistence=function(t,n,r){return new e(t,function(e){return new er(e,new kn(n),r)})},e.createEagerPersistence=function(t){return new e(t,function(e){return new Zn(e)})},e.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getActiveClients=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){return[2,[this.clientId]]})})},e.prototype.setPrimaryStateListener=function(e){return e(!0)},e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(e){},e.prototype.getIndexManager=function(){return this.indexManager},e.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new Gn(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},e.prototype.getQueryCache=function(){return this.queryCache},e.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},e.prototype.runTransaction=function(e,t,n){var r=this;d("MemoryPersistence","Starting transaction:",e);var i=new Jn(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(e){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return e})}).toPromise()},e.prototype.mutationQueuesContainKey=function(e,t){return We.or(function(e){var t=[];return I(e,function(e,n){return t.push(n)}),t}(this.mutationQueues).map(function(n){return function(){return n.containsKey(e,t)}}))},e}(),Jn=function(){return function(e){this.currentSequenceNumber=e}}(),Zn=function(){function e(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(e.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw g("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),We.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),We.resolve()},e.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),We.resolve()},e.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.orphanedDocuments.add(e)})}).next(function(){return r.removeQueryData(e,t)})},e.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},e.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return We.forEach(this.orphanedDocuments,function(r){return t.isReferenced(e,r).next(function(e){e||n.removeEntry(r)})}).next(function(){return t._orphanedDocuments=null,n.apply(e)})},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next(function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)})},e.prototype.documentSize=function(e){return 0},e.prototype.isReferenced=function(e,t){var n=this;return We.or([function(){return n.persistence.getQueryCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return We.resolve(n.inMemoryPins.containsKey(t))}])},e}(),er=function(){function e(e,t,n){this.persistence=e,this.serializer=t,this.inMemoryPins=null,this.orphanedSequenceNumbers=new Ht(function(e){return ve(e.path)}),this.garbageCollector=new Dn(this,n)}return e.prototype.onTransactionStarted=function(){},e.prototype.onTransactionCommitted=function(e){return We.resolve()},e.prototype.forEachTarget=function(e,t){return this.persistence.getQueryCache().forEachTarget(e,t)},e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getQueryCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})},e.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return We.forEach(this.orphanedSequenceNumbers,function(r,i){return n.isPinned(e,r,i).next(function(e){return e?We.resolve():t(i)})})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.removeTargets=function(e,t,n){return this.persistence.getQueryCache().removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(e,function(i){return n.isPinned(e,i,t).next(function(e){e||(r++,o.removeEntry(i))})}).next(function(){return o.apply(e)}).next(function(){return r})},e.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),We.resolve()},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getQueryCache().updateQueryData(e,n)},e.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),We.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),We.resolve()},e.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),We.resolve()},e.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw g("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},e.prototype.isPinned=function(e,t,n){var r=this;return We.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return We.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getQueryCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return We.resolve(void 0!==e&&e>n)}])},e.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},e}(),tr=Number,nr=tr.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),rr=tr.MAX_SAFE_INTEGER||Math.pow(2,53)-1,ir=tr.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e};function or(e){return null===e||void 0===e}function ar(e){return ir(e)&&e<=rr&&e>=nr}var sr,ur=1e3,cr=1.5,lr=6e4,hr=function(){function e(e,t,n,r,i){void 0===n&&(n=ur),void 0===r&&(r=cr),void 0===i&&(i=lr),this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return e.prototype.reset=function(){this.currentBaseMs=0},e.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},e.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&d("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return t.lastAttemptTime=Date.now(),e()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},e.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},e.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},e}();!function(e){e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.Open=2]="Open",e[e.Error=3]="Error",e[e.Backoff=4]="Backoff"}(sr||(sr={}));var fr,pr,dr=function(){function e(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=sr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new hr(e,t)}return e.prototype.isStarted=function(){return this.state===sr.Starting||this.state===sr.Open||this.state===sr.Backoff},e.prototype.isOpen=function(){return this.state===sr.Open},e.prototype.start=function(){this.state!==sr.Error?(v(this.state===sr.Initial,"Already started"),this.auth()):this.performBackoff()},e.prototype.stop=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(sr.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.inhibitBackoff=function(){v(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=sr.Initial,this.backoff.reset()},e.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return e.handleIdleCloseTimer()}))},e.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},e.prototype.handleIdleCloseTimer=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){return this.isOpen()?[2,this.close(sr.Initial)]:[2]})})},e.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},e.prototype.close=function(e,t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(n){switch(n.label){case 0:return v(this.isStarted(),"Only started streams should be closed."),v(e===sr.Error||or(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==sr.Error?this.backoff.reset():t&&t.code===_.RESOURCE_EXHAUSTED?(m(t.toString()),m("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===_.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}})})},e.prototype.tearDown=function(){},e.prototype.auth=function(){var e=this;v(this.state===sr.Initial,"Must be in initial state to auth"),this.state=sr.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(t){e.closeCount===n&&e.startStream(t)},function(n){t(function(){var t=new E(_.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)})})},e.prototype.startStream=function(e){var t=this;v(this.state===sr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen(function(){n(function(){return v(t.state===sr.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=sr.Open,t.listener.onOpen()})}),this.stream.onClose(function(e){n(function(){return t.handleStreamClose(e)})}),this.stream.onMessage(function(e){n(function(){return t.onMessage(e)})})},e.prototype.performBackoff=function(){var e=this;v(this.state===sr.Error,"Should only perform backoff when in Error state"),this.state=sr.Backoff,this.backoff.backoffAndRun(function(){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(e){return v(this.state===sr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=sr.Initial,this.start(),v(this.isStarted(),"PersistentStream should have started"),[2]})})})},e.prototype.handleStreamClose=function(e){return v(this.isStarted(),"Can't handle server close on non-started stream"),d("PersistentStream","close with error: "+e),this.stream=null,this.close(sr.Error,e)},e.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget(function(){return t.closeCount===e?n():(d("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),mr=function(e){function t(t,n,r,i,o){var a=e.call(this,t,Z.ListenStreamConnectionBackoff,Z.ListenStreamIdle,n,r,o)||this;return a.serializer=i,a}return s.__extends(t,e),t.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},t.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},t.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},t.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},t}(dr),yr=function(e){function t(t,n,r,i,o){var a=e.call(this,t,Z.WriteStreamConnectionBackoff,Z.WriteStreamIdle,n,r,o)||this;return a.serializer=i,a.handshakeComplete_=!1,a.lastStreamToken=w(),a}return s.__extends(t,e),Object.defineProperty(t.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.handshakeComplete_=!1,e.prototype.start.call(this)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},t.prototype.onMessage=function(e){if(v(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return v(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){v(this.isOpen(),"Writing handshake requires an opened stream"),v(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},t.prototype.writeMutations=function(e){var t=this;v(this.isOpen(),"Writing mutations requires an opened stream"),v(this.handshakeComplete_,"Handshake must be complete before writing mutations"),v(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map(function(e){return t.serializer.toMutation(e)})};this.sendRequest(n)},t}(dr),gr=function(){function e(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}return e.prototype.newPersistentWriteStream=function(e){return new yr(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.newPersistentWatchStream=function(e){return new mr(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map(function(e){return t.serializer.toMutation(e)})};return this.invokeRPC("Commit",n).then(function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)})},e.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map(function(e){return t.serializer.toName(e)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=Oe();n.forEach(function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)});var i=[];return e.forEach(function(e){var t=r.get(e);v(!!t,"Missing entity in write response for "+e),i.push(t)}),i})},e.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(e,t,r)}).catch(function(e){throw e.code===_.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(e,t,r)}).catch(function(e){throw e.code===_.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e}(),vr=function(){function e(e){this.datastore=e,this.readVersions=Le(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n=this;return s.__generator(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new E(_.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(e)];case 1:return(t=r.sent()).forEach(function(e){e instanceof Wt||e instanceof Vt?n.recordVersion(e):g("Document in a transaction was a "+e.constructor.name)}),[2,t]}})})},e.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},e.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(e)},e.prototype.delete=function(e){this.write([new St(e,this.precondition(e))]),this.writtenDocs.add(e)},e.prototype.commit=function(){return s.__awaiter(this,void 0,void 0,function(){var e;return s.__generator(this,function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(e=this.readVersions,this.mutations.forEach(function(t){e=e.remove(t.key)}),!e.isEmpty())throw new E(_.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}})})},e.prototype.recordVersion=function(e){var t;if(e instanceof Vt)t=e.version;else{if(!(e instanceof Wt))throw g("Document in a transaction was a "+e.constructor.name);t=Te.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new E(_.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?bt.updateTime(t):bt.NONE},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(!this.writtenDocs.has(e)&&t){if(t.isEqual(Te.forDeletedDoc()))throw new E(_.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bt.updateTime(t)}return bt.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},e.prototype.ensureCommitNotCalled=function(){v(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},e}();!function(e){e[e.Unknown=0]="Unknown",e[e.Online=1]="Online",e[e.Offline=2]="Offline"}(fr||(fr={})),function(e){e[e.RemoteStore=0]="RemoteStore",e[e.SharedClientState=1]="SharedClientState"}(pr||(pr={}));var br,wr=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=fr.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return e.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(fr.Unknown),v(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(Z.OnlineStateTimeout,1e4,function(){return e.onlineStateTimer=null,v(e.state===fr.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(fr.Offline),Promise.resolve()}))},e.prototype.handleWatchStreamFailure=function(e){this.state===fr.Online?(this.setAndBroadcast(fr.Unknown),v(0===this.watchStreamFailures,"watchStreamFailures must be 0"),v(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(fr.Offline)))},e.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===fr.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},e.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(m(t),this.shouldWarnClientIsOffline=!1):d("OnlineStateTracker",t)},e.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},e}();function _r(e){switch(e){case _.OK:return g("Treated status OK as error");case _.CANCELLED:case _.UNKNOWN:case _.DEADLINE_EXCEEDED:case _.RESOURCE_EXHAUSTED:case _.INTERNAL:case _.UNAVAILABLE:case _.UNAUTHENTICATED:return!1;case _.INVALID_ARGUMENT:case _.NOT_FOUND:case _.ALREADY_EXISTS:case _.PERMISSION_DENIED:case _.FAILED_PRECONDITION:case _.ABORTED:case _.OUT_OF_RANGE:case _.UNIMPLEMENTED:case _.DATA_LOSS:return!0;default:return g("Unknown status code: "+e)}}function Er(e){if(void 0===e)return m("GRPC error has no .code"),_.UNKNOWN;switch(e){case br.OK:return _.OK;case br.CANCELLED:return _.CANCELLED;case br.UNKNOWN:return _.UNKNOWN;case br.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case br.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case br.INTERNAL:return _.INTERNAL;case br.UNAVAILABLE:return _.UNAVAILABLE;case br.UNAUTHENTICATED:return _.UNAUTHENTICATED;case br.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case br.NOT_FOUND:return _.NOT_FOUND;case br.ALREADY_EXISTS:return _.ALREADY_EXISTS;case br.PERMISSION_DENIED:return _.PERMISSION_DENIED;case br.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case br.ABORTED:return _.ABORTED;case br.OUT_OF_RANGE:return _.OUT_OF_RANGE;case br.UNIMPLEMENTED:return _.UNIMPLEMENTED;case br.DATA_LOSS:return _.DATA_LOSS;default:return g("Unknown status code: "+e)}}function Tr(e){if(void 0===e)return br.OK;switch(e){case _.OK:return br.OK;case _.CANCELLED:return br.CANCELLED;case _.UNKNOWN:return br.UNKNOWN;case _.DEADLINE_EXCEEDED:return br.DEADLINE_EXCEEDED;case _.RESOURCE_EXHAUSTED:return br.RESOURCE_EXHAUSTED;case _.INTERNAL:return br.INTERNAL;case _.UNAVAILABLE:return br.UNAVAILABLE;case _.UNAUTHENTICATED:return br.UNAUTHENTICATED;case _.INVALID_ARGUMENT:return br.INVALID_ARGUMENT;case _.NOT_FOUND:return br.NOT_FOUND;case _.ALREADY_EXISTS:return br.ALREADY_EXISTS;case _.PERMISSION_DENIED:return br.PERMISSION_DENIED;case _.FAILED_PRECONDITION:return br.FAILED_PRECONDITION;case _.ABORTED:return br.ABORTED;case _.OUT_OF_RANGE:return br.OUT_OF_RANGE;case _.UNIMPLEMENTED:return br.UNIMPLEMENTED;case _.DATA_LOSS:return br.DATA_LOSS;default:return g("Unknown status code: "+e)}}!function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS"}(br||(br={}));var Sr,Cr,kr=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||le.comparator(t.key,n.key)}:function(e,t){return le.comparator(e.key,t.key)},this.keyedMap=Pe(),this.sortedSet=new Se(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}();!function(e){e[e.Added=0]="Added",e[e.Removed=1]="Removed",e[e.Modified=2]="Modified",e[e.Metadata=3]="Metadata"}(Sr||(Sr={})),function(e){e[e.Local=0]="Local",e[e.Synced=1]="Synced"}(Cr||(Cr={}));var Ir,xr=function(){function e(){this.changeMap=new Se(le.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==Sr.Added&&n.type===Sr.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===Sr.Metadata&&n.type!==Sr.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===Sr.Modified&&n.type===Sr.Modified?this.changeMap=this.changeMap.insert(t,{type:Sr.Modified,doc:e.doc}):e.type===Sr.Modified&&n.type===Sr.Added?this.changeMap=this.changeMap.insert(t,{type:Sr.Added,doc:e.doc}):e.type===Sr.Removed&&n.type===Sr.Added?this.changeMap=this.changeMap.remove(t):e.type===Sr.Removed&&n.type===Sr.Modified?this.changeMap=this.changeMap.insert(t,{type:Sr.Removed,doc:n.doc}):e.type===Sr.Added&&n.type===Sr.Removed?this.changeMap=this.changeMap.insert(t,{type:Sr.Modified,doc:e.doc}):g("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},e.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal(function(t,n){e.push(n)}),e},e}(),Nr=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach(function(e){o.push({type:Sr.Added,doc:e})}),new e(t,n,kr.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){if(this.fromCache!==e.fromCache||this.syncStateChanged!==e.syncStateChanged||!this.mutatedKeys.isEqual(e.mutatedKeys)||!this.query.isEqual(e.query)||!this.docs.isEqual(e.docs)||!this.oldDocs.isEqual(e.oldDocs))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),Ar=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r,i=((r={})[t]=Or.createSynthesizedTargetChangeForCurrentChange(t,n),r);return new e(Te.MIN,i,qe(),Oe(),Ue())},e}(),Or=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(w(),n,Ue(),Ue(),Ue())},e}(),Dr=function(){return function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r}}(),Rr=function(){return function(e,t){this.targetId=e,this.existenceFilter=t}}();!function(e){e[e.NoChange=0]="NoChange",e[e.Added=1]="Added",e[e.Removed=2]="Removed",e[e.Current=3]="Current",e[e.Reset=4]="Reset"}(Ir||(Ir={}));var Pr=function(){return function(e,t,n,r){void 0===n&&(n=w()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}(),Mr=function(){function e(){this.pendingResponses=0,this.documentChanges=Ur(),this._resumeToken=w(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),e.prototype.updateResumeToken=function(e){e.length>0&&(this._hasPendingChanges=!0,this._resumeToken=e)},e.prototype.toTargetChange=function(){var e=Ue(),t=Ue(),n=Ue();return this.documentChanges.forEach(function(r,i){switch(i){case Sr.Added:e=e.add(r);break;case Sr.Modified:t=t.add(r);break;case Sr.Removed:n=n.add(r);break;default:g("Encountered invalid change type: "+i)}}),new Or(this._resumeToken,this._current,e,t,n)},e.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=Ur()},e.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},e.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},e.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},e.prototype.recordTargetResponse=function(){this.pendingResponses-=1},e.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},e}(),Lr=function(){function e(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=Oe(),this.pendingDocumentTargetMapping=Fr(),this.pendingTargetResets=new xe(G)}return e.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof Vt?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof Wt&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++){r=o[i];this.removeDocumentFromTarget(r,e.key,e.newDoc)}},e.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,function(n){var r=t.ensureTargetState(n);switch(e.state){case Ir.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case Ir.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case Ir.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),v(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case Ir.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case Ir.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:g("Unknown target watch change state: "+e.state)}})},e.prototype.forEachTarget=function(e,t){e.targetIds.length>0?e.targetIds.forEach(t):k(this.targetStates,t)},e.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.queryDataForActiveTarget(t);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new le(i.path);this.removeDocumentFromTarget(t,o,new Wt(o,Te.forDeletedDoc()))}else v(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},e.prototype.createRemoteEvent=function(e){var t=this,n={};k(this.targetStates,function(r,i){var o=t.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var a=new le(o.query.path);null!==t.pendingDocumentUpdates.get(a)||t.targetContainsDocument(r,a)||t.removeDocumentFromTarget(r,a,new Wt(a,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=Ue();this.pendingDocumentTargetMapping.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.queryDataForActiveTarget(e);return!n||n.purpose===_n.LimboResolution||(i=!1,!1)}),i&&(r=r.add(e))});var i=new Ar(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Oe(),this.pendingDocumentTargetMapping=Fr(),this.pendingTargetResets=new xe(G),i},e.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?Sr.Modified:Sr.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},e.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,Sr.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},e.prototype.removeTarget=function(e){delete this.targetStates[e]},e.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},e.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new Mr),this.targetStates[e]},e.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new xe(G),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},e.prototype.isActiveTarget=function(e){var t=null!==this.queryDataForActiveTarget(e);return t||d("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.queryDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getQueryDataForTarget(e)},e.prototype.resetTarget=function(e){var t=this;v(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new Mr,this.metadataProvider.getRemoteKeysForTarget(e).forEach(function(n){t.removeDocumentFromTarget(e,n,null)})},e.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},e}();function Fr(){return new Se(le.comparator)}function Ur(){return new Se(le.comparator)}var jr="RemoteStore",qr=function(){function e(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback(function(e){n.enqueueAndForget(function(){return s.__awaiter(o,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(d(jr,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})}),this.onlineStateTracker=new wr(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.enableNetwork=function(){return s.__awaiter(this,void 0,void 0,function(){var e;return s.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(fr.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e.prototype.disableNetwork=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(fr.Offline),[2]}})})},e.prototype.disableNetworkInternal=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),this.writePipeline.length>0&&(d(jr,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},e.prototype.shutdown=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return d(jr,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(fr.Unknown),[2]}})})},e.prototype.listen=function(e){v(!S(this.listenTargets,e.targetId),"listen called with duplicate targetId!"),this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e)},e.prototype.unlisten=function(e){v(S(this.listenTargets,e),"unlisten called without assigned target ID!"),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),x(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(fr.Unknown))},e.prototype.getQueryDataForTarget=function(e){return this.listenTargets[e]||null},e.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},e.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},e.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},e.prototype.startWatchStream=function(){v(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Lr(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},e.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!x(this.listenTargets)},e.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},e.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},e.prototype.onWatchStreamOpen=function(){return s.__awaiter(this,void 0,void 0,function(){var e=this;return s.__generator(this,function(t){return k(this.listenTargets,function(t,n){e.sendWatchRequest(n)}),[2]})})},e.prototype.onWatchStreamClose=function(e){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return void 0===e&&v(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(fr.Unknown),[2]})})},e.prototype.onWatchStreamChange=function(e,t){return s.__awaiter(this,void 0,void 0,function(){var n;return s.__generator(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(fr.Online),e instanceof Pr&&e.state===Ir.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof Dr?this.watchChangeAggregator.handleDocumentChange(e):e instanceof Rr?this.watchChangeAggregator.handleExistenceFilter(e):(v(e instanceof Pr,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(Te.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),t.compareTo(n)>=0?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.raiseWatchSnapshot=function(e){var t=this;v(!e.isEqual(Te.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return k(n.targetChanges,function(n,r){if(r.resumeToken.length>0){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.withResumeToken(r.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.withResumeToken(w(),n.snapshotVersion),t.sendUnwatchRequest(e);var r=new Cn(n.query,e,_n.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},e.prototype.handleTargetError=function(e){var t=this;v(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach(function(e){r=r.then(function(){return s.__awaiter(t,void 0,void 0,function(){return s.__generator(this,function(t){return S(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]})})})}),r},e.prototype.fillWritePipeline=function(){return s.__awaiter(this,void 0,void 0,function(){var e,t;return s.__generator(this,function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(e=this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(t=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},e.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},e.prototype.outstandingWrites=function(){return this.writePipeline.length},e.prototype.addToWritePipeline=function(e){v(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},e.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},e.prototype.startWriteStream=function(){v(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},e.prototype.onWriteStreamOpen=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){return this.writeStream.writeHandshake(),[2]})})},e.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var t=0,n=e.writePipeline;t<n.length;t++){var r=n[t];e.writeStream.writeMutations(r.mutations)}}).catch(jn)},e.prototype.onMutationResult=function(e,t){var n=this;v(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Ve.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},e.prototype.onWriteStreamClose=function(e){return s.__awaiter(this,void 0,void 0,function(){var t=this;return s.__generator(this,function(n){return void 0===e&&v(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&this.writePipeline.length>0?(void 0,[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then(function(){t.shouldStartWriteStream()&&t.startWriteStream()})]):[2]})})},e.prototype.handleHandshakeError=function(e){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return _r(e.code)?(d(jr,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=w(),[2,this.localStore.setLastStreamToken(w()).catch(jn)]):[2]})})},e.prototype.handleWriteError=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n=this;return s.__generator(this,function(r){return _r(i=e.code)&&i!==_.ABORTED?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then(function(){return n.fillWritePipeline()})]):[2];var i})})},e.prototype.createTransaction=function(){return new vr(this.datastore)},e.prototype.restartNetwork=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(fr.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}})})},e.prototype.handleCredentialChange=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(d(jr,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.applyPrimaryState=function(e){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.isPrimary=e,e&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(fr.Unknown),t.label=4;case 4:return[2]}})})},e}(),Br=function(){function e(e,t){if(A("GeoPoint",arguments,2),R("GeoPoint","number",1,e),R("GeoPoint","number",2,t),!isFinite(e)||e<-90||e>90)throw new E(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new E(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype._compareTo=function(e){return G(this._lat,e._lat)||G(this._long,e._long)},e}(),Vr=function(){function e(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return e.atPath=function(t){return new e(t)},Object.defineProperty(e.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[ei]:this.memoizedOrderBy=[new Zr(e),ei];else{v(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:$r.ASCENDING;this.memoizedOrderBy.push(a===$r.ASCENDING?ei:ti)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),e.prototype.addFilter=function(t){v(null==this.getInequalityFilterField()||!(t instanceof Hr)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),v(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([t]);return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},e.prototype.addOrderBy=function(t){v(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([t]);return new e(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},e.prototype.withLimit=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,this.startAt,this.endAt)},e.prototype.withStartAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,t,this.endAt)},e.prototype.withEndAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,t)},e.prototype.asCollectionQueryAtPath=function(t){return new e(t,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},e.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();this.isCollectionGroupQuery()&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++){e+=n[t].canonicalId(),e+=","}e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++){e+=i[r].canonicalId(),e+=","}or(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},e.prototype.toString=function(){var e="Query("+this.path.canonicalString();return this.isCollectionGroupQuery()&&(e+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(e+=", filters: ["+this.filters.join(", ")+"]"),or(this.limit)||(e+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(e+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),e+")"},e.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&(!!this.path.isEqual(e.path)&&(!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)))},e.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(e,t);if(0!==a)return a;n=n||o.field.isKeyField()}return v(n,"orderBy used that doesn't compare on key field"),0},e.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},e.prototype.hasLimit=function(){return!or(this.limit)},e.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},e.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof Hr&&n.isInequality())return n.field}return null},e.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(r instanceof Hr&&e.indexOf(r.op)>=0)return r.op}return null},e.prototype.isDocumentQuery=function(){return le.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},e.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},e.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):le.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},e.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},e.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++){if(!n[t].matches(e))return!1}return!0},e.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,e))},e.prototype.assertValidBound=function(e){v(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},e}(),Wr=function(){return function(){}}(),zr=function(){function e(e){this.name=e}return e.fromString=function(t){switch(t){case"<":return e.LESS_THAN;case"<=":return e.LESS_THAN_OR_EQUAL;case"==":return e.EQUAL;case">=":return e.GREATER_THAN_OR_EQUAL;case">":return e.GREATER_THAN;case"array-contains":return e.ARRAY_CONTAINS;case"in":return e.IN;case"array-contains-any":return e.ARRAY_CONTAINS_ANY;default:return g("Unknown FieldFilter operator: "+t)}},e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(e){return this.name===e.name},e.LESS_THAN=new e("<"),e.LESS_THAN_OR_EQUAL=new e("<="),e.EQUAL=new e("=="),e.GREATER_THAN=new e(">"),e.GREATER_THAN_OR_EQUAL=new e(">="),e.ARRAY_CONTAINS=new e("array-contains"),e.IN=new e("in"),e.ARRAY_CONTAINS_ANY=new e("array-contains-any"),e}(),Hr=function(e){function t(t,n,r){var i=e.call(this)||this;return i.field=t,i.op=n,i.value=r,i}return s.__extends(t,e),t.create=function(e,n,r){if(e.isKeyField())return n===zr.IN?(v(r instanceof qt,"Comparing on key with IN, but filter value not an ArrayValue"),v(r.internalValue.every(function(e){return e instanceof Ft}),"Comparing on key with IN, but an array value was not a RefValue"),new Qr(e,r)):(v(r instanceof Ft,"Comparing on key, but filter value not a RefValue"),v(n!==zr.ARRAY_CONTAINS&&n!==zr.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new Kr(e,n,r));if(r.isEqual(It.INSTANCE)){if(n!==zr.EQUAL)throw new E(_.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new t(e,n,r)}if(r.isEqual(Dt.NAN)){if(n!==zr.EQUAL)throw new E(_.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new t(e,n,r)}return n===zr.ARRAY_CONTAINS?new Gr(e,r):n===zr.IN?(v(r instanceof qt,"IN filter has invalid value: "+r.toString()),new Yr(e,r)):n===zr.ARRAY_CONTAINS_ANY?(v(r instanceof qt,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new Xr(e,r)):new t(e,n,r)},t.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},t.prototype.matchesComparison=function(e){switch(this.op){case zr.LESS_THAN:return e<0;case zr.LESS_THAN_OR_EQUAL:return e<=0;case zr.EQUAL:return 0===e;case zr.GREATER_THAN:return e>0;case zr.GREATER_THAN_OR_EQUAL:return e>=0;default:return g("Unknown FieldFilter operator: "+this.op)}},t.prototype.isInequality=function(){return[zr.LESS_THAN,zr.LESS_THAN_OR_EQUAL,zr.GREATER_THAN,zr.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&(this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value))},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(Wr),Kr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=le.comparator(e.key,t.key);return this.matchesComparison(n)},t}(Hr),Qr=function(e){function t(t,n){var r=e.call(this,t,zr.IN,n)||this;return r.value=n,r}return s.__extends(t,e),t.prototype.matches=function(e){return this.value.internalValue.some(function(t){return e.key.isEqual(t.key)})},t}(Hr),Gr=function(e){function t(t,n){return e.call(this,t,zr.ARRAY_CONTAINS,n)||this}return s.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return t instanceof qt&&t.contains(this.value)},t}(Hr),Yr=function(e){function t(t,n){var r=e.call(this,t,zr.IN,n)||this;return r.value=n,r}return s.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},t}(Hr),Xr=function(e){function t(t,n){var r=e.call(this,t,zr.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return s.__extends(t,e),t.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof qt&&n.internalValue.some(function(e){return t.value.contains(e)})},t}(Hr),$r=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e.ASCENDING=new e("asc"),e.DESCENDING=new e("desc"),e}(),Jr=function(){function e(e,t){this.position=e,this.before=t}return e.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++){e+=n[t].toString()}return e},e.prototype.sortsBeforeDocument=function(e,t){v(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())v(o instanceof Ft,"Bound has a non-key value where the key path is being used."),n=le.comparator(o.key,t.key);else{var a=t.field(i.field);v(null!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===$r.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},e.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],r=e.position[t];if(!n.isEqual(r))return!1}return!0},e}(),Zr=function(){function e(e,t){this.field=e,void 0===t&&(t=$r.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}return e.prototype.compare=function(e,t){var n=this.isKeyOrderBy?Vt.compareByKey(e,t):Vt.compareByField(this.field,e,t);switch(this.dir){case $r.ASCENDING:return n;case $r.DESCENDING:return-1*n;default:return g("Unknown direction: "+this.dir)}},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},e.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},e.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},e}(),ei=new Zr(ce.keyField(),$r.ASCENDING),ti=new Zr(ce.keyField(),$r.DESCENDING),ni=function(){function e(){}return e.prototype.applyToLocalView=function(e,t){return new Mt(t,e)},e.prototype.applyToRemoteDocument=function(e,t){return t},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e},e.instance=new e,e}(),ri=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=ai(e),n=function(e){t.find(function(t){return t.isEqual(e)})||t.push(e)},r=0,i=this.elements;r<i.length;r++){n(i[r])}return new qt(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&Y(t.elements,this.elements)},e}(),ii=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=ai(e),n=function(e){t=t.filter(function(t){return!t.isEqual(e)})},r=0,i=this.elements;r<i.length;r++){n(i[r])}return new qt(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&Y(t.elements,this.elements)},e}(),oi=function(){function e(e){this.operand=e}return e.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);if(n instanceof Ot&&this.operand instanceof Ot){var r=n.internalValue+this.operand.internalValue;return new Ot(r)}r=n.internalValue+this.operand.internalValue;return new Dt(r)},e.prototype.applyToRemoteDocument=function(e,t){return v(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},e.prototype.computeBaseValue=function(e){return e instanceof Nt?e:new Ot(0)},e.prototype.isEqual=function(t){return t instanceof e&&this.operand.isEqual(t.operand)},e}();function ai(e){return e instanceof qt?e.internalValue.slice():[]}var si=function(){function e(e){this.count=e}return e.prototype.isEqual=function(e){return e&&e.count===this.count},e}(),ui=function(){var e={};return e[$r.ASCENDING.name]="ASCENDING",e[$r.DESCENDING.name]="DESCENDING",e}(),ci=function(){var e={};return e[zr.LESS_THAN.name]="LESS_THAN",e[zr.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",e[zr.GREATER_THAN.name]="GREATER_THAN",e[zr.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",e[zr.EQUAL.name]="EQUAL",e[zr.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",e[zr.IN.name]="IN",e[zr.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",e}(),li=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hi(e,t){v(!or(e),t+" is missing")}function fi(e){return"number"===typeof e?e:"string"===typeof e?Number(e):g("can't parse "+e)}var pi=function(){function e(e,t){this.databaseId=e,this.options=t}return e.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},e.prototype.unsafeCastProtoByteString=function(e){return e},e.prototype.fromRpcStatus=function(e){var t=void 0===e.code?_.UNKNOWN:Er(e.code);return new E(t,e.message||"")},e.prototype.toInt32Value=function(e){return or(e)?void 0:{value:e}},e.prototype.fromInt32Value=function(e){var t;return or(t="object"===typeof e?e.value:e)?null:t},e.prototype.toTimestamp=function(e){return{seconds:""+e.seconds,nanos:e.nanoseconds}},e.prototype.fromTimestamp=function(e){if("string"===typeof e)return this.fromIso8601String(e);v(!!e,"Cannot deserialize null or undefined timestamp.");var t=fi(e.seconds||"0"),n=e.nanos||0;return new Ee(t,n)},e.prototype.fromIso8601String=function(e){var t=0,n=li.exec(e);if(v(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new Ee(o,t)},e.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},e.prototype.fromBlob=function(e){return"string"===typeof e?(v(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),ee.fromBase64String(e)):(v(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),ee.fromUint8Array(e))},e.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},e.prototype.fromVersion=function(e){return v(!!e,"Trying to deserialize version that isn't set"),Te.fromTimestamp(this.fromTimestamp(e))},e.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},e.prototype.fromResourceName=function(e){var t=se.fromString(e);return v(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},e.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},e.prototype.fromName=function(e){var t=this.fromResourceName(e);return v(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),v(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new le(this.extractLocalPathFromResourceName(t))},e.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},e.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?se.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(e.prototype,"encodedDatabaseId",{get:function(){return new se(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),e.prototype.fullyQualifiedPrefixPath=function(e){return new se(["projects",e.projectId,"databases",e.database])},e.prototype.extractLocalPathFromResourceName=function(e){return v(e.length>4&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},e.prototype.isValidResourceName=function(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)},e.prototype.toValue=function(e){if(e instanceof It)return{nullValue:"NULL_VALUE"};if(e instanceof xt)return{booleanValue:e.value()};if(e instanceof Ot)return{integerValue:""+e.value()};if(e instanceof Dt){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof Rt?{stringValue:e.value()}:e instanceof jt?{mapValue:this.toMapValue(e)}:e instanceof qt?{arrayValue:this.toArrayValue(e)}:e instanceof Pt?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof Ut?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof Lt?{bytesValue:this.toBytes(e.value())}:e instanceof Ft?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:g("Unknown FieldValue "+JSON.stringify(e))},e.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return It.INSTANCE;if("booleanValue"in e)return xt.of(e.booleanValue);if("integerValue"in e)return new Ot(fi(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return Dt.NAN;if("Infinity"===e.doubleValue)return Dt.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return Dt.NEGATIVE_INFINITY}return new Dt(e.doubleValue)}if("stringValue"in e)return new Rt(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e){hi(e.arrayValue,"arrayValue");var n=e.arrayValue.values||[];return new qt(n.map(function(e){return t.fromValue(e)}))}if("timestampValue"in e)return hi(e.timestampValue,"timestampValue"),new Pt(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e){hi(e.geoPointValue,"geoPointValue");var r=e.geoPointValue.latitude||0,i=e.geoPointValue.longitude||0;return new Ut(new Br(r,i))}if("bytesValue"in e){hi(e.bytesValue,"bytesValue");var o=this.fromBlob(e.bytesValue);return new Lt(o)}if("referenceValue"in e){hi(e.referenceValue,"referenceValue");var a=this.fromResourceName(e.referenceValue),s=new ie(a.get(1),a.get(3)),u=new le(this.extractLocalPathFromResourceName(a));return new Ft(s,u)}return g("Unknown Value proto "+JSON.stringify(e))},e.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},e.prototype.toDocument=function(e){return v(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toTimestamp(e.version.toTimestamp())}},e.prototype.fromDocument=function(e,t){var n=this,r=this.fromName(e.name),i=this.fromVersion(e.updateTime);return new Vt(r,i,{hasCommittedMutations:!!t},void 0,e,function(e){return n.fromValue(e)})},e.prototype.toFields=function(e){var t=this,n={};return e.forEach(function(e,r){n[e]=t.toValue(r)}),n},e.prototype.fromFields=function(e){var t=this,n=e,r=jt.EMPTY;return I(n,function(e,n){r=r.set(new ce([e]),t.fromValue(n))}),r},e.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},e.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.toValue(e))}),{values:n}},e.prototype.fromFound=function(e){var t=this;v(!!e.found,"Tried to deserialize a found document from a missing document."),hi(e.found.name,"doc.found.name"),hi(e.found.updateTime,"doc.found.updateTime");var n=this.fromName(e.found.name),r=this.fromVersion(e.found.updateTime);return new Vt(n,r,{},void 0,e.found,function(e){return t.fromValue(e)})},e.prototype.fromMissing=function(e){v(!!e.missing,"Tried to deserialize a missing document from a found document."),v(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new Wt(t,n)},e.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):g("invalid batch get response: "+JSON.stringify(e))},e.prototype.toWatchTargetChangeState=function(e){switch(e){case Ir.Added:return"ADD";case Ir.Current:return"CURRENT";case Ir.NoChange:return"NO_CHANGE";case Ir.Removed:return"REMOVE";case Ir.Reset:return"RESET";default:return g("Unknown WatchTargetChangeState: "+e)}},e.prototype.toTestWatchChange=function(e){if(e instanceof Rr)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof Dr){if(e.newDoc instanceof Vt){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof Wt){t=e.newDoc;return{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}}}if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof Pr){var n=void 0;return e.cause&&(n={code:Tr(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return g("Unrecognized watch change: "+JSON.stringify(e))},e.prototype.fromWatchChange=function(e){var t,n=this;if("targetChange"in e){hi(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=e.targetChange.resumeToken||this.emptyByteString(),a=e.targetChange.cause,s=a&&this.fromRpcStatus(a);t=new Pr(r,i,o,s||null)}else if("documentChange"in e){hi(e.documentChange,"documentChange"),hi(e.documentChange.document,"documentChange.name"),hi(e.documentChange.document.name,"documentChange.document.name"),hi(e.documentChange.document.updateTime,"documentChange.document.updateTime");var u=e.documentChange,c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),h=new Vt(c,l,{},void 0,u.document,function(e){return n.fromValue(e)}),f=u.targetIds||[],p=u.removedTargetIds||[];t=new Dr(f,p,h.key,h)}else if("documentDelete"in e){hi(e.documentDelete,"documentDelete"),hi(e.documentDelete.document,"documentDelete.document");var d=e.documentDelete;c=this.fromName(d.document),l=d.readTime?this.fromVersion(d.readTime):Te.forDeletedDoc(),h=new Wt(c,l),p=d.removedTargetIds||[];t=new Dr([],p,h.key,h)}else if("documentRemove"in e){hi(e.documentRemove,"documentRemove"),hi(e.documentRemove.document,"documentRemove");var m=e.documentRemove;c=this.fromName(m.document),p=m.removedTargetIds||[];t=new Dr([],p,c,null)}else{if(!("filter"in e))return g("Unknown change type "+JSON.stringify(e));hi(e.filter,"filter"),hi(e.filter.targetId,"filter.targetId");var y=e.filter,v=y.count||0,b=new si(v),w=y.targetId;t=new Rr(w,b)}return t},e.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?Ir.NoChange:"ADD"===e?Ir.Added:"REMOVE"===e?Ir.Removed:"CURRENT"===e?Ir.Current:"RESET"===e?Ir.Reset:g("Got unexpected TargetChange.state: "+e)},e.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return Te.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?Te.MIN:t.readTime?this.fromVersion(t.readTime):Te.MIN},e.prototype.toMutation=function(e){var t,n=this;if(e instanceof _t)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof St)t={delete:this.toName(e.key)};else if(e instanceof Et)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof Tt))return g("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map(function(e){return n.toFieldTransform(e)})}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},e.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):bt.NONE;if(e.update){hi(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new Et(r,i,o,n)}return new _t(r,i,n)}if(e.delete){r=this.fromName(e.delete);return new St(r,n)}if(e.transform){r=this.fromName(e.transform.document);var a=e.transform.fieldTransforms.map(function(e){return t.fromFieldTransform(e)});return v(!0===n.exists,'Transforms only support precondition "exists == true"'),new Tt(r,a)}return g("unknown mutation proto: "+JSON.stringify(e))},e.prototype.toPrecondition=function(e){return v(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:g("Unknown precondition")},e.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?bt.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?bt.exists(e.exists):bt.NONE},e.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t),i=null;return e.transformResults&&e.transformResults.length>0&&(i=e.transformResults.map(function(e){return n.fromValue(e)})),new yt(r,i)},e.prototype.fromWriteResults=function(e,t){var n=this;return e&&e.length>0?(v(void 0!==t,"Received a write result without a commit time"),e.map(function(e){return n.fromWriteResult(e,t)})):[]},e.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof ni)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ri)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof ii)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof oi)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw g("Unknown transform: "+e.transform)},e.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)v("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=ni.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new ri(r.map(function(e){return t.fromValue(e)}))}else if("removeAllFromArray"in e){r=e.removeAllFromArray.values||[];n=new ii(r.map(function(e){return t.fromValue(e)}))}else if("increment"in e){var i=this.fromValue(e.increment);v(i instanceof Nt,"NUMERIC_ADD transform requires a NumberValue"),n=new oi(i)}else g("Unknown transform proto: "+JSON.stringify(e));var o=ce.fromServerFormat(e.fieldPath);return new mt(o,n)},e.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},e.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;v(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return Vr.atPath(this.fromQueryPath(n))},e.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(v(n.length%2===0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(v(n.length%2!==0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return void 0!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},e.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){v(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new Vr(t,i,s,a,u,c,l)},e.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},e.prototype.toLabel=function(e){switch(e){case _n.Listen:return null;case _n.ExistenceFilterMismatch:return"existence-filter-mismatch";case _n.LimboResolution:return"limbo-document";default:return g("Unrecognized query purpose: "+e)}},e.prototype.toTarget=function(e){var t,n=e.query;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,e.resumeToken.length>0&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},e.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map(function(e){return e instanceof Hr?t.toUnaryOrFieldFilter(e):g("Unrecognized filter: "+JSON.stringify(e))});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},e.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return t.fromFilter(e)}).reduce(function(e,t){return e.concat(t)}):g("Unknown filter: "+JSON.stringify(e)):[]},e.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map(function(e){return t.toPropertyOrder(e)})},e.prototype.fromOrder=function(e){var t=this;return e.map(function(e){return t.fromPropertyOrder(e)})},e.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map(function(e){return t.toValue(e)})}},e.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map(function(e){return t.fromValue(e)});return new Jr(r,n)},e.prototype.toDirection=function(e){return ui[e.name]},e.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return $r.ASCENDING;case"DESCENDING":return $r.DESCENDING;default:return}},e.prototype.toOperatorName=function(e){return ci[e.name]},e.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return zr.EQUAL;case"GREATER_THAN":return zr.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return zr.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return zr.LESS_THAN;case"LESS_THAN_OR_EQUAL":return zr.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return zr.ARRAY_CONTAINS;case"IN":return zr.IN;case"ARRAY_CONTAINS_ANY":return zr.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return g("Unspecified operator");default:return g("Unknown operator")}},e.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},e.prototype.fromFieldPathReference=function(e){return ce.fromServerFormat(e.fieldPath)},e.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},e.prototype.fromPropertyOrder=function(e){return new Zr(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},e.prototype.fromFieldFilter=function(e){return Hr.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},e.prototype.toUnaryOrFieldFilter=function(e){if(e.op===zr.EQUAL){if(e.value.isEqual(Dt.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}};if(e.value.isEqual(It.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},e.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return Hr.create(t,zr.EQUAL,Dt.NAN);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return Hr.create(n,zr.EQUAL,It.INSTANCE);case"OPERATOR_UNSPECIFIED":return g("Unspecified filter");default:return g("Unknown filter")}},e.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}},e.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map(function(e){return ce.fromServerFormat(e)});return dt.fromArray(t)},e}(),di=function(){return function(){this.viewSnap=null,this.targetId=0,this.listeners=[]}}(),mi=function(){function e(e){this.syncEngine=e,this.queries=new Ht(function(e){return e.canonicalId()}),this.onlineState=fr.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}return e.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);(r||(n=!0,r=new di,this.queries.set(t,r)),r.listeners.push(e),v(!e.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.viewSnap)&&(e.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent());return n?this.syncEngine.listen(t).then(function(e){return r.targetId=e,e}):Promise.resolve(r.targetId)},e.prototype.unlisten=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n,r,i;return s.__generator(this,function(o){return t=e.query,n=!1,(r=this.queries.get(t))&&(i=r.listeners.indexOf(e))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]})})},e.prototype.onWatchChange=function(e){for(var t=!1,n=0,r=e;n<r.length;n++){var i=r[n],o=i.query,a=this.queries.get(o);if(a){for(var s=0,u=a.listeners;s<u.length;s++){u[s].onViewSnapshot(i)&&(t=!0)}a.viewSnap=i}}t&&this.raiseSnapshotsInSyncEvent()},e.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++){i[r].onError(t)}this.queries.delete(e)},e.prototype.onOnlineStateChange=function(e){this.onlineState=e;var t=!1;this.queries.forEach(function(n,r){for(var i=0,o=r.listeners;i<o.length;i++){o[i].applyOnlineStateChange(e)&&(t=!0)}}),t&&this.raiseSnapshotsInSyncEvent()},e.prototype.addSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.add(e),e.next()},e.prototype.removeSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.delete(e)},e.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach(function(e){e.next()})},e}(),yi=function(){function e(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=fr.Unknown,this.options=n||{}}return e.prototype.onViewSnapshot=function(e){if(v(e.docChanges.length>0||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==Sr.Metadata&&t.push(i)}e=new Nr(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),o=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),o=!0),this.snap=e,o},e.prototype.onError=function(e){this.queryObserver.error(e)},e.prototype.applyOnlineStateChange=function(e){this.onlineState=e;var t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t},e.prototype.shouldRaiseInitialEvent=function(e,t){if(v(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==fr.Offline;return this.options.waitForSyncWhenOnline&&n?(v(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===fr.Offline},e.prototype.shouldRaiseEvent=function(e){if(e.docChanges.length>0)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.raiseInitialEvent=function(e){v(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=Nr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},e}(),gi=function(){function e(e,t,n){this.targetId=e,this.addedKeys=t,this.removedKeys=n}return e.fromSnapshot=function(t,n){for(var r=Ue(),i=Ue(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case Sr.Added:r=r.add(s.doc.key);break;case Sr.Removed:i=i.add(s.doc.key)}}return new e(t,r,i)},e}(),vi=function(){return function(e){this.key=e}}(),bi=function(){return function(e){this.key=e}}(),wi=function(){function e(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=Ue(),this.mutatedKeys=Ue(),this.documentSet=new kr(e.docComparator.bind(e))}return Object.defineProperty(e.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),e.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new xr,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(e.inorderTraversal(function(e,t){var c=i.get(e),l=t instanceof Vt?t:null;l&&(v(e.isEqual(l.key),"Mismatching keys found in document changes: "+e+" != "+l.key),l=n.query.matches(l)?l:null);var h=!!c&&n.mutatedKeys.has(c.key),f=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),p=!1;c&&l?c.data().isEqual(l.data())?h!==f&&(r.track({type:Sr.Metadata,doc:l}),p=!0):n.shouldWaitForSyncedDocument(c,l)||(r.track({type:Sr.Modified,doc:l}),p=!0,u&&n.query.docComparator(l,u)>0&&(s=!0)):!c&&l?(r.track({type:Sr.Added,doc:l}),p=!0):c&&!l&&(r.track({type:Sr.Removed,doc:c}),p=!0,u&&(s=!0));p&&(l?(a=a.add(l),o=f?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))}),this.query.hasLimit())for(;a.size>this.query.limit;){var c=a.last();a=a.delete(c.key),o=o.delete(c.key),r.track({type:Sr.Removed,doc:c})}return v(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},e.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this;v(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort(function(e,t){return function(e,t){var n=function(e){switch(e){case Sr.Added:return 1;case Sr.Modified:case Sr.Metadata:return 2;case Sr.Removed:return 0;default:return g("Unknown ChangeType: "+e)}};return n(e)-n(t)}(e.type,t.type)||r.query.docComparator(e.doc,t.doc)}),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Cr.Synced:Cr.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new Nr(this.query,e.documentSet,i,o,e.mutatedKeys,s===Cr.Local,u,!1),limboChanges:a}:{limboChanges:a}},e.prototype.applyOnlineStateChange=function(e){return this.current&&e===fr.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new xr,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},e.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&(!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations)},e.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.add(e)}),e.modifiedDocuments.forEach(function(e){return v(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")}),e.removedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)}),this.current=e.current)},e.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=Ue(),this.documentSet.forEach(function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))});var n=[];return t.forEach(function(t){e.limboDocuments.has(t)||n.push(new bi(t))}),this.limboDocuments.forEach(function(e){t.has(e)||n.push(new vi(e))}),n},e.prototype.synchronizeWithPersistedState=function(e,t){this._syncedDocuments=t,this.limboDocuments=Ue();var n=this.computeDocChanges(e);return this.applyChanges(n,!0)},e.prototype.computeInitialSnapshot=function(){return Nr.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Cr.Local)},e}();var _i=5,Ei=function(){function e(e,t,n,r){this.asyncQueue=e,this.remoteStore=t,this.updateFunction=n,this.deferred=r,this.retries=_i,this.backoff=new hr(this.asyncQueue,Z.RetryTransaction)}return e.prototype.run=function(){this.runWithBackOff()},e.prototype.runWithBackOff=function(){var e=this;this.backoff.backoffAndRun(function(){return s.__awaiter(e,void 0,void 0,function(){var e,t,n=this;return s.__generator(this,function(r){return e=this.remoteStore.createTransaction(),(t=this.tryRunUpdateFunction(e))&&t.then(function(t){n.asyncQueue.enqueueAndForget(function(){return e.commit().then(function(){n.deferred.resolve(t)}).catch(function(e){n.handleTransactionError(e)})})}).catch(function(e){n.handleTransactionError(e)}),[2]})})})},e.prototype.tryRunUpdateFunction=function(e){try{var t=this.updateFunction(e);return!or(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(m){return this.deferred.reject(m),null}},e.prototype.handleTransactionError=function(e){var t=this;this.retries>0&&this.isRetryableTransactionError(e)?(this.retries-=1,this.asyncQueue.enqueueAndForget(function(){return t.runWithBackOff(),Promise.resolve()})):this.deferred.reject(e)},e.prototype.isRetryableTransactionError=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!_r(t)}return!1},e}(),Ti=function(){return function(e,t,n){this.query=e,this.targetId=t,this.view=n}}(),Si=function(){return function(e){this.key=e,this.receivedDocument=!1}}(),Ci=function(){function e(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Ht(function(e){return e.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new Se(le.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Hn,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=Ze.forSyncEngine(),this.isPrimary=void 0,this.onlineState=fr.Unknown}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){v(null!==e,"SyncEngine listener cannot be null"),v(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},e.prototype.listen=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o;return s.__generator(this,function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(e)];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}})})},e.prototype.initializeViewAndComputeSnapshot=function(e,t){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,u,c,l;return s.__generator(this,function(s){switch(s.label){case 0:return n=e.query,[4,this.localStore.executeQuery(n)];case 1:return r=s.sent(),[4,this.localStore.remoteDocumentKeys(e.targetId)];case 2:return i=s.sent(),o=new wi(n,i),a=o.computeDocChanges(r),u=Or.createSynthesizedTargetChangeForCurrentChange(e.targetId,t&&this.onlineState!==fr.Offline),v(0===(c=o.applyChanges(a,!0===this.isPrimary,u)).limboChanges.length,"View returned limbo docs before target ack from the server."),v(!!c.snapshot,"applyChanges for new view should always return a snapshot"),l=new Ti(n,e.targetId,o),this.queryViewsByQuery.set(n,l),this.queryViewsByTarget[e.targetId]=l,[2,c.snapshot]}})})},e.prototype.synchronizeViewAndComputeSnapshot=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n,r;return s.__generator(this,function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(e.query)];case 1:return t=i.sent(),[4,this.localStore.remoteDocumentKeys(e.targetId)];case 2:return n=i.sent(),r=e.view.synchronizeWithPersistedState(t,n),this.isPrimary&&this.updateTrackedLimbos(e.targetId,r.limboChanges),[2,r]}})})},e.prototype.unlisten=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n=this;return s.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("unlisten()"),v(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseQuery(e,!1).then(function(){n.sharedClientState.clearQueryState(t.targetId),n.remoteStore.unlisten(t.targetId),n.removeAndCleanupQuery(t)}).catch(jn)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(t),[4,this.localStore.releaseQuery(e,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}})})},e.prototype.write=function(e,t){return s.__awaiter(this,void 0,void 0,function(){var n;return s.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}})})},e.prototype.runTransaction=function(e,t,n){new Ei(e,this.remoteStore,t,n).run()},e.prototype.applyRemoteEvent=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n=this;return s.__generator(this,function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=r.sent(),I(e.targetChanges,function(e,t){var r=n.limboResolutionsByTarget[Number(e)];r&&(v(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),t.addedDocuments.size>0?r.receivedDocument=!0:t.modifiedDocuments.size>0?v(r.receivedDocument,"Received change for limbo target document without add."):t.removedDocuments.size>0&&(v(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))}),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return r.sent(),[3,6];case 4:return[4,jn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},e.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===pr.RemoteStore||!this.isPrimary&&t===pr.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach(function(t,r){var i=r.view.applyOnlineStateChange(e);v(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)}),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},e.prototype.rejectListen=function(e,t){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,u,c=this;return s.__generator(this,function(s){switch(s.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),n=this.limboResolutionsByTarget[e],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=(i=new Se(le.comparator)).insert(r,new Wt(r,Te.forDeletedDoc())),o=Ue().add(r),a=new Ar(Te.MIN,{},new xe(G),i,o),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return v(!!(u=this.queryViewsByTarget[e]),"Unknown targetId: "+e),[4,this.localStore.releaseQuery(u.query,!1).then(function(){return c.removeAndCleanupQuery(u)}).catch(jn)];case 2:s.sent(),this.syncEngineListener.onWatchError(u.query,t),s.label=3;case 3:return[2]}})})},e.prototype.applyBatchState=function(e,t,n){return s.__awaiter(this,void 0,void 0,function(){var r;return s.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=i.sent())?(d("SyncEngine","Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):g("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}})})},e.prototype.applySuccessfulWrite=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n;return s.__generator(this,function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),t=e.batch.batchId,this.processUserCallback(t,null),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,jn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},e.prototype.rejectFailedWrite=function(e,t){return s.__awaiter(this,void 0,void 0,function(){var n;return s.__generator(this,function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"rejected",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,jn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},e.prototype.registerPendingWritesCallback=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n;return s.__generator(this,function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||d("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(t=r.sent())?(e.resolve(),[2]):((n=this.pendingWritesCallbacks.get(t)||[]).push(e),this.pendingWritesCallbacks.set(t,n),[2])}})})},e.prototype.triggerPendingWritesCallbacks=function(e){(this.pendingWritesCallbacks.get(e)||[]).forEach(function(e){e.resolve()}),this.pendingWritesCallbacks.delete(e)},e.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach(function(t){t.forEach(function(t){t.reject(new E(_.CANCELLED,e))})}),this.pendingWritesCallbacks.clear()},e.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new Se(G)),n=n.insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},e.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(v(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},e.prototype.removeAndCleanupQuery=function(e){var t=this;if(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.queryViewsByQuery.delete(e.query),delete this.queryViewsByTarget[e.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(e.targetId);this.limboDocumentRefs.removeReferencesForId(e.targetId),n.forEach(function(e){t.limboDocumentRefs.containsKey(e)||t.removeLimboTarget(e)})}},e.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},e.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i instanceof vi)this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i);else if(i instanceof bi){d("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)}else g("Unknown limbo change: "+JSON.stringify(i))}},e.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){d("SyncEngine","New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=Vr.atPath(t.path);this.limboResolutionsByTarget[n]=new Si(t),this.remoteStore.listen(new Cn(r,n,_n.LimboResolution,oe.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},e.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},e.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o=this;return s.__generator(this,function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach(function(a,s){i.push(Promise.resolve().then(function(){var t=s.view.computeDocChanges(e);return t.needsRefill?o.localStore.executeQuery(s.query).then(function(e){return s.view.computeDocChanges(e,t)}):t}).then(function(e){var i=t&&t.targetChanges[s.targetId],a=s.view.applyChanges(e,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=gi.fromSnapshot(s.targetId,a.snapshot);r.push(u)}}))}),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}})})},e.prototype.assertSubscribed=function(e){v(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},e.prototype.handleCredentialChange=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n;return s.__generator(this,function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(e)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},e.prototype.applyPrimaryState=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a,u,c=this;return s.__generator(this,function(s){switch(s.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return s.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=s.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,a=[],u=Promise.resolve(),k(this.queryViewsByTarget,function(e,t){c.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return c.unlisten(t.query)}),c.remoteStore.unlisten(t.targetId)}),[4,u]);case 4:return s.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)];case 5:return s.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:s.sent(),s.label=7;case 7:return[2]}})})},e.prototype.resetLimboDocuments=function(){var e=this;k(this.limboResolutionsByTarget,function(t){e.remoteStore.unlisten(t)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new Se(le.comparator)},e.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a,u,c,l;return s.__generator(this,function(s){switch(s.label){case 0:t=[],n=[],r=0,i=e,s.label=1;case 1:return r<i.length?(o=i[r],a=void 0,(u=this.queryViewsByTarget[o])?[4,this.localStore.releaseQuery(u.query,!0)]:[3,5]):[3,11];case 2:return s.sent(),[4,this.localStore.allocateQuery(u.query)];case 3:return a=s.sent(),[4,this.synchronizeViewAndComputeSnapshot(u)];case 4:return(c=s.sent()).snapshot&&n.push(c.snapshot),[3,9];case 5:return v(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(o)];case 6:return v(!!(l=s.sent()),"Query data for target "+o+" not found"),[4,this.localStore.allocateQuery(l)];case 7:return a=s.sent(),[4,this.initializeViewAndComputeSnapshot(a,!1)];case 8:s.sent(),s.label=9;case 9:t.push(a),s.label=10;case 10:return r++,[3,1];case 11:return this.syncEngineListener.onWatchChange(n),[2,t]}})})},e.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},e.prototype.applyTargetState=function(e,t,n){return s.__awaiter(this,void 0,void 0,function(){var r,i,o,a,u;return s.__generator(this,function(s){switch(s.label){case 0:if(this.isPrimary)return d("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[e])return[3,11];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,8]}return[3,10];case 1:return s.trys.push([1,4,,8]),[4,this.localStore.getNewDocumentChanges()];case 2:return r=s.sent(),i=Ar.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return s.sent(),[3,11];case 4:return o=s.sent(),(c=o).code!==_.DATA_LOSS||c.message!==Qt?[3,6]:(a=[],k(this.queryViewsByTarget,function(e){return a.push(e)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)]);case 5:return s.sent(),[3,7];case 6:throw o;case 7:return[3,8];case 8:return u=this.queryViewsByTarget[e],this.removeAndCleanupQuery(u),[4,this.localStore.releaseQuery(u.query,!0)];case 9:return s.sent(),this.syncEngineListener.onWatchError(u.query,n),[3,11];case 10:g("Unexpected target state: "+t),s.label=11;case 11:return[2]}var c})})},e.prototype.applyActiveTargetsChange=function(e,t){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,u,c,l,h,f=this;return s.__generator(this,function(p){switch(p.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,p.label=1;case 1:return n<r.length?(h=r[n],v(!this.queryViewsByTarget[h],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(h)]):[3,6];case 2:return v(!!(i=p.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateQuery(i)];case 3:return o=p.sent(),[4,this.initializeViewAndComputeSnapshot(o,!1)];case 4:p.sent(),this.remoteStore.listen(o),p.label=5;case 5:return n++,[3,1];case 6:a=function(e){var t;return s.__generator(this,function(n){switch(n.label){case 0:return(t=u.queryViewsByTarget[e])?[4,u.localStore.releaseQuery(t.query,!1).then(function(){f.remoteStore.unlisten(e),f.removeAndCleanupQuery(t)}).catch(jn)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},u=this,c=0,l=t,p.label=7;case 7:return c<l.length?(h=l[c],[5,a(h)]):[3,10];case 8:p.sent(),p.label=9;case 9:return c++,[3,7];case 10:return[2]}})})},e.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},e.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},e.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];return t&&t.receivedDocument?Ue().add(t.key):this.queryViewsByTarget[e]?this.queryViewsByTarget[e].view.syncedDocuments:Ue()},e}(),ki=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e.UNAUTHENTICATED=new e(null),e.GOOGLE_CREDENTIALS=new e("google-credentials-uid"),e.FIRST_PARTY=new e("first-party-uid"),e}(),Ii="SharedClientState",xi="firestore_clients",Ni="firestore_mutations",Ai="firestore_targets",Oi="firestore_online_state",Di="firestore_sequence_number",Ri=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r,v(void 0!==r===("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n,r){var i=JSON.parse(r),o="object"===typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"===typeof i.error),a=void 0;return o&&i.error&&(o="string"===typeof i.error.message&&"string"===typeof i.error.code)&&(a=new E(i.error.code,i.error.message)),o?new e(t,n,i.state,a):(m(Ii,"Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Pi=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n,v(void 0!==n===("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n){var r=JSON.parse(n),i="object"===typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"===typeof r.error),o=void 0;return i&&r.error&&(i="string"===typeof r.error.message&&"string"===typeof r.error.code)&&(o=new E(r.error.code,r.error.message)),i?new e(t,r.state,o):(m(Ii,"Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Mi=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.fromWebStorageEntry=function(t,n){for(var r=JSON.parse(n),i="object"===typeof r&&r.activeTargetIds instanceof Array,o=qe(),a=0;i&&a<r.activeTargetIds.length;++a)i=ar(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(m(Ii,"Failed to parse client data for instance '"+t+"': "+n),null)},e}(),Li=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.fromWebStorageEntry=function(t){var n=JSON.parse(t);return"object"===typeof n&&n.onlineState in fr&&"string"===typeof n.clientId?new e(n.clientId,fr[n.onlineState]):(m(Ii,"Failed to parse online state: "+t),null)},e}(),Fi=function(){function e(){this.activeTargetIds=qe()}return e.prototype.addQueryTarget=function(e){v(!this.activeTargetIds.has(e),"Target with ID '"+e+"' already active."),this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),Ui=function(){function e(t,n,r,i,o){if(this.queue=t,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!e.isAvailable(this.platform))throw new E(_.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=Di+"_"+r,this.activeClients[this.localClientId]=new Fi,this.clientStateKeyRe=new RegExp("^"+xi+"_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Ni+"_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Ai+"_"+a+"_(\\d+)$"),this.onlineStateKey=Oi+"_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return e.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},e.prototype.start=function(){return s.__awaiter(this,void 0,void 0,function(){var e,t,n,r,i,o,a,u,c,l,h,f=this;return s.__generator(this,function(s){switch(s.label){case 0:return v(!this.started,"WebStorageSharedClientState already started"),v(null!==this.syncEngine,"syncEngine property must be set before calling start()"),v(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=s.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(o=Mi.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(u),c=0,l=this.earlyEvents;c<l.length;c++)h=l[c],this.handleWebStorageEvent(h);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return f.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){var e=qe();return I(this.activeClients,function(t,n){e=e.unionWith(n.activeTargetIds)}),e},e.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},e.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(e));if(n){var r=Pi.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},e.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},e.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(this.toWebStorageQueryTargetMetadataKey(e))},e.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach(function(e){r.removeMutationState(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})},e.prototype.setOnlineState=function(e){this.persistOnlineState(e)},e.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return d(Ii,"READ",e,t),t},e.prototype.setItem=function(e,t){d(Ii,"SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){d(Ii,"REMOVE",e),this.storage.removeItem(e)},e.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(d(Ii,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void m("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return s.__awaiter(t,void 0,void 0,function(){var t,n,r,i,o,a;return s.__generator(this,function(s){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(o=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(o)]}else e.key===this.sequenceNumberKey&&(v(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(e){var t=oe.INVALID;if(null!=e)try{var n=JSON.parse(e);v("number"===typeof n,"Found non-numeric sequence number"),t=n}catch(r){m(Ii,"Failed to read sequence number from WebStorage",r)}return t}(e.newValue))!==oe.INVALID&&this.sequenceNumberHandler(a));return[2]})})})}},Object.defineProperty(e.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),e.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},e.prototype.persistMutationState=function(e,t,n){var r=new Ri(this.currentUser,e,t,n),i=this.toWebStorageMutationBatchKey(e);this.setItem(i,r.toWebStorageJSON())},e.prototype.removeMutationState=function(e){var t=this.toWebStorageMutationBatchKey(e);this.removeItem(t)},e.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:fr[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},e.prototype.persistQueryTargetState=function(e,t,n){var r=this.toWebStorageQueryTargetMetadataKey(e),i=new Pi(e,t,n);this.setItem(r,i.toWebStorageJSON())},e.prototype.toWebStorageClientStateKey=function(e){return v(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),xi+"_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageQueryTargetMetadataKey=function(e){return Ai+"_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageMutationBatchKey=function(e){var t=Ni+"_"+this.persistenceKey+"_"+e;return this.currentUser.isAuthenticated()&&(t+="_"+this.currentUser.uid),t},e.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},e.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return v(null!==n,"Cannot parse client state key '"+e+"'"),Mi.fromWebStorageEntry(n,t)},e.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);v(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ri.fromWebStorageEntry(new ki(i),r,t)},e.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);v(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return Pi.fromWebStorageEntry(r,t)},e.prototype.fromWebStorageOnlineState=function(e){return Li.fromWebStorageEntry(e)},e.prototype.handleMutationBatchEvent=function(e){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return e.user.uid!==this.currentUser.uid?(d(Ii,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]})})},e.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},e.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach(function(e){return s.__awaiter(n,void 0,void 0,function(){return s.__generator(this,function(t){return r.has(e)||o.push(e),[2]})})}),r.forEach(function(e){return s.__awaiter(n,void 0,void 0,function(){return s.__generator(this,function(t){return i.has(e)||a.push(e),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,a)},e.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},e}();var ji=function(){function e(){this.localState=new Fi,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},e.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.queryState[e]},e.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.start=function(){return this.localState=new Fi,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e}(),qi=function(){function e(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}return e.prototype.lruParams=function(){return An.withCacheSize(this.cacheSizeBytes)},e}(),Bi=function(){return function(){}}(),Vi=function(){function e(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=Q.newId()}return e.prototype.start=function(e){var t=this;this.verifyNotTerminated();var n=new he,r=new he,i=!1;return this.credentials.setChangeListener(function(o){i?t.asyncQueue.enqueueAndForget(function(){return t.handleCredentialChange(o)}):(i=!0,t.initializePersistence(e,r,o).then(function(e){return t.initializeRest(o,e)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},e.prototype.enableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return e.syncEngine.enableNetwork()})},e.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof qi?this.startIndexedDbPersistence(n,e).then(function(e){return t.resolve(),e}).catch(function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()}):(t.resolve(),this.startMemoryPersistence())},e.prototype.canFallback=function(e){return e instanceof E?e.code===_.FAILED_PRECONDITION||e.code===_.UNIMPLEMENTED:!("undefined"!==typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new E(_.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=Un.buildStoragePrefix(this.databaseInfo),i=new pi(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return s.__awaiter(n,void 0,void 0,function(){var n,o;return s.__generator(this,function(a){switch(a.label){case 0:if(t.synchronizeTabs&&!Ui.isAvailable(this.platform))throw new E(_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=t.lruParams(),this.sharedClientState=t.synchronizeTabs?new Ui(this.asyncQueue,this.platform,r,this.clientId,e):new ji,[4,Un.createIndexedDbPersistence({allowTabSynchronization:t.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return o=a.sent(),this.persistence=o,[2,o.referenceDelegate.garbageCollector]}})})})},e.prototype.startMemoryPersistence=function(){return this.persistence=$n.createEagerPersistence(this.clientId),this.sharedClientState=new ji,Promise.resolve(null)},e.prototype.initializeRest=function(e,t){var n=this;return d("FirestoreClient","Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then(function(r){return s.__awaiter(n,void 0,void 0,function(){var n,i,o,a,u,c=this;return s.__generator(this,function(l){switch(l.label){case 0:return this.localStore=new Qn(this.persistence,e),t&&(this.lruScheduler=new On(t,this.asyncQueue,this.localStore)),n=this.platform.newConnectivityMonitor(),i=this.platform.newSerializer(this.databaseInfo.databaseId),o=new gr(this.asyncQueue,r,this.credentials,i),a=function(e){return c.syncEngine.applyOnlineStateChange(e,pr.RemoteStore)},u=function(e){return c.syncEngine.applyOnlineStateChange(e,pr.SharedClientState)},this.remoteStore=new qr(this.localStore,o,this.asyncQueue,a,n),this.syncEngine=new Ci(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=u,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new mi(this.syncEngine),[4,this.sharedClientState.start()];case 1:return l.sent(),[4,this.remoteStore.start()];case 2:return l.sent(),[4,this.persistence.setPrimaryStateListener(function(e){return s.__awaiter(c,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}})})})];case 3:return l.sent(),[4,this.persistence.setDatabaseDeletedListener(function(){return s.__awaiter(c,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}})})})];case 4:return l.sent(),[2]}})})})},e.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),d("FirestoreClient","Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},e.prototype.disableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return e.syncEngine.disableNetwork()})},e.prototype.terminate=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown(function(){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}})})})},e.prototype.waitForPendingWrites=function(){var e=this;this.verifyNotTerminated();var t=new he;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.registerPendingWritesCallback(t)}),t.promise},e.prototype.listen=function(e,t,n){var r=this;this.verifyNotTerminated();var i=new yi(e,t,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},e.prototype.unlisten=function(e){var t=this;this.clientTerminated||this.asyncQueue.enqueueAndForget(function(){return t.eventMgr.unlisten(e)})},e.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.localStore.readDocument(e)}).then(function(e){if(e instanceof Vt)return e;if(e instanceof Wt)return null;throw new E(_.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},e.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.localStore.executeQuery(e)}).then(function(t){var n=Ue(),r=new wi(e,n),i=r.computeDocChanges(t);return r.applyChanges(i,!1).snapshot})},e.prototype.write=function(e){var t=this;this.verifyNotTerminated();var n=new he;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.write(e,n)}),n.promise},e.prototype.databaseId=function(){return this.databaseInfo.databaseId},e.prototype.addSnapshotsInSyncListener=function(e){var t=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget(function(){return t.eventMgr.addSnapshotsInSyncListener(e),Promise.resolve()})},e.prototype.removeSnapshotsInSyncListener=function(e){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(e)},Object.defineProperty(e.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.transaction=function(e){var t=this;this.verifyNotTerminated();var n=new he;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.runTransaction(t.asyncQueue,e,n),Promise.resolve()}),n.promise},e}(),Wi=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)},e}(),zi=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e,t,n,r){if(!(t instanceof Array)||t.length<r)throw new E(_.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" argument to be an array with at least "+K(r,"element")+".")}("FieldPath",e,"fieldNames",1);for(var n=0;n<e.length;++n)if(R("FieldPath","string",n,e[n]),0===e[n].length)throw new E(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ce(e)}return e.documentId=function(){return e._DOCUMENT_ID},e.prototype.isEqual=function(t){if(!(t instanceof e))throw z("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},e._DOCUMENT_ID=new e(ce.keyField().canonicalString()),e}(),Hi=new RegExp("[~\\*/\\[\\]]");var Ki=function(){return function(e,t){this.user=t,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+e}}}(),Qi=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){v(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,e(ki.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){v(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},e}(),Gi=function(){function e(e){var t=this;this.app=e,this.tokenListener=null,this.currentUser=ki.UNAUTHENTICATED,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.changeListener&&t.changeListener(t.currentUser)},this.currentUser=this.getUser(),this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return e.prototype.getToken=function(){var e=this;v(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(e.tokenCounter!==t)throw new E(_.ABORTED,"getToken aborted due to token change.");return n?(v("string"===typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Ki(n.accessToken,e.currentUser)):null})},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){v(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,e(this.currentUser)},e.prototype.removeChangeListener=function(){v(null!=this.tokenListener,"removeChangeListener() called twice"),v(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},e.prototype.getUser=function(){var e=this.app.INTERNAL.getUid();return v(null===e||"string"===typeof e,"Received invalid UID: "+e),new ki(e)},e}(),Yi=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=ki.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),e}(),Xi=function(){function e(e,t){this.gapi=e,this.sessionIndex=t}return e.prototype.getToken=function(){return Promise.resolve(new Yi(this.gapi,this.sessionIndex))},e.prototype.setChangeListener=function(e){e(ki.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function $i(e){return function(e,t){if("object"!==typeof e||null===e)return!1;for(var n=e,r=0,i=t;r<i.length;r++){var o=i[r];if(o in n&&"function"===typeof n[o])return!0}return!1}(e,["next","error","complete"])}var Ji,Zi=function(){function e(e){this._methodName=e}return e.delete=function(){return N("FieldValue.delete",arguments),eo.instance},e.serverTimestamp=function(){return N("FieldValue.serverTimestamp",arguments),to.instance},e.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return O("FieldValue.arrayUnion",arguments,1),new no(e)},e.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return O("FieldValue.arrayRemove",arguments,1),new ro(e)},e.increment=function(e){return R("FieldValue.increment","number",1,e),A("FieldValue.increment",arguments,1),new io(e)},e.prototype.isEqual=function(e){return this===e},e}(),eo=function(e){function t(){return e.call(this,"FieldValue.delete")||this}return s.__extends(t,e),t.instance=new t,t}(Zi),to=function(e){function t(){return e.call(this,"FieldValue.serverTimestamp")||this}return s.__extends(t,e),t.instance=new t,t}(Zi),no=function(e){function t(t){var n=e.call(this,"FieldValue.arrayUnion")||this;return n._elements=t,n}return s.__extends(t,e),t}(Zi),ro=function(e){function t(t){var n=e.call(this,"FieldValue.arrayRemove")||this;return n._elements=t,n}return s.__extends(t,e),t}(Zi),io=function(e){function t(t){var n=e.call(this,"FieldValue.increment")||this;return n._operand=t,n}return s.__extends(t,e),t}(Zi),oo=T(Zi,"Use FieldValue.<field>() instead."),ao=/^__.*__$/,so=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new Et(e,this.data,this.fieldMask,t)):n.push(new _t(e,this.data,t)),this.fieldTransforms.length>0&&n.push(new Tt(e,this.fieldTransforms)),n},e}(),uo=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[new Et(e,this.data,this.fieldMask,t)];return this.fieldTransforms.length>0&&n.push(new Tt(e,this.fieldTransforms)),n},e}();function co(e){switch(e){case Ji.Set:case Ji.MergeSet:case Ji.Update:return!0;case Ji.Argument:return!1;default:throw g("Unexpected case for UserDataSource: "+e)}}!function(e){e[e.Set=0]="Set",e[e.Update=1]="Update",e[e.MergeSet=2]="MergeSet",e[e.Argument=3]="Argument"}(Ji||(Ji={}));var lo=function(){function e(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return e.prototype.childContextForField=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(t),r},e.prototype.childContextForFieldPath=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},e.prototype.childContextForArray=function(t){return new e(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},e.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new E(_.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},e.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},e.prototype.validatePathSegment=function(e){if(co(this.dataSource)&&ao.test(e))throw this.createError("Document fields cannot begin and end with __")},e}(),ho=function(){return function(e,t){this.databaseId=e,this.key=t}}(),fo=function(){function e(e){this.preConverter=e}return e.prototype.parseSetData=function(e,t){var n=new lo(Ji.Set,e,ce.EMPTY_PATH);mo("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new so(r,null,n.fieldTransforms)},e.prototype.parseMergeData=function(e,t,n){var r=new lo(Ji.MergeSet,e,ce.EMPTY_PATH);mo("Data must be an object, but it was:",r,t);var i,o,a=this.parseData(t,r);if(n){for(var s=new xe(ce.comparator),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof zi)h=l._internalPath;else{if("string"!==typeof l)throw g("Expected stringOrFieldPath to be a string or a FieldPath");h=go(e,l)}if(!r.contains(h))throw new E(_.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=dt.fromSet(s),o=r.fieldTransforms.filter(function(e){return i.covers(e.field)})}else i=dt.fromArray(r.fieldMask),o=r.fieldTransforms;return new so(a,i,o)},e.prototype.parseUpdateData=function(e,t){var n=this,r=new lo(Ji.Update,e,ce.EMPTY_PATH);mo("Data must be an object, but it was:",r,t);var i=new xe(ce.comparator),o=jt.EMPTY;I(t,function(t,a){var s=go(e,t),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof eo)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}});var a=dt.fromSet(i);return new uo(o,a,r.fieldTransforms)},e.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new lo(Ji.Update,e,ce.EMPTY_PATH),o=[yo(e,t)],a=[n];if(r.length%2!==0)throw new E(_.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(yo(e,r[s])),a.push(r[s+1]);var u=new xe(ce.comparator),c=jt.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),f=this.runPreConverter(a[s],h);if(f instanceof eo)u=u.add(l);else{var p=this.parseData(f,h);null!=p&&(u=u.add(l),c=c.set(l,p))}}var d=dt.fromSet(u);return new uo(c,d,i.fieldTransforms)},e.prototype.parseQueryValue=function(e,t){var n=new lo(Ji.Argument,e,ce.EMPTY_PATH),r=this.parseData(t,n);return v(null!=r,"Parsed data should not be null."),v(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},e.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(r){var n=vo(r);throw t.createError(n)}},e.prototype.parseData=function(e,t){if(po(e=this.runPreConverter(e,t)))return mo("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof Zi)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},e.prototype.parseObject=function(e,t){var n=this,r=new Se(G);return x(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):I(e,function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))}),new jt(r)},e.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=o[i],s=this.parseData(a,t.childContextForArray(r));null==s&&(s=It.INSTANCE),n.push(s),r++}return new qt(n)},e.prototype.parseSentinelFieldValue=function(e,t){if(!co(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof eo){if(t.dataSource!==Ji.MergeSet)throw t.dataSource===Ji.Update?(v(t.path.length>0,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof to)t.fieldTransforms.push(new mt(t.path,ni.instance));else if(e instanceof no){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new ri(n);t.fieldTransforms.push(new mt(t.path,r))}else if(e instanceof ro){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new ii(n);t.fieldTransforms.push(new mt(t.path,i))}else if(e instanceof io){var o=this.parseQueryValue("FieldValue.increment",e._operand),a=new oi(o);t.fieldTransforms.push(new mt(t.path,a))}else g("Unknown FieldValue type: "+e)},e.prototype.parseScalarValue=function(e,t){if(null===e)return It.INSTANCE;if("number"===typeof e)return ar(e)?new Ot(e):new Dt(e);if("boolean"===typeof e)return xt.of(e);if("string"===typeof e)return new Rt(e);if(e instanceof Date)return new Pt(Ee.fromDate(e));if(e instanceof Ee)return new Pt(new Ee(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof Br)return new Ut(e);if(e instanceof ee)return new Lt(e);if(e instanceof ho)return new Ft(e.databaseId,e.key);throw t.createError("Unsupported field value: "+B(e))},e.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map(function(t,r){var i=new lo(Ji.Argument,e,ce.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))})},e}();function po(e){return"object"===typeof e&&null!==e&&!(e instanceof Array)&&!(e instanceof Date)&&!(e instanceof Ee)&&!(e instanceof Br)&&!(e instanceof ee)&&!(e instanceof ho)&&!(e instanceof Zi)}function mo(e,t,n){if(!po(n)||!q(n)){var r=B(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function yo(e,t){if(t instanceof zi)return t._internalPath;if("string"===typeof t)return go(e,t);throw new E(_.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function go(e,t){try{return function(e){if(e.search(Hi)>=0)throw new E(_.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(zi.bind.apply(zi,[void 0].concat(e.split("."))))}catch(t){throw new E(_.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(r){var n=vo(r);throw new E(_.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function vo(e){return e instanceof Error?e.message:e.toString()}var bo="firestore.googleapis.com",wo=!0,_o=!0,Eo=!1,To=An.COLLECTION_DISABLED,So=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new E(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bo,this.ssl=wo}else M("settings","non-empty string","host",e.host),this.host=e.host,L("settings","boolean","ssl",e.ssl),this.ssl=C(e.ssl,wo);if(W("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),L("settings","object","credentials",e.credentials),this.credentials=e.credentials,L("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?m("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&m("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=C(e.timestampsInSnapshots,_o),L("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=An.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==To&&e.cacheSizeBytes<An.MINIMUM_CACHE_SIZE_BYTES)throw new E(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+An.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}L("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0===e.experimentalForceLongPolling?Eo:e.experimentalForceLongPolling}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},e}(),Co=function(){function e(t){var n=this;if(this._firebaseApp=null,this._queue=new pe,this.INTERNAL={delete:function(){return s.__awaiter(n,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return e.sent(),[2]}})})}},"object"===typeof t.options){var r=t;this._firebaseApp=r,this._databaseId=e.databaseIdFromApp(r),this._persistenceKey=r.name,this._credentials=new Gi(r)}else{var i=t;if(!i.projectId)throw new E(_.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new ie(i.projectId,i.database),this._persistenceKey="[DEFAULT]",this._credentials=new Qi}this._settings=new So({}),this._dataConverter=this.createDataConverter(this._databaseId)}return e.prototype.settings=function(e){if(A("Firestore.settings",arguments,1),R("Firestore.settings","object",1,e),S(e,"persistence"))throw new E(_.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new So(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new E(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._settings=t,void 0!==t.credentials&&(this._credentials=function(e){if(!e)return new Qi;switch(e.type){case"gapi":var t=e.client;return v(!("object"!==typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new Xi(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new E(_.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},e.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},e.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},e.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new E(_.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&m("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=C(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new qi(this._settings.cacheSizeBytes,t))},e.prototype.clearPersistence=function(){var e=this,t=Un.buildStoragePrefix(this.makeDatabaseInfo()),n=new he;return this._queue.enqueueAndForgetEvenAfterShutdown(function(){return s.__awaiter(e,void 0,void 0,function(){var e;return s.__generator(this,function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new E(_.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,Un.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(e.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),e.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},e.prototype._onSnapshotsInSync=function(e){if(this.ensureClientConfigured(),$i(e))return this.onSnapshotsInSyncInternal(e);R("Firestore.onSnapshotsInSync","function",1,e);var t={next:e};return this.onSnapshotsInSyncInternal(t)},e.prototype.onSnapshotsInSyncInternal=function(e){var t=this,n=new Wi({next:function(){e.next&&e.next()},error:function(e){throw g("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),t._firestoreClient.removeSnapshotsInSyncListener(n)}},e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Bi),this._firestoreClient},e.prototype.makeDatabaseInfo=function(){return new ne(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},e.prototype.configureClient=function(e){v(!!this._settings.host,"FirestoreSettings.host is not set"),v(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._firestoreClient=new Vi(b.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},e.prototype.createDataConverter=function(e){return new fo(function(t){if(t instanceof xo){var n=e,r=t.firestore._databaseId;if(!r.isEqual(n))throw new E(_.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new ho(e,t._key)}return t})},e.databaseIdFromApp=function(e){var t=e.options;if(!S(t,"projectId"))throw new E(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!==typeof n)throw new E(_.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new ie(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this._firebaseApp)throw new E(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){return A("Firestore.collection",arguments,1),R("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new Po(se.fromString(e),this)},e.prototype.doc=function(e){return A("Firestore.doc",arguments,1),R("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),xo.forPath(se.fromString(e),this)},e.prototype.collectionGroup=function(e){if(A("Firestore.collectionGroup",arguments,1),R("Firestore.collectionGroup","non-empty string",1,e),e.indexOf("/")>=0)throw new E(_.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new Do(new Vr(se.EMPTY_PATH,e),this)},e.prototype.runTransaction=function(e){var t=this;return A("Firestore.runTransaction",arguments,1),R("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction(function(n){return e(new ko(t,n))})},e.prototype.batch=function(){return this.ensureClientConfigured(),new Io(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(f()){case i.DEBUG:return"debug";case i.ERROR:return"error";case i.SILENT:return"silent";default:return g("Unknown log level: "+f())}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(A("Firestore.setLogLevel",arguments,1),R("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":p(i.DEBUG);break;case"error":p(i.ERROR);break;case"silent":p(i.SILENT);break;default:throw new E(_.INVALID_ARGUMENT,"Invalid log level: "+e)}},e.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},e}(),ko=function(){function e(e,t){this._firestore=e,this._transaction=t}return e.prototype.get=function(e){var t=this;A("Transaction.get",arguments,1);var n=Uo("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return g("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof Wt)return new Ao(t._firestore,n._key,null,!1,!1);if(r instanceof Vt)return new Ao(t._firestore,n._key,r,!1,!1);throw g("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)})},e.prototype.set=function(e,t,n){D("Transaction.set",arguments,2,3);var r=Uo("Transaction.set",e,this._firestore),i=(n=Mo("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",t);return this._transaction.set(r._key,i),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"===typeof t||t instanceof zi?(O("Transaction.update",arguments,3),r=Uo("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(A("Transaction.update",arguments,2),r=Uo("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},e.prototype.delete=function(e){A("Transaction.delete",arguments,1);var t=Uo("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},e}(),Io=function(){function e(e){this._firestore=e,this._mutations=[],this._committed=!1}return e.prototype.set=function(e,t,n){D("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Uo("WriteBatch.set",e,this._firestore),i=(n=Mo("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",t);return this._mutations=this._mutations.concat(i.toMutations(r._key,bt.NONE)),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),"string"===typeof t||t instanceof zi?(O("WriteBatch.update",arguments,3),r=Uo("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(A("WriteBatch.update",arguments,2),r=Uo("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,bt.exists(!0))),this},e.prototype.delete=function(e){A("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=Uo("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new St(t._key,bt.NONE)),this},e.prototype.commit=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},e.prototype.verifyNotCommitted=function(){if(this._committed)throw new E(_.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),xo=function(){function e(e,t){this._key=e,this.firestore=t,this._firestoreClient=this.firestore.ensureClientConfigured()}return e.forPath=function(t,n){if(t.length%2!==0)throw new E(_.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(new le(t),n)},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Po(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(A("DocumentReference.collection",arguments,1),R("DocumentReference.collection","non-empty string",1,e),!e)throw new E(_.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=se.fromString(e);return new Po(this._key.path.child(t),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw z("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)},e.prototype.set=function(e,t){D("DocumentReference.set",arguments,1,2);var n=(t=Mo("DocumentReference.set",t)).merge||t.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",e,t.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",e);return this._firestoreClient.write(n.toMutations(this._key,bt.NONE))},e.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"===typeof e||e instanceof zi?(O("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(A("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,bt.exists(!0)))},e.prototype.delete=function(){return A("DocumentReference.delete",arguments,0),this._firestoreClient.write([new St(this._key,bt.NONE)])},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];D("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!==typeof e[i]||$i(e[i])||(W("DocumentReference.onSnapshot",r=e[i],["includeMetadataChanges"]),L("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return $i(e[i])?n=e[i]:(R("DocumentReference.onSnapshot","function",i,e[i]),P("DocumentReference.onSnapshot","function",i+1,e[i+1]),P("DocumentReference.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Wi({next:function(e){if(t.next){v(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new Ao(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(Vr.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},e.prototype.get=function(e){var t=this;return D("DocumentReference.get",arguments,0,1),Fo("DocumentReference.get",e),new Promise(function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then(function(e){n(new Ao(t.firestore,t._key,e,!0,e instanceof Vt&&e.hasLocalMutations))},r):t.getViaSnapshotListener(n,r,e)})},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new E(_.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new E(_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},e}(),No=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Ao=function(){function e(e,t,n,r,i){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return e.prototype.data=function(e){return D("DocumentSnapshot.data",arguments,0,1),e=Lo("DocumentSnapshot.data",e),this._document?this.convertObject(this._document.data(),Ct.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},e.prototype.get=function(e,t){if(D("DocumentSnapshot.get",arguments,1,2),t=Lo("DocumentSnapshot.get",t),this._document){var n=this._document.data().field(yo("DocumentSnapshot.get",e));if(null!==n)return this.convertValue(n,Ct.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new xo(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new No(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw z("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))},e.prototype.convertObject=function(e,t){var n=this,r={};return e.forEach(function(e,i){r[e]=n.convertValue(i,t)}),r},e.prototype.convertValue=function(e,t){if(e instanceof jt)return this.convertObject(e,t);if(e instanceof qt)return this.convertArray(e,t);if(e instanceof Ft){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||m("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new xo(n,this._firestore)}return e.value(t)},e.prototype.convertArray=function(e,t){var n=this;return e.internalValue.map(function(e){return n.convertValue(e,t)})},e}(),Oo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.data=function(t){var n=e.prototype.data.call(this,t);return v("object"===typeof n,"Document in a QueryDocumentSnapshot should exist"),n},t}(Ao),Do=function(){function e(e,t){this._query=e,this.firestore=t}return e.prototype.where=function(t,n,r){if(A("Query.where",arguments,3),V("Query.where",3,r),"in"!==n&&"array-contains-any"!==n){!function(e,t,n,r){if(!t.some(function(e){return e===r}))throw new E(_.INVALID_ARGUMENT,"Invalid value "+B(r)+" provided to function "+e+"() for its "+H(n)+" argument. Acceptable values: "+t.join(", "))}("Query.where",["<","<=","==",">=",">","array-contains"],2,n)}var i,o=yo("Query.where",t),a=zr.fromString(n);if(o.isKeyField()){if(a===zr.ARRAY_CONTAINS||a===zr.ARRAY_CONTAINS_ANY)throw new E(_.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+a.toString()+"' queries on FieldPath.documentId().");if(a===zr.IN){this.validateDisjunctiveFilterElements(r,a);for(var s=[],u=0,c=r;u<c.length;u++){var l=c[u];s.push(this.parseDocumentIdValue(l))}i=new qt(s)}else i=this.parseDocumentIdValue(r)}else a!==zr.IN&&a!==zr.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,a),i=this.firestore._dataConverter.parseQueryValue("Query.where",r);var h=Hr.create(o,a,i);return this.validateNewFilter(h),new e(this._query.addFilter(h),this.firestore)},e.prototype.orderBy=function(t,n){var r;if(D("Query.orderBy",arguments,1,2),P("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=$r.ASCENDING;else{if("desc"!==n)throw new E(_.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=$r.DESCENDING}if(null!==this._query.startAt)throw new E(_.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new E(_.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=yo("Query.orderBy",t),o=new Zr(i,r);return this.validateNewOrderBy(o),new e(this._query.addOrderBy(o),this.firestore)},e.prototype.limit=function(t){if(A("Query.limit",arguments,1),R("Query.limit","number",1,t),t<=0)throw new E(_.INVALID_ARGUMENT,"Invalid Query. Query limit ("+t+") is invalid. Limit must be positive.");return new e(this._query.withLimit(t),this.firestore)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];O("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",t,n,!0);return new e(this._query.withStartAt(i),this.firestore)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];O("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",t,n,!1);return new e(this._query.withStartAt(i),this.firestore)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];O("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",t,n,!0);return new e(this._query.withEndAt(i),this.firestore)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];O("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",t,n,!1);return new e(this._query.withEndAt(i),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw z("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},e.prototype.boundFromDocOrFields=function(e,t,n,r){if(V(e,1,t),t instanceof Ao){if(n.length>0)throw new E(_.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new E(_.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},e.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new Ft(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(s instanceof Mt)throw new E(_.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.canonicalString();throw new E(_.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new Jr(r,n)},e.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new E(_.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var a=t[o];if(r[o].field.isKeyField()){if("string"!==typeof a)throw new E(_.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new E(_.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(se.fromString(a));if(!le.isDocumentKey(s))throw new E(_.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new le(s);i.push(new Ft(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(e,a);i.push(c)}}return new Jr(i,n)},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];D("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!==typeof e[i]||$i(e[i])||(W("Query.onSnapshot",r=e[i],["includeMetadataChanges"]),L("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),$i(e[i])?n=e[i]:(R("Query.onSnapshot","function",i,e[i]),P("Query.onSnapshot","function",i+1,e[i+1]),P("Query.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(r,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Wi({next:function(e){t.next&&t.next(new Ro(n.firestore,n._query,e))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(a)}},e.prototype.get=function(e){var t=this;return D("Query.get",arguments,0,1),Fo("Query.get",e),new Promise(function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then(function(e){n(new Ro(t.firestore,t._query,e))},r):t.getViaSnapshotListener(n,r,e)})},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new E(_.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},e.prototype.parseDocumentIdValue=function(e){if("string"===typeof e){if(""===e)throw new E(_.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new E(_.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var t=this._query.path.child(se.fromString(e));if(!le.isDocumentKey(t))throw new E(_.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+t+"' is not because it has an odd number of segments ("+t.length+").");return new Ft(this.firestore._databaseId,new le(t))}if(e instanceof xo){var n=e;return new Ft(this.firestore._databaseId,n._key)}throw new E(_.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+B(e)+".")},e.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new E(_.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new E(_.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(e.indexOf(null)>=0)throw new E(_.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(e.filter(function(e){return Number.isNaN(e)}).length>0)throw new E(_.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},e.prototype.validateNewFilter=function(e){if(e instanceof Hr){var t=[zr.ARRAY_CONTAINS,zr.ARRAY_CONTAINS_ANY],n=[zr.IN,zr.ARRAY_CONTAINS_ANY],r=t.indexOf(e.op)>=0,i=n.indexOf(e.op)>=0;if(e.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(e.field))throw new E(_.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+e.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(e.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(t)),null!=s)throw s===e.op?new E(_.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new E(_.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},e.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},e.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new E(_.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},e}(),Ro=function(){function e(e,t,n){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new No(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;D("QuerySnapshot.forEach",arguments,1,2),R("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach(function(r){e.call(t,n.convertToDocumentImpl(r))})},Object.defineProperty(e.prototype,"query",{get:function(){return new Do(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),e.prototype.docChanges=function(e){e&&(W("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),L("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new E(_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map(function(t){var o=new Oo(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key));return v(t.type===Sr.Added,"Invalid event type for first snapshot"),v(!r||n.query.docComparator(r,t.doc)<0,"Got added events in wrong order"),r=t.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}var o=n.oldDocs;return n.docChanges.filter(function(e){return t||e.type!==Sr.Metadata}).map(function(t){var r=new Oo(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key)),i=-1,a=-1;return t.type!==Sr.Added&&(v((i=o.indexOf(t.doc.key))>=0,"Index for document not found"),o=o.delete(t.doc.key)),t.type!==Sr.Removed&&(o=o.add(t.doc),a=o.indexOf(t.doc.key)),{type:jo(t.type),doc:r,oldIndex:i,newIndex:a}})}(this._firestore,t,this._snapshot),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e.prototype.isEqual=function(t){if(!(t instanceof e))throw z("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)},e.prototype.convertToDocumentImpl=function(e){return new Oo(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key))},e}();["length","forEach","map"].concat("undefined"!==typeof Symbol?[Symbol.iterator]:[]).forEach(function(e){try{Object.defineProperty(Ro.prototype.docChanges,e,{get:function(){return function(){throw new E(_.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}});var Po=function(e){function t(t,n){var r=e.call(this,Vr.atPath(t),n)||this;if(t.length%2!==1)throw new E(_.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return r}return s.__extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new xo(new le(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){if(D("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=Q.newId()),R("CollectionReference.doc","non-empty string",1,e),""===e)throw new E(_.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=se.fromString(e);return xo.forPath(this._query.path.child(t),this.firestore)},t.prototype.add=function(e){A("CollectionReference.add",arguments,1),R("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then(function(){return t})},t}(Do);function Mo(e,t){if(void 0===t)return{merge:!1};if(W(e,t,["merge","mergeFields"]),L(e,"boolean","merge",t.merge),F(e,"mergeFields","a string or a FieldPath",t.mergeFields,function(e){return"string"===typeof e||e instanceof zi}),void 0!==t.mergeFields&&void 0!==t.merge)throw new E(_.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function Lo(e,t){return void 0===t?{}:(W(e,t,["serverTimestamps"]),U(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function Fo(e,t){P(e,"object",1,t),t&&(W(e,t,["source"]),U(e,0,"source",t.source,["default","server","cache"]))}function Uo(e,t,n){if(t instanceof xo){if(t.firestore!==n)throw new E(_.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw z(e,"DocumentReference",1,t)}function jo(e){switch(e){case Sr.Added:return"added";case Sr.Modified:case Sr.Metadata:return"modified";case Sr.Removed:return"removed";default:return g("Unknown change type: "+e)}}var qo=T(Co,"Use firebase.firestore() instead."),Bo=T(ko,"Use firebase.firestore().runTransaction() instead."),Vo=T(Io,"Use firebase.firestore().batch() instead."),Wo=T(xo,"Use firebase.firestore().doc() instead."),zo=T(Ao),Ho=T(Oo),Ko=T(Do),Qo=T(Ro),Go=T(Po,"Use firebase.firestore().collection() instead."),Yo={Firestore:qo,GeoPoint:Br,Timestamp:Ee,Blob:te,Transaction:Bo,WriteBatch:Vo,DocumentReference:Wo,DocumentSnapshot:zo,Query:Ko,QueryDocumentSnapshot:Ho,QuerySnapshot:Qo,CollectionReference:Go,FieldPath:zi,FieldValue:oo,setLogLevel:Co.setLogLevel,CACHE_SIZE_UNLIMITED:To};function Xo(e){e.INTERNAL.registerService("firestore",function(e){return new Co(e)},function(e){v(e&&"object"===typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(Yo))}var $o=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.shutdown=function(){},e}(),Jo=function(){function e(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return e.prototype.addCallback=function(e){this.callbacks.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},e.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},e.prototype.onNetworkAvailable=function(){d("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++){(0,t[e])(0)}},e.prototype.onNetworkUnavailable=function(){d("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++){(0,t[e])(1)}},e.isAvailable=function(){return"undefined"!==typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),Zo=function(){function e(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}return e.prototype.onOpen=function(e){v(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},e.prototype.onClose=function(e){v(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},e.prototype.onMessage=function(e){v(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},e.prototype.close=function(){this.closeFn()},e.prototype.send=function(e){this.sendFn(e)},e.prototype.callOnOpen=function(){v(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},e.prototype.callOnClose=function(e){v(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},e.prototype.callOnMessage=function(e){v(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},e}(),ea="Connection",ta={BatchGetDocuments:"batchGet",Commit:"commit"},na="gl-js/ fire/"+l,ra=function(){function e(e){this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host,this.forceLongPolling=e.forceLongPolling}return e.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=na},e.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise(function(o,a){var s=new c.XhrIo;s.listenOnce(c.EventType.COMPLETE,function(){try{switch(s.getLastErrorCode()){case c.ErrorCode.NO_ERROR:var t=s.getResponseJson();d(ea,"XHR received:",JSON.stringify(t)),o(t);break;case c.ErrorCode.TIMEOUT:d(ea,'RPC "'+e+'" timed out'),a(new E(_.DEADLINE_EXCEEDED,"Request time out"));break;case c.ErrorCode.HTTP_ERROR:var n=s.getStatus();if(d(ea,'RPC "'+e+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var i=function(e){var t=e.toLowerCase().replace("_","-");return Object.values(_).indexOf(t)>=0?t:_.UNKNOWN}(r.status);a(new E(i,r.message))}else a(new E(_.UNKNOWN,"Server responded with status "+s.getStatus()))}else d(ea,'RPC "'+e+'" failed'),a(new E(_.UNAVAILABLE,"Connection failed."));break;default:g('RPC "'+e+'" failed with unanticipated webchannel error '+s.getLastErrorCode()+": "+s.getLastError()+", giving up.")}}finally{d(ea,'RPC "'+e+'" completed.')}});var u=JSON.stringify(t);d(ea,"XHR sending: ",i+" "+u);var l={"Content-Type":"text/plain"};r.modifyHeadersForRequest(l,n),s.send(i,"POST",u,l,15)})},e.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},e.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=c.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,t),u.isReactNative()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");d(ea,"Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),s=!1,l=!1,h=new Zo({sendFn:function(e){l?d(ea,"Not sending because WebChannel is closed:",e):(s||(d(ea,"Opening WebChannel transport."),a.open(),s=!0),d(ea,"WebChannel sending:",e),a.send(e))},closeFn:function(){return a.close()}}),f=function(e,t){a.listen(e,function(e){try{t(e)}catch(n){setTimeout(function(){throw n},0)}})};return f(c.WebChannel.EventType.OPEN,function(){l||d(ea,"WebChannel transport opened.")}),f(c.WebChannel.EventType.CLOSE,function(){l||(l=!0,d(ea,"WebChannel transport closed"),h.callOnClose())}),f(c.WebChannel.EventType.ERROR,function(e){l||(l=!0,d(ea,"WebChannel transport errored:",e),h.callOnClose(new E(_.UNAVAILABLE,"The operation could not be completed")))}),f(c.WebChannel.EventType.MESSAGE,function(e){if(!l){var t=e.data[0];v(!!t,"Got a webchannel message without data.");var n=t,r=n.error||n[0]&&n[0].error;if(r){d(ea,"WebChannel received error:",r);var i=r.status,o=function(e){var t=br[e];if(void 0!==t)return Er(t)}(i),s=r.message;void 0===o&&(o=_.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),l=!0,h.callOnClose(new E(o,s)),a.close()}else d(ea,"WebChannel received:",t),h.callOnMessage(t)}}),setTimeout(function(){h.callOnOpen()},0),h},e.prototype.makeUrl=function(e){var t=ta[e];v(void 0!==t,"Unknown REST mapping for: "+e);var n=[this.baseUrl,"/","v1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(t),n.join("")},e}(),ia=function(){function e(){this.emptyByteString="",this.base64Available="undefined"!==typeof atob}return Object.defineProperty(e.prototype,"document",{get:function(){return"undefined"!==typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return"undefined"!==typeof window?window:null},enumerable:!0,configurable:!0}),e.prototype.loadConnection=function(e){return Promise.resolve(new ra(e))},e.prototype.newConnectivityMonitor=function(){return Jo.isAvailable()?new Jo:new $o},e.prototype.newSerializer=function(e){return new pi(e,{useProto3Json:!0})},e.prototype.formatJSON=function(e){return JSON.stringify(e)},e.prototype.atob=function(e){return atob(e)},e.prototype.btoa=function(e){return btoa(e)},e}();function oa(e){Xo(e)}b.setPlatform(new ia),oa(o),t.registerFirestore=oa},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"ErrorCode",function(){return ur}),n.d(t,"EventType",function(){return cr}),n.d(t,"WebChannel",function(){return lr}),n.d(t,"XhrIo",function(){return hr}),n.d(t,"createWebChannelTransport",function(){return sr});var r,i="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},o=o||{},a=i;function s(e){return"string"==typeof e}function u(e){return"number"==typeof e}function c(e,t){e=e.split("."),t=t||a;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function l(){}function h(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t}function f(e){return"array"==h(e)}function p(e){var t=h(e);return"array"==t||"object"==t&&"number"==typeof e.length}function d(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var m="closure_uid_"+(1e9*Math.random()>>>0),y=0;function g(e,t,n){return e.call.apply(e.bind,arguments)}function v(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function b(e,t,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:v).apply(null,arguments)}function w(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var _=Date.now||function(){return+new Date};function E(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.yb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function T(){this.j=this.j,this.i=this.i}T.prototype.j=!1,T.prototype.la=function(){if(!this.j&&(this.j=!0,this.G(),0))this[m]||(this[m]=++y)},T.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var S=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(s(e))return s(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},C=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=s(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function k(e){return Array.prototype.concat.apply([],arguments)}function I(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function x(e){return/^[\s\xa0]*$/.test(e)}var N,A=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function O(e,t){return-1!=e.indexOf(t)}function D(e,t){return e<t?-1:e>t?1:0}e:{var R=a.navigator;if(R){var P=R.userAgent;if(P){N=P;break e}}N=""}function M(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function L(e){var t,n={};for(t in e)n[t]=e[t];return n}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<F.length;o++)n=F[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function j(e){return j[" "](e),e}j[" "]=l;var q,B=O(N,"Opera"),V=O(N,"Trident")||O(N,"MSIE"),W=O(N,"Edge"),z=W||V,H=O(N,"Gecko")&&!(O(N.toLowerCase(),"webkit")&&!O(N,"Edge"))&&!(O(N,"Trident")||O(N,"MSIE"))&&!O(N,"Edge"),K=O(N.toLowerCase(),"webkit")&&!O(N,"Edge");function Q(){var e=a.document;return e?e.documentMode:void 0}e:{var G="",Y=function(){var e=N;return H?/rv:([^\);]+)(\)|;)/.exec(e):W?/Edge\/([\d\.]+)/.exec(e):V?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):K?/WebKit\/(\S+)/.exec(e):B?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Y&&(G=Y?Y[1]:""),V){var X=Q();if(null!=X&&X>parseFloat(G)){q=String(X);break e}}q=G}var $,J={};function Z(e){return function(e,t){var n=J;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(){for(var t=0,n=A(String(q)).split("."),r=A(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=D(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||D(0==a[2].length,0==s[2].length)||D(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t})}var ee=a.document;$=ee&&V?Q()||("CSS1Compat"==ee.compatMode?parseInt(q,10):5):void 0;var te=!V||9<=Number($),ne=V&&!Z("9"),re=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{a.addEventListener("test",l,t),a.removeEventListener("test",l,t)}catch(n){}return e}();function ie(e,t){this.type=e,this.a=this.target=t,this.Ja=!0}function oe(e,t){if(ie.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(H){e:{try{j(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=s(e.pointerType)?e.pointerType:ae[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}ie.prototype.b=function(){this.Ja=!1},E(oe,ie);var ae={2:"touch",3:"pen",4:"mouse"};oe.prototype.b=function(){oe.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,ne)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}};var se="closure_listenable_"+(1e6*Math.random()|0),ue=0;function ce(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++ue,this.X=this.Z=!1}function le(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function he(e){this.src=e,this.a={},this.b=0}function fe(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=S(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(le(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function pe(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==r)return i}return-1}he.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=pe(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new ce(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var de="closure_lm_"+(1e6*Math.random()|0),me={};function ye(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(f(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}r=Se(r);return t&&t[se]?t.Ba(n,r,d(i)?!!i.capture:!!i,o):ge(t,n,r,!0,i,o)}(e,t,n,r,i);if(f(t)){for(var o=0;o<t.length;o++)ye(e,t[o],n,r,i);return null}return n=Se(n),e&&e[se]?e.Aa(t,n,d(r)?!!r.capture:!!r,i):ge(e,t,n,!1,r,i)}function ge(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=d(i)?!!i.capture:!!i;if(a&&!te)return null;var s=Ee(e);if(s||(e[de]=s=new he(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=_e,t=te?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)re||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(be(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ve(e){if(!u(e)&&e&&!e.X){var t=e.src;if(t&&t[se])fe(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(be(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ee(t))?(fe(n,e),0==n.b&&(n.src=null,t[de]=null)):le(e)}}}function be(e){return e in me?me[e]:me[e]="on"+e}function we(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&ve(e),n.call(r,t)}function _e(e,t){return!!e.X||(te?we(e,new oe(t,this)):we(e,t=new oe(t||c("window.event"),this)))}function Ee(e){return(e=e[de])instanceof he?e:null}var Te="__closure_events_fn_"+(1e9*Math.random()>>>0);function Se(e){return"function"==h(e)?e:(e[Te]||(e[Te]=function(t){return e.handleEvent(t)}),e[Te])}function Ce(){T.call(this),this.c=new he(this),this.J=this,this.B=null}function ke(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&fe(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ja}E(Ce,T),Ce.prototype[se]=!0,(r=Ce.prototype).addEventListener=function(e,t,n,r){ye(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(f(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);else i=d(i)?!!i.capture:!!i,r=Se(r),t&&t[se]?(t=t.c,(n=String(n).toString())in t.a&&-1<(r=pe(a=t.a[n],r,i,o))&&(le(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.a[n],t.b--))):t&&(t=Ee(t))&&(n=t.a[n.toString()],t=-1,n&&(t=pe(n,r,i,o)),(r=-1<t?n[t]:null)&&ve(r))}(this,e,t,n,r)},r.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var r=e.type||e;if(s(e))e=new ie(e,n);else if(e instanceof ie)e.target=e.target||n;else{var i=e;U(e=new ie(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.a=t[o];i=ke(a,r,!0,e)&&i}if(i=ke(a=e.a=n,r,!0,e)&&i,i=ke(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=ke(a=e.a=t[o],r,!1,e)&&i;return i},r.G=function(){if(Ce.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)le(n[r]);delete t.a[e],t.b--}}this.B=null},r.Aa=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},r.Ba=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var Ie=a.JSON.stringify;function xe(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function Ne(){this.b=this.a=null}xe.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var Ae,Oe=new xe(function(){return new Re},function(e){e.reset()});function De(){var e=Fe,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function Re(){this.next=this.b=this.a=null}function Pe(e){a.setTimeout(function(){throw e},0)}function Me(e,t){Ae||function(){var e=a.Promise.resolve(void 0);Ae=function(){e.then(Ue)}}(),Le||(Ae(),Le=!0),Fe.add(e,t)}Ne.prototype.add=function(e,t){var n=Oe.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Re.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},Re.prototype.reset=function(){this.next=this.b=this.a=null};var Le=!1,Fe=new Ne;function Ue(){for(var e;e=De();){try{e.a.call(e.b)}catch(n){Pe(n)}var t=Oe;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}Le=!1}function je(e,t){Ce.call(this),this.b=e||1,this.a=t||a,this.f=b(this.gb,this),this.g=_()}function qe(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function Be(e,t,n){if("function"==h(e))n&&(e=b(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=b(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function Ve(e,t,n){T.call(this),this.f=null!=n?b(e,n):e,this.c=t,this.b=b(this.ab,this),this.a=[]}function We(e){e.U=Be(e.b,e.c),e.f.apply(null,e.a)}function ze(e){T.call(this),this.b=e,this.a={}}E(je,Ce),(r=je.prototype).ba=!1,r.L=null,r.gb=function(){if(this.ba){var e=_()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(qe(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=_())},r.G=function(){je.N.G.call(this),qe(this),delete this.a},E(Ve,T),(r=Ve.prototype).ea=!1,r.U=null,r.Ua=function(e){this.a=arguments,this.U?this.ea=!0:We(this)},r.G=function(){Ve.N.G.call(this),this.U&&(a.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.ab=function(){this.U=null,this.ea&&(this.ea=!1,We(this))},E(ze,T);var He=[];function Ke(e,t,n,r){f(n)||(n&&(He[0]=n.toString()),n=He);for(var i=0;i<n.length;i++){var o=ye(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function Qe(e){M(e.a,function(e,t){this.a.hasOwnProperty(t)&&ve(e)},e),e.a={}}function Ge(){}ze.prototype.G=function(){ze.N.G.call(this),Qe(this)},ze.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ye=new Ce;function Xe(e){ie.call(this,"serverreachability",e)}function $e(e){Ye.dispatchEvent(new Xe(Ye,e))}function Je(e){ie.call(this,"statevent",e)}function Ze(e){Ye.dispatchEvent(new Je(Ye,e))}function et(e){ie.call(this,"timingevent",e)}function tt(e,t){if("function"!=h(e))throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){e()},t)}E(Xe,ie),E(Je,ie),E(et,ie);var nt={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},rt={jb:"complete",wb:"success",Na:"error",Ma:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function it(){}function ot(e){var t;return(t=e.a)||(t=e.a={}),t}function at(){}it.prototype.a=null;var st,ut={OPEN:"a",ib:"b",Na:"c",rb:"d"};function ct(){ie.call(this,"d")}function lt(){ie.call(this,"c")}function ht(){}function ft(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new ze(this),this.O=pt,e=z?125:void 0,this.P=new je(e),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}E(ct,ie),E(lt,ie),E(ht,it),st=new ht;var pt=45e3,dt={},mt={};function yt(e,t,n){e.F=1,e.f=Bt(Pt(t)),e.l=n,e.H=!0,vt(e,null)}function gt(e,t,n,r){e.F=1,e.f=Bt(Pt(t)),e.l=null,e.H=n,vt(e,r)}function vt(e,t){e.v=_(),_t(e),e.D=Pt(e.f),qt(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new Ve(b(e.Ka,e,e.a),e.J)),Ke(e.I,e.a,"readystatechange",e.eb),t=e.h?L(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),$e(1)}function bt(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var i=wt(e,n);if(i==mt){4==t&&(e.c=4,Ze(14),r=!1);break}if(i==dt){e.c=4,Ze(15),r=!1;break}kt(e,i)}4==t&&0==n.length&&(e.c=1,Ze(16),r=!1),e.b=e.b&&r,r||(Ct(e),St(e))}function wt(e,t){var n=e.A,r=t.indexOf("\n",n);return-1==r?mt:(n=Number(t.substring(n,r)),isNaN(n)?dt:(r+=1)+n>t.length?mt:(t=t.substr(r,n),e.A=r+n,t))}function _t(e){e.R=_()+e.O,Et(e,e.O)}function Et(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=tt(b(e.bb,e),t)}function Tt(e){e.i&&(a.clearTimeout(e.i),e.i=null)}function St(e){e.g.Da()||e.m||e.g.na(e)}function Ct(e){Tt(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,qe(e.P),Qe(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function kt(e,t){try{e.g.Ga(e,t),$e(4)}catch(n){}}function It(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(p(e)||s(e))C(e,t,void 0);else{if(e.K&&"function"==typeof e.K)var n=e.K();else if(e.C&&"function"==typeof e.C)n=void 0;else if(p(e)||s(e)){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.C&&"function"==typeof e.C)return e.C();if(s(e))return e.split("");if(p(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function xt(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof xt)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Nt(e,t){Ot(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&At(e))}function At(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Ot(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Ot(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Ot(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(r=ft.prototype).setTimeout=function(e){this.O=e},r.eb=function(e){e=e.target;var t=this.B;t&&3==Pn(e)?t.Ua():this.Ka(e)},r.Ka=function(e){try{if(e==this.a)e:{var t=Pn(this.a),n=this.a.ya(),r=this.a.T();if(!(3>t||3==t&&!z&&!this.a.aa())){this.m||4!=t||7==n||$e(8==n||0>=r?3:2),Tt(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){t:{if(this.a){var a=Mn(this.a,"X-HTTP-Initial-Response");if(a&&!x(a)){var s=a;break t}}s=null}if(!s){this.b=!1,this.c=3,Ze(12),Ct(this),St(this);break e}this.s=!0,kt(this,s)}this.H?(bt(this,t,o),z&&this.b&&3==t&&(Ke(this.I,this.P,"tick",this.cb),this.P.start())):kt(this,o),4==t&&Ct(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,_t(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Ze(12)):(this.c=0,Ze(13)),Ct(this),St(this)}}}catch(u){}},r.cb=function(){if(this.a){var e=Pn(this.a),t=this.a.aa();this.A<t.length&&(Tt(this),bt(this,e,t),this.b&&4!=e&&_t(this))}},r.cancel=function(){this.m=!0,Ct(this)},r.bb=function(){this.i=null;var e=_();0<=e-this.R?(2!=this.F&&($e(3),Ze(17)),Ct(this),this.c=2,St(this)):Et(this,this.R-e)},(r=xt.prototype).C=function(){At(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},r.K=function(){return At(this),this.a.concat()},r.get=function(e,t){return Ot(this.b,e)?this.b[e]:t},r.set=function(e,t){Ot(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},r.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Dt=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rt(e,t){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,e instanceof Rt?(this.h=void 0!==t?t:e.h,Mt(this,e.f),this.j=e.j,Lt(this,e.b),Ft(this,e.i),this.a=e.a,Ut(this,tn(e.c)),this.g=e.g):e&&(n=String(e).match(Dt))?(this.h=!!t,Mt(this,n[1]||"",!0),this.j=Vt(n[2]||""),Lt(this,n[3]||"",!0),Ft(this,n[4]),this.a=Vt(n[5]||"",!0),Ut(this,n[6]||"",!0),this.g=Vt(n[7]||"")):(this.h=!!t,this.c=new Xt(null,this.h))}function Pt(e){return new Rt(e)}function Mt(e,t,n){e.f=n?Vt(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function Lt(e,t,n){e.b=n?Vt(t,!0):t}function Ft(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.i=t}else e.i=null}function Ut(e,t,n){t instanceof Xt?(e.c=t,function(e,t){t&&!e.f&&($t(e),e.c=null,e.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Jt(this,t),en(this,n,e))},e)),e.f=t}(e.c,e.h)):(n||(t=Wt(t,Gt)),e.c=new Xt(t,e.h))}function jt(e,t,n){e.c.set(t,n)}function qt(e,t,n){f(n)||(n=[String(n)]),en(e.c,t,n)}function Bt(e){return jt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_()).toString(36)),e}function Vt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Wt(e,t,n){return s(e)?(e=encodeURI(e).replace(t,zt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function zt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Rt.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Wt(t,Ht,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(Wt(t,Ht,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(Wt(n,"/"==n.charAt(0)?Qt:Kt,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",Wt(n,Yt)),e.join("")},Rt.prototype.resolve=function(e){var t=Pt(this),n=!!e.f;n?Mt(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?Lt(t,e.b):n=null!=e.i;var r=e.a;if(n)Ft(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=t.a.lastIndexOf("/");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(O(i,"./")||O(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.a=r:n=""!==e.c.toString(),n?Ut(t,tn(e.c)):n=!!e.g,n&&(t.g=e.g),t};var Ht=/[#\/\?@]/g,Kt=/[#\?:]/g,Qt=/[#\?]/g,Gt=/[#\?@]/g,Yt=/#/g;function Xt(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function $t(e){e.a||(e.a=new xt,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Jt(e,t){$t(e),t=nn(e,t),Ot(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Nt(e.a,t))}function Zt(e,t){return $t(e),t=nn(e,t),Ot(e.a.b,t)}function en(e,t,n){Jt(e,t),0<n.length&&(e.c=null,e.a.set(nn(e,t),I(n)),e.b+=n.length)}function tn(e){var t=new Xt;return t.c=e.c,e.a&&(t.a=new xt(e.a),t.b=e.b),t}function nn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function rn(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function on(e){var t=e.a.F.a;if(null!=t)Ze(4),t?(Ze(10),Qn(e.a,e,!1)):(Ze(11),Qn(e.a,e,!0));else{e.b=new ft(e,void 0,void 0),e.b.h=e.h,t=Jn(t=e.a,t.Y()?e.f:null,e.i),Ze(4),qt(t,"TYPE","xmlhttp");var n=e.a.j,r=e.a.I;n&&r&&jt(t,n,r),gt(e.b,t,!1,e.f)}}function an(){this.a=this.b=null}function sn(){this.a=new xt}function un(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[m]||(e[m]=++y)):t.charAt(0)+e}function cn(e,t){this.b=e,this.a=t}function ln(e){this.g=e||hn,a.PerformanceNavigationTiming?e=0<(e=a.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(a.ka&&a.ka.Ea&&a.ka.Ea()&&a.ka.Ea().zb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new sn),this.b=null,this.c=[]}(r=Xt.prototype).add=function(e,t){$t(this),this.c=null,e=nn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},r.forEach=function(e,t){$t(this),this.a.forEach(function(n,r){C(n,function(n){e.call(t,n,r,this)},this)},this)},r.K=function(){$t(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},r.C=function(e){$t(this);var t=[];if(s(e))Zt(this,e)&&(t=k(t,this.a.get(nn(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=k(t,e[n])}return t},r.set=function(e,t){return $t(this),this.c=null,Zt(this,e=nn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},r.get=function(e,t){return e&&0<(e=this.C(e)).length?String(e[0]):t},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")},E(function(){},function(){}),(r=rn.prototype).M=null,r.$=function(e){return this.a.$(e)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Da=function(){return!1},r.Ga=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=Mn(e,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(e=Mn(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(i){return(t=this.a).m=this.c,void Xn(t,2)}this.f=r[0]}else(t=this.a).m=this.c,Xn(t,2)}else 1==this.M&&(this.g?Ze(6):"11111"==t?(Ze(5),this.g=!0,(!V||10<=Number($))&&(this.c=200,this.b.cancel(),Ze(11),Qn(this.a,this,!0))):(Ze(7),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,on(this)):1==this.M&&(this.g?(Ze(11),Qn(this.a,this,!0)):(Ze(10),Qn(this.a,this,!1)));else{0==this.M?Ze(8):1==this.M&&Ze(9);var e=this.a;e.m=this.c,Xn(e,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},sn.prototype.add=function(e){this.a.set(un(e),e)},sn.prototype.C=function(){return this.a.C()};var hn=10;function fn(e,t){!e.a&&(O(t,"spdy")||O(t,"quic")||O(t,"h2"))&&(e.f=e.g,e.a=new sn,e.b&&(yn(e,e.b),e.b=null))}function pn(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function dn(e){return e.b?1:e.a?e.a.a.c:0}function mn(e,t){return e.b?e=e.b==t:e.a?(t=un(t),e=Ot(e.a.a.b,t)):e=!1,e}function yn(e,t){e.a?e.a.add(t):e.b=t}function gn(e,t){var n;e.b&&e.b==t?e.b=null:((n=e.a)&&(n=un(t),n=Ot(e.a.a.b,n)),n&&Nt(e.a.a,un(t)))}function vn(e){if(null!=e.b)return e.c.concat(e.b.j);if(null!=e.a&&0!=e.a.a.c){var t=e.c;return C(e.a.C(),function(e){t=t.concat(e.j)}),t}return I(e.c)}function bn(){}function wn(){this.a=new bn}function _n(e,t,n){var r=n||"";try{It(e,function(e,n){var i=e;d(e)&&(i=Ie(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function En(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}ln.prototype.cancel=function(){var e;this.c=vn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(C(this.a.C(),function(e){e.cancel()}),(e=this.a.a).b={},e.a.length=0,e.c=0)},bn.prototype.stringify=function(e){return a.JSON.stringify(e,void 0)},bn.prototype.parse=function(e){return a.JSON.parse(e,void 0)};var Tn=a.JSON.parse;function Sn(e){Ce.call(this),this.headers=new xt,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Cn,this.D=this.F=!1}E(Sn,Ce);var Cn="",kn=/^https?$/i,In=["POST","PUT"];function xn(e){return"content-type"==e.toLowerCase()}function Nn(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,An(e),Dn(e)}function An(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function On(e){if(e.b&&"undefined"!=typeof o&&(!e.s[1]||4!=Pn(e)||2!=e.T()))if(e.l&&4==Pn(e))Be(e.Fa,0,e);else if(e.dispatchEvent("readystatechange"),4==Pn(e)){e.b=!1;try{var t,n=e.T();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var s=String(e.A).match(Dt)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!kn.test(s?s.toLowerCase():"")}t=i}t?(e.dispatchEvent("complete"),e.dispatchEvent("success")):(e.h=6,e.f=e.za()+" ["+e.T()+"]",An(e))}finally{Dn(e)}}}function Dn(e,t){if(e.a){Rn(e);var n=e.a,r=e.s[0]?l:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function Rn(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(a.clearTimeout(e.m),e.m=null)}function Pn(e){return e.a?e.a.readyState:0}function Mn(e,t){return e.a?e.a.getResponseHeader(t):null}function Ln(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(n=function(e){var t="";return M(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),s(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=e.indexOf("#"))&&(n=e.length),0>(r=e.indexOf("?"))||r>n){r=n;var i=""}else i=e.substring(r+1,n);n=(e=[e.substr(0,r),i,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return jt(e,t,n),e}function Fn(e){this.f=[],this.F=new an,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!c("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=c("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Sa=c("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Qa=c("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=c("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.La=e&&e.Ab||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new ln(e&&e.concurrentRequestLimit),this.ja=new wn,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Un(e){if(jn(e),3==e.u){var t=e.P++,n=Pt(e.B);jt(n,"SID",e.H),jt(n,"RID",t),jt(n,"TYPE","terminate"),Wn(e,n),(t=new ft(e,t,void 0)).F=2,t.f=Bt(Pt(n)),n=!1,a.navigator&&a.navigator.sendBeacon&&(n=a.navigator.sendBeacon(t.f.toString(),"")),!n&&a.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=_(),_t(t)}$n(e)}function jn(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(a.clearTimeout(e.l),e.l=null),Gn(e),e.b.cancel(),e.h&&(u(e.h)&&a.clearTimeout(e.h),e.h=null)}function qn(e,t){e.f.push(new cn(e.Ra++,t)),3==e.u&&Bn(e)}function Bn(e){pn(e.b)||e.h||(e.h=!0,Me(e.Ia,e),e.A=0)}function Vn(e,t){var n;n=t?t.W:e.P++;var r=Pt(e.B);jt(r,"SID",e.H),jt(r,"RID",n),jt(r,"AID",e.O),Wn(e,r),e.g&&e.i&&Ln(r,e.g,e.i),n=new ft(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=zn(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),yn(e.b,n),yt(n,r,t)}function Wn(e,t){e.c&&It({},function(e,n){jt(t,n,e)})}function zn(e,t,n){n=Math.min(e.f.length,n);var r=e.c?b(e.c.Ta,e.c,e):null;e:for(var i=e.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{_n(l,a,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.f.splice(0,n),t.j=e,r}function Hn(e){e.a||e.l||(e.S=1,Me(e.Ha,e),e.v=0)}function Kn(e){return!(e.a||e.l||3<=e.v)&&(e.S++,e.l=tt(b(e.Ha,e),Yn(e,e.v)),e.v++,!0)}function Qn(e,t,n){var r=t.l;r&&fn(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=Jn(e,null,e.ha),Bn(e)}function Gn(e){null!=e.s&&(a.clearTimeout(e.s),e.s=null)}function Yn(e,t){var n=e.Oa+Math.floor(Math.random()*e.Sa);return e.ma()||(n*=2),n*t}function Xn(e,t){if(2==t){var n=null;e.c&&(n=null);var r=b(e.fb,e);n||(n=new Rt("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Mt(n,"https"),Bt(n)),function(e,t){var n=new Ge;if(a.Image){var r=new Image;r.onload=w(En,n,r,"TestLoadImage: loaded",!0,t),r.onerror=w(En,n,r,"TestLoadImage: error",!1,t),r.onabort=w(En,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=w(En,n,r,"TestLoadImage: timeout",!1,t),a.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ze(2);e.u=0,e.c&&e.c.ta(t),$n(e),jn(e)}function $n(e){e.u=0,e.m=-1,e.c&&(0==vn(e.b).length&&0==e.f.length||(e.b.c.length=0,I(e.f),e.f.length=0),e.c.sa())}function Jn(e,t,n){var r=function(e){return e instanceof Rt?Pt(e):new Rt(e,void 0)}(n);if(""!=r.b)t&&Lt(r,t+"."+r.b),Ft(r,r.i);else{var i,o=a.location;i=t?t+"."+o.hostname:o.hostname,r=function(e,t,n,r){var i=new Rt(null,void 0);return e&&Mt(i,e),t&&Lt(i,t),n&&Ft(i,n),r&&(i.a=r),i}(o.protocol,i,+o.port,n)}return e.V&&M(e.V,function(e,t){jt(r,t,e)}),t=e.j,n=e.I,t&&n&&jt(r,t,n),jt(r,"VER",e.wa),Wn(e,r),r}function Zn(){}function er(){if(V&&!(10<=Number($)))throw Error("Environmental error: no available transport.")}function tr(e,t){Ce.call(this),this.a=new Fn(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:function(e){for(var t=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?t=i:((r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),t+=r?i:"/"+i)}return t}(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!x(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!x(t)&&(this.a.j=t,null!==(e=this.b)&&t in e&&(t in(e=this.b)&&delete e[t])),this.f=new ir(this)}function nr(e){ct.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function rr(){lt.call(this),this.status=1}function ir(e){this.a=e}(r=Sn.prototype).ca=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?ot(this.H):ot(st),this.a.onreadystatechange=b(this.Fa,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(o){return void Nn(this,o)}e=n||"";var i=new xt(this.headers);r&&It(r,function(e,t){i.set(t,e)}),r=function(e){e:{for(var t=xn,n=e.length,r=s(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:s(e)?e.charAt(t):e[t]}(i.K()),n=a.FormData&&e instanceof a.FormData,!(0<=S(In,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.a.setRequestHeader(t,e)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Rn(this),0<this.o&&((this.D=function(e){return V&&Z(9)&&u(e.timeout)&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=b(this.Ca,this)):this.m=Be(this.Ca,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(o){Nn(this,o)}},r.Ca=function(){"undefined"!=typeof o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Dn(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Dn(this,!0)),Sn.N.G.call(this)},r.Fa=function(){this.j||(this.w||this.l||this.g?On(this):this.$a())},r.$a=function(){On(this)},r.T=function(){try{return 2<Pn(this)?this.a.status:-1}catch(e){return-1}},r.za=function(){try{return 2<Pn(this)?this.a.statusText:""}catch(e){return""}},r.aa=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},r.Va=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Tn(t)}},r.ya=function(){return this.h},r.Ya=function(){return s(this.f)?this.f:String(this.f)},(r=Fn.prototype).wa=8,r.u=1,r.Da=function(){return 0==this.u},r.Ia=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random());var t,n=new ft(this,e=this.P++,void 0),r=this.i;if(this.J&&(r?U(r=L(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)e:{for(var i=t=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&s(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.f.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=zn(this,n,t),jt(i=Pt(this.B),"RID",e),jt(i,"CVER",22),this.o&&this.j&&jt(i,"X-HTTP-Session-Id",this.j),Wn(this,i),this.g&&r&&Ln(i,this.g,r),yn(this.b,n),this.W?(jt(i,"$req",t),jt(i,"SID","null"),n.S=!0,yt(n,i,null)):yt(n,i,t),this.u=2}}else 3==this.u&&(e?Vn(this,e):0==this.f.length||pn(this.b)||Vn(this))},r.Ha=function(){this.l=null,this.a=new ft(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=Pt(this.pa);jt(e,"RID","rpc"),jt(e,"SID",this.H),jt(e,"CI",this.ia?"0":"1"),jt(e,"AID",this.O),Wn(this,e),jt(e,"TYPE","xmlhttp"),this.g&&this.i&&Ln(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),gt(this.a,e,!0,this.ga)},r.Ga=function(e,t){if(0!=this.u&&(this.a==e||mn(this.b,e)))if(this.m=e.o,!e.s&&mn(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(o){n=null}if(f(n)&&3==n.length){if(0==(t=n)[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;Gn(this),this.a.cancel(),this.a=null}Kn(this),Ze(18)}}else this.ra=t[1],0<this.ra-this.O&&37500>t[2]&&this.ia&&0==this.v&&!this.s&&(this.s=tt(b(this.Za,this),6e3));if(1>=dn(this.b)&&this.fa){try{this.fa()}catch(o){}this.fa=void 0}}else Xn(this,11)}else if((e.s||this.a==e)&&Gn(this),!x(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var r=t[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&u(r)&&0<r&&(this.D=1.5*r),this.o&&(r=e.a)&&((i=Mn(r,"X-Client-Wire-Protocol"))&&fn(this.b,i),this.j&&(r=Mn(r,"X-HTTP-Session-Id")))&&(this.I=r,jt(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=e,this.pa=Jn(this,this.Y()?this.ga:null,this.ha),r.s?(gn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Tt(r),_t(r)),this.a=r):Hn(this),0<this.f.length&&Bn(this)}else"stop"!=r[0]&&"close"!=r[0]||Xn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Xn(this,7):Un(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Kn(this),Ze(19))},r.na=function(e){var t=null;if(this.a==e){Gn(this),this.a=null;var n=2}else{if(!mn(this.b,e))return;t=e.j,gn(this.b,e),n=1}if(this.m=e.o,0!=this.u)if(e.b)1==n?(t=_()-e.v,Ye.dispatchEvent(new et(Ye,e.l?e.l.length:0,t,this.A)),Bn(this)):Hn(this);else{var r=e.c;if(3==r||0==r&&0<this.m||!(1==n&&function(e,t){return!(dn(e.b)>=e.b.f-(e.h?1:0))&&(e.h?(e.f=t.j.concat(e.f),!0):!(1==e.u||2==e.u||e.A>=(e.Pa?0:e.Qa))&&(e.h=tt(b(e.Ia,e,t),Yn(e,e.A)),e.A++,!0))}(this,e)||2==n&&Kn(this)))switch(t&&0<t.length&&(e=this.b,e.c=e.c.concat(t)),r){case 1:Xn(this,5);break;case 4:Xn(this,10);break;case 3:Xn(this,6);break;default:Xn(this,2)}}},r.fb=function(e){Ze(e?2:1)},r.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Sn(this.La)).F=this.R,e},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},(r=Zn.prototype).va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Ta=function(){},er.prototype.a=function(e,t){return new tr(e,t)},E(tr,Ce),(r=tr.prototype).addEventListener=function(e,t,n,r){tr.N.addEventListener.call(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){tr.N.removeEventListener.call(this,e,t,n,r)},r.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;Ze(0),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new rn(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=Ln(t,e.g,e.i)),(e=e.w).i=n,t=Jn(e.a,null,e.i),Ze(3),null!=(n=e.a.F.b)?(e.f=n[0],e.M=1,on(e)):(qt(t,"MODE","init"),!e.a.o&&e.a.j&&qt(t,"X-HTTP-Session-Id",e.a.j),e.b=new ft(e,void 0,void 0),e.b.h=e.h,gt(e.b,t,!1,null),e.M=0)},r.close=function(){Un(this.a)},r.Xa=function(e){if(s(e)){var t={};t.__data__=e,qn(this.a,t)}else this.h?((t={}).__data__=Ie(e),qn(this.a,t)):qn(this.a,e)},r.G=function(){this.a.c=null,delete this.f,Un(this.a),delete this.a,tr.N.G.call(this)},E(nr,ct),E(rr,lt),E(ir,Zn),ir.prototype.va=function(){this.a.dispatchEvent("a")},ir.prototype.ua=function(e){this.a.dispatchEvent(new nr(e))},ir.prototype.ta=function(e){this.a.dispatchEvent(new rr(e))},ir.prototype.sa=function(){this.a.dispatchEvent("b")};var or=w(function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r},er);er.prototype.createWebChannel=er.prototype.a,tr.prototype.send=tr.prototype.Xa,tr.prototype.open=tr.prototype.Wa,tr.prototype.close=tr.prototype.close,nt.NO_ERROR=0,nt.TIMEOUT=8,nt.HTTP_ERROR=6,rt.COMPLETE="complete",at.EventType=ut,ut.OPEN="a",ut.CLOSE="b",ut.ERROR="c",ut.MESSAGE="d",Ce.prototype.listen=Ce.prototype.Aa,Sn.prototype.listenOnce=Sn.prototype.Ba,Sn.prototype.getLastError=Sn.prototype.Ya,Sn.prototype.getLastErrorCode=Sn.prototype.ya,Sn.prototype.getStatus=Sn.prototype.T,Sn.prototype.getStatusText=Sn.prototype.za,Sn.prototype.getResponseJson=Sn.prototype.Va,Sn.prototype.getResponseText=Sn.prototype.aa,Sn.prototype.send=Sn.prototype.ca;var ar={createWebChannelTransport:or,ErrorCode:nt,EventType:rt,WebChannel:at,XhrIo:Sn},sr=ar.createWebChannelTransport,ur=ar.ErrorCode,cr=ar.EventType,lr=ar.WebChannel,hr=ar.XhrIo;t.default=ar}.call(this,n(22))},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t){var n;(n="undefined"!==typeof window&&window.Element.prototype)&&("function"!==typeof n.matches&&(n.matches=n.msMatchesSelector||n.mozMatchesSelector||n.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=0;t[n]&&t[n]!==this;)++n;return Boolean(t[n])}),"function"!==typeof n.closest&&(n.closest=function(e){for(var t=this;t&&1===t.nodeType;){if(t.matches(e))return t;t=t.parentNode}return null}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=c(o),s=n(0),u=c(n(297));function c(e){return e&&e.__esModule?e:{default:e}}var l={"ps-scroll-y":"onScrollY","ps-scroll-x":"onScrollX","ps-scroll-up":"onScrollUp","ps-scroll-down":"onScrollDown","ps-scroll-left":"onScrollLeft","ps-scroll-right":"onScrollRight","ps-y-reach-start":"onYReachStart","ps-y-reach-end":"onYReachEnd","ps-x-reach-start":"onXReachStart","ps-x-reach-end":"onXReachEnd"};Object.freeze(l);var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleRef=n.handleRef.bind(n),n._handlerByEvent={},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"componentDidMount",value:function(){this.props.option&&console.warn('react-perfect-scrollbar: the "option" prop has been deprecated in favor of "options"'),this._ps=new u.default(this._container,this.props.options||this.props.option),this._updateEventHook(),this._updateClassName()}},{key:"componentDidUpdate",value:function(e){this._updateEventHook(e),this.updateScroll(),e.className!==this.props.className&&this._updateClassName()}},{key:"componentWillUnmount",value:function(){var e=this;Object.keys(this._handlerByEvent).forEach(function(t){var n=e._handlerByEvent[t];n&&e._container.removeEventListener(t,n,!1)}),this._handlerByEvent={},this._ps.destroy(),this._ps=null}},{key:"_updateEventHook",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(l).forEach(function(n){var r=e.props[l[n]],i=t[l[n]];if(r!==i){if(i){var o=e._handlerByEvent[n];e._container.removeEventListener(n,o,!1),e._handlerByEvent[n]=null}if(r){var a=function(){return r(e._container)};e._container.addEventListener(n,a,!1),e._handlerByEvent[n]=a}}})}},{key:"_updateClassName",value:function(){var e=this.props.className,t=this._container.className.split(" ").filter(function(e){return e.match(/^ps([-_].+|)$/)}).join(" ");this._container&&(this._container.className="scrollbar-container"+(e?" "+e:"")+(t?" "+t:""))}},{key:"updateScroll",value:function(){this.props.onSync(this._ps)}},{key:"handleRef",value:function(e){this._container=e,this.props.containerRef(e)}},{key:"render",value:function(){var e=this.props,t=(e.className,e.style),n=(e.option,e.options,e.containerRef,e.onScrollY,e.onScrollX,e.onScrollUp,e.onScrollDown,e.onScrollLeft,e.onScrollRight,e.onYReachStart,e.onYReachEnd,e.onXReachStart,e.onXReachEnd,e.component),i=(e.onSync,e.children),o=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["className","style","option","options","containerRef","onScrollY","onScrollX","onScrollUp","onScrollDown","onScrollLeft","onScrollRight","onYReachStart","onYReachEnd","onXReachStart","onXReachEnd","component","onSync","children"]),s=n;return a.default.createElement(s,r({style:t,ref:this.handleRef},o),i)}}]),t}();t.default=h,h.defaultProps={className:"",style:void 0,option:void 0,options:void 0,containerRef:function(){},onScrollY:void 0,onScrollX:void 0,onScrollUp:void 0,onScrollDown:void 0,onScrollLeft:void 0,onScrollRight:void 0,onYReachStart:void 0,onYReachEnd:void 0,onXReachStart:void 0,onXReachEnd:void 0,onSync:function(e){return e.update()},component:"div"},h.propTypes={children:s.PropTypes.node.isRequired,className:s.PropTypes.string,style:s.PropTypes.object,option:s.PropTypes.object,options:s.PropTypes.object,containerRef:s.PropTypes.func,onScrollY:s.PropTypes.func,onScrollX:s.PropTypes.func,onScrollUp:s.PropTypes.func,onScrollDown:s.PropTypes.func,onScrollLeft:s.PropTypes.func,onScrollRight:s.PropTypes.func,onYReachStart:s.PropTypes.func,onYReachEnd:s.PropTypes.func,onXReachStart:s.PropTypes.func,onXReachEnd:s.PropTypes.func,onSync:s.PropTypes.func,component:s.PropTypes.string},e.exports=t.default},function(e,t,n){"use strict";function r(e){return getComputedStyle(e)}function i(e,t){for(var n in t){var r=t[n];"number"===typeof r&&(r+="px"),e.style[n]=r}return e}function o(e){var t=document.createElement("div");return t.className=e,t}n.r(t);var a="undefined"!==typeof Element&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function s(e,t){if(!a)throw new Error("No element matching method supported");return a.call(e,t)}function u(e){e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)}function c(e,t){return Array.prototype.filter.call(e.children,function(e){return s(e,t)})}var l={main:"ps",rtl:"ps__rtl",element:{thumb:function(e){return"ps__thumb-"+e},rail:function(e){return"ps__rail-"+e},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(e){return"ps--active-"+e},scrolling:function(e){return"ps--scrolling-"+e}}},h={x:null,y:null};function f(e,t){var n=e.element.classList,r=l.state.scrolling(t);n.contains(r)?clearTimeout(h[t]):n.add(r)}function p(e,t){h[t]=setTimeout(function(){return e.isAlive&&e.element.classList.remove(l.state.scrolling(t))},e.settings.scrollingThreshold)}var d=function(e){this.element=e,this.handlers={}},m={isEmpty:{configurable:!0}};d.prototype.bind=function(e,t){"undefined"===typeof this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e].push(t),this.element.addEventListener(e,t,!1)},d.prototype.unbind=function(e,t){var n=this;this.handlers[e]=this.handlers[e].filter(function(r){return!(!t||r===t)||(n.element.removeEventListener(e,r,!1),!1)})},d.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)},m.isEmpty.get=function(){var e=this;return Object.keys(this.handlers).every(function(t){return 0===e.handlers[t].length})},Object.defineProperties(d.prototype,m);var y=function(){this.eventElements=[]};function g(e){if("function"===typeof window.CustomEvent)return new CustomEvent(e);var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,void 0),t}function v(e,t,n,r,i){var o;if(void 0===r&&(r=!0),void 0===i&&(i=!1),"top"===t)o=["contentHeight","containerHeight","scrollTop","y","up","down"];else{if("left"!==t)throw new Error("A proper axis should be provided");o=["contentWidth","containerWidth","scrollLeft","x","left","right"]}!function(e,t,n,r,i){var o=n[0],a=n[1],s=n[2],u=n[3],c=n[4],l=n[5];void 0===r&&(r=!0);void 0===i&&(i=!1);var h=e.element;e.reach[u]=null,h[s]<1&&(e.reach[u]="start");h[s]>e[o]-e[a]-1&&(e.reach[u]="end");t&&(h.dispatchEvent(g("ps-scroll-"+u)),t<0?h.dispatchEvent(g("ps-scroll-"+c)):t>0&&h.dispatchEvent(g("ps-scroll-"+l)),r&&function(e,t){f(e,t),p(e,t)}(e,u));e.reach[u]&&(t||i)&&h.dispatchEvent(g("ps-"+u+"-reach-"+e.reach[u]))}(e,n,o,r,i)}function b(e){return parseInt(e,10)||0}y.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return t||(t=new d(e),this.eventElements.push(t)),t},y.prototype.bind=function(e,t,n){this.eventElement(e).bind(t,n)},y.prototype.unbind=function(e,t,n){var r=this.eventElement(e);r.unbind(t,n),r.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(r),1)},y.prototype.unbindAll=function(){this.eventElements.forEach(function(e){return e.unbindAll()}),this.eventElements=[]},y.prototype.once=function(e,t,n){var r=this.eventElement(e);r.bind(t,function e(i){r.unbind(t,e),n(i)})};var w={isWebKit:"undefined"!==typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!==typeof window&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!==typeof navigator&&navigator.msMaxTouchPoints,isChrome:"undefined"!==typeof navigator&&/Chrome/i.test(navigator&&navigator.userAgent)};function _(e){var t=e.element,n=Math.floor(t.scrollTop),r=t.getBoundingClientRect();e.containerWidth=Math.ceil(r.width),e.containerHeight=Math.ceil(r.height),e.contentWidth=t.scrollWidth,e.contentHeight=t.scrollHeight,t.contains(e.scrollbarXRail)||(c(t,l.element.rail("x")).forEach(function(e){return u(e)}),t.appendChild(e.scrollbarXRail)),t.contains(e.scrollbarYRail)||(c(t,l.element.rail("y")).forEach(function(e){return u(e)}),t.appendChild(e.scrollbarYRail)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=E(e,b(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=b((e.negativeScrollAdjustment+t.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=E(e,b(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=b(n*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),function(e,t){var n={width:t.railXWidth},r=Math.floor(e.scrollTop);t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft;t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-r:n.top=t.scrollbarXTop+r;i(t.scrollbarXRail,n);var o={top:r,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?o.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth-9:o.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?o.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:o.left=t.scrollbarYLeft+e.scrollLeft;i(t.scrollbarYRail,o),i(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),i(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}(t,e),e.scrollbarXActive?t.classList.add(l.state.active("x")):(t.classList.remove(l.state.active("x")),e.scrollbarXWidth=0,e.scrollbarXLeft=0,t.scrollLeft=!0===e.isRtl?e.contentWidth:0),e.scrollbarYActive?t.classList.add(l.state.active("y")):(t.classList.remove(l.state.active("y")),e.scrollbarYHeight=0,e.scrollbarYTop=0,t.scrollTop=0)}function E(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function T(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],h=t[8],d=e.element,m=null,y=null,g=null;function v(t){t.touches&&t.touches[0]&&(t[i]=t.touches[0].pageY),d[u]=m+g*(t[i]-y),f(e,c),_(e),t.stopPropagation(),t.preventDefault()}function b(){p(e,c),e[h].classList.remove(l.state.clicking),e.event.unbind(e.ownerDocument,"mousemove",v)}function w(t,a){m=d[u],a&&t.touches&&(t[i]=t.touches[0].pageY),y=t[i],g=(e[r]-e[n])/(e[o]-e[s]),a?e.event.bind(e.ownerDocument,"touchmove",v):(e.event.bind(e.ownerDocument,"mousemove",v),e.event.once(e.ownerDocument,"mouseup",b),t.preventDefault()),e[h].classList.add(l.state.clicking),t.stopPropagation()}e.event.bind(e[a],"mousedown",function(e){w(e)}),e.event.bind(e[a],"touchstart",function(e){w(e,!0)})}var S={"click-rail":function(e){e.element,e.event.bind(e.scrollbarY,"mousedown",function(e){return e.stopPropagation()}),e.event.bind(e.scrollbarYRail,"mousedown",function(t){var n=t.pageY-window.pageYOffset-e.scrollbarYRail.getBoundingClientRect().top>e.scrollbarYTop?1:-1;e.element.scrollTop+=n*e.containerHeight,_(e),t.stopPropagation()}),e.event.bind(e.scrollbarX,"mousedown",function(e){return e.stopPropagation()}),e.event.bind(e.scrollbarXRail,"mousedown",function(t){var n=t.pageX-window.pageXOffset-e.scrollbarXRail.getBoundingClientRect().left>e.scrollbarXLeft?1:-1;e.element.scrollLeft+=n*e.containerWidth,_(e),t.stopPropagation()})},"drag-thumb":function(e){T(e,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),T(e,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])},keyboard:function(e){var t=e.element;e.event.bind(e.ownerDocument,"keydown",function(n){if(!(n.isDefaultPrevented&&n.isDefaultPrevented()||n.defaultPrevented)&&(s(t,":hover")||s(e.scrollbarX,":focus")||s(e.scrollbarY,":focus"))){var r,i=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(i){if("IFRAME"===i.tagName)i=i.contentDocument.activeElement;else for(;i.shadowRoot;)i=i.shadowRoot.activeElement;if(s(r=i,"input,[contenteditable]")||s(r,"select,[contenteditable]")||s(r,"textarea,[contenteditable]")||s(r,"button,[contenteditable]"))return}var o=0,a=0;switch(n.which){case 37:o=n.metaKey?-e.contentWidth:n.altKey?-e.containerWidth:-30;break;case 38:a=n.metaKey?e.contentHeight:n.altKey?e.containerHeight:30;break;case 39:o=n.metaKey?e.contentWidth:n.altKey?e.containerWidth:30;break;case 40:a=n.metaKey?-e.contentHeight:n.altKey?-e.containerHeight:-30;break;case 32:a=n.shiftKey?e.containerHeight:-e.containerHeight;break;case 33:a=e.containerHeight;break;case 34:a=-e.containerHeight;break;case 36:a=e.contentHeight;break;case 35:a=-e.contentHeight;break;default:return}e.settings.suppressScrollX&&0!==o||e.settings.suppressScrollY&&0!==a||(t.scrollTop-=a,t.scrollLeft+=o,_(e),function(n,r){var i=Math.floor(t.scrollTop);if(0===n){if(!e.scrollbarYActive)return!1;if(0===i&&r>0||i>=e.contentHeight-e.containerHeight&&r<0)return!e.settings.wheelPropagation}var o=t.scrollLeft;if(0===r){if(!e.scrollbarXActive)return!1;if(0===o&&n<0||o>=e.contentWidth-e.containerWidth&&n>0)return!e.settings.wheelPropagation}return!0}(o,a)&&n.preventDefault())}})},wheel:function(e){var t=e.element;function n(n){var i=function(e){var t=e.deltaX,n=-1*e.deltaY;return"undefined"!==typeof t&&"undefined"!==typeof n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!==t&&n!==n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}(n),o=i[0],a=i[1];if(!function(e,n,i){if(!w.isWebKit&&t.querySelector("select:focus"))return!0;if(!t.contains(e))return!1;for(var o=e;o&&o!==t;){if(o.classList.contains(l.element.consuming))return!0;var a=r(o);if(i&&a.overflowY.match(/(scroll|auto)/)){var s=o.scrollHeight-o.clientHeight;if(s>0&&(o.scrollTop>0&&i<0||o.scrollTop<s&&i>0))return!0}if(n&&a.overflowX.match(/(scroll|auto)/)){var u=o.scrollWidth-o.clientWidth;if(u>0&&(o.scrollLeft>0&&n<0||o.scrollLeft<u&&n>0))return!0}o=o.parentNode}return!1}(n.target,o,a)){var s=!1;e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(a?t.scrollTop-=a*e.settings.wheelSpeed:t.scrollTop+=o*e.settings.wheelSpeed,s=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(o?t.scrollLeft+=o*e.settings.wheelSpeed:t.scrollLeft-=a*e.settings.wheelSpeed,s=!0):(t.scrollTop-=a*e.settings.wheelSpeed,t.scrollLeft+=o*e.settings.wheelSpeed),_(e),(s=s||function(n,r){var i=Math.floor(t.scrollTop),o=0===t.scrollTop,a=i+t.offsetHeight===t.scrollHeight,s=0===t.scrollLeft,u=t.scrollLeft+t.offsetWidth===t.scrollWidth;return!(Math.abs(r)>Math.abs(n)?o||a:s||u)||!e.settings.wheelPropagation}(o,a))&&!n.ctrlKey&&(n.stopPropagation(),n.preventDefault())}}"undefined"!==typeof window.onwheel?e.event.bind(t,"wheel",n):"undefined"!==typeof window.onmousewheel&&e.event.bind(t,"mousewheel",n)},touch:function(e){if(w.supportsTouch||w.supportsIePointer){var t=e.element,n={},i=0,o={},a=null;w.supportsTouch?(e.event.bind(t,"touchstart",h),e.event.bind(t,"touchmove",f),e.event.bind(t,"touchend",p)):w.supportsIePointer&&(window.PointerEvent?(e.event.bind(t,"pointerdown",h),e.event.bind(t,"pointermove",f),e.event.bind(t,"pointerup",p)):window.MSPointerEvent&&(e.event.bind(t,"MSPointerDown",h),e.event.bind(t,"MSPointerMove",f),e.event.bind(t,"MSPointerUp",p)))}function s(n,r){t.scrollTop-=r,t.scrollLeft-=n,_(e)}function u(e){return e.targetTouches?e.targetTouches[0]:e}function c(e){return(!e.pointerType||"pen"!==e.pointerType||0!==e.buttons)&&(!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE))}function h(e){if(c(e)){var t=u(e);n.pageX=t.pageX,n.pageY=t.pageY,i=(new Date).getTime(),null!==a&&clearInterval(a)}}function f(a){if(c(a)){var h=u(a),f={pageX:h.pageX,pageY:h.pageY},p=f.pageX-n.pageX,d=f.pageY-n.pageY;if(function(e,n,i){if(!t.contains(e))return!1;for(var o=e;o&&o!==t;){if(o.classList.contains(l.element.consuming))return!0;var a=r(o);if(i&&a.overflowY.match(/(scroll|auto)/)){var s=o.scrollHeight-o.clientHeight;if(s>0&&(o.scrollTop>0&&i<0||o.scrollTop<s&&i>0))return!0}if(n&&a.overflowX.match(/(scroll|auto)/)){var u=o.scrollWidth-o.clientWidth;if(u>0&&(o.scrollLeft>0&&n<0||o.scrollLeft<u&&n>0))return!0}o=o.parentNode}return!1}(a.target,p,d))return;s(p,d),n=f;var m=(new Date).getTime(),y=m-i;y>0&&(o.x=p/y,o.y=d/y,i=m),function(n,r){var i=Math.floor(t.scrollTop),o=t.scrollLeft,a=Math.abs(n),s=Math.abs(r);if(s>a){if(r<0&&i===e.contentHeight-e.containerHeight||r>0&&0===i)return 0===window.scrollY&&r>0&&w.isChrome}else if(a>s&&(n<0&&o===e.contentWidth-e.containerWidth||n>0&&0===o))return!0;return!0}(p,d)&&a.preventDefault()}}function p(){e.settings.swipeEasing&&(clearInterval(a),a=setInterval(function(){e.isInitialized?clearInterval(a):o.x||o.y?Math.abs(o.x)<.01&&Math.abs(o.y)<.01?clearInterval(a):(s(30*o.x,30*o.y),o.x*=.8,o.y*=.8):clearInterval(a)},10))}}},C=function(e,t){var n=this;if(void 0===t&&(t={}),"string"===typeof e&&(e=document.querySelector(e)),!e||!e.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");for(var a in this.element=e,e.classList.add(l.main),this.settings={handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1},t)this.settings[a]=t[a];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var s=function(){return e.classList.add(l.state.focus)},u=function(){return e.classList.remove(l.state.focus)};this.isRtl="rtl"===r(e).direction,!0===this.isRtl&&e.classList.add(l.rtl),this.isNegativeScroll=function(){var t,n=e.scrollLeft;return e.scrollLeft=-1,t=e.scrollLeft<0,e.scrollLeft=n,t}(),this.negativeScrollAdjustment=this.isNegativeScroll?e.scrollWidth-e.clientWidth:0,this.event=new y,this.ownerDocument=e.ownerDocument||document,this.scrollbarXRail=o(l.element.rail("x")),e.appendChild(this.scrollbarXRail),this.scrollbarX=o(l.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",s),this.event.bind(this.scrollbarX,"blur",u),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var c=r(this.scrollbarXRail);this.scrollbarXBottom=parseInt(c.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=b(c.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=b(c.borderLeftWidth)+b(c.borderRightWidth),i(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=b(c.marginLeft)+b(c.marginRight),i(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=o(l.element.rail("y")),e.appendChild(this.scrollbarYRail),this.scrollbarY=o(l.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",s),this.event.bind(this.scrollbarY,"blur",u),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var h=r(this.scrollbarYRail);this.scrollbarYRight=parseInt(h.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=b(h.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?function(e){var t=r(e);return b(t.width)+b(t.paddingLeft)+b(t.paddingRight)+b(t.borderLeftWidth)+b(t.borderRightWidth)}(this.scrollbarY):null,this.railBorderYWidth=b(h.borderTopWidth)+b(h.borderBottomWidth),i(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=b(h.marginTop)+b(h.marginBottom),i(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:e.scrollLeft<=0?"start":e.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:e.scrollTop<=0?"start":e.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(e){return S[e](n)}),this.lastScrollTop=Math.floor(e.scrollTop),this.lastScrollLeft=e.scrollLeft,this.event.bind(this.element,"scroll",function(e){return n.onScroll(e)}),_(this)};C.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,i(this.scrollbarXRail,{display:"block"}),i(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=b(r(this.scrollbarXRail).marginLeft)+b(r(this.scrollbarXRail).marginRight),this.railYMarginHeight=b(r(this.scrollbarYRail).marginTop)+b(r(this.scrollbarYRail).marginBottom),i(this.scrollbarXRail,{display:"none"}),i(this.scrollbarYRail,{display:"none"}),_(this),v(this,"top",0,!1,!0),v(this,"left",0,!1,!0),i(this.scrollbarXRail,{display:""}),i(this.scrollbarYRail,{display:""}))},C.prototype.onScroll=function(e){this.isAlive&&(_(this),v(this,"top",this.element.scrollTop-this.lastScrollTop),v(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)},C.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),u(this.scrollbarX),u(this.scrollbarY),u(this.scrollbarXRail),u(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},C.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(e){return!e.match(/^ps([-_].+|)$/)}).join(" ")},t.default=C},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){!function(e){"use strict";e.defineMode("markdown",function(t,n){var r=e.getMode(t,"text/html"),i="null"==r.name;void 0===n.highlightFormatting&&(n.highlightFormatting=!1),void 0===n.maxBlockquoteDepth&&(n.maxBlockquoteDepth=0),void 0===n.taskLists&&(n.taskLists=!1),void 0===n.strikethrough&&(n.strikethrough=!1),void 0===n.emoji&&(n.emoji=!1),void 0===n.fencedCodeBlockHighlighting&&(n.fencedCodeBlockHighlighting=!0),void 0===n.fencedCodeBlockDefaultMode&&(n.fencedCodeBlockDefaultMode=""),void 0===n.xml&&(n.xml=!0),void 0===n.tokenTypeOverrides&&(n.tokenTypeOverrides={});var o={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var a in o)o.hasOwnProperty(a)&&n.tokenTypeOverrides[a]&&(o[a]=n.tokenTypeOverrides[a]);var s=/^([*\-_])(?:\s*\1){2,}\s*$/,u=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,c=/^\[(x| )\](?=\s)/i,l=n.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,h=/^ {0,3}(?:\={1,}|-{2,})\s*$/,f=/^[^#!\[\]*_\\<>` "'(~:]+/,p=/^(~~~+|```+)[ \t]*([\w+#-]*)[^\n`]*$/,d=/^\s*\[[^\]]+?\]:.*$/,m=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function y(e,t,n){return t.f=t.inline=n,n(e,t)}function g(e,t,n){return t.f=t.block=n,n(e,t)}function v(t){if(t.linkTitle=!1,t.linkHref=!1,t.linkText=!1,t.em=!1,t.strong=!1,t.strikethrough=!1,t.quote=0,t.indentedCode=!1,t.f==w){var n=i;if(!n){var o=e.innerMode(r,t.htmlState);n="xml"==o.mode.name&&null===o.state.tagStart&&!o.state.context&&o.state.tokenize.isInText}n&&(t.f=S,t.block=b,t.htmlState=null)}return t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.prevLine=t.thisLine,t.thisLine={stream:null},null}function b(r,i){var a,f=r.column()===i.indentation,m=!(a=i.prevLine.stream)||!/\S/.test(a.string),g=i.indentedCode,v=i.prevLine.hr,b=!1!==i.list,w=(i.listStack[i.listStack.length-1]||0)+3;i.indentedCode=!1;var T=i.indentation;if(null===i.indentationDiff&&(i.indentationDiff=i.indentation,b)){for(i.list=null;T<i.listStack[i.listStack.length-1];)i.listStack.pop(),i.listStack.length?i.indentation=i.listStack[i.listStack.length-1]:i.list=!1;!1!==i.list&&(i.indentationDiff=T-i.listStack[i.listStack.length-1])}var S=!m&&!v&&!i.prevLine.header&&(!b||!g)&&!i.prevLine.fencedCodeEnd,C=(!1===i.list||v||m)&&i.indentation<=w&&r.match(s),k=null;if(i.indentationDiff>=4&&(g||i.prevLine.fencedCodeEnd||i.prevLine.header||m))return r.skipToEnd(),i.indentedCode=!0,o.code;if(r.eatSpace())return null;if(f&&i.indentation<=w&&(k=r.match(l))&&k[1].length<=6)return i.quote=0,i.header=k[1].length,i.thisLine.header=!0,n.highlightFormatting&&(i.formatting="header"),i.f=i.inline,E(i);if(i.indentation<=w&&r.eat(">"))return i.quote=f?1:i.quote+1,n.highlightFormatting&&(i.formatting="quote"),r.eatSpace(),E(i);if(!C&&!i.setext&&f&&i.indentation<=w&&(k=r.match(u))){var I=k[1]?"ol":"ul";return i.indentation=T+r.current().length,i.list=!0,i.quote=0,i.listStack.push(i.indentation),i.em=!1,i.strong=!1,i.code=!1,i.strikethrough=!1,n.taskLists&&r.match(c,!1)&&(i.taskList=!0),i.f=i.inline,n.highlightFormatting&&(i.formatting=["list","list-"+I]),E(i)}return f&&i.indentation<=w&&(k=r.match(p,!0))?(i.quote=0,i.fencedEndRE=new RegExp(k[1]+"+ *$"),i.localMode=n.fencedCodeBlockHighlighting&&function(n){if(e.findModeByName){var r=e.findModeByName(n);r&&(n=r.mime||r.mimes[0])}var i=e.getMode(t,n);return"null"==i.name?null:i}(k[2]||n.fencedCodeBlockDefaultMode),i.localMode&&(i.localState=e.startState(i.localMode)),i.f=i.block=_,n.highlightFormatting&&(i.formatting="code-block"),i.code=-1,E(i)):i.setext||!(S&&b||i.quote||!1!==i.list||i.code||C||d.test(r.string))&&(k=r.lookAhead(1))&&(k=k.match(h))?(i.setext?(i.header=i.setext,i.setext=0,r.skipToEnd(),n.highlightFormatting&&(i.formatting="header")):(i.header="="==k[0].charAt(0)?1:2,i.setext=i.header),i.thisLine.header=!0,i.f=i.inline,E(i)):C?(r.skipToEnd(),i.hr=!0,i.thisLine.hr=!0,o.hr):"["===r.peek()?y(r,i,x):y(r,i,i.inline)}function w(t,n){var o=r.token(t,n.htmlState);if(!i){var a=e.innerMode(r,n.htmlState);("xml"==a.mode.name&&null===a.state.tagStart&&!a.state.context&&a.state.tokenize.isInText||n.md_inside&&t.current().indexOf(">")>-1)&&(n.f=S,n.block=b,n.htmlState=null)}return o}function _(e,t){var r,i=t.listStack[t.listStack.length-1]||0,a=t.indentation<i,s=i+3;return t.fencedEndRE&&t.indentation<=s&&(a||e.match(t.fencedEndRE))?(n.highlightFormatting&&(t.formatting="code-block"),a||(r=E(t)),t.localMode=t.localState=null,t.block=b,t.f=S,t.fencedEndRE=null,t.code=0,t.thisLine.fencedCodeEnd=!0,a?g(e,t,t.block):r):t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),o.code)}function E(e){var t=[];if(e.formatting){t.push(o.formatting),"string"===typeof e.formatting&&(e.formatting=[e.formatting]);for(var r=0;r<e.formatting.length;r++)t.push(o.formatting+"-"+e.formatting[r]),"header"===e.formatting[r]&&t.push(o.formatting+"-"+e.formatting[r]+"-"+e.header),"quote"===e.formatting[r]&&(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(o.formatting+"-"+e.formatting[r]+"-"+e.quote):t.push("error"))}if(e.taskOpen)return t.push("meta"),t.length?t.join(" "):null;if(e.taskClosed)return t.push("property"),t.length?t.join(" "):null;if(e.linkHref?t.push(o.linkHref,"url"):(e.strong&&t.push(o.strong),e.em&&t.push(o.em),e.strikethrough&&t.push(o.strikethrough),e.emoji&&t.push(o.emoji),e.linkText&&t.push(o.linkText),e.code&&t.push(o.code),e.image&&t.push(o.image),e.imageAltText&&t.push(o.imageAltText,"link"),e.imageMarker&&t.push(o.imageMarker)),e.header&&t.push(o.header,o.header+"-"+e.header),e.quote&&(t.push(o.quote),!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(o.quote+"-"+e.quote):t.push(o.quote+"-"+n.maxBlockquoteDepth)),!1!==e.list){var i=(e.listStack.length-1)%3;i?1===i?t.push(o.list2):t.push(o.list3):t.push(o.list1)}return e.trailingSpaceNewLine?t.push("trailing-space-new-line"):e.trailingSpace&&t.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),t.length?t.join(" "):null}function T(e,t){if(e.match(f,!0))return E(t)}function S(t,i){var a=i.text(t,i);if("undefined"!==typeof a)return a;if(i.list)return i.list=null,E(i);if(i.taskList){var s=" "===t.match(c,!0)[1];return s?i.taskOpen=!0:i.taskClosed=!0,n.highlightFormatting&&(i.formatting="task"),i.taskList=!1,E(i)}if(i.taskOpen=!1,i.taskClosed=!1,i.header&&t.match(/^#+$/,!0))return n.highlightFormatting&&(i.formatting="header"),E(i);var u=t.next();if(i.linkTitle){i.linkTitle=!1;var l=u;"("===u&&(l=")");var h="^\\s*(?:[^"+(l=(l+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+l;if(t.match(new RegExp(h),!0))return o.linkHref}if("`"===u){var f=i.formatting;n.highlightFormatting&&(i.formatting="code"),t.eatWhile("`");var p=t.current().length;if(0!=i.code||i.quote&&1!=p){if(p==i.code){var d=E(i);return i.code=0,d}return i.formatting=f,E(i)}return i.code=p,E(i)}if(i.code)return E(i);if("\\"===u&&(t.next(),n.highlightFormatting)){var y=E(i),v=o.formatting+"-escape";return y?y+" "+v:v}if("!"===u&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return i.imageMarker=!0,i.image=!0,n.highlightFormatting&&(i.formatting="image"),E(i);if("["===u&&i.imageMarker&&t.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return i.imageMarker=!1,i.imageAltText=!0,n.highlightFormatting&&(i.formatting="image"),E(i);if("]"===u&&i.imageAltText){n.highlightFormatting&&(i.formatting="image");var y=E(i);return i.imageAltText=!1,i.image=!1,i.inline=i.f=k,y}if("["===u&&!i.image)return i.linkText&&t.match(/^.*?\]/)?E(i):(i.linkText=!0,n.highlightFormatting&&(i.formatting="link"),E(i));if("]"===u&&i.linkText){n.highlightFormatting&&(i.formatting="link");var y=E(i);return i.linkText=!1,i.inline=i.f=t.match(/\(.*?\)| ?\[.*?\]/,!1)?k:S,y}if("<"===u&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){i.f=i.inline=C,n.highlightFormatting&&(i.formatting="link");var y=E(i);return y?y+=" ":y="",y+o.linkInline}if("<"===u&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){i.f=i.inline=C,n.highlightFormatting&&(i.formatting="link");var y=E(i);return y?y+=" ":y="",y+o.linkEmail}if(n.xml&&"<"===u&&t.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var b=t.string.indexOf(">",t.pos);if(-1!=b){var _=t.string.substring(t.start,b);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(_)&&(i.md_inside=!0)}return t.backUp(1),i.htmlState=e.startState(r),g(t,i,w)}if(n.xml&&"<"===u&&t.match(/^\/\w*?>/))return i.md_inside=!1,"tag";if("*"===u||"_"===u){for(var T=1,I=1==t.pos?" ":t.string.charAt(t.pos-2);T<3&&t.eat(u);)T++;var x=t.peek()||" ",N=!/\s/.test(x)&&(!m.test(x)||/\s/.test(I)||m.test(I)),A=!/\s/.test(I)&&(!m.test(I)||/\s/.test(x)||m.test(x)),O=null,D=null;if(T%2&&(i.em||!N||"*"!==u&&A&&!m.test(I)?i.em!=u||!A||"*"!==u&&N&&!m.test(x)||(O=!1):O=!0),T>1&&(i.strong||!N||"*"!==u&&A&&!m.test(I)?i.strong!=u||!A||"*"!==u&&N&&!m.test(x)||(D=!1):D=!0),null!=D||null!=O){n.highlightFormatting&&(i.formatting=null==O?"strong":null==D?"em":"strong em"),!0===O&&(i.em=u),!0===D&&(i.strong=u);var d=E(i);return!1===O&&(i.em=!1),!1===D&&(i.strong=!1),d}}else if(" "===u&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return E(i);t.backUp(1)}if(n.strikethrough)if("~"===u&&t.eatWhile(u)){if(i.strikethrough){n.highlightFormatting&&(i.formatting="strikethrough");var d=E(i);return i.strikethrough=!1,d}if(t.match(/^[^\s]/,!1))return i.strikethrough=!0,n.highlightFormatting&&(i.formatting="strikethrough"),E(i)}else if(" "===u&&t.match(/^~~/,!0)){if(" "===t.peek())return E(i);t.backUp(2)}if(n.emoji&&":"===u&&t.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){i.emoji=!0,n.highlightFormatting&&(i.formatting="emoji");var R=E(i);return i.emoji=!1,R}return" "===u&&(t.match(/^ +$/,!1)?i.trailingSpace++:i.trailingSpace&&(i.trailingSpaceNewLine=!0)),E(i)}function C(e,t){var r=e.next();if(">"===r){t.f=t.inline=S,n.highlightFormatting&&(t.formatting="link");var i=E(t);return i?i+=" ":i="",i+o.linkInline}return e.match(/^[^>]+/,!0),o.linkInline}function k(e,t){if(e.eatSpace())return null;var r,i=e.next();return"("===i||"["===i?(t.f=t.inline=(r="("===i?")":"]",function(e,t){var i=e.next();if(i===r){t.f=t.inline=S,n.highlightFormatting&&(t.formatting="link-string");var o=E(t);return t.linkHref=!1,o}return e.match(I[r]),t.linkHref=!0,E(t)}),n.highlightFormatting&&(t.formatting="link-string"),t.linkHref=!0,E(t)):"error"}var I={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function x(e,t){return e.match(/^([^\]\\]|\\.)*\]:/,!1)?(t.f=N,e.next(),n.highlightFormatting&&(t.formatting="link"),t.linkText=!0,E(t)):y(e,t,S)}function N(e,t){if(e.match(/^\]:/,!0)){t.f=t.inline=A,n.highlightFormatting&&(t.formatting="link");var r=E(t);return t.linkText=!1,r}return e.match(/^([^\]\\]|\\.)+/,!0),o.linkText}function A(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=S,o.linkHref+" url")}var O={startState:function(){return{f:b,prevLine:{stream:null},thisLine:{stream:null},block:b,htmlState:null,indentation:0,inline:S,text:T,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(t){return{f:t.f,prevLine:t.prevLine,thisLine:t.thisLine,block:t.block,htmlState:t.htmlState&&e.copyState(r,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?e.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,formatting:!1,linkText:t.linkText,linkTitle:t.linkTitle,linkHref:t.linkHref,code:t.code,em:t.em,strong:t.strong,strikethrough:t.strikethrough,emoji:t.emoji,header:t.header,setext:t.setext,hr:t.hr,taskList:t.taskList,list:t.list,listStack:t.listStack.slice(0),quote:t.quote,indentedCode:t.indentedCode,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside,fencedEndRE:t.fencedEndRE}},token:function(e,t){if(t.formatting=!1,e!=t.thisLine.stream){if(t.header=0,t.hr=!1,e.match(/^\s*$/,!0))return v(t),null;if(t.prevLine=t.thisLine,t.thisLine={stream:e},t.taskList=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,!t.localState&&(t.f=t.block,t.f!=w)){var n=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(t.indentation=n,t.indentationDiff=null,n>0)return null}}return t.f(e,t)},innerMode:function(e){return e.block==w?{state:e.htmlState,mode:r}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:O}},indent:function(t,n,i){return t.block==w&&r.indent?r.indent(t.htmlState,n,i):t.localState&&t.localMode.indent?t.localMode.indent(t.localState,n,i):e.Pass},blankLine:v,getType:E,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return O},"xml"),e.defineMIME("text/markdown","markdown"),e.defineMIME("text/x-markdown","markdown")}(n(53),n(179),n(303))},function(e,t,n){!function(e){"use strict";e.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]}];for(var t=0;t<e.modeInfo.length;t++){var n=e.modeInfo[t];n.mimes&&(n.mime=n.mimes[0])}e.findModeByMIME=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.mime==t)return r;if(r.mimes)for(var i=0;i<r.mimes.length;i++)if(r.mimes[i]==t)return r}return/\+xml$/.test(t)?e.findModeByMIME("application/xml"):/\+json$/.test(t)?e.findModeByMIME("application/json"):void 0},e.findModeByExtension=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.ext)for(var i=0;i<r.ext.length;i++)if(r.ext[i]==t)return r}},e.findModeByFileName=function(t){for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.file&&r.file.test(t))return r}var i=t.lastIndexOf("."),o=i>-1&&t.substring(i+1,t.length);if(o)return e.findModeByExtension(o)},e.findModeByName=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.name.toLowerCase()==t)return r;if(r.alias)for(var i=0;i<r.alias.length;i++)if(r.alias[i].toLowerCase()==t)return r}}}(n(53))},function(e,t,n){!function(e){"use strict";e.defineMode("javascript",function(t,n){var r,i,o=t.indentUnit,a=n.statementIndent,s=n.jsonld,u=n.json||s,c=n.typescript,l=n.wordCharacters||/[\w$\xa1-\uffff]/,h=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),i=e("keyword d"),o=e("operator"),a={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:n,do:n,try:n,finally:n,return:i,break:i,continue:i,new:e("new"),delete:r,void:r,throw:r,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:o,typeof:o,instanceof:o,true:a,false:a,null:a,undefined:a,NaN:a,Infinity:a,this:e("this"),class:e("class"),super:e("atom"),yield:r,export:e("export"),import:e("import"),extends:r,await:r}}(),f=/[+\-*&%=<>!?|~^@]/,p=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function d(e,t,n){return r=e,i=n,t}function m(e,t){var n,r=e.next();if('"'==r||"'"==r)return t.tokenize=(n=r,function(e,t){var r,i=!1;if(s&&"@"==e.peek()&&e.match(p))return t.tokenize=m,d("jsonld-keyword","meta");for(;null!=(r=e.next())&&(r!=n||i);)i=!i&&"\\"==r;return i||(t.tokenize=m),d("string","string")}),t.tokenize(e,t);if("."==r&&e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return d("number","number");if("."==r&&e.match(".."))return d("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return d(r);if("="==r&&e.eat(">"))return d("=>","operator");if("0"==r&&e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return d("number","number");if(/\d/.test(r))return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),d("number","number");if("/"==r)return e.eat("*")?(t.tokenize=y,y(e,t)):e.eat("/")?(e.skipToEnd(),d("comment","comment")):Ge(e,t,1)?(function(e){for(var t,n=!1,r=!1;null!=(t=e.next());){if(!n){if("/"==t&&!r)return;"["==t?r=!0:r&&"]"==t&&(r=!1)}n=!n&&"\\"==t}}(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),d("regexp","string-2")):(e.eat("="),d("operator","operator",e.current()));if("`"==r)return t.tokenize=g,g(e,t);if("#"==r&&"!"==e.peek())return e.skipToEnd(),d("meta","meta");if("#"==r&&e.eatWhile(l))return d("variable","property");if("<"==r&&e.match("!--")||"-"==r&&e.match("->"))return e.skipToEnd(),d("comment","comment");if(f.test(r))return">"==r&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=r&&"="!=r||e.eat("="):/[<>*+\-]/.test(r)&&(e.eat(r),">"==r&&e.eat(r))),"?"==r&&e.eat(".")?d("."):d("operator","operator",e.current());if(l.test(r)){e.eatWhile(l);var i=e.current();if("."!=t.lastType){if(h.propertyIsEnumerable(i)){var o=h[i];return d(o.type,o.style,i)}if("async"==i&&e.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/,!1))return d("async","keyword",i)}return d("variable","variable",i)}}function y(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=m;break}r="*"==n}return d("comment","comment")}function g(e,t){for(var n,r=!1;null!=(n=e.next());){if(!r&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=m;break}r=!r&&"\\"==n}return d("quasi","string-2",e.current())}var v="([{}])";function b(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){if(c){var r=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,n));r&&(n=r.index)}for(var i=0,o=!1,a=n-1;a>=0;--a){var s=e.string.charAt(a),u=v.indexOf(s);if(u>=0&&u<3){if(!i){++a;break}if(0==--i){"("==s&&(o=!0);break}}else if(u>=3&&u<6)++i;else if(l.test(s))o=!0;else if(/["'\/`]/.test(s))for(;;--a){if(0==a)return;var h=e.string.charAt(a-1);if(h==s&&"\\"!=e.string.charAt(a-2)){a--;break}}else if(o&&!i){++a;break}}o&&!i&&(t.fatArrowAt=a)}}var w={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function _(e,t,n,r,i,o){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=o,null!=r&&(this.align=r)}function E(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(var n=r.vars;n;n=n.next)if(n.name==t)return!0}var T={state:null,column:null,marked:null,cc:null};function S(){for(var e=arguments.length-1;e>=0;e--)T.cc.push(arguments[e])}function C(){return S.apply(null,arguments),!0}function k(e,t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}function I(e){var t=T.state;if(T.marked="def",t.context)if("var"==t.lexical.info&&t.context&&t.context.block){var r=function e(t,n){if(n){if(n.block){var r=e(t,n.prev);return r?r==n.prev?n:new N(r,n.vars,!0):null}return k(t,n.vars)?n:new N(n.prev,new A(t,n.vars),!1)}return null}(e,t.context);if(null!=r)return void(t.context=r)}else if(!k(e,t.localVars))return void(t.localVars=new A(e,t.localVars));n.globalVars&&!k(e,t.globalVars)&&(t.globalVars=new A(e,t.globalVars))}function x(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}function N(e,t,n){this.prev=e,this.vars=t,this.block=n}function A(e,t){this.name=e,this.next=t}var O=new A("this",new A("arguments",null));function D(){T.state.context=new N(T.state.context,T.state.localVars,!1),T.state.localVars=O}function R(){T.state.context=new N(T.state.context,T.state.localVars,!0),T.state.localVars=null}function P(){T.state.localVars=T.state.context.vars,T.state.context=T.state.context.prev}function M(e,t){var n=function(){var n=T.state,r=n.indented;if("stat"==n.lexical.type)r=n.lexical.indented;else for(var i=n.lexical;i&&")"==i.type&&i.align;i=i.prev)r=i.indented;n.lexical=new _(r,T.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function L(){var e=T.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function F(e){return function t(n){return n==e?C():";"==e||"}"==n||")"==n||"]"==n?S():C(t)}}function U(e,t){return"var"==e?C(M("vardef",t),be,F(";"),L):"keyword a"==e?C(M("form"),V,U,L):"keyword b"==e?C(M("form"),U,L):"keyword d"==e?T.stream.match(/^\s*$/,!1)?C():C(M("stat"),z,F(";"),L):"debugger"==e?C(F(";")):"{"==e?C(M("}"),R,ae,L,P):";"==e?C():"if"==e?("else"==T.state.lexical.info&&T.state.cc[T.state.cc.length-1]==L&&T.state.cc.pop()(),C(M("form"),V,U,L,Ce)):"function"==e?C(Ne):"for"==e?C(M("form"),ke,U,L):"class"==e||c&&"interface"==t?(T.marked="keyword",C(M("form","class"==e?e:t),Pe,L)):"variable"==e?c&&"declare"==t?(T.marked="keyword",C(U)):c&&("module"==t||"enum"==t||"type"==t)&&T.stream.match(/^\s*\w/,!1)?(T.marked="keyword","enum"==t?C(Ke):"type"==t?C(Oe,F("operator"),he,F(";")):C(M("form"),we,F("{"),M("}"),ae,L,L)):c&&"namespace"==t?(T.marked="keyword",C(M("form"),q,U,L)):c&&"abstract"==t?(T.marked="keyword",C(U)):C(M("stat"),Z):"switch"==e?C(M("form"),V,F("{"),M("}","switch"),R,ae,L,L,P):"case"==e?C(q,F(":")):"default"==e?C(F(":")):"catch"==e?C(M("form"),D,j,U,L,P):"export"==e?C(M("stat"),Ue,L):"import"==e?C(M("stat"),qe,L):"async"==e?C(U):"@"==t?C(q,U):S(M("stat"),q,F(";"),L)}function j(e){if("("==e)return C(De,F(")"))}function q(e,t){return W(e,t,!1)}function B(e,t){return W(e,t,!0)}function V(e){return"("!=e?S():C(M(")"),z,F(")"),L)}function W(e,t,n){if(T.state.fatArrowAt==T.stream.start){var r=n?X:Y;if("("==e)return C(D,M(")"),ie(De,")"),L,F("=>"),r,P);if("variable"==e)return S(D,we,F("=>"),r,P)}var i=n?K:H;return w.hasOwnProperty(e)?C(i):"function"==e?C(Ne,i):"class"==e||c&&"interface"==t?(T.marked="keyword",C(M("form"),Re,L)):"keyword c"==e||"async"==e?C(n?B:q):"("==e?C(M(")"),z,F(")"),L,i):"operator"==e||"spread"==e?C(n?B:q):"["==e?C(M("]"),He,L,i):"{"==e?oe(te,"}",null,i):"quasi"==e?S(Q,i):"new"==e?C(function(e){return function(t){return"."==t?C(e?J:$):"variable"==t&&c?C(ye,e?K:H):S(e?B:q)}}(n)):"import"==e?C(q):C()}function z(e){return e.match(/[;\}\)\],]/)?S():S(q)}function H(e,t){return","==e?C(z):K(e,t,!1)}function K(e,t,n){var r=0==n?H:K,i=0==n?q:B;return"=>"==e?C(D,n?X:Y,P):"operator"==e?/\+\+|--/.test(t)||c&&"!"==t?C(r):c&&"<"==t&&T.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?C(M(">"),ie(he,">"),L,r):"?"==t?C(q,F(":"),i):C(i):"quasi"==e?S(Q,r):";"!=e?"("==e?oe(B,")","call",r):"."==e?C(ee,r):"["==e?C(M("]"),z,F("]"),L,r):c&&"as"==t?(T.marked="keyword",C(he,r)):"regexp"==e?(T.state.lastType=T.marked="operator",T.stream.backUp(T.stream.pos-T.stream.start-1),C(i)):void 0:void 0}function Q(e,t){return"quasi"!=e?S():"${"!=t.slice(t.length-2)?C(Q):C(q,G)}function G(e){if("}"==e)return T.marked="string-2",T.state.tokenize=g,C(Q)}function Y(e){return b(T.stream,T.state),S("{"==e?U:q)}function X(e){return b(T.stream,T.state),S("{"==e?U:B)}function $(e,t){if("target"==t)return T.marked="keyword",C(H)}function J(e,t){if("target"==t)return T.marked="keyword",C(K)}function Z(e){return":"==e?C(L,U):S(H,F(";"),L)}function ee(e){if("variable"==e)return T.marked="property",C()}function te(e,t){return"async"==e?(T.marked="property",C(te)):"variable"==e||"keyword"==T.style?(T.marked="property","get"==t||"set"==t?C(ne):(c&&T.state.fatArrowAt==T.stream.start&&(n=T.stream.match(/^\s*:\s*/,!1))&&(T.state.fatArrowAt=T.stream.pos+n[0].length),C(re))):"number"==e||"string"==e?(T.marked=s?"property":T.style+" property",C(re)):"jsonld-keyword"==e?C(re):c&&x(t)?(T.marked="keyword",C(te)):"["==e?C(q,se,F("]"),re):"spread"==e?C(B,re):"*"==t?(T.marked="keyword",C(te)):":"==e?S(re):void 0;var n}function ne(e){return"variable"!=e?S(re):(T.marked="property",C(Ne))}function re(e){return":"==e?C(B):"("==e?S(Ne):void 0}function ie(e,t,n){function r(i,o){if(n?n.indexOf(i)>-1:","==i){var a=T.state.lexical;return"call"==a.info&&(a.pos=(a.pos||0)+1),C(function(n,r){return n==t||r==t?S():S(e)},r)}return i==t||o==t?C():n&&n.indexOf(";")>-1?S(e):C(F(t))}return function(n,i){return n==t||i==t?C():S(e,r)}}function oe(e,t,n){for(var r=3;r<arguments.length;r++)T.cc.push(arguments[r]);return C(M(t,n),ie(e,t),L)}function ae(e){return"}"==e?C():S(U,ae)}function se(e,t){if(c){if(":"==e)return C(he);if("?"==t)return C(se)}}function ue(e,t){if(c&&(":"==e||"in"==t))return C(he)}function ce(e){if(c&&":"==e)return T.stream.match(/^\s*\w+\s+is\b/,!1)?C(q,le,he):C(he)}function le(e,t){if("is"==t)return T.marked="keyword",C()}function he(e,t){return"keyof"==t||"typeof"==t||"infer"==t?(T.marked="keyword",C("typeof"==t?B:he)):"variable"==e||"void"==t?(T.marked="type",C(me)):"|"==t||"&"==t?C(he):"string"==e||"number"==e||"atom"==e?C(me):"["==e?C(M("]"),ie(he,"]",","),L,me):"{"==e?C(M("}"),ie(pe,"}",",;"),L,me):"("==e?C(ie(de,")"),fe,me):"<"==e?C(ie(he,">"),he):void 0}function fe(e){if("=>"==e)return C(he)}function pe(e,t){return"variable"==e||"keyword"==T.style?(T.marked="property",C(pe)):"?"==t||"number"==e||"string"==e?C(pe):":"==e?C(he):"["==e?C(F("variable"),ue,F("]"),pe):"("==e?S(Ae,pe):void 0}function de(e,t){return"variable"==e&&T.stream.match(/^\s*[?:]/,!1)||"?"==t?C(de):":"==e?C(he):"spread"==e?C(de):S(he)}function me(e,t){return"<"==t?C(M(">"),ie(he,">"),L,me):"|"==t||"."==e||"&"==t?C(he):"["==e?C(he,F("]"),me):"extends"==t||"implements"==t?(T.marked="keyword",C(he)):"?"==t?C(he,F(":"),he):void 0}function ye(e,t){if("<"==t)return C(M(">"),ie(he,">"),L,me)}function ge(){return S(he,ve)}function ve(e,t){if("="==t)return C(he)}function be(e,t){return"enum"==t?(T.marked="keyword",C(Ke)):S(we,se,Te,Se)}function we(e,t){return c&&x(t)?(T.marked="keyword",C(we)):"variable"==e?(I(t),C()):"spread"==e?C(we):"["==e?oe(Ee,"]"):"{"==e?oe(_e,"}"):void 0}function _e(e,t){return"variable"!=e||T.stream.match(/^\s*:/,!1)?("variable"==e&&(T.marked="property"),"spread"==e?C(we):"}"==e?S():"["==e?C(q,F("]"),F(":"),_e):C(F(":"),we,Te)):(I(t),C(Te))}function Ee(){return S(we,Te)}function Te(e,t){if("="==t)return C(B)}function Se(e){if(","==e)return C(be)}function Ce(e,t){if("keyword b"==e&&"else"==t)return C(M("form","else"),U,L)}function ke(e,t){return"await"==t?C(ke):"("==e?C(M(")"),Ie,L):void 0}function Ie(e){return"var"==e?C(be,xe):"variable"==e?C(xe):S(xe)}function xe(e,t){return")"==e?C():";"==e?C(xe):"in"==t||"of"==t?(T.marked="keyword",C(q,xe)):S(q,xe)}function Ne(e,t){return"*"==t?(T.marked="keyword",C(Ne)):"variable"==e?(I(t),C(Ne)):"("==e?C(D,M(")"),ie(De,")"),L,ce,U,P):c&&"<"==t?C(M(">"),ie(ge,">"),L,Ne):void 0}function Ae(e,t){return"*"==t?(T.marked="keyword",C(Ae)):"variable"==e?(I(t),C(Ae)):"("==e?C(D,M(")"),ie(De,")"),L,ce,P):c&&"<"==t?C(M(">"),ie(ge,">"),L,Ae):void 0}function Oe(e,t){return"keyword"==e||"variable"==e?(T.marked="type",C(Oe)):"<"==t?C(M(">"),ie(ge,">"),L):void 0}function De(e,t){return"@"==t&&C(q,De),"spread"==e?C(De):c&&x(t)?(T.marked="keyword",C(De)):c&&"this"==e?C(se,Te):S(we,se,Te)}function Re(e,t){return"variable"==e?Pe(e,t):Me(e,t)}function Pe(e,t){if("variable"==e)return I(t),C(Me)}function Me(e,t){return"<"==t?C(M(">"),ie(ge,">"),L,Me):"extends"==t||"implements"==t||c&&","==e?("implements"==t&&(T.marked="keyword"),C(c?he:q,Me)):"{"==e?C(M("}"),Le,L):void 0}function Le(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||c&&x(t))&&T.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(T.marked="keyword",C(Le)):"variable"==e||"keyword"==T.style?(T.marked="property",C(Fe,Le)):"number"==e||"string"==e?C(Fe,Le):"["==e?C(q,se,F("]"),Fe,Le):"*"==t?(T.marked="keyword",C(Le)):c&&"("==e?S(Ae,Le):";"==e||","==e?C(Le):"}"==e?C():"@"==t?C(q,Le):void 0}function Fe(e,t){if("?"==t)return C(Fe);if(":"==e)return C(he,Te);if("="==t)return C(B);var n=T.state.lexical.prev,r=n&&"interface"==n.info;return S(r?Ae:Ne)}function Ue(e,t){return"*"==t?(T.marked="keyword",C(ze,F(";"))):"default"==t?(T.marked="keyword",C(q,F(";"))):"{"==e?C(ie(je,"}"),ze,F(";")):S(U)}function je(e,t){return"as"==t?(T.marked="keyword",C(F("variable"))):"variable"==e?S(B,je):void 0}function qe(e){return"string"==e?C():"("==e?S(q):S(Be,Ve,ze)}function Be(e,t){return"{"==e?oe(Be,"}"):("variable"==e&&I(t),"*"==t&&(T.marked="keyword"),C(We))}function Ve(e){if(","==e)return C(Be,Ve)}function We(e,t){if("as"==t)return T.marked="keyword",C(Be)}function ze(e,t){if("from"==t)return T.marked="keyword",C(q)}function He(e){return"]"==e?C():S(ie(B,"]"))}function Ke(){return S(M("form"),we,F("{"),M("}"),ie(Qe,"}"),L,L)}function Qe(){return S(we,Te)}function Ge(e,t,n){return t.tokenize==m&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}return P.lex=!0,L.lex=!0,{startState:function(e){var t={tokenize:m,lastType:"sof",cc:[],lexical:new _((e||0)-o,0,"block",!1),localVars:n.localVars,context:n.localVars&&new N(null,null,!1),indented:e||0};return n.globalVars&&"object"==typeof n.globalVars&&(t.globalVars=n.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),b(e,t)),t.tokenize!=y&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==r?n:(t.lastType="operator"!=r||"++"!=i&&"--"!=i?r:"incdec",function(e,t,n,r,i){var o=e.cc;for(T.state=e,T.stream=i,T.marked=null,T.cc=o,T.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var a=o.length?o.pop():u?q:U;if(a(n,r)){for(;o.length&&o[o.length-1].lex;)o.pop()();return T.marked?T.marked:"variable"==n&&E(e,r)?"variable-2":t}}}(t,n,r,i,e))},indent:function(t,r){if(t.tokenize==y)return e.Pass;if(t.tokenize!=m)return 0;var i,s=r&&r.charAt(0),u=t.lexical;if(!/^\s*else\b/.test(r))for(var c=t.cc.length-1;c>=0;--c){var l=t.cc[c];if(l==L)u=u.prev;else if(l!=Ce)break}for(;("stat"==u.type||"form"==u.type)&&("}"==s||(i=t.cc[t.cc.length-1])&&(i==H||i==K)&&!/^[,\.=+\-*:?[\(]/.test(r));)u=u.prev;a&&")"==u.type&&"stat"==u.prev.type&&(u=u.prev);var h=u.type,p=s==h;return"vardef"==h?u.indented+("operator"==t.lastType||","==t.lastType?u.info.length+1:0):"form"==h&&"{"==s?u.indented:"form"==h?u.indented+o:"stat"==h?u.indented+(function(e,t){return"operator"==e.lastType||","==e.lastType||f.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}(t,r)?a||o:0):"switch"!=u.info||p||0==n.doubleIndentSwitch?u.align?u.column+(p?0:1):u.indented+(p?0:o):u.indented+(/^(?:case|default)\b/.test(r)?o:2*o)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:u?null:"/*",blockCommentEnd:u?null:"*/",blockCommentContinue:u?null:" * ",lineComment:u?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:u?"json":"javascript",jsonldMode:s,jsonMode:u,expressionAllowed:Ge,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=q&&t!=B||e.cc.pop()}}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(n(53))},,,,,function(e,t,n){"use strict";var r=n(186),i=n.n(r),o=n(1),a=n.n(o),s=n(0),u=n.n(s),c=n(30),l=n(17),h=n.n(l),f=n(23),p=n.n(f),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var y=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=m(this,e.call.apply(e,[this].concat(o))),r.state={match:r.computeMatch(r.props.history.location.pathname)},m(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:d({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},t.prototype.computeMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},t.prototype.componentWillMount=function(){var e=this,t=this.props,n=t.children,r=t.history;p()(null==n||1===a.a.Children.count(n),"A <Router> may have only one child element"),this.unlisten=r.listen(function(){e.setState({match:e.computeMatch(r.location.pathname)})})},t.prototype.componentWillReceiveProps=function(e){h()(this.props.history===e.history,"You cannot change <Router history>")},t.prototype.componentWillUnmount=function(){this.unlisten()},t.prototype.render=function(){var e=this.props.children;return e?a.a.Children.only(e):null},t}(a.a.Component);y.propTypes={history:u.a.object.isRequired,children:u.a.node},y.contextTypes={router:u.a.object},y.childContextTypes={router:u.a.object.isRequired};var g=y;function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var b=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=v(this,e.call.apply(e,[this].concat(o))),r.history=Object(c.b)(r.props),v(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){i()(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")},t.prototype.render=function(){return a.a.createElement(g,{history:this.history,children:this.props.children})},t}(a.a.Component);b.propTypes={basename:u.a.string,getUserConfirmation:u.a.func,hashType:u.a.oneOf(["hashbang","noslash","slash"]),children:u.a.node};t.a=b},function(e,t,n){"use strict";var r=n(1),i=n.n(r),o=n(0),a=n.n(o),s=n(17),u=n.n(s),c=n(23),l=n.n(c),h=n(30),f=n(86),p=n.n(f),d={},m=0,y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"/"===e?e:function(e){var t=e,n=d[t]||(d[t]={});if(n[e])return n[e];var r=p.a.compile(e);return m<1e4&&(n[e]=r,m++),r}(e)(t,{pretty:!0})},g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},t.prototype.componentWillMount=function(){l()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},t.prototype.componentDidMount=function(){this.isStatic()||this.perform()},t.prototype.componentDidUpdate=function(e){var t=Object(h.c)(e.to),n=Object(h.c)(this.props.to);Object(h.d)(t,n)?u()(!1,"You tried to redirect to the same route you're currently on: \""+n.pathname+n.search+'"'):this.perform()},t.prototype.computeTo=function(e){var t=e.computedMatch,n=e.to;return t?"string"===typeof n?y(n,t.params):g({},n,{pathname:y(n.pathname,t.params)}):n},t.prototype.perform=function(){var e=this.context.router.history,t=this.props.push,n=this.computeTo(this.props);t?e.push(n):e.replace(n)},t.prototype.render=function(){return null},t}(i.a.Component);v.propTypes={computedMatch:a.a.object,push:a.a.bool,from:a.a.string,to:a.a.oneOfType([a.a.string,a.a.object]).isRequired},v.defaultProps={push:!1},v.contextTypes={router:a.a.shape({history:a.a.shape({push:a.a.func.isRequired,replace:a.a.func.isRequired}).isRequired,staticContext:a.a.object}).isRequired};var b=v;t.a=b},function(e,t,n){"use strict";var r=n(1),i=n.n(r),o=n(0),a=n.n(o),s=n(17),u=n.n(s),c=n(23),l=n.n(c),h=n(54);var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){l()(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){u()(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),u()(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,n=this.props.location||e.location,r=void 0,o=void 0;return i.a.Children.forEach(t,function(t){if(null==r&&i.a.isValidElement(t)){var a=t.props,s=a.path,u=a.exact,c=a.strict,l=a.sensitive,f=a.from,p=s||f;o=t,r=Object(h.a)(n.pathname,{path:p,exact:u,strict:c,sensitive:l},e.match)}}),r?i.a.cloneElement(o,{location:n,computedMatch:r}):null},t}(i.a.Component);f.contextTypes={router:a.a.shape({route:a.a.object.isRequired}).isRequired},f.propTypes={children:a.a.node,location:a.a.object};var p=f;t.a=p}]]);
//# sourceMappingURL=14.6f879eea.chunk.js.map