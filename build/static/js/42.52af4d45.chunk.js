(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{1311:function(e,t,a){"use strict";a.r(t);var n=a(7),r=a(8),l=a(11),o=a(9),c=a(10),i=a(40),s=a(1),u=a.n(s),d=a(516),m=a(2),p=(a(408),a(409),a(459)),E=a.n(p),h=a(320),f=(a(1072),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={orders:{pag:"1",limit:"20",filFile:"order",filValue:""+a.props.match.params.Order,sorts:[{file:"oderDate",value:1}],rol:a.props.userdate.rol},collapse:!1,accordion:[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.loadReducer("loadOrdersEdit","orders/find/edit",this.state.orders)}},{key:"callList",value:function(){this.props.history.push("/Orders/List")}},{key:"callSave",value:function(e){e.preventDefault(),this.props.history.push("/Orders/List")}},{key:"selects",value:function(e,t){var a=[],n=this.programer.bind(this),r="status_"+t._id,l="unit_"+t._id;if("units"==e&&this.props.obj.listOrdersEditUnits.length>0&&("Entregado"!=t.status||1==this.props.userdate.rol)){var o=this.props.obj.listOrdersEditUnits;return Object.keys(o).forEach(function(n){var r=e+""+n,l=o[n].name+"-"+o[n].supplier;t.unit==o[n].name?a.unshift(u.a.createElement("option",{key:r,value:o[n].name},l)):a.push(u.a.createElement("option",{key:r,value:o[n].name},l))}),u.a.createElement(m.H,{type:"select",onChange:n.bind(this,"unit",l),name:t._id,id:l,key:t.reference},a)}if("status"==e&&this.props.obj.listOrdersEditUnits.length>0&&("Entregado"!=t.status||1==this.props.userdate.rol)){var c=this.props.obj.listOrdersEditStatus;return Object.keys(c).forEach(function(n){var r=e+""+n,l=c[n].name;t.status==c[n].name?a.unshift(u.a.createElement("option",{key:r,value:c[n].name},l)):a.push(u.a.createElement("option",{key:r,value:c[n].name},l))}),u.a.createElement(m.H,{type:"select",onChange:n.bind(this,"status",r),name:t._id,id:r,key:t.reference},a)}return a}},{key:"programer",value:function(e,t){var a=document.getElementById(t);this.props.loadReducer("loadOrdersUpdate","orders/edit/update",{_id:a.name,file:e,value:a.value})}},{key:"dateExpress",value:function(e){try{return e=(e=(e=e.split("T"))[0]).replace(/-/gi,"/"),e=Date.parse(e),e=Intl.DateTimeFormat("es-CO",{year:"numeric",month:"short",day:"numeric"}).format(e)}catch(t){return 0}}},{key:"toggleAccordion",value:function(e){var t=this.state.accordion.map(function(t,a){return e===a&&!t});this.setState({accordion:t})}},{key:"htmlOrdBody",value:function(e,t,a){var n=this.selects.bind(this),r="order_"+e.order+"_"+e.reference+"_"+a+"_"+t,l=this.props.match.params.Reference==e.reference?"#a9a9a347":"",o=this.dateExpress(e.dispatch),c="Deprisa"==e.carrier?e.trakingUrl+"/Tracking/?track="+e.guide:e.trakingUrl,i="Entregado"!=e.status&&"Cancelacion de pedido"!=e.status?"5px solid rgb(210, 13, 13)":"5px solid rgb(17, 158, 8)";return u.a.createElement("div",{key:r},u.a.createElement(m.v,{isOpen:this.state.accordion[t],"data-parent":"#accordion",id:"collapseOne","aria-labelledby":"headingOne"},u.a.createElement(m.j,{style:{borderBottom:"1px solid rgb(193, 193, 193)",borderLeft:i,borderTop:"1px solid rgb(193, 193, 193)",padding:"10px 10px 10px 10px",backgroundColor:l}},u.a.createElement(m.ib,null,u.a.createElement(m.u,{xs:"2",md:"2"},u.a.createElement(m.ib,null,u.a.createElement(m.u,{xs:"12",md:"12"},n("status",e)),u.a.createElement(m.u,null,"\xa0"),u.a.createElement(m.u,{xs:"12",md:"12"},n("units",e)))),u.a.createElement(m.u,{xs:"1",md:"1",style:{textAlign:"center"}},u.a.createElement("img",{src:"https://solutionssap.com/wp-content/uploads/2016/05/Dummy.png",alt:"Img Prod",style:{maxWidth:"60px",maxHeight:"60px"}})),u.a.createElement(m.u,{xs:"9",md:"9"},u.a.createElement(m.ib,null,u.a.createElement(m.u,{xs:"4",md:"4"},u.a.createElement(m.ib,null,u.a.createElement("strong",null,"Entregado: ")," ",o),u.a.createElement(m.ib,null,u.a.createElement("strong",null,"Estado:"),e.status),u.a.createElement(m.ib,null,u.a.createElement("strong",null,e.skuName)),u.a.createElement(m.ib,null,u.a.createElement("strong",null,"Ref:"),e.reference,"\xa0-\xa0",u.a.createElement("strong",null,"Cod:"),e.code)),u.a.createElement(m.u,{xs:"2",md:"2"},u.a.createElement(m.ib,null,u.a.createElement("strong",null,"Cantidad:"),"(",e.lot,")"),u.a.createElement(m.ib,null,u.a.createElement("strong",null,"Valor:"),"\xa0",u.a.createElement(E.a,{value:null!=e.value?e.value:0,displayType:"text",thousandSeparator:!0,prefix:"$",renderText:function(e){return e}})),u.a.createElement(m.ib,null,u.a.createElement("strong",null,"Descuento:"),"\xa0",u.a.createElement(E.a,{value:null!=e.discount?e.discount:0,displayType:"text",thousandSeparator:!0,prefix:"$",renderText:function(e){return e}})),u.a.createElement(m.ib,null,u.a.createElement("strong",null,"Supplier:"),"\xa0",e.supplier)),u.a.createElement(m.u,{xs:"2",md:"2"},u.a.createElement(m.ib,null,u.a.createElement("strong",null,"Puntos:"),"\xa0",u.a.createElement(E.a,{value:null!=e.points?e.points:0,displayType:"text",thousandSeparator:!0,renderText:function(e){return e}})),u.a.createElement(m.ib,null,u.a.createElement("strong",null,"Precio:"),"\xa0",u.a.createElement(E.a,{value:null!=e.price?e.price:0,displayType:"text",thousandSeparator:!0,prefix:"$",renderText:function(e){return e}})),u.a.createElement(m.ib,null,u.a.createElement("strong",null,"Envio:"),"\xa0",u.a.createElement(E.a,{value:null!=e.shipping?e.shipping:0,displayType:"text",thousandSeparator:!0,prefix:"$",renderText:function(e){return e}})),u.a.createElement(m.ib,null,u.a.createElement("strong",null,"Unidad:"),"\xa0",e.unit)),u.a.createElement(m.u,{xs:"2",md:"2"},u.a.createElement(m.ib,null,u.a.createElement("strong",null,"Total:"),"\xa0",u.a.createElement(E.a,{value:null!=e.totalPay?e.totalPay:0,displayType:"text",thousandSeparator:!0,prefix:"$",renderText:function(e){return e}})),u.a.createElement(m.ib,null,u.a.createElement("strong",null,"Trans:"),"\xa0",u.a.createElement("a",{href:c,target:"_blank"},e.carrier)),u.a.createElement(m.ib,null,u.a.createElement("strong",null,"Guia:"),"\xa0",e.guide)),u.a.createElement(m.u,{xs:"2",md:"2"},u.a.createElement(m.ib,null,u.a.createElement("strong",null,"Factura:"),"\xa0",u.a.createElement("a",{href:e.invoiceUrl,target:"_blank"},e.invoice)),u.a.createElement(m.ib,null,u.a.createElement("strong",null,"Marca:"),"\xa0",e.brand),u.a.createElement(m.ib,null,u.a.createElement("strong",null,"Tienda:"),"\xa0",e.store))))))))}},{key:"htmlOrdHead",value:function(e,t,a,n){var r=this,l=this.dateExpress(e.date),o=this.dateExpress(e.estimatedShippingDate),c=this.dateExpress(e.oderDate),i=n?"red":"green";if(this.state.accordion[t])var s="black",d="fa fa-eye",p="Ocultar";else d="fa fa-eye-slash",s="currentcolor",p="Ver";var E="headOrder"+e.order;return u.a.createElement("div",{key:E},u.a.createElement(m.n,{id:"headingOne",style:{backgroundColor:"rgba(19, 190, 197, 0.45)"},onClick:function(){return r.toggleAccordion(t)}},u.a.createElement(m.ib,null,u.a.createElement(m.u,{xs:"2",md:"2"},u.a.createElement(m.ib,null,u.a.createElement(m.u,{xs:"2",md:"2"},u.a.createElement("div",{className:"fa fa-circle",style:{color:i}},"\xa0")),u.a.createElement(m.u,{xs:"10",md:"10"},u.a.createElement(m.e,{block:!0,color:"link",className:"text-left m-0 p-0",onClick:function(){return r.toggleAccordion(t)},"aria-expanded":this.state.accordion[t],"aria-controls":"collapseOne"},u.a.createElement("div",{className:d,style:{color:s}},"\xa0\xa0",u.a.createElement("u",null,p)))))),u.a.createElement(m.u,{xs:"2",md:"2"},u.a.createElement("strong",null,"Orden:")," ",e.order),u.a.createElement(m.u,{xs:"2",md:"2"},u.a.createElement("strong",null,"Compra:")," ",l),u.a.createElement(m.u,{xs:"3",md:"3"},u.a.createElement("strong",null,"Registro:")," ",c),u.a.createElement(m.u,{xs:"3",md:"3"},u.a.createElement("strong",null,"Estimado Entrega:")," ",o))),u.a.createElement(m.v,{isOpen:this.state.accordion[t],key:"headOrder","data-parent":"#accordion",id:"collapseOne","aria-labelledby":"headingOne"},u.a.createElement(m.j,null,u.a.createElement(m.ib,null,u.a.createElement(m.u,{xs:"3",md:"3"},u.a.createElement(m.ib,null,u.a.createElement(m.u,{xs:"12",md:"12"},u.a.createElement("strong",null,"Celular:")," ",e.phone),u.a.createElement(m.u,{xs:"12",md:"12"},u.a.createElement("strong",null,"Entregar:")," ",e.deliveryOnName))),u.a.createElement(m.u,{xs:"3",md:"3"},u.a.createElement(m.ib,null,u.a.createElement(m.u,{xs:"12",md:"12"},u.a.createElement("strong",null,"Departamento:")," ",e.state),u.a.createElement(m.u,{xs:"12",md:"12"},u.a.createElement("strong",null,"Ciudad:")," ",e.city))),u.a.createElement(m.u,{xs:"6",md:"6"},u.a.createElement(m.ib,null,u.a.createElement(m.u,{xs:"12",md:"12"},u.a.createElement("strong",null,"Direcci\xf3n:")," ",e.address," ",e.addAddress),u.a.createElement(m.u,{xs:"12",md:"12"},u.a.createElement("strong",null,"Barrio:")," ",e.neighborhood)))))))}},{key:"formOrders",value:function(){var e=this.htmlOrdBody.bind(this),t=this.htmlOrdHead.bind(this),a=this.props.obj.listOrdersEdit,n=this.props.obj.listOrdersEditHistory,r=[],l=0,o=!1;return Object.keys(a).forEach(function(n){o||(o="Entregado"!=a[n].status&&"Cancelacion de pedido"!=a[n].status),parseInt(n)+1==a.length&&(r.unshift(t(a[n],l,n,o)),r.unshift(u.a.createElement("div",{key:"headOrders"},u.a.createElement(m.n,{style:{borderBottom:"1px solid rgb(193, 193, 193)",borderTop:"1px solid rgb(193, 193, 193)",padding:"10px 10px 10px 10px",backgroundColor:"#444e57",color:"white",fontSize:"initial"}},u.a.createElement(m.ib,null,u.a.createElement(m.u,null,u.a.createElement("strong",null,"Cliente: "),a[n].customer),u.a.createElement(m.u,null,u.a.createElement("strong",null,"DNI:")," ",a[n].dni),u.a.createElement(m.u,null,u.a.createElement("div",{className:"card-header-actions"},u.a.createElement(d.CSVLink,{data:a},"Descargar Busqueda")))))))),r.push(e(a[n],l,n))}),0==n.length&&void 0==n.length||(o=!1,Object.keys(n).forEach(function(a){var c=[];l++,n[a].forEach(function(t,a){o||(o="Entregado"!=t.status&&"Cancelacion de pedido"!=t.status),c.push(e(t,l,a))}),c.unshift(t(n[a][0],l,a,o)),r.push(c)})),r}},{key:"render",value:function(){return u.a.createElement("div",{className:"animated fadeIn"},u.a.createElement(m.i,null,this.formOrders()))}}]),t}(s.Component));t.default=Object(i.b)(function(e){return{obj:e.DaoOrders}},function(e){return{loadReducer:function(t,a,n){h.a.dbMLoad(e,t,a,n)}}})(f)},320:function(e,t,a){"use strict";var n=a(31),r=a(325),l=n.a.firestore(),o="https://us-central1-serverless-278902.cloudfunctions.net/serverless";function c(e){var t=e.refs,a={},r=0,l=0,o="";for(var c in t)o=document.getElementById(c).value,"latitude"==t[c].props.format?r=parseFloat(o):"longitude"==t[c].props.format?l=parseFloat(o):a[c]=o;return 0!=r&&0!=l&&(a.geopoint=new n.a.firestore.GeoPoint(r,l)),a}var i={dbMLoad:function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"POST",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){},c=o+"/"+a,i={};"GET"!==r&&(i={method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),console.log(c),console.log(i),fetch(c,i).then(function(e){return e.json()}).then(function(a){a.body=n,e({type:t,data:a}),l(a)}).catch(function(e){console.log("Error cargando datos "+e)})},dbFindRegister:function(e,t,a,n,r){l.collection(a).where(n,"==",r).get().then(function(a){a.forEach(function(a){e({type:t,data:a.data()})})}).catch(function(e){console.log("Error getting documents: "+e)})},dbFindColletion:function(e,t,a){l.collection(a).get().then(function(a){e({type:t,data:a})}).catch(function(e){console.log("Error getting documents: "+e)})},dbCreate:function(e,t,a,n,o){var i=c(o);l.collection(a).add(i).then(function(a){i.documentId=a.id,e(Object(r.a)(n)),e({type:t,data:i})}).catch(function(e){console.error("Error al crear documento ",e)})},dbDelete:function(e,t,a,n,o){l.collection(a).doc(o).delete().then(function(){e(Object(r.a)(n)),e({type:t,data:o})}).catch(function(e){console.error("Error removing document: ",e)})},dbUpdate:function(e,t,a,n,o,i){var s=c(o);s.documentId=i,l.collection(a).doc(i).update(s).then(function(){e(Object(r.a)(n)),e({type:t,data:s})})},dbEditFile:function(e,t,a,n,o,c,i){var s={};s[c]=i,l.collection(a).doc(o).update(s).then(function(){e(Object(r.a)(n)),e({type:t,data:s})})}};t.a=i}}]);
//# sourceMappingURL=42.52af4d45.chunk.js.map